(()=>{"use strict";class CoC7Dice{static async roll(modif=0,rollMode=null,hideDice=!1){let alternativeDice="";game.modules.get("dice-so-nice")?.active&&(modif<0?alternativeDice=game.settings.get("CoC7","tenDiePenalty"):modif>0&&(alternativeDice=game.settings.get("CoC7","tenDieBonus")));const roll=await new Roll("1dt"+("+1dt"+(""!==alternativeDice?"["+alternativeDice+"]":"")).repeat(Math.abs(modif))+"+1d10").roll({async:!0}),result={unit:{total:0,results:[]},tens:{total:0,results:[]},total:0,roll};rollMode&&(result.rollMode=rollMode),hideDice&&(result.hideDice=hideDice);for(const d of roll.dice)d instanceof CONFIG.Dice.terms.t?result.tens.results.push(d.total):(result.unit.total=10===d.total?0:d.total,result.unit.results.push(result.unit.total));if(modif<0)result.tens.total=0===result.unit.total&&result.tens.results.includes(0)?100:Math.max(...result.tens.results);else if(0===result.unit.total){const dice=result.tens.results.filter((t=>t>0));result.tens.total=0===dice.length?100:Math.min(...dice)}else result.tens.total=Math.min(...result.tens.results);return result.total=result.unit.total+result.tens.total,result}static async showRollDice3d(roll){if(game.modules.get("dice-so-nice")?.active){const syncDice=game.settings.get("CoC7","syncDice3d"),chatData={whisper:null,blind:!1};ChatMessage.applyRollMode(chatData,game.settings.get("core","rollMode")),await game.dice3d.showForRoll(roll,game.user,syncDice,chatData.whisper,chatData.blind)}}}function createInlineRoll(roll){const data={cls:["inline-roll"],dataset:{}};try{data.cls.push("inline-result"),data.result=roll.total,data.title=roll.formula,data.dataset.roll=escape(JSON.stringify(roll))}catch(err){return null}const a=document.createElement("a");a.classList.add(...data.cls),a.title=data.title;for(const[k,v]of Object.entries(data.dataset))a.dataset[k]=v;return a.innerHTML=`<i class="fas fa-dice-d20"></i> ${data.result}`,a}function isCtrlKey(event){return event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode}class chatHelper{static hyphenToCamelCase(string){return string.replace(/-([a-z])/g,(function(string){return string[1].toUpperCase()}))}static async createMessage(title,message,options={}){const messageData={};messageData.flavor=title,messageData.speaker=options.speaker||ChatMessage.getSpeaker(),options.whisper&&(messageData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER,messageData.whisper=options.whisper),void 0!==options.roll&&(messageData.roll=options.roll,messageData.type=CONST.CHAT_MESSAGE_TYPES.ROLL,messageData.rollMode=CONST.DICE_ROLL_MODES.SELF),messageData.user=game.user.id,messageData.content=message,ChatMessage.create(messageData).then((msg=>msg))}static camelCaseToHyphen(string){return string.replace(/([A-Z])/g,(function(string){return"-"+string.toLowerCase()}))}static getActorFromKey(key){if(!key)return null;if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];return chatHelper.getTokenFromKey(key)?.actor}return game.actors.get(key)||null}static getSpeakerFromKey(actorKey){const speaker={},actor=chatHelper.getActorFromKey(actorKey);if(actorKey.includes(".")){const[sceneId,tokenId]=actorKey.split(".");speaker.token=tokenId,speaker.scene=sceneId,actor.token?.name&&(speaker.alias=actor.token.name),speaker.actor=actor.id}else speaker.actor=actorKey,speaker.alias=actor.name;return speaker}static attachObjectToElement(object,element,objectName=""){for(const prop of Object.keys(object))prop.startsWith("_")||("object"==typeof object[prop]?chatHelper.attachObjectToElement(object[prop],element,`${objectName}:${prop}:`):element.dataset[`${objectName}${prop}`]=object[prop])}static getObjectFromElement(object,element){function deserialize(obj,key,value){if(key.startsWith(":")){const s=key.slice(1),objProp=s.slice(s.indexOf(":")+1),objName=s.substring(0,s.indexOf(":"));void 0===obj[objName]&&(obj[objName]={}),deserialize(obj[objName],objProp,value)}else"true"===value?obj[key]=!0:"false"===value?obj[key]=!1:Number(value).toString()===value?obj[key]=Number(value):obj[key]=value}if(element&&object)for(const prop of Object.keys(element.dataset)){if("template"===prop)return;deserialize(object,prop,element.dataset[prop])}}static getTokenFromKey(key){if(!key)return null;if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId){const tokenDoc=game.actors.tokens[tokenId]?.token;return tokenDoc.object}{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;const token=new Token(tokenData);return token.scene||(token.scene=duplicate(scene.data)),token}}{const actor=game.actors.get(key);return chatHelper.getActorToken(actor)}}static getActorToken(actor){return actor?actor.token||{data:actor.data.token}:null}static getActorImgFromKey(actorKey){if(!actorKey)return null;if(game.settings.get("CoC7","useToken")){const token=chatHelper.getTokenFromKey(actorKey);if(token&&-1===token.data.img.indexOf("*"))return token.data.img}const actor=chatHelper.getActorFromKey(actorKey);return game.settings.get("CoC7","useToken")&&actor.data.token&&-1===actor.data.token.img.indexOf("*")?actor.data.token.img:actor.data.img}static getDistance(startToken,endToken){if(void 0===endToken.center&&void 0!==endToken.data.document?.id&&startToken.scene?.id){const scene=game.scenes.get(startToken.scene.id);if(void 0!==scene?.tokens){const tokens=scene?.tokens.filter((token=>token.actor.id===endToken.data.document.id)).map((token=>token.object));1===tokens.length&&(endToken=tokens[0])}}let distance={gridUnit:0,value:0,unit:canvas.scene.data.gridUnits};if(void 0!==startToken&&void 0!==startToken.center&&void 0!==endToken&&void 0!==endToken.center){const ray=new Ray(startToken.center,endToken.center),segment=[{ray}];if(distance={gridUnit:ray.distance/canvas.scene.data.grid,value:canvas.grid.measureDistances(segment,{gridSpaces:game.settings.get("CoC7","gridSpaces")})[0],unit:canvas.scene.data.gridUnits},game.settings.get("CoC7","distanceElevation")){const elevation=Math.abs((startToken.data.elevation||0)-(endToken.data.elevation||0));distance.value=Math.sqrt(distance.value*distance.value+elevation*elevation)}}else ui.notifications.warn(game.i18n.localize("CoC7.MessageDistanceCalculationFailure"));return distance}static toYards(distance){switch(distance.unit){case"ft":return distance.value/3;case"yd":case"m":default:return distance.value}}}class CoC7Roll{static getFromCard(card){const rollDiv=card.querySelector("div.dice-roll");if(!rollDiv)return null;const roll=new CoC7Roll;return chatHelper.getObjectFromElement(roll,rollDiv),roll}get resultType(){switch(this.successLevel=parseInt(this.successLevel),this.successLevel){case CoC7Check.successLevel.regular:return game.i18n.format("CoC7.RegularSuccess");case CoC7Check.successLevel.hard:return game.i18n.format("CoC7.HardSuccess");case CoC7Check.successLevel.extreme:return game.i18n.format("CoC7.ExtremeSuccess");case CoC7Check.successLevel.critical:return game.i18n.format("CoC7.CriticalSuccess");case CoC7Check.successLevel.fumble:return game.i18n.format("CoC7.Fumble");case CoC7Check.successLevel.failure:return game.i18n.format("CoC7.Failure");default:return null}}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get item(){return this.itemId&&this.actor?this.actor.items.get(this.itemId):null}get skill(){return this.skillId&&this.actor?this.actor.items.get(this.skillId):null}showDiceRoll(){if(game.modules.get("dice-so-nice")?.active){const diceResults=[];for(const dieResult of this.dices.tens)diceResults.push(100===dieResult.value?0:dieResult.value/10);diceResults.push(this.dices.unit.value);const diceData={formula:`${this.dices.tens.length}d100+1d10`,results:diceResults,whisper:null,blind:!1};game.dice3d.show(diceData)}}static getFromElement(element,object=null){if(!element)return;const roll=object||new CoC7Roll;chatHelper.getObjectFromElement(roll,element),roll.dices={tens:[],unit:{}},chatHelper.getObjectFromElement(roll.dices,element.querySelector(".dice-result")),roll.dices.hasBonus=0!==roll.diceModifier,roll.dices.bonus=Math.abs(roll.diceModifier),roll.dices.bonusType=roll.diceModifier<0?game.i18n.format("CoC7.DiceModifierPenalty"):game.i18n.format("CoC7.DiceModifierBonus");const tenDice=element.querySelector(".ten-dice");if(tenDice)for(const d of tenDice.querySelectorAll("li")){const die={selected:!1,isMax:!1,isMin:!1,value:-1};chatHelper.getObjectFromElement(die,d),roll.dices.tens.push(die)}const unitDie=element.querySelector(".unit-die")?element.querySelector(".unit-die").querySelector("li"):null;roll.dices.unit.value=unitDie?parseInt(unitDie.dataset.value):null,roll.increaseSuccess=[];const increaseSuccess=element.querySelector(".increase-success");if(increaseSuccess&&increaseSuccess.querySelectorAll("button"))for(const isl of increaseSuccess.querySelectorAll("button")){const newSuccesLevel={};chatHelper.getObjectFromElement(newSuccesLevel,isl),roll.increaseSuccess.push(newSuccesLevel)}return roll.luckNeeded&&(roll.luckNeededTxt=game.i18n.format("CoC7.SpendLuck",{luckNeededValue:roll.luckNeeded})),object?void 0:roll}static getFromCheck(check){const roll=new CoC7Roll;return roll.rollType=check.rollType,roll.side=check.side,roll.action=check.action,roll.refMessageId=check.refMessageId,roll.referenceMessageId=check.referenceMessageId,roll.successLevel=check.successLevel,roll.difficulty=check.difficulty,roll.skillId=check.skill?check.skill.id:null,roll.itemId=check.item?check.item.id:null,roll.diceMod=check.diceModifier,roll.value=parseInt(check.rawValue),roll.fumble=check.isFumble,roll.critical=check.isCritical,roll.characteristic=check.characteristic?check.characteristic:null,roll.result=check.dice.total,roll.actorKey=check.actor.tokenKey,check.actor.isToken?(roll.tokenId=check.actor.tokenKey,roll.actorId=null):(roll.tokenKey=null,roll.actorId=check.actor.tokenKey),roll}static attachCheckToElement(htmlElement,check){const roll=CoC7Roll.getFromCheck(check);return roll.attachToElement(htmlElement),roll}attachToElement(htmlElement){chatHelper.attachObjectToElement(this,htmlElement)}}class CoC7Damage{static getMainDie(damageString){return damageString.toLowerCase().includes("d20")?"d20":damageString.toLowerCase().includes("d12")?"d12":damageString.toLowerCase().includes("d10")?"d10":damageString.toLowerCase().includes("d8")?"d8":damageString.toLowerCase().includes("d4")?"d4":"d6"}static getFromElement(element,object=null){if(!element)return;const damage=object||{};chatHelper.getObjectFromElement(damage,element);const rolls=element.querySelector(".dice-rolls").querySelectorAll("li");damage.rolls=[];for(const r of rolls){const roll={};chatHelper.getObjectFromElement(roll,r),damage.rolls.push(roll)}return object?void 0:damage}}class CoC7Utilities{static isFormula(x){return"string"==typeof x&&(!!isNaN(Number(x))&&Roll.validate(x))}static ParseChatEntry(html,content){const terms=content.match(/(\S+)/g);if(terms[0]?.toLowerCase().match(/^\/r(oll)?$/)&&terms[1]?.toLowerCase().startsWith("1d%"))return setTimeout((function(){CoC7Utilities._ExecCommand(content)}),200),!1}static async _ExecCommand(content){const options=content.toLowerCase().split(" ")?.join("")?.replace(/\/r(oll)?1d%/,""),check=new CoC7Check;if(options.length){let threshold,flatDiceModifier,flatThresholdModifier,escaped=options,difficulty=CoC7Check.difficultyLevel.regular,diceModifier=0,ask=!1;const thresholdStr=escaped.match(/[^(]+(?=\))/);if(thresholdStr&&thresholdStr.length){threshold=Number(thresholdStr[0]);for(const match of thresholdStr)escaped=escaped.replace(`(${match})`,"")}const difficultyStr=escaped.match(/[^[]+(?=\])/);if(difficultyStr&&difficultyStr.length){difficulty=CoC7Utilities.convertDifficulty(difficultyStr[0]);for(const match of difficultyStr)escaped=escaped.replace(`[${match}]`,"")}if(escaped.includes("?")&&(ask=!0,escaped=escaped.replace("?","")),isNaN(Number(escaped))||(diceModifier=Number(escaped)),ask){const dialogOptions={threshold,modifier:diceModifier,difficulty,askValue:!0},usage=await RollDialog.create(dialogOptions);usage&&(diceModifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")),threshold=Number(usage.get("threshold"))||threshold,flatDiceModifier=Number(usage.get("flatDiceModifier")),flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,threshold&&(check.rawValue=isNaN(threshold)?void 0:threshold)}const speaker=ChatMessage.getSpeaker();if(speaker.token&&speaker.scene){const actor=chatHelper.getActorFromKey(`${speaker.scene}.${speaker.token}`);actor&&(check.actor=actor)}else if(speaker.actor){const actor=game.actors.get(speaker.actor);actor&&(check.actor=actor)}await check.roll(),check.toMessage()}static async test(){ui.notifications.infos("Do some stuff")}static getCreatureSanData(creature){let creatureData,actor;if("CoCActor"===creature.constructor.name&&(actor=creature),"string"==typeof creature&&(actor=CoC7Utilities.getActorFromString(creature)),actor){if(actor.isToken){const specie=game.actors.get(actor.id);creatureData=specie&&specie.sanLossMax!==actor.sanLossMax?{id:actor.token.id,name:actor.name,sanLossMax:actor.sanLossMax,specie:{id:specie.id,name:specie.name,sanLossMax:specie.sanLossMax}}:{id:specie?specie.id:actor.id,name:specie?specie.name:actor.name,sanLossMax:specie?specie.sanLossMax:actor.sanLossMax}}else creatureData={id:actor.id,name:actor.name,sanLossMax:actor.sanLossMax};return creatureData}return"object"==typeof creature?creature:null}static getActorFromString(actorString){let actor;return game.actors.tokens[actorString]?game.actors.tokens[actorString]:(actor=game.actors.get(actorString),actor||(actor=Object.values(game.actors.tokens).find((t=>t.name.toLowerCase()===actorString.toLowerCase())),actor||(actor=game.actors.find((a=>a.name.toLowerCase()===actorString.toLowerCase()))),actor||null))}static getCharacteristicNames(char){const charKey=char.toLowerCase();switch(charKey){case"str":return{short:game.i18n.localize("CHARAC.STR"),label:game.i18n.localize("CHARAC.Strength")};case"con":return{short:game.i18n.localize("CHARAC.CON"),label:game.i18n.localize("CHARAC.Constitution")};case"siz":return{short:game.i18n.localize("CHARAC.SIZ"),label:game.i18n.localize("CHARAC.Size")};case"dex":return{short:game.i18n.localize("CHARAC.DEX"),label:game.i18n.localize("CHARAC.Dexterity")};case"int":return{short:game.i18n.localize("CHARAC.INT"),label:game.i18n.localize("CHARAC.Intelligence")};case"pow":return{short:game.i18n.localize("CHARAC.POW"),label:game.i18n.localize("CHARAC.Power")};default:for(const[,value]of Object.entries(game.system.template.Actor.templates.characteristics.characteristics))if(charKey===game.i18n.localize(value.short).toLowerCase())return{short:game.i18n.localize(value.short),label:game.i18n.localize(value.label)};return null}}static convertDifficulty(difficulty){if("0"===String(difficulty))return CoC7Check.difficultyLevel.regular;if("string"!=typeof difficulty)return difficulty;if(!isNaN(Number(difficulty)))return Number(difficulty);switch(difficulty){case"?":return CoC7Check.difficultyLevel.unknown;case"+":return CoC7Check.difficultyLevel.hard;case"++":return CoC7Check.difficultyLevel.extreme;case"+++":return CoC7Check.difficultyLevel.critical;default:return CoC7Check.difficultyLevel.regular}}static skillCheckMacro(skill,event,options={}){event.preventDefault();const speaker=ChatMessage.getSpeaker();let actor;speaker.token&&(actor=game.actors.tokens[speaker.token]),actor||(actor=game.actors.get(speaker.actor)),actor?actor.skillCheck(skill,event.shiftKey,options):ui.notifications.warn(game.i18n.localize("CoC7.WarnNoActorAvailable"))}static weaponCheckMacro(weapon,event){event.preventDefault();const speaker=ChatMessage.getSpeaker();let actor;if(speaker.token&&(actor=game.actors.tokens[speaker.token]),!actor)if(speaker.scene&&speaker.token){const baseActor=game.actors.get(speaker.actor),token=game.scenes.get(speaker.scene).tokens.get(speaker.token);actor=new(getDocumentClass("Actor"))(baseActor.toJSON(),{parent:token})}else actor=game.actors.get(speaker.actor);actor?actor.weaponCheck(weapon,event.shiftKey):ui.notifications.warn(game.i18n.localize("CoC7.WarnNoActorAvailable"))}static async checkMacro(threshold,event=null){await CoC7Utilities.rollDice(event,{threshold})}static async createMacro(bar,data,slot){if("Item"!==data.type)return;let item,origin,command,packName=null;if(data.pack){const pack=game.packs.get(data.pack);if("Item"!==pack.metadata.entity)return;packName=data.pack,item=await pack.getDocument(data.id),origin="pack"}else data.data?(item=data.data,origin="actor"):(item=game.items.get(data.id),origin="game");if(!item)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroNoItemFound"));if("weapon"!==item.type&&"skill"!==item.type)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroIncorrectType"));if("weapon"===item.type&&(command=`game.CoC7.macros.weaponCheck({name:'${item.name}', id:'${item.id}', origin:'${origin}', pack: '${packName}'}, event);`),"skill"===item.type){if(CoC7Item.isAnySpec(item))return ui.notifications.warn(game.i18n.localize("CoC7.WarnNoGlobalSpec"));command=`game.CoC7.macros.skillCheck({name:'${item.name}', id:'${item.id}', origin:'${origin}', pack: '${packName}'}, event);`}let macro=game.macros.contents.find((m=>m.name===item.name&&m.command===command));return macro||(macro=await Macro.create({name:item.name,type:"script",img:item.img,command})),game.user.assignHotbarMacro(macro,slot),!1}static async toggleDevPhase(toggle){await game.settings.set("CoC7","developmentEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.DevPhaseEnabled"):game.i18n.localize("CoC7.DevPhaseDisabled")),game.socket.emit("system.CoC7",{type:"updateChar"}),CoC7Utilities.updateCharSheets()}static async toggleCharCreation(toggle){await game.settings.set("CoC7","charCreationEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.CharCreationEnabled"):game.i18n.localize("CoC7.CharCreationDisabled")),game.socket.emit("system.CoC7",{type:"updateChar"}),CoC7Utilities.updateCharSheets(),Hooks.call("toggleCharCreation",toggle)}static async startRest(){const actors=game.actors.filter((actor=>actor.hasPlayerOwner));let chatContent=`<i>${game.i18n.localize("CoC7.dreaming")}...</i><br>`;for(const actor of actors)if(["character","npc","creature"].includes(actor.type)){let quickHealer=!1;for(const item of actor.data.items)"talent"===item.type&&item.name===`${game.i18n.localize("CoC7.quickHealer")}`&&(quickHealer=!0);const isCriticalWounds=actor.data.data.status.criticalWounds.value,dailySanityLoss=actor.data.data.attribs.san.dailyLoss,hpValue=actor.data.data.attribs.hp.value,hpMax=actor.data.data.attribs.hp.max,oneFifthSanity=" / "+Math.floor(actor.data.data.attribs.san.value/5),mpValue=actor.data.data.attribs.mp.value,mpMax=actor.data.data.attribs.mp.max;chatContent+=`<br><b>${actor.name}. </b>`,!1===isCriticalWounds&&hpValue<hpMax?game.settings.get("CoC7","pulpRules")&&!0===quickHealer?(chatContent+=`<b style="color:darkolivegreen">${game.i18n.format("CoC7.pulpHealthRecovered",{number:3})}. </b>`,actor.update({"data.attribs.hp.value":actor.data.data.attribs.hp.value+3})):game.settings.get("CoC7","pulpRules")?(chatContent+=`<b style="color:darkolivegreen">${game.i18n.format("CoC7.pulpHealthRecovered",{number:2})}. </b>`,actor.update({"data.attribs.hp.value":actor.data.data.attribs.hp.value+2})):(chatContent+=`<b style="color:darkolivegreen">${game.i18n.localize("CoC7.healthRecovered")}. </b>`,actor.update({"data.attribs.hp.value":actor.data.data.attribs.hp.value+1})):!0===isCriticalWounds&&hpValue<hpMax&&(chatContent+=`<b style="color:darkred">${game.i18n.localize("CoC7.hasCriticalWounds")}. </b>`),dailySanityLoss>0&&(chatContent+=`<b style="color:darkolivegreen">${game.i18n.localize("CoC7.dailySanLossRestarted")}.</b>`,actor.update({"data.attribs.san.dailyLoss":0,"data.attribs.san.oneFifthSanity":oneFifthSanity})),mpValue<mpMax&&(chatContent+=`<b style="color:darkolivegreen">${game.i18n.format("CoC7.magicPointsRecovered")}: 7.</b>`,actor.update({"data.attribs.mp.value":actor.data.data.attribs.mp.value+7}))}const chatData={user:game.user.id,speaker:ChatMessage.getSpeaker(),content:chatContent,type:CONST.CHAT_MESSAGE_TYPES.OTHER};ChatMessage.create(chatData)}static async toggleXPGain(toggle){await game.settings.set("CoC7","xpEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.XPGainEnabled"):game.i18n.localize("CoC7.XPGainDisabled"))}static async rollDice(event,options={}){let diceModifier,difficulty,flatDiceModifier,flatThresholdModifier;options.askValue=!options.threshold;let threshold=options.threshold;if(void 0!==options.modifier&&(diceModifier=Number(options.modifier)),void 0!==options.difficulty&&(difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!event?.shiftKey&&!options.fastForward){const usage=await RollDialog.create(options);usage&&(diceModifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")),threshold=Number(usage.get("threshold")),flatDiceModifier=Number(usage.get("flatDiceModifier")),flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}const actors=[];if(game.user.isGM&&canvas.tokens.controlled.length)for(const token of canvas.tokens.controlled)actors.push(token.actor.tokenKey);else game.user.character&&actors.push(game.user.character.tokenKey);for(const tk of actors){const check=new CoC7Check;check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,check.actor=tk,await check.roll(),check.toMessage()}if(!actors.length){const check=new CoC7Check;check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,await check.roll(),check.toMessage()}}static updateCharSheets(){if(game.user.isGM)for(const a of game.actors.contents)"character"===a?.data?.type&&a?.sheet&&a?.sheet?.rendered&&(a.update({"data.flags.locked":!0}),a.render(!1));else for(const a of game.actors.contents)a.isOwner&&(a.update({"data.flags.locked":!0}),a.render(!1))}static async getDataFromDropEvent(event,entityType="Item"){if(event.originalEvent)return[];try{const dataList=JSON.parse(event.dataTransfer.getData("text/plain"));if("Folder"===dataList.type&&dataList.documentName===entityType){const folder=game.folders.get(dataList.id);return folder?folder.contents:[]}if(dataList.type===entityType){if(dataList.pack){const pack=game.packs.get(dataList.pack);return pack.metadata.entity!==entityType?[]:[await pack.getDocument(dataList.id)]}return dataList.data?[dataList]:[game.items.get(dataList.id)]}return[]}catch(err){return[]}}static async copyToClipboard(text){try{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(text);{const textArea=document.createElement("textarea");return textArea.value=text,textArea.style.position="fixed",textArea.style.left="-999px",textArea.style.top="-999px",document.body.appendChild(textArea),textArea.focus(),textArea.select(),new Promise(((resolve,reject)=>{document.execCommand("copy")?resolve():reject(new Error(game.i18n.localize("CoC7.UnableToCopyToClipboard"))),textArea.remove()})).catch((err=>ui.notifications.error(err)))}}catch(err){ui.notifications.error(game.i18n.localize("CoC7.UnableToCopyToClipboard"))}}static quoteRegExp(string){const len=string.length;let qString="";for(let current,i=0;i<len;++i)if(current=string.charAt(i),current>=" "&&current<="~")"\\"!==current&&"'"!==current||(qString+="\\"),qString+=current.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&");else switch(current){case"\b":qString+="\\b";break;case"\f":qString+="\\f";break;case"\n":qString+="\\n";break;case"\r":qString+="\\r";break;case"\t":qString+="\\t";break;case"\v":qString+="\\v";break;default:qString+="\\u",current=current.charCodeAt(0).toString(16);for(let j=4;--j>=current.length;qString+="0");qString+=current}return qString}}class ChatCardActor{constructor(actorKey=null,fastForward=!1){this.actorKey=actorKey,this.fastForward=fastForward}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get isBlind(){return this.rollMode?(void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind):null}set isBlind(x){this._isBlind=x}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){this._rollMode=x}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}get item(){return this.itemId?this.actor.items.get(this.itemId):null}get weapon(){return this.item}get targetedTokens(){return[...game.user.targets]}get target(){return this.targetToken?this.targetToken:this.targetActor}get targetToken(){return this._targetToken||(this._targetKey?this._targetToken=chatHelper.getTokenFromKey(this._targetKey):(this._targetToken=this.targetedTokens.pop(),this._targetToken?this._targetKey=`${this._targetToken.scene.id}.${this._targetToken.id}`:this._targetToken=null)),this._targetToken}get targetActor(){return this._targetActor||(this.targetToken?this._targetActor=this.targetToken.actor:this._targetActor=chatHelper.getActorFromKey(this._targetKey)),this._targetActor}get targetKey(){return this.targetToken||this.targetActor?this._targetKey:null}get hasTarget(){return!(!this.targetToken&&!this.targetActor)}set targetKey(x){this._targetKey=x}get skills(){return this.actor.getWeaponSkills(this.itemId)}get targetImg(){const img=chatHelper.getActorImgFromKey(this.targetKey);return img||"../icons/svg/mystery-man-black.svg"}get name(){return this.token?this.token.name:this.actor.name}get targetName(){return this.target?this.target.name:"dummy"}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}async say(message,flavor=null){const speakerData={};let speaker;this.actor?(this.token?speakerData.token=this.token:speakerData.actor=this.actor,speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,flavor,content:message};["gmroll","blindroll"].includes(game.settings.get("core","rollMode"))&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}}function replacer(key,value){if(key.startsWith("__"))return;if(["_actor","_creature"].includes(key))return;return["sanCheck","intCheck"].includes(key)?value.JSONRollData:value}class SanCheckCard extends ChatCardActor{constructor(actorKey=null,sanData={},options={}){super(actorKey,void 0!==options.fastForward&&Boolean(options.fastForward)),this.sanData=sanData,this.options=options,sanData.modifier&&!isNaN(Number(sanData.modifier))&&(this.options.sanModifier=Number(sanData.modifier)),sanData.difficulty&&!isNaN(Number(sanData.difficulty))&&(this.options.sanDifficulty=Number(sanData.difficulty)),this.state={}}get isBlind(){return void 0!==this.options.isBlind?Boolean(this.options.isBlind):super.isBlind}get difficulty(){return void 0!==this.options.difficulty?this.options.difficulty:CoC7Check.difficultyLevel.regular}get modifier(){return void 0!==this.options.modifier?this.options.modifier:0}get creature(){return!this.sanData.creatureKey||this.__creature&&"Object"!==this.__creature.constructor.name||(this.__creature=chatHelper.getActorFromKey(this.sanData.creatureKey)),this.__creature}get involuntaryAction(){return!(!this.state.sanRolled||!this.sanCheck.isFailure&&!this.sanCheck.isFumble)}get sanLossFormula(){if(this.state.sanRolled){if(this.sanData.sanMax&&this.sanCheck.failed)return isNaN(Number(this.sanData.sanMax))?this.sanData.sanMax:Number(this.sanData.sanMax);if(this.sanData.sanMin&&this.sanCheck.passed)return isNaN(Number(this.sanData.sanMin))?this.sanData.sanMin:Number(this.sanData.sanMin);const formula=this.creature?.sanLoss(this.sanCheck.passed)||0;return formula?isNaN(Number(formula))?formula:Number(formula):0}return null}get sanLostToThisCreature(){if(this.creature)return this.actor.sanLostToCreature(this.creature)}get maxSanLossToThisCreature(){if(this.creature)return this.actor.maxPossibleSanLossToCreature(this.creature)}get maxSanLoss(){return this.creature?this.maxSanLossToThisCreature:this.sanData.sanMax?isNaN(Number(this.sanData.sanMax))?new Roll(this.sanData.sanMax).evaluate({maximize:!0}).total:Number(this.sanData.sanMax):null}get creatureEncountered(){if(this.creature)return this.actor.creatureEncountered(this.creature)}get creatureSpecieEncountered(){if(this.creature)return this.actor.creatureSpecieEncountered(this.creature)}get firstEncounter(){return!this.actor.mythosInsanityExperienced}get creatureHasSpecie(){return!!CoC7Utilities.getCreatureSanData(this.creature).specie}get isActorLoosingSan(){if(this.actor.isInABoutOfMadness)return!1;if(0===this.sanLossFormula)return!1;if(this.creature){if(!this.creature.sanLossMax)return!1;if(this.actor.sanLostToCreature(this.creature)>=this.creature.sanLossMax)return this.state.immuneToCreature=!0,!1;if(0===this.actor.maxPossibleSanLossToCreature(this.creature))return this.state.immuneToCreature=!0,!1}return!0}get boutDurationText(){if(this.boutDuration){if(this.boutRealTime)return`${this.boutDuration} rounds`;if(this.boutSummary)return`${this.boutDuration} hours`}return null}get alreadyInsaneText(){return this.actor.sanity.underlying.indefintie?game.i18n.localize("CoC7.AlreadyUnderlyingInsanity"):game.i18n.localize("CoC7.AlreadyUnderlyingInsanity")+` (${this.actor.sanity.underlying.durationText})`}get youGainCthulhuMythosString(){return this.mythosGain?game.i18n.format("CoC7.YouGainedCthulhuMythos",{value:this.mythosGain}):null}async advanceState(state){switch(state){case"keepCreatureSanData":this.state.keepCreatureSanData=!0;break;case"involuntaryActionPerformed":this.state[state]=!0,this.isActorLoosingSan||(this.state.finish=!0);break;case"sanLossApplied":await this.applySanLoss();break;case"enterBoutOfMadnessRealTime":this.boutDuration=(await new Roll("1D10").roll({async:!0})).total,this.boutRealTime=!0,this.boutSummary=!1,this.boutResult=await this.actor.enterBoutOfMadness(!0,this.boutDuration),this.state.boutOfMadnessResolved=!0,this.state.boutOfMadnessOver=!1;break;case"enterBoutOfMadnessSummary":this.boutDuration=(await new Roll("1D10").roll({async:!0})).total,this.boutRealTime=!1,this.boutSummary=!0,this.boutResult=await this.actor.enterBoutOfMadness(!1,this.boutDuration),this.state.boutOfMadnessResolved=!0,await this.triggerInsanity();break;case"boutOfMadnessOver":await this.actor.exitBoutOfMadness(),await this.triggerInsanity();break;case"noMythosGained":this.state.cthulhuMythosAwarded=!0,this.mythosGain=0;break;case"cthulhuMythosAwarded":{let amountGained=1;this.actor.mythosInsanityExperienced||(amountGained=5,await this.actor.experienceFirstMythosInsanity()),this.state.cthulhuMythosAwarded=!0;const cthulhuMythosSkill=this.actor.cthulhuMythosSkill,oldValue=cthulhuMythosSkill.data.data.adjustments.experience||0;cthulhuMythosSkill&&await cthulhuMythosSkill.update({"data.adjustments.experience":oldValue+amountGained}),this.mythosGain=amountGained;break}}}async bypassRollSan(){this.isBypassed=!0,this.sanCheck=new CoC7Check,this.sanCheck.actor=this.actorKey,this.sanCheck.attribute="san",this.sanCheck.difficulty=this.options.sanDifficulty||CoC7Check.difficultyLevel.regular,this.sanCheck.diceModifier=this.options.sanModifier||0,await this.sanCheck._perform({forceDSN:!0}),this.state.sanRolled=!0,this.state.involuntaryActionPerformed=this.sanCheck.passed,this.state.sanLossRolled=!0,this.state.ignoreSanCheck=!0,this.sanLoss=this.sanLossFormula}async rollSan(){if(this.sanCheck=new CoC7Check,this.sanCheck.actor=this.actorKey,this.sanCheck.attribute="san",this.sanCheck.difficulty=this.options.sanDifficulty||CoC7Check.difficultyLevel.regular,this.sanCheck.diceModifier=this.options.sanModifier||0,await this.sanCheck._perform({forceDSN:!0}),this.state.sanRolled=!0,this.state.involuntaryActionPerformed=this.sanCheck.passed,this.isActorLoosingSan){if("number"==typeof this.sanLossFormula)this.state.sanLossRolled=!0,this.creature?(this.sanLoss=Math.min(this.sanLossFormula,this.maxSanLossToThisCreature),this.sanLossFormula>this.maxSanLossToThisCreature&&(this.state.limitedLossToCreature=!0)):this.sanLoss=this.sanLossFormula;else if(this.sanCheck.isFumble)this.state.sanLossRolled=!0,this.sanLoss=this.maxSanLoss;else if(this.creature){new Roll(this.sanLossFormula).evaluate({minimize:!0}).total>=this.maxSanLossToThisCreature&&(this.state.sanLossRolled=!0,this.sanLoss=this.maxSanLossToThisCreature,this.state.limitedLossToCreature=!0)}}else this.state.finish=!0,this.actor.isInABoutOfMadness&&(this.state.immuneAlreadyInBout=!0,this.sanCheck.passed||(this.state.finish=!1)),this.state.sanLossRolled=!0,this.state.sanLossApplied=!0,this.state.intRolled=!0,this.state.insanity=!1,this.sanLoss=0}async rollSanLoss(){this.creature,this.sanLossRoll=new Roll(`${this.sanLossFormula}`),await this.sanLossRoll.roll({async:!0}),await CoC7Dice.showRollDice3d(this.sanLossRoll),this.creature&&this.sanLossRoll.total>this.maxSanLossToThisCreature&&(this.state.limitedLossToCreature=!0),this.sanLoss=this.creature?Math.min(this.sanLossRoll.total,this.maxSanLossToThisCreature):this.sanLossRoll.total,this.state.sanLossRolled=!0}async applySanLoss(){if(this.creature?await this.actor.looseSanToCreature(this.sanLoss,this.creature):await this.actor.looseSan(this.sanLoss),this.sanLoss>0&&(this.state.actorLostSan=!0),this.state.sanLossApplied=!0,this.actor.san<=0)return this.state.intRolled=!0,this.state.boutOfMadnessOver=!0,this.state.insanity=!0,this.state.permanentlyInsane=!0,void(this.state.finish=!0);this.sanLoss<5?(this.state.intRolled=!0,this.actor.isInsane?(this.state.insanity=!0,this.state.shaken=!0,this.state.insanityTableRolled=!1,this.state.finish=!1,this.state.intRolled=!0):(this.state.insanity=!1,this.state.shaken=!0,this.state.insanityTableRolled=!0,this.state.finish=!0)):this.state.intRolled=!1;let oneFifthSanity=this.actor.data.data.attribs.san.oneFifthSanity;oneFifthSanity=parseInt(oneFifthSanity.replace(/\D/g,"")),this.actor.dailySanLoss>=oneFifthSanity&&(this.state.insanity=!0,this.state.intRolled=!0,this.state.temporaryInsane=!1,this.state.indefinitelyInsane=!0,this.state.insanityTableRolled=!1,this.state.memoryRepressed=!1,this.state.finish=!1)}async rollInt(){this.intCheck=new CoC7Check,this.intCheck.actor=this.actorKey,this.intCheck.characteristic="int",this.intCheck.difficulty=this.options.intDifficulty||CoC7Check.difficultyLevel.regular,this.intCheck.diceModifier=this.options.intModifier||0,await this.intCheck._perform({forceDSN:!0}),this.state.intRolled=!0,this.intCheck.passed||this.state.alreadyInsane?(this.state.insanity=!0,this.state.temporaryInsane=!0,this.state.indefinitelyInsane=!1,this.state.memoryRepressed=!1):(this.state.insanity=!1,this.state.temporaryInsane=!1,this.state.indefinitelyInsane=!1,this.state.memoryRepressed=!0,this.state.finish=!0)}async triggerInsanity(){if(this.state.boutOfMadnessOver=!0,this.state.indefinitelyInsane&&await this.actor.enterInsanity(!0),this.state.temporaryInsane){if(this.actor.sanity.underlying.active&&this.actor.sanity.underlying.indefintie)return void(this.state.finish=!0);this.insanityDurationRoll=await new Roll("1D10").roll({async:!0}),this.insanityDuration=this.insanityDurationRoll.total,this.actor.sanity.underlying.duration&&(this.insanityDuration+=this.actor.sanity.underlying.duration),await this.actor.enterInsanity(!1,this.insanityDuration)}this.state.finish=!0}async resetCreatureSanData(){await this.actor.resetCreature(this.creature),this.creatureEncountered||this.creatureSpecieEncountered||(this.state.keepCreatureSanData=!0)}async resetSpecieSanData(){await this.actor.resetSpecie(this.creature),this.creatureEncountered||this.creatureSpecieEncountered||(this.state.keepCreatureSanData=!0)}async updateChatCard(){if(this.state.sanRolled&&(this.__inlineSanCheck=this.sanCheck.inlineCheck.outerHTML),this.sanLossRoll){const a=createInlineRoll(this.sanLossRoll);this.__inlineSanLossRoll=a.outerHTML}this.state.intRolled&&this.intCheck&&(this.__inlineIntCheck=this.intCheck.inlineCheck.outerHTML);const html=await renderTemplate(SanCheckCard.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(JSON.stringify(this,replacer));const chatMessage=game.messages.get(this.messageId),msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}static get template(){return"systems/CoC7/templates/chat/cards/san-check.html"}static checkTargets(creatureKey,fastForward=!1){const targets=[...game.user.targets];if(targets.length)for(const t of targets)t.actor.isToken?SanCheckCard.create(t.actor.tokenKey,{creatureKey},{fastForward}):SanCheckCard.create(t.actor.id,{creatureKey},{fastForward})}static async create(...args){const chatCard=new SanCheckCard(...args);chatCard.actor.isInsane&&(chatCard.state.alreadyInsane=!0),chatCard.actor.san<=0&&(chatCard.state.intRolled=!0,chatCard.state.boutOfMadnessOver=!0,chatCard.state.insanity=!0,chatCard.state.permanentlyInsane=!0,chatCard.state.finish=!0),chatCard.creatureEncountered||chatCard.creatureSpecieEncountered||(chatCard.state.keepCreatureSanData=!0);const html=await renderTemplate(SanCheckCard.template,chatCard),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(JSON.stringify(chatCard,replacer)),await chatCard.say(htmlCardElement.outerHTML)}static getFromMessageId(messageId){const message=game.messages.get(messageId),htmlCard=$.parseHTML(message.data.content)[0].querySelector(".chat-card");return SanCheckCard.getFromCard(htmlCard)}static getFromCard(card){const sanCheckCardData=JSON.parse(unescape(card.dataset.object)),sanCheckCard=new SanCheckCard;return Object.assign(sanCheckCard,sanCheckCardData),sanCheckCard.messageId||(sanCheckCard.messageId=card.closest(".message").dataset.messageId),"Object"===sanCheckCard.sanCheck?.constructor?.name&&(sanCheckCard.sanCheck=Object.assign(new CoC7Check,sanCheckCard.sanCheck)),"Object"===sanCheckCard.intCheck?.constructor?.name&&(sanCheckCard.intCheck=Object.assign(new CoC7Check,sanCheckCard.intCheck)),"Object"===sanCheckCard.sanLossRoll?.constructor?.name&&(sanCheckCard.sanLossRoll=Roll.fromData(sanCheckCard.sanLossRoll)),sanCheckCard}}const COC7={eras:{nvct:"CoC7.EraNvct",drka:"CoC7.EraDrka",ddts:"CoC7.EraDdts",glit:"CoC7.EraGlit",1920:"CoC7.Era1920",pulp:"CoC7.EraPulp",mdrn:"CoC7.EraMdrn"},characteristics:{str:"CoC7.CharacStr",con:"CoC7.CharacCon",siz:"CoC7.CharacSiz",dex:"CoC7.CharacDex",app:"CoC7.CharacApp",int:"CoC7.CharacInt",pow:"CoC7.CharacPow",edu:"CoC7.CharacEdu"},skillProperties:{noadjustments:"CoC7.SkillNoAdjustments",noxpgain:"CoC7.SkillNoXpGain",special:"CoC7.SkillSpecial",rarity:"CoC7.SkillRarity",push:"CoC7.SkillPush",combat:"CoC7.SkillCombat",fighting:"CoC7.SkillFighting",firearm:"CoC7.SkillFirearm"},weaponProperties:{melee:"CoC7.Weapon.Property.Melee",rngd:"CoC7.WeaponRngd",mnvr:"CoC7.WeaponProperyManeuver",thrown:"CoC7.Weapon.Property.Thrown",shotgun:"CoC7.Weapon.Property.Shotgun",dbrl:"CoC7.WeaponDbrl",impl:"CoC7.WeaponImpl",brst:"CoC7.WeaponBrst",auto:"CoC7.WeaponAuto",ahdb:"CoC7.WeaponAhdb",addb:"CoC7.WeaponAddb",slnt:"CoC7.WeaponSlnt",spcl:"CoC7.WeaponSpcl",mont:"CoC7.WeaponMont",blst:"CoC7.WeaponBlst",stun:"CoC7.WeaponStun",rare:"CoC7.WeaponRare",burn:"CoC7.Weapon.Property.Burn"},spellProperties:{call:"CoC7.CallSpell",dismiss:"CoC7.DismissSpell",contact:"CoC7.ContactSpell",summon:"CoC7.SummonSpell",bind:"CoC7.BindSpell",enchantment:"CoC7.EnchantmentSpell",gate:"CoC7.GateSpell",combat:"CoC7.CombatSpell"},bookType:{mythos:"CoC7.MythosBook",occult:"CoC7.OccultBook",other:"CoC7.Other"},talentType:{physical:"CoC7.PhysicalTalent",mental:"CoC7.MentalTalent",combat:"CoC7.CombatTalent",miscellaneous:"CoC7.MiscellaneousTalent",basic:"CoC7.BasicTalent",insane:"CoC7.InsaneTalent",other:"CoC7.OtherTalent"},statusType:{mania:"CoC7.Mania",phobia:"CoC7.Phobia"},occupationProperties:{classic:"CoC7.Classic",lovecraftian:"CoC7.Lovecraftian",modern:"CoC7.Modern",pulp:"CoC7.Pulp"},formula:{}};COC7.formula.actor={"@STR":"this.data.data.characteristics.str.value","@CON":"this.data.data.characteristics.con.value","@SIZ":"this.data.data.characteristics.siz.value","@DEX":"this.data.data.characteristics.dex.value","@APP":"this.data.data.characteristics.app.value","@INT":"this.data.data.characteristics.int.value","@POW":"this.data.data.characteristics.pow.value","@EDU":"this.data.data.characteristics.edu.value"},COC7.formula.actorsheet={"@STR":"this.actor.data.data.characteristics.str.value","@CON":"this.actor.data.data.characteristics.con.value","@SIZ":"this.actor.data.data.characteristics.siz.value","@DEX":"this.actor.data.data.characteristics.dex.value","@APP":"this.actor.data.data.characteristics.app.value","@INT":"this.actor.data.data.characteristics.int.value","@POW":"this.actor.data.data.characteristics.pow.value","@EDU":"this.actor.data.data.characteristics.edu.value"},COC7.status={tempoInsane:"tempoInsane",indefInsane:"indefInsane",unconscious:"unconscious",criticalWounds:"criticalWounds",dying:"dying",prone:"prone",dead:"dead"},COC7.newBookName="CoC7.NewBookName",COC7.newSkillName="CoC7.NewSkillName",COC7.newSpellName="CoC7.NewSpellName",COC7.newItemName="CoC7.NewItemName",COC7.newWeaponName="CoC7.NewWeaponName",COC7.creatureFightingSkill="CoC7.creatureFightingSkill",COC7.dodgeSkillName="CoC7.DodgeSkillName",COC7.creditRatingSkillName="CoC7.CreditRatingSkillName",COC7.CthulhuMythosName="CoC7.CthulhuMythosName",COC7.fightingSpecializationName="CoC7.FightingSpecializationName",COC7.firearmSpecializationName="CoC7.FirearmSpecializationName",COC7.combatCards={fightBack:"CoC7.FightBack",dodge:"CoC7.Dodge",maneuver:"CoC7.Maneuver",noResponse:"CoC7.NoResponse"};class CoC7ConCheck{constructor(actorId=null,difficulty=CoC7Check.difficultyLevel.regular){this.check=new CoC7Check(actorId),this.check.characteristic="con",this.check.difficulty=difficulty,this.check.denyPush=!0,this.actorId=actorId}get isBlind(){return void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind}set isBlind(x){this._isBlind=x}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}get actor(){return this.actorId?chatHelper.getActorFromKey(this.actorId):null}set actorId(x){this._actorId=x,this.check.actor=x}get actorId(){return this._actorId?this._actorId:null}get tokenKey(){return this.actor.isToken?this.actor.tokenKey:null}get isSuccess(){return!!this.check&&this.check.isSuccess}get isRolled(){return!!(this.check&&this.check.dices&&this.check.dices.total)}static getFromCard(card){const conCheck=new CoC7ConCheck;chatHelper.getObjectFromElement(conCheck,card);const htmlCheck=card.querySelector(".roll-result");return CoC7Roll.getFromElement(htmlCheck,conCheck.check),conCheck.messageId=card.closest(".message").dataset.messageId,conCheck}async getCheckElement(){const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this.check),htmlElement=$.parseHTML(html)[0];return htmlElement?(htmlElement.classList.remove("chat-card","item-card","roll-card"),htmlElement):null}async toMessage(fastForward=!1){fastForward&&await this.rollCon();const html=await renderTemplate("systems/CoC7/templates/chat/con-check.html",this),htmlElement=$.parseHTML(html)[0];if(fastForward){htmlElement.querySelector(".roll-result").replaceWith(await this.getCheckElement())}const speakerData={};let speaker;this.actor?(this.token?speakerData.token=this.token:speakerData.actor=this.actor,speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,flavor:this.flavor,content:htmlElement.outerHTML};["gmroll","blindroll"].includes(game.settings.get("core","rollMode"))&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async rollCon(){this.check.hideDiceResult=!0,await this.check._perform(),this.isSuccess||this.isBlind||(this.stayAlive?await this.actor.fallDead():await this.actor.fallUnconscious()),this.applied=!0}async updateChatCard(){const html=await renderTemplate("systems/CoC7/templates/chat/con-check.html",this),htmlElement=$.parseHTML(html)[0];if(htmlElement.querySelector(".roll-result").replaceWith(await this.getCheckElement()),this.isBlind||!this.isRolled||this.isSuccess||(this.stayAlive?await this.actor.fallDead():await this.actor.fallUnconscious()),!this.messageId)return;const chatMessage=game.messages.get(this.messageId),msg=await chatMessage.update({content:htmlElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}}class SkillSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".select-skill").click((async event=>this._onSelectSkillClicked(event)))}async _onSelectSkillClicked(event){const li=event.currentTarget.closest(".item");this.data.data.skills[Number(li.dataset.index)].selected=!0,event.currentTarget.style.display="none",this.data.data.added||(this.data.data.added=0),this.data.data.added++;event.currentTarget.closest(".skill-selector").querySelector(".count").innerText=this.data.data.added,this.data.data.added>=this.data.data.optionsCount&&this.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/skill-select.html",data);return new Promise((resolve=>{new SkillSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>{if(!data.added>=data.optionsCount)return resolve(!1);const selected=data.skills.filter((skill=>skill.selected));return resolve(selected)}},{classes:["coc7","dialog","skill-select"]}).render(!0)}))}}class PointSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".item-name").click((async event=>this._onSelectCharacteristic(event))),html.find("button").click((event=>this._onButtonClicked(event)))}async _onSelectCharacteristic(event){const li=event.currentTarget.closest(".item"),itemList=li.closest(".item-list");for(const item of itemList.querySelectorAll(".selectable"))item.classList.remove("selected"),this.data.data.characteristics[item.dataset.key].selected=!1,this.data.data.characteristics[item.dataset.key].optional=!1;$(li).toggleClass("selected"),this.data.data.characteristics[li.dataset.key].selected=!0;li.closest("#skill-selection-form").querySelector(".points").innerText=this.data.data.total+this.data.data.characteristics[li.dataset.key].multiplier*this.data.data.characteristics[li.dataset.key].value;li.closest("#skill-selection-form").querySelector("button.validate").classList.remove("inactive"),this.data.data.resolved=!0}async _onButtonClicked(event){event.preventDefault(),event.currentTarget.classList.contains("inactive")||super.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/point-select.html",data);return new Promise((resolve=>{new PointSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>data.resolved?resolve(data):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class CharacSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".item-name").click((async event=>this._onSelectCharacteristic(event)))}async _onSelectCharacteristic(event){const li=event.currentTarget.closest(".item");this.data.data.selected=li.dataset.key,this.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/char-select.html",data);return new Promise((resolve=>{new CharacSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>data.selected?resolve(data.selected):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class CharacRollDialog extends Dialog{constructor(data,options){super(data,options),this.rolled=data.rolled||{}}activateListeners(html){super.activateListeners(html),html.on("change","input",this._onChangeInput.bind(this)),html.on("submit","form",this._onSubmit.bind(this)),html.on("click",".roll-characteristic",this._onRollCharacteristic.bind(this)),html.on("click",".increase-characteristic",this._onIncreaseCharacteristic.bind(this)),html.on("click",".decrease-characteristic",this._onDecreaseCharacteristic.bind(this)),html.on("click",".reset-characteristic",this._onResetCharacteristic.bind(this)),html.on("click","button",this._onButton.bind(this))}async _onRollCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;await this.rollCharacteristic(characKey)}async _onIncreaseCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.increaseCharacteristic(characKey)}async _onDecreaseCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.decreaseCharacteristic(characKey)}async _onResetCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.resetCharacteristic(characKey)}async _onButton(event){const action=event.currentTarget.dataset.action;if("roll"===action)for(const char of["str","con","siz","dex","app","int","pow","edu","luck"])await this.rollCharacteristic(char);"validate"!==action||event.currentTarget.classList.contains("inactive")||(this.checkTotal(),this.close())}async rollCharacteristic(key){const input=this._element[0].querySelector(`li.item[data-key=${key}]`)?.querySelector("input"),formula=this.data.data.characteristics.rolls[key];if(input&&formula){if(isNaN(Number(formula))){const roll=new Roll(formula);await roll.evaluate({async:!0}),roll.toMessage({flavor:`Rolling characterisitic ${this.data.data.characteristics.list[key].label}: ${formula}`}),input.value=roll.total}else input.value=Number(formula);this.data.data.characteristics.values[key]=Number(input.value),this.rolled||(this.rolled={}),this.rolled[key]=!0}this.checkTotal()}async increaseCharacteristic(key){const input=this._element[0].querySelector(`li.item[data-key=${key}]`)?.querySelector("input");input&&(input.value=Number(input.value)+1,this.data.data.characteristics.values[key]=Number(input.value)),this.checkTotal()}async decreaseCharacteristic(key){const input=this._element[0].querySelector(`li.item[data-key=${key}]`)?.querySelector("input");input&&Number(input.value)>0&&(input.value=Number(input.value)-1,this.data.data.characteristics.values[key]=Number(input.value)),this.checkTotal()}async resetCharacteristic(key){const input=this._element[0].querySelector(`li.item[data-key=${key}]`)?.querySelector("input");input&&(input.value=null,this.data.data.characteristics.values[key]=0),this.checkTotal()}async _onChangeInput(event){event.preventDefault();const input=event.currentTarget,value=Number(input.value);isNaN(value)||(this.data.data.characteristics.values[input.name]=value),this.checkTotal()}checkTotal(){this.data.data.characteristics.points.total=0;for(const[key,value]of Object.entries(this.data.data.characteristics.values))"luck"!==key&&(this.data.data.characteristics.points.total+=value);const validation=this._element[0].querySelector(".points");if(this.data.data.characteristics.points.enabled){if(Number(this.data.data.characteristics.points.total)!==Number(this.data.data.characteristics.points.value))validation.classList.add("warning");else{validation.classList.remove("warning");this._element[0].querySelector("button.validate").classList.remove("inactive"),this.data.data.validate=!0}validation.querySelector(".value").innerText=this.data.data.characteristics.points.value}if(validation.querySelector(".total").innerText=this.data.data.characteristics.points.total,this.data.data.characteristics.rolls.enabled&&this.rolled&&(this.data.data.validate=!Object.entries(this.rolled).find((el=>!el))&&9===Object.entries(this.rolled).length,this.data.data.validate)){this._element[0].querySelector("button.validate").classList.remove("inactive")}}async _onSubmit(event){event.preventDefault()}static async create(data){const rolled={};data.characteristics.points.total=0;for(const[key,value]of Object.entries(data.characteristics.values))"luck"!==key&&(data.characteristics.points.total+=value||0),!isNaN(value)&&value>0&&(rolled[key]=!0);data.characteristics.points.enabled&&Number(data.characteristics.points.total)!==Number(data.characteristics.points.value)&&(data.pointsWarning=!0);const html=await renderTemplate("systems/CoC7/templates/apps/char-roll.html",data);return new Promise((resolve=>{new CharacRollDialog({title:data.title,content:html,data,rolled,buttons:{},close:()=>data.validate?resolve(!0):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class SkillSpecSelectDialog{static async create(skills,specializationName,baseValue=null,name=null){const html=await renderTemplate("systems/CoC7/templates/apps/skill-spec-select.html",{hasSkills:skills.length>0,skills,base:baseValue,name});return new Promise((resolve=>{let formData=null;new Dialog({title:name?game.i18n.format("CoC7.SkillSelectBase",{name}):game.i18n.format("CoC7.SkillSpecSelectTitle",{specialization:specializationName}),content:html,buttons:{validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#skill-select-form")),resolve(formData))}},default:"validate",close:()=>resolve(!1)}).render(!0)}))}}class CoC7MeleeResoltion{constructor(initiatorMessage=null,targetMessage=null,messageId=null){this.initiatorMessage=initiatorMessage,this.targetMessage=targetMessage,this.messageId=messageId}async preCreateMessage(){const html=await renderTemplate(this.template,this),chatData={user:game.user.id,content:html},rollMode=game.settings.get("core","rollMode");["gmroll","blindroll"].includes(rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;const chatMessage=await ChatMessage.create(chatData);return this.messageId=chatMessage.id,chatMessage}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get target(){return this.targetMessage?CoC7MeleeTarget.getFromMessageId(this.targetMessage):null}get targetToken(){return this.target?chatHelper.getTokenFromKey(this.target.actorKey):null}get initiator(){return this.initiatorMessage?CoC7MeleeInitiator.getFromMessageId(this.initiatorMessage):null}get initiatorToken(){return this.initiator?chatHelper.getTokenFromKey(this.initiator.actorKey):null}async resolve(){if(this.target)switch(this.target.action){case"noResponse":this.initiator.roll.successLevel>0?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.action="roll-melee-damage",this.rollDamage=!0):(this.resultString=game.i18n.format("CoC7.InitiatorMissed",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!1),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target;break;case"dodge":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.action="roll-melee-damage",this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.DodgeSuccess",{name:this.target.name}),this.winner=this.target,this.looser=this.initiator,this.winnerImg=this.target.skill.data.img,this.winnerTitle=this.target.skill.name,this.action="dodge",this.rollDamage=!1);break;case"fightBack":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>=this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.target.name}),this.winner=this.target,this.winnerImg=this.target.weapon.img,this.winnerTitle=this.target.weapon.name,this.looser=this.initiator,this.rollDamage=!0);break;case"maneuver":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>=this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.ManeuverSuccess",{name:this.target.name}),this.winner=this.target,this.winnerImg=this.target.skill.data.img,this.winnerTitle=this.target.skill.name,this.looser=this.initiator,this.rollDamage=!1)}else this.initiator.roll.successLevel>0?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!0):(this.resultString=game.i18n.format("CoC7.InitiatorMissed",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!1);this.winner&&(this.winner.roll.successLevel>=CoC7Check.successLevel.extreme?this.winner.roll.criticalDamage=!0:this.winner.roll.criticalDamage=!1),this.resolved=!0;const html=await renderTemplate(this.template,this);if(this.messageId){const message=game.messages.get(this.messageId),speakerData={};this.winner&&(this.winner.token&&(speakerData.token=this.winner.token.documment),this.winner.actor&&(speakerData.actor=this.winner.actor));const speaker=this.winner?ChatMessage.getSpeaker(speakerData):null,user=this.winner&&this.winner.actor.user?this.winner.actor.user:game.user;let msg;return message?(msg=speaker?await message.update({user:user.id,speaker,content:html}):await message.update({user:user.id,content:html}),await ui.chat.updateMessage(msg,!1),msg):void ui.notifications.warn("Resolition card missing, was deleted ?")}}get template(){return"systems/CoC7/templates/chat/combat/melee-resolution.html"}}class CoC7MeleeTarget extends ChatCardActor{constructor(actorKey,parentMessageId=null,fastForward=!1){super(actorKey,fastForward),this.actorKey=actorKey,this.initiatorKey=null,this.parentMessageId=parentMessageId,this.fastForward=fastForward,this.resolved=!1,this.outnumbered=!1,this.surprised=!1,this.autoSuccess=!1,this.advantage=!1,this.disadvantage=!1,this.messageId=null,this.skillId=null,this.itemId=null,this.dodging=!1,this.notResponding=!1,this.fightingBack=!1,this.maneuvering=!1}get actionSelected(){return this.dodging||this.notResponding||this.fightingBack||this.maneuvering}get action(){return this.dodging?"dodge":this.notResponding?"noResponse":this.fightingBack?"fightBack":this.maneuvering?"maneuver":null}get weapon(){return this.actor.items.get(this.itemId)}get skill(){return this.actor.items.get(this.skillId)}set initiatorKey(x){this._initiatorKey=x,this.targetKey=x}get initiatorKey(){return this._initiatorKey||(!this._initiator&&this.parentMessageId&&(this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId)),this._initiator&&(this._initiatorKey=this._initiator.actorKey)),this._initiatorKey?this._initiatorKey:(ui.notifications.error(`No initiator found for target : ${this.actor.name}`),null)}get initiator(){if(!this.initiatorKey){if(!this.parentMessageId)return null;this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId),this.initiatorKey=this._initiator.actorKey}return chatHelper.getActorFromKey(this.initiatorKey)}get meleeInitiator(){return this._initiator||(this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId)),this._initiator}get template(){return"systems/CoC7/templates/chat/combat/melee-target.html"}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.data.content)[0],target=CoC7MeleeTarget.getFromCard(card,messageId);return target.messageId=messageId,target}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".melee.target"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const target=CoC7MeleeTarget.getFromCard(card);target.toggleFlag(flag),target.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;this[flag]=!this[flag]}async createChatCard(){const html=await renderTemplate(this.template,this),speakerData={},token=chatHelper.getTokenFromKey(this.actorKey);token?speakerData.token=token.document:speakerData.actor=this.actor;const speaker=ChatMessage.getSpeaker(speakerData);this.actor.isToken&&(speaker.alias=this.actor.token.name);let user=game.user;if(void 0===this.actor.user){let owners=[];const gms=game.users.filter((a=>a.isGM)).map((a=>a.id));for(const[k,v]of Object.entries(this.actor.data.permission))if(v===CONST.ENTITY_PERMISSIONS.OWNER){if("default"===k){owners=game.users.map((a=>a.id));break}gms.includes(k)||owners.push(k)}let content="";switch(owners.length){case 0:break;case 1:void 0!==game.users.get(owners[0])&&(user=game.users.get(owners[0]));break;default:content="<p>"+game.i18n.localize("CoC7.MessageSelectSingleUserForTarget"),content+='<form id="selectform"><select name="user">';for(const k of owners)content=content+'<option value="'+k+'">'+game.users.get(k).name+"</option>";content+="</select></form></p>",await Dialog.prompt({title:game.i18n.localize("CoC7.MessageTitleSelectSingleUserForTarget"),content,callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)"user"===name&&(user=game.users.get(value))}})}}else void 0!==this.actor.user&&(user=this.actor.user);const chatData={user:user.id,speaker,content:html};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;const message=await ChatMessage.create(chatData);return this.messageId=message.id,message}async updateChatCard(){const message=game.messages.get(this.messageId);if(!game.user.isGM&&message.user.id!==game.user.id)return void ui.notifications.info(game.i18n.localize("CoC7.UnableToInteractWithChatCard"));const html=await renderTemplate(this.template,this),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}async getUpdatedChatCard(){renderTemplate(this.template,this).then((html=>html))}static async updateSelected(card,event){const target=CoC7MeleeTarget.getFromCard(card);switch(event.currentTarget.dataset.action){case"dodge":target.dodging=!0,target.notResponding=!1,target.fightingBack=!1,target.maneuvering=!1,target.skillId=event.currentTarget.dataset.skillId,target.itemId=null;break;case"noResponse":target.dodging=!1,target.notResponding=!0,target.fightingBack=!1,target.maneuvering=!1,target.skillId=null,target.itemId=null;break;case"fightBack":target.dodging=!1,target.notResponding=!1,target.fightingBack=!0,target.maneuvering=!1,target.skillId=event.currentTarget.dataset.skillId,target.itemId=event.currentTarget.dataset.weaponId;break;case"maneuver":target.dodging=!1,target.notResponding=!1,target.fightingBack=!1,target.maneuvering=!0,target.skillId=event.currentTarget.dataset.skillId,target.itemId=null}return target.updateChatCard(),target}async performSkillCheck(skillId=null,publish=!1){const check=new CoC7Check;return check.isBlind=!1,check.isUnkonwn=!1,check.referenceMessageId=this.messageId,check.rollType="opposed",check.side="target",check.action=this.action,check.actor=this.actor,check.item=this.itemId,check.skill=skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.diceModifier=0,this.disadvantage&&(check.diceModifier-=1),this.advantage&&(check.diceModifier+=1),await check.roll(),this.check=check,this.rolled=!0,this.resolved=!0,publish&&check.toMessage(),check}async publishNoReponseResult(){this.rolled=!0,this.resolved=!0,this.notResponding=!0;const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id,await this.updateChatCard()}async publishCheckResult(check=null){if(!check&&!this.check)return null;if(check&&(this.check=check),this.roll=CoC7Roll.getFromCheck(this.check),this.rolled=!0,this.roll.rollIcons=[],this.roll.critical){this.roll.rollColor="goldenrod",this.roll.rollTitle=game.i18n.localize("CoC7.CriticalSuccess");for(let index=0;index<4;index++)this.roll.rollIcons.push("medal")}else if(this.roll.fumble){this.roll.rollColor="darkred",this.roll.rollTitle=game.i18n.localize("CoC7.Fumble");for(let index=0;index<4;index++)this.roll.rollIcons.push("spider")}else if(this.roll.success){this.roll.rollColor="goldenrod",CoC7Check.successLevel.regular===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.RegularSuccess")),CoC7Check.successLevel.hard===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.HardSuccess")),CoC7Check.successLevel.extreme===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.ExtremeSuccess"));for(let index=0;index<this.roll.successLevel;index++)this.roll.rollIcons.push("star")}else this.roll.rollColor="black",this.roll.rollTitle=game.i18n.localize("CoC7.Failure"),this.roll.rollIcons.push("skull");const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id,await this.updateChatCard()}static getFromCard(card,messageId=null){const actorKey=card.dataset.actorKey,parentMessageId=card.dataset.parentMessageId,fastForward="true"===card.dataset.fastForward,target=new CoC7MeleeTarget(actorKey,parentMessageId,fastForward);return target.roll=CoC7Roll.getFromCard(card),chatHelper.getObjectFromElement(target,card),card.closest(".message")?target.messageId=card.closest(".message").dataset.messageId:target.messageId=messageId,target}upgradeRoll(luckAmount,newSuccessLevel,oldCard){this.actor.spendLuck(luckAmount)||ui.notifications.error(`${this.actor.name} didn't have enough luck to pass the check`),this.roll.value=null,this.roll.successLevel=newSuccessLevel,this.roll.luckSpent=!0,oldCard.dataset.processed=!1;const diceRolls=oldCard.querySelector(".dice-roll");diceRolls.dataset.value=null,diceRolls.dataset.successLevel=newSuccessLevel,diceRolls.dataset.luckSpent=!0;const resulDetails=oldCard.querySelector(".result-details"),diceTotal=oldCard.querySelector(".dice-total");switch(newSuccessLevel){case CoC7Check.successLevel.regular:diceTotal.innerText=game.i18n.localize("CoC7.RegularSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:diceTotal.innerText=game.i18n.localize("CoC7.HardSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:diceTotal.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:diceTotal.innerText=game.i18n.localize("CoC7.CriticalSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}diceTotal.classList.replace("failure","success"),oldCard.querySelector(".card-buttons").remove(),oldCard.querySelector(".dice-tooltip").style.display="none",CoC7Chat.updateChatCard(oldCard)}}class CoC7RangeInitiator{constructor(actorKey=null,itemId=null,fastForward=!1){this.actorKey=actorKey,this.itemId=itemId,this.fastForward=fastForward,this.resolved=!1,this.cover=!1,this.surprised=!1,this.autoSuccess=!1,this.advantage=!1,this.disadvantage=!1,this.messageId=null,this.targetCard=null,this.rolled=!1,this.singleShot=!1,this.multipleShots=!1,this.burst=!1,this.fullAuto=!1,this.tokenKey=null,this.aimed=!1,this.totalBulletsFired=0,this._targets=[];for(const t of[...game.user.targets]){const target=new CoC7RangeTarget(`${t.scene.id}.${t.id}`);target.token=t,this._targets.push(target)}if(this._targets.length)this._targets[0].active=!0;else{const target=new CoC7RangeTarget;target.active=!0,this._targets.push(target)}if(actorKey){const actor=chatHelper.getActorFromKey(actorKey);if(this.token=chatHelper.getTokenFromKey(actorKey),this.token&&(this.tokenKey=actor.tokenKey),itemId){actor.items.get(itemId)&&(this.weapon.singleShot?this.singleShot=!0:this.weapon.data.data.properties.auto&&(this.fullAuto=!0))}}if(this.tokenKey)for(const t of this._targets)if(t.token&&this.token){t.distance=chatHelper.getDistance(t.token,this.token),t.roundedDistance=Math.round(100*t.distance.value)/100,t.distanceUnit=t.distance.unit;const distInYd=Math.round(100*chatHelper.toYards(t.distance))/100;if(this.actor){t.pointBlankRange=!1;distInYd<=this.actor.data.data.characteristics.dex.value/15&&(t.pointBlankRange=!0)}this.weapon&&this.weapon.baseRange&&(t.baseRange=!1,t.longRange=!1,t.extremeRange=!1,t.outOfRange=!1,this.weapon.data.data.properties.shotgun?(distInYd<=this.weapon.baseRange&&(t.baseRange=!0),distInYd>this.weapon.baseRange&&distInYd<=this.weapon.longRange&&(t.longRange=!0),distInYd>this.weapon.longRange&&distInYd<=this.weapon.extremeRange&&(t.extremeRange=!0),distInYd>this.weapon.extremeRange&&(t.outOfRange=!0)):(distInYd<=this.weapon.baseRange&&(t.baseRange=!0),distInYd>this.weapon.baseRange&&distInYd<=2*this.weapon.baseRange&&(t.longRange=!0),distInYd>2*this.weapon.baseRange&&distInYd<=4*this.weapon.baseRange&&(t.extremeRange=!0),distInYd>4*this.weapon.baseRange&&(t.outOfRange=!0)),t.baseRange||t.longRange||t.extremeRange||t.outOfRange||(t.baseRange=!0))}else t.baseRange=!0}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}get actor(){return chatHelper.getActorFromKey(this.actorKey)}get item(){return this.actor.items.get(this.itemId)}get weapon(){return this.item}get targets(){return this._targets||(this._targets=[]),this._targets}get target(){return this.targets&&this.targets.length?this.targets.pop():null}get skills(){return this.actor.getWeaponSkills(this.itemId)}get mainWeaponSkill(){return this.actor.items.get(this.weapon.data.data.skill.main.id)}get autoWeaponSkill(){return this.weapon.data.data.skill.alternativ.id?this.actor.items.get(this.weapon.data.data.skill.alternativ.id):this.mainWeaponSkill}get autoFire(){return this.burst||this.fullAuto}get multiTarget(){return this.fullAuto||this.multipleShots}get aiming(){return void 0===this._aiming&&(this._aiming=this.actor.getActorFlag("aiming")),this._aiming}get activeTarget(){return this._targets.length?this._targets.find((t=>t.active)):null}get shots(){return void 0===this._shots&&(this._shots=[]),this._shots}get currentShotRank(){return this.shots.length+1}get activeTargetShotDifficulty(){return this.shotDifficulty()}set aiming(b){this._aiming=b}get didAnyShotHit(){let anyHit=!1;for(const r of this.rolls)anyHit=anyHit||r.isSuccess;return anyHit}get successfulHits(){const hits=[];for(let index=0;index<this.rolls.length;index++)if(this.rolls[index].isSuccess){const hit={roll:this.rolls[index],shot:this.shots[index]};hits.push(hit)}return 0!==hits.length?hits:null}get shotFired(){return this.shots?this.shots.length:0}get totalAmmo(){return this.weapon.getBulletLeft()}get maxShots(){return this.fullAuto?"":this.weapon.data.data.usesPerRound.max?parseInt(this.weapon.data.data.usesPerRound.max):1}get ignoreAmmo(){return game.settings.get("CoC7","disregardAmmo")}get ignoreUsesPerRound(){return game.settings.get("CoC7","disregardUsePerRound")}get outOfAmmo(){return!this.ignoreAmmo&&this.totalBulletsFired>=this.weapon.getBulletLeft()}get outOfShots(){return!this.ignoreUsesPerRound&&(!!this.shots&&this.shots.length>=this.maxShots)}get volleySize(){if(!this.weapon.data.data.properties.auto)return 1;if(this._volleySize)return this._volleySize;const size=Math.floor(this.autoWeaponSkill.value/10);return size<3?3:size}set volleySize(x){x>=Math.floor(this.autoWeaponSkill.value/10)?this._volleySize=Math.floor(this.autoWeaponSkill.value/10):x<=3&&(this._volleySize=3),this._volleySize=parseInt(x)}get isVolleyMinSize(){return 3===this.volleySize}get isVolleyMaxSize(){return(Math.floor(this.autoWeaponSkill.value/10)<3?3:Math.floor(this.autoWeaponSkill.value/10))===this.volleySize}getTargetFromKey(key){return this._targets.find((t=>key===t.actorKey))}calcTargetsDifficulty(){for(const t of this.targets)t.shotDifficulty=this.shotDifficulty(t)}shotDifficulty(t=null){const target=t||this.activeTarget;let damage=this.weapon.data.data.range.normal.damage;this.weapon.data.data.properties.shotgun&&(t.longRange&&(damage=this.weapon.data.data.range.long.damage),t.extremeRange&&(damage=this.weapon.data.data.range.extreme.damage));let difficulty,modifier=target.modifier;difficulty=this.weapon.data.data.properties.shotgun?1:target.difficulty;let difficultyName="";if(this.aiming&&1===this.currentShotRank&&modifier++,this.advantage&&modifier++,this.disadvantage&&modifier--,this.reload&&modifier--,this.multipleShots&&!this.fullAuto&&modifier--,this.fullAuto&&(modifier-=this.currentShotRank-1),modifier<-2){difficulty+=Math.abs(modifier+2),difficulty>CoC7Check.difficultyLevel.critical&&(difficulty=CoC7Check.difficultyLevel.impossible),modifier=-2}return CoC7Check.difficultyLevel.regular===difficulty&&(difficultyName="Regular"),CoC7Check.difficultyLevel.hard===difficulty&&(difficultyName="Hard"),CoC7Check.difficultyLevel.extreme===difficulty&&(difficultyName="Extreme"),CoC7Check.difficultyLevel.critical===difficulty&&(difficultyName="Critical"),CoC7Check.difficultyLevel.impossible===difficulty&&(difficultyName="Impossible"),{level:difficulty,name:difficultyName,modifier,damage,impossible:difficulty===CoC7Check.difficultyLevel.impossible}}addShotAtCurrentTarget(){this.calcTargetsDifficulty();const shot={target:this.activeTarget,extremeRange:this.activeTarget.extremeRange,actorKey:this.activeTarget.actorKey,actorName:this.activeTarget.name,difficulty:this.activeTarget.shotDifficulty.level,modifier:this.activeTarget.shotDifficulty.modifier,damage:this.activeTarget.shotDifficulty.damage,bulletsShot:1,transitBullets:0,bulletsShotTransit:1,transit:!1};let bulletLeft=this.totalAmmo-this.totalBulletsFired;if(this.fullAuto){if(this.currentShotRank>1){const previousShot=this.shots[this.currentShotRank-2];if(previousShot.actorKey!==this.activeTarget.actorKey){const distance=chatHelper.getDistance(chatHelper.getTokenFromKey(previousShot.actorKey),chatHelper.getTokenFromKey(this.activeTarget.actorKey));shot.transitBullets=Math.floor(chatHelper.toYards(distance)),shot.transitBullets>=bulletLeft&&!this.ignoreAmmo&&(shot.transitBullets=bulletLeft,bulletLeft=0),this.totalBulletsFired=parseInt(this.totalBulletsFired)+shot.transitBullets,shot.transit=!0}}shot.bulletsShot=this.volleySize,shot.bulletsShot<=3&&(shot.bulletsShot=3),shot.bulletsShot>=bulletLeft&&!this.ignoreAmmo&&(shot.bulletsShot=bulletLeft,bulletLeft=0),shot.bulletsShotTransit=shot.bulletsShot+shot.transitBullets}this.burst&&(shot.bulletsShot=parseInt(this.weapon.data.data.usesPerRound.burst)?parseInt(this.weapon.data.data.usesPerRound.burst):1,shot.bulletsShot>=bulletLeft&&!this.ignoreAmmo&&(shot.bulletsShot=bulletLeft,bulletLeft=0)),this.totalBulletsFired=parseInt(this.totalBulletsFired)+shot.bulletsShot,this.aiming&&(this.aiming=!1,this.aimed=!0),this.shots.push(shot)}get template(){return"systems/CoC7/templates/chat/combat/range-initiator.html"}async createChatCard(){this.calcTargetsDifficulty();const html=await renderTemplate(this.template,this),speakerData={},token=chatHelper.getTokenFromKey(this.actorKey);token?speakerData.token=token.document:speakerData.actor=this.actor;const speaker=ChatMessage.getSpeaker(speakerData),chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,content:html},rollMode=game.settings.get("core","rollMode");["gmroll","blindroll"].includes(rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;return await ChatMessage.create(chatData)}async updateChatCard(){this.calcTargetsDifficulty();const html=await renderTemplate(this.template,this),message=game.messages.get(this.messageId),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;"singleShot"===flag||"multipleShots"===flag||"fullAuto"===flag?(this.singleShot=!1,this.multipleShots=!1,this.fullAuto=!1,"fullAuto"===flag&&(this.burst=!1),this[flag]=!0):"burst"===flag?(this.fullAuto=!1,this.singleShot||this.multipleShots||(this.singleShot=!0),this.burst=!this.burst):this[flag]=!this[flag]}async resolveCard(){if(this.rolls=[],this.multiTarget){let weaponMalfunction=!1,index=0;for(;!weaponMalfunction&&this.shots.length>index;){const roll=await this.shootAtTarget(this.shots[index]);roll.dice?.roll&&await CoC7Dice.showRollDice3d(roll.dice.roll),await this.weapon.shootBullets(parseInt(this.shots[index].bulletsShot)+parseInt(this.shots[index].transitBullets)),roll.hasMalfunction&&(roll.isSuccess=!1,weaponMalfunction=!0),index++,this.rolls.push(roll)}}else{const roll=await this.shootAtTarget();roll.dice?.roll&&await CoC7Dice.showRollDice3d(roll.dice.roll);let bulletFired=this.burst?parseInt(this.weapon.data.data.usesPerRound.burst):1;bulletFired>=this.totalAmmo&&(bulletFired=this.totalAmmo);const shot={target:this.activeTarget,extremeRange:this.activeTarget.extremeRange,actorKey:this.activeTarget.actorKey,actorName:this.activeTarget.name,difficulty:this.activeTarget.shotDifficulty.level,modifier:this.activeTarget.shotDifficulty.modifier,damage:this.activeTarget.shotDifficulty.damage,bulletsShot:bulletFired,transitBullets:0,transit:!1};await this.weapon.shootBullets(bulletFired),roll.hasMalfunction&&(roll.isSuccess=!1),this.shots.push(shot),this.rolls.push(roll)}this.resolved=!0,this.rolled=!0,await this.updateChatCard()}async shootAtTarget(shot=null){const target=shot?this.getTargetFromKey(shot.actorKey):this.activeTarget,check=new CoC7Check;return check.actorKey=this.actorKey,check.actor=this.actorKey,check.item=this.itemId,check.isBlind=!1,check.isUnkonwn=!1,this.autoFire?check.skill=this.autoWeaponSkill:check.skill=this.mainWeaponSkill,this.multiTarget?(check.difficulty=shot.difficulty,check.diceModifier=shot.modifier):(this.calcTargetsDifficulty(),this.totalBulletsFired=parseInt(this.totalBulletsFired)+1,this.aiming&&(this.aiming=!1,this.aimed=!0),check.difficulty=this.activeTarget.shotDifficulty.level,check.diceModifier=this.activeTarget.shotDifficulty.modifier),check.details=`${game.i18n.localize("CoC7.Target")}: ${target.name}`,check.targetKey=target.actorKey,await check.roll(),check}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.data.content)[0],initiator=CoC7RangeInitiator.getFromCard(card,messageId);return initiator.messageId=messageId,initiator}changeVolleySize(x){this.volleySize=this.volleySize+x,this.updateChatCard()}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".range.initiator"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const initiator=CoC7RangeInitiator.getFromCard(card);if(event.currentTarget.classList.contains("target-flag")){const target=event.currentTarget.closest(".target"),key=parseInt(target.dataset.targetKey);initiator.targets[key].toggleFlag(camelFlag)}else initiator.toggleFlag(camelFlag);initiator.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}passRoll(rollIndex){const roll=this.rolls[rollIndex],luckAmount=parseInt(roll.luckNeeded);this.actor.spendLuck(luckAmount)?(roll.successLevel=roll.difficulty,roll.isSuccess=!0,roll.luckSpent=!0,this.updateChatCard()):ui.notifications.error(`${this.actor.name} does not have enough luck to pass the check`)}upgradeRoll(rollIndex,upgradeindex){const roll=this.rolls[rollIndex],increasedSuccess=roll.increaseSuccess[upgradeindex],luckAmount=parseInt(increasedSuccess.luckAmount);if(!this.actor.spendLuck(luckAmount))return void ui.notifications.error(`${this.actor.name} does not have enough luck to pass the check`);const newSuccessLevel=parseInt(increasedSuccess.newSuccessLevel);roll.successLevel=newSuccessLevel,roll.difficulty<=newSuccessLevel&&(roll.isSuccess=!0),roll.luckSpent=!0,this.updateChatCard()}static getFromCard(card,messageId=null){const rangeInitiator=new CoC7RangeInitiator;rangeInitiator._targets=[],messageId?rangeInitiator.messageId=messageId:card.closest(".message")&&(rangeInitiator.messageId=card.closest(".message").dataset.messageId),chatHelper.getObjectFromElement(rangeInitiator,card);const cardTargets=card.querySelectorAll(".target");for(const t of cardTargets){const target=CoC7RangeTarget.getFromElement(t);rangeInitiator.targets.push(target)}const cardShots=card.querySelectorAll(".shot");if(cardShots)for(const s of cardShots){const shot={};chatHelper.getObjectFromElement(shot,s),rangeInitiator.shots.push(shot)}rangeInitiator.rolls=[];const rolls=card.querySelectorAll(".roll-result");for(const r of rolls){const roll=CoC7Roll.getFromElement(r);rangeInitiator.rolls.push(roll)}rangeInitiator.damage=[];const damageRolls=card.querySelectorAll(".damage-results");for(const dr of damageRolls){const damageRoll=CoC7Damage.getFromElement(dr);rangeInitiator.damage.push(damageRoll)}return rangeInitiator}async rollDamage(){this.damage=[];const hits=this.successfulHits;for(let i=0;i<hits.length;i++){const h=hits[i],volleySize=parseInt(h.shot.bulletsShot),damageRolls=[];let damageFormula=String(h.shot.damage);damageFormula&&""!==damageFormula||(damageFormula="0");const damageDie=CoC7Damage.getMainDie(damageFormula),maxDamage=new Roll(damageFormula).evaluate({maximize:!0}).total,criticalDamageFormula=this.weapon.impale?`${damageFormula} + ${maxDamage}`:`${maxDamage}`,criticalDamageDie=CoC7Damage.getMainDie(criticalDamageFormula);let impalingShots=0,successfulShots=0,critical=!1;(this.fullAuto||this.burst)&&(successfulShots=Math.floor(volleySize/2)),0===successfulShots&&(successfulShots=1),h.roll.successLevel>=CoC7Check.difficultyLevel.extreme&&(impalingShots=successfulShots,successfulShots=volleySize-impalingShots,critical=!0,CoC7Check.difficultyLevel.critical!==h.roll.successLevel&&(CoC7Check.difficultyLevel.extreme<=h.roll.difficulty||h.shot.extremeRange)&&(successfulShots=volleySize,impalingShots=0,critical=!1));let total=0;for(let index=0;index<successfulShots;index++){const roll=new Roll(damageFormula);await roll.evaluate({async:!0}),await CoC7Dice.showRollDice3d(roll),damageRolls.push({formula:damageFormula,total:roll.total,die:damageDie,critical:!1}),total+=roll.total}for(let index=0;index<impalingShots;index++){const roll=new Roll(criticalDamageFormula);await roll.evaluate({async:!0}),await CoC7Dice.showRollDice3d(roll),damageRolls.push({formula:criticalDamageFormula,total:roll.total,die:criticalDamageDie,critical:!0}),total+=roll.total}let targetName="dummy",target=chatHelper.getTokenFromKey(h.roll.targetKey);target||(target=chatHelper.getActorFromKey(h.roll.targetKey)),target&&(targetName=target.name),this.damage.push({targetKey:h.roll.targetKey,targetName,rolls:damageRolls,total,critical,dealt:!1,resultString:game.i18n.format("CoC7.rangeCombatDamage",{name:targetName,total})})}this.damageRolled=0!==this.damage.length,this.updateChatCard()}async dealDamage(){for(let dIndex=0;dIndex<this.damage.length;dIndex++){const actor=chatHelper.getActorFromKey(this.damage[dIndex].targetKey);if(null===actor)ui.notifications.error(game.i18n.localize("CoC7.NoTargetToDamage"));else{this.damage[dIndex].totalTaken=0,this.damage[dIndex].totalAbsorbed=0;for(let rIndex=0;rIndex<this.damage[dIndex].rolls.length;rIndex++){const dealtAmount=await actor.dealDamage(this.damage[dIndex].rolls[rIndex].total);this.damage[dIndex].totalTaken+=dealtAmount,this.damage[dIndex].rolls[rIndex].taken=dealtAmount,this.damage[dIndex].rolls[rIndex].absorbed=this.damage[dIndex].rolls[rIndex].total-dealtAmount,this.damage[dIndex].totalAbsorbed+=this.damage[dIndex].rolls[rIndex].total-dealtAmount}this.damage[dIndex].dealt=!0,this.damage[dIndex].resultString=game.i18n.format("CoC7.rangeCombatDamageArmor",{name:this.damage[dIndex].targetName,total:this.damage[dIndex].totalTaken,armor:this.damage[dIndex].totalAbsorbed})}}this.damageDealt=!0,this.updateChatCard()}}class CoC7RangeTarget{constructor(actorKey=null){this.actorKey=actorKey,this.cover=!1,this.pointBlankRange=!1,this.baseRange=!0,this.longRange=!1,this.extremeRange=!1,this.inMelee=!1}get big(){return void 0===this._big&&(this.actor&&this.actor.build?this._big=this.actor.build>=4:this._big=!1),this._big}set big(b){this._big=b}get small(){return void 0===this._small&&(this.actor&&this.actor.build?this._small=this.actor.build<=-2:this._small=!1),this._small}set small(b){this._small=b}get normal(){return!this.big&&!this.small}set normal(b){this._big=!1,this._small=!1}get isFast(){return!(!this.actor||!this.actor.mov)&&this.actor.mov>=8}get fast(){return void 0===this._fast&&(this._fast=!1),this._fast}set fast(b){this._fast=b}get actor(){return this.actorKey&&!this._actor&&(this._actor=chatHelper.getActorFromKey(this.actorKey)),this._actor}get name(){return this.token?this.token.name:this.actor?this.actor.name:"Dummy"}get img(){return this.token?this.token.data.img:this.actor?this.actor.data.img:"../icons/svg/mystery-man-black.svg"}get token(){return!this._token&&this.actorKey&&(this._token=chatHelper.getTokenFromKey(this.actorKey)),this._token}get sizeText(){return this.big?game.i18n.localize("CoC7.rangeCombatCard.BigTargetTitle"):this.small?game.i18n.localize("CoC7.rangeCombatCard.SmallTargetTitle"):game.i18n.localize("CoC7.rangeCombatCard.NormalTargetTitle")}get sizeLabel(){return this.big?game.i18n.localize("CoC7.rangeCombatCard.BigTarget"):this.small?game.i18n.localize("CoC7.combatCard.SmallTarget"):game.i18n.localize("CoC7.rangeCombatCard.NormalTarget")}get difficulty(){return this.baseRange||this.pointBlankRange?CoC7Check.difficultyLevel.regular:this.longRange?CoC7Check.difficultyLevel.hard:this.extremeRange?CoC7Check.difficultyLevel.extreme:CoC7Check.difficultyLevel.impossible}get modifier(){let modifier=0;return this.cover&&modifier--,this.pointBlankRange&&modifier++,this.fast&&modifier--,this.small&&modifier--,this.big&&modifier++,this.inMelee&&modifier--,this.surprised&&modifier++,modifier}set token(t){this._token=t}static getFromElement(element){const target=new CoC7RangeTarget;return chatHelper.getObjectFromElement(target,element),target}static changeDisplayedTarget(event){if(!event.currentTarget.classList.contains("target-selector"))return null;return event.currentTarget.closest(".targets").querySelectorAll(".target")}attachToElement(element){chatHelper.attachObjectToElement(this,element)}toggleFlag(flag){"baseRange"===flag||"longRange"===flag||"extremeRange"===flag||"pointBlankRange"===flag?(this.pointBlankRange=!1,this.baseRange=!1,this.longRange=!1,this.extremeRange=!1,this.outOfRange=!1,this[flag]=!0):"size"===flag?this.small?(this.small=!1,this.big=!0):this.big?(this.small=!1,this.big=!1):this.small=!0:this[flag]=!this[flag],"fast"===flag&&this.fast&&!this.isFast&&ui.notifications.warn(game.i18n.format("CoC7.WarnFastTargetWithWrongMOV",{mov:this.actor.mov}))}}class InteractiveChatCard{constructor(options={}){this._options=options}get options(){return mergeObject(this.constructor.defaultOptions,this._options)}get template(){return this.options.template}get cssClasses(){return this.options.classes}async toMessage(optionnalChatData={}){const html=await renderTemplate(this.template,this),htmlCardElement=$(html)[0];htmlCardElement.dataset.object=escape(this.dataString),htmlCardElement.dataset.cardClass=this.constructor.name,htmlCardElement.classList.add(...this.cssClasses);const chatData=mergeObject({user:game.user.id,flavor:game.i18n.localize(this.options.title),content:htmlCardElement.outerHTML},optionnalChatData);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard(options={}){if(options.compute&&this.compute(),this.messageId){const html=await renderTemplate(this.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(this.dataString),htmlCardElement.dataset.cardClass=this.constructor.name,htmlCardElement.classList.add(...this.cssClasses);const chatMessage=game.messages.get(this.messageId);this.closed&&await chatMessage.setFlag("CoC7","state","resolved");const msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}this.toMessage()}activateListeners(html){html.on("click",".interactive-card .ic-radio-switch",this._onToggle.bind(this)),html.on("click",".interactive-card .ic-switch",this._onToggle.bind(this)),html.on("click",".interactive-card .submit",this._onSubmit.bind(this)),html.on("focusout","input",this._onSubmit.bind(this)),html.on("click",".interactive-card button",this._onButton.bind(this)),html.on("keydown","form",this._onKey.bind(this))}static async bindListeners(html){const htmlCardElement=html[0].querySelector(".chat-card");if(!htmlCardElement)return;if(!Object.getOwnPropertyNames(game.CoC7.cards).includes(htmlCardElement.dataset.cardClass))return;const card=await InteractiveChatCard.fromHTMLCardElement(htmlCardElement),typedCard=Object.assign(new game.CoC7.cards[htmlCardElement.dataset.cardClass],card);typedCard.assignObject(),typedCard.activateListeners(html)}assignObject(){}_onButton(event){const action=event.currentTarget.dataset.action;this[action]&&this[action]({event,update:!0})}_onKey(event){return"Enter"===event.key&&this._onSubmit(event),"Enter"!==event.key}_onSubmit(event){event.preventDefault();const card=event.currentTarget.closest(".interactive-card");if(!card)return;this._update(card)&&this.updateChatCard()}_update(card){const forms=card.querySelectorAll("form");let updates=!1;for(let i=0;i<forms.length;i++){const form=forms[i];let data=new FormDataExtended(form).toObject();data=diffObject(this,expandObject(data));for(const[key,value]of Object.entries(data))this[key]=value,updates=!0}return updates}get message(){return this._message?this._message:this._messageId?game.message.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultOptions(){return{classes:["interactive-card"],exclude:["_actor","_skill","_item","_message","_htmlRoll"],excludeStartWith:"__"}}get data(){return JSON.parse(this.dataString)}get dataString(){return JSON.stringify(this,((key,value)=>{if(null!==value&&!this.options.exclude?.includes(key)&&!key.startsWith(this.options.excludeStartWith))return value}))}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.data.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(card){const cardData=JSON.parse(unescape(card.dataset.object));if(!cardData.messageId){const message=card.closest(".message");cardData.messageId=message?.dataset?.messageId}return await this.fromData(cardData)}static async fromData(data){const card=Object.assign(new this,data);return await card.assignObject(),card}setFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!0)}unsetFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!1)}toggleFlag(flagName){this[flagName]=!this[flagName]}async _onToggle(event){event.preventDefault();const target=event.currentTarget;if("action"in target.dataset)return this._onButton(event);if(target&&target.classList.contains("gm-select-only")&&!game.user.isGM)return;const flag=target.dataset.flag;if(!flag)return;const toggle=target.closest(".ic-radio");if(toggle){const buttons=toggle.querySelectorAll(".ic-radio-switch");for(const b of buttons)this.unsetFlag(b.dataset.flag);this.setFlag(flag)}else this.toggleFlag(flag);const card=target.closest(".interactive-card");card&&this._update(card),this.updateChatCard()}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get isBlind(){return this.rollMode?(void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind):null}set isBlind(x){this._isBlind=x}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}get item(){return this.itemId?this.actor.items.get(this.itemId):null}get weapon(){return this.item}get targetedTokens(){return[...game.user.targets]}get target(){return this.targetToken?this.targetToken:this.targetActor}get isTargetOwner(){return this.target.isOwner}get isGM(){return game.user.isGM}get targetToken(){return this._targetToken||(this._targetKey?this._targetToken=chatHelper.getTokenFromKey(this._targetKey):(this._targetToken=this.targetedTokens.pop(),this._targetToken?this._targetKey=`${this._targetToken.scene.id}.${this._targetToken.id}`:this._targetToken=null)),this._targetToken}get targetActor(){return this._targetActor||(this.targetToken?this._targetActor=this.targetToken.actor||this.targetToken.data.actor||this.targetToken.data.document:this._targetActor=chatHelper.getActorFromKey(this._targetKey)),this._targetActor}get targetKey(){return this.targetToken||this.targetActor?this._targetKey:null}get hasTarget(){return!(!this.targetToken&&!this.targetActor)}set targetKey(x){this._targetKey=x}get skills(){return this.actor.getWeaponSkills(this.itemId)}get targetImg(){const img=chatHelper.getActorImgFromKey(this.targetKey);return img||"../icons/svg/mystery-man-black.svg"}get name(){return this.token?this.token.name:this.actor.name}get targetName(){return this.target?this.target.name:"dummy"}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}}class DamageCard extends InteractiveChatCard{static get defaultOptions(){return mergeObject(super.defaultOptions,{exclude:["_targetToken","_targetActor","_htmlRoll","_htmlInlineRoll"].concat(super.defaultOptions.exclude),template:"systems/CoC7/templates/chat/cards/damage.html"})}activateListeners(html){super.activateListeners(html)}async assignObject(){this.damageRoll&&"Object"===this.damageRoll.constructor.name&&(this.damageRoll=Roll.fromData(this.damageRoll))}_onButton(event){super._onButton(event)}get critical(){return this.options.critical}set critical(x){this._options.critical=x}get impale(){return"undefined"===this._impale?this.weapon.impale:this._impale}set impale(x){this._impale=x}get isDamageFormula(){return"string"==typeof this.damageFormula&&(!!isNaN(Number(this.damageFormula))&&Roll.validate(this.damageFormula))}get isDamageNumber(){return!isNaN(Number(this.damageFormula))}get isArmorForula(){return"string"==typeof this.armor&&(!!isNaN(Number(this.armor))&&Roll.validate(this.armor))}get totalDamageString(){let damage=Number(this.isDamageNumber?this.damageFormula:this.roll.total);return!this.ignoreArmor&&((isNaN(Number(this.armor))||Number(this.armor)>0)&&(damage-=Number(this.armor)),!isNaN(Number(this.armor))&&damage<=0)?game.i18n.localize("CoC7.ArmorAbsorbsDamage"):damage}get noDamage(){if(this.rolled){const damage=this.isDamageNumber?this.damageFormula:this.roll.total;return this.ignoreArmor?!!(damage<=0):!isNaN(Number(this.armor))&&!!(damage-Number(this.armor)<=0)}return!1}async updateChatCard(){if(!this.options.fastForward||this.roll||this.isDamageNumber||await this.rollDamage({update:!1}),this.isDamageNumber||this.roll&&null!=this.roll.total||this.hardrolled?this.rolled=!0:this.rolled=!1,!this.options.fastForward||this.damageInflicted||this.noDamage||await this.dealDamage({update:!1}),this.rolled&&this.roll){"Object"===this.roll.constructor.name&&(this.roll=Roll.fromData(this.roll));const a=createInlineRoll(this.roll);this._htmlInlineRoll=a.outerHTML,this._htmlRoll=await this.roll.render()}await super.updateChatCard()}async rollDamage(options={update:!0}){this.roll=await new Roll(this.damageFormula||"0").evaluate({async:!0}),await CoC7Dice.showRollDice3d(this.roll),this.hardrolled=!0,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}async rollArmor(options={update:!0}){const roll=await new Roll(this.armor).evaluate({async:!0});this.armor=roll.total,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}async dealDamageToSelectedTarget(options={update:!0}){if(this.isArmorForula&&await this.rollArmor(),isNaN(Number(this.totalDamageString)))return void ui.notifications.error("Error evaluating damage");const targets=[],targetName=[],selectedPlayers=canvas.tokens.controlled.map((token=>token.actor));for(let index=0;index<selectedPlayers.length;index++)this.actor.id!==selectedPlayers[index].id&&(targetName.push(selectedPlayers[index].name),targets.push(selectedPlayers[index]));const data={title:" ",content:game.i18n.format("CoC7.DealDamage",{damage:this.totalDamageString,target:targetName}),buttons:{one:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>{this.confirmDamage(targets)}},two:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>{}}},default:"two"};targetName.length>0&&new Dialog(data).render(!0)}async confirmDamage(targets){for(let index=0;index<targets.length;index++)await targets[index].dealDamage(Number(this.totalDamageString),{ignoreArmor:!1}),ChatMessage.create({content:`Damage ${targets[index].name} ${this.totalDamageString}HP`})}async dealDamage(options={update:!0}){this.isArmorForula&&await this.rollArmor();let damage=this.totalDamageString;if(isNaN(Number(damage))){if(game.i18n.localize("CoC7.ArmorAbsorbsDamage")!==damage)return void ui.notifications.error("Error evaluating damage");damage=0}this.targetActor&&await this.targetActor.dealDamage(Number(damage),{ignoreArmor:!0}),this.damageInflicted=!0,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}get range(){return this.options.range||"normal"}set range(x){["normal","long","extreme"].inclues(x.toLowerCase())&&(this._options.range=x)}get damageFormula(){const range=this.range;let formula=this.weapon?.data?.data?.range[range]?.damage,db=this.actor.db;if(db=null===db?"":`${db}`,db&&!db.startsWith("-")&&(db="+"+db),this.weapon.data.data.properties.addb&&(formula+=db),this.weapon.data.data.properties.ahdb&&(formula=formula+db+"/2"),formula){const maxDamage=new Roll(formula).evaluate({maximize:!0}).total;let rollString;return this.critical?this.impale?(rollString=formula+"+"+maxDamage,rollString):maxDamage:formula}}get armor(){return void 0!==this._armor&&""!==this._armor?this._armor:this.target?this.targetActor.data.data.attribs.armor.value:0}set armor(x){this._armor=x}}class RollCard{constructor(){this.rolls=[]}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.data.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(card){const cardData=JSON.parse(unescape(card.dataset.object));return await this.fromData(cardData)}static async fromData(data){const card=Object.assign(new this,data);for(let index=0;index<card.rolls.length;index++)"Object"===card.rolls[index]?.constructor?.name&&(card.rolls[index]=Object.assign(new CoC7Check,card.rolls[index]),card.rolls[index].rolled&&(card.rolls[index]._htmlRoll=await card.rolls[index].getHtmlRoll()));return card}static async _onToggle(event){event.preventDefault();const span=event.currentTarget;if(span&&span.classList.contains("gm-select-only")&&!game.user.isGM)return;const message=span.closest(".chat-message"),card=await this.fromMessageId(message.dataset.messageId);if(!card)return;const flag=span.dataset.flag;if(!flag)return;const toggle=span.closest(".toggle");if(toggle){const buttons=toggle.querySelectorAll(".toggle-switch");for(const b of buttons)card.unsetFlag(b.dataset.flag);card.setFlag(flag)}else card.toggleFlag(flag);card.updateChatCard()}static async dispatch(data){if(game.user.isGM){let card,messages=ui.chat.collection.filter((message=>this.defaultConfig.type===message.getFlag("CoC7","type")&&"resolved"!==message.getFlag("CoC7","state")));if(messages.length){const timestamp=new Date(messages[0].data.timestamp);86400<(new Date-timestamp)/1e3&&(await messages[0].setFlag("CoC7","state","resolved"),messages=[])}card=messages.length?await this.fromMessage(messages[0]):new this,await card.process(data)}else game.socket.emit("system.CoC7",data)}async toMessage(){const html=await renderTemplate(this.config.template,this),htmlCardElement=$(html);htmlCardElement[0].dataset.object=escape(this.dataString);const chatData={user:game.user.id,flavor:game.i18n.localize(this.config.title),content:htmlCardElement[0].outerHTML,flags:{CoC7:{type:this.config.type,state:"initiated"}}};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0);return await ChatMessage.create(chatData)}async updateChatCard(){if(await this.compute(),this.messageId){const html=await renderTemplate(this.config.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(this.dataString);const chatMessage=game.messages.get(this.messageId);this.closed&&await chatMessage.setFlag("CoC7","state","resolved");const msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}await this.toMessage()}updateRoll(data){data.fromGM||Object.assign(this.rolls[data.rank],data.roll)}addRollData(data){const check=Object.assign(new CoC7Check,data.roll);this.rolls.push(check)}addRoll(data){this.rolls.push(data)}removeRoll(rank){this.rolls.splice(rank,1)}setFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!0)}unsetFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!1)}toggleFlag(flagName){this[flagName]=!this[flagName]}get message(){return this._message?this._message:this._messageId?game.message.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultConfig(){return{exclude:["_actor","_skill","_item","_message","_htmlRoll"],excludeStartWith:"__"}}get winners(){return this.rolls.filter((r=>r.winner))}get winner(){if(this.winners.length)return this.winners[0]}get loosers(){return this.rolls.filter((r=>!r.winner))}get looser(){if(this.loosers.length)return this.loosers[0]}get hasWinner(){return this.winners.length>0}get isGM(){return game.user.isGM}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}get data(){return JSON.parse(this.dataString)}get dataString(){return JSON.stringify(this,((key,value)=>{if(null!==value&&!this.config.exclude?.includes(key)&&!key.startsWith(this.config.excludeStartWith))return value}))}}class OpposedCheckCard extends RollCard{static async bindListerners(html){html.on("click",".roll-card.opposed .toggle-switch",this._onToggle.bind(this)),html.on("click",".roll-card.opposed a",OpposedCheckCard._onClick.bind(this)),html.on("click",".roll-card.opposed button",OpposedCheckCard._onClick.bind(this))}static get defaultConfig(){return mergeObject(super.defaultConfig,{template:"systems/CoC7/templates/chat/cards/opposed-roll.html",type:"opposedCard"})}get config(){return OpposedCheckCard.defaultConfig}get attackerRoll(){if(this.combat){if(this.rolls?.length){const attacker=this.rolls.filter((r=>0===r.index||r.attacker));if(attacker.length)return attacker[0]}}else;}get defenderRoll(){if(this.combat){if(this.rolls?.length){const defender=this.rolls.filter((r=>0!==r.index||!r.attacker));if(defender.length)return defender[0]}}else;}get defenderIsDodging(){return!(!this.defenderRoll?.actor?.dodgeSkill?.name||!this.defenderRoll?.skill?.name)&&this.defenderRoll.actor.dodgeSkill.name.toLowerCase()===this.defenderRoll.skill.name.toLowerCase()}get advantageAttacker(){return void 0===this._aa?!!this.defenderRoll&&!this.defenderIsDodging:this._aa}get winnerRollsDamage(){return!!(this.combat&&this.rolls.length>=2&&this.hasWinner&&"weapon"===this.winner?.item?.type)}set advantageAttacker(x){this._aa=!0,this._ad=!1}get advantageDefender(){return void 0===this._ad?this.defenderIsDodging:this._ad}set advantageDefender(x){this._ad=!0,this._aa=!1}get isTie(){return this.winnerCount>1}get needsTieBreaker(){return!!this.combat&&!(!this.attackerRoll||!this.defenderRoll||this.attackerRoll.successLevel!==this.defenderRoll.successLevel)}get winnerCount(){let count=0;for(const r of this.rolls)r.winner&&(count+=1);return count}get isAttackManeuver(){return!(!this.combat||!this.attackerRoll||this.attackerRoll?.item&&!this.attackerRoll?.item.data.data.properties?.mnvr)}get resultText(){if(this.combat&&this.attackerRoll&&this.defenderRoll){if(!this.attackerRoll.winner&&!this.defenderRoll.winner)return game.i18n.localize("CoC7.NoWinner");if(this.attackerRoll.winner)return this.attackerRoll.maneuver?game.i18n.format("CoC7.ManeuverSuccess",{name:this.attackerRoll.actor.name}):game.i18n.format("CoC7.AttackSuccess",{name:this.attackerRoll.actor.name});if(this.defenderRoll.winner)return this.defenderRoll.maneuver?game.i18n.format("CoC7.ManeuverSuccess",{name:this.defenderRoll.actor.name}):this.defenderIsDodging?game.i18n.format("CoC7.DodgeSuccess",{name:this.defenderRoll.actor.name}):game.i18n.format("CoC7.AttackSuccess",{name:this.defenderRoll.actor.name})}}async process(data){switch(data.action){case"new":this.rolls?.length||(this.combat=data.combat||void 0,this.combat&&(data.roll.attacker=!0)),data.roll.index=this.rolls.length,this.addRollData(data);break;case"roll":this.addRollData(data);break;case"updateRoll":this.updateRoll(data)}game.user.isGM?await this.updateChatCard():game.socket.emit("system.CoC7",data)}async roll(rank){await this.rolls[rank]._perform();const data={type:this.config.type,action:"updateRoll",rank,fromGM:game.user.isGM};return game.user.isGM||(data.roll=this.rolls[rank].JSONRollData),data}static async _onClick(event){event.preventDefault();const a=event.currentTarget,action=a.dataset.action,li=a.closest("li.actor-roll"),message=a.closest(".chat-message"),cardElement=a.closest("div.roll-card"),card=await OpposedCheckCard.fromHTMLCardElement(cardElement);card.messageId=message.dataset.messageId;const rank=Number(li?.dataset?.rank);switch(action){case"toggle-combat":card.combat=!card.combat,await card.updateChatCard();break;case"remove-roll":card.removeRoll(rank),await card.updateChatCard();break;case"close-card":card.closeCard(),await card.updateChatCard();break;case"roll-check":{const speaker=ChatMessage.getSpeaker();card.rolls[rank].actorKey||(card.rolls[rank].actorKey=`${speaker.scene}.${speaker.token}`);const data=await card.roll(rank);await card.process(data);break}case"roll-damage":{card.closeCard(),await card.updateChatCard();const damageChatCard=new DamageCard({critical:card.winner.isExtremeSuccess,fastForward:event.shiftKey});damageChatCard.actorKey=card.winner.actor.actorKey,damageChatCard.targetKey=card.looser.actor.actorKey,damageChatCard.itemId=card.winner.itemId,damageChatCard.updateChatCard();break}default:{const options={update:!1,data:a.dataset,classes:a.classList,target:a};await CoC7Check.alter(card.rolls[rank],action,options);const data={type:this.defaultConfig.type,action:"updateRoll",rank,fromGM:game.user.isGM};game.user.isGM||(data.roll=card.rolls[rank].JSONRollData),card.process(data);break}}}async compute(rank){if(rank)this.rolls[rank].rolled&&(this.rolls[rank]._htmlRoll=await this.rolls[rank].getHtmlRoll({hideDiceResult:!0}));else for(let i=0;i<this.rolls.length;i++)delete this.rolls[i].maneuver,this.combat&&(!this.rolls[i].item||this.rolls[i].item.data.data.properties?.mnvr)&&(this.rolls[i]?.actor?.dodgeSkill?.name&&this.rolls[i]?.skill?.name&&this.rolls[i].actor.dodgeSkill.name.toLowerCase()!==this.rolls[i].skill.name.toLowerCase()||!this.rolls[i]?.actor?.dodgeSkill?.name)&&(this.rolls[i].maneuver=!0),this.rolls[i].rolled&&(this.rolls[i]._htmlRoll=await this.rolls[i].getHtmlRoll({hideDiceResult:!0}));if(this.rolls=this.rolls.filter((roll=>void 0!==roll.actor.data)),this.combat){if(this.rolls.sort(((a,b)=>a.index>b.index?1:a.index<b.index?-1:0)),this.rolls.length>1){this.rolls=[this.rolls[0],this.rolls[1]];for(const r of this.rolls)delete r.winner,delete r.tie}this.rolls[0]&&(this.rolls[0].attacker=!0),this.rolls[0]?.rolled&&this.rolls[1]?.rolled&&(this.rolls[0].passed||this.rolls[1].passed)&&(this.rolls[0].successLevel>this.rolls[1].successLevel?this.rolls[0].winner=!0:this.rolls[1].successLevel>this.rolls[0].successLevel?this.rolls[1].winner=!0:this.advantageAttacker?this.rolls[0].winner=!0:this.rolls[1].winner=!0)}else{if(this.rolls.sort(((a,b)=>{if(a.rolled&&!b.rolled)return-1;if(!a.rolled&&b.rolled)return 1;if(!a.rolled&&!b.rolled)return 0;if(a.successLevel>b.successLevel)return this.resolved=!0,-1;if(a.successLevel<b.successLevel)return this.resolved=!0,1;if(game.settings.get("CoC7","opposedRollTieBreaker")){if(a.modifiedResult>b.modifiedResult)return this.resolved=!0,-1;if(a.modifiedResult<b.modifiedResult)return this.resolved=!0,1}else{if(a.rawValue>b.rawValue)return this.resolved=!0,-1;if(a.rawValue<b.rawValue)return this.resolved=!0,1}return 0})),this.winCount=0,this.rolls[0]&&this.rolls[0].rolled&&!this.rolls[0].failed){this.winCount=1;for(let i=1;i<this.rolls.length;i++)this.rolls[i]&&this.rolls[i].rolled&&this.rolls[0].successLevel===this.rolls[i].successLevel&&(game.settings.get("CoC7","opposedRollTieBreaker")?this.rolls[0].modifiedResult===this.rolls[i].modifiedResult:this.rolls[0].rawValue===this.rolls[i].rawValue)&&(this.winCount=this.winCount+1)}for(let i=0;i<this.rolls.length;i++)this.rolls[i].winner=i<this.winCount,this.rolls[i].tie=this.rolls[i].winner&&this.winCount>1}}closeCard(){this.closed=!0}}class CombinedCheckCard extends RollCard{static async bindListerners(html){html.on("click",".roll-card.combined .toggle-switch",this._onToggle.bind(this)),html.on("click",".roll-card.combined a",CombinedCheckCard._onClick.bind(this)),html.on("click",".roll-card.combined button",CombinedCheckCard._onClick.bind(this))}static get defaultConfig(){return mergeObject(super.defaultConfig,{template:"systems/CoC7/templates/chat/cards/combined-roll.html",type:"combinedCard",title:"CoC7.CombinedRollCard"})}get config(){return CombinedCheckCard.defaultConfig}get successCount(){if(this.rolled){let count=0;for(const r of this.rolls)r.passed&&(count+=1);return count}}get mainActorKey(){return this.rolls[0]?.actor?.actorKey||void 0}get success(){if(void 0!==this.successCount)return this.any?this.successCount>0:this.all?this.successCount===this.rolls.length:void 0}get failure(){if(void 0!==this.success)return!this.success}async getHtmlRoll(){if(!this.rolled)return;const check=new CoC7Check;return await check._perform({roll:this._roll,silent:!0}),await check.getHtmlRoll({hideSuccess:!0})}process(data){switch(data.action){case"new":case"roll":this.addRollData(data);break;case"updateRoll":this.updateRoll(data);break;case"assignRoll":this.assignRoll(data)}game.user.isGM?this.updateChatCard():game.socket.emit("system.CoC7",data)}async assignRoll(data){game.user.isGM&&(this.rolled||(this.rolled=!0,this._roll=data.roll,this.options=data.options))}static async _onClick(event){event.preventDefault();const a=event.currentTarget,action=a.dataset.action,li=a.closest("li.actor-roll"),message=a.closest(".chat-message"),cardElement=a.closest("div.roll-card"),card=await CombinedCheckCard.fromHTMLCardElement(cardElement);card.messageId=message.dataset.messageId;const rank=Number(li?.dataset?.rank);switch(action){case"remove-roll":card.removeRoll(rank),await card.updateChatCard();break;case"close-card":card.closeCard(),await card.updateChatCard();break;case"roll-card":{const roll={};if(!event.shiftKey){const usage=await RollDialog.create({disableFlatThresholdModifier:event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode,disableFlatDiceModifier:event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode});usage&&(roll.diceModifier=Number(usage.get("bonusDice")),roll.difficulty=Number(usage.get("difficulty")),roll.flatDiceModifier=Number(usage.get("flatDiceModifier")),roll.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}const data={type:this.defaultConfig.type,action:"assignRoll",fromGM:game.user.isGM,options:roll};data.roll=await CoC7Dice.roll(roll.modifier||0),AudioHelper.play({src:CONFIG.sounds.dice}),card.process(data);break}default:{const options={update:!1,data:a.dataset,classes:a.classList,target:a};await CoC7Check.alter(card.rolls[rank],action,options);const data={type:this.defaultConfig.type,action:"updateRoll",rank,fromGM:game.user.isGM};game.user.isGM||(data.roll=card.rolls[rank].JSONRollData),card.process(data);break}}}async compute(){if(this._roll){for(const r of this.rolls)r.rolled||(r.modifier=this.options.modifier||0,r.difficulty=this.options.difficulty||CoC7Check.difficultyLevel.regular,r.flatDiceModifier=this.options.flatDiceModifier||0,r.flatThresholdModifier=this.options.flatThresholdModifier||0,await r._perform({roll:this._roll,silent:!0}));for(let i=0;i<this.rolls.length;i++)this.rolls[i].rolled&&(this.rolls[i]._htmlRoll=await this.rolls[i].getHtmlRoll({hideDiceResult:!0}));this.rolls=this.rolls.filter((roll=>void 0!==roll.actor.data)),this._htmlRoll=await this.getHtmlRoll()}}closeCard(){this.closed=!0}}const CHAT_COC7_MESSAGE_FAKEROLL='<div class="dice-roll"><div class="dice-result"><div class="dice-formula">???</div><h4 class="dice-total">?</h4></div></div>';class CoC7Chat{static renderChatMessageHook(chatMessage,html){chatMessage.getFlag("CoC7","GMSelfRoll")&&!game.user.isGM&&(html.find(".whisper-to").remove(),html.find(".flavor-text").replaceWith(`<span class="flavor-text">${game.i18n.localize("CoC7.RollSecretDice")}</span>`),html.find(".message-content").replaceWith(`<div class="message-content">${CHAT_COC7_MESSAGE_FAKEROLL}</div>`)),chatMessage.getFlag("CoC7","removeWisperTargets")&&!game.user.isGM&&html.find(".whisper-to").remove(),chatMessage.getFlag("CoC7","fakeRoll")&&game.user.isGM&&(html.find(".flavor-text").replaceWith(game.i18n.localize("CoC7.KeeperSentDecoy")),html.find(".message-content").remove())}static fakeRollMessage(){const chatData={user:game.user.id,flavor:game.i18n.localize("CoC7.RollSecretDice"),whisper:game.users.players,type:CONST.CHAT_MESSAGE_TYPES.WHISPER,flags:{CoC7:{GMSelfRoll:!1,removeWisperTargets:!0,fakeRoll:!0}},content:CHAT_COC7_MESSAGE_FAKEROLL};ChatMessage.create(chatData)}static ready(){game.CoC7="init"}static async chatListeners(app,html){html.on("click",".card-buttons button",CoC7Chat._onChatCardAction.bind(this)),html.on("click",".card-title",CoC7Chat._onChatCardToggleContent.bind(this)),html.on("click",".radio-switch",CoC7Chat._onChatCardRadioSwitch.bind(this)),html.on("click",".panel-switch",CoC7Chat._onChatCardToggleSwitch.bind(this)),html.on("click",".simple-flag",CoC7Chat._onChatCardToggleSwitch.bind(this)),html.on("click",".volley-size",CoC7Chat._onChatCardVolleySize.bind(this)),html.on("click",".dropdown-element",CoC7Chat._onDropDownElementSelected.bind(this)),html.on("click",".simple-toggle",CoC7Chat._onToggleSelected.bind(this)),html.on("click",".target-selector",CoC7Chat._onTargetSelect.bind(this)),html.on("dblclick",".open-actor",CoC7Chat._onOpenActor.bind(this)),html.on("click",".coc7-link",await CoC7Parser._onCheck.bind(this)),html.on("dragstart","a.coc7-link",CoC7Parser._onDragCoC7Link.bind(this)),html.on("click","coc7-inline-result",CoC7Chat._onInline.bind(this)),OpposedCheckCard.bindListerners(html),CombinedCheckCard.bindListerners(html)}static _onOpenActor(event){event.preventDefault();const actorKey=event.currentTarget.dataset.actorKey;if(actorKey){const actor=chatHelper.getActorFromKey(actorKey);actor.isOwner&&actor.sheet.render(!0)}}static async onUpdateChatMessage(chatMessage){if(ui.chat.scrollBottom(),game.user.isGM&&0===chatMessage.data.type){const card=$(chatMessage.data.content)[0];if(card.classList.contains("melee")&&"true"===card.dataset.resolved){if(card.classList.contains("initiator"))if(card.dataset.targetCard){const initiator=CoC7MeleeInitiator.getFromMessageId(chatMessage.id),target=CoC7MeleeTarget.getFromMessageId(initiator.targetCard);if(target.resolved){const resolutionCard=new CoC7MeleeResoltion(chatMessage.id,target.messageId,target.resolutionCard);await resolutionCard.resolve(),initiator.checkRevealed||await initiator.revealCheck()}}else{const initiator=CoC7MeleeInitiator.getFromMessageId(chatMessage.id);if(initiator.resolutionCard){const resolutionCard=new CoC7MeleeResoltion(chatMessage.id,null,initiator.resolutionCard);await resolutionCard.resolve(),initiator.checkRevealed||await initiator.revealCheck()}}if(card.classList.contains("target")){const target=CoC7MeleeTarget.getFromMessageId(chatMessage.id),resolutionCard=new CoC7MeleeResoltion(target.parentMessageId,chatMessage.id,target.resolutionCard);await resolutionCard.resolve(),target.meleeInitiator.checkRevealed||await target.meleeInitiator.revealCheck()}}}}static async renderMessageHook(message,html){if(ui.chat.scrollBottom(),InteractiveChatCard.bindListeners(html),message.getFlag("CoC7","checkRevealed")&&(html.find(".dice-roll").removeClass("gm-visible-only"),html[0].dataset.checkRevealed=!0),html.find(".dropbtn").click((event=>event.currentTarget.closest(".dropdown").querySelector(".dropdown-content").classList.toggle("show"))),html.find(".dropdown").mouseleave((event=>event.currentTarget.querySelector(".dropdown-content").classList.remove("show"))),game.user.isGM){const card=html[0].querySelector(".coc7.chat-card");if(card&&card.classList.contains("roll-card")&&"true"!==card.dataset.processed&&card.dataset.refMessageId){const roll=CoC7Roll.getFromElement(card);"target"===card.dataset.side&&(roll.defendantId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId),"initiator"===card.dataset.side&&(roll.initiatorId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId),card.dataset.processed="true",CoC7Chat.updateCombatCardTarget(roll)}}const userOnly=html.find(".target-only");for(const element of userOnly)if(!game.user.isGM){element.style.display="none";const actorId=element.getAttribute("data-actor-id");actorId&&game.actors.get(actorId).isOwner&&(element.style.display="block")}const gmOnly=html.find(".gm-only");for(const zone of gmOnly)game.user.isGM||(zone.style.display="none");const userVisibleOnly=html.find(".user-visible-only");for(const elem of userVisibleOnly)game.user.isGM&&(elem.style.display="none");const gmVisibleOnly=html.find(".gm-visible-only");for(const elem of gmVisibleOnly)game.user.isGM||(elem.style.display="none");const ownerVisibleOnly=html.find(".owner-visible-only");for(const zone of ownerVisibleOnly){let actor=CoC7Chat._getActorFromKey(zone.dataset?.actorKey);actor||(actor=CoC7Chat._getChatCardActor(zone.closest(".chat-card"))),actor||(actor=CoC7Chat._getActorFromKey(zone.parentElement.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-actor-key]")?.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-token-key]")?.dataset.actorKey)),(actor&&!actor.isOwner||game.user.isGM)&&(zone.style.display="none")}if(!game.user.isGM){const ownerOnly=html.find(".owner-only");for(const zone of ownerOnly){let actor=CoC7Chat._getActorFromKey(zone.dataset?.actorKey);actor||(actor=CoC7Chat._getChatCardActor(zone.closest(".chat-card"))),actor||(actor=CoC7Chat._getActorFromKey(zone.parentElement.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-actor-key]")?.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-token-key]")?.dataset.actorKey)),(actor&&!actor.isOwner||!actor&&!game.user.isGM)&&(zone.style.display="none")}const gmSelectOnly=html.find(".gm-select-only");for(const select of gmSelectOnly)select.classList.add("inactive"),select.classList.remove("simple-flag")}}static get actionTypeString(){return{fightBack:"CoC7.fightBack",maneuver:"CoC7.maneuver",dodging:"CoC7.dodge"}}static _onTargetSelect(event){const index=parseInt(event.currentTarget.dataset.key),targetsSelector=event.currentTarget.closest(".targets-selector");for(const i of targetsSelector.querySelectorAll("img"))i.style.border="none";targetsSelector.querySelector(`[data-key="${index}"]`).querySelector("img").style.border="1px solid #000";const targets=event.currentTarget.closest(".targets");for(const t of targets.querySelectorAll(".target"))t.style.display="none",t.dataset.active="false";const targetToDisplay=targets.querySelector(`[data-target-key="${index}"]`);targetToDisplay.style.display="block",targetToDisplay.dataset.active="true"}static _onDropDownElementSelected(event){event.preventDefault();const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("target"))return void CoC7MeleeTarget.updateSelected(card,event);const dropDownBoxes=event.currentTarget.closest(".response-selection").querySelectorAll(".toggle-switch");for(const dpdnBox of dropDownBoxes)dpdnBox.classList.remove("switched-on");event.currentTarget.closest(".toggle-switch").classList.add("switched-on"),event.currentTarget.closest(".dropdown-content").classList.toggle("show");const selectedBox=event.currentTarget.closest(".defender-action-select").querySelector(".selected-action");selectedBox.style.display="block";const button=selectedBox.querySelector("button");switch(button.dataset.action="defending",button.dataset.actionType=event.currentTarget.dataset.action,button.dataset.defenderChoice=event.currentTarget.dataset.action,button.dataset.skillId=event.currentTarget.dataset.skillId,button.dataset.skillValue=event.currentTarget.dataset.skillValue,button.dataset.skillName=event.currentTarget.dataset.skillName,button.dataset.itemId=event.currentTarget.dataset.weaponId,button.dataset.itemName=event.currentTarget.dataset.weaponName,event.currentTarget.dataset.action){case"maneuver":button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.skillName} (${event.currentTarget.dataset.skillValue}%)`;break;case"fightBack":button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.weaponName} (${event.currentTarget.dataset.skillValue}%)`}}static async _onInline(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("inline-result"))return a.classList.contains("expanded")?CoC7Check._collapseInlineResult(a):CoC7Check._expandInlineResult(a)}static _onToggleSelected(event){const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("target"))return void CoC7MeleeTarget.updateSelected(card,event);if(""===event.currentTarget.dataset.skillId)return void ui.notifications.error(game.i18n.localize("CoC7.ErrorNoDodgeSkill"));const dropDownBoxes=event.currentTarget.closest(".response-selection").querySelectorAll(".toggle-switch");for(const dpdnBox of dropDownBoxes)dpdnBox.classList.remove("switched-on");event.currentTarget.classList.add("switched-on");const selectedBox=event.currentTarget.closest(".defender-action-select").querySelector(".selected-action");selectedBox.style.display="block";const button=selectedBox.querySelector("button");button.dataset.action="defending",button.dataset.actionType="dodging",button.dataset.defenderChoice=event.currentTarget.dataset.action,button.dataset.skillId=event.currentTarget.dataset.skillId,button.dataset.skillValue=event.currentTarget.dataset.skillValue,button.dataset.skillName=event.currentTarget.dataset.skillName,button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.skillName} (${event.currentTarget.dataset.skillValue}%)`}static _onChatCardRadioSwitch(event){event.preventDefault();const optionList=event.currentTarget.parentElement.getElementsByClassName("radio-switch");let index;for(index=0;index<optionList.length;index++){const element=optionList[index];element.dataset.property===event.currentTarget.dataset.property?element.classList.add("switched-on"):element.classList.remove("switched-on")}event.currentTarget.parentElement.dataset.selected=event.currentTarget.dataset.property}static async _onChatCardVolleySize(event){const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("range")&&card.classList.contains("initiator")){const rangeCard=CoC7RangeInitiator.getFromCard(card);event.currentTarget.classList.contains("increase")?rangeCard.changeVolleySize(1):event.currentTarget.classList.contains("decrease")&&rangeCard.changeVolleySize(-1)}}static async _onChatCardToggleSwitch(event){event.preventDefault();const card=event.currentTarget.closest(".chat-card");card.classList.contains("melee")&&(card.classList.contains("initiator")&&CoC7MeleeInitiator.updateCardSwitch(event),card.classList.contains("target")&&CoC7MeleeTarget.updateCardSwitch(event)),card.classList.contains("range")&&card.classList.contains("initiator")&&CoC7RangeInitiator.updateCardSwitch(event),card.classList.contains("damage"),card.classList.contains("roll-card")&&CoC7Check.updateCardSwitch(event)}static _getChatCardActor(card){const cardData=card.dataset.object?JSON.parse(unescape(card.dataset.object)):card.dataset;if(cardData.actorKey)return CoC7Chat._getActorFromKey(cardData.actorKey);const tokenKey=cardData.tokenId;if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token.actor||new Token(tokenData).actor:null}}const actorId=cardData.actorId;if(actorId)return game.actors.get(actorId);const message=card.closest(".message"),messageId=message?message.dataset.messageId:null;if(messageId){const chatMessage=game.messages.get(messageId);if(chatMessage.user)return chatMessage.user.character}return null}static isCardOwner(card){const message=card.closest(".message"),messageId=message?message.dataset.messageId:null;if(messageId){return game.messages.get(messageId).ownner||!1}return!1}static _getActorFromKey(key){if(key){if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token.actor||new Token(tokenData).actor:null}}return game.actors.get(key)||null}}static getActorFromToken(tokenKey){const token=CoC7Chat.getToken(tokenKey);return token?token.actor:null}static getToken(tokenKey){if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId){const tokenDoc=game.actors.tokens[tokenId]?.token;return tokenDoc.object}{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token||new Token(tokenData):null}}return null}static async updateChatCard(card,messId=null){const messageId=null==messId?card.closest(".message").dataset.messageId:messId,message=game.messages.get(messageId),msg=await message.update({content:card.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}static async _onChatCardAction(event){event.preventDefault();const button=event.currentTarget,card=button.closest(".chat-card"),originMessage=button.closest(".message"),action=button.dataset.action;if(CoC7Chat._getChatCardActor(card))switch(action){case"useLuck":{const luckAmount=parseInt(button.dataset.luckAmount),newSuccessLevel=parseInt(event.currentTarget.dataset.newSuccessLevel);if(card.classList.contains("melee")){let meleeCard;card.classList.contains("target")&&(meleeCard=CoC7MeleeTarget.getFromCard(card)),card.classList.contains("initiator")&&(meleeCard=CoC7MeleeInitiator.getFromCard(card)),meleeCard.upgradeRoll(luckAmount,newSuccessLevel,card)}else if(card.classList.contains("range")){const rangeCard=CoC7RangeInitiator.getFromCard(card),rollResult=button.closest(".roll-result"),rollIndex=rollResult?parseInt(rollResult.dataset.index):null;if(button.classList.contains("pass-check"))rangeCard.passRoll(rollIndex);else{const upgradeIndex=parseInt(button.dataset.index);rangeCard.upgradeRoll(rollIndex,upgradeIndex)}}else if(card.classList.contains("roll-card")||null!=card.querySelector(".roll-result")){const check=await CoC7Check.getFromCard(card);if(button.classList.contains("pass-check")){const luckAmount=parseInt(button.dataset.luckAmount);check.forcePass(luckAmount)}else{const upgradeIndex=parseInt(button.dataset.index);await check.upgradeCheck(upgradeIndex)}}else{const actor=CoC7Chat._getChatCardActor(card),detailedResultPlaceHolder=card.querySelector(".result-details");if(actor.spendLuck(luckAmount)){const result=card.querySelector(".dice-total");switch(card.dataset.successLevel=newSuccessLevel,card.dataset.processed="false",newSuccessLevel){case CoC7Check.successLevel.regular:result.innerText=game.i18n.localize("CoC7.RegularSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:result.innerText=game.i18n.localize("CoC7.HardSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:result.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:result.innerText=game.i18n.localize("CoC7.CriticalSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}result.classList.replace("failure","success"),result.classList.remove("fumble"),card.querySelector(".card-buttons").remove(),card.querySelector(".dice-tooltip").style.display="none",await CoC7Chat.updateChatCard(card)}else ui.notifications.error(game.i18n.format("CoC7.ErrorNotEnoughLuck",{actor:actor.name}))}break}case"push":{const newCard=card.cloneNode(!0),result=newCard.querySelector(".dice-total");result.innerText=result.innerText+game.i18n.localize("CoC7.PushingSkill"),result.classList.remove("failure"),newCard.querySelector(".card-buttons").remove(),newCard.dataset.pushedRoll=!0,await CoC7Chat.updateChatCard(newCard,originMessage.dataset.messageId),await CoC7Check.push(card);break}case"defending":{let defender,defenderKey=event.currentTarget.closest(".defender-action-select").dataset.tokenId;defenderKey?defender=this.getActorFromToken(defenderKey):(defenderKey=event.currentTarget.closest(".defender-action-select").dataset.actorId,defender=game.actors.get(defenderKey));const responseType=event.currentTarget.dataset.actionType,outnumbered="true"===event.currentTarget.dataset.outnumbered,check=new CoC7Check;switch(check.referenceMessageId=originMessage.dataset.messageId,check.rollType="opposed",check.side="target",check.action=responseType,responseType){case"dodging":check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,outnumbered&&(check.diceModifier=-1),await check.roll(),check.toMessage();break;case"fightBack":check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.item=event.currentTarget.dataset.itemId,outnumbered&&(check.diceModifier=-1),await check.roll(),check.toMessage();break;case"maneuver":{const actor=CoC7Chat._getChatCardActor(card);if(defender.build<=actor.build-3)return void ui.notifications.error(game.i18n.localize("CoC7.ErrorManeuverNotPossible"));check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,outnumbered&&(check.diceModifier=-1),defender.build<actor.build&&(check.diceModifier=check.diceModifier-(actor.build-defender.build)),check.diceModifier<-2&&(check.difficulty=check.difficulty+Math.abs(check.diceModifier)-2,check.diceModifier=-2),await check.roll(),check.toMessage();break}}break}case"melee-initiator-roll":{const initiator=CoC7MeleeInitiator.getFromCard(card),check=await initiator.performSkillCheck(event.currentTarget.dataset.skill);$(button).prop("disabled",!0),await CoC7Dice.showRollDice3d(check.dice.roll),await initiator.publishCheckResult();break}case"melee-target-no-response":{const target=CoC7MeleeTarget.getFromCard(card);await target.publishNoReponseResult();break}case"melee-target-roll":{const target=CoC7MeleeTarget.getFromCard(card),check=await target.performSkillCheck(event.currentTarget.dataset.skill);$(button).prop("disabled",!0),await CoC7Dice.showRollDice3d(check.dice.roll),await target.publishCheckResult();break}case"roll-melee-damage":{const damageChatCard=new DamageCard({critical:"true"===button.dataset.critical,fastForward:event.shiftKey});damageChatCard.actorKey=button.dataset.dealer,damageChatCard.targetKey=button.dataset.target,damageChatCard.itemId=button.dataset.weapon,originMessage.dataset.messageId&&(damageChatCard.messageId=originMessage.dataset.messageId),damageChatCard.updateChatCard();break}case"range-initiator-shoot":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);rangeInitiator.addShotAtCurrentTarget(),await rangeInitiator.updateChatCard();break}case"range-initiator-roll":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.resolveCard();break}case"roll-range-damage":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.rollDamage();break}case"deal-melee-damage":{const targetKey=card.dataset.targetKey,amount=card.dataset.result,targetActor=chatHelper.getActorFromKey(targetKey);await targetActor.dealDamage(amount);const buttons=card.querySelector(".card-buttons"),diceTotal=card.querySelector(".dice-total");$(diceTotal).append('<i class="fas fa-check"></i>'),buttons&&buttons.remove(),await CoC7Chat.updateChatCard(card);break}case"deal-range-damage":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.dealDamage();break}case"testcheck":(await CoC7Check.getFromCard(card)).forcePass();break;case"force-pass":(await CoC7Check.getFromCard(card)).forcePass();break;case"force-fail":(await CoC7Check.getFromCard(card)).forceFail();break;case"increase-success-level":(await CoC7Check.getFromCard(card)).increaseSuccessLevel();break;case"decrease-success-level":(await CoC7Check.getFromCard(card)).decreaseSuccessLevel();break;case"reveal-check":{const check=await CoC7Check.getFromCard(card);check.isBlind=!1,check.computeCheck(),event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode?check.updateChatCard({makePublic:!0}):check.updateChatCard();break}case"roll-check-card":{const check=await CoC7Check.getFromCard(card);check.standby=!1,await check._perform(),check.updateChatCard({forceRoll:!0});break}case"flag-for-development":{const check=await CoC7Check.getFromCard(card);await check.flagForDevelopement(),check.computeCheck(),check.updateChatCard();break}case"reset-creature-san-data":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.resetCreatureSanData(),await sanCheck.updateChatCard();break}case"reset-specie-san-data":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.resetSpecieSanData(),await sanCheck.updateChatCard();break}case"roll-san-check":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollSan(),await sanCheck.updateChatCard();break}case"advance-state":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.advanceState(button.dataset.state),await sanCheck.updateChatCard();break}case"roll-san-loss":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollSanLoss(),sanCheck.updateChatCard();break}case"roll-int-check":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollInt(),sanCheck.updateChatCard();break}case"roll-con-check":{const conCheck=CoC7ConCheck.getFromCard(card);await conCheck.rollCon(),conCheck.updateChatCard();break}case"reveal-con-check":{const conCheck=CoC7ConCheck.getFromCard(card);conCheck.isBlind=!1,conCheck.updateChatCard();break}}}static _onChatCardToggleContent(event){event.preventDefault();const content=event.currentTarget.closest(".chat-card").querySelector(".card-content");content&&(content.style.display?content.style.display="none"===content.style.display?"block":"none":content.style.display="block")}}class CoC7MeleeInitiator extends ChatCardActor{constructor(actorKey=null,itemId=null,fastForward=!1){super(actorKey,fastForward),this.itemId=itemId,this.resolved=!1,this.outnumbered=!1,this.surprised=!1,this.autoSuccess=!1,this.advantage=!1,this.disadvantage=!1,this.messageId=null,this.targetCard=null,this.rolled=!1}get template(){return"systems/CoC7/templates/chat/combat/melee-initiator.html"}async revealCheck(){const chatMessage=game.messages.get(this.messageId);await chatMessage.setFlag("CoC7","checkRevealed",!0),await ui.chat.updateMessage(chatMessage,!1)}async createChatCard(){chatHelper.getActorImgFromKey(this.actorKey);const html=await renderTemplate(this.template,this),speakerData={};this.token?speakerData.token=this:speakerData.actor=this;const speaker=ChatMessage.getSpeaker(speakerData),chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,content:html};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;return await ChatMessage.create(chatData)}async updateChatCard(){const html=await renderTemplate(this.template,this),message=game.messages.get(this.messageId),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;this[flag]=!this[flag]}async performSkillCheck(skillId=null,publish=!1){const check=new CoC7Check;if(check.isBlind=!1,check.isUnkonwn=!1,check.referenceMessageId=this.messageId,check.rollType="opposed",check.side="initiator",check.action="attack",check.actor=this.actorKey,check.item=this.itemId,check.skill=skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.diceModifier=0,game.user.isGM?this.checkRevealed=!1:this.checkRevealed=!0,this.outnumbered&&(check.diceModifier+=1),this.surprised&&(check.diceModifier+=1),this.disadvantage&&(check.diceModifier-=1),this.advantage&&(check.diceModifier+=1),await check.roll(),this.check=check,this.rolled=!0,this.resolved=!0,publish&&check.toMessage(),this.criticalDamage=check.successLevel===CoC7Check.successLevel.extreme||check.successLevel===CoC7Check.successLevel.critical,this.hasTarget&&!this.autoSuccess){const message=await game.CoC7socket.executeAsGM("gmcreatemessageas",{targetKey:this.targetKey,messageId:this.messageId,fastForward:this.fastForward,actorKey:this.actorKey});this.targetCard=message.id||message._id}return this.autoSuccess&&!this.check.isFumble&&this.check.forcePass(),check}async publishCheckResult(check=null){if(!check&&!this.check)return null;if(check&&(this.check=check),this.roll=CoC7Roll.getFromCheck(this.check),this.rolled=!0,this.roll.rollIcons=[],this.roll.critical){this.roll.rollColor="goldenrod",this.roll.rollTitle=game.i18n.localize("CoC7.CriticalSuccess");for(let index=0;index<4;index++)this.roll.rollIcons.push("medal")}else if(this.roll.fumble){this.roll.rollColor="darkred",this.roll.rollTitle=game.i18n.localize("CoC7.Fumble");for(let index=0;index<4;index++)this.roll.rollIcons.push("spider")}else if(this.roll.success){this.roll.rollColor="goldenrod",CoC7Check.successLevel.regular===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.RegularSuccess")),CoC7Check.successLevel.hard===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.HardSuccess")),CoC7Check.successLevel.extreme===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.ExtremeSuccess"));for(let index=0;index<this.roll.successLevel;index++)this.roll.rollIcons.push("star")}else this.roll.rollColor="black",this.roll.rollTitle=game.i18n.localize("CoC7.Failure"),this.roll.rollIcons.push("skull");if(!this.targetCard&&!this.autoSuccess&&this.hasTarget){const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id}await this.updateChatCard()}static getFromCard(card,messageId=null){const initiator=new CoC7MeleeInitiator;return chatHelper.getObjectFromElement(initiator,card),initiator.roll=CoC7Roll.getFromCard(card),card.closest(".message")?initiator.messageId=card.closest(".message").dataset.messageId:initiator.messageId=messageId,initiator}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.data.content)[0],initiator=CoC7MeleeInitiator.getFromCard(card,messageId);return initiator.messageId=messageId,initiator}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".melee.initiator"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const initiator=CoC7MeleeInitiator.getFromCard(card);initiator.toggleFlag(flag),initiator.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}upgradeRoll(luckAmount,newSuccessLevel,oldCard){this.actor.spendLuck(luckAmount)||ui.notifications.error(`${this.actor.name} didn't have enough luck to pass the check`),this.roll.value=null,this.roll.successLevel=newSuccessLevel,this.roll.luckSpent=!0,oldCard.dataset.processed=!1;const diceRolls=oldCard.querySelector(".dice-roll");diceRolls.dataset.value=null,diceRolls.dataset.successLevel=newSuccessLevel,diceRolls.dataset.luckSpent=!0;const resulDetails=oldCard.querySelector(".result-details"),diceTotal=oldCard.querySelector(".dice-total"),rollDamageButton=oldCard.querySelector('button[data-action="roll-melee-damage"]');switch(rollDamageButton&&rollDamageButton.classList.remove("invisible"),newSuccessLevel){case CoC7Check.successLevel.regular:diceTotal.innerText=game.i18n.localize("CoC7.RegularSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:diceTotal.innerText=game.i18n.localize("CoC7.HardSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:rollDamageButton&&(rollDamageButton.dataset.critical=!0),diceTotal.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:rollDamageButton&&(rollDamageButton.dataset.critical=!0),diceTotal.innerText=game.i18n.localize("CoC7.CriticalSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}diceTotal.classList.replace("failure","success"),oldCard.querySelector(".card-buttons").remove(),oldCard.querySelector(".dice-tooltip").style.display="none",CoC7Chat.updateChatCard(oldCard)}}class CoCActor extends Actor{async initialize(){super.initialize(),await this.creatureInit()}static async create(data,options={}){return data.token=data.token||{},"character"===data.type?mergeObject(data.token,{vision:!0,dimSight:30,brightSight:0,actorLink:!0,disposition:1},{overwrite:!1}):"vehicle"===data.type?data.img="systems/CoC7/assets/icons/jeep.svg":"container"===data.type&&(data.img="icons/svg/chest.svg",mergeObject(data.token,{actorLink:!0})),super.create(data,options)}checkUndefinedAuto(){const returnData={attribs:{hp:{},mp:{},san:{},mov:{},db:{},build:{}}};return void 0===this.data.data.attribs?.hp?.auto&&(returnData.attribs.hp.auto=!0),void 0===this.data.data.attribs?.mp?.auto&&(returnData.attribs.mp.auto=!0),void 0===this.data.data.attribs?.san?.auto&&(returnData.attribs.san.auto=!0),void 0===this.data.data.attribs?.mov?.auto&&(returnData.attribs.mov.auto=!0),void 0===this.data.data.attribs?.db?.auto&&(returnData.attribs.db.auto=!0),void 0===this.data.data.attribs?.build?.auto&&(returnData.attribs.build.auto=!0),returnData}get characteristics(){const characteristics={str:{value:null,shortName:"CHARAC.STR",label:"CHARAC.Strength",formula:null},con:{value:null,shortName:"CHARAC.CON",label:"CHARAC.Constitution",formula:null},dex:{value:null,shortName:"CHARAC.DEX",label:"CHARAC.Dexterity",formula:null},int:{value:null,shortName:"CHARAC.INT",label:"CHARAC.Intelligence",formula:null},pow:{value:null,shortName:"CHARAC.POW",label:"CHARAC.Power",formula:null}};if(this.data.data.characteristics)for(const[key,value]of Object.entries(this.data.data.characteristics))characteristics[key]={key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label),value:value.value,hard:Math.floor(value.value/2)||null,extreme:Math.floor(value.value/5)||null,formula:value.formula};return characteristics}static async initToken(createData){}get boutOfMadness(){return this.effects.find((e=>e.data.label===game.i18n.localize("CoC7.BoutOfMadnessName")))}get insanity(){return this.effects.find((e=>e.data.label===game.i18n.localize("CoC7.InsanityName")))}get isInABoutOfMadness(){return!!this.boutOfMadness&&!this.boutOfMadness.data.disabled}get isInsane(){return!!this.insanity&&!this.insanity.data.disabled}get sanity(){const boutRealTime=!!this.boutOfMadness?.data.flags?.CoC7?.realTime;let duration=boutRealTime?this.boutOfMadness?.data?.duration?.rounds:this.boutOfMadness?.data?.duration.seconds;!boutRealTime&&duration&&(duration=Math.round(duration/3600));let indefiniteInstanity=!!this.insanity?.data.flags?.CoC7?.indefinite,insaneDuration=indefiniteInstanity?null:this.insanity?.data?.duration.seconds;!indefiniteInstanity&&insaneDuration&&(insaneDuration/=3600);let boutDurationText=this.isInABoutOfMadness?boutRealTime?`${duration} ${game.i18n.localize("CoC7.rounds")}`:`${duration} ${game.i18n.localize("CoC7.hours")}`:null;const insanityDurationText=insaneDuration&&this.isInsane?indefiniteInstanity?null:`${insaneDuration} ${game.i18n.localize("CoC7.hours")}`:null;return!this.isInsane||insanityDurationText||indefiniteInstanity||(indefiniteInstanity=!0),duration||(boutDurationText=""),{boutOfMadness:{active:this.isInABoutOfMadness,realTime:this.isInABoutOfMadness?boutRealTime:void 0,summary:this.isInABoutOfMadness?!boutRealTime:void 0,duration:this.isInABoutOfMadness?duration:void 0,durationText:boutDurationText||"",hint:this.isInABoutOfMadness?`${game.i18n.localize("CoC7.BoutOfMadness")}${boutDurationText?": "+boutDurationText:""}`:game.i18n.localize("CoC7.BoutOfMadness")},underlying:{active:this.isInsane,indefintie:this.isInsane?indefiniteInstanity:void 0,duration:insaneDuration,durationText:insanityDurationText||"",hint:this.isInsane?indefiniteInstanity?game.i18n.localize("CoC7.IndefiniteInsanity"):`${game.i18n.localize("CoC7.TemporaryInsanity")} ${insanityDurationText||""}`:game.i18n.localize("CoC7.NotInsane")}}}get portrait(){return game.settings.get("CoC7","useToken")?this.isToken?this.token?.data?.img||this.img:this.data.token?.img||this.img:this.img}async enterBoutOfMadness(realTime=!0,duration=1){let result=null;const boutOfMadnessTableId=realTime?game.settings.get("CoC7","boutOfMadnessRealTimeTable"):game.settings.get("CoC7","boutOfMadnessSummaryTable");if("none"!==boutOfMadnessTableId){result={phobia:!1,mania:!1,description:null};const boutOfMadnessTable=game.tables.get(boutOfMadnessTableId);if(result.tableRoll=await boutOfMadnessTable.roll(),void 0!==result.tableRoll.results[0]){if(CONST.TABLE_RESULT_TYPES.ENTITY===result.tableRoll.results[0].data.type){const item=game.items.get(result.tableRoll.results[0].data.resultId);void 0!==item?(item.data?.data?.type?.phobia&&(result.phobia=!0),item.data?.data?.type?.mania&&(result.mania=!0),result.description=`${item.name}:${TextEditor.enrichHTML(item.data.data.description.value)}`,result.name=item.name,delete item.data._id,await this.createEmbeddedDocuments("Item",[item.data])):ui.notifications.error(game.i18n.localize("CoC7.MessageBoutOfMadnessItemNotFound"))}CONST.TABLE_RESULT_TYPES.TEXT===result.tableRoll.results[0].data.type&&(result.description=TextEditor.enrichHTML(result.tableRoll.results[0].data.text))}else ui.notifications.error(game.i18n.localize("CoC7.MessageBoutOfMadnessTableNotFound"))}return realTime?(this.boutOfMadness?await this.boutOfMadness.update({disabled:!1,duration:{rounds:realTime&&duration?duration:void 0,seconds:realTime?void 0:3600*duration,turns:1},flags:{CoC7:{realTime}}}):await super.createEmbeddedDocuments("ActiveEffect",[{label:game.i18n.localize("CoC7.BoutOfMadnessName"),icon:"systems/CoC7/assets/icons/hanging-spider.svg",origin:this.uuid,duration:{rounds:realTime&&duration?duration:void 0,seconds:realTime?void 0:3600*duration,turns:1},flags:{CoC7:{madness:!0,realTime}},disabled:!1}]),result):result}async enterInsanity(indefinite=!0,duration){this.insanity?await this.insanity.update({disabled:!1,duration:{seconds:!indefinite&&duration?3600*duration:void 0,turns:1},flags:{CoC7:{indefinite}}}):await super.createEmbeddedDocuments("ActiveEffect",[{label:game.i18n.localize("CoC7.InsanityName"),icon:"systems/CoC7/assets/icons/tentacles-skull.svg",origin:this.uuid,duration:{seconds:!indefinite&&duration?3600*duration:void 0,turns:1},flags:{CoC7:{madness:!0,indefinite}},disabled:!1}])}async exitBoutOfMadness(){return await(this.boutOfMadness?.delete())}async exitInsanity(){return await(this.insanity?.delete())}static emptySkill(skillName,value,{rarity=!1,push=!0,combat=!1,img=!1,specialization=!1}={}){const data={name:skillName,type:"skill",data:{value,properties:{special:!1,rarity,push,combat}}};return!1!==img&&(data.img=img),!1!==specialization&&(data.data.specialization=specialization,data.data.properties.special=!0),data}async createSkill(skillName,value,showSheet=!1){const data=CoCActor.emptySkill(skillName,value);return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createWeaponSkill(name,firearms=!1,base=null){const skillData=await SkillSpecSelectDialog.create([],game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName"),0,name),value=Number(skillData.get("base-value")),data={name,type:"skill",data:{specialization:game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName"),base:isNaN(value)?0:value,adjustments:{personal:null,occupation:null,archetype:null,experience:null},properties:{special:!0,fighting:!firearms,firearm:firearms,combat:!0}}};await this.createEmbeddedDocuments("Item",[data],{renderSheet:!base});return this.getSkillsByName(name)[0]}async creatureInit(){if("creature"!==this.data.type)return;if(this.getActorFlag("initialized"))return;if(0===this.getSkillsByName(game.i18n.localize(COC7.creatureFightingSkill)).length){try{const skill=await this.createEmbeddedDocuments("Item",[{name:game.i18n.localize(COC7.creatureFightingSkill),type:"skill",data:{base:0,value:null,specialization:game.i18n.localize(COC7.fightingSpecializationName),properties:{combat:!0,fighting:!0,special:!0},flags:{}}}],{renderSheet:!1}),attack=await this.createEmbeddedDocuments("Item",[{name:"Innate attack",type:"weapon",data:{description:{value:"Creature's natural attack",chat:"Creature's natural attack"},wpnType:"innate",properties:{addb:!0,slnt:!0}}}],{renderSheet:!1});if(skill.length>0&&attack.length>0){const createdAttack=this.items.get(attack[0].id);await createdAttack.update({"data.skill.main.id":skill[0].id,"data.skill.main.name":skill[0].name})}}catch(err){console.error("Creature init: "+err.message)}await this.setActorFlag("initialized")}}async createItem(itemName,quantity=1,showSheet=!1){const data={name:itemName,type:"item",data:{quantity}};return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptyBook(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newBookName)))return this.createBook(game.i18n.localize(COC7.newBookName),showSheet);let index=0,itemName=game.i18n.localize(COC7.newBookName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newBookName)+" "+index;return this.createBook(itemName,showSheet)}async createBook(itemName,showSheet=!1){const data={name:itemName,type:"book",data:{}};return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptySpell(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newSpellName)))return this.createSpell(game.i18n.localize(COC7.newSpellName),showSheet);let index=0,itemName=game.i18n.localize(COC7.newSpellName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newSpellName)+" "+index;return this.createSpell(itemName,showSheet)}static emptySpell(itemName){return{name:itemName,type:"spell",data:{}}}async createSpell(itemName,showSheet=!1){const data=CoCActor.emptySpell(itemName);return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptySkill(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newSkillName)))return this.createSkill(game.i18n.localize(COC7.newSkillName),null,showSheet);let index=0,skillName=game.i18n.localize(COC7.newSkillName)+" "+index;for(;this.getItemIdByName(skillName);)index++,skillName=game.i18n.localize(COC7.newSkillName)+" "+index;return this.createSkill(skillName,null,showSheet)}async createEmptyItem(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newItemName)))return this.createItem(game.i18n.localize(COC7.newItemName),1,showSheet);let index=0,itemName=game.i18n.localize(COC7.newItemName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newItemName)+" "+index;return this.createItem(itemName,1,showSheet)}async createEmptyWeapon(event=null){const showSheet=!event||!event.shiftKey;let weaponName=game.i18n.localize(COC7.newWeaponName);if(this.getItemIdByName(game.i18n.localize(COC7.newWeaponName))){let index=0;for(weaponName=game.i18n.localize(COC7.newWeaponName)+" "+index;this.getItemIdByName(weaponName);)index++,weaponName=game.i18n.localize(COC7.newWeaponName)+" "+index}const data={name:weaponName,type:"weapon",data:{properties:{}}};for(const[key]of Object.entries(COC7.weaponProperties))data.data.properties[key]=!1;await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createBioSection(title=null){const bio=this.data.data.biography?duplicate(this.data.data.biography):[];bio.push({title,value:null}),await this.update({"data.biography":bio})}async updateBioValue(index,content){const bio=duplicate(this.data.data.biography);bio[index].value=content,await this.update({"data.biography":bio},{render:!1})}async updateBioTitle(index,title){const bio=duplicate(this.data.data.biography);bio[index].title=title,await this.update({"data.biography":bio})}async deleteBioSection(index){const bio=duplicate(this.data.data.biography);bio.splice(index,1),await this.update({"data.biography":bio})}async moveBioSectionUp(index){if(0===index)return;const bio=duplicate(this.data.data.biography);if(index>=bio.length)return;const elem=bio.splice(index,1)[0];bio.splice(index-1,0,elem),await this.update({"data.biography":bio})}async moveBioSectionDown(index){const bio=duplicate(this.data.data.biography);if(index>=bio.length-1)return;const elem=bio.splice(index,1)[0];bio.splice(index+1,0,elem),await this.update({"data.biography":bio})}async updateTextArea(textArea){const name="data."+textArea.dataset.areaName;await this.update({[name]:textArea.value})}async createEmbeddedDocuments(embeddedName,dataArray,options){const processedDataArray=[];let baseValue=0,baseCalculated=0,archetype=!1,occupation=!1;for(const data of dataArray)switch(data.type){case"skill":if(baseValue=data.data.base,baseCalculated=await CoC7Item.calculateBase(this,data),"character"!==this.data.type){if(this.getItemIdByName(data.name))return;if(baseValue&&String(baseValue)!==String(data.data.value)&&(data.data.value=baseCalculated),isNaN(Number(data.data.value))){let value;try{value=(await new Roll(data.data.value,this.parseCharacteristics()).evaluate({async:!0})).total}catch(err){value=null}value&&(data.data.value=Math.floor(value))}}else data.data.value=null;if(CoC7Item.isAnySpec(data)){const specialization=data.data.specialization?.toLowerCase();if(specialization){let skillList=[];(data.data?.flags?.occupation||data.data?.flags?.archetype)&&(skillList=this.skills.filter((el=>!!el.data.data.specialization&&((!data.data?.flags?.occupation||!el.data.data.flags?.occupation)&&((!data.data?.flags?.archetype||!el.data.data.flags?.archetype)&&specialization.toLowerCase()===el.data.data.specialization?.toLowerCase())))));const skillData=await SkillSpecSelectDialog.create(skillList,data.data.specialization,baseCalculated);if(skillData){if(skillData.get("existing-skill")){const existingItem=this.items.get(skillData.get("existing-skill"));for(const[key,value]of Object.entries(data.data.flags))value&&await existingItem.setItemFlag(key);return void(data.name=CoC7Item.getNameWithoutSpec(existingItem))}skillData.get("new-skill-name")?data.name=skillData.get("new-skill-name"):data.name=CoC7Item.getNameWithoutSpec(data)}}}else{data.data.specialization&&(data.name=CoC7Item.getNameWithoutSpec(data))}String(baseValue)!==String(baseCalculated)&&(data.data.base=baseCalculated),processedDataArray.push(duplicate(data));break;case"weapon":if("container"!==this.data.type){const mainSkill=data.data?.skill?.main?.name;if(mainSkill){let skill=this.getSkillsByName(mainSkill)[0];if(!skill){const name=mainSkill.match(/\(([^)]+)\)/)?mainSkill.match(/\(([^)]+)\)/)[1]:mainSkill;skill=await this.createWeaponSkill(name,!!data.data.properties?.rngd)}skill&&(data.data.skill.main.id=skill.id)}const secondSkill=data.data?.skill?.alternativ?.name;if(secondSkill){let skill=this.getSkillsByName(secondSkill)[0];if(!skill){const name=mainSkill.match(/\(([^)]+)\)/)?mainSkill.match(/\(([^)]+)\)/)[1]:mainSkill;skill=await this.createWeaponSkill(name,!!data.data.properties?.rngd)}skill&&(data.data.skill.alternativ.id=skill.id)}}processedDataArray.push(duplicate(data));break;case"setup":{if(data.data.enableCharacterisitics){data.data.characteristics.list={},data.data.characteristics.list.str=this.getCharacteristic("str"),data.data.characteristics.list.con=this.getCharacteristic("con"),data.data.characteristics.list.siz=this.getCharacteristic("siz"),data.data.characteristics.list.dex=this.getCharacteristic("dex"),data.data.characteristics.list.app=this.getCharacteristic("app"),data.data.characteristics.list.int=this.getCharacteristic("int"),data.data.characteristics.list.pow=this.getCharacteristic("pow"),data.data.characteristics.list.edu=this.getCharacteristic("edu"),data.data.characteristics.list.luck={},data.data.characteristics.list.luck.value=isNaN(this.luck)?null:this.luck,data.data.characteristics.list.luck.label=game.i18n.localize("CoC7.Luck"),data.data.characteristics.list.luck.shortName=game.i18n.localize("CoC7.Luck"),data.data.characteristics.values||(data.data.characteristics.values={}),data.data.characteristics.values.str=data.data.characteristics.list.str.value,data.data.characteristics.values.con=data.data.characteristics.list.con.value,data.data.characteristics.values.siz=data.data.characteristics.list.siz.value,data.data.characteristics.values.dex=data.data.characteristics.list.dex.value,data.data.characteristics.values.app=data.data.characteristics.list.app.value,data.data.characteristics.values.int=data.data.characteristics.list.int.value,data.data.characteristics.values.pow=data.data.characteristics.list.pow.value,data.data.characteristics.values.edu=data.data.characteristics.list.edu.value,data.data.characteristics.values.luck=data.data.characteristics.list.luck.value,data.data.characteristics.points.enabled?data.data.title=game.i18n.localize("CoC7.SpendPoints"):data.data.title=game.i18n.localize("CoC7.RollCharac"),data.data.pointsWarning=!(null!==data.data.characteristics.values.str&&null!==data.data.characteristics.values.con&&null!==data.data.characteristics.values.siz&&null!==data.data.characteristics.values.dex&&null!==data.data.characteristics.values.app&&null!==data.data.characteristics.values.int&&null!==data.data.characteristics.values.pow&&null!==data.data.characteristics.values.edu);if(!await CharacRollDialog.create(data.data))return;{const updateData={};for(const key of["str","con","siz","dex","app","int","pow","edu"])data.data.characteristics.values[key]&&(updateData[`data.characteristics.${key}.value`]=data.data.characteristics.values[key],updateData[`data.characteristics.${key}.formula`]=data.data.characteristics.rolls[key]);data.data.characteristics.values.luck&&(updateData["data.attribs.lck.value"]=data.data.characteristics.values.luck),data.data.characteristics.values.pow&&(updateData["data.attribs.san.value"]=data.data.characteristics.values.pow,updateData["data.attribs.san.oneFifthSanity"]=" / "+Math.floor(data.data.characteristics.values.pow/5),updateData["data.indefiniteInsanityLevel.max"]=updateData["data.attribs.mp.value"]=updateData["data.attribs.mp.max"]=Math.floor(data.data.characteristics.values.pow/5)),await this.update(updateData),await this.update({"data.attribs.hp.value":this.hpMax,"data.attribs.hp.max":this.hpMax})}}const skills=data.data.items.filter((it=>"skill"===it.type)),othersItems=data.data.items.filter((it=>"skill"!==it.type));if(await this.addUniqueItems(skills),await this.addItems(othersItems),game.settings.get("CoC7","oneBlockBackstory"))await this.update({"data.backstory":data.data.backstory});else for(const sectionName of data.data.bioSections)!this.data.data.biography?.find((el=>sectionName===el.title))&&sectionName&&await this.createBioSection(sectionName);Hooks.call("setupFinishedCoC7");break}case"archetype":if("character"===this.data.type){if(this.archetype){let resetArchetype=!1;if(await Dialog.confirm({title:game.i18n.localize("CoC7.ResetArchetype"),content:`<p>${game.i18n.format("CoC7.ResetArchetypeHint",{name:this.name})}</p>`,yes:()=>{resetArchetype=!0},defaultYes:!1}),!resetArchetype)return;await this.resetArchetype()}const coreCharac=[];for(const entry of Object.entries(data.data.coreCharacteristics)){const[key,value]=entry;if(data.data.coreCharacteristics[key]=!1,value){const char=this.getCharacteristic(key);char.key=key,coreCharac.push(char)}}let charac;if(coreCharac.length>1){const charDialogData={};charDialogData.characteristics=coreCharac,charDialogData.title=game.i18n.localize("CoC7.SelectCoreCharac"),charac=await CharacSelectDialog.create(charDialogData)}else 1===coreCharac.length&&(charac=coreCharac[0].key);if(!charac)return;if(data.data.coreCharacteristics[charac]=!0,data.data.coreCharacteristicsFormula.enabled){let value=Number(data.data.coreCharacteristicsFormula.value);if(isNaN(value)){const char=this.getCharacteristic(charac),roll=new Roll(data.data.coreCharacteristicsFormula.value);await roll.roll({async:!0}),roll.toMessage({flavor:`Rolling characterisitic ${char.label}: ${data.data.coreCharacteristicsFormula.value}`}),value=char.value<roll.total?roll.total:char.value}await this.update({[`data.characteristics.${charac}.value`]:value})}await this.addUniqueItems(data.data.skills,"archetype"),processedDataArray.push(duplicate(data)),archetype=!0}break;case"occupation":if("character"===this.data.type){if(this.occupation){let resetOccupation=!1;if(await Dialog.confirm({title:game.i18n.localize("CoC7.ResetOccupation"),content:`<p>${game.i18n.format("CoC7.ResetOccupationHint",{name:this.name})}</p>`,yes:()=>{resetOccupation=!0},defaultYes:!1}),!resetOccupation)return;await this.resetOccupation()}const pointsDialogData={};pointsDialogData.characteristics=data.data.occupationSkillPoints;let total=0,optionalChar=!1;for(const entry of Object.entries(data.data.occupationSkillPoints)){const[key,value]=entry,char=this.getCharacteristic(key);pointsDialogData.characteristics[key].name=char.label,pointsDialogData.characteristics[key].value=char.value,value.selected&&(pointsDialogData.characteristics[key].total=char.value*Number(pointsDialogData.characteristics[key].multiplier),value.optional?optionalChar=!0:total+=pointsDialogData.characteristics[key].total)}if(pointsDialogData.total=total,optionalChar){if(!await PointSelectDialog.create(pointsDialogData))return}for(let index=0;index<data.data.groups.length;index++){const dialogData={skills:[],type:"occupation"};dialogData.actorId=this.id,dialogData.optionsCount=Number(data.data.groups[index].options),dialogData.title=game.i18n.localize("CoC7.SkillSelectionWindow");for(const value of data.data.groups[index].skills)if(CoC7Item.isAnySpec(value))dialogData.skills.push(value);else{const skill=this.items.find((item=>item.name===value.name&&"skill"===item.type));if(!skill||!skill.data.data.flags?.occupation){data.data.skills.find((item=>item.name===value.name))||dialogData.skills.push(value)}}if(0!==dialogData.skills.length){for(const skill of dialogData.skills)skill.data.specialization&&!skill.name.includes(skill.data.specialization)?skill.displayName=`${skill.data.specialization} (${skill.name})`:skill.displayName=skill.name;if(dialogData.skills.length<=dialogData.optionsCount){ui.notifications.info(game.i18n.format("CoC7.InfoLessSkillThanOptions",{skillCount:dialogData.skills.length,optionsCount:dialogData.optionsCount}));const merged=CoC7Item.mergeOptionalSkills(data.data.skills,dialogData.skills);data.data.skills=merged}else{const selected=await SkillSelectDialog.create(dialogData);if(!selected)return;const merged=CoC7Item.mergeOptionalSkills(data.data.skills,selected);data.data.skills=merged}}else ui.notifications.info(game.i18n.localize("CoC7.InfoAllSkillsAlreadySelected"))}if(Number(data.data.personal)){const dialogData={skills:[],type:"occupation"};dialogData.actorId=this.id,dialogData.optionsCount=Number(data.data.personal),dialogData.title=game.i18n.format("CoC7.SelectPersonalSkills",{number:Number(data.data.personal)});for(const s of this.skills)if(!s.data.data.flags.occupation&&!s.data.data.properties.noadjustments&&!s.data.data.properties.noxpgain){data.data.skills.find((item=>item.name===s.name))||dialogData.skills.push(s.data)}if(0!==dialogData.skills.length){for(const skill of dialogData.skills)skill.data.specialization&&!skill.name.includes(skill.data.specialization)?skill.displayName=`${skill.data.specialization} (${skill.name})`:skill.displayName=skill.name;if(dialogData.skills.length<=dialogData.optionsCount){ui.notifications.info(game.i18n.format("CoC7.InfoLessSkillThanOptions",{skillCount:dialogData.skills.length,optionsCount:dialogData.optionsCount}));const merged=CoC7Item.mergeOptionalSkills(data.data.skills,dialogData.skills);data.data.skills=merged}else{const selected=await SkillSelectDialog.create(dialogData);if(!selected)return;const merged=CoC7Item.mergeOptionalSkills(data.data.skills,selected);data.data.skills=merged}}else ui.notifications.info(game.i18n.localize("CoC7.InfoAllSkillsAlreadySelected"))}await this.addUniqueItems(data.data.skills,"occupation"),await(this.creditRatingSkill?.setItemFlag("occupation")),await(this.creditRatingSkill?.update({"data.adjustments.occupation":Number(data.data.creditRating.min)})),processedDataArray.push(duplicate(data)),occupation=!0}break;default:processedDataArray.push(duplicate(data))}if(0===processedDataArray.length)return[];const processed=await super.createEmbeddedDocuments(embeddedName,processedDataArray,options);return archetype&&(await this.update({"data.development.archetype":this.archetypePoints}),Hooks.call("archetypeFinishedCoC7")),occupation&&(await this.update({"data.development.occupation":this.occupationPoints,"data.development.personal":this.personalPoints}),Hooks.call("occupationFinishedCoC7")),processed}getItemIdByName(itemName){let id=null;const name=itemName.match(/\(([^)]+)\)/)?itemName.match(/\(([^)]+)\)/)[1]:itemName;for(const value of this.items)CoC7Item.getNameWithoutSpec(value).toLowerCase()===name.toLowerCase()&&(id=value.id);return id}getItemsByName(itemName){const itemList=[];for(const value of this.items)value.name===itemName&&itemList.push(value);return itemList}getSkillsByName(skillName){const skillList=[],name=skillName.match(/\(([^)]+)\)/)?skillName.match(/\(([^)]+)\)/)[1]:skillName;for(const value of this.items)CoC7Item.getNameWithoutSpec(value).toLowerCase()===name.toLowerCase()&&"skill"===value.type&&skillList.push(value);return skillList}parseFormula(formula){let parsedFormula=formula;for(const[key,value]of Object.entries(COC7.formula.actor))parsedFormula=parsedFormula.replace(key,value);return parsedFormula}parseCharacteristics(){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actor))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=getProperty(this,value.substring(5)));return parsed}static getCharacteristicDefinition(){const characteristics=[];for(const[key,value]of Object.entries(game.system.template.Actor.templates.characteristics.characteristics))characteristics.push({key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label)});return characteristics}getCharacteristic(charName){if(this.data.data.characteristics)for(const[key,value]of Object.entries(this.data.data.characteristics))if(game.i18n.localize(value.short).toLowerCase()===charName.toLowerCase()||game.i18n.localize(value.label).toLowerCase()===charName.toLowerCase()||key===charName.toLowerCase())return{key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label),value:value.value};return null}getAttribute(attribName){return["lck","luck",game.i18n.localize("CoC7.Luck").toLowerCase()].includes(attribName.toLowerCase())?{key:"lck",shortName:"luck",label:game.i18n.localize("CoC7.Luck"),value:this.data.data.attribs.lck.value}:["san",game.i18n.localize("CoC7.SAN").toLowerCase(),game.i18n.localize("CoC7.Sanity").toLowerCase()].includes(attribName.toLowerCase())?{key:"san",shortName:game.i18n.localize("CoC7.SAN"),label:game.i18n.localize("CoC7.Sanity"),value:this.data.data.attribs.san.value}:null}get occupation(){return this.items.filter((item=>"occupation"===item.type))[0]}get archetype(){return this.items.filter((item=>"archetype"===item.type))[0]}async resetOccupation(eraseOld=!0){if(eraseOld){const occupationSkill=this.items.filter((item=>item.getItemFlag("occupation")));for(let index=0;index<occupationSkill.length;index++)await occupationSkill[index].unsetItemFlag("occupation")}this.occupation&&await this.occupation.delete(),await this.update({"data.development.occupation":null})}async resetArchetype(eraseOld=!0){if(eraseOld){const archetypeSkill=this.items.filter((item=>item.getItemFlag("archetype")));for(let index=0;index<archetypeSkill.length;index++)await archetypeSkill[index].unsetItemFlag("archetype")}this.archetype&&await this.archetype.delete(),await this.update({"data.development.archetype":null})}get luck(){return parseInt(this.data.data.attribs?.lck?.value)}async setLuck(value){return await this.update({"data.attribs.lck.value":value})}async spendLuck(amount){return amount=parseInt(amount),this.luck>=amount&&this.setLuck(this.luck-amount)}get hp(){if(["vehicle"].includes(this.data.type)){if(null===this.data.data.attribs.build.current||void 0===this.data.data.attribs.build.current||""===this.data.data.attribs.build.current)return this.build;if(this.data.data.attribs.build.current>this.data.data.attribs.build.value)return this.build;const hp=parseInt(this.data.data.attribs.build.current);return isNaN(hp)?null:hp}return parseInt(this.data.data.attribs.hp.value)}get hpMax(){return["vehicle"].includes(this.data.type)?this.build:this.data.data.attribs.hp.auto?null!=this.data.data.characteristics.con.value&&null!=this.data.data.characteristics.con.value?Math.floor((this.data.data.characteristics.con.value+this.data.data.characteristics.con.value)/(game.settings.get("CoC7","pulpRules")&&"character"===this.data.type?5:10)):this.data.data.attribs.hp.max?parseInt(this.data.data.attribs.hp.max):null:parseInt(this.data.data.attribs.hp.max)}async setHp(value){return value<0&&(value=0),["vehicle"].includes(this.data.type)?(value>this.build&&(value=parseInt(this.build)),await this.update({"data.attribs.build.current":value})):(value>this.hpMax&&(value=parseInt(this.hpMax)),await this.update({"data.attribs.hp.value":value}))}async addUniqueItems(skillList,flag=null){const processed=[];for(const skill of skillList)if(CoC7Item.isAnySpec(skill))skill.data.flags||(skill.data.flags={}),flag&&(skill.data.flags[flag]=!0),processed.push(duplicate(skill));else{const itemId=this.getItemIdByName(skill.name);if(itemId){if(flag){const item=this.items.get(itemId);await item.setItemFlag(flag)}}else flag&&(skill.data.flags||(skill.data.flags={}),skill.data.flags[flag]=!0),processed.push(duplicate(skill))}0!==processed.length&&await this.createEmbeddedDocuments("Item",processed,{renderSheet:!1})}async addItems(itemList,flag=null){const processed=[];for(const item of itemList)flag&&(item.data.flags||(item.data.flags={}),item.data.flags[flag]=!0),processed.push(duplicate(item));if(0!==processed.length)return await this.createEmbeddedDocuments("Item",processed,{renderSheet:!1})}async addUniqueItem(skill,flag=null){const itemId=this.getItemIdByName(skill.name);if(itemId){if(flag){const item=this.items.get(itemId);await item.setItemFlag(flag)}}else flag&&(skill.data.flags||(skill.data.flags={}),skill.data.flags[flag]=!0),await this.createEmbeddedDocuments("Item",[skill],{renderSheet:!1})}get mpMax(){return this.data.data.attribs.mp.auto?null!=this.data.data.characteristics.pow.value?Math.floor(this.data.data.characteristics.pow.value/5):null:parseInt(this.data.data.attribs.mp.max)}encounteredCreaturesSanData(creature){const i=this.encounteredCreaturesSanDataIndex(creature);return-1!==i?this.data.data.encounteredCreatures[i]:null}encounteredCreaturesSanDataIndex(creature){const sanData=CoC7Utilities.getCreatureSanData(creature);return this.data.data.encounteredCreatures.findIndex((cd=>cd.id===sanData?.id||cd.name.toLowerCase()===sanData.name?.toLocaleLowerCase()))}sanLostToCreature(creature){const sanData=this.encounteredCreaturesSanData(creature);if(sanData)return sanData.specie?Math.max(sanData.specie.totalLoss||0,sanData.totalLoss):sanData.totalLoss||0;{const creatureSanData=CoC7Utilities.getCreatureSanData(creature);if(creatureSanData.specie){const specieEncountered=this.encounteredCreaturesSanData(creatureSanData.specie);if(specieEncountered)return specieEncountered.totalLoss}return 0}}maxPossibleSanLossToCreature(creature){const sanData=this.encounteredCreaturesSanData(creature),creatureSanData=CoC7Utilities.getCreatureSanData(creature);if(sanData){let changes=!1;if(creatureSanData.sanLossMax!==sanData.sanLossMax&&(sanData.sanLossMax=creatureSanData.sanLossMax,changes=!0),creatureSanData.specie&&!sanData.specie&&(sanData.specie=creatureSanData.specie,changes=!0),creatureSanData.specie&&creatureSanData.specie.sanLossMax!==sanData.specie.sanLossMax&&(sanData.specie.sanLossMax=creatureSanData.specie.sanLossMax,changes=!0),sanData.totalLoss>sanData.sanLossMax&&(sanData.totalLoss=sanData.sanLossMax,changes=!0),sanData.specie&&sanData.specie.totalLoss>sanData.specie.sanLossMax&&(sanData.specie.totalLoss=sanData.specie.sanLossMax,changes=!0),changes){const encounteredCreaturesList=this.data.data.encounteredCreatures?duplicate(this.data.data.encounteredCreatures):[];encounteredCreaturesList[this.encounteredCreaturesSanDataIndex(creature)]=sanData,sanData.specie&&this._updateAllOfSameSpecie(encounteredCreaturesList,sanData.specie),this.update({"data.encounteredCreatures":encounteredCreaturesList})}return sanData.sanLossMax-sanData.totalLoss}if(creatureSanData){const sanLostToCreature=this.sanLostToCreature(creature);return Math.max(0,creatureSanData.sanLossMax-sanLostToCreature)}return 99}creatureEncountered(creature){return!!~this.encounteredCreaturesSanDataIndex(creature)}creatureSpecieEncountered(creature){const creatureSanData=CoC7Utilities.getCreatureSanData(creature);return creatureSanData.specie?!!~this.encounteredCreaturesSanDataIndex(creatureSanData.specie):this.creatureEncountered(creature)}_updateAllOfSameSpecie(encounteredCreaturesList,specieSanData){for(let index=0;index<encounteredCreaturesList.length;index++)if((encounteredCreaturesList[index].specie?.id===specieSanData.id||encounteredCreaturesList[index].specie?.name.toLowerCase()===specieSanData.name?.toLowerCase())&&encounteredCreaturesList[index].specie.totalLoss!==specieSanData.totalLoss){const delta=specieSanData.totalLoss-encounteredCreaturesList[index].specie.totalLoss;delta>0&&(encounteredCreaturesList[index].specie=specieSanData,encounteredCreaturesList[index].totalLoss+=delta,encounteredCreaturesList[index].totalLoss=Math.min(encounteredCreaturesList[index].totalLoss,encounteredCreaturesList[index].sanLossMax))}}_removeSpecie(encounteredCreaturesList,specieSanData){for(let index=0;index<encounteredCreaturesList.length;index++)if(encounteredCreaturesList[index].specie?.id===specieSanData.id||encounteredCreaturesList[index].specie?.name.toLowerCase()===specieSanData.name?.toLowerCase()){const previousSpecieLost=encounteredCreaturesList[index].specie.totalLoss;delete encounteredCreaturesList[index].specie,encounteredCreaturesList[index].totalLoss=encounteredCreaturesList[index].totalLoss-previousSpecieLost,encounteredCreaturesList[index].totalLoss<0&&(encounteredCreaturesList[index].totalLoss=0)}}async resetCreature(creature){const indexSanData=this.encounteredCreaturesSanDataIndex(creature);if(~indexSanData){const creatureSanData=CoC7Utilities.getCreatureSanData(creature),encounteredCreaturesList=this.data.data.encounteredCreatures?duplicate(this.data.data.encounteredCreatures):[];encounteredCreaturesList.splice(indexSanData,1),creatureSanData.totalLoss=0,creatureSanData.specie&&delete creatureSanData.specie,this._updateAllOfSameSpecie(encounteredCreaturesList,creatureSanData),await this.update({"data.encounteredCreatures":encounteredCreaturesList})}}async resetSpecie(creature){const encounteredCreaturesList=this.data.data.encounteredCreatures?duplicate(this.data.data.encounteredCreatures):[],creatureSanData=CoC7Utilities.getCreatureSanData(creature);if(!creatureSanData.specie)return;const indexSanData=this.encounteredCreaturesSanDataIndex(creatureSanData.specie);return~indexSanData&&encounteredCreaturesList.splice(indexSanData,1),this._removeSpecie(encounteredCreaturesList,creatureSanData.specie),await this.update({"data.encounteredCreatures":encounteredCreaturesList}),!1}async looseSanToCreature(sanLoss,creature){let exactSanLoss=sanLoss;const creatureSanData=CoC7Utilities.getCreatureSanData(creature),indexSanData=this.encounteredCreaturesSanDataIndex(creature);let indexSpeciesSanData=-1;creatureSanData.specie?.id&&(indexSpeciesSanData=this.encounteredCreaturesSanDataIndex(creatureSanData.specie.id)),-1===indexSpeciesSanData&&creatureSanData.specie?.name&&(indexSpeciesSanData=this.encounteredCreaturesSanDataIndex(creatureSanData.specie.name));const encounteredCreaturesList=this.data.data.encounteredCreatures?duplicate(this.data.data.encounteredCreatures):[];if(~indexSanData){const oldSanData=encounteredCreaturesList[indexSanData];let newSanData;creatureSanData&&(newSanData=creatureSanData,newSanData.totalLoss=oldSanData.totalLoss||0,newSanData.specie?newSanData.specie.totalLoss=oldSanData.specie?.totalLoss?oldSanData.specie.totalLoss:0:oldSanData.specie&&(newSanData.specie=oldSanData.specie)),newSanData.totalLoss=newSanData.totalLoss?newSanData.totalLoss+sanLoss:sanLoss,newSanData.totalLoss>newSanData.sanLossMax&&(exactSanLoss-=newSanData.totalLoss-newSanData.sanLossMax,newSanData.totalLoss=newSanData.sanLossMax),newSanData.specie&&(newSanData.specie.totalLoss=newSanData.specie.totalLoss?newSanData.specie.totalLoss+exactSanLoss:exactSanLoss,newSanData.specie.totalLoss>newSanData.specie.sanLossMax&&(newSanData.specie.totalLoss=newSanData.specie.sanLossMax),this._updateAllOfSameSpecie(encounteredCreaturesList,newSanData.specie)),encounteredCreaturesList[indexSanData]=newSanData,~indexSpeciesSanData&&newSanData.specie?encounteredCreaturesList[indexSpeciesSanData]=newSanData.specie:newSanData.specie&&encounteredCreaturesList.push(newSanData.specie)}else{const newSanData=creatureSanData;newSanData.totalLoss=0,newSanData.specie&&(~indexSpeciesSanData?(newSanData.specie.totalLoss=encounteredCreaturesList[indexSpeciesSanData].totalLoss,newSanData.totalLoss=newSanData.specie.totalLoss,newSanData.totalLoss>newSanData.sanLossMax&&(newSanData.totalLoss=newSanData.sanLossMax)):(newSanData.specie.totalLoss=0,newSanData.totalLoss=0)),newSanData.totalLoss=newSanData.totalLoss+sanLoss,newSanData.totalLoss>newSanData.sanLossMax&&(exactSanLoss-=newSanData.totalLoss-newSanData.sanLossMax,newSanData.totalLoss=newSanData.sanLossMax),newSanData.specie&&(newSanData.specie.totalLoss=newSanData.specie.totalLoss+exactSanLoss,newSanData.specie.totalLoss>newSanData.specie.sanLossMax&&(newSanData.specie.totalLoss=newSanData.specie.sanLossMax),~indexSpeciesSanData?encounteredCreaturesList[indexSpeciesSanData]=newSanData.specie:encounteredCreaturesList.push(newSanData.specie),this._updateAllOfSameSpecie(encounteredCreaturesList,newSanData.specie)),encounteredCreaturesList.push(newSanData)}return await this.setSan(this.san-exactSanLoss),await this.update({"data.encounteredCreatures":encounteredCreaturesList}),exactSanLoss}async looseSan(sanLoss,creature=null){creature?await this.looseSanToCreature(sanLoss,creature):await this.setSan(this.san-sanLoss)}get sanData(){return CoC7Utilities.getCreatureSanData(this)}sanLoss(checkPassed){return checkPassed?this.sanLossCheckPassed:this.sanLossCheckFailled}get sanLossCheckPassed(){return this.data.data.special?.sanLoss?.checkPassed}get sanLossCheckFailled(){return this.data.data.special?.sanLoss?.checkFailled}get sanLossMax(){return this.sanLossCheckFailled?isNaN(Number(this.sanLossCheckFailled))?new Roll(this.sanLossCheckFailled).evaluate({maximize:!0}).total:Number(this.sanLossCheckFailled):0}get sanLossMin(){return this.sanLossCheckPassed?isNaN(Number(this.sanLossCheckPassed))?new Roll(this.sanLossCheckPassed).evaluate({maximize:!0}).total:Number(this.sanLossCheckPassed):0}get dailySanLoss(){return this.data.data.attribs.san?.dailyLoss||0}get sanMax(){if(this.data.data.attribs)return this.data.data.attribs?.san?.auto?this.cthulhuMythos?Math.max(this.data.data.characteristics.pow.value-this.cthulhuMythos,0):this.data.data.characteristics.pow.value:parseInt(this.data.data.attribs.san.max)}get mp(){return parseInt(this.data.data.attribs.mp.value)}async setMp(value){return value<0&&(value=0),value>parseInt(this.mpMax)&&(value=parseInt(this.mpMax)),await this.update({"data.attribs.mp.value":value})}get san(){return parseInt(this.data.data.attribs.san.value)}get int(){return this.getCharacteristic("int")}get occupationPointsSpent(){let occupationPoints=0;for(const skill of this.skills)skill.data.data.adjustments?.occupation&&(occupationPoints+=skill.data.data.adjustments.occupation);return occupationPoints}get occupationPoints(){if(!this.occupation)return 0;let points=0;for(const entry of Object.entries(this.occupation.data.data.occupationSkillPoints)){const[key,value]=entry,char=this.getCharacteristic(key);value.selected&&(points+=char.value*Number(value.multiplier))}return points}async resetOccupationPoints(){await this.update({"data.development.occupation":this.occupationPoints})}async resetArchetypePoints(){await this.update({"data.development.archetype":this.occupationPoints})}async resetPersonalPoints(){await this.update({"data.development.personal":this.personalPoints})}get archetypePointsSpent(){let archetypePoints=0;for(const skill of this.skills)skill.data.data.adjustments?.archetype&&(archetypePoints+=skill.data.data.adjustments.archetype);return archetypePoints}get archetypePoints(){return this.archetype?this.archetype.data.data.bonusPoints:0}get experiencePoints(){let experiencePoints=0;for(const skill of this.skills)skill.data.data.adjustments?.experience&&(experiencePoints+=skill.data.data.adjustments.experience);return experiencePoints}get personalPointsSpent(){let personalPoints=0;for(const skill of this.skills)skill.data.data.adjustments?.personal&&(personalPoints+=skill.data.data.adjustments.personal);return personalPoints}get personalPoints(){return 2*Number(this.data.data.characteristics.int.value)}get hasSkillFlaggedForExp(){for(const skill of this.skills)if(skill.data.data.flags?.developement)return!0;return!1}async setSan(value){value<0&&(value=0),value>this.sanMax&&(value=this.sanMax);const loss=parseInt(this.data.data.attribs.san.value)-value;if(loss>0){let totalLoss=parseInt(this.data.data.attribs.san.dailyLoss)?parseInt(this.data.data.attribs.san.dailyLoss):0;return totalLoss+=loss,loss>=5&&this.setStatus(COC7.status.tempoInsane),totalLoss>=Math.floor(this.san/5)&&this.setStatus(COC7.status.indefInsane),await this.update({"data.attribs.san.value":value,"data.attribs.san.dailyLoss":totalLoss})}return await this.update({"data.attribs.san.value":value})}async setAttribAuto(value,attrib){const updatedKey=`data.attribs.${attrib}.auto`;return await this.update({[updatedKey]:value})}async toggleAttribAuto(attrib){this.setAttribAuto(!this.data.data.attribs[attrib].auto,attrib)}get build(){if(["vehicle"].includes(this.data.type)){const build=parseInt(this.data.data.attribs.build.value);return isNaN(build)?null:build}if(!this.data.data.attribs)return null;if(!this.data.data.attribs.build)return null;if("auto"===this.data.data.attribs.build.value&&(this.data.data.attribs.build.auto=!0),this.data.data.attribs.build.auto){const sum=this.data.data.characteristics.str.value;if(sum<20)return-2;if(sum<40)return-1;if(sum<60)return 0;if(sum<80)return"1";if(sum<100)return 2}return this.data.data.attribs.build.value}get db(){if(["vehicle"].includes(this.data.type))return 0;if(!this.data.data.attribs)return null;if(!this.data.data.attribs.db)return null;if("auto"===this.data.data.attribs.db.value&&(this.data.data.attribs.db.auto=!0),this.data.data.attribs.db.auto){const sum=this.data.data.characteristics.str.value;if(sum<20)return-2;if(sum<40)return-1;if(sum<60)return 0;if(sum<80)return"1";if(sum<100)return 2;}return this.data.data.attribs.db.value}get mov(){if(["vehicle"].includes(this.data.type))return this.data.data.attribs.mov.value;if(!this.data.data.attribs)return null;if(!this.data.data.attribs.mov)return null;if("auto"===this.data.data.attribs.mov.value&&(this.data.data.attribs.mov.auto=!0),this.data.data.attribs.mov.auto){let MOV;if(MOV=this.data.data.characteristics.dex.value>this.data.data.characteristics.siz.value&&this.data.data.characteristics.str.value>this.data.data.characteristics.siz.value?9:this.data.data.characteristics.dex.value>=this.data.data.characteristics.siz.value||this.data.data.characteristics.str.value>=this.data.data.characteristics.siz.value?8:7,"creature"!==this.data.data.type&&(isNaN(parseInt(this.data.data.infos.age))||(MOV=parseInt(this.data.data.infos.age)>=40?MOV-Math.floor(parseInt(this.data.data.infos.age)/10)+3:MOV)),MOV>0)return MOV}return this.data.data.attribs.mov.value}get tokenId(){return this.token?`${this.token.scene._id}.${this.token.id}`:null}get locked(){return this.data.data.flags||(this.data.data.flags={},this.data.data.flags.locked=!0,this.update({"data.flags":{}}),this.update({"data.flags.locked":!1})),this.data.data.flags.locked}getItemsFromName(name){return this.items.filter((i=>i.name===name))}set locked(value){this.update({"data.flags.locked":value})}async toggleActorFlag(flagName){const flagValue=!this.data.data.flags[flagName],name=`data.flags.${flagName}`;await this.update({[name]:flagValue})}async attributeCheck(attributeName,fastForward=!1,options={}){const attrib=this.getAttribute(attributeName.toLowerCase());if(!attrib)return ui.notifications.error(game.i18n.format("CoC7.ErrorNotFound",{missing:attributeName})),null;const check=new CoC7Check;if(options.modifier&&(check.diceModifier=Number(options.modifier)),options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.rollAttribute(attrib.key),check.toMessage()}async characteristicCheck(characteristicName,fastForward=!1,options={}){const char=this.getCharacteristic(characteristicName);if(!char)return void ui.notifications.error(game.i18n.format("CoC7.ErrorNotFoundForActor",{missing:characteristicName,actor:this.name}));const check=new CoC7Check;if(options.modifier&&(check.diceModifier=Number(options.modifier)),options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){options.displayName=char.label;const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.rollCharacteristic(char.key),check.toMessage()}async skillCheck(skillData,fastForward,options={}){let skill=this.getSkillsByName(skillData.name?skillData.name:skillData);if(!skill.length){let item=null;if(skillData.pack){const pack=game.packs.get(skillData.pack);if("Item"!==pack.metadata.entity)return;item=await pack.getDocument(skillData.id)}else skillData.id&&(item=game.items.get(skillData.id));if(!item){const check=new CoC7Check;check._rawValue="?",await check.roll(),check.toMessage()}if(!item)return ui.notifications.warn(game.i18n.format("CoC7.NoSkill")+game.i18n.format("CoC7.ErrorNotFoundForActor",{missing:skillData.name?skillData.name:skillData,actor:this.name}));let create=!1;if(await Dialog.confirm({title:`${game.i18n.localize("CoC7.AddWeapon")}`,content:`<p>${game.i18n.format("CoC7.AddWeapontHint",{weapon:skillData.name,actor:this.name})}</p>`,yes:()=>{create=!0}}),!0!==create)return;if(await this.createEmbeddedDocuments("Item",[duplicate(item)]),skill=this.getSkillsByName(item.name),!skill.length)return;if(game.user.isGM){const skillValue=await class{static async create(name=null,baseValue=null){const html=await renderTemplate("systems/CoC7/templates/apps/skill-value.html",{base:baseValue,name});return new Promise((resolve=>{let formData=null;new Dialog({title:game.i18n.format("CoC7.SkillValue",{name}),content:html,buttons:{validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#skill-select-form")),resolve(formData))}},default:"validate",close:()=>resolve(!1)}).render(!0)}))}}.create(skill[0].name,skill[0].base),value=Number(skillValue.get("base-value"));await skill[0].updateValue(value)}}const check=new CoC7Check;if(void 0!==options.modifier&&(check.diceModifier=Number(options.modifier)),void 0!==options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,check.skill=skill[0].id,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.roll(),check.toMessage()}async weaponCheck(weaponData,fastForward=!1){const itemId=weaponData.id;let weapon;if(weapon=this.items.get(itemId),!weapon){let weapons=this.getItemsFromName(weaponData.name);if(0===weapons.length){if(!game.user.isGM)return void ui.notifications.warn(`Actor ${this.name} has no weapon named ${weaponData.name}`);{let item=null;const pack=weaponData.pack?game.packs.get(weaponData.pack):null;if(pack){if("Item"!==pack.metadata.entity)return;item=await pack.getDocument(weaponData.id)}else weaponData.id&&(item=game.items.get(weaponData.id));if(!item)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroNoItemFound"));let create=!1;await Dialog.confirm({title:`${game.i18n.localize("CoC7.AddWeapon")}`,content:`<p>${game.i18n.format("CoC7.AddWeapontHint",{weapon:weaponData.name,actor:this.name})}</p>`,yes:()=>{create=!0}});const actor=void 0!==this.parent?.actor?this.parent.actor:this;if(!0!==create)return;if(await actor.createEmbeddedDocuments("Item",[item.toJSON()]),weapons=actor.getItemsFromName(item.name),!weapons.length)return;await weapons[0].reload()}}else weapons.length>1&&ui.notifications.warn(`Actor ${this.name} has more than one weapon named ${weaponData.name}. The first found will be used`);weapon=weapons[0]}if(!weapon.data.data.properties.rngd){game.user.targets.size>1&&ui.notifications.warn(game.i18n.localize("CoC7.WarnTooManyTarget"));new CoC7MeleeInitiator(this.tokenKey,weapon.id,fastForward).createChatCard()}if(weapon.data.data.properties.rngd){new CoC7RangeInitiator(this.tokenKey,weapon.id,fastForward).createChatCard()}}async rollInitiative(hasGun=!1){switch(game.settings.get("CoC7","initiativeRule")){case"optional":{const roll=new CoC7Check(this.actorKey);return roll.denyPush=!0,roll.denyLuck=!0,roll.denyBlindTampering=!0,roll.hideDice=!1===game.settings.get("CoC7","displayInitDices"),roll.flavor="Initiative roll",await roll.rollCharacteristic("dex",hasGun?1:0),roll.toMessage(),roll.successLevel+this.data.data.characteristics.dex.value/100}default:return hasGun?this.data.data.characteristics.dex.value+50:this.data.data.characteristics.dex.value}}getActorFlag(flagName){return this.data.data.flags?!!this.data.data.flags[flagName]&&this.data.data.flags[flagName]:(this.data.data.flags={},this.data.data.flags.locked=!0,this.update({"data.flags":{}}),!1)}async setActorFlag(flagName){await this.update({[`data.flags.${flagName}`]:!0})}async unsetActorFlag(flagName){await this.update({[`data.flags.${flagName}`]:!1})}getWeaponSkills(itemId){const weapon=this.items.get(itemId);if("weapon"!==weapon.data.type)return null;const skills=[];return weapon.data.data.skill.main.id&&skills.push(this.items.get(weapon.data.data.skill.main.id)),weapon.usesAlternativeSkill&&weapon.data.data.skill.alternativ.id&&skills.push(this.items.get(weapon.data.data.skill.alternativ.id)),skills}find(name){const item=this.items.get(name);if(item)return{type:"item",value:item};const matches=/\(([^)]+)\)/.exec(name);let shortName=null;matches&&matches.length&&(shortName=matches[1]);const skill=this.skills.filter((s=>!!s.name&&(s.name.toLocaleLowerCase().replace(/\s/g,"")===name.toLocaleLowerCase().replace(/\s/g,"")||s.sName.toLocaleLowerCase().replace(/\s/g,"")===name.toLocaleLowerCase().replace(/\s/g,"")||s.sName.toLocaleLowerCase().replace(/\s/g,"")===shortName?.toLocaleLowerCase().replace(/\s/g,""))));if(skill.length)return{type:"item",value:skill[0]};const charKey=["str","con","siz","dex","app","int","pow","edu"];for(let i=0;i<charKey.length;i++){const char=this.getCharacteristic(charKey[i]);if(char){if(char.key?.toLocaleLowerCase()===name.toLowerCase())return{type:"characteristic",value:char};if(char.shortName?.toLocaleLowerCase()===name.toLowerCase())return{type:"characteristic",value:char};if(char.label?.toLocaleLowerCase()===name.toLowerCase())return{type:"characteristic",value:char}}}const attribKey=["lck","san"];for(let i=0;i<attribKey.length;i++){const attr=this.getAttribute(attribKey[i]);if(attr){if(attr.key?.toLocaleLowerCase()===name.toLowerCase())return{type:"attribute",value:attr};if(attr.shortName?.toLocaleLowerCase()===name.toLowerCase())return{type:"attribute",value:attr};if(attr.label?.toLocaleLowerCase()===name.toLowerCase())return{type:"attribute",value:attr}}}}get pilotSkills(){return this.skills.filter((s=>!!s.data.data.specialization&&s.data.data.specialization.length&&s.data.data.specialization?.toLocaleLowerCase()===game.i18n.localize("CoC7.PilotSpecializationName")?.toLocaleLowerCase()))}get driveSkills(){return this.skills.filter((s=>!!s.data.data.specialization&&s.data.data.specialization.length&&s.data.data.specialization?.toLocaleLowerCase()===game.i18n.localize("CoC7.DriveSpecializationName")?.toLocaleLowerCase()))}get tokenKey(){return this.sheet.token?`${this.sheet.token.parent.id}.${this.sheet.token.id}`:this.id}get actorKey(){return this.data.token.actorLink?this.id:this.tokenKey}static getActorFromKey(key){if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;return new Token(tokenData).actor}}return game.actors.get(key)||null}async rollCharacteristicsValue(){const characteristics={};for(const[key,value]of Object.entries(this.data.data.characteristics))if(value.formula&&!value.formula.startsWith("@")){const r=new Roll(value.formula);await r.roll({async:!0}),r.total&&(characteristics[`data.characteristics.${key}.value`]=Math.floor(r.total))}await this.update(characteristics),await this.reportCharactedriticsValue()}async averageCharacteristicsValue(){const characteristics={};for(const[key,value]of Object.entries(this.data.data.characteristics))if(value.formula&&!value.formula.startsWith("@")){const max=new Roll(value.formula).evaluate({maximize:!0}).total,min=new Roll(value.formula).evaluate({minimize:!0}).total,average=Math.floor((max+min)/2),charValue=average%5==0?average:10*Math.round(average/10);charValue&&(characteristics[`data.characteristics.${key}.value`]=charValue)}await this.update(characteristics),await this.reportCharactedriticsValue()}async reportCharactedriticsValue(){const characteristics={};for(const[key,value]of Object.entries(this.data.data.characteristics))if(value.formula&&value.formula.startsWith("@")){let charValue;try{charValue=new Roll(value.formula,this.parseCharacteristics()).evaluate({maximize:!0}).total}catch(err){charValue=null}charValue&&(characteristics[`data.characteristics.${key}.value`]=charValue)}await this.update(characteristics)}async setCharacteristic(name,value){const characteristic={},charValue=isNaN(parseInt(value))?null:parseInt(value);if(characteristic[name]=charValue,!charValue&&value.startsWith("@")){characteristic[name.replace(".value",".formula")]=value}await this.update(characteristic),await this.reportCharactedriticsValue()}async developementPhase(fastForward=!1){const failure=[],success=[],title=game.i18n.localize("CoC7.RollAll4Dev");let message='<p class="chat-card">';for(const item of this.items)if("skill"===item.type&&item.developementFlag){const die=await new Die({faces:100}).evaluate({async:!0}),skillValue=item.value;let augment=null,skillMasteringMessage=null;if(die.total>skillValue||die.total>=95){const augmentDie=await new Die({faces:10}).evaluate({async:!0});if(success.push(item.id),skillValue<90&&skillValue+augmentDie.total>=90){const augmentSANDie=await new Die({faces:6,number:2}).evaluate({async:!0}),sanGained=augmentSANDie.total,sanGainedMessage=`Gained 2d6 (${augmentSANDie.values[0]} + ${augmentSANDie.values[1]} = ${sanGained}) SAN`;console.debug(sanGainedMessage),skillMasteringMessage=`<span class="upgrade-success">${game.i18n.format("CoC7.SanGained",{results:`${augmentSANDie.values[0]} + ${augmentSANDie.values[1]}`,sanGained,skill:item.data.name,skillValue:skillValue+augmentDie.total})}</span><br>`,await this.setSan(this.san+sanGained)}augment+=augmentDie.total,message+=`<span class="upgrade-success">${game.i18n.format("CoC7.DevSuccess",{item:item.data.name,die:die.total,score:item.value,augment:augmentDie.total})}</span><br>`,null!==skillMasteringMessage&&(message+=skillMasteringMessage),await item.increaseExperience(augment)}else message+=`<span class="upgrade-failed">${game.i18n.format("CoC7.DevFailure",{item:item.data.name,die:die.total,score:item.value})}</span><br>`,failure.push(item.id);await item.unflagForDevelopement()}if(!fastForward){message+="</p>";const speaker={actor:this.actor};await chatHelper.createMessage(title,message,{speaker})}return{failure,success}}async developLuck(fastForward=!1){const currentLuck=this.data.data.attribs.lck.value;currentLuck||await this.update({"data.attribs.lck.value":0});const pulpRulesActivated=game.settings.get("CoC7","pulpRules"),upgradeRoll=(await new Roll("1D100").roll({async:!0})).total,equalOrLessCurrentLuck=upgradeRoll<=currentLuck;let augmentRoll;pulpRulesActivated?augmentRoll=equalOrLessCurrentLuck?"2D10+10":"1D10+5":equalOrLessCurrentLuck&&(augmentRoll="1D10");const title=game.i18n.localize("CoC7.RollLuck4Dev");let message='<p class="chat-card">';if(pulpRulesActivated||equalOrLessCurrentLuck){const augmentValue=(await new Roll(augmentRoll).roll({async:!0})).total;await this.update({"data.attribs.lck.value":this.data.data.attribs.lck.value+augmentValue}),message+=`<span class="upgrade-success">${game.i18n.format("CoC7.LuckIncreased",{die:upgradeRoll,score:currentLuck,augment:augmentValue})}</span>`}else message+=`<span class="upgrade-failed">${game.i18n.format("CoC7.LuckNotIncreased",{die:upgradeRoll,score:currentLuck})}</span>`;if(!fastForward){message+="</p>";const speaker={actor:this};await chatHelper.createMessage(title,message,{speaker})}}async developSkill(skillId,fastForward=!1){const skill=this.items.get(skillId);if(!skill)return;let title="",message="";const upgradeRoll=new Roll("1D100");if(await upgradeRoll.roll({async:!0}),fastForward||await CoC7Dice.showRollDice3d(upgradeRoll),upgradeRoll.total>skill.value||upgradeRoll.total>=95){const augmentRoll=new Roll("1D10");await augmentRoll.roll({async:!0}),fastForward||await CoC7Dice.showRollDice3d(augmentRoll),message=game.i18n.format("CoC7.DevSuccessDetails",{item:skill.name,augment:augmentRoll.total}),title=game.i18n.format("CoC7.DevRollTitle",{item:skill.name,die:upgradeRoll.total,score:skill.value}),await skill.increaseExperience(augmentRoll.total)}else title=game.i18n.format("CoC7.DevRollTitle",{item:skill.name,die:upgradeRoll.total,score:skill.value}),message=game.i18n.format("CoC7.DevFailureDetails",{item:skill.name});const speaker={actor:this._id};await chatHelper.createMessage(title,message,{speaker}),await skill.unflagForDevelopement()}async toggleStatus(statusName){let effectEffect,statusValue=this.data.data.status[statusName]?.value;if("boolean"!=typeof statusValue&&(statusValue="false"===statusValue),COC7.status.criticalWounds!==statusName)switch(statusName){case"dead":if(statusValue){if(await this.unsetStatus("dead"),effectEffect=await this.hasActiveEffect("dead"),effectEffect.length>0)for(const effect of effectEffect)effect.delete()}else this.fallDead();break;case"dying":if(statusValue){if(await this.unsetStatus("dying"),effectEffect=await this.hasActiveEffect("dying"),effectEffect.length>0)for(const effect of effectEffect)effect.delete()}else this.fallDying();break;case"prone":if(statusValue){if(await this.unsetStatus("prone"),effectEffect=await this.hasActiveEffect("prone"),effectEffect.length>0)for(const effect of effectEffect)effect.delete()}else this.fallProne();break;case"unconscious":if(statusValue){if(await this.unsetStatus("unconscious"),effectEffect=await this.hasActiveEffect("unconscious"),effectEffect.length>0)for(const effect of effectEffect)effect.delete()}else this.fallUnconscious()}else statusValue?await this.cureMajorWound():await this.inflictMajorWound()}async hasActiveEffect(effectLabel){return this.effects.map((effect=>effect)).filter((effect=>effect.data.label===effectLabel))}async toggleEffect(effectName){switch(effectName){case"boutOfMadness":this.boutOfMadness?await this.boutOfMadness.delete():await super.createEmbeddedDocuments("ActiveEffect",[{label:game.i18n.localize("CoC7.BoutOfMadnessName"),icon:game.settings.get("CoC7","enableStatusIcons")?"systems/CoC7/assets/icons/hanging-spider.svg":null,origin:this.uuid,duration:{seconds:void 0,rounds:void 0,turns:1},flags:{CoC7:{madness:!0,realTime:!0}},disabled:!1}]);break;case"insanity":this.insanity?this.insanity.delete():await super.createEmbeddedDocuments("ActiveEffect",[{label:game.i18n.localize("CoC7.InsanityName"),icon:game.settings.get("CoC7","enableStatusIcons")?"systems/CoC7/assets/icons/tentacles-skull.svg":null,origin:this.uuid,duration:{seconds:void 0,rounds:void 0,turns:1},flags:{CoC7:{madness:!0,indefinite:!0}},disabled:!1}])}}getStatus(statusName){if(!this.data.data.status)return!1;let statusValue=this.data.data.status[statusName]?.value;return void 0!==statusValue&&("boolean"!=typeof statusValue&&(statusValue="false"===statusValue),statusValue)}async setStatus(statusName){await this.update({[`data.status.${statusName}.value`]:!0})}async unsetStatus(statusName){await this.update({[`data.status.${statusName}.value`]:!1})}async resetCounter(counter){await this.update({[counter]:0})}async setOneFifthSanity(oneFifthSanity){await this.update({"data.attribs.san.oneFifthSanity":oneFifthSanity})}get fightingSkills(){const skillList=[];for(const value of this.items)"skill"===value.type&&value.data.data.properties.fighting&&skillList.push(value);return skillList.sort(((a,b)=>a.name.localeCompare(b.name))),skillList}get closeCombatWeapons(){const weaponList=[];for(const value of this.items)if("weapon"===value.type&&!value.data.data.properties.rngd){const skill=this.items.get(value.data.data.skill.main.id);value.data.data.skill.main.value=skill?skill.value:0,weaponList.push(value)}return weaponList.sort(((a,b)=>a.name.localeCompare(b.name))),weaponList}get firearmSkills(){const skillList=[];for(const value of this.items)"skill"===value.type&&value.data.data.properties.firearm&&skillList.push(value);return skillList.sort(((a,b)=>a.name.localeCompare(b.name))),skillList}get user(){return game.users.find((user=>!(!user.character||user.character.id!==this.id)))}get dodgeSkill(){const skillList=this.getSkillsByName(game.i18n.localize(COC7.dodgeSkillName));return 0!==skillList.length?skillList[0]:null}get creditRatingSkill(){const skillList=this.getSkillsByName(game.i18n.localize(COC7.creditRatingSkillName));return 0!==skillList.length?skillList[0]:null}get cthulhuMythosSkill(){const skillList=this.getSkillsByName(game.i18n.localize(COC7.CthulhuMythosName));return 0!==skillList.length?skillList[0]:null}get cthulhuMythos(){const CM=this.cthulhuMythosSkill;if(CM){const value=CM.value;return value||parseInt(CM.data.data.value)}return 0}get mythosInsanityExperienced(){return this.getFlag("CoC7","mythosInsanityExperienced")||!1}async experienceFirstMythosInsanity(){await this.setFlag("CoC7","mythosInsanityExperienced",!0)}get creditRating(){const CR=this.creditRatingSkill;if(CR){const value=CR.value;return value||parseInt(CR.data.data.value)}return 0}get spendingLevel(){const CR=this.creditRating;return CR>=99?5e3:CR>=90?250:CR>=50?50:CR>=10?10:CR>=1?2:.5}get cash(){const CR=this.creditRating;return CR>=99?5e4:CR>=90?20*CR:CR>=50?5*CR:CR>=10?2*CR:CR>=1?CR:.5}get assets(){const CR=this.creditRating;return CR>=99?5e6:CR>=90?2e3*CR:CR>=50?500*CR:CR>=10?50*CR:CR>=1?10*CR:0}get skills(){const skillList=[];for(const value of this.items)"skill"===value.type&&skillList.push(value);return skillList.sort(((a,b)=>a.name.localeCompare(b.name))),skillList}get owners(){return game.users.filter((u=>this.testUserPermission(u,"OWNER")&&!u.isGM))}get player(){return this.owners.filter((u=>u.character?.id===this.id))}get characterUser(){return game.users.contents.filter((u=>u.character?.id===this.id))[0]||null}async setHealthStatusManually(event){if(event.preventDefault(),event.originalEvent){const healthBefore=parseInt(event.originalEvent.currentTarget.defaultValue),healthAfter=parseInt(event.originalEvent.currentTarget.value);let damageTaken;return healthAfter>healthBefore?await this.setHp(healthAfter):(damageTaken=healthAfter<0?Math.abs(healthAfter):healthBefore-healthAfter,this.render(!0),await this.dealDamage(damageTaken,{ignoreArmor:!0}))}}async dealDamage(amount,options={}){const armorData=this.data.data.attribs.armor.value,grossDamage=parseInt(amount);let armorValue=0;options.ignoreArmor||null===armorData||(CoC7Utilities.isFormula(armorData)?armorValue=(await new Roll(armorData).roll({async:!0})).total:isNaN(Number(armorData))?ui.notifications.warn(`Unable to process armor value: ${armorData}. Ignoring armor.`):armorValue=Number(armorData));const netDamage=grossDamage-armorValue;return netDamage<=0?0:(await this.setHp(this.hp-netDamage),netDamage>=this.hpMax?await this.fallDead():(netDamage>=Math.floor(this.hpMax/2)&&await this.inflictMajorWound(),0===this.hp&&(this.getStatus(COC7.status.unconscious)||await this.fallUnconscious(),this.majorWound&&this.fallDying())),netDamage)}async inflictMajorWound(){if(!this.majorWound){await this.setStatus(COC7.status.criticalWounds);0===(await this.hasActiveEffect("criticalWounds")).length&&await super.createEmbeddedDocuments("ActiveEffect",[{label:"criticalWounds",icon:game.settings.get("CoC7","enableStatusIcons")?"systems/CoC7/assets/icons/arm-sling.svg":null,origin:this.uuid,duration:{seconds:void 0,rounds:void 0,turns:1},disabled:!1}])}if(await this.fallProne(),!this.getStatus(COC7.status.unconscious)&&!this.getStatus(COC7.status.dead)){new CoC7ConCheck(this.isToken?this.tokenKey:this.id).toMessage()}}async cureMajorWound(){await this.unsetStatus(COC7.status.criticalWounds);const criticalWoundsEffect=await this.hasActiveEffect("criticalWounds");if(criticalWoundsEffect.length>0)for(const effect of criticalWoundsEffect)effect.delete()}async fallProne(){await this.setStatus(COC7.status.prone);0===(await this.hasActiveEffect("prone")).length&&await super.createEmbeddedDocuments("ActiveEffect",[{label:"prone",icon:game.settings.get("CoC7","enableStatusIcons")?"systems/CoC7/assets/icons/falling.svg":null,origin:this.uuid,duration:{seconds:void 0,rounds:void 0,turns:1},disabled:!1}])}async fallUnconscious(){await this.setStatus(COC7.status.unconscious);0===(await this.hasActiveEffect("unconscious")).length&&await super.createEmbeddedDocuments("ActiveEffect",[{label:"unconscious",icon:game.settings.get("CoC7","enableStatusIcons")?"systems/CoC7/assets/icons/knocked-out-stars.svg":null,origin:this.uuid,duration:{seconds:void 0,rounds:void 0,turns:1},disabled:!1}])}async fallDying(){await this.setStatus(COC7.status.dying);0===(await this.hasActiveEffect("dying")).length&&await super.createEmbeddedDocuments("ActiveEffect",[{label:"dying",icon:game.settings.get("CoC7","enableStatusIcons")?"systems/CoC7/assets/icons/heart-beats.svg":null,origin:this.uuid,duration:{seconds:void 0,rounds:void 0,turns:1},disabled:!1}])}async fallDead(){await this.unsetStatus(COC7.status.criticalWounds),await this.unsetStatus(COC7.status.dying),await this.unsetStatus(COC7.status.unconscious),await this.setStatus(COC7.status.dead);0===(await this.hasActiveEffect("dead")).length&&await super.createEmbeddedDocuments("ActiveEffect",[{label:"dead",icon:game.settings.get("CoC7","enableStatusIcons")?"systems/CoC7/assets/icons/tombstone.svg":null,origin:this.uuid,duration:{seconds:void 0,rounds:void 0,turns:1},disabled:!1}]);const dyingEffect=await this.hasActiveEffect("dying");if(!this.dying&&dyingEffect.length>0)for(const effect of dyingEffect)effect.delete()}get majorWound(){return this.getStatus(COC7.status.criticalWounds)}get dying(){return this.getStatus(COC7.status.dying)}get unconscious(){return this.getStatus(COC7.status.unconscious)}get dead(){return this.getStatus(COC7.status.dead)}get prone(){return this.getStatus(COC7.status.prone)}}class CoC7Link{constructor(){this._linkData={type:CoC7Link.LINK_TYPE.CHECK,check:CoC7Link.CHECK_TYPE.SKILL}}static async fromData(linkData){const label=CoC7LinkCreationDialog.attributes.concat(CoCActor.getCharacteristicDefinition()).filter((e=>e.key===linkData.name)).map((e=>e.label));label.length>0&&(linkData.label=label[0]);const link=new CoC7Link;return await link.setData(linkData),link}static get TYPE_KEYWORD(){return["check","sanloss","item"]}static get CHARAC_KEYWORD(){return["charac","char","characteristic","characteristics"]}static get ATTRIB_KEYWORD(){return["attributes","attribute","attrib","attribs"]}static get SKILL_KEYWORD(){return["skill"]}static get LINK_TYPE(){return{CHECK:1,SANLOSS:2,ITEM:3}}static get CHECK_TYPE(){return{CHARACTERISTIC:1,ATTRIBUTE:2,SKILL:3}}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get data(){const data=duplicate(this._linkData);return data.isCheck=this.is.check,data.isSanloss=this.is.sanloss,data.isItem=this.is.item,data}async fetchItem(){if(this._linkData.validItem=!1,!this._linkData.fromCompendium&&!this._linkData.fromDirectory)return this._item=void 0,!1;if(this._linkData.fromCompendium){const pack=game.packs.get(this._linkData.pack);if(!pack)return!1;if("Item"!==pack.metadata.entity)return;this._item=await pack.getDocument(this._linkData.id)}if(this._linkData.fromDirectory&&(this._item=game.items.get(this._linkData.id)),this._linkData.skillName=null,this._linkData.itemName=null,this._item){if("weapon"===this._item.data.type)return this.type=CoC7Link.LINK_TYPE.ITEM,this._linkData.itemName=this._item.data.name,this._linkData.validItem=!0,!0;if("skill"===this._item.data.type)return this.type=CoC7Link.LINK_TYPE.CHECK,this.check=CoC7Link.CHECK_TYPE.SKILL,this._linkData.skillName=this._item.data.name,this._linkData.validItem=!0,!0}return!1}async setData(x){this._linkData.fromCompendium=!1,this._linkData.fromDirectory=!1,this.hasPlayerOwner=!1,x.hasPlayerOwner&&(this.hasPlayerOwner=!0,this.actorKey=x.actorKey),x.pack&&x.id&&(this._linkData.fromCompendium=!0,this._linkData.pack=x.pack,this._linkData.id=x.id),x.id&&!x.pack&&(this._linkData.fromDirectory=!0,this._linkData.id=x.id);if(!await this.fetchItem()&&(x.check?this.type=x.check:this.type=CoC7Link.LINK_TYPE.CHECK,x.type?this.check=x.type:this.type&&(this.check=CoC7Link.CHECK_TYPE.CHARACTERISTIC),x.name))if(this._linkData.itemName=null,this._linkData.skillName=null,this._linkData.characteristicKey=null,this._linkData.attributeKey=null,this.is.check)switch(this.check){case CoC7Link.CHECK_TYPE.SKILL:this._linkData.skillName=x.name;break;case CoC7Link.CHECK_TYPE.CHARACTERISTIC:this._linkData.characteristicKey=x.name;break;case CoC7Link.CHECK_TYPE.ATTRIBUTE:this._linkData.attributeKey=x.name}else this.is.item&&(this._linkData.itemName=x.name);!x.difficulty&&isNaN(Number(x.difficulty))||(this._linkData.difficulty=Number(x.difficulty)),!x.modifier&&isNaN(Number(x.modifier))||(this._linkData.modifier=Number(x.modifier)),void 0===x.difficulty&&void 0===x.modifier||(this._linkData.forceModifiers=!0),x.forceModifiers&&(this._linkData.forceModifiers=!0),"true"!==x.displayName&&!0!==x.displayName||(this._linkData.displayName=!0),x.label&&(this._linkData.hasLabel=!0,this._linkData.label=x.label),x.icon&&(this._linkData.hasIcon=!0,this._linkData.icon=x.icon),"true"!==x.blind&&!0!==x.blind||(this._linkData.blind=!0),this._linkData.sanMin=x.sanMin,this._linkData.sanMax=x.sanMax}get type(){return this._linkData.type}get checkType(){switch(this.check){case CoC7Link.CHECK_TYPE.CHARACTERISTIC:return"characteristic";case CoC7Link.CHECK_TYPE.ATTRIBUTE:return"attribute";case CoC7Link.CHECK_TYPE.SKILL:return"skill";default:return}}set type(x){if(isNaN(Number(x)))switch(x.toLowerCase()){case"check":this._linkData.type=CoC7Link.LINK_TYPE.CHECK;break;case"sanloss":this._linkData.type=CoC7Link.LINK_TYPE.SANLOSS;break;case"item":this._linkData.type=CoC7Link.LINK_TYPE.ITEM;break;default:this._linkData.type=void 0}else this._linkData.type=x}get check(){return isNaN(Number(this._linkData.check))?void 0:Number(this._linkData.check)}set check(x){isNaN(Number(x))?(this._linkData.check=void 0,CoC7Link.CHARAC_KEYWORD.includes(x)&&(this.type=CoC7Link.LINK_TYPE.CHECK,this._linkData.check=CoC7Link.CHECK_TYPE.CHARACTERISTIC),CoC7Link.ATTRIB_KEYWORD.includes(x)&&(this.type=CoC7Link.LINK_TYPE.CHECK,this._linkData.check=CoC7Link.CHECK_TYPE.ATTRIBUTE),CoC7Link.SKILL_KEYWORD.includes(x)&&(this.type=CoC7Link.LINK_TYPE.CHECK,this._linkData.check=CoC7Link.CHECK_TYPE.SKILL)):this._linkData.check=Number(x)}get name(){if(this.is.check)switch(this.check){case CoC7Link.CHECK_TYPE.CHARACTERISTIC:return this._linkData.characteristicKey;case CoC7Link.CHECK_TYPE.ATTRIBUTE:return this._linkData.attributeKey;case CoC7Link.CHECK_TYPE.SKILL:return this._linkData.skillName;default:return}else if(this.is.item)return this._linkData.itemName}set name(x){if(this.is.check)switch(this.check){case CoC7Link.CHECK_TYPE.CHARACTERISTIC:this._linkData.characteristicKey=x;break;case CoC7Link.CHECK_TYPE.ATTRIBUTE:this._linkData.attributeKey=x;break;case CoC7Link.CHECK_TYPE.SKILL:this._linkData.skillName=x}else this.is.item&&(this._linkData.itemName=x)}get is(){const link=this;return{get check(){return link.type===CoC7Link.LINK_TYPE.CHECK},set check(x){!0===x&&(link.type=CoC7Link.LINK_TYPE.CHECK)},get sanloss(){return link.type===CoC7Link.LINK_TYPE.SANLOSS},set sanloss(x){!0===x&&(link.type=CoC7Link.LINK_TYPE.SANLOSS)},get item(){return link.type===CoC7Link.LINK_TYPE.ITEM},set item(x){!0===x&&(link.type=CoC7Link.LINK_TYPE.ITEM)}}}async update(updateData){this._linkData=mergeObject(this._linkData,updateData),(this._linkData.fromDirectory||this._linkData.fromCompendium)&&await this.fetchItem()}async updateFromLink(linkData){await this.setData(linkData),(this._linkData.fromDirectory||this._linkData.fromCompendium)&&await this.fetchItem()}get link(){if(!this.type)return null;switch(this.type){case CoC7Link.LINK_TYPE.CHECK:{if(!this.type||!this.name)return null;let options=`${this._linkData.blind?"blind,":""}type:${this.checkType},name:${this.name}`;void 0!==this._linkData.difficulty&&(options+=`,difficulty:${this._linkData.difficulty}`),void 0!==this._linkData.modifier&&(options+=`,modifier:${this._linkData.modifier}`),this._linkData.icon&&(options+=`,icon:${this._linkData.icon}`),this._linkData.fromCompendium&&(options+=`,pack:${this._linkData.pack}`),(this._linkData.fromCompendium||this._linkData.fromDirectory)&&(options+=`,id:${this._linkData.id}`);let link=`@coc7.check[${options}]`;return this._linkData.hasLabel&&this._linkData.label?link+=`{${this._linkData.label}}`:this.name&&(link+=`{${this.name}}`),link}case CoC7Link.LINK_TYPE.SANLOSS:{if(!this._linkData.sanMax||!this._linkData.sanMin)return null;let options=`sanMax:${this._linkData.sanMax},sanMin:${this._linkData.sanMin}`;this._linkData.difficulty&&(options+=`,difficulty:${this._linkData.difficulty}`),this._linkData.modifier&&(options+=`,modifier:${this._linkData.modifier}`),this._linkData.icon&&(options+=`,icon:${this._linkData.icon}`);let link=`@coc7.sanloss[${options}]`;return this._linkData.hasLabel&&(link+=`{${this._linkData.label}}`),link}case CoC7Link.LINK_TYPE.ITEM:{if(!this.type||!this.name)return null;let options=`name:${this.name}`;this._linkData.icon&&(options+=`,icon:${this._linkData.icon}`),this._linkData.fromCompendium&&(options+=`,pack:${this._linkData.pack}`),(this._linkData.fromCompendium||this._linkData.fromDirectory)&&(options+=`,id:${this._linkData.id}`);let link=`@coc7.item[${options}]`;return this._linkData.hasLabel&&(link+=`{${this._linkData.label}}`),link}default:return null}}}class CoC7LinkCreationDialog extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{id:"link-creation",classes:["coc7"],title:game.i18n.localize("CoC7.CreateLink"),dragDrop:[{dragSelector:null,dropSelector:".container"}],template:"systems/CoC7/templates/apps/link-creation.html",closeOnSubmit:!1,submitOnClose:!0,submitOnChange:!0,width:400,height:"auto",choices:{},allowCustom:!0,minimum:0,maximum:null})}static async fromLinkData(linkData,options={}){const link=await CoC7Link.fromData(linkData);return new CoC7LinkCreationDialog(link,options)}static get attributes(){return[{key:"lck",label:game.i18n.localize("CoC7.Luck"),selected:!1},{key:"san",label:game.i18n.localize("CoC7.Sanity"),selected:!1}]}async getData(){const data=await super.getData();data.link=this.link,data.data=this.link.data,data.fromGame=this.link.is.item||this.link.is.check&&this.link.check===CoC7Link.CHECK_TYPE.SKILL,data.askId=data.fromGame&&(this.link.data.fromDirectory||this.link.data.fromCompendium),data.askPack=data.fromGame&&this.link.data.fromCompendium,data.isSetFromGame=data.askId||data.askPack,data.difficultyLevel=CoC7Check.difficultyLevel,data.selectedDifficulty={unknown:CoC7Check.difficultyLevel.unknown===this.link.data.difficulty,regular:CoC7Check.difficultyLevel.regular===this.link.data.difficulty,hard:CoC7Check.difficultyLevel.hard===this.link.data.difficulty,extreme:CoC7Check.difficultyLevel.extreme===this.link.data.difficulty,critical:CoC7Check.difficultyLevel.critical===this.link.data.difficulty},this.link.data.difficulty||("unknown"===game.settings.get("CoC7","defaultCheckDifficulty")?data.selectedDifficulty.unknown=!0:data.selectedDifficulty.regular=!0),data.linkType=[{key:CoC7Link.LINK_TYPE.CHECK,label:game.i18n.localize("CoC7.Check"),selected:this.link.is.check},{key:CoC7Link.LINK_TYPE.SANLOSS,label:game.i18n.localize("CoC7.SanityCheck"),selected:this.link.is.sanloss},{key:CoC7Link.LINK_TYPE.ITEM,label:game.i18n.localize("CoC7.ItemWeapon"),selected:this.link.is.item}],data.checkType=CoC7Link.CHECK_TYPE,data.selectedCheckType={characteristic:CoC7Link.CHECK_TYPE.CHARACTERISTIC===this.link.check,attribute:CoC7Link.CHECK_TYPE.ATTRIBUTE===this.link.check,skill:CoC7Link.CHECK_TYPE.SKILL===this.link.check},this.link.check||(data.selectedCheckType.characteristic=!0),data.characteristics=CoCActor.getCharacteristicDefinition();for(let i=0;i<data.characteristics.length;i++)data.data.characteristicKey===data.characteristics[i].key||data.data.characteristicKey===data.characteristics[i].shortName||data.data.characteristicKey===data.characteristics[i].label?data.characteristics[i].selected=!0:data.characteristics[i].selected=!1;return data.attributes=CoC7LinkCreationDialog.attributes.map((e=>(e.selected=data.data.attributeKey===e.key,e))),data}get link(){return this.object}activateListeners(html){html.find(".submit-button").click(this._onClickSubmit.bind(this)),super.activateListeners(html)}async _onDrop(event){const dataString=event.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);if("link"===data.CoC7Type)await this.link.updateFromLink(data),this.render(!0);else{if(data.actorId){const actorKey=data.sceneId&&data.tokenId?`${data.sceneId}.${data.tokenId}`:data.actorId,actor=chatHelper.getActorFromKey(actorKey);actor.hasPlayerOwner?(this.link.hasPlayerOwner=!0,this.link.actorKey=actor.actorKey):this.link.hasPlayerOwner=!1}if("Item"===data.type)if(data.data)switch(data.data.type){case"skill":this.link._linkData.fromDirectory=!1,this.link._linkData.fromCompendium=!1,this.link.type=CoC7Link.LINK_TYPE.CHECK,this.link.check=CoC7Link.CHECK_TYPE.SKILL,this.link.name=data.data.name,this.render(!0);break;case"weapon":this.link._linkData.fromDirectory=!1,this.link._linkData.fromCompendium=!1,this.link.type=CoC7Link.LINK_TYPE.ITEM,this.link.name=data.data.name,this.render(!0)}else data.id&&(this.link._linkData.id=data.id,this.link._linkData.fromDirectory=!0),data.pack&&(this.link._linkData.pack=data.pack,this.link._linkData.fromDirectory=!1,this.link._linkData.fromCompendium=!0),await this.link.fetchItem(),this.render(!0)}}_onClickSubmit(event){const action=event.currentTarget.dataset.action;if(this.link.link){switch(action){case"clipboard":CoC7Utilities.copyToClipboard(this.link.link);break;case"chat":{const option={};option.speaker={alias:game.user.name},chatHelper.createMessage(null,game.i18n.format("CoC7.MessageCheckRequestedWait",{check:this.link.link}),option)}break;case"whisper-owner":{const option={};option.speaker={alias:game.user.name},option.whisper=this.link.actor.owners,chatHelper.createMessage(null,game.i18n.format("CoC7.MessageTargetCheckRequested",{name:this.link.actor.name,check:this.link.link}),option)}break;case"whisper-selected":{if(!canvas.tokens.controlled.length)return void ui.notifications.warn("No tokens selected");const option={};option.speaker={alias:game.user.name};for(const t of canvas.tokens.controlled)t.actor.hasPlayerOwner&&(option.whisper=t.actor.owners,chatHelper.createMessage(null,game.i18n.format("CoC7.MessageTargetCheckRequested",{name:t.actor.name,check:this.link.link}),option))}}this.close()}}async _updateObject(event,formData){const target=event.currentTarget,group=target?.closest(".form-group"),groupName=group?.dataset.group;if("origin"===groupName)"fromCompendium"===target.name&&(this.link._linkData.fromCompendium=!this.link._linkData.fromCompendium,this.link._linkData.fromCompendium&&(this.link._linkData.fromDirectory=!1)),"fromDirectory"===target.name&&(this.link._linkData.fromDirectory=!this.link._linkData.fromDirectory,this.link._linkData.fromDirectory&&(this.link._linkData.fromCompendium=!1)),await this.link.fetchItem();else{const formDataEx=expandObject(formData);formDataEx.check&&(formDataEx.check=Number(formDataEx.check)),formDataEx.difficulty&&(formDataEx.difficulty=Number(formDataEx.difficulty)),formDataEx.type&&(formDataEx.type=Number(formDataEx.type));const diffData=diffObject(this.link.data,formDataEx);await this.link.update(diffData)}this.render(!0)}static async create(){const link=new CoC7Link;new CoC7LinkCreationDialog(link,{}).render(!0)}}class CoC7Parser{static async onEditorDrop(event,editor){event.preventDefault();const dataString=event.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);if("coc7-link"===data.linkType){if(event.stopPropagation(),!event.shiftKey&&(void 0===data.difficulty||void 0===data.modifier)){const usage=await RollDialog.create({disableFlatDiceModifier:!0});usage&&(data.modifier=usage.get("bonusDice"),data.difficulty=usage.get("difficulty"))}"blindroll"===game.settings.get("core","rollMode")&&(data.blind=!0);const link=CoC7Parser.createCoC7Link(data);link&&editor.insertContent(link)}else if(isCtrlKey(event)){if(event.stopPropagation(),"Item"!==data.type)return;let item;const linkData={};if(data.pack){const pack=game.packs.get(data.pack);if("Item"!==pack.metadata.entity)return;item=await pack.getDocument(data.id)}else item=data.data?data.data:game.items.get(data.id);if(!item)return;if(linkData.name=item.name,data.pack&&(linkData.pack=data.pack),data.id&&(linkData.id=data.id),"skill"===item.type){if(!event.shiftKey){const usage=await RollDialog.create({disableFlatDiceModifier:!0});usage&&(linkData.modifier=usage.get("bonusDice"),linkData.difficulty=usage.get("difficulty"))}linkData.check="check",linkData.type="skill","blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0)}else{if("weapon"!==item.type)return;linkData.check="item",linkData.type="weapon"}const link=CoC7Parser.createCoC7Link(linkData);link&&editor.insertContent(link)}}static ParseMessage(message,html,data){if(message.isContentVisible){if(data.message.content.toLocaleLowerCase().includes("@coc7")){const parsedContent=CoC7Parser.enrichHTML(data.message.content);html.find(".message-content").html(parsedContent),data.message.content=parsedContent}return!0}}static createCoC7Link(data){if(data.check)switch(data.check.toLowerCase()){case"check":{if(!data.type||!data.name)return;let options=`${data.blind?"blind,":""}type:${data.type},name:${data.name}`;void 0!==data.difficulty&&(options+=`,difficulty:${data.difficulty}`),void 0!==data.modifier&&(options+=`,modifier:${data.modifier}`),data.icon&&(options+=`,icon:${data.icon}`),data.pack&&(options+=`,pack:${data.pack}`),data.id&&(options+=`,id:${data.id}`);let link=`@coc7.check[${options}]`;return data.displayName&&(link+=`{${data.displayName}}`),link}case"sanloss":{if(!data.sanMax||!data.sanMin)return;let options=`${data.blind?"blind,":""}sanMax:${data.sanMax},sanMin:${data.sanMin}`;data.difficulty&&(options+=`,difficulty:${data.difficulty}`),data.modifier&&(options+=`,modifier:${data.modifier}`),data.icon&&(options+=`,icon:${data.icon}`);let link=`@coc7.sanloss[${options}]`;return data.displayName&&(link+=`{${data.displayName}}`),link}case"item":{if(!data.type||!data.name)return;let options=`${data.blind?"blind,":""}type:${data.type},name:${data.name}`;data.icon&&(options+=`,icon:${data.icon}`),data.pack&&(options+=`,pack:${data.pack}`),data.id&&(options+=`,id:${data.id}`);let link=`@coc7.item[${options}]`;return data.displayName&&(link+=`{${data.displayName}}`),link}}}static ParseSheetContent(app,html){for(const element of html.find("div.editor-content > *, p"))element.outerHTML.toLocaleLowerCase().includes("@coc7")&&(element.outerHTML=CoC7Parser.enrichHTML(element.outerHTML));html.find("a.coc7-link").on("click",(async event=>await CoC7Parser._onCheck(event))),html.find("a.coc7-link").on("dragstart",(event=>CoC7Parser._onDragCoC7Link(event)))}static _getTextNodes(parent){const text=[],walk=document.createTreeWalker(parent,NodeFilter.SHOW_TEXT,null,!1);for(;walk.nextNode();)text.push(walk.currentNode);return text}static enrichHTML(content){const html=document.createElement("div");html.innerHTML=String(content);let text=[];text=TextEditor._getTextNodes(html);const rgx=new RegExp("@(coc7).(.*?)\\[([^\\]]+)\\](?:{([^}]+)})?","gi");return TextEditor._replaceTextContent(text,rgx,CoC7Parser._createLink),html.innerHTML}static bindEventsHandler(html){html.find("a.coc7-link").on("click",(async event=>await CoC7Parser._onCheck(event))),html.find("a.coc7-link").on("dragstart",(event=>CoC7Parser._onDragCoC7Link(event)))}static _onDragCoC7Link(event){const a=event.currentTarget,i=a.querySelector("i.link-icon"),data=duplicate(a.dataset);data.linkType="coc7-link",data.CoC7Type="link",data.icon=null,i.dataset&&i.dataset.linkIcon&&"fas fa-dice"!==i.dataset.linkIcon&&(data.icon=i.dataset.linkIcon),data.displayName=a.dataset.displayName?a.innerText:null,event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}static _createLink(match,tag,type,options,name){const data={cls:["coc7-link"],dataset:{check:type},icon:"fas fa-dice",blind:!1,name},matches=options.matchAll(/[^,]+/gi);for(const match of Array.from(matches)){let[key,value]=match[0].split(":");"icon"===key&&(data.icon=value),"blind"===key&&void 0===value&&(value=!0,data.blind=["check"].includes(type.toLowerCase())),data.dataset[key]=value}let title;const difficulty=CoC7Check.difficultyString(data.dataset.difficulty);switch(type.toLowerCase()){case"check":{let humanName=data.dataset.name;["attributes","attribute","attrib","attribs"].includes(data.dataset.type?.toLowerCase())&&("lck"===data.dataset.name&&(humanName=game.i18n.localize("CoC7.Luck")),"san"===data.dataset.name&&(humanName=game.i18n.localize("CoC7.Sanity"))),["charac","char","characteristic","characteristics"].includes(data.dataset.type?.toLowerCase())&&(humanName=CoC7Utilities.getCharacteristicNames(data.dataset.name)?.label),title=game.i18n.format(`CoC7.LinkCheck${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,name:humanName});break}case"sanloss":title=game.i18n.format(`CoC7.LinkSanLoss${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,sanMin:data.dataset.sanMin,sanMax:data.dataset.sanMax});break;case"item":title=game.i18n.format(`CoC7.LinkItem${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,name:data.dataset.name})}name?data.dataset.displayName=!0:data.name=title;const a=document.createElement("a");a.title=game.user.isGM?data.name:title,a.classList.add(...data.cls);for(const[k,v]of Object.entries(data.dataset))a.dataset[k]=v;return a.draggable=!0,a.innerHTML=`${data.blind?'<i class="fas fa-eye-slash"></i>':""}<i data-link-icon="${data.icon}" class="link-icon ${data.icon}"></i>${data.name}`,a}static async _onCheck(event){const options=event.currentTarget.dataset;if(options.difficulty&&(options.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),game.user.isGM){if(isCtrlKey(event)){options.displayName&&(options.label=event.currentTarget.innerText);const link=await CoC7Link.fromData(options);return void new CoC7LinkCreationDialog(link).render(!0)}if(canvas.tokens.controlled.length)for(const token of canvas.tokens.controlled)switch(options.check){case"check":if(["charac","char","characteristic","characteristics"].includes(options.type.toLowerCase()))return token.actor.characteristicCheck(options.name,event.shiftKey,options);if(["skill"].includes(options.type.toLowerCase()))return token.actor.skillCheck(options,event.shiftKey,options);if(["attributes","attribute","attrib","attribs"].includes(options.type.toLowerCase()))return token.actor.attributeCheck(options.name,event.shiftKey,options);break;case"sanloss":SanCheckCard.create(token.actor.id,options,{fastForward:event.shiftKey});break;case"item":return token.actor.weaponCheck(options,event.shiftKey)}else if(game.user.data.document.character?.data)await Promise.all(game.user.data.document.character.data.items.map((async v=>{if(v.name===options.name){const check=new CoC7Check;check._rawValue=v.data.data.base,await check.roll(),check.toMessage()}return!1})));else if(game.user.isGM){const option={speaker:{alias:game.user.name}};chatHelper.createMessage(null,game.i18n.format("CoC7.MessageCheckRequestedWait",{check:(await CoC7Link.fromData(options)).link}),option)}}else{const speaker=ChatMessage.getSpeaker(),actor=ChatMessage.getSpeakerActor(speaker);if(actor)switch(options.check){case"check":if(["charac","char","characteristic","characteristics"].includes(options.type.toLowerCase()))return actor.characteristicCheck(options.name,event.shiftKey,options);if(["skill"].includes(options.type.toLowerCase()))return actor.skillCheck(options,event.shiftKey,options);if(["attributes","attribute","attrib","attribs"].includes(options.type.toLowerCase()))return actor.attributeCheck(options.name,event.shiftKey,options);break;case"sanloss":SanCheckCard.create(actor.id,options,{fastForward:event.shiftKey});break;case"item":return actor.weaponCheck(options,event.shiftKey)}else game.user.data.document.character?.data?await Promise.all(game.user.data.document.character.data.items.map((async v=>{if(v.name===options.name){const check=new CoC7Check;check._rawValue=v.data.data.base,await check.roll(),check.toMessage()}return!1}))):ui.notifications.warn(game.i18n.localize("CoC7.WarnNoControlledActor"))}}}class CoC7Item extends Item{constructor(data,context){if(data.type in CONFIG.Item.documentClasses&&!context?.extended)return new CONFIG.Item.documentClasses[data.type](data,{extended:!0,...context});void 0===data.img&&("chase"===data.type?data.img="systems/CoC7/assets/icons/running-solid.svg":"skill"===data.type?data.img="systems/CoC7/assets/icons/skills.svg":"status"===data.type?data.img="icons/svg/aura.svg":"weapon"===data.type&&(data.img="icons/svg/sword.svg")),super(data,context)}static get iconLanguage(){return"systems/CoC7/assets/icons/skills/language.svg"}static get flags(){return{malfunction:"malfc"}}async toggleProperty(propertyId,override=!1){let fighting,firearms,checkedProps={};if("weapon"===this.type&&!override&&("ahdb"===propertyId&&(checkedProps=this.data.data.properties.ahdb?{"data.properties.ahdb":!1}:{"data.properties.ahdb":!0,"data.properties.addb":!1}),"addb"===propertyId&&(checkedProps=this.data.data.properties.addb?{"data.properties.addb":!1}:{"data.properties.addb":!0,"data.properties.ahdb":!1}),"shotgun"===propertyId&&(checkedProps=this.data.data.properties.shotgun?{"data.properties.shotgun":!1,"data.range.extreme.value":null,"data.range.extreme.damage":null,"data.range.long.value":null,"data.range.long.damage":null}:{"data.properties.rngd":!0,"data.properties.melee":!1,"data.properties.shotgun":!0}),"melee"===propertyId||"rngd"===propertyId)){let meleeWeapon;"melee"!==propertyId||this.data.data.properties.melee||(meleeWeapon=!0),"melee"===propertyId&&this.data.data.properties.melee&&(meleeWeapon=!1),"rngd"!==propertyId||this.data.data.properties.rngd||(meleeWeapon=!1),"rngd"===propertyId&&this.data.data.properties.rngd&&(meleeWeapon=!0),checkedProps=meleeWeapon?{"data.properties.melee":!0,"data.properties.rngd":!1,"data.properties.shotgun":!1,"data.properties.brst":!1,"data.properties.auto":!1,"data.properties.dbrl":!1}:{"data.properties.melee":!1,"data.properties.rngd":!0}}if("skill"===this.type&&!override){let modif=!1;"combat"===propertyId&&(this.data.data.properties.combat?checkedProps={"data.properties.combat":!1,"data.properties.special":!1,"data.properties.fighting":!1,"data.properties.firearm":!1,"data.specialization":null}:this.data.data.properties.firearm?firearms=!0:fighting=!0,modif=!0),"fighting"===propertyId&&(this.data.data.properties.fighting?(firearms=!0,fighting=!1):(firearms=!1,fighting=!0),modif=!0),"firearm"===propertyId&&(this.data.data.properties.firearm?(firearms=!1,fighting=!0):(firearms=!0,fighting=!1),modif=!0),modif&&(fighting&&(checkedProps={"data.properties.fighting":!0,"data.properties.firearm":!1,"data.properties.combat":!0,"data.properties.special":!0,"data.specialization":game.i18n.localize(COC7.fightingSpecializationName)}),firearms&&(checkedProps={"data.properties.fighting":!1,"data.properties.firearm":!0,"data.properties.combat":!0,"data.properties.special":!0,"data.specialization":game.i18n.localize(COC7.firearmSpecializationName)}))}if(Object.keys(checkedProps).length>0){return await this.update(checkedProps)}{const propName=`data.properties.${propertyId}`,propValue=!this.data.data.properties[propertyId];await this.update({[propName]:propValue}).then((item=>item))}}hasProperty(propertyId){return this.isIncludedInSet("properties",propertyId)}get name(){if("skill"!==this.type||!this.data.data?.properties?.special)return super.name;if(this.data.name.toLowerCase().includes(this.data.data.specialization?.toLowerCase())){if(this.isOwned&&super.name===this.data.name){const match=new RegExp("^"+CoC7Utilities.quoteRegExp(this.data.data.specialization)+" \\((.+)\\)$").exec(this.data.name);if(null!==match&&void 0!==match[1])return match[1]}return super.name}return this.isOwned?super.name:`${this.data.data.specialization} (${this.data.name})`}get fullName(){return this.data.data.properties.special?`${this.data.data.specialization} (${this.data.name})`:this.name}get sName(){return"skill"===this.type&&this.data.data?.properties?.special?this.data.name.toLowerCase().includes(this.data.data.specialization?.toLowerCase())?super.name:`${this.data.name}`:super.name}async updateRoll(roll){return"updateRoll"in this.sheet?await this.sheet.updateRoll(roll):"updateRoll"in this?await this.updateRoll(roll):void 0}static getNameWithoutSpec(item){if(item instanceof CoC7Item){if(item.data.data?.properties?.special){const specNameRegex=new RegExp(CoC7Utilities.quoteRegExp(item.data.data.specialization),"ig"),filteredName=item.name.replace(specNameRegex,"").trim().replace(/^\(+|\)+$/gm,"");return filteredName.length?filteredName:item.name}}else if(item.data.properties?.special){const specNameRegex=new RegExp("^"+CoC7Utilities.quoteRegExp(item.data.specialization)+"\\s*\\((.+)\\)$","i");return item.name.replace(specNameRegex,"$1")}return item.name}static isAnySpec(item){return item instanceof CoC7Item?!("skill"!==item.type||!item.data.data.properties?.special)&&[game.i18n.localize("CoC7.AnySpecName").toLowerCase(),"any"].includes(CoC7Item.getNameWithoutSpec(item).toLowerCase()):!("skill"!==item.type||!item.data.properties?.special)&&[game.i18n.localize("CoC7.AnySpecName").toLowerCase(),"any"].includes(CoC7Item.getNameWithoutSpec(item).toLowerCase())}async checkSkillProperties(){if("skill"!==this.type)return;const checkedProps={};return this.data.data.properties.combat?(this.data.data.properties.special||(this.data.data.properties.special=!0,checkedProps["data.properties.special"]=!0),this.data.data.properties.fighting||this.data.data.properties.firearm||(this.data.data.properties.fighting=!0,checkedProps["data.properties.fighting"]=!0),!this.data.data.properties.fighting||this.data.data.specialization&&""!==this.data.data.specialization||(this.data.data.specialization=game.i18n.localize(COC7.fightingSpecializationName),checkedProps["data.specialization"]=game.i18n.localize(COC7.fightingSpecializationName)),!this.data.data.properties.firearm||this.data.data.specialization&&""!==this.data.data.specialization||(this.data.data.specialization=game.i18n.localize(COC7.firearmSpecializationName),checkedProps["data.specialization"]=game.i18n.localize(COC7.firearmSpecializationName))):(this.data.data.properties.fighting&&(this.data.data.properties.fighting=!1,checkedProps["data.properties.fighting"]=!1),this.data.data.properties.firearm&&(this.data.data.properties.firearm=!1,checkedProps["data.properties.firearm"]=!1)),Object.keys(checkedProps).length>0&&await this.update(checkedProps),checkedProps}isIncludedInSet(set,propertyId){this.data.data[set]||(this.data.data[set]=[]);return this.data.data[set].indexOf(propertyId)>-1}async flagForDevelopement(){(game.settings.get("CoC7","xpEnabled")||game.user.isGM)&&(this.data.data.flags||await this.update({"data.flags":{}}),await this.update({"data.flags.developement":!0}))}async unflagForDevelopement(){(game.settings.get("CoC7","xpEnabled")||game.user.isGM)&&(this.data.data.flags||await this.update({"data.flags":{}}),await this.update({"data.flags.developement":!1}))}get developementFlag(){return this.getItemFlag("developement")}async toggleItemFlag(flagName,eraseAdjustment=!0){const flagValue=!this.getItemFlag(flagName),name=`data.flags.${flagName}`;"occupation"!==flagName&&"archetype"!==flagName||flagValue||!eraseAdjustment?"developement"===flagName?game.settings.get("CoC7","xpEnabled")||game.user.isGM?await this.update({[name]:flagValue}):ui.notifications.info("XP Gain disabled."):await this.update({[name]:flagValue}):await this.update({[`data.adjustments.${flagName}`]:null,[name]:flagValue})}async setItemFlag(flagName){await this.update({[`data.flags.${flagName}`]:!0})}async unsetItemFlag(flagName,eraseAdjustment=!0){const name=`data.flags.${flagName}`;"occupation"!==flagName&&"archetype"!==flagName||!eraseAdjustment?await this.update({[name]:!1}):await this.update({[`data.adjustments.${flagName}`]:null,[name]:!1})}getItemFlag(flagName){return this.data.data.flags?!!this.data.data.flags[flagName]&&this.data.data.flags[flagName]:(this.data.data.flags={},this.data.data.flags.locked=!0,this.update({"data.flags":{}}),!1)}get usesAlternativeSkill(){return"weapon"===this.type&&(!0===this.data.data.properties?.auto||!0===this.data.data.properties?.brst||!0===this.data.data.properties?.thrown)}get maxUsesPerRound(){if("weapon"!==this.type)return null;const multiShot=parseInt(this.data.data.usesPerRound.max);return isNaN(multiShot)?0:multiShot}get usesPerRound(){if("weapon"!==this.type)return null;const singleShot=parseInt(this.data.data.usesPerRound.normal);return isNaN(singleShot)?0:singleShot}get usesPerRoundString(){let usesPerRound;return usesPerRound=this.data.data.usesPerRound.normal?this.data.data.usesPerRound.normal:"1",this.data.data.usesPerRound.max&&(usesPerRound+=`(${this.data.data.usesPerRound.max})`),this.data.data.properties.auto&&(usesPerRound+=` ${game.i18n.localize("CoC7.WeaponAuto")}`),this.data.data.properties.brst&&(usesPerRound+=` ${game.i18n.localize("CoC7.WeaponBrst")}`,this.data.data.usesPerRound.burst&&(usesPerRound+=`(${this.data.data.usesPerRound.burst})`)),usesPerRound}get multipleShots(){return"weapon"!==this.type?null:!(this.maxUsesPerRound<=1)}get singleShot(){return"weapon"!==this.type?null:!!this.usesPerRound}get baseRange(){return parseInt(this.data.data.range.normal.value)}get longRange(){return parseInt(this.data.data.range.long.value)}get extremeRange(){return parseInt(this.data.data.range.extreme.value)}get skillProperties(){if("skill"!==this.type)return[];const skillProperties=[];for(const[key,value]of Object.entries(COC7.skillProperties))!0===this.data.data.properties[key]&&skillProperties.push(game.i18n.localize(value));return skillProperties}static async calculateBase(actor,data){if("skill"!==data.type)return null;if(String(data.data.base).includes("@")){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.actor.")&&(parsed[key.substring(1)]=getProperty(actor,value.substring(11)));let value;try{value=Math.floor(new Roll(data.data.base,parsed).evaluate({maximize:!0}).total)}catch(err){value=0}return value}return isNaN(parseInt(data.data.base))?null:parseInt(data.data.base)}get _base(){if("skill"!==this.type)return[null,!1];if("string"!=typeof this.data.data.base)return[this.data.data.base,!1];if(this.data.data.base.includes("@")){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=getProperty(this,value.substring(5)));let value;try{value=Math.floor(new Roll(this.data.data.base,parsed).evaluate({maximize:!0}).total)}catch(err){value=0}return[value,!0]}return[isNaN(parseInt(this.data.data.base))?null:parseInt(this.data.data.base),!1]}async asyncBase(){const e=this._base;return e[1]&&await this.update({"data.base":e[0]}),e[0]}get base(){const e=this._base;return e[1]&&this.update({"data.base":e[0]}),e[0]}get value(){if("skill"!==this.type)return null;let value=0;return"character"===this.actor.data.type?(value=this.base,value+=this.data.data.adjustments?.personal?parseInt(this.data.data.adjustments?.personal):0,value+=this.data.data.adjustments?.occupation?parseInt(this.data.data.adjustments?.occupation):0,value+=this.data.data.adjustments?.experience?parseInt(this.data.data.adjustments?.experience):0,game.settings.get("CoC7","pulpRules")&&this.data.data.adjustments?.archetype&&(value+=parseInt(this.data.data.adjustments?.archetype))):value=parseInt(this.data.data.value),isNaN(value)?null:value}async updateValue(value){if("skill"!==this.type)return null;if("character"===this.actor.data.type){const delta=parseInt(value)-this.value,exp=(this.data.data.adjustments?.experience?parseInt(this.data.data.adjustments.experience):0)+delta;await this.update({"data.adjustments.experience":exp>0?exp:0})}else await this.update({"data.value":value})}async increaseExperience(x){if("skill"!==this.type)return null;if("character"===this.actor.data.type){const exp=(this.data.data.adjustments?.experience?parseInt(this.data.data.adjustments.experience):0)+parseInt(x);await this.update({"data.adjustments.experience":exp>0?exp:0})}}getBulletLeft(){return"weapon"!==this.type?null:this.data.data.ammo?this.data.data.ammo:(this.setBullets(0),0)}async reload(){if("weapon"!==this.type)return null;const maxBullet=this.data.data.bullets?parseInt(this.data.data.bullets):1;await this.setBullets(maxBullet)}async setBullets(bullets){if("weapon"!==this.type)return null;await this.update({"data.ammo":bullets||0})}async addBullet(){if("weapon"!==this.type)return null;const bullets=await this.getBulletLeft(),maxBullets=this.data.data.bullets?parseInt(this.data.data.bullets):1;bullets+1>=maxBullets?await this.setBullets(maxBullets):await this.setBullets(bullets+1)}async shootBullets(x){if("weapon"!==this.type)return null;const bullets=await this.getBulletLeft();x>bullets?await this.setBullets(0):await this.setBullets(bullets-x)}static mergeOptionalSkills(skillList,options){return skillList.concat(options).reduce(((newArray,item)=>!CoC7Item.isAnySpec(item)&&newArray.find((skill=>skill.name===item.name))?newArray:[...newArray,item]),[]).sort(((a,b)=>{let lca,lcb;return a.data.properties&&b.data.properties?(lca=a.data.properties.special?a.data.specialization.toLowerCase()+a.name.toLowerCase():a.name.toLowerCase(),lcb=b.data.properties.special?b.data.specialization.toLowerCase()+b.name.toLowerCase():b.name.toLowerCase()):(lca=a.name.toLowerCase(),lcb=b.name.toLowerCase()),lca.localeCompare(lcb)}))}static _getChatCardActor(card){const tokenKey=card.dataset.tokenId;if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;return new Token(tokenData).actor}}const actorId=card.dataset.actorId;return game.actors.get(actorId)||null}getChatData(htmlOptions={}){const data=duplicate(this.data.data);"string"==typeof data.description&&(data.description={value:data.description,special:""}),void 0===data.description.value&&(data.description.value=""),void 0===data.description.special&&(data.description.special="");const labels=[];data.description.value=TextEditor.enrichHTML(data.description.value,htmlOptions),data.description.value=CoC7Parser.enrichHTML(data.description.value),data.description.special=TextEditor.enrichHTML(data.description.special,htmlOptions),data.description.special=CoC7Parser.enrichHTML(data.description.special);const props=[],fn=this[`_${this.data.type}ChatData`];if(fn&&fn.bind(this)(data,labels,props,htmlOptions),"skill"===this.type)for(const[key,value]of Object.entries(COC7.skillProperties))!0===this.data.data.properties[key]&&props.push(value);return data.properties=props.filter((p=>!!p)),data.labels=labels,data}_weaponChatData(data,labels,props){for(const[key,value]of Object.entries(COC7.weaponProperties))!0===this.data.data.properties[key]&&props.push(value);let skillLabel=game.i18n.localize("CoC7.Skill"),skillName="",found=!1;if(this.data.data.skill.main.id){const skill=this.actor?.items.get(this.data.data.skill.main.id);skill&&(skillName+=CoC7Item.getNameWithoutSpec(skill),found=!0)}if(this.usesAlternativeSkill&&this.data.data.skill.alternativ.id){skillLabel=game.i18n.localize("CoC7.Skills");const skill=this.actor?.items.get(this.data.data.skill.alternativ.id);skill&&(skillName+=`/${CoC7Item.getNameWithoutSpec(skill)}`,found=!0)}found||(skillName=this.data.data.skill.main.name,this.usesAlternativeSkill&&this.data.data.skill.alternativ.name&&(skillName+=`/${this.data.data.skill.alternativ.name}`)),skillName&&labels.push({name:skillLabel,value:skillName}),labels.push({name:game.i18n.localize("CoC7.WeaponUsesPerRound"),value:this.usesPerRoundString}),labels.push({name:game.i18n.localize("CoC7.WeaponMalfunction"),value:this.data.data.malfunction?this.data.data.malfunction:"-"}),this.data.data.bullets&&labels.push({name:game.i18n.localize("CoC7.WeaponBulletsInMag"),value:this.data.data.bullets})}canBePushed(){return!("skill"!==this.type||!this.data.data.properties.push)}get impale(){return this.data.data.properties.impl}get isDodge(){return"skill"===this.type&&this.name.toLowerCase()===game.i18n.localize("CoC7.DodgeSkillName").toLowerCase()}}class CoC7Check{constructor(actor=null,skill=null,item=null,diceMod=0,difficulty=null,flatThresholdModifier=0,flatDiceModifier=0){if(this.actor=actor,this.skill=skill,this.item=item,this.difficulty=difficulty,this.diceModifier=diceMod,this.rawValue=0,this.successLevel=null,this.referenceMessageId=null,this.pushing=!1,this.flatDiceModifier=flatDiceModifier,this.flatThresholdModifier=flatThresholdModifier,null===difficulty){const isUnknown="unknown"===game.settings.get("CoC7","defaultCheckDifficulty");this.difficulty=isUnknown?CoC7Check.difficultyLevel.unknown:CoC7Check.difficultyLevel.regular}}static get cardType(){return"rollCard"}static get difficultyLevel(){return{unknown:-1,regular:1,hard:2,extreme:3,critical:4,impossible:9}}static get successLevel(){return{fumble:-99,failure:0,regular:1,hard:2,extreme:3,critical:4}}static difficultyString(difficultyLevel){switch(isNaN(Number(difficultyLevel))?difficultyLevel:Number(difficultyLevel)){case"?":return game.i18n.localize("CoC7.UnknownDifficulty");case"+":return game.i18n.localize("CoC7.HardDifficulty");case"++":return game.i18n.localize("CoC7.ExtremeDifficulty");case"+++":return game.i18n.localize("CoC7.CriticalDifficulty");case 0:return game.i18n.localize("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.unknown:return game.i18n.localize("CoC7.UnknownDifficulty");case CoC7Check.difficultyLevel.regular:return game.i18n.localize("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.hard:return game.i18n.localize("CoC7.HardDifficulty");case CoC7Check.difficultyLevel.extreme:return game.i18n.localize("CoC7.ExtremeDifficulty");case CoC7Check.difficultyLevel.critical:return game.i18n.localize("CoC7.CriticalDifficulty");default:return null}}get rawValue(){if(this._rawValue||(this.characteristic&&(this.rawValue=this.actor.data.data.characteristics[this.characteristic].value),this.skill&&(this.rawValue=this.skill.value),this.attribute&&(this.rawValue=this.actor.data.data.attribs[this.attribute].value)),this._rawValue)return this.flatThresholdModifier&&game.settings.get("CoC7","allowFlatThresholdModifier")?this._rawValue+this.flatThresholdModifier<1?1:this._rawValue+this.flatThresholdModifier:this._rawValue}set rawValue(x){this._rawValue=x}set uuid(x){this._uuid=x}get uuid(){return this._uuid||(this._uuid=foundry.utils.randomID(16)),this._uuid}get hasCard(){return ui.chat.collection.filter((message=>this.uuid===message.getFlag("CoC7","uuid")&&CoC7Check.cardType===message.getFlag("CoC7","type"))).length>0}get rawValueString(){if(this._rawValue)return this.flatThresholdModifier&&game.settings.get("CoC7","allowFlatThresholdModifier")?this.flatThresholdModifier<0?this._rawValue.toString()+this.flatThresholdModifier.toString():this._rawValue.toString()+"+"+this.flatThresholdModifier.toString():this._rawValue.toString()}get criticalThreshold(){return 1}get regularThreshold(){return this.rawValue?this.rawValue>=100?99:parseInt(this.rawValue):null}get hardThreshold(){return this.rawValue?Math.floor(this.rawValue/2):null}get extremeThreshold(){return this.rawValue?Math.floor(this.rawValue/5):null}get fumbleThreshold(){return this.rawValue?this.rawValue<50?96:100:null}get succesThreshold(){if(void 0!==this.difficulty)switch(this.difficulty){case CoC7Check.difficultyLevel.extreme:return this.extremeThreshold;case CoC7Check.difficultyLevel.hard:return this.hardThreshold;case CoC7Check.difficultyLevel.regular:return this.regularThreshold;case CoC7Check.difficultyLevel.critical:return this.criticalThreshold;case CoC7Check.difficultyLevel.unknown:return-1;default:return this.rawValue}return null}get difficultyString(){if(void 0!==this.difficulty)switch(this.difficulty){case CoC7Check.difficultyLevel.extreme:return game.i18n.format("CoC7.ExtremeDifficulty");case CoC7Check.difficultyLevel.hard:return game.i18n.format("CoC7.HardDifficulty");case CoC7Check.difficultyLevel.regular:return game.i18n.format("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.critical:return game.i18n.format("CoC7.CriticalDifficulty");case CoC7Check.difficultyLevel.unknown:return game.i18n.format("CoC7.UnknownDifficulty");default:return""}return""}get modifiedResult(){if(!this.standby){if(void 0!==this._modifiedResult)return this._modifiedResult;if(this.flatDiceModifier){const modified=this.dices.total+this.flatDiceModifier;return modified<1?1:modified>100?100:modified}return this.dices.total}}set modifiedResult(x){this._modifiedResult=x}get flatDiceModifierString(){return this.flatDiceModifier?this.flatDiceModifier>0?`+${this.flatDiceModifier}`:this.flatDiceModifier.toString():null}get isFumble(){if(!this.standby&&!this.isSimpleRoll)return this.modifiedResult>=this.fumbleThreshold}get isCritical(){if(!this.standby)return 1===this.modifiedResult}get isExtremeSuccess(){if(!this.standby)return this.successLevel>=CoC7Check.successLevel.extreme}get passed(){if(!this.standby&&!this.isSimpleRoll)return this.luckSpent?this.difficulty<=this.successLevel:this.succesThreshold>=this.modifiedResult||this.isCritical}get failed(){if(!this.standby&&!this.isSimpleRoll)return!this.passed}get isSimpleRoll(){return void 0===this.rawValue}get hasBonus(){return!!(this.diceModifier&&this.diceModifier>0)}get hasPenalty(){return!!(this.diceModifier&&this.diceModifier<0)}get hasModifier(){return!(!this.diceModifier||0===this.diceModifier)}get diceModifier(){return this._diceModifier?this._diceModifier:null}set diceModifier(x){this._diceModifier=parseInt(x)}get name(){if(this.actor){if(this.skill)return this.skill.name;if(this.item)return this.item.name;if(this.characteristic)return CoC7Utilities.getCharacteristicNames(this.characteristic)?.label;if(this.attribute){if("lck"===this.attribute)return game.i18n.localize("CoC7.Luck");if("san"===this.attribute)return game.i18n.localize("CoC7.Sanity")}}return null}get sName(){if(this.actor){if(this.skill)return this.skill.sName;if(this.item)return this.item.name;if(this.characteristic)return CoC7Utilities.getCharacteristicNames(this.characteristic)?.short;if(this.attribute){if("lck"===this.attribute)return game.i18n.localize("CoC7.Luck");if("san"===this.attribute)return game.i18n.localize("CoC7.SAN")}}return null}get fullName(){const difficulty=this._difficulty!==CoC7Check.difficultyLevel.regular&&CoC7Check.difficultyString(this._difficulty),modifier=this._diceModifier>0?`+${this._diceModifier}`:this._diceModifier.toString();return game.i18n.format(`CoC7.LinkCheck${difficulty?"Diff":""}${this._diceModifier?"Modif":""}`,{difficulty,modifier,name:this.name})}get rolled(){return!!this.dice}static getFromCard(card){const rollResult=card.classList.contains("roll-result")?card:card.querySelector(".roll-result"),check=new CoC7Check;CoC7Roll.getFromElement(rollResult,check);const message=card.closest(".message");return check.messageId=message?message.dataset.messageId:null,check}static async push(card,publish=!0){const oldCheck=CoC7Check.getFromCard(card),actorId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId,skillId=card.dataset.skillId,charac=card.dataset.characteristic,itemId=card.dataset.itemId,diceMod=card.dataset.diceMod,difficulty=card.dataset.difficulty;let pushedRoll;if(skillId)pushedRoll=new CoC7Check(actorId,skillId,itemId,diceMod,difficulty);else{if(!charac)return;pushedRoll=new CoC7Check,pushedRoll.diceModifier=diceMod,pushedRoll.difficulty=difficulty,pushedRoll.actor=actorId,pushedRoll.characteristic=charac}oldCheck.uuid&&(pushedRoll.context=oldCheck.context,pushedRoll.uuid=oldCheck.uuid),oldCheck.parent&&(pushedRoll.parent=oldCheck.parent),pushedRoll.pushing=!0,await pushedRoll.roll(),publish&&pushedRoll.toMessage(!0,card)}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}set actor(x){if(this.actorKey=x,null!=x){if(x instanceof Actor)return this._actor=x,this._actor.alias=this.actor.name,void(x.token&&x.token.scene&&x.token.scene.id?this.actorKey=`${x.token.scene.id}.${x.token.id}`:this.actorKey=x.id);if(x.includes(".")){const[sceneId,tokenId]=x.split(".");if("TOKEN"===sceneId)this._actor=game.actors.tokens[tokenId],this._actor.alias=this._actor.name;else{const scene=game.scenes.get(sceneId);if(!scene)return;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return;const token=new Token(tokenData);this._actor=token.actor,this._actor.alias=token.name}}else this._actor=game.actors.get(x),this.actor.alias=this.actor.name}else this._actor=x}get successLevelIcons(){if(this.unknownDifficulty)return null;if(this.isSimpleRoll)return null;if(this.successLevel>=this.difficulty){const icons=[];for(let index=0;index<this.successLevel-this.difficulty+1;index++)icons.push(this.isCritical?"medal":"star");const successHint=game.i18n.format("CoC7.SuccesLevelHint",{value:this.successLevel-this.difficulty+1});return{success:!0,cssClass:this.isCritical?"critical":"success",hint:successHint,icons}}{const icons=[],successLevel=this.isFumble?-1:this.successLevel;for(let index=0;index<this.difficulty-successLevel;index++)icons.push(this.isFumble?"skull":"spider");const failureHint=game.i18n.format("CoC7.FailureLevelHint",{value:this.difficulty-successLevel});return{success:!1,cssClass:this.isFumble?"fumble":"failure",hint:failureHint,icons}}}get isBlind(){return void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind}set isBlind(x){this._isBlind=x}get unknownDifficulty(){return!(this.gmDifficultyCritical||this.gmDifficultyExtreme||this.gmDifficultyHard||this.gmDifficultyRegular)&&CoC7Check.difficultyLevel.unknown===this.difficulty}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}set skill(x){this._skill=this._getItemFromId(x),this.skillId=x}set item(x){this._item=this._getItemFromId(x),"weapon"===this._item?.type?this.itemId=x:(this._item=void 0,this.itemId=void 0)}_getItemFromId(x){return null==x?null:x instanceof Item?x:this._actor?this._actor.items.get(x):game.items.get(x)}get actor(){if(this._actor&&this._actor?.id){if("Object"===this._actor.constructor.name){const actor=new CoCActor(this._actor);this._actor=actor}}else if(this.actorKey&&(this._actor=chatHelper.getActorFromKey(this.actorKey)),this.actorId&&(this._actor=chatHelper.getActorFromKey(this.actorId)),!this._actor)return{isDummy:!0,name:this.actorName?this.actorName:void 0,id:void 0,img:"systems/CoC7/assets/icons/question-circle-regular.svg",portrait:"systems/CoC7/assets/icons/question-circle-regular.svg"};return this._actor}get skill(){return!this._skill&&this.skillId&&(this._skill=this.actor?.items.get(this.skillId)),!this._skill&&this.item&&this.item.data.data.skill&&(this.item.data.data.skill.main.id&&!this.weaponAltSkill?this._skill=this._actor.items.get(this.item.data.data.skill.main.id):this.item.data.data.skill.alternativ.id&&this.weaponAltSkill&&(this._skill=this._actor.items.get(this.item.data.data.skill.alternativ.id))),this._skill}get item(){return!this._item&&this.itemId&&this.actor&&(this._item=this.actor.items.get(this.itemId)),this._item}get displayResultType(){return game.settings.get("CoC7","displayResultType")}get displayCheckSuccessLevel(){return game.settings.get("CoC7","displayCheckSuccessLevel")}get displayBothSuccessLevel(){return this.displayResultType&&this.displayCheckSuccessLevel}get dontDisplaySuccessLevel(){return!this.displayResultType&&!this.displayCheckSuccessLevel}get image(){return this.skill?this.skill.img:this.item?this.item.img:void 0}get link(){return this.getLinkElement().outerHTML}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}getLinkElement(classes=null){const data={cls:["coc7-link","coc7-roll"].concat(classes),dataset:{check:"check"},icon:this.image?`<div style="background-image: url(${this.image})"></div>`:'<i class="fas fa-dice"></i>',blind:this.isBlind},difficulty=CoC7Check.difficultyString(this._difficulty),title=game.i18n.format(`CoC7.LinkCheck${this._difficulty?"Diff":""}${this._diceModifier?"Modif":""}`,{difficulty,modifier:this._diceModifier,name:this.name}),a=document.createElement("a");return a.title=title,a.classList.add(...data.cls),a.innerHTML=`${data.blind?'<i class="fas fa-eye-slash"></i>':""}${data.icon}${this.name}`,a}async roll(diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.standby||await this._perform()}static create({difficulty=CoC7Check.difficultyLevel.regular,diceModifier=null,actorKey=null,characteristic=null,attribute=null,rawValue=0,skill=null,flatDiceModifier=0,flatThresholdModifier=0,displayName=null,actorName=null}={}){const check=new CoC7Check;return check.difficulty=difficulty,diceModifier&&(check.diceModifier=diceModifier),flatDiceModifier&&(check.flatDiceModifier=flatDiceModifier),flatThresholdModifier&&(check.flatThresholdModifier=flatThresholdModifier),displayName&&(check.displayName=displayName),actorKey&&(check.actor=actorKey),actorName&&(check.actorName=actorName),isNaN(Number(rawValue))||(check.rawValue=Number(rawValue)),check.actor&&!check.actor.isDummy&&(skill?check.skill=skill:characteristic?check.characteristic=characteristic:attribute&&(check.attribute=attribute)),check}async rollCharacteristic(char,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.characteristic=char,this.standby||await this._perform()}async rollAttribute(attrib,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.attribute=attrib,this.standby||await this._perform()}async rollValue(val,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.rawValue=val,this.standby||await this._perform()}async _perform(options={}){this.dice=options.roll||await CoC7Dice.roll(this.diceModifier,this.rollMode,this.isBlind),options.silent||AudioHelper.play({src:CONFIG.sounds.dice}),options.forceDSN&&await CoC7Dice.showRollDice3d(this.dice.roll),this.dices={tens:[],unit:{value:this.dice.unit.total},total:this.dice.total,tenResult:this.dice.total-this.dice.unit.total,hasBonus:!!this.diceModifier,bonus:Math.abs(this.diceModifier),bonusType:this.diceModifier<0?game.i18n.format("CoC7.DiceModifierPenalty"):game.i18n.format("CoC7.DiceModifierBonus"),difficulty:this.difficulty};const max=0===this.dice.unit.total?100:90,min=0===this.dice.unit.total?10:0;let selected=this.dice.total-this.dice.unit.total;for(let i=0;i<this.dice.tens.results.length;i++){const die={};die.value=this.dice.tens.results[i],die.value===selected?(selected=101,die.selected=!0,this.dices.hasBonus?(die.isMax=!0,die.isMin=!1):(die.isMin=!0,die.isMax=!1)):(die.value===max?die.isMax=!0:die.isMax=!1,die.value===min?die.isMin=!0:die.isMin=!1),this.dices.tens.push(die)}this.computeCheck()}async computeCheck(){switch(this.isUnknown=this.unknownDifficulty,this.gmDifficultyRegular&&(this.difficulty=CoC7Check.difficultyLevel.regular),this.gmDifficultyHard&&(this.difficulty=CoC7Check.difficultyLevel.hard),this.gmDifficultyExtreme&&(this.difficulty=CoC7Check.difficultyLevel.extreme),this.gmDifficultyCritical&&(this.difficulty=CoC7Check.difficultyLevel.critical),this.tenOnlyOneDie=1===this.dices.tens.length,this.isValue=!1,this.isCharactiristic=!1,this.isSkill=!1,this.isItem=!1,this.isAttribute=!1,this.isSimpleRoll?(this.denyPush=!0,this.denyLuck=!0):null==this.actor?this.isValue=!0:(this.characteristic&&(this.isCharactiristic=!0,this.rawValue=this.actor.data.data.characteristics[this.characteristic].value),this.skill&&(this.isSkill=!0,this.rawValue=this.skill.value),this.attribute&&(this.isAttribute=!0,this.rawValue=this.actor.data.data.attribs[this.attribute].value)),this.luckSpent||this.isSimpleRoll||(this.modifiedResult<=this.rawValue&&(this.successLevel=CoC7Check.successLevel.regular),this.modifiedResult<=this.hardThreshold&&(this.successLevel=CoC7Check.successLevel.hard),this.modifiedResult<=this.extremeThreshold&&(this.successLevel=CoC7Check.successLevel.extreme),this.modifiedResult>this.rawValue&&(this.successLevel=CoC7Check.successLevel.failure),1===this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.critical),this.fumbleThreshold<=this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.fumble)),this.successLevel){case CoC7Check.successLevel.regular:this.resultType=game.i18n.format("CoC7.RegularSuccess");break;case CoC7Check.successLevel.hard:this.resultType=game.i18n.format("CoC7.HardSuccess");break;case CoC7Check.successLevel.extreme:this.resultType=game.i18n.format("CoC7.ExtremeSuccess");break;case CoC7Check.successLevel.critical:this.resultType=game.i18n.format("CoC7.CriticalSuccess");break;case CoC7Check.successLevel.fumble:this.resultType=game.i18n.format("CoC7.Fumble");break;case CoC7Check.successLevel.failure:this.resultType=game.i18n.format("CoC7.Failure")}if(this.unknownDifficulty?this.successRequired="":this.isSimpleRoll||(this.successRequired=game.i18n.format("CoC7.SuccessRequired",{successRequired:this.difficultyString})),1===this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.critical),this.luckSpent||this.isUnknown||this.isSimpleRoll||(this.isFailure=this.failed,this.isSuccess=this.passed),this.hasMalfunction=!1,this.isFumble&&(this.successLevel=CoC7Check.successLevel.fumble),this.item&&(this.isItem=!0,this.item.data.data.malfunction&&Number(this.modifiedResult)>=Number(this.item.data.data.malfunction)&&(this.hasMalfunction=!0,this.malfunctionTxt=game.i18n.format("CoC7.Malfunction",{itemName:this.item.name}),await this.item.toggleItemFlag(CoC7Item.flags.malfunction))),this.canBePushed=!!this.skill&&this.skill.canBePushed(),null!=this.characteristic&&(this.canBePushed=!0),this.isFumble&&(this.canBePushed=!1),this.denyPush&&(this.canBePushed=!1),!this.denyLuck&&this.actor){if(!(this.luckSpent||this.passed||this.isFumble||this.difficulty===CoC7Check.difficultyLevel.critical||this.unknownDifficulty)&&(this.skill||this.characteristic)){const luckNeeded=this.modifiedResult-this.succesThreshold;this.actor.luck>luckNeeded&&(this.hasEnoughLuck=!0,this.luckNeeded=luckNeeded,this.luckNeededTxt=game.i18n.format("CoC7.SpendLuck",{luckNeededValue:luckNeeded}))}if(!this.luckSpent&&(this.increaseSuccess=[],!this.pushing&&"lck"!==this.attribute&&"san"!==this.attribute)){if(this.unknownDifficulty&&this.modifiedResult>this.regularThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.RegularDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.regular,nextLevel.luckToSpend=this.modifiedResult-this.regularThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}if(this.difficulty<=CoC7Check.difficultyLevel.regular&&this.modifiedResult>this.hardThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.HardDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.hard,nextLevel.luckToSpend=this.modifiedResult-this.hardThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}if(this.difficulty<=CoC7Check.difficultyLevel.hard&&this.modifiedResult>this.extremeThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.ExtremeDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.extreme,nextLevel.luckToSpend=this.modifiedResult-this.extremeThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}}this.canIncreaseSuccess=this.increaseSuccess.length>0,this.isFumble&&(this.canIncreaseSuccess=!1)}if(this.canAwardExperience=this.skill&&!this.skill.data.data.properties.noxpgain,!(this.passed&&this.diceModifier<=0&&this.skill)||this.skill.data.data.properties.noxpgain||this.luckSpent||this.forced||this.isBlind||this.isUnknown||this.flagForDevelopement(),this.parent){const parent=await fromUuid(this.parent);parent&&"updateRoll"in parent&&await parent.updateRoll(this.JSONRollString)}}showDiceRoll(){if(game.modules.get("dice-so-nice")?.active){const diceResults=[];for(const dieResult of this.dices.tens)diceResults.push(100===dieResult.value?0:dieResult.value/10);diceResults.push(this.dices.unit.value);const diceData={formula:`${this.dices.tens.length}d100+1d10`,results:diceResults,whisper:null,blind:!1};game.dice3d.show(diceData)}}get cssClass(){let cssClass="";return this.isSuccess&&(cssClass="success"),this.isFailure&&(cssClass="failure"),this.isCritical&&!this.isFailure&&(cssClass="success critical"),this.isFumble&&!this.isSuccess&&(cssClass="failure fumble"),CoC7Check.successLevel.regular===this.successLevel&&(cssClass+=" regular-success"),CoC7Check.successLevel.hard===this.successLevel&&(cssClass+=" hard-success"),CoC7Check.successLevel.extreme===this.successLevel&&(cssClass+=" extreme-success"),cssClass}get cssClassList(){const cssClass=[];return this.isSuccess&&cssClass.push("success"),this.isFailure&&cssClass.push("failure"),this.isCritical&&!this.isFailure&&cssClass.push("success","critical"),this.isFumble&&!this.isSuccess&&cssClass.push("failure","fumble"),CoC7Check.successLevel.regular===this.successLevel&&cssClass.push("regular-success"),CoC7Check.successLevel.hard===this.successLevel&&cssClass.push("hard-success"),CoC7Check.successLevel.extreme===this.successLevel&&cssClass.push("extreme-success"),cssClass}get playerCssClass(){return this.isSuccess||this.forcedSuccess?"success":this.isFailure||this.forcedFailure?"failure":null}async upgradeCheck(upgradeindex,update=!0){const increasedSuccess=this.increaseSuccess[upgradeindex],luckAmount=parseInt(increasedSuccess.luckAmount)||parseInt(increasedSuccess.luckToSpend);if(!this.actor.spendLuck(luckAmount))return void ui.notifications.error(game.i18n.format("CoC7.ErrorNotEnoughLuck",{actor:this.actor.name}));this.totalLuckSpent=parseInt(this.totalLuckSpent)?parseInt(this.totalLuckSpent):0,this.totalLuckSpent+=parseInt(luckAmount);const newSuccessLevel=parseInt(increasedSuccess.newSuccessLevel)||parseInt(increasedSuccess.difficulty);this.successLevel=newSuccessLevel,this.difficulty<=newSuccessLevel&&(this.isSuccess=!0,this.isFailure=!1);for(let index=0;index<upgradeindex+1;index++)this.increaseSuccess.shift();for(const s of this.increaseSuccess)s.luckToSpend=s.luckToSpend-luckAmount;return this.luckSpent=!0,this.computeCheck(),update?await this.updateChatCard():void 0}removeUpgrades(){this.canIncreaseSuccess=!1,this.increaseSuccess=[],this.luckNeeded=0,this.luckNeededTxt=null,this.canBePushed=!1}forcePass(luckAmount=null,update=!0){if(luckAmount){this.actor.spendLuck(luckAmount),this.successLevel=this.difficulty;for(const s of this.increaseSuccess)s.luckToSpend=s.luckToSpend-luckAmount;this.luckSpent=!0,this.isSuccess=!0,this.totalLuckSpent=parseInt(this.totalLuckSpent)?parseInt(this.totalLuckSpent):0,this.totalLuckSpent+=parseInt(luckAmount),this.computeCheck(),update&&this.updateChatCard()}else this.forced=!0,this.forcedSuccess=!0,this.isUnknown?this.forceSuccessLevel(CoC7Check.successLevel.regular,update):this.forceSuccessLevel(this.difficulty,update)}forceFail(update=!0){this.forced=!0,this.forcedFailure=!0,this.isUnknown?this.forceSuccessLevel(CoC7Check.successLevel.failure,update):this.forceSuccessLevel(this.difficulty-1,update)}_forceCheck(high,low,update=!0){let total=Math.floor(Math.random()*(high-low))+low+1;const unitTotal=total%10;let tenTotal=Math.floor(total/10);const tens=[];let hasEnough=Math.abs(this.diceModifier)===tens.length;for(;!hasEnough;){let ten=Math.floor(10*Math.random()),roll=10*ten+unitTotal;0===roll&&(roll=100,ten=100),this.hasPenalty&&roll<=high&&(tens.push(ten),roll>total&&(total=roll)),this.hasBonus&&roll>low&&(tens.push(ten),roll<total&&(total=roll)),hasEnough=tens.length===Math.abs(this.diceModifier)}10===tenTotal&&0===unitTotal&&(tenTotal=100),tens.splice(Math.floor(Math.random()*tens.length+1),0,10===tenTotal?0:tenTotal),this.dices.tens=[],this.dices.unit.value=unitTotal,this.modifiedResult=total,this.dices.total=total,this.dices.tenResult=total-unitTotal;const max=0===unitTotal?100:90,min=0===unitTotal?10:0;let selected=total-unitTotal;for(let i=0;i<tens.length;i++){const die={};die.value=tens[i],die.value===selected?(selected=101,die.selected=!0,this.hasBonus?(die.isMax=!0,die.isMin=!1):(die.isMin=!0,die.isMax=!1)):(die.value===max?die.isMax=!0:die.isMax=!1,die.value===min?die.isMin=!0:die.isMin=!1),this.dices.tens.push(die)}this.computeCheck(),update&&this.updateChatCard()}forceSuccessLevel(successLevel,update=!0){let high,low;CoC7Check.successLevel.fumble===successLevel&&(high=100,low=this.fumbleThreshold-1),CoC7Check.successLevel.failure===successLevel&&(high=this.regularThreshold===this.fumbleThreshold-1?100:this.fumbleThreshold-1,low=this.regularThreshold),CoC7Check.successLevel.regular===successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.hard===successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.extreme===successLevel&&(high=this.extremeThreshold,low=1),CoC7Check.successLevel.critical===successLevel&&(high=1,low=0),high===low&&low--,0===high&&(high=this.fumbleThreshold-1),this._forceCheck(high,low,update)}increaseSuccessLevel(update=!0){let high,low;CoC7Check.successLevel.fumble===this.successLevel&&(high=this.fumbleThreshold-1,low=this.regularThreshold===this.fumbleThreshold-1?this.hardThreshold:this.regularThreshold),CoC7Check.successLevel.failure===this.successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.regular===this.successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.hard===this.successLevel&&(high=this.extremeThreshold,low=this.criticalThreshold),CoC7Check.successLevel.extreme===this.successLevel&&(high=this.criticalThreshold,low=0),high===low&&low--,this._forceCheck(high,low,update)}decreaseSuccessLevel(update=!0){let high,low;CoC7Check.successLevel.failure===this.successLevel&&(high=100,low=this.fumbleThreshold-1),CoC7Check.successLevel.regular===this.successLevel&&(high=this.fumbleThreshold-1,low=this.regularThreshold),CoC7Check.successLevel.hard===this.successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.extreme===this.successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.critical===this.successLevel&&(high=this.extremeThreshold,low=1),0===high&&(high=this.fumbleThreshold-1),this._forceCheck(high,low,update)}async flagForDevelopement(){this.flaggedForDevelopment=!0,this.skill&&await this.skill.flagForDevelopement()}set difficulty(x){this._difficulty=parseInt(x)}get difficulty(){return this._difficulty}set flavor(x){this._flavor=x}set context(x){this._context=x}get context(){if(this._context)return this._context}set parent(x){this.uuid||(this.uuid=foundry.utils.randomID(16)),this.parentUuid=x}get parent(){if(this.parentUuid)return this.parentUuid}get flavor(){if(this._flavor)return this._flavor;let flavor="";return this.actor?.data&&(this.skill?flavor=game.i18n.format("CoC7.CheckResult",{name:this.skill.name,value:this.rawValueString,difficulty:this.difficultyString}):this.item?flavor=game.i18n.format("CoC7.ItemCheckResult",{item:this.item.name,skill:this.skill.name,value:this.rawValueString,difficulty:this.difficultyString}):this.characteristic?flavor=game.i18n.format("CoC7.CheckResult",{name:game.i18n.format(this.actor.data.data.characteristics[this.characteristic].label),value:this.rawValueString,difficulty:this.difficultyString}):this.attribute?flavor=game.i18n.format("CoC7.CheckResult",{name:game.i18n.format(`CoC7.${this.actor.data.data.attribs[this.attribute].label}`),value:this.rawValueString,difficulty:this.difficultyString}):this.displayName&&(flavor=game.i18n.format("CoC7.CheckResult",{name:this.displayName,value:this.rawValueString,difficulty:this.difficultyString}))),flavor||this.rawValue&&(flavor=this.displayName?game.i18n.format("CoC7.CheckResult",{name:this.displayName,value:this.rawValueString,difficulty:this.difficultyString}):game.i18n.format("CoC7.CheckRawValue",{rawvalue:this.rawValue,difficulty:this.difficultyString})),this.pushing&&(flavor=`${game.i18n.format("CoC7.Pushing")} ${flavor}`),flavor}get tooltipHeader(){return this.attribute?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:game.i18n.format(`CoC7.${this.actor.data.data.attribs[this.attribute].label}`)})+` (${this.actor.data.data.attribs[this.attribute].value}%)`:this.characteristic?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:game.i18n.localize(this.actor.data.data.characteristics[this.characteristic].label)})+` (${this.actor.data.data.characteristics[this.characteristic].value}%)`:this.skill?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:this.skill.name})+` (${this.skill.value}%)`:this.displayName?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:this.displayName})+` (${this.rawValueString}%)`:null}async getHtmlRollElement(options={}){this.options?this.options=mergeObject(this.options,options):this.options=options;const html=await renderTemplate("systems/CoC7/templates/chat/rolls/in-card-roll.html",this);return html?$.parseHTML(html)[0]:null}async getHtmlRoll(options={}){this.options?this.options=mergeObject(this.options,options):this.options=options;return await renderTemplate("systems/CoC7/templates/chat/rolls/in-card-roll.html",this)||void 0}async toMessage(pushing=!1){this.pushing=pushing;const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this),speakerData={};let speaker;this.actor?(this.actor.isToken?speakerData.token=this.token.document:this.actor.isDummy?this.actor.name&&(speaker={alias:this.actor.name}):speakerData.actor=this.actor,speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor?.user?this.actor.user:game.user).id,speaker,flavor:this.flavor,content:html,flags:{CoC7:{type:CoC7Check.cardType}}};if(this.uuid&&(chatData.flags.CoC7.uuid=this.uuid),this.context&&(chatData.flags.CoC7.context=this.context),"selfroll"===this.rollMode)if(game.user.isGM){if(chatData.user=game.user.id,chatData.flavor=`[${this.actor.name}] ${chatData.flavor}`,chatData.flags={CoC7:{GMSelfRoll:!0}},void 0!==chatData.speaker&&(chatData.flags.CoC7.originalSpeaker=duplicate(chatData.speaker)),game.user.isGM)switch(game.settings.get("CoC7","selfRollWhisperTarget")){case"owners":delete chatData.speaker,chatData.whisper=this.actor.owners,chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER;break;case"everyone":delete chatData.speaker,chatData.whisper=game.users.players,chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER;break;default:ChatMessage.applyRollMode(chatData,this.rollMode)}}else ChatMessage.applyRollMode(chatData,this.rollMode);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),this.dice?.roll&&!this.dice?.hideDice&&(chatData.roll=this.dice.roll,chatData.type=CONST.CHAT_MESSAGE_TYPES.ROLL,chatData.rollMode=this.isBlind?"blindroll":this.rollMode),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard({makePublic=!1,forceRoll=!1}={}){makePublic&&(this.rollMode=!1);const chatData={flavor:this.flavor};makePublic?(chatData.whisper=[],chatData.blind=!1,ChatMessage.applyRollMode(chatData)):(chatData.whisper=[],chatData.blind=!1,ChatMessage.applyRollMode(chatData,game.settings.get("core","rollMode"))),chatData.blind&&(this.isBlind=!0);const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this);let newContent=html;if(!this.messageId)return $.parseHTML(html)[0];const message=game.messages.get(this.messageId),htmlMessage=$.parseHTML(message.data.content)[0];if(!htmlMessage.classList.contains("roll-result")){const htmlCheck=$.parseHTML(html)[0],rollResultElement=htmlMessage.querySelector(".roll-result");null!==rollResultElement&&rollResultElement.replaceWith(htmlCheck),newContent=htmlMessage.outerHTML}chatData.content=newContent,CONST.CHAT_MESSAGE_TYPES.ROLL===message.data.type&&(message.data.whisper?.length?chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER:chatData.type=CONST.CHAT_MESSAGE_TYPES.OTHER),forceRoll&&this.dice?.roll&&await CoC7Dice.showRollDice3d(this.dice.roll);const msg=await message.update(chatData);return await ui.chat.updateMessage(msg,!1),msg}static async updateCardSwitch(event){const card=event.currentTarget.closest(".chat-card"),check=await CoC7Check.getFromCard(card);check.gmDifficultyRegular=!1,check.gmDifficultyHard=!1,check.gmDifficultyExtreme=!1,check.gmDifficultyCritical=!1,"gmDifficultyRegular"===event.currentTarget.dataset.flag&&(check.gmDifficultyRegular=!0),"gmDifficultyHard"===event.currentTarget.dataset.flag&&(check.gmDifficultyHard=!0),"gmDifficultyExtreme"===event.currentTarget.dataset.flag&&(check.gmDifficultyExtreme=!0),"gmDifficultyCritical"===event.currentTarget.dataset.flag&&(check.gmDifficultyCritical=!0),check.computeCheck(),check.updateChatCard()}async shortResult(details=!1){this.details=details||!1;return await renderTemplate("systems/CoC7/templates/chat/roll.html",this)}get tooltip(){return renderTemplate("systems/CoC7/templates/chat/rolls/roll-tooltip.html",this)}get inlineCheck(){const a=document.createElement("a");return a.classList.add("coc7-inline-check"),a.classList.add("coc7-check-result"),a.classList.add("coc7-inline"),a.classList.add(...this.cssClassList),a.title=this.tooltipHeader,a.dataset.roll=escape(this.JSONRollString),a.innerHTML=`<i class="game-icon game-icon-d10"></i> ${this.modifiedResult||"??"}`,a}get rollToolTip(){if(this.standby)return;const parts=[],tens=this.dices.tens.map((r=>({result:r.value,selected:r.selected,classes:["die","d10",r.selected?null:"discarded",r.isMin?"min":null,r.isMax?"max":null].filter((c=>c)).join(" ")}))),unit=[{result:this.dices.unit.value,selected:!0,classes:"die d10"}];return parts.push({formula:this.tooltipHeader,total:this.modifiedResult,icons:this.successLevelIcons,class:this.cssClass,successRequired:this.successRequired,resultType:this.resultType,face:10,rolls:[...tens,...unit]}),renderTemplate("systems/CoC7/templates/chat/rolls/roll-tooltip.html",{parts})}get JSONRollData(){return JSON.parse(this.JSONRollString)}get JSONRollString(){return JSON.stringify(this,((key,value)=>{if(null===value)return;return["_actor","_skill","_item"].includes(key)?void 0:value}))}static fromData(data){return Object.assign(new CoC7Check,data)}static fromRollString(dataString){let data;try{data=JSON.parse(unescape(dataString))}catch(err){return ui.notifications.error(err.message),null}return CoC7Check.fromData(data)}static async alter(check,command,options={}){switch(command){case"useLuck":if(options.target.classList.contains("pass-check")){const luckAmount=parseInt(options.target.dataset.luckAmount);check.forcePass(luckAmount,options.update)}else{const upgradeIndex=parseInt(options.target.dataset.index);await check.upgradeCheck(upgradeIndex,options.update)}break;case"force-pass":check.forcePass(null,options.update);break;case"force-fail":check.forceFail(options.update);break;case"increase-success-level":check.increaseSuccessLevel(options.update);break;case"decrease-success-level":check.decreaseSuccessLevel(options.update);break;case"reveal-check":check.isBlind=!1,check.rollMode=!1,check.computeCheck(),options.update&&check.updateChatCard();break;case"flag-for-development":await check.flagForDevelopement(),check.computeCheck(),options.update&&check.updateChatCard();break;case"push":await check._perform(),check.pushing=!0,options.update&&check.updateChatCard()}}static async _onClickInlineRoll(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("coc7-check-result"))return a.classList.contains("expanded")?CoC7Check._collapseInlineResult(a):CoC7Check._expandInlineResult(a)}static _collapseInlineResult(a){if(!a.classList.contains("coc7-inline-check"))return;if(!a.classList.contains("expanded"))return;const tooltip=a.querySelector(".coc7-check-tooltip");return tooltip&&tooltip.remove(),a.classList.remove("expanded")}static async _expandInlineResult(a){if(!a.classList.contains("coc7-inline-check"))return;if(a.classList.contains("expanded"))return;const check=Object.assign(new CoC7Check,JSON.parse(unescape(a.dataset.roll)));if(check.standby)return;const tip=document.createElement("div");tip.innerHTML=await check.rollToolTip;const tooltip=tip.children[0];a.appendChild(tooltip),a.classList.add("expanded");const pa=a.getBoundingClientRect(),pt=tooltip.getBoundingClientRect();tooltip.style.left=`${Math.min(pa.x,window.innerWidth-(pt.width+3))}px`,tooltip.style.top=`${Math.min(pa.y+pa.height+3,window.innerHeight-(pt.height+3))}px`;const zi=getComputedStyle(a).zIndex;tooltip.style.zIndex=Number.isNumeric(zi)?zi+1:100}}class RollDialog{static async create(options={}){options.difficulty&&(options.difficultyLevel={},CoC7Check.difficultyLevel.unknown===options.difficulty&&(options.difficultyLevel.unknown=!0),CoC7Check.difficultyLevel.regular===options.difficulty&&(options.difficultyLevel.regular=!0),CoC7Check.difficultyLevel.hard===options.difficulty&&(options.difficultyLevel.hard=!0),CoC7Check.difficultyLevel.extreme===options.difficulty&&(options.difficultyLevel.extreme=!0)),options.name&&!options.displayName&&(options.displayName=options.name);const unknownDifficultyDefault="unknown"===game.settings.get("CoC7","defaultCheckDifficulty"),html=await renderTemplate("systems/CoC7/templates/apps/bonus.html",{allowFlatDiceModifier:game.settings.get("CoC7","allowFlatDiceModifier")&&!options.disableFlatDiceModifier,allowFlatThresholdModifier:game.settings.get("CoC7","allowFlatThresholdModifier")&&!options.disableFlatThresholdModifier,difficulty:CoC7Check.difficultyLevel,unknownDifficultyDefault,options});return new Promise((resolve=>{let formData=null;new Dialog({title:options.displayName?game.i18n.format("CoC7.BonusSelectionWindowNamed",{name:options.displayName}):game.i18n.localize("CoC7.BonusSelectionWindow"),content:html,buttons:{roll:{label:game.i18n.localize("CoC7.RollDice"),callback:html=>(formData=new FormData(html[0].querySelector("#bonus-roll-form")),resolve(formData))}},default:"roll",close:()=>{}}).render(!0)}))}}class SanDataDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(":checkbox").click((()=>this._toggleInput(html)))}_toggleInput(html){html.find('*[name="customname"]').toggle()}static async create(options={}){const html=await renderTemplate("systems/CoC7/templates/apps/sandata.html",options);return new Promise((resolve=>{let formData=null;new SanDataDialog({title:options.displayName?game.i18n.format("CoC7.SanDataSelectionWindowNamed",{name:options.displayName}):game.i18n.localize("CoC7.SanDataSelectionWindow"),content:html,buttons:{Validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#san-data-form")),resolve(formData))}},default:"Validate",close:()=>{}}).render(!0)}))}}class CoC7ActorSheet extends ActorSheet{async getData(){const data=await super.getData(),actorData=this.actor.data.toObject(!1);if(data.data=actorData.data,data.editable=this.isEditable,data.isToken=this.actor.isToken,data.itemsByType={},data.skills={},data.combatSkills={},data.weapons={},data.rangeWpn=[],data.meleeWpn=[],data.actorFlags={},data.permissionLimited=(this.actor.data.permission[game.user.id]===CONST.ENTITY_PERMISSIONS.LIMITED||this.actor.data.permission.default===CONST.ENTITY_PERMISSIONS.LIMITED)&&!game.user.isGM,data.isGM=game.user.isGM,data.alowUnlock="always"===game.settings.get("CoC7","playerUnlockSheetMode")||game.user.isGM||"creation"===game.settings.get("CoC7","playerUnlockSheetMode")&&game.settings.get("CoC7","charCreationEnabled"),"creation"===game.settings.get("CoC7","playerUnlockSheetMode")&&game.settings.get("CoC7","charCreationEnabled")&&(data["data.flags.locked"]=!1),["vehicle"].includes(this.actor.data.type)||(data.data.characteristics||(data.data.characteristics={str:{value:null,short:"CHARAC.STR",label:"CHARAC.Strength",formula:null},con:{value:null,short:"CHARAC.CON",label:"CHARAC.Constitution",formula:null},siz:{value:null,short:"CHARAC.SIZ",label:"CHARAC.Size",formula:null},dex:{value:null,short:"CHARAC.DEX",label:"CHARAC.Dexterity",formula:null},int:{value:null,short:"CHARAC.INT",label:"CHARAC.Intelligence",formula:null},pow:{value:null,short:"CHARAC.POW",label:"CHARAC.Power",formula:null}}),data.data.attribs||(data.data.attribs={hp:{value:null,max:null,short:"HP",label:"Hit points",auto:!0},mp:{value:null,max:null,short:"HP",label:"Magic points",auto:!0},lck:{value:null,short:"LCK",label:"Luck"},san:{value:null,max:99,short:"SAN",label:"Sanity",auto:!0},mov:{value:null,short:"MOV",label:"Movement rate",auto:!0},db:{value:null,short:"DB",label:"Damage bonus",auto:!0},build:{value:null,short:"BLD",label:"Build",auto:!0},armor:{value:null,auto:!1}}),data.data.status||(data.data.status={criticalWounds:{type:"Boolean",value:!1},unconscious:{type:"Boolean",value:!1},dying:{type:"Boolean",value:!1},dead:{type:"Boolean",value:!1},prone:{type:"Boolean",value:!1},tempoInsane:{type:"boolean",value:!1},indefInsane:{type:"boolean",value:!1}}),data.data.biography||(data.data.biography={personalDescription:{type:"string",value:""}}),data.data.infos||(data.data.infos={occupation:"",age:"",sex:"",residence:"",birthplace:"",archetype:"",organization:"",playername:""}),data.data.flags||(data.data.flags={locked:!0,manualCredit:!1}),data.data.credit||(data.data.credit={monetarySymbol:null,multiplier:null,spent:null,assetsDetails:null}),data.data.development||(data.data.development={personal:null,occupation:null,archetype:null}),data.data.biography||(data.data.biography=[]),data.data.encounteredCreatures||(data.data.encounteredCreatures=[]),data.isInABoutOfMadness=this.actor.isInABoutOfMadness,data.isInsane=this.actor.isInsane,data.boutOfMadness=this.actor.boutOfMadness,data.sanity=this.actor.sanity,data.pulpCharacter=game.settings.get("CoC7","pulpRules")),data.isDead=this.actor.dead,data.isDying=this.actor.dying,data.items){for(const item of data.items){if("skill"===item.type){if(item.data.properties.special){if(item.data.properties.fighting&&item.data.specialization!==game.i18n.localize("CoC7.FightingSpecializationName")){const itemToUpdate=this.actor.items.get(item._id);await itemToUpdate.update({"data.specialization":game.i18n.localize("CoC7.FightingSpecializationName")}),item.data.specialization=game.i18n.localize("CoC7.FightingSpecializationName")}if(item.data.properties.firearm&&item.data.specialization!==game.i18n.localize("CoC7.FirearmSpecializationName")){const itemToUpdate=this.actor.items.get(item._id);await itemToUpdate.update({"data.specialization":game.i18n.localize("CoC7.FirearmSpecializationName")}),item.data.specialization=game.i18n.localize("CoC7.FirearmSpecializationName")}}if("character"!==this.actor.data.type){if(isNaN(Number(item.data.value))){let value=null;const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=getProperty(this,value.substring(5)));try{value=(await new Roll(item.data.value,parsed).evaluate({async:!0})).total}catch(err){console.warn(`unable to parse formula :${item.data.value} for skill ${item.name}`),value=null}if(value){item.data.value=value;const itemToUpdate=this.actor.items.get(item._id);await itemToUpdate.update({"data.value":value})}}}else{const skill=this.actor.items.get(item._id);if(item.data.base=await skill.asyncBase(),item.data.value){const value=item.data.value;let updatedExp=(item.data.adjustments?.experience?parseInt(item.data.adjustments.experience):0)+parseInt(item.data.value)-skill.value;updatedExp<=0&&(updatedExp=null),await this.actor.updateEmbeddedDocuments("Item",[{_id:item._id,"data.adjustments.experience":updatedExp,"data.value":null}]),item.data.adjustments||(item.data.adjustments={}),item.data.adjustments.experience=updatedExp,item.data.value=value}else item.data.value=skill.value}}let list=data.itemsByType[item.type];list||(list=[],data.itemsByType[item.type]=list),list.push(item)}for(const itemType in data.itemsByType)data.itemsByType[itemType].sort(((a,b)=>{let lca,lcb;return a.data.properties&&b.data.properties?(lca=a.data.properties.special&&void 0!==a.data.specialization?a.data.specialization.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()+a.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase():a.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),lcb=b.data.properties.special&&void 0!==b.data.specialization?b.data.specialization.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()+b.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase():b.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()):(lca=a.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),lcb=b.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()),lca.localeCompare(lcb)}));data.skills=data.items.filter((item=>"skill"===item.type)).sort(((a,b)=>{let lca,lcb;return a.data.properties&&b.data.properties?(lca=a.data.properties.special?a.data.specialization.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()+a.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase():a.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),lcb=b.data.properties.special?b.data.specialization.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()+b.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase():b.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()):(lca=a.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),lcb=b.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()),lca<lcb?-1:lca>lcb?1:0})),data.meleeSkills=data.skills.filter((skill=>!0===skill.data.properties.combat&&!0===skill.data.properties.fighting)),data.rangeSkills=data.skills.filter((skill=>!0===skill.data.properties.combat&&!0===skill.data.properties.firearm));const cbtSkills=data.skills.filter((skill=>!0===skill.data.properties.combat));if(cbtSkills)for(const skill of cbtSkills)data.combatSkills[skill._id]=skill;const weapons=data.itemsByType.weapon;if(weapons)for(const weapon of weapons){if(weapon.usesAlternateSkill=!0===weapon.data.properties.auto||!0===weapon.data.properties.brst,weapon.data.ammo||(weapon.data.ammo=0),weapon.skillSet=!0,""===weapon.data.skill.main.id)weapon.skillSet=!1;else{if(data.combatSkills[weapon.data.skill.main.id]){const skill=this.actor.items.get(weapon.data.skill.main.id);weapon.data.skill.main.name=data.combatSkills[weapon.data.skill.main.id].name,weapon.data.skill.main.value=skill.value}else weapon.skillSet=!1;if(""!==weapon.data.skill.alternativ.id&&data.combatSkills[weapon.data.skill.alternativ.id]){const skill=this.actor.items.get(weapon.data.skill.alternativ.id);weapon.data.skill.alternativ.name=data.combatSkills[weapon.data.skill.alternativ.id].name,weapon.data.skill.alternativ.value=skill.value}}weapon.data._properties=[];for(const[key,value]of Object.entries(COC7.weaponProperties)){const property={};property.id=key,property.name=value,property.value=!0===weapon.data.properties[key],weapon.data._properties.push(property)}data.weapons[weapon._id]=weapon,weapon.data.properties.rngd?data.rangeWpn.push(weapon):data.meleeWpn.push(weapon)}const token=this.token;if(data.tokenId=token?`${token.parent?.id?token.parent.id:"TOKEN"}.${token.id}`:null,data.hasEmptyValueWithFormula=!1,data.data.characteristics)for(const characteristic of Object.values(data.data.characteristics))characteristic.value||(characteristic.editable=!0),characteristic.hard=Math.floor(characteristic.value/2),characteristic.extreme=Math.floor(characteristic.value/5),characteristic.value||characteristic.formula?characteristic.display=!0:characteristic.display=!1,!characteristic.value&&characteristic.formula&&(characteristic.hasEmptyValueWithFormula=!0),data.hasEmptyValueWithFormula=data.hasEmptyValueWithFormula||characteristic.hasEmptyValueWithFormula}if(["vehicle","container"].includes(this.actor.data.type))data.data.attribs.hp.auto=!1,data.data.attribs.mp.auto=!1,data.data.attribs.san.auto=!1,data.data.attribs.mov.auto=!1,data.data.attribs.db.auto=!1,data.data.attribs.build.auto=!1;else{const auto=this.actor.checkUndefinedAuto();data.data=mergeObject(data.data,auto)}return data.data.attribs.mov.value=this.actor.mov,data.data.attribs.db.value=this.actor.db,data.data.attribs.build.value=this.actor.build,void 0===this.actor.compendium&&this.actor.isOwner&&(this.actor.update({"data.attribs.mov.value":this.actor.mov},{render:!1}),this.actor.update({"data.attribs.mov.max":this.actor.mov},{render:!1}),this.actor.update({"data.attribs.db.value":this.actor.db},{render:!1}),this.actor.update({"data.attribs.build.current":this.actor.build},{render:!1}),this.actor.update({"data.attribs.build.value":this.actor.build},{render:!1})),data.data.attribs.mp.value<0&&(data.data.attribs.mp.value=null),data.data.attribs.san.value<0&&(data.data.attribs.san.value=null),data.data.attribs.hp.auto&&null!=data.data.characteristics.con.value&&null!=data.data.characteristics.con.value&&(data.data.attribs.hp.max=this.actor.hpMax),data.data.attribs.mp.auto&&null!=data.data.characteristics.pow.value&&(data.data.attribs.mp.max=Math.floor(data.data.characteristics.pow.value/5)),data.data.attribs.san.auto&&(data.data.attribs.san.max=this.actor.sanMax),(data.data.attribs.mp.value>data.data.attribs.mp.max||null==data.data.attribs.mp.max)&&(data.data.attribs.mp.value=data.data.attribs.mp.max),(data.data.attribs.hp.value>data.data.attribs.hp.max||null==data.data.attribs.hp.max)&&(data.data.attribs.hp.value=data.data.attribs.hp.max),null==data.data.attribs.hp.value&&null!=data.data.attribs.hp.max&&(data.data.attribs.hp.value=data.data.attribs.hp.max),null==data.data.attribs.mp.value&&null!=data.data.attribs.mp.max&&(data.data.attribs.mp.value=data.data.attribs.mp.max),["vehicle"].includes(this.actor.data.type)||(null==data.data.attribs.san.value&&null!=data.data.characteristics.pow.value&&(data.data.attribs.san.value=data.data.characteristics.pow.value),data.data.attribs.san.value>data.data.attribs.san.max&&(data.data.attribs.san.value=data.data.attribs.san.max),data.data.biography instanceof Array&&data.data.biography.length&&(data.data.biography[0].isFirst=!0,data.data.biography[data.data.biography.length-1].isLast=!0),data.data.indefiniteInsanityLevel={},data.data.indefiniteInsanityLevel.value=data.data.attribs.san.dailyLoss?data.data.attribs.san.dailyLoss:0,data.data.indefiniteInsanityLevel.max=Math.floor(data.data.attribs.san.value/5)),data.showInventoryItems=!1,data.showInventoryBooks=!1,data.showInventorySpells=!1,data.showInventoryTalents=!1,data.showInventoryStatuses=!1,data.showInventoryWeapons=!1,data}static parseFormula(formula){let parsedFormula=formula;for(const[key,value]of Object.entries(COC7.formula.actorsheet))parsedFormula=parsedFormula.replace(key,value);return parsedFormula}get tokenKey(){throw ui.notifications.error("DEPRECATED SHOULD NOT HAPPEN!"),new Error("base.js get tokenKey(): DEPRECATED SHOULD NOT HAPPEN!")}onCloseSheet(){}activateListeners(html){if(super.activateListeners(html),this.actor.isOwner&&void 0===this.actor.compendium){html.find(".characteristic-label").on("dragstart",(event=>this._onDragCharacteristic(event))),html.find(".attribute-label").on("dragstart",(event=>this._onDragAttribute(event))),html.find(".san-check").on("dragstart",(event=>this._onDragSanCheck(event))),html.find(".characteristic-label").contextmenu(this._onOpposedRoll.bind(this)),html.find(".skill-name.rollable").contextmenu(this._onOpposedRoll.bind(this)),html.find(".attribute-label.rollable").contextmenu(this._onOpposedRoll.bind(this)),html.find(".weapon-name.rollable").contextmenu(this._onOpposedRoll.bind(this)),html.find(".characteristic-label").click(this._onRollCharacteriticTest.bind(this)),html.find(".skill-name.rollable").click(this._onRollSkillTest.bind(this)),html.find(".skill-image").click(this._onRollSkillTest.bind(this)),html.find(".attribute-label.rollable").click(this._onRollAttribTest.bind(this)),html.find(".lock").click(this._onLockClicked.bind(this)),html.find(".flag").click(this._onFlagClicked.bind(this)),html.find(".formula").click(this._onFormulaClicked.bind(this)),html.find(".roll-characteritics").click(this._onRollCharacteriticsValue.bind(this)),html.find(".average-characteritics").click(this._onAverageCharacteriticsValue.bind(this)),html.find(".toggle-switch").click(this._onToggle.bind(this)),html.find(".auto-toggle").click(this._onAutoToggle.bind(this)),(game.user.isGM||game.settings.get("CoC7","statusPlayerEditable"))&&(html.find(".reset-counter").click(this._onResetCounter.bind(this)),html.find(".status-monitor").click(this._onStatusToggle.bind(this)),html.find(".is-dying").click(this.heal.bind(this)),html.find(".is-dead").click(this.revive.bind(this))),html.find(".dying-check").click(this.checkForDeath.bind(this)),html.find(".item .item-image").click((event=>this._onItemRoll(event))),html.find(".weapon-name.rollable").click((event=>this._onWeaponRoll(event))),html.find(".weapon-skill.rollable").click((async event=>this._onWeaponSkillRoll(event))),html.find(".reload-weapon").click((event=>this._onReloadWeapon(event))),html.find(".reload-weapon").on("contextmenu",(event=>this._onReloadWeapon(event))),html.find(".add-ammo").click(this._onAddAmo.bind(this)),html.find(".read-only").dblclick(this._toggleReadOnly.bind(this)),html.on("click",".weapon-damage",this._onWeaponDamage.bind(this)),html.find(".inventory-header").click(this._onInventoryHeader.bind(this)),html.find(".section-header").click(this._onSectionHeader.bind(this));const wheelInputs=html.find(".attribute-value");for(const wheelInput of wheelInputs)wheelInput.addEventListener("wheel",(event=>this._onWheel(event)),{passive:!0})}this.options.editable&&(html.find(".show-detail").click((event=>this._onItemSummary(event))),html.find(".item-popup").click(this._onItemPopup.bind(this)),html.find(".show-detail").dblclick((event=>this._onRenderItemSheet(event))),html.find(".item-edit").click((event=>this._onRenderItemSheet(event))),html.find(".item-delete").click((async ev=>{const li=$(ev.currentTarget).parents(".item"),itemToDelete=this.actor.items.get(li.data("itemId"),{strict:!0});await itemToDelete.delete(),li.slideUp(200,(()=>this.render(!1)))})),html.find(".add-item").click((ev=>{switch(ev.currentTarget.dataset.type){case"book":this.actor.createEmptyBook(ev);break;case"item":this.actor.createEmptyItem(ev);break;case"skill":this.actor.createEmptySkill(ev);break;case"spell":this.actor.createEmptySpell(ev);break;case"weapon":this.actor.createEmptyWeapon(ev)}})),html.find(".item-trade").click(this._onTradeItem.bind(this)),html.find(".add-new-section").click((()=>{this.actor.createBioSection()})),html.find(".delete-section").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.deleteBioSection(index)})),html.find(".move-section-up").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.moveBioSectionUp(index)})),html.find(".move-section-down").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.moveBioSectionDown(index)})),html.find(".development-flag").dblclick((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("developement")})),html.find(".occupation-skill-flag.clickable").click((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("occupation")})),html.find(".archetype-skill-flag.clickable").click((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("archetype")})),html.find(".skill-developement").click((event=>{this.actor.developementPhase(event.shiftKey)})),html.find(".luck-development").click((event=>{event.detail&&1!==event.detail||this.actor.developLuck(event.shiftKey)})),html.find("a.coc7-link").on("click",(event=>CoC7Parser._onCheck(event))),html.find("a.coc7-link").on("dragstart",(event=>CoC7Parser._onDragCoC7Link(event))),html.find(".test-trigger").click((async event=>{await OpposedCheckCard.dispatch({type:OpposedCheckCard.defaultConfig.type,combat:!1,action:"new",roll:{characteristic:"str",actor:this.actor.actorKey}}),await OpposedCheckCard.dispatch({type:OpposedCheckCard.defaultConfig.type,combat:!1,action:"new",roll:{characteristic:"con"}}),event.shiftKey&&ui.notifications.info("Shift cliecked")})),html.find(".skill-name.rollable").mouseenter(this.toolTipSkillEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".characteristic-label").mouseenter(this.toolTipCharacteristicEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".attribute-label.rollable").mouseenter(this.toolTipAttributeEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".auto-toggle").mouseenter(this.toolTipAutoEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".item-control.development-flag").mouseenter(this.toolTipFlagForDevelopment.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)))}toolTipSkillEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover){const item=game.CoC7Tooltips.ToolTipHover.closest(".item");if(void 0!==item){const skillId=item.dataset.skillId,skill=sheet.actor.items.get(skillId);let toolTip=game.i18n.format("CoC7.ToolTipSkill",{skill:skill.sName,regular:skill.value,hard:Math.floor(skill.value/2),extreme:Math.floor(skill.value/5)});game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):""})),game.CoC7Tooltips.displayToolTip(toolTip)}}}),delay)}}toolTipCharacteristicEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover){const char=game.CoC7Tooltips.ToolTipHover.closest(".char-box");if(void 0!==char){const charId=char.dataset.characteristic,characteristic=sheet.actor.characteristics[charId];let toolTip=game.i18n.format("CoC7.ToolTipSkill",{skill:characteristic.label,regular:characteristic.value,hard:characteristic.hard,extreme:characteristic.extreme});game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):""})),game.CoC7Tooltips.displayToolTip(toolTip)}}}),delay)}}toolTipAttributeEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover){const attrib=game.CoC7Tooltips.ToolTipHover.closest(".attribute");if(void 0!==attrib){const attributeId=attrib.dataset.attrib;let toolTip="";const attributes=sheet.actor.data.data.attribs[attributeId];switch(attributeId){case"lck":toolTip=game.i18n.format("CoC7.ToolTipSkill",{skill:attributes.label,regular:attributes.value,hard:Math.floor(attributes.value/2),extreme:Math.floor(attributes.value/5)}),game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):""})),game.CoC7Tooltips.displayToolTip(toolTip);break;case"db":toolTip=game.i18n.localize("CoC7.ToolTipDB"),game.CoC7Tooltips.displayToolTip(toolTip);break;case"san":toolTip=game.i18n.format("CoC7.ToolTipSkill",{skill:"Sanity",regular:attributes.value,hard:Math.floor(attributes.value/2),extreme:Math.floor(attributes.value/5)}),game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.i18n.localize("CoC7.ToolTipKeeperSanity")+(game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):"")})),game.CoC7Tooltips.displayToolTip(toolTip)}}}}),delay)}}toolTipAutoEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));delay>0&&(game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover){const toolTip=game.i18n.localize("CoC7.ToolTipAutoToggle");game.CoC7Tooltips.displayToolTip(toolTip)}}),delay))}toolTipFlagForDevelopment(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover){const item=game.CoC7Tooltips.ToolTipHover.closest(".item");if(void 0!==item){const skillId=item.dataset.skillId,skill=sheet.actor.items.get(skillId),toolTip=game.i18n.format("CoC7.ToolTipSkillFlagToggle",{status:game.i18n.localize(skill.data.data.flags.developement?"CoC7.ToolTipSkillFlagged":"CoC7.ToolTipSkillUnflagged")});game.CoC7Tooltips.displayToolTip(toolTip)}}}),delay)}}_onRenderItemSheet(event){const li=$(event.currentTarget).parents(".item");this.actor.items.get(li.data("itemId")).sheet.render(!0)}async _onTradeItem(event){const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("itemId"));let content="<p>"+game.i18n.localize("CoC7.MessageSelectUserToGiveTo");const message={actorFrom:this.actor.id,scene:null,actorTo:this.actor.id,item:item.id};this.token?.actor&&(message.actorFrom=this.token.id,message.scene=this.token.parent.id);const actors=game.actors.filter((e=>{if(!["character","npc","creature","container"].includes(e.type))return!1;if(this.actor.id===e.id)return!1;let visible=!1;for(const[k,v]of Object.entries(e.data.permission))"default"!==k&&k!==game.user.id||(visible=visible||v!==CONST.ENTITY_PERMISSIONS.NONE);return visible}));content+='<form id="selectform"><select name="user">';for(const actor of actors)content=content+'<option value="'+actor.id+'">'+actor.name+"</option>";content+="</select></form></p>",message.actorTo=await new Promise((resolve=>{new Dialog({title:game.i18n.localize("CoC7.MessageTitleSelectUserToGiveTo"),content,buttons:{confirm:{label:game.i18n.localize("CoC7.Validate"),callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)if("user"===name)return resolve(value)}}},default:"confirm",close:()=>{}}).render(!0)})),await game.CoC7socket.executeAsGM("gmtradeitemto",message)}_onDragCharacteristic(event){const box=event.currentTarget.parentElement,data={CoC7Type:"link",linkType:"coc7-link",check:"check",type:"characteristic",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,name:box.dataset.characteristic,icon:null};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}_onDragAttribute(event){const box=event.currentTarget.parentElement,data={CoC7Type:"link",linkType:"coc7-link",check:"check",type:"attribute",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,name:box.dataset.attrib,icon:null};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}_onDragSanCheck(event){const sanMin=event.currentTarget.querySelector(".san-value.pass"),sanMax=event.currentTarget.querySelector(".san-value.failed"),data={CoC7Type:"link",linkType:"coc7-link",check:"sanloss",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,sanMin:sanMin.innerText,sanMax:sanMax.innerText,icon:null};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}async _onDrop(event){await super._onDrop(event)}async _onStatusToggle(event){event.preventDefault(),event.currentTarget.dataset.status?await this.actor.toggleStatus(event.currentTarget.dataset.status):event.currentTarget.dataset.effect&&await this.actor.toggleEffect(event.currentTarget.dataset.effect)}async revive(){game.user.isGM&&this.actor.unsetStatus(COC7.status.dead)}async heal(){game.user.isGM&&this.actor.unsetStatus(COC7.status.dying)}async checkForDeath(event){const conCheck=new CoC7ConCheck(this.actor.isToken?this.actor.tokenKey:this.actor.id);conCheck.stayAlive=!0,conCheck.toMessage(event.shiftKey)}async _onResetCounter(event){event.preventDefault();const counter=event.currentTarget.dataset.counter,oneFifthSanity=" / "+Math.floor(this.actor.data.data.attribs.san.value/5);this.actor.setOneFifthSanity(oneFifthSanity),counter&&this.actor.resetCounter(counter)}async _onAutoToggle(event){if(event.currentTarget.closest(".attribute")){const attrib=event.currentTarget.closest(".attribute").dataset.attrib;this.actor.toggleAttribAuto(attrib)}}async _onToggle(event){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);weapon&&weapon.toggleProperty(event.currentTarget.dataset.property,event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode)}async _onRollCharacteriticsValue(){await this.actor.rollCharacteristicsValue()}async _onAverageCharacteriticsValue(){this.actor.averageCharacteristicsValue()}async _onLockClicked(event){event.preventDefault();const isLocked=this.actor.locked;this.actor.locked=!isLocked,Hooks.call("actorLockClickedCoC7",[!isLocked])}async _onFlagClicked(event){event.preventDefault();const flagName=event.currentTarget.dataset.flag;this.actor.toggleActorFlag(flagName)}async _onFormulaClicked(event){event.preventDefault(),this.actor.toggleActorFlag("displayFormula")}async _onWheel(event){let value=parseInt(event.currentTarget.value);switch(event.deltaY>0&&(value=0===value?0:value-1),event.deltaY<0&&(value+=1),event.currentTarget.name){case"data.attribs.hp.value":this.actor.setHp(value);break;case"data.attribs.mp.value":this.actor.setMp(value);break;case"data.attribs.san.value":this.actor.setSan(value);break;case"data.attribs.lck.value":this.actor.setLuck(value);break;case"data.attribs.build.current":this.actor.setHp(value)}}_toggleReadOnly(event){event.currentTarget.readOnly=!event.currentTarget.readOnly,event.currentTarget.classList.toggle("read-only")}_onItemSummary(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id")),chatData=item.getChatData({secrets:this.actor.isOwner});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$('<div class="item-summary"></div>'),labels=$('<div class="item-labels"></div>');for(const p of chatData.labels)labels.append(`<div class="item-label"><span class="label-name">${p.name} :</span><span class="label-value">${p.value}</span></div>`);if(div.append(labels),div.append($(`<div class="item-description">${chatData.description.value}</div>`)),item.data.data.properties?.spcl){const specialDiv=$(`<div class="item-special">${chatData.description.special}</div>`);div.append(specialDiv)}const props=$('<div class="item-properties"></div>');for(const p of chatData.properties)props.append(`<div class="tag item-property">${game.i18n.localize(p)}</div>`);div.append(props),li.append(div.hide()),CoC7Parser.bindEventsHandler(div),div.slideDown(200)}li.toggleClass("expanded")}_onSectionHeader(event){event.preventDefault();const section=event.currentTarget.closest("section"),pannelClass=event.currentTarget.dataset.pannel,pannel=$(section).find(`.pannel.${pannelClass}`);pannel.hasClass("expanded")?pannel.slideUp(200):pannel.slideDown(200),pannel.toggleClass("expanded")}_onInventoryHeader(event){event.preventDefault(),$(event.currentTarget).siblings("li").toggle()}async _onItemPopup(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id"));CoC7ActorSheet.popupSkill(item)}static async popupSkill(skill){skill.data.data.description.enrichedValue=TextEditor.enrichHTML(skill.data.data.description.value);new Dialog({title:game.i18n.localize("CoC7.SkillDetailsWindow"),content:skill,buttons:{},close:()=>{}},{classes:["coc7","sheet","skill"],width:520,height:480,scrollY:[".item-description"],template:"systems/CoC7/templates/apps/skill-details.html"}).render(!0)}async _onItemRoll(event){event.preventDefault()}async _onWeaponRoll(event){event.preventDefault();const itemId=event.currentTarget.closest("li").dataset.itemId,fastForward=event.shiftKey,weapon=this.actor.items.get(itemId);let actorKey;if(actorKey=this.token?this.actor.isToken&&game.actors.tokens[this.token.id]?`TOKEN.${this.token.id}`:`${this.token.parent.id}.${this.token.id}`:this.actor.id,isCtrlKey(event)&&game.user.isGM){const linkData={check:"item",type:"weapon",name:weapon.name,hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey};CoC7LinkCreationDialog.fromLinkData(linkData).then((dlg=>dlg.render(!0)))}else{let proceedWithoutTarget;if(game.user.targets.size<=0&&(proceedWithoutTarget=await new Promise((resolve=>{const data={title:" ",content:game.i18n.format("CoC7.NoTargetSelected",{weapon:weapon.name}),buttons:{cancel:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>resolve(!1)},proceed:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>resolve(!0)}},default:"cancel",classes:["coc7","dialog"]};new Dialog(data).render(!0)}))),game.user.targets.size>0||proceedWithoutTarget){if(!weapon.data.data.properties.rngd){game.user.targets.size>1&&ui.notifications.warn(game.i18n.localize("CoC7.WarnTooManyTarget"));new CoC7MeleeInitiator(actorKey,itemId,fastForward).createChatCard()}if(weapon.data.data.properties.rngd){new CoC7RangeInitiator(actorKey,itemId,fastForward).createChatCard()}}}}async _onReloadWeapon(event){const itemId=event.currentTarget.closest(".item")?event.currentTarget.closest(".item").dataset.itemId:null;if(!itemId)return;const weapon=this.actor.items.get(itemId);0===event.button?event.shiftKey?await weapon.reload():await weapon.addBullet():2===event.button&&(event.shiftKey?await weapon.setBullets(0):await weapon.shootBullets(1))}async _onAddAmo(event){const itemId=event.currentTarget.closest(".item")?event.currentTarget.closest(".item").dataset.itemId:null;if(!itemId)return;const weapon=this.actor.items.get(itemId);await weapon.addBullet()}async _onWeaponSkillRoll(event){event.preventDefault();const skillId=event.currentTarget.dataset.skillId,actorId=event.currentTarget.closest("form").dataset.actorId,tokenKey=event.currentTarget.closest("form").dataset.tokenId,itemId=event.currentTarget.closest("li")?event.currentTarget.closest("li").dataset.itemId:null,check=new CoC7Check;if(!event.shiftKey){const usage=await RollDialog.create();usage&&(check.diceModifier=usage.get("bonusDice"),check.difficulty=usage.get("difficulty"),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=tokenKey||actorId,check.skill=skillId,check.item=itemId,await check.roll(),check.toMessage()}async _onWeaponDamage(event){event.preventDefault();const itemId=event.currentTarget.closest(".weapon").dataset.itemId,range=event.currentTarget.closest(".weapon-damage").dataset.range,damageChatCard=new DamageCard({fastForward:event.shiftKey,range});damageChatCard.actorKey=this.actor.tokenKey,damageChatCard.itemId=itemId,damageChatCard.updateChatCard()}async _onOpposedRoll(event){if(event.preventDefault(),event.altKey){const data={type:CombinedCheckCard.defaultConfig.type,action:"new"},roll=new CoC7Check;if(roll.actor=event.currentTarget.closest("form").dataset.tokenId||event.currentTarget.closest("form").dataset.actorId,roll.characteristic=event.currentTarget.parentElement.dataset.characteristic,roll.attribute=event.currentTarget.parentElement.dataset.attrib,roll.skillId=event.currentTarget.closest(".item")?.dataset.skillId,roll.rollMode=game.settings.get("core","rollMode"),roll.initiator=game.user.id,"db"===roll.attrib)return;data.roll=roll.JSONRollData,CombinedCheckCard.dispatch(data)}else{const data={type:OpposedCheckCard.defaultConfig.type,combat:event.currentTarget.classList?.contains("combat"),action:"new"},roll=new CoC7Check;if(roll.actor=event.currentTarget.closest("form").dataset.tokenId||event.currentTarget.closest("form").dataset.actorId,roll.characteristic=event.currentTarget.parentElement.dataset.characteristic,roll.attribute=event.currentTarget.parentElement.dataset.attrib,roll.item=event.currentTarget.closest(".item")?.dataset.itemId,roll.weaponAltSkill=event.currentTarget.classList.contains("alternativ-skill"),roll.skillId=event.currentTarget.closest(".item")?.dataset.skillId,roll.rollMode=game.settings.get("core","rollMode"),roll.initiator=game.user.id,"db"===roll.attrib)return;if(!event.shiftKey){const usage=await RollDialog.create({disableFlatThresholdModifier:event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode,disableFlatDiceModifier:event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode});usage&&(roll.diceModifier=Number(usage.get("bonusDice")),roll.difficulty=Number(usage.get("difficulty")),roll.flatDiceModifier=Number(usage.get("flatDiceModifier")),roll.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}roll.denyPush=!0,await roll._perform(),data.roll=roll.JSONRollData,OpposedCheckCard.dispatch(data)}}async _onRollCharacteriticTest(event){event.preventDefault();const actorId=event.currentTarget.closest("form").dataset.actorId,tokenKey=event.currentTarget.closest("form").dataset.tokenId,characteristic=event.currentTarget.parentElement.dataset.characteristic;if(isCtrlKey(event)&&game.user.isGM){const linkData={check:"check",type:"characteristic",name:characteristic,hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,forceModifiers:event.shiftKey};return"blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0),void CoC7LinkCreationDialog.fromLinkData(linkData).then((dlg=>dlg.render(!0)))}let difficulty,modifier,flatDiceModifier,flatThresholdModifier;if(!event.shiftKey){const usage=await RollDialog.create({disableFlatThresholdModifier:event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode,disableFlatDiceModifier:event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode});usage&&(modifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")),flatDiceModifier=Number(usage.get("flatDiceModifier")),flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}const check=new CoC7Check;"undefined"!==modifier&&(check.diceModifier=modifier),void 0!==difficulty&&(check.difficulty=difficulty),check.actor=tokenKey||actorId,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,check.standby=game.settings.get("CoC7","stanbyGMRolls")&&game.user.isGM&&this.actor.hasPlayerOwner,await check.rollCharacteristic(characteristic),check.toMessage()}async _onRollAttribTest(event){event.preventDefault();const attrib=event.currentTarget.parentElement.dataset.attrib;if(isCtrlKey(event)&&game.user.isGM&&["lck","san"].includes(attrib)){const linkData=event.altKey?{check:"sanloss",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,forceModifiers:event.shiftKey}:{check:"check",type:"attribute",name:attrib,hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,forceModifiers:event.shiftKey};return"blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0),void CoC7LinkCreationDialog.fromLinkData(linkData).then((dlg=>dlg.render(!0)))}if("db"===attrib){if(!/^-{0,1}\d+$/.test(event.currentTarget.parentElement.dataset.rollFormula)){const r=new Roll(event.currentTarget.parentElement.dataset.rollFormula);await r.roll({async:!0}),isNaN(r.total)||void 0===r.total||r.toMessage({speaker:ChatMessage.getSpeaker(),flavor:game.i18n.localize("CoC7.BonusDamageRoll")})}return}if("lck"===attrib&&!this.actor.data.data.attribs.lck.value)return;const actorId=event.currentTarget.closest("form").dataset.actorId,tokenKey=event.currentTarget.closest("form").dataset.tokenId;let difficulty,modifier,flatDiceModifier,flatThresholdModifier,sanMin,sanMax;if(!event.shiftKey){const usage=await RollDialog.create({disableFlatThresholdModifier:!1,disableFlatDiceModifier:!1});usage&&(modifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")),flatDiceModifier=Number(usage.get("flatDiceModifier")),flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}if(event.altKey&&"san"===attrib){const sanData=await SanDataDialog.create({promptLabel:!1});sanData&&(sanMin=sanData.get("sanMin")||0,sanMax=sanData.get("sanMax")||0,isNaN(Number(sanMin))||(sanMin=Number(sanMin)),isNaN(Number(sanMax))||(sanMax=Number(sanMax)))}if(void 0!==sanMin&&void 0!==sanMax)SanCheckCard.create(this.actor.actorKey,{sanMin,sanMax},{sanModifier:modifier,sanDifficulty:difficulty,fastForward:event.shiftKey});else{const check=new CoC7Check;void 0!==modifier&&(check.diceModifier=modifier),void 0!==difficulty&&(check.difficulty=difficulty),check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,check.actor=tokenKey||actorId,check.standby=game.settings.get("CoC7","stanbyGMRolls")&&game.user.isGM&&this.actor.hasPlayerOwner,await check.rollAttribute(attrib),check.toMessage()}}async _onRollSkillTest(event){if(event.currentTarget.classList.contains("flagged4dev"))return;event.preventDefault();const skillId=event.currentTarget.closest(".item").dataset.skillId,actorId=event.currentTarget.closest("form").dataset.actorId,tokenKey=event.currentTarget.closest("form").dataset.tokenId;if(isCtrlKey(event)&&game.user.isGM){const name=this.actor.items.get(skillId)?.name;if(!name)return;const linkData={check:"check",type:"skill",name,hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,forceModifiers:event.shiftKey};return"blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0),void CoC7LinkCreationDialog.fromLinkData(linkData).then((dlg=>dlg.render(!0)))}let difficulty,modifier,flatDiceModifier,flatThresholdModifier;if(!event.shiftKey){const usage=await RollDialog.create({disableFlatThresholdModifier:!1,disableFlatDiceModifier:!1});usage&&(modifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")),flatDiceModifier=Number(usage.get("flatDiceModifier")),flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}const check=new CoC7Check;void 0!==modifier&&(check.diceModifier=modifier),void 0!==difficulty&&(check.difficulty=difficulty),check.actor=tokenKey||actorId,check.skill=skillId,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,check.standby=game.settings.get("CoC7","stanbyGMRolls")&&game.user.isGM&&this.actor.hasPlayerOwner,await check.roll(),check.toMessage()}async _updateObject(event,formData){if(event.currentTarget&&event.currentTarget.classList){if(event.currentTarget.classList.contains("skill-adjustment")){const item=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);if(item){const value=event.currentTarget.value?parseInt(event.currentTarget.value):null;if(event.currentTarget.value?isNaN(value)||await item.update({[event.currentTarget.name]:value}):await item.update({[event.currentTarget.name]:null}),game.i18n.localize(COC7.creditRatingSkillName)===item.name){const creditValue=(item.value||0)-(item.data.data.adjustments?.experience||0);(creditValue>Number(this.actor.occupation.data.data.creditRating.max)||creditValue<Number(this.actor.occupation.data.data.creditRating.min))&&ui.notifications.warn(game.i18n.format("CoC7.CreditOutOfRange",{min:Number(this.actor.occupation.data.data.creditRating.min),max:Number(this.actor.occupation.data.data.creditRating.max)}))}}}if(event.currentTarget.classList.contains("attribute-value")&&"data.attribs.san.value"===event.currentTarget.name)return void this.actor.setSan(parseInt(event.currentTarget.value));if(event.currentTarget.classList.contains("text-area"))return void this.actor.updateTextArea(event.currentTarget);if(event.currentTarget.classList.contains("bio-section-value")){const index=parseInt(event.currentTarget.closest(".bio-section").dataset.index);await this.actor.updateBioValue(index,event.currentTarget.value)}if(event.currentTarget.classList.contains("bio-section-title")){const index=parseInt(event.currentTarget.closest(".bio-section").dataset.index);this.actor.updateBioTitle(index,event.currentTarget.value)}if(event.currentTarget.classList.contains("npc-skill-score")){const skill=this.actor.items.get(event.currentTarget.closest(".item").dataset.skillId);skill&&await skill.updateValue(event.currentTarget.value)}if(event.currentTarget.classList.contains("skill-name")||event.currentTarget.classList.contains("item-name")){const item=this.actor.items.get(event.currentTarget.closest(".item").dataset.skillId);item&&await item.update({name:event.currentTarget.value})}if(event.currentTarget.classList.contains("characteristic-formula")&&0!==event.currentTarget.value.length){const r=new Roll(event.currentTarget.value);await r.roll({async:!0}),(isNaN(r.total)||void 0===r.total)&&(ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:event.currentTarget.value})),formData[event.currentTarget.name]=game.i18n.format("CoC7.ErrorInvalid"))}if(event.currentTarget.classList.contains("attribute-value")&&0!==event.currentTarget.value.length&&"db"===event.currentTarget.closest(".attribute").dataset.attrib){const r=new Roll(event.currentTarget.value);await r.roll({async:!0}),(isNaN(r.total)||void 0===r.total)&&(ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:event.currentTarget.value})),formData[event.currentTarget.name]=game.i18n.format("CoC7.ErrorInvalid"))}if(event.currentTarget.classList.contains("weapon-skill")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId),skill=this.actor.items.get(event.currentTarget.options[event.currentTarget.selectedIndex].value);if(weapon&&skill)switch(event.currentTarget.dataset.skill){case"main":await weapon.update({"data.skill.main.id":skill.id,"data.skill.main.name":skill.name});break;case"alternativ":await weapon.update({"data.skill.alternativ.id":skill.id,"data.skill.alternativ.name":skill.name})}}if(event.currentTarget.classList.contains("weapon-name")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);weapon&&await weapon.update({name:event.currentTarget.value})}if(event.currentTarget.classList.contains("damage-formula")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);if(weapon)if(0!==event.currentTarget.value.length){const r=new Roll(event.currentTarget.value);if(await r.roll({async:!0}),isNaN(r.total)||void 0===r.total)ui.notifications.error(event.currentTarget.value+" is not a valid formula");else switch(event.currentTarget.dataset.range){case"normal":await weapon.update({"data.range.normal.damage":event.currentTarget.value});break;case"long":await weapon.update({"data.range.long.damage":event.currentTarget.value});break;case"extreme":await weapon.update({"data.range.extreme.damage":event.currentTarget.value})}}else switch(event.currentTarget.dataset.range){case"normal":await weapon.update({"data.range.normal.damage":null});break;case"long":await weapon.update({"data.range.long.damage":null});break;case"extreme":await weapon.update({"data.range.extreme.damage":null})}}}return this.object.update(formData)}}class CoC7NPCSheet extends CoC7ActorSheet{async getData(){const data=await super.getData();return data.allowFormula=!0,data.displayFormula=this.actor.getActorFlag("displayFormula"),void 0===data.displayFormula&&(data.displayFormula=!1),data.hasSan=null!==data.data.attribs.san.value,data.hasMp=null!==data.data.attribs.mp.value,data.hasLuck=null!==data.data.attribs.lck.value,data.isCreature=!1,data.showInventoryItems=Object.prototype.hasOwnProperty.call(data.itemsByType,"item")||!data.data.flags.locked,data.showInventoryBooks=Object.prototype.hasOwnProperty.call(data.itemsByType,"book")||!data.data.flags.locked,data.showInventorySpells=Object.prototype.hasOwnProperty.call(data.itemsByType,"spell")||!data.data.flags.locked,data.showInventoryTalents=Object.prototype.hasOwnProperty.call(data.itemsByType,"talent")||!data.data.flags.locked,data.showInventoryStatuses=Object.prototype.hasOwnProperty.call(data.itemsByType,"status")||!data.data.flags.locked,data.showInventoryWeapons=!1,data.hasInventory=data.showInventoryItems||data.showInventoryBooks||data.showInventorySpells||data.showInventoryTalents||data.showInventoryStatuses||data.showInventoryWeapons,data}activateListeners(html){super.activateListeners(html),html.find(".roll-san").click(this._onSanCheck.bind(this)),this.actor.isOwner&&html.find('[name="data.attribs.hp.value"]').change((event=>this.actor.setHealthStatusManually(event)))}async _onSanCheck(event){if(event.preventDefault(),this.actor.data.data.special.sanLoss.checkPassed||this.actor.data.data.special.sanLoss.checkFailled)if((event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode)&&game.user.isGM){let difficulty,modifier;if(!event.shiftKey){const usage=await RollDialog.create({disableFlatDiceModifier:!0});usage&&(modifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")))}const linkData={check:"sanloss",sanMin:this.actor.data.data.special.sanLoss.checkPassed,sanMax:this.actor.data.data.special.sanLoss.checkFailled};"blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0),void 0!==modifier&&(linkData.modifier=modifier),void 0!==difficulty&&(linkData.difficulty=difficulty);const link=CoC7Parser.createCoC7Link(linkData);link&&chatHelper.createMessage(null,game.i18n.format("CoC7.MessageCheckRequestedWait",{check:link}))}else SanCheckCard.checkTargets(this.actor.tokenKey,event.shiftKey)}onCloseSheet(){this.actor.unsetActorFlag("displayFormula"),super.onCloseSheet()}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","npc"],dragDrop:[{dragSelector:".item",dropSelector:null}],template:"systems/CoC7/templates/actors/npc-sheet.html",width:580,resizable:!0})}async _updateObject(event,formData){if(!(event.currentTarget&&event.currentTarget.classList&&event.currentTarget.classList.contains("characteristic-score")))return super._updateObject(event,formData);this.actor.setCharacteristic(event.currentTarget.name,event.currentTarget.value)}static forceAuto(app,html){const cell=html.find(".pannel.expanded.resizededitor");cell.length&&cell.height(Math.max(200,(html.height()-cell.position().top-8)/cell.length)+"px")}setPosition(a){super.setPosition(a),CoC7NPCSheet.forceAuto(a,this._element)}}class CoC7CreatureSheet extends CoC7NPCSheet{async getData(){const data=await super.getData();return data.isCreature=!0,data}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","npc","creature"]})}}class CoC7CharacterSheetV2 extends CoC7ActorSheet{_getHeaderButtons(){if("CoC7CharacterSheetV2"===this.constructor.name){this.summarized||(this.summarized=!1);let buttons=super._getHeaderButtons();return buttons=[{label:this.summarized?game.i18n.localize("CoC7.Maximize"):game.i18n.localize("CoC7.Summarize"),class:"test-extra-icon",icon:this.summarized?"fas fa-window-maximize":"fas fa-window-minimize",onclick:event=>this.toggleSheetMode(event)}].concat(buttons),buttons}return super._getHeaderButtons()}async toggleSheetMode(event){this.summarized=!this.summarized,await this.close();const options=this.summarized?{classes:["coc7","actor","character","summarized"],height:200,resizable:!1,width:700}:CoC7CharacterSheetV2.defaultOptions;await this.render(!0,options)}async getData(){const data=await super.getData();if(void 0===this.actor.getFlag("CoC7","skillListMode")&&await this.actor.setFlag("CoC7","skillListMode",!1),data.skillListModeValue=this.actor.getFlag("CoC7","skillListMode"),void 0===this.actor.getFlag("CoC7","skillShowUncommon")&&await this.actor.setFlag("CoC7","skillShowUncommon",!0),data.skillShowUncommon=this.actor.getFlag("CoC7","skillShowUncommon"),data.showIconsOnly=game.settings.get("CoC7","showIconsOnly"),this.actor.occupation?(data.data.infos.occupation=this.actor.occupation.name,data.data.infos.occupationSet=!0):data.data.infos.occupationSet=!1,this.actor.archetype?(data.data.infos.archetype=this.actor.archetype.name,data.data.infos.archetypeSet=!0):data.data.infos.archetypeSet=!1,data.totalExperience=this.actor.experiencePoints,data.totalOccupation=this.actor.occupationPointsSpent,data.invalidOccupationPoints=Number(this.actor.occupationPointsSpent)!==Number(this.actor.data.data.development?.occupation),data.totalArchetype=this.actor.archetypePointsSpent,data.invalidArchetypePoints=Number(this.actor.archetypePointsSpent)!==Number(this.actor.data.data.development?.archetype),data.totalPersonal=this.actor.personalPointsSpent,data.invalidPersonalPoints=Number(this.actor.personalPointsSpent)!==Number(this.actor.data.data.development?.personal),data.creditRatingMax=Number(this.actor.occupation?.data.data.creditRating.max),data.creditRatingMin=Number(this.actor.occupation?.data.data.creditRating.min),data.invalidCreditRating=this.actor.creditRatingSkill?.data.data.adjustments?.occupation>data.creditRatingMax||this.actor.creditRatingSkill?.data.data.adjustments?.occupation<data.creditRatingMin,data.pulpTalentCount=data.itemsByType.talent?.length?data.itemsByType.talent?.length:0,data.minPulpTalents=this.actor.archetype?.data.data.talents?this.actor.archetype?.data.data.talents:0,data.invalidPulpTalents=data.pulpTalentCount<data.minPulpTalents,data.hasSkillFlaggedForExp=this.actor.hasSkillFlaggedForExp,data.allowDevelopment=game.settings.get("CoC7","developmentEnabled"),data.allowCharCreation=game.settings.get("CoC7","charCreationEnabled"),data.developmentRollForLuck=game.settings.get("CoC7","developmentRollForLuck"),data.showDevPannel=data.allowDevelopment||data.allowCharCreation,data.manualCredit=this.actor.getActorFlag("manualCredit"),!data.manualCredit){let factor,monetarySymbol;data.credit={},data.data.credit?(factor=parseInt(data.data.credit.multiplier)?parseInt(data.data.credit.multiplier):1,monetarySymbol=data.data.credit.monetarySymbol?data.data.credit.monetarySymbol:"$"):(factor=1,monetarySymbol="$"),data.credit.spendingLevel=`${monetarySymbol}${this.actor.spendingLevel*factor}`,data.credit.assets=`${monetarySymbol}${this.actor.assets*factor}`,data.credit.cash=`${monetarySymbol}${this.actor.cash*factor}`}data.oneBlockBackStory=game.settings.get("CoC7","oneBlockBackstory"),data.summarized=this.summarized,data.skillList=[];let previousSpec="";for(const skill of data.skills)!data.skillShowUncommon&&skill.data.properties.rarity||(skill.data.properties.special&&previousSpec!==skill.data.specialization&&(previousSpec=skill.data.specialization,data.skillList.push({isSpecialization:!0,name:skill.data.specialization})),data.skillList.push(skill));if(data.skillsByValue=[...data.skills].sort(((a,b)=>b.data.value-a.data.value)),data.topSkills=[...data.skillsByValue].slice(0,14),data.skillsByValue=data.skillsByValue.filter((skill=>data.skillShowUncommon||!skill.data.properties.rarity)),data.topWeapons=[...data.meleeWpn,...data.rangeWpn].sort(((a,b)=>a.data.skill.main?.value-b.data.skill.main?.value)).reverse().slice(0,3),data.displayPlayerName=game.settings.get("CoC7","displayPlayerNameOnSheet"),data.displayPlayerName&&!data.data.infos.playername){const user=this.actor.characterUser;user&&(data.data.infos.playername=user.name)}return data.skillListEmpty=0===data.skills.length,data.showInventoryItems=Object.prototype.hasOwnProperty.call(data.itemsByType,"item")||!data.data.flags.locked,data.showInventoryBooks=Object.prototype.hasOwnProperty.call(data.itemsByType,"book")||!data.data.flags.locked,data.showInventorySpells=Object.prototype.hasOwnProperty.call(data.itemsByType,"spell")||!data.data.flags.locked,data.showInventoryTalents=Object.prototype.hasOwnProperty.call(data.itemsByType,"talent")||!data.data.flags.locked,data.showInventoryStatuses=Object.prototype.hasOwnProperty.call(data.itemsByType,"status")||!data.data.flags.locked,data.hasInventory=data.showInventoryItems||data.showInventoryBooks||data.showInventorySpells||data.showInventoryTalents||data.showInventoryStatuses||data.showInventoryWeapons,data}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","actor","character"],template:"systems/CoC7/templates/actors/character/index.html",width:687,height:623,resizable:!0,dragDrop:[{dragSelector:".item",dropSelector:null}],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"skills"}]})}activateListeners(html){super.activateListeners(html),this.actor.isOwner&&(html.find(".skill-name.rollable.flagged4dev").click((async event=>this._onSkillDev(event))),html.find(".reset-occupation").click((async()=>await this.actor.resetOccupation())),html.find(".reset-archetype").click((async()=>await this.actor.resetArchetype())),html.find(".open-item").click((event=>this._onItemDetails(event))),html.find('[name="data.attribs.hp.value"]').change((event=>this.actor.setHealthStatusManually(event))),html.find(".toggle-list-mode").click((event=>{this.toggleSkillListMode(event)})),html.find(".toggle-uncommon-mode").click((event=>{this.toggleSkillUncommonMode(event)})))}async toggleSkillListMode(event){return await this.actor.setFlag("CoC7","skillListMode",!this.actor.getFlag("CoC7","skillListMode")),await this.render(!0)}async toggleSkillUncommonMode(event){return await this.actor.setFlag("CoC7","skillShowUncommon",!this.actor.getFlag("CoC7","skillShowUncommon")),await this.render(!0)}async _onSkillDev(event){event.preventDefault();const skillId=event.currentTarget.closest(".item").dataset.itemId;await this.actor.developSkill(skillId,event.shiftKey)}_onItemDetails(event){event.preventDefault();const type=event.currentTarget.dataset.type,item=this.actor[type];item&&item.sheet.render(!0)}static renderSheet(sheet){if(game.settings.get("CoC7","overrideSheetArtwork")){if(game.settings.get("CoC7","artWorkSheetBackground")){if(sheet.element.css("--main-sheet-bg",game.settings.get("CoC7","artWorkSheetBackground")),"slice"!==game.settings.get("CoC7","artWorkSheetBackgroundType")){let styleSheet,cssRuleIndex;for(let i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].href?.endsWith("coc7g.css")){styleSheet=document.styleSheets[i];break}if(styleSheet)for(let i=0;i<styleSheet.rules.length;i++)if(".sheetV2.character form"===styleSheet.rules[i].selectorText){cssRuleIndex=i;break}if(cssRuleIndex){const CSSStyle=styleSheet.rules[cssRuleIndex].style;switch(CSSStyle.removeProperty("border-image"),CSSStyle.setProperty("background",game.settings.get("CoC7","artWorkSheetBackground")),game.settings.get("CoC7","artWorkSheetBackgroundType")){case"auto":CSSStyle.setProperty("background-size","auto");break;case"contain":CSSStyle.setProperty("background-size","contain");break;case"cover":CSSStyle.setProperty("background-size","cover");break;default:CSSStyle.setProperty("background-size","auto")}}}}else"null"===game.settings.get("CoC7","artWorkSheetBackground").toLowerCase()&&sheet.element.css("--main-sheet-bg","url( './assets/images/void.webp')");if(game.settings.get("CoC7","artWorkOtherSheetBackground")?sheet.element.css("--other-sheet-bg",game.settings.get("CoC7","artWorkOtherSheetBackground")):"null"===game.settings.get("CoC7","artWorkOtherSheetBackground").toLowerCase()&&sheet.element.css("--other-sheet-bg","url( './assets/images/void.webp')"),game.settings.get("CoC7","artworkSheetImage")?sheet.element.css("--main-sheet-image",game.settings.get("CoC7","artworkSheetImage")):"null"===game.settings.get("CoC7","artworkSheetImage").toLowerCase()&&sheet.element.css("--main-sheet-image","url( './assets/images/void.webp')"),game.settings.get("CoC7","artworkFrontColor")&&sheet.element.css("--main-sheet-front-color",game.settings.get("CoC7","artworkFrontColor")),game.settings.get("CoC7","artworkBackgroundColor")&&sheet.element.css("--main-sheet-back-color",game.settings.get("CoC7","artworkBackgroundColor")),game.settings.get("CoC7","artworkInteractiveColor")&&sheet.element.css("--main-sheet-interactive-color",game.settings.get("CoC7","artworkInteractiveColor")),game.settings.get("CoC7","artworkFixedSkillLength")||(sheet.element.css("--skill-length","auto"),sheet.element.css("--skill-specialization-length","auto")),game.settings.get("CoC7","artworkMainFont")){new FontFace("customSheetFont",game.settings.get("CoC7","artworkMainFont")).load().then((function(loadedFace){document.fonts.add(loadedFace)})).catch((function(error){ui.notifications.error(error)}))}if(game.settings.get("CoC7","artworkMainFontBold")){new FontFace("customSheetFont",game.settings.get("CoC7","artworkMainFontBold"),{weight:"bold"}).load().then((function(loadedFace){document.fonts.add(loadedFace)})).catch((function(error){ui.notifications.error(error)}))}if(game.settings.get("CoC7","artworkMainFontSize")){const size=`${game.settings.get("CoC7","artworkMainFontSize")}px`;size!==$(":root").css("font-size")&&$(":root").css("font-size",size)}}}}class CoC7Combat{static renderCombatTracker(app,html,data){const currentCombat=data.combats[data.currentIndex-1];currentCombat&&(html.find(".combatant").each(((i,el)=>{const combId=el.getAttribute("data-combatant-id"),combatantControlsDiv=el.querySelector(".combatant-controls"),combatant=currentCombat.data.combatants.get(combId);if(combatant.getFlag("CoC7","hasGun")?$(combatantControlsDiv).prepend(`<a class="combatant-control active add-init" title="${game.i18n.localize("CoC7.PutGunAway")}" data-control="drawGun"><i class="game-icon game-icon-revolver"></i></a>`):$(combatantControlsDiv).prepend(`<a class="combatant-control add-init" title="${game.i18n.localize("CoC7.DrawGun")}" data-control="drawGun"><i class="game-icon game-icon-revolver"></i></a>`),"optional"===game.settings.get("CoC7","initiativeRule")&&game.settings.get("CoC7","displayInitAsText")){if(combatant.initiative){const tokenInitiative=el.querySelector(".token-initiative"),initiativeTest=tokenInitiative.querySelector(".initiative"),roll=100*combatant.initiative-100*Math.floor(combatant.initiative);switch(Math.floor(combatant.initiative)){case CoC7Check.successLevel.fumble:tokenInitiative.classList.add("fumble"),initiativeTest.innerText=game.i18n.localize("CoC7.Fumble"),initiativeTest.title=roll;break;case CoC7Check.successLevel.failure:tokenInitiative.classList.add("failure"),initiativeTest.innerText=game.i18n.localize("CoC7.Failure"),initiativeTest.title=roll;break;case CoC7Check.successLevel.regular:tokenInitiative.classList.add("regular-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyRegular"),initiativeTest.title=roll;break;case CoC7Check.successLevel.hard:tokenInitiative.classList.add("hard-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyHard"),initiativeTest.title=roll;break;case CoC7Check.successLevel.extreme:tokenInitiative.classList.add("extreme-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyExtreme"),initiativeTest.title=roll;break;case CoC7Check.successLevel.critical:tokenInitiative.classList.add("critical"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyCritical"),initiativeTest.title=roll}}}else if(combatant.initiative<0){const h4=el.querySelector(".token-name").querySelector("h4"),span=el.querySelector("span.initiative");h4.style.fontWeight="900",h4.style.textShadow="1px 1px 4px darkred",span.style.fontWeight="900",span.style.textShadow="1px 1px 4px darkred",el.style.color="darkred",el.style.background="black",el.style.fontWeight="900"}})),html.find(".add-init").click((event=>CoC7Combat._onToggleGun(event))))}static async _onToggleGun(event){event.preventDefault(),event.stopPropagation();const li=event.currentTarget.closest(".combatant"),c=await game.combat.combatants.get(li.dataset.combatantId);c.actor.isOwner&&(c.getFlag("CoC7","hasGun")?await c.setFlag("CoC7","hasGun",!1):await c.setFlag("CoC7","hasGun",!0));const newInit=await c.actor.rollInitiative(!!c.getFlag("CoC7","hasGun"));c.getFlag("CoC7","hasGun")?c.initiative<newInit&&game.combat.setInitiative(c.id,newInit):game.combat.setInitiative(c.id,newInit)}}async function rollInitiative(ids,{formula=null,updateTurn=!0,messageOptions={}}={}){ids="string"==typeof ids?[ids]:ids;const currentId=this.combatant.id,updates=[];for(const[,id]of ids.entries()){const combatant=this.combatants.get(id);if(!combatant?.isOwner)return null;const roll=await combatant.actor.rollInitiative(!!combatant.getFlag("CoC7","hasGun"));updates.push({_id:id,initiative:roll})}return updates.length?(await this.updateEmbeddedDocuments("Combatant",updates),updateTurn&&await this.update({turn:this.turns.findIndex((t=>t.id===currentId))}),this):this}class Updater{static async checkForUpdate(){this.systemUpdateVersion=String(game.settings.get("CoC7","systemUpdateVersion"));const runMigrate=isNewerVersion(game.system.data.version,this.systemUpdateVersion);this.updatedModules=game.settings.get("CoC7","systemUpdatedModuleVersion")||{},this.currentModules={};for(const pack of game.packs)!["CoC7","world"].includes(pack.metadata.package)&&["Actor","Item"].includes(pack.metadata.entity)&&(Object.prototype.hasOwnProperty.call(this.currentModules,pack.metadata.package)||Object.prototype.hasOwnProperty.call(this.updatedModules,pack.metadata.package)&&String(this.updatedModules[pack.metadata.package])===String(game.modules.get(pack.metadata.package).data.version)||(this.currentModules[pack.metadata.package]=game.modules.get(pack.metadata.package).data.version));(runMigrate||Object.keys(this.currentModules).length>0)&&(game.user.isGM?new Dialog({title:game.i18n.localize("CoC7.Migrate.Title"),content:game.i18n.format(0===Object.keys(this.currentModules).length?"CoC7.Migrate.Message":"CoC7.Migrate.WithModulesMessage",{version:game.system.data.version,modules:"<ul><li>"+Object.keys(this.currentModules).map((mod=>game.modules.get(mod).data.name)).join("</li><li>")+"</li></ul>"}),buttons:{update:{label:game.i18n.localize("CoC7.Migrate.ButtonUpdate"),callback:async()=>Updater.update()},skip:{label:game.i18n.localize("CoC7.Migrate.ButtonSkip")}}}).render(!0):new Dialog({title:game.i18n.localize("CoC7.Migrate.Title"),content:game.i18n.format("CoC7.Migrate.GMRequired",{version:game.system.data.version}),buttons:{OK:{label:game.i18n.localize("CoC7.Migrate.ButtonOkay")}}}).render(!0))}static async update(){for(const actor of game.actors.contents)try{const updateData=this.migrateActorData(actor.toObject());foundry.utils.isObjectEmpty(updateData)||(console.log(`Migrating Actor entity ${actor.name}`),await actor.update(updateData,{enforceTypes:!1}))}catch(err){err.message=`Failed CoC7 system migration for Actor ${actor.name}: ${err.message}`,console.error(err)}for(const item of game.items.contents)try{const updateData=Updater.migrateItemData(item.toObject());foundry.utils.isObjectEmpty(updateData)||(console.log(`Migrating Item entity ${item.name}`),await item.update(updateData,{enforceTypes:!1}))}catch(err){err.message=`Failed CoC7 system migration for Item ${item.name}: ${err.message}`,console.error(err)}for(const table of game.tables.contents)try{const updateData=Updater.migrateTableData(table.toObject());foundry.utils.isObjectEmpty(updateData)||(console.log(`Migrating Table entity ${table.name}`),await table.update(updateData,{enforceTypes:!1}))}catch(err){err.message=`Failed CoC7 system migration for Table ${table.name}: ${err.message}`,console.error(err)}for(const macro of game.macros.contents)try{const updateData=Updater.migrateMacroData(macro.toObject());foundry.utils.isObjectEmpty(updateData)||(console.log(`Migrating Macro entity ${macro.name}`),await macro.update(updateData,{enforceTypes:!1}))}catch(err){err.message=`Failed CoC7 system migration for Table ${macro.name}: ${err.message}`,console.error(err)}for(const pack of game.packs)"CoC7"!==pack.metadata.package&&["Actor","Item","Macro","RollTable"].includes(pack.metadata.entity)&&await Updater.migrateCompendiumData(pack);const settings=mergeObject(this.updatedModules||{},this.currentModules);game.settings.set("CoC7","systemUpdatedModuleVersion",settings),game.settings.set("CoC7","systemUpdateVersion",game.system.data.version)}static migrateActorData(actor){const updateData={};if(Updater._migrateActorCharacterSanity(actor,updateData),Updater._migrateActorArtwork(actor,updateData),Updater._migrateActorKeeperNotes(actor,updateData),Updater._migrateActorNpcCreature(actor,updateData),actor.items){const items=actor.items.reduce(((arr,i)=>{const itemData=i instanceof CONFIG.Item.documentClass?i.toObject():i,itemUpdate=Updater.migrateItemData(itemData);return foundry.utils.isObjectEmpty(itemUpdate)||(itemUpdate._id=itemData._id,arr.push(expandObject(itemUpdate))),arr}),[]);items.length>0&&(updateData.items=items)}return updateData}static async migrateCompendiumData(pack){const entity=pack.metadata.entity;if(!["Actor","Item","Macro","RollTable"].includes(entity))return;const wasLocked=pack.locked;await pack.configure({locked:!1}),await pack.migrate();const documents=await pack.getDocuments();for(const doc of documents){let updateData={};try{switch(entity){case"Actor":updateData=Updater.migrateActorData(doc.toObject());break;case"Item":updateData=Updater.migrateItemData(doc.toObject());break;case"Macro":updateData=Updater.migrateMacroData(doc.toObject());break;case"RollTable":updateData=Updater.migrateTableData(doc.toObject())}foundry.utils.isObjectEmpty(updateData)||(console.log(`Migrated ${entity} entity ${doc.name} in Compendium ${pack.collection}`),await doc.update(updateData))}catch(err){err.message=`Failed CoC7 system migration for entity ${doc.name} in pack ${pack.collection}: ${err.message}`,console.error(err)}}await pack.configure({locked:wasLocked})}static migrateItemData(item){const updateData={};return Updater._migrateItemExperience(item,updateData),Updater._migrateItemArtwork(item,updateData),Updater._migrateItemBookAutomated(item,updateData),Updater._migrateItemKeeperNotes(item,updateData),Updater._migrateItemSpellAutomated(item,updateData),Updater._migrateItemKeeperNotesMerge(item,updateData),updateData}static migrateMacroData(table){const updateData={};return Updater._migrateMacroArtwork(table,updateData),updateData}static migrateTableData(table){const updateData={};return Updater._migrateTableArtwork(table,updateData),updateData}static _migrateItemKeeperNotes(item,updateData){return["archetype","chase","item","occupation","setup","skill","spell","status","talent","weapon"].includes(item.type)&&("string"==typeof item.data.description?updateData["data.description"]={value:item.data.description,keeper:""}:void 0===item.data.description?updateData["data.description"]={value:"",keeper:""}:void 0===item.data.description.keeper&&(updateData["data.description.keeper"]="")),updateData}static _migrateItemExperience(item,updateData){return"skill"===item.type&&void 0===item.data.adjustments?.experience&&(updateData["data.adjustments.experience"]=0),updateData}static _migrateItemArtwork(item,updateData){const regEx=new RegExp(/systems\/CoC7\/artwork\/icons\/(.+)/);let image=String(item.img).match(regEx);if(null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),"setup"===item.type)for(const[k,v]of Object.entries(item.data.items))image=String(v.img).match(regEx),null!==image&&(void 0===updateData["data.items"]&&(updateData["data.items"]=item.data.items),updateData["data.items"][k].img="systems/CoC7/assets/icons/"+image[1]);else if("occupation"===item.type){for(const[k,v]of Object.entries(item.data.skills))image=String(v.img).match(regEx),null!==image&&(void 0===updateData["data.skills"]&&(updateData["data.skills"]=item.data.skills),updateData["data.skills"][k].img="systems/CoC7/assets/icons/"+image[1]);for(const[o,g]of Object.entries(item.data.groups))for(const[k,v]of Object.entries(g.skills))image=String(v.img).match(regEx),null!==image&&(void 0===updateData["data.groups"]&&(updateData["data.groups"]=item.data.groups),updateData["data.groups"][o].skills[k].img="systems/CoC7/assets/icons/"+image[1])}else if("book"===item.type)for(const[k,v]of Object.entries(item.data.spells))image=String(v.img).match(regEx),null!==image&&(void 0===updateData["data.spells"]&&(updateData["data.spells"]=item.data.spells),updateData["data.spells"][k].img="systems/CoC7/assets/icons/"+image[1]);else if("archetype"===item.type)for(const[k,v]of Object.entries(item.data.skills))image=String(v.img).match(regEx),null!==image&&(void 0===updateData["data.skills"]&&(updateData["data.skills"]=item.data.skills),updateData["data.skills"][k].img="systems/CoC7/assets/icons/"+image[1]);return updateData}static _migrateItemSpellAutomated(item,updateData){"spell"===item.type&&void 0!==item.data.cost&&(updateData["data.castingTime"]=item.data.castingTime||"",updateData["data.costs.hitPoints"]=item.data.cost.hp||0,updateData["data.costs.magicPoints"]=item.data.cost.mp||0,updateData["data.costs.sanity"]=item.data.cost.san||0,updateData["data.costs.power"]=item.data.cost.pow||0,updateData["data.costs.others"]="",updateData["data.-=cost"]=null,updateData["data.description.-=unidentified"]=null,updateData["data.description.-=notes"]=null)}static _migrateItemBookAutomated(item,updateData){return"book"===item.type&&void 0!==item.data.description.unidentified&&(updateData["data.author"]=item.data.author||"",updateData["data.date"]=item.data.date||"",updateData["data.language"]=item.data.language||"",updateData["data.sanityLoss"]=item.data.sanLoss||0,updateData["data.mythosRating"]=Number(item.data.mythosRating)||0,updateData["data.content"]=item.data.description.unidentified,updateData["data.keeperNotes"]=item.data.description.notes,updateData["data.difficultyLevel"]="regular",updateData["data.fullStudies"]=0,updateData["data.initialReading"]=!1,updateData["data.keeperNotes"]="",updateData["data.gains.cthulhuMythos.initial"]=Number(item.data.gain.cthulhuMythos.CMI)||0,updateData["data.gains.cthulhuMythos.final"]=Number(item.data.gain.cthulhuMythos.CMF)||0,updateData["data.gains.occult"]=Number(item.data.gain.occult)||0,updateData["data.gains.others"]=[],updateData["data.study"]={necessary:Number(item.data.weeksStudyTime)||0,progress:0},updateData["data.-=sanLoss"]=null,updateData["data.-=weeksStudyTime"]=null,updateData["data.-=gain"]=null,updateData["data.description.-=unidentified"]=null,updateData["data.description.-=notes"]=null,updateData["data.gains.-=other"]=null,updateData["data.-=properties"]=null,updateData["data.-=flags"]=null),updateData}static _migrateItemKeeperNotesMerge(item,updateData){"spell"===item.type&&void 0!==item.data.notes&&(void 0!==item.data.description.keeper?updateData["data.description.keeper"]=item.data.description.keeper+item.data.notes:updateData["data.description.keeper"]=item.data.notes,updateData["data.-=notes"]=null)}static _migrateActorArtwork(actor,updateData){const regEx=new RegExp(/systems\/CoC7\/artwork\/icons\/(.+)/);let image=String(actor.img).match(regEx);null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),image=String(actor.token.img).match(regEx),null!==image&&(updateData["token.img"]="systems/CoC7/assets/icons/"+image[1]);for(const[k,v]of Object.entries(actor.effects))image=String(v.icon).match(regEx),null!==image&&(void 0===updateData.effects&&(updateData.effects=actor.effects),updateData.effects[k].icon="systems/CoC7/assets/icons/"+image[1]);return updateData}static _migrateActorKeeperNotes(actor,updateData){return["character","npc","creature"].includes(actor.type)&&void 0===actor.data.description&&(updateData["data.description"]={keeper:""}),updateData}static _migrateActorNpcCreature(actor,updateData){return["npc"].includes(actor.type)&&(void 0===actor.data.special&&(updateData["data.special"]={checkPassed:null,checkFailled:null}),void 0===actor.data.attacksPerRound&&(updateData["data.attacksPerRound"]=1)),updateData}static _migrateActorCharacterSanity(actor,updateData){if("character"===actor.type){const oneFifthSanity=Math.ceil(actor.data.attribs.san.value/5);void 0!==actor.data.attribs.san.dailyLoss&&null!==actor.data.attribs.san.dailyLoss||(updateData["data.attribs.san.dailyLoss"]=0),void 0!==actor.data.attribs.san.oneFifthSanity&&null!==actor.data.attribs.san.oneFifthSanity||(updateData["data.attribs.san.oneFifthSanity"]=" / "+oneFifthSanity),void 0!==actor.data.attribs.san.dailyLoss&&null!==actor.data.attribs.san.dailyLoss||(updateData["data.attribs.san.dailyLoss"]=0),void 0!==actor.data.indefiniteInsanityLevel&&null!==actor.data.indefiniteInsanityLevel&&void 0!==actor.data.indefiniteInsanityLevel.value&&null!==actor.data.indefiniteInsanityLevel.value||(updateData["data.indefiniteInsanityLevel.value"]=0),void 0!==actor.data.indefiniteInsanityLevel&&null!==actor.data.indefiniteInsanityLevel&&void 0!==actor.data.indefiniteInsanityLevel.max&&null!==actor.data.indefiniteInsanityLevel.max||(updateData["data.indefiniteInsanityLevel.max"]=oneFifthSanity),void 0!==actor.data.attribs.mp.value&&null!==actor.data.attribs.mp.value||(updateData["data.attribs.mp.value"]=oneFifthSanity),void 0!==actor.data.attribs.mp.max&&null!==actor.data.attribs.mp.max||(updateData["data.attribs.mp.max"]=oneFifthSanity),void 0!==actor.data.notes&&null!==actor.data.notes||(updateData["data.notes"]="")}return updateData}static _migrateMacroArtwork(table,updateData){const regEx=new RegExp(/systems\/CoC7\/artwork\/icons\/(.+)/),image=String(table.img).match(regEx);return null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),updateData}static _migrateTableArtwork(table,updateData){const regEx=new RegExp(/systems\/CoC7\/artwork\/icons\/(.+)/);let image=String(table.img).match(regEx);null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]);for(const[k,v]of Object.entries(table.results))image=String(v.img).match(regEx),null!==image&&(void 0===updateData.results&&(updateData.results=table.results),updateData.results[k].img="systems/CoC7/assets/icons/"+image[1]);return updateData}}const nameCharacters="\\u3000\\u3400-\\u4DBF\\u4E00-\\u9FFF\\w\\(\\)\\-\\/&\"'"+CoC7Utilities.quoteRegExp("aeio"),keys={en:{description:"CoC7.English",dbNone:"none",armorNone:"none",attacksPerRoundNone:"none",sanLossNone:"none",fulldb:"(Damage Bonus|DB)",halfdb:"(|half)",sectionCombats:"\n(?:combat|fighting attacks)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:skills(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:languages)[:\n]",sectionSpells:"\n(?:spells)[:\n]",handgun:"(?<type> Gun|Revolver|Pistol|Handgun|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Rifle|Shotgun|Carbine|Gauge |Lee-Enfield|Elephant)",smb:"(?<type>Submachine Gun|Thompson)",machineGun:"(?<type>Browning|Vickers)",launched:"(?<type>Molotov|Grenade|Dynamite)",example:"Example Character, age 27\nSTR 75 CON 60 SIZ 80 DEX 70 APP 60 INT 80\nPOW 50 EDU 85 SAN 55 HP 14 DB: 1D4\nBuild: 1 Move: 7 MP: 10 Luck: 40 Armor: 1\nAttacks per round: 3 SAN loss: 1d4/1d8\nCombat\nBite 50% (25/10), damage 1D6\nBrawl 30% (15/6), damage 1D3\nDerringer 40% (20/8), damage 1D8+1\nDodge 50% (25/10)\nSkills\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nLanguages: English 80%, Eklo 5%.\nSpells: Summon NPC, Dispel NPC."},fr:{description:"CoC7.French",dbNone:"Acune",armorNone:"(?:Acune|aucune)",attacksPerRoundNone:"Acune",sanLossNone:"Acune",fulldb:"(BD|Bonus aux dommages|Impact|Imp)",halfdb:"(|1/2 Imp|Imp/2)",sectionCombats:"\n(?:Combat|Armes|Attaques)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:Comptences(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Langues?)\\s*[:\n]",sectionSpells:"\n(?:Sortilges\\s*|Sorts)[:\n]",handgun:"(?<type>Revolver|Pistolet|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Carabine|Lee-Enfield|Fusil)",smb:"(?<type>SMG|Thompson)",machineGun:"(?<type>Browning|Vickers|Mitrailleuse)",launched:"(?<type>Boomerang de guerre|Javeline|Pierre|Shuriken|Bton de dynamite|Cocktail Molotov|Grenade  main|Molotov|Grenade|Dynamite)",example:"Example Character, 27 ans\nFOR 75 CON 60 TAI 80 DEX 70 APP 60 INT 80\nPOU 50 DU 85 SAN 55 PV 14 BD: 1D4\nCarrure: 1 Mvt: 7 PM: 10 Chance: 40 Armure: 1\nAttaques par round 3 Perte de SAN: 1d4/1d8\nAttaques\nBite 50% (25/10), dommage 1D6\nBrawl 30% (15/6), dommage 1D3\nDerringer 40% (20/8), dommage 1D8+1\nEsquiver 50% (25/10)\nComptences\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nLangue: English 80%, Eklo 5%.\nSortilges: Summon NPC, Dispel NPC."},es:{description:"CoC7.Spanish",dbNone:"ninguna",armorNone:"ninguna",attacksPerRoundNone:"ninguno",sanLossNone:"no",fulldb:"(BD|bd|bonificacin de dao)",halfdb:"(|medio dao|mitad|dao a la mitad)",sectionCombats:"\n(?:Combate|Armas)[:\n]",newCombatHeader:"\nCombate\n",sectionSkills:"\n(?:Habilidades(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Idiomas|Lenguajes|Lenguas)[:\n]",sectionSpells:"\n(?:Conjuros|Hechizos)[:\n]",handgun:"(?<type>Revolver|Pistola|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Rifle|Carabina|Lee-Enfield|Caza Elefantes|Fusil|Escopeta|Galga|Recortada)",smb:"(?<type>Subfusil|Thompson)",machineGun:"(?<type>Browning|Vickers|Ametralladora)",launched:"(?<type>Molotov|Granada|Dinamita)",example:"Example Character, 27 aos\nFUE 75 CON 60 TAM 80 DES 70 APA 60 INT 80\nPOD 50 EDU 85 COR 55 PV 14 BD: 1D4\nCorpulencia: 1 Movimiento: 7 PM: 10 Suerte: 40 Armadura: 1\nNmero de Ataques 3 Prdida de cordura: 1d4/1d8\nCombate\nBite 50% (25/10), dao 1D6\nBrawl 30% (15/6), dao 1D3\nDerringer 40% (20/8), dao 1D8+1\nEsquivar 50% (25/10)\nHabilidades\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nIdiomas: English 80%, Eklo 5%.\nConjuros: Summon NPC, Dispel NPC."},"zh-TW":{description:"CoC7.TraditionalChinese",dbNone:"none",armorNone:"none",attacksPerRoundNone:"none",sanLossNone:"none",fulldb:"(Damage Bonus|DB|)",halfdb:"(|half)",sectionCombats:"\n(?:combat|fighting attacks|||)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:(?:Skills|)(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Languages|)[:\n]",sectionSpells:"\n(?:spells||)[:\n]",handgun:"(?<type> |\\.22|\\.25()|\\.327\\.65mm|\\.327\\.65mm|\\.357 Magnum|\\.389mm|\\.38|M9|17|9mm|P08|\\.41|\\.44|\\.45|\\.45||Gun|Revolver|Pistol|Handgun|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>||||Rifle|Shotgun|Carbine|Gauge |Lee-Enfield|Elephant)",smb:"(?<type>Submachine Gun|Thompson|)",machineGun:"(?<type>Browning|Vickers|)",launched:"(?<type>Molotov|Grenade|Dynamite||)",example:",  27\n 75  60  80  70  60  80\n 50  85 SAN 55 HP 14 DB: 1D4\n: 1 Move: 7 MP: 10 : 40 : 1\n: 3 : 1d4/1d8\n\n 50% (25/10),  1D6\n 30% (15/6),  1D3\n 40% (20/8),  1D8+1\n 50% (25/10)\n\n 55%,  30%,  25%,  20%,\n 50%,  45%,  25%,  75%,\n () 90%,  () 35%, \n 35%,  10%\n:  80%,  5%.\n:  NPC,  NPC."}},translations={en:{age:"(?<![a-z])age(\\s*:)?\\s+(?<age>\\d+)[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])STR(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])SIZ(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POW(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:SAN|Sanity)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:HP|Hit points)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:MP|Magic points)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.en.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.en.dbNone+")[,\\s\n]*",build:"(?<![a-z])Build(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armor(\\s*:)?\\s+(?<armor>"+keys.en.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Move(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Luck(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attacks per round|# Attacks)(\\s*:)?\\s+(?<attacksPerRound>"+keys.en.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Sanity loss|SAN loss)(\\s*:)?\\s+(?<sanLoss>"+keys.en.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*damage)?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.en.fulldb+"|"+keys.en.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Dodge)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Fighting|Firearms|Brawl|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.en.sectionCombats+"|"+keys.en.sectionSkills+"|"+keys.en.sectionLangauges+"|"+keys.en.sectionSpells+")"},fr:{age:"(?<age>\\d+)\\s*ans(?![a-z])[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])FOR(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])TAI(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POU(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])DU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:SAN|Sant Mentale)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:PV|Points de vie)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:PM|Points de magie)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.fr.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.fr.dbNone+")[,\\s\n]*",build:"(?<![a-z])Carrure(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armure|Protection(\\s*:)?\\s+(?<armor>"+keys.fr.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])(?:Mvt|Mouvement|Dplacement)(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Chance(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attaques par round)(\\s*:)?\\s+(?<attacksPerRound>"+keys.fr.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Perte de Sant mentale|Perte de SAN)(\\s*:)?\\s+(?<sanLoss>"+keys.fr.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*(?:dommage|dgts))?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.fr.fulldb+"|"+keys.fr.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Esquiver?)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Au contact| distance|Combat rapproch|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.fr.sectionCombats+"|"+keys.fr.sectionSkills+"|"+keys.fr.sectionLangauges+"|"+keys.fr.sectionSpells+")"},es:{age:"(?<age>\\d+)\\s*a[]os(?![a-z])[,\\s]*",occupation:"[,\\s]*Ocupacin(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])FUE(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])TAM(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POD(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DES(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APA(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:COR|Cordura)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:PV|Puntos de vida|P\\. ?V\\.)(\\s*:)?\\s+(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:PM|Puntos Mgicos|Puntos de Magia)(\\s*:)?\\s+(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.es.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.es.dbNone+")[,\\s\n]*",build:"(?<![a-z])Corpulencia(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armadura(\\s*:)?\\s+(?<armor>"+keys.es.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Movimiento(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Suerte(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Nmero de Ataques)(\\s*:)?\\s+(?<attacksPerRound>"+keys.es.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Prdida de cordura|Prdida de COR)(\\s*:)?\\s+(?<sanLoss>"+keys.es.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*dao)?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.es.fulldb+"|"+keys.es.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Esquivar)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Combatir|Armas de fuego|Brawl|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.es.sectionCombats+"|"+keys.es.sectionSkills+"|"+keys.es.sectionLangauges+"|"+keys.es.sectionSpells+")"},"zh-TW":{age:"(?<![a-z])age|(\\s*:)?\\s*(?<age>\\d+)[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])STR|(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON|(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])SIZ|(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT|(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POW|(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX|(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP|(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU|(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:SAN|Sanity|)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:HP|Hit points|)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:MP|Magic points)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys["zh-TW"].fulldb+")(\\s*:)?\\s*(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys["zh-TW"].dbNone+")[,\\s\n]*",build:"(?<![a-z])Build|(\\s*:)?\\s*(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armor|(\\s*:)?\\s*(?<armor>"+keys["zh-TW"].armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Move(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Luck|(\\s*:)?\\s*(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attacks per round|# Attacks||# )(\\s*:)?\\s*(?<attacksPerRound>"+keys["zh-TW"].attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Sanity loss|SAN loss||SAN|SAN|SAN)(\\s*:)?\\s*(?<sanLoss>"+keys["zh-TW"].sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*(?:damage|))?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys["zh-TW"].fulldb+"|"+keys["zh-TW"].halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Dodge||)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%?(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(||Brawl|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys["zh-TW"].sectionCombats+"|"+keys["zh-TW"].sectionSkills+"|"+keys["zh-TW"].sectionLangauges+"|"+keys["zh-TW"].sectionSpells+")"}};class CoC7ActorImporterRegExp{static checkLanguage(lang=null){return lang||(lang=game.i18n.lang),void 0===translations[lang]&&(lang="en"),lang}static getExampleText(lang){let example=keys.en.example;return void 0!==keys[lang]&&(example=keys[lang].example),example}static getTranslations(){const output={};for(const key in keys)output[key]=keys[key].description;return output}static getKeys(lang){return keys[lang]||keys.en}static getRegularExpressions(lang){return translations[lang]||translations.en}}class CoC7ActorImporter{constructor(){this.parsed={},this.itemLocations=""}static get asNumber(){return"n"}static get asString(){return"s"}getRegEx(regex,modifiers="iu"){return"RegExp"===regex.constructor?.name?regex:new RegExp(regex,modifiers)}cleanString(s){return s.replace(/(\n|\r)/g," ").replace(/^\s*/,"").replace(/\s*\.?\s*\.?$/,"")}toHTML(s){return 0===s.trim().length||0===(s=s.trim().split("\n").map((text=>text.trim().replace(/^[,.\s]+$/,""))).filter((text=>text)).join("</p><p>")).length?"":"<p>"+s+"</p>"}check(regExKey,{removeFromText=!0,saveKeys=!0,type=CoC7ActorImporter.asString,text=!1,requiredGroup=!1}={}){let output=!1,regExp=!1;if(void 0!==this.regEx[regExKey]?regExp=this.getRegEx(this.regEx[regExKey]):void 0!==this.keys[regExKey]&&(regExp=this.getRegEx(this.keys[regExKey])),!1!==regExp){!1===text&&(text=this.text);const check=regExp.exec(text);let value=null;if(null!==check&&(!1===requiredGroup||void 0!==(check.groups||{})[requiredGroup])){if(output=check.groups||{},removeFromText&&(this.text=this.text.replace(check[0].trim(),"\n").trim()),saveKeys)for(const key of Object.keys(check.groups))switch(type){case CoC7ActorImporter.asString:this.parsed[key]=String(check.groups[key]).replace("\n"," ");break;case CoC7ActorImporter.asNumber:value=Number(check.groups[key]),isNaN(value)||(this.parsed[key]=Number(check.groups[key]))}output["-source"]=check[0],output["-index"]=check.index}}return output}processCombat(text){if(0===text.trim().length)return;let weapon,dodge,newline;CONFIG.debug.CoC7Importer&&console.log("combat text",text);let lastPercent=!1,maxLoops=40;do{if(maxLoops--,text=text.trim(),dodge=this.check("weaponDodge",{saveKeys:!1,text}))text=text.replace(dodge["-source"],"\n"),void 0===this.parsed.skills&&(this.parsed.skills=[]),this.parsed.skills.push({name:this.cleanString(dodge.name),value:Number(dodge.percentage),push:!1});else if(weapon=this.check("weapon",{saveKeys:!1,text,requiredGroup:!1===lastPercent&&"percentage"})){text=text.replace(weapon["-source"],"\n");const name=this.cleanString(weapon.name||"");let damage=this.cleanString(weapon.damage||"");const isRanged=!!(this.check("handgun",{text:name,removeFromText:!1,saveKeys:!1})||this.check("rifle",{text:name,removeFromText:!1,saveKeys:!1})||this.check("smb",{text:name,removeFromText:!1,saveKeys:!1})||this.check("machineGun",{text:name,removeFromText:!1,saveKeys:!1})||this.check("launched",{text:name,removeFromText:!1,saveKeys:!1}));let found;lastPercent=null===weapon.percentage||void 0===weapon.percentage||Number(weapon.percentage);let ahdb=!1,addb=!1;do{found=this.getRegEx("\\s*[+-]?\\s*("+this.keys.halfdb+")\\s*("+this.keys.fulldb+")?[-+]?\\s*("+this.parsed.db.replace(/^[-+]/,"")+")?").exec(damage),found?(ahdb=!0,damage=damage.replace(found[0],"")):(found=this.getRegEx("\\s*[+-]?\\s*("+this.keys.fulldb+")\\s*[-+]?\\s*("+this.parsed.db.replace(/^[-+]/,"")+")?").exec(damage),found&&(addb=!0,damage=damage.replace(found[0],"")))}while(found);const damages=damage.split("/"),isShotgun=3===damages.length,data={name,type:"weapon",data:{skill:{id:lastPercent},properties:{},range:{normal:{value:isShotgun?10:0,damage:damages[0]},long:{value:isShotgun?20:0,damage:isShotgun?damages[1]:""},extreme:{value:isShotgun?50:0,damage:isShotgun?damages[2]:""}}}};data.data.properties.shotgun=isShotgun,data.data.properties.rngd=isRanged||isShotgun,data.data.properties.melee=!data.data.properties.rngd,data.data.properties.ahdb=ahdb,data.data.properties.addb=addb,void 0===this.parsed.attacks&&(this.parsed.attacks=[]),this.parsed.attacks.push(data)}else(newline=text.match(/^(.+)\n/))?text=text.replace(newline[0],"\n"):(newline=text.match(/^[^\n]+$/))&&(text="")}while(maxLoops>0&&(weapon||dodge||text));0===maxLoops&&(ui.notifications.warn("Unexpected weapons text, please raise a bug report with the text you are attempting to import"),console.debug("Unexpected weapons:",text))}processSkills(text,key="skills"){if(0===text.trim().length)return;const breaks=text.split(/\.\r?\n/);let skill;breaks.length>1&&(text=breaks[0]);let maxLoops=40;do{maxLoops--,text=text.trim(),skill=this.check("skill",{saveKeys:!1,text}),skill&&(text=text.replace(skill["-source"],"\n"),void 0===this.parsed[key]&&(this.parsed[key]=[]),this.parsed[key].push({name:this.cleanString(skill.name),value:Number(skill.percentage)}))}while(maxLoops>0&&skill);0===maxLoops&&(ui.notifications.warn("Unexpected skills text, please raise a bug report with the text you are attempting to import"),console.debug("Unexpected skills:",text))}processSpells(text){if(0===text.trim().length)return;const breaks=text.split(/\.\r?\n/);breaks.length>1&&(text=breaks[0]);const spellsArr=text.replace(/([\n\r]+)/g," ").split(/(?<!\([^)]+),/);this.text=this.text.replace(text.trim(),"\n");for(const spell of spellsArr)void 0===this.parsed.spells&&(this.parsed.spells=[]),this.parsed.spells.push(this.cleanString(spell))}async parseCharacter(text){this.text=String(text).trim().replace(/\u2013|\u2014|\u2212/g,"-").replace(/\u2019/g,"'").replace(/[\udbc0-\udbfe][\udc00-\udfff]/g,"");let header,min=this.text.length,check=this.check("str",{type:CoC7ActorImporter.asNumber})["-index"];if(isNaN(check)||(min=Math.min(min,check)),check=this.check("con",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("siz",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("int",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("pow",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("dex",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("app",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("edu",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("san",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("hp",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("mp",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),min>0){if(header=this.text.substr(0,min),check=this.check("name",{text:header}),!1===check?this.parsed.name=game.i18n.localize("CoC7.ImportedUnnamedCharacter"):header=header.replace(check["-source"],"\n"),check=this.check("age",{text:header}),!1!==check&&(header=header.replace(check["-source"],"\n")),!this.check("occupation",{text:header})&&""!==header.trim()){let occupation=header;header.indexOf(".")>-1&&(occupation=header.substr(0,header.indexOf(".")+1)),this.parsed.occupation=occupation.replace(/([\n\r]+)/g," ").trim().replace(/,$/,""),this.text=this.text.replace(occupation.trim(),"\n")}}else this.parsed.name=game.i18n.localize("CoC7.ImportedUnnamedCharacter");if(void 0!==this.parsed.occupation&&void 0===this.parsed.age){const occupationAge=this.parsed.occupation.match(/^(?<age>\d+),(?<occupation>.+)$/);occupationAge&&(this.parsed.age=occupationAge.groups.age,this.parsed.occupation=occupationAge.groups.occupation.trim())}this.check("db")&&!this.check("dbNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.db})||(this.parsed.db="0"),this.check("build"),this.check("armor")&&!this.check("armorNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.armor})||(this.parsed.armor="0"),this.check("mov",{type:CoC7ActorImporter.asNumber}),this.check("lck",{type:CoC7ActorImporter.asNumber}),this.check("sanLoss"),this.check("attacksPerRound")&&this.check("attacksPerRoundNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.attacksPerRound})&&(this.parsed.attacksPerRound="0"),this.text="\n"+this.text;let sections=this.getRegEx("("+this.keys.sectionCombats+")","i");null===this.text.match(sections)&&(sections=this.check("guessStartCombat",{saveKeys:!1,removeFromText:!1}),sections&&(this.text=[this.text.slice(0,sections["-index"]),this.keys.newCombatHeader,this.text.slice(sections["-index"])].join("")));const regExpSections=this.getRegEx(this.regEx.sections,"i");if(sections=this.text.split(regExpSections),null!==sections)for(let i=0,im=sections.length;i<im;i++)null!==sections[i].match(this.getRegEx("("+this.keys.sectionCombats+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processCombat(sections[i+1]),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionSkills+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSkills(sections[i+1]),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionLangauges+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSkills(sections[i+1],"languages"),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionSpells+")","i"))&&void 0!==sections[i+1]&&(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSpells(sections[i+1]),i++);return this.parsed.gmnotes=this.toHTML(this.text),this.parsed}disableAttribAuto(key,attribValue,check,updateData){const value=Math.max(0,Number(attribValue));return value!==Number(check)&&(updateData[`data.attribs.${key}.auto`]=!1,updateData[`data.attribs.${key}.value`]=value,"build"===key?updateData[`data.attribs.${key}.current`]=value:updateData[`data.attribs.${key}.max`]=value),updateData}async createEntity(characterData,entityType){const importedCharactersFolder=await this.createImportCharactersFolderIfNotExists();"npc"!==entityType&&(entityType="creature");const actorData={name:characterData.name,type:entityType,folder:importedCharactersFolder.id,data:characterData.actor},npc=await Actor.create(actorData);await npc.createEmbeddedDocuments("Item",characterData.items,{renderSheet:!1});const updateData={};let value=0;void 0!==characterData.actor.attribs.hp?.value&&this.disableAttribAuto("hp",characterData.actor.attribs.hp.value,npc.hpMax,updateData),void 0!==characterData.actor.attribs.mp?.value&&this.disableAttribAuto("mp",characterData.actor.attribs.mp.value,npc.mpMax,updateData),void 0!==characterData.actor.attribs.mov?.value&&this.disableAttribAuto("mov",characterData.actor.attribs.mov.value,npc.mov,updateData),void 0!==characterData.actor.attribs.build?.value&&this.disableAttribAuto("build",characterData.actor.attribs.build.value,npc.build,updateData),void 0!==characterData.actor.attribs.db?.value&&(value=String(characterData.actor.attribs.db.value).replace(/^\+\s*/,""),value!==String(npc.db)&&(updateData["data.attribs.db.auto"]=!1,updateData["data.attribs.db.value"]=value)),Object.keys(updateData).length>0&&(CONFIG.debug.CoC7Importer&&console.debug("updateData:",updateData),await npc.update(updateData));const updateItemData=[];let lastWeaponSkill=null;for(const pair of this.weaponSkills){!1!==pair[0]&&(lastWeaponSkill=npc.items.filter((i=>i.name===pair[0].name&&"skill"===i.type&&Number(i.data.data.value)===Number(pair[0].data.value))));const weapon=npc.items.filter((i=>i.name===pair[1].name&&"weapon"===i.type&&i.data.data.range.normal.damage===pair[1].data.range.normal.damage));lastWeaponSkill[0]&&weapon[0]&&updateItemData.push({_id:weapon[0].id,"data.skill.main.id":lastWeaponSkill[0].id,"data.skill.main.name":lastWeaponSkill[0].name})}return updateItemData.length>0&&(CONFIG.debug.CoC7Importer&&console.debug("updateItemData:",updateItemData),await npc.updateEmbeddedDocuments("Item",updateItemData)),npc}async createImportCharactersFolderIfNotExists(){let folderName=game.i18n.localize("CoC7.ImportedCharactersFolder");"CoC7.ImportedCharactersFolder"===folderName&&(folderName="Imported characters");let importedCharactersFolder=game.folders.find((entry=>entry.data.name===folderName&&"Actor"===entry.data.type));return null==importedCharactersFolder&&(importedCharactersFolder=await Folder.create({name:folderName,type:"Actor",parent:null}),ui.notifications.info(game.i18n.localize("CoC7.CreatedImportedCharactersFolder"))),importedCharactersFolder}actorData(pc){const data={characteristics:{},attribs:{},infos:{},special:{},description:{keeper:""},flags:{locked:!1,displayFormula:!1}};for(const key of["str","con","siz","dex","app","int","pow","edu"])void 0!==pc[key]&&(data.characteristics[key]={value:Number(pc[key])});for(const key of["san","mov","build","armor","lck","hp","mp"])void 0!==pc[key]&&(data.attribs[key]={value:Number(pc[key])});void 0!==pc.db&&(data.attribs.db={value:pc.db});for(const key of["age","occupation"])void 0!==pc[key]&&(data.infos[key]=pc[key]);if(void 0!==pc.sanLoss){const[passed,failed]=pc.sanLoss.split("/");data.special.sanLoss={checkPassed:passed,checkFailled:failed}}return void 0!==pc.attacksPerRound&&(data.special.attacksPerRound=Number(pc.attacksPerRound)),data.description.keeper=pc.gmnotes,CONFIG.debug.CoC7Importer&&console.debug("actorData:",data),data}async guessItem(type,name,{combat=null}={}){name=name.toLowerCase();let existing=null;for(let o=0,oM=this.itemLocations.length;o<oM;o++)switch(this.itemLocations.substr(o,1)){case"i":if(existing=game.items.find((item=>item.data.type===type&&item.data.name.toLowerCase()===name&&(null===combat||item.data.properties.combat===combat))),existing)return existing;break;case"w":case"m":case"s":for(const pack of game.packs)if("Item"===pack.metadata.entity&&("w"===this.itemLocations[o]&&"world"===pack.metadata.package||"S"===this.itemLocations[o]&&"CoC7"===pack.metadata.package||"s"===this.itemLocations[o]&&!["world","CoC7"].includes(pack.metadata.package))){if(existing=(await pack.getDocuments()).find((item=>item.data.type===type&&item.data.name.toLowerCase()===name&&(null===combat||item.data.properties.combat===combat))),existing)return existing}}}async itemsData(pc){const items=[];if(this.weaponSkills=[],void 0!==pc.attacks)for(const attack of pc.attacks){let skill=!1;!0!==attack.data?.skill?.id&&(skill=await this.weaponSkill(attack),items.push(skill)),attack.data.skill.id=null,items.push(attack),this.weaponSkills.push([skill,attack])}if(void 0!==pc.skills)for(const skill of pc.skills){const existing=await this.guessItem("skill",skill.name);if(void 0!==existing){const cloned=existing.toObject();cloned.data.base=skill.value,void 0!==skill.push&&(cloned.data.properties.push=skill.push),items.push(duplicate(cloned))}else{const options={};void 0!==skill.push&&(options.push=skill.push),items.push(CoCActor.emptySkill(skill.name,skill.value,options))}}if(void 0!==pc.languages)for(const skill of pc.languages){const existing=await this.guessItem("skill",skill.name);if(void 0!==existing){const cloned=existing.toObject();cloned.data.base=skill.value,items.push(duplicate(cloned))}else items.push(CoCActor.emptySkill(skill.name,skill.value,{img:CoC7Item.iconLanguage,specialization:"Language"}))}if(void 0!==pc.spells)for(const name of pc.spells){const existing=await this.guessItem("spell",name);if(void 0!==existing){const cloned=existing.toObject();items.push(duplicate(cloned))}else items.push(CoCActor.emptySpell(name))}return items}basicWeaponSkillData(firearms){return{specialization:game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName"),properties:{special:!0,fighting:!firearms,firearm:firearms,combat:!0}}}async weaponSkill(weapon){let skill=null;if(this.getRegEx("handgun").exec(weapon.name)?(skill=await this.guessItem("skill","Handgun",{combat:!0}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Handgun skill: ${skill}`)):this.getRegEx("rifle").exec(weapon.name)?(skill=await this.guessItem("skill","Rifle/Shotgun",{combat:!0}),skill||(skill=await this.guessItem("skill","Rifle",{combat:!0}),skill||(skill=await this.guessItem("skill","Shotgun",{combat:!0}))),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Rifle skill: ${skill}`)):this.getRegEx("smb").exec(weapon.name)?(skill=await this.guessItem("skill","Submachine Gun",{combat:!0}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Submachine Gun skill: ${skill}`)):this.getRegEx("machineGun").exec(weapon.name)?(skill=await this.guessItem("skill","Machine Gun",{combat:!0}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Machine Gun skill: ${skill}`)):this.getRegEx("launched").exec(weapon.name)&&(skill=await this.guessItem("skill","Launch",{combat:!0}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Launch skill: ${skill}`)),null!=skill){return skill.clone({data:{value:weapon.data?.skill?.id}})}const newSkill={name:weapon.name,type:"skill",data:this.basicWeaponSkillData(weapon.data?.properties?.rngd)};return newSkill.data.base=weapon.data?.skill?.id,newSkill.data.value=weapon.data?.skill?.id,CONFIG.debug.CoC7Importer&&console.debug(`Weapon skill not found for ${weapon.name}, creating a new one`,newSkill),newSkill}needsConversion(npc){let needsConversionResult=!0;for(const key of["str","con","siz","dex","app","int","pow","edu"])void 0!==npc[key]&&npc[key]>30&&(needsConversionResult=!1);return CONFIG.debug.CoC7Importer&&console.debug("needsConversion:",needsConversionResult),needsConversionResult}async createActor(inputs){CONFIG.debug.CoC7Importer&&console.debug("createActor:",inputs);const lang=CoC7ActorImporterRegExp.checkLanguage(inputs.lang);this.keys=CoC7ActorImporterRegExp.getKeys(lang),this.regEx=CoC7ActorImporterRegExp.getRegularExpressions(lang),this.itemLocations=inputs.source,CONFIG.debug.CoC7Importer&&console.debug("Regular Expressions:",lang,this.keys,this.regEx);let character=await this.parseCharacter(inputs.text);CONFIG.debug.CoC7Importer&&console.debug("parseCharacter:",character),("coc-guess"===inputs.convertFrom6E&&this.needsConversion(character)||"coc-convert"===inputs.convertFrom6E)&&(character=await this.convert7E(character));const characterData={name:character.name,actor:this.actorData(character),items:await this.itemsData(character)};if(void 0!==inputs.testMode&&!0===inputs.testMode)return characterData;return await this.createEntity(characterData,inputs.entity)}async convert7E(creature){CONFIG.debug.CoC7Importer&&console.debug("Converting npc",creature);for(const key of["str","con","siz","dex","app","int","pow"])void 0!==creature[key]&&(creature[key]*=5);return void 0!==creature.edu&&(creature.edu<=18?creature.edu*=5:creature.edu<=26?creature.edu=creature.edu+90-18:creature.edu=99),void 0!==creature.db&&("-1d4"===creature.db?creature.db=-1:"-1d6"===creature.db&&(creature.db=-2)),CONFIG.debug.CoC7Importer&&console.debug("convert7E: ",creature),creature}}class CoC7ActorImporterDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find("option[value="+game.i18n.lang+"]").attr("selected","selected"),html.find("#coc-entity-lang").on("change",(function(e){$("#coc-pasted-character-data").prop("placeholder",CoC7ActorImporterRegExp.getExampleText($(this).val()))})).trigger("change"),html.find("#coc-pasted-character-data").on("keyup",(function(e){const charactersTooExtended=$(this).val().match(/[\udbc0-\udbfe][\udc00-\udfff]/),prompt=$("#coc-prompt");charactersTooExtended?prompt.html(game.i18n.localize("CoC7.TextFieldInvalidCharacters")).addClass("error"):prompt.html(game.i18n.localize("CoC7.PasteTheDataBelow")).removeClass("error")}))}static async getInputs(){const inputs={};inputs.entity=$("#coc-entity-type").val().trim(),inputs.convertFrom6E=$("#coc-convert-6E").val().trim(),CONFIG.debug.CoC7Importer&&console.debug("entity type:",inputs.entity),inputs.lang=CoC7ActorImporterRegExp.checkLanguage($("#coc-entity-lang").val().trim()),inputs.source=$("#source").val().trim();let text=$("#coc-pasted-character-data").val().trim();return CONFIG.debug.CoC7Importer&&console.debug("received text","##"+text+"##"),"."!==text[text.length]&&(text+="."),inputs.text=text,inputs}static async importActor(html){CONFIG.debug.CoC7Importer&&console.debug("html",html);const inputs=await CoC7ActorImporterDialog.getInputs(),actor=new CoC7ActorImporter,createdActor=await actor.createActor(inputs);CONFIG.debug.CoC7Importer&&console.debug("createdActor:",createdActor),ui.notifications.info("Created "+createdActor.data?.type?.toUpperCase()+": "+createdActor.data?.name),await createdActor.sheet.render(!0)}submit(button){""===$("#coc-pasted-character-data").val().trim()&&button.callback||super.submit(button)}static async create(data={}){data.languages=CoC7ActorImporterRegExp.getTranslations(),data.language=CoC7ActorImporterRegExp.checkLanguage(null);const html=await renderTemplate("systems/CoC7/templates/apps/actor-importer.html",data);return new Promise((resolve=>{new CoC7ActorImporterDialog({title:data.title,content:html,data,buttons:{import:{icon:'<i class="fas fa-file-import"></i>',label:game.i18n.localize("CoC7.Import"),callback:CoC7ActorImporterDialog.importActor},no:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel")}}},{classes:["coc7","dialog","actor-importer"],width:600}).render(!0)}))}}Hooks.once("ready",(()=>{game.modules.get("CoC7-Importer-Tests")?.active&&(window.CoC7ActorImporter=CoC7ActorImporter)}));class CoC7MenuLayer extends PlaceablesLayer{constructor(){super(),this.objects={}}static get layerOptions(){return foundry.utils.mergeObject(super.layerOptions,{name:"coc7menu",zIndex:60})}static get documentName(){return"Token"}get placeables(){return[]}}class CoC7Menu{static getButtons(controls){canvas.coc7gmtools=new CoC7MenuLayer;const isGM=game.user.isGM;controls.push({name:"coc7menu",title:"CoC7.GmTools",layer:"coc7gmtools",icon:"game-icon game-icon-tentacle-strike",visible:isGM,tools:[{toggle:!0,icon:"fas fa-angle-double-up",name:"devphase",active:game.settings.get("CoC7","developmentEnabled"),title:"CoC7.DevPhase",onClick:async toggle=>await CoC7Utilities.toggleDevPhase(toggle)},{toggle:!0,icon:"fas fa-user-edit",name:"charcreate",active:game.settings.get("CoC7","charCreationEnabled"),title:"CoC7.CharCreationMode",onClick:async toggle=>await CoC7Utilities.toggleCharCreation(toggle)},{button:!0,icon:"fas fa-user-plus",name:"actor-import",title:"CoC7.ActorImporter",onClick:async()=>await CoC7ActorImporterDialog.create({title:game.i18n.localize("CoC7.ActorImporter")})},{toggle:!0,icon:"fas fa-certificate",class:"xp_toggle",name:"xptoggle",active:game.settings.get("CoC7","xpEnabled"),title:"CoC7.toggleXP",onClick:async toggle=>await CoC7Utilities.toggleXPGain(toggle)},{button:!0,icon:"game-icon game-icon-card-joker",name:"fakeroll",title:"CoC7.FakeRoll",onClick:CoC7Chat.fakeRollMessage},{button:!0,icon:"fas fa-moon",name:"startrest",title:"CoC7.startRest",onClick:async()=>await CoC7Utilities.startRest()}]})}static renderControls(app,html,data){const isGM=game.user.isGM,keeperMenu=html.find(".game-icon-tentacle-strike").parent();keeperMenu.addClass("coc7-menu"),isGM&&keeperMenu.after('<li class="scene-control coc7-menu coc7-create-link" title="'+game.i18n.localize("CoC7.CreateLink")+'"><i class="fas fa-link"></i></li>'),keeperMenu.after('<li class="scene-control coc7-menu coc7-dice-roll" title="'+game.i18n.localize("CoC7.RollDice")+'"><i class="game-icon game-icon-d10"></i></li>'),html.find(".coc7-menu.coc7-dice-roll").click((event=>CoC7Utilities.rollDice(event))),html.find(".coc7-menu.coc7-create-link").click((event=>CoC7LinkCreationDialog.create(event)))}}class CoC7Canvas{static get COC7_TYPES_SUPPORTED(){return["link"]}static async onDropSomething(canvas,item){if(item.CoC7Type&&CoC7Canvas.COC7_TYPES_SUPPORTED.includes(item.CoC7Type)){const gridSize=canvas.scene.data.grid,x=item.x-gridSize/2,y=item.y-gridSize/2,height=gridSize,width=gridSize;let dropTargetTokens=canvas.tokens.placeables.filter((obj=>{const c=obj.center;return Number.between(c.x,x,x+width)&&Number.between(c.y,y,y+height)}));switch(dropTargetTokens.length||(dropTargetTokens=canvas.tokens.controlled),item.CoC7Type){case"link":{const link=await CoC7Link.fromData(item);link.link||ui.notifications.error("Invalid link");const option={};if(option.speaker={alias:game.user.name},dropTargetTokens.length)for(const t of dropTargetTokens)t.actor.hasPlayerOwner&&(option.whisper=t.actor.owners,chatHelper.createMessage(null,game.i18n.format("CoC7.MessageTargetCheckRequested",{name:t.actor.name,check:link.link}),option));else{const whisperTargets=game.users.players.filter((u=>!!u.character));for(const u of whisperTargets)option.whisper=[u],chatHelper.createMessage(null,game.i18n.format("CoC7.MessageTargetCheckRequested",{name:u.character.name,check:link.link}),option)}}}}}}class CoC7CompendiumDirectory extends CompendiumDirectory{activateListeners(html){super.activateListeners(html);let translated=!1;if("en"===game.i18n.lang)translated=!0;else if(void 0!==game.babele)for(const v of Object.values(game.babele.modules))v.lang===game.i18n.lang&&(translated=!0);translated||(html.find("footer.directory-footer").append('<a class="compendium-translation" title="'+game.i18n.localize("CoC7.HowToTranslateTitle")+'">'+game.i18n.localize("CoC7.HowToTranslateTitle")+"</a>"),html.find(".compendium-translation").click((()=>{const message="<p>"+game.i18n.localize("CoC7.HowToTranslateWarning")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateInstallBabele")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateInstallTranslation")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateEnableTranslation")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateNoTranslation")+"</p>";new Dialog({title:game.i18n.localize("CoC7.HowToTranslateTitle"),content:message,buttons:{},default:"close"},{}).render(!0)})))}}class CoC7ActorDirectory extends ActorDirectory{activateListeners(html){super.activateListeners(html),html.find("footer.directory-footer").append('<a class="actor-import">'+game.i18n.localize("CoC7.ActorImporter")+"</a>"),html.find(".actor-import").click((()=>{CoC7ActorImporterDialog.create({title:game.i18n.localize("CoC7.ActorImporter")})}))}}class CoC7Spell extends CoC7Item{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/pentagram-rose.svg"),super(data,context),this.context=context}async cast(){if(!this.isOwned)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));const costs=this.data.data.costs,losses=[];for(const[key,value]of Object.entries(costs))value&&0!==Number(value)&&losses.push(await this.resolveLosses(key,value));const description=this.data.data.description.value,html=await renderTemplate("systems/CoC7/templates/items/spell/chat.html",{description,losses});return await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:this.name,content:html})}async resolveLosses(characteristic,value){let characteristicName,loss;loss=CoC7Utilities.isFormula(value)?(await new Roll(value).roll({async:!0})).total:parseInt(value);const actorData=this.actor.data.data;switch(characteristic){case"hitPoints":characteristicName=game.i18n.localize("CoC7.HitPoints"),this.actor.dealDamage(loss);break;case"sanity":characteristicName=game.i18n.localize("CoC7.SanityPoints"),this.grantSanityLoss(loss);break;case"magicPoints":characteristicName=game.i18n.localize("CoC7.MagicPoints"),this.actor.update({"data.attribs.mp.value":actorData.attribs.mp.value-loss});break;case"power":characteristicName=game.i18n.localize("CHARAC.Power"),this.actor.update({"data.characteristics.pow.value":actorData.characteristics.pow.value-loss})}return{characteristicName,loss}}async grantSanityLoss(value){const template=SanCheckCard.template;let html=await renderTemplate(template,{});const message=await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.CastingSpell",{spell:this.name}),content:html}),card=await message.getHTML();if(void 0!==card.length&&1===card.length){const sanityLoss=value;html=card.find(".chat-card")[0],html.dataset.object=escape(JSON.stringify({actorKey:this.actor.id,fastForward:!1,sanData:{sanMin:sanityLoss,sanMax:sanityLoss}}));const sanityCheck=SanCheckCard.getFromCard(html);await sanityCheck.bypassRollSan(),await sanityCheck.rollSanLoss(),sanityCheck.updateChatCard()}}update(data,context){if(void 0!==this.context.parent&&void 0!==this.context.bookId){let item,book;null===this.context.parent?(item=game.items.get(this.context.bookId),book=item.toObject()):book=this.context.parent.items.get(this.context.bookId).toObject();for(let i=0,im=book.data.spells.length;i<im;i++)book.data.spells[i]._id===this.id&&(book.data.spells[i]=mergeObject(book.data.spells[i],data));null===this.context.parent?item.update({"data.spells":book.data.spells}):this.context.parent.updateEmbeddedDocuments("Item",[book])}else super.update(data,context)}}class CoC7Book extends CoC7Item{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/secret-book.svg"),super(data,context)}static convertDifficulty(difficulty){switch(difficulty){case"hard":return CoC7Check.difficultyLevel.hard;case"extreme":return CoC7Check.difficultyLevel.extreme;case"critical":return CoC7Check.difficultyLevel.critical;case"unreadable":return CoC7Check.difficultyLevel.impossible;default:return CoC7Check.difficultyLevel.regular}}async addSpells(spells){const collection=this.data.data.spells?duplicate(this.data.data.spells):[];for(const spell of spells)collection.push(spell);return await this.update({"data.spells":collection})}async spellDetail(index){const data=this.data.data.spells[index],parent=this.actor?this.actor:null,spell=new CoC7Spell(data,{parent,bookId:this.id});return await spell.sheet.render(!0)}async attemptInitialReading(){const difficulty=CoC7Book.convertDifficulty(this.data.data.difficultyLevel),language=this.data.data.language,skill=this.actor?.getSkillsByName(language);if(skill){if(0===skill.length)return ui.notifications.error(game.i18n.format("CoC7.UnknownLanguage",{actor:this.actor.name}));{const check=new CoC7Check;return check.actor=this.actor,check.skill=skill[0].id,check.difficulty=difficulty,check.parent=this.uuid,check.context="INITIAL_READING",check.flavor=game.i18n.format("CoC7.ReadAttempt",{book:this.name,language,difficulty:this.data.data.difficultyLevel}),await check.roll(),await check.toMessage()}}return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"))}async changeProgress(mode,value){if(!this.isOwned&&"reset"!==mode)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));if(!this.data.data.initialReading&&"reset"!==mode)return ui.notifications.error(game.i18n.format("CoC7.InitialReadingNeeded",{actor:this.actor.name,book:this.name}));if(!this.data.data.type.mythos&&"reset"!==mode)return ui.notifications.error(game.i18n.localize("CoC7.NotMythosTome"));const necessary=this.data.data.study.necessary;let fullStudy=this.data.data.fullStudy,progress=this.data.data.study.progress;if(isNaN(progress))return await this.update({"data.study.progress":0});if(value&&progress>value)return await this.update({"data.fullStudy":++fullStudy,"data.study.progress":value}),await this.completeFullStudy();if("increase"===mode&&progress<necessary){if(!1!==await this.checkExhaustion())return;if(await this.update({"data.study.progress":++progress}),progress===necessary)return await this.update({"data.fullStudy":++fullStudy}),await this.grantFullStudy()}else if("decrease"===mode&&progress>0)return await this.update({"data.study.progress":--progress})}async checkExhaustion(){const actorMythosValue=this.actor?.cthulhuMythos,mythosRating=this.data.data.mythosRating;if(this.data.data.initialReading)return actorMythosValue>=mythosRating&&(await this.update({"data.study.progress":this.data.data.study.necessary}),ui.notifications.warn(game.i18n.format("CoC7.BookHasNothingMoreToTeach",{actor:this.actor.name,book:this.name})))}async grantFullStudy(){if(!this.data.data.type.mythos)return;if(!1!==await this.checkExhaustion())return;const actorMythosValue=this.actor.cthulhuMythos,developments=[],mythosRating=this.data.data.mythosRating;let mythosFinal=this.data.data.gains.cthulhuMythos.final;if(actorMythosValue+mythosFinal>mythosRating)for(let index=1;index<=mythosFinal;index++)actorMythosValue+mythosFinal-index<=mythosRating&&(mythosFinal-=index);return developments.push({name:game.i18n.localize("CoC7.CthulhuMythosName"),gain:parseInt(mythosFinal)},{name:this.data.data.language,gain:"development"}),await this.grantSkillDevelopment(developments),await this.rollSanityLoss(),await this.update({"data.fullStudies":++this.data.data.fullStudies})}async grantInitialReading(){if(this.data.data.initialReading)return;const developments=[],mythos={gains:this.data.data.gains.cthulhuMythos.initial,type:this.data.data.type.mythos},occult={gains:this.data.data.gains.occult,type:this.data.data.type.occult},other_gains=this.data.data.gains.others,other_type=this.data.data.type.other;if(mythos.type&&mythos.gains&&developments.push({name:game.i18n.localize("CoC7.CthulhuMythosName"),gain:parseInt(mythos.gains)}),occult.type&&occult.gains&&developments.push({name:game.i18n.localize("CoC7.Occult"),gain:parseInt(occult.gains)}),other_type)for(const skill of other_gains){const pattern=skill.name.match(/^(.+) \((.+)\)$/);pattern&&(skill.specialization=pattern[1],skill.name=pattern[2]),"development"!==skill.value&&(skill.value=(await new Roll(skill.value).roll({async:!0})).total),skill.value&&developments.push({name:skill.name,gain:skill.value,specialization:skill.specialization})}return await this.grantSkillDevelopment(developments),(mythos.type||occult.type)&&this.data.data.sanityLoss&&await this.rollSanityLoss(),await this.update({"data.initialReading":!0})}async grantSpellLearning(){return ui.notifications.warn("Automation of learning spells from books is not currently supported and will be added in future updates.")}async grantSkillDevelopment(developments){if(0!==developments.length){for(const development of developments){if(!development.gain)continue;let skill=await this.actor.getSkillsByName(development.name);if(0===skill.length){const existingSkill=await game.items.find((item=>"skill"===item.data.type&&item.data.name===development.name));existingSkill?skill=await this.actor.createEmbeddedDocuments("Item",[duplicate(existingSkill)]):(skill=await this.actor.createSkill(development.name,0),development.specialization&&await skill[0].update({"data.properties.special":!0,"data.specialization":development.specialization}))}if(skill=skill[0],"development"===development.gain)await skill.flagForDevelopement();else{if(skill.value+development.gain>99)for(let index=1;index<=development.gain;index++)skill.value+development.gain-index<=99&&(development.gain-=index,await skill.increaseExperience(development.gain));await skill.increaseExperience(development.gain)}}return this.showDevelopmentsTable(developments)}}async redoFullStudy(){return await this.update({"data.study.progress":0}),await this.update({"data.study.necessary":2*this.data.data.study.necessary})}async rollSanityLoss(){const value=this.data.data.sanityLoss;if(!value||""===value)return;const template=SanCheckCard.template;let html=await renderTemplate(template,{});const message=await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.ReadingMythosTome",{book:this.name}),content:html}),card=await message.getHTML();if(void 0!==card.length&&1===card.length){const sanityLoss=(await new Roll(value).roll({async:!0})).total;html=card.find(".chat-card")[0],html.dataset.object=escape(JSON.stringify({actorKey:this.actor.id,fastForward:!1,sanData:{sanMin:sanityLoss,sanMax:sanityLoss}}));const sanityCheck=SanCheckCard.getFromCard(html);await sanityCheck.bypassRollSan(),await sanityCheck.rollSanLoss(),sanityCheck.updateChatCard()}}async showDevelopmentsTable(developments){for(const development of developments)development.specialization&&(development.name=`${development.specialization} (${development.name})`),"development"===development.gain?development.gain=game.i18n.localize("CoC7.MarkedForDevelopment"):development.gain=`+${development.gain} ${game.i18n.localize("CoC7.Points")}`;const html=await renderTemplate("systems/CoC7/templates/items/book/development.html",{developments});return await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.GainsForReading",{book:this.name}),content:html})}async attemptSpellLearning(id){if(!this.isOwned)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));if(!this.data.data.initialReading)return ui.notifications.error(game.i18n.format("CoC7.InitialReadingNeeded",{actor:this.actor.name,book:this.name}));const spell=this.data.data.spells.find((spell=>spell._id===id));if(spell){const check=new CoC7Check;check.actor=this.actor,check.difficulty=CoC7Check.difficultyLevel.hard,check.parent=this.uuid,check.flavor=game.i18n.format("CoC7.LearnSpellAttempt",{book:this.name,spell:spell.name}),check.context="SPELL_LEARNING",await check.rollCharacteristic("int"),await check.toMessage()}}async updateRoll(roll){const check=CoC7Check.fromRollString(roll);if(check.passed){if("INITIAL_READING"===check.context)return await this.grantInitialReading();if("SPELL_LEARNING"===check.context)return await this.grantSpellLearning()}}}class CoC7DecaderDie extends DiceTerm{constructor(termData){super(termData),this.faces=10}get total(){const total=super.total;return 10===total?0:10*total}static get DENOMINATION(){return"t"}}class CoC7ArchetypeSheet extends ItemSheet{activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"skills"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"skills"))))}async _onDrop(event,type="skill",collectionName="skills"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item"),collection=this.item.data.data[collectionName]?duplicate(this.item.data.data[collectionName]):[];for(const item of dataList)item&&item.data&&[type].includes(item.data.type)&&(!CoC7Item.isAnySpec(item)&&collection.find((el=>el.name===item.data.name))||collection.push(duplicate(item.data)));await this.item.update({[`data.${collectionName}`]:collection})}_onItemSummary(event,collectionName="items"){event.preventDefault();const li=$(event.currentTarget).parents(".item"),chatData=this.item.data.data[collectionName].find((s=>s._id===li.data("item-id"))).data.description;if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData.value}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const itemIndex=$(event.currentTarget).parents(".item").data("item-id");itemIndex&&await this.removeItem(itemIndex,collectionName)}async removeItem(itemId,collectionName="items"){const itemIndex=this.item.data.data[collectionName].findIndex((s=>s._id===itemId));if(itemIndex>-1){const collection=this.item.data.data[collectionName]?duplicate(this.item.data.data[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`data.${collectionName}`]:collection})}}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","occupation"],width:520,height:480,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}get template(){return"systems/CoC7/templates/items/archetype.html"}_onDragStart(event){const li=event.currentTarget.closest(".item"),dragData={type:"Item",data:this.item.data.data.skills.find((s=>s._id===li.dataset.itemId))};event.dataTransfer.setData("text/plain",JSON.stringify(dragData))}getData(){const data=super.getData(),itemData=data.data;data.data=itemData.data,data.isOwned=this.item.isOwned;const coreCharacteristics=[];for(const[key,selected]of Object.entries(data.data.coreCharacteristics))if(selected){const characName=game.i18n.localize(`CHARAC.${key.toUpperCase()}`);coreCharacteristics.push(characName)}data.skillListEmpty=0===data.data.skills.length;for(const skill of data.data.skills)skill.data.specialization&&!skill.name.includes(skill.data.specialization)?skill.displayName=`${skill.data.specialization} (${skill.name})`:skill.displayName=skill.name;data.data.skills.sort(((a,b)=>a.displayName.localeCompare(b.displayName))),data.coreCharacteristicsString="";const orString=` ${game.i18n.localize("CoC7.Or")} `;return coreCharacteristics.length&&(data.coreCharacteristicsString+=coreCharacteristics.join(orString)),data.itemProperties=[],data.itemProperties.push(`${game.i18n.localize("CoC7.PulpTalents")}: ${data.data.talents}`),data.itemProperties.push(`${game.i18n.localize("CoC7.BonusPoints")}: ${data.data.bonusPoints}`),data.isKeeper=game.user.isGM,data}_updateObject(event,formData){if(formData.data||(formData=expandObject(formData)),formData.data.groups){formData.data.groups=Object.values(formData.data?.groups||{});for(let index=0;index<this.item.data.data.groups.length;index++)formData.data.groups[index].skills=duplicate(this.item.data.data.groups[index].skills)}super._updateObject(event,formData)}}class CoC7BookSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/items/book/main.html",classes:["coc7","item","book"],width:500,height:"auto",resizable:!1,dragDrop:[{dragSelector:".spells",dropSelector:null}],scrollY:[".body"],tabs:[{navSelector:".navigation",contentSelector:".body",initial:"description"}]})}async getData(){const data=super.getData(),itemData=data.data;return data.data=itemData.data,data.initialReading=this.item.data.data.initialReading,data.isKeeper=game.user.isGM,data.isOwned=this.item.isOwned,data.spellsLearned=this.spellsLearned,data.exhausted=!1!==await this.item.checkExhaustion(),data.studyCompleted=this.item.data.data.study.progress===this.item.data.data.study.necessary,data.spellListEmpty=0===data.data.spells.length,data}get spellsLearned(){let amount=0;const spells=this.item.data.data.spells;for(const spell of spells)spell.data.learned&&amount++;return`${amount} / ${spells.length}`}activateListeners(html){super.activateListeners(html),html.find("#attempt-initial-reading").click((event=>{event.preventDefault(),this.item.attemptInitialReading()})),html.find(".delete-spell").click((event=>this._onDelete(event))),html.find(".edit-spell").click((event=>this._onSpellDetail(event))),html.find(".spell-name").click((event=>this._onSpellDetail(event))),html.find(".teach-spell").click((event=>{const id=$(event.currentTarget).parents("li").data("id");this.item.attemptSpellLearning(id)})),html.find('[name="data.study.necessary"]').change((event=>{const value=parseInt(event.currentTarget.value);this.item.changeProgress("reset",value)})),html.find("#increase-progress").click((()=>{this.item.changeProgress("increase")})),html.find("#decrease-progress").click((()=>{this.item.changeProgress("decrease")})),html.find(".add-other-gains").click((event=>{this.modifyOthersGains(event,"add")})),html.find(".change-other-gains").change((event=>{this.modifyOthersGains(event,"change")})),html.find("#redo-full-study").click((()=>{this.item.redoFullStudy()})),html.find(".remove-other-gains").click((event=>{this.modifyOthersGains(event,"remove")})),html.find(".option").click((event=>this.modifyType(event)))}async _onSpellDetail(event){event.preventDefault();const index=$(event.currentTarget).parents("li").data("index");return await this.item.spellDetail(index)}async _onDelete(event){if(!game.user.isGM)return;event.preventDefault();const index=$(event.currentTarget).parents("li").data("index"),spells=this.item.data.data.spells?duplicate(this.item.data.data.spells):[];return index>=0&&spells.splice(index,1),await this.item.update({"data.spells":spells})}async _onDrop(event,type="spell"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item"),spells=[];for(const item of dataList)item&&["skill","spell"].includes(item.data.type)&&("spell"===item.data.type?spells.push(item.data):"skill"===item.data.type&&this.item.data.data.type.other&&this.modifyOthersGains(null,"add",{name:item.name}));await this.item.addSpells(spells)}modifyType(event){event.preventDefault(),event.stopPropagation();return $(event.currentTarget).prev().trigger("click")}async modifyOthersGains(event,mode,options={}){let index=null,element=null;event&&(event.preventDefault(),element=$(event.currentTarget),index=element.parents("tr").data("index"));const skills=this.item.data.data.gains.others?duplicate(this.item.data.data.gains.others):[];switch(mode){case"add":skills.push({name:options.name||game.i18n.localize("CoC7.NewSkillName"),value:"development"});break;case"change":skills[index]={name:element.is("input")?element.val():skills[index].name,value:element.is("select")?element.val():skills[index].value};break;case"remove":index>=0&&skills.splice(index,1)}return await this.item.update({"data.gains.others":skills})}}class CoC7CharacterSheet extends CoC7CharacterSheetV2{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","character"],template:"systems/CoC7/templates/actors/character-sheet.html",width:672,height:765})}}class CoC7ContainerSheet extends ActorSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","storage"],template:"systems/CoC7/templates/actors/storage-sheet.html",width:672,height:765,dragDrop:[{dragSelector:".item",dropSelector:null}],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"items"}]})}async _onDropFolder(event,data){if(!this.actor.isOwner)return[];if("Item"!==data.documentName)return[];const folder=game.folders.get(data.id);if(!folder)return[];const items=folder.contents.filter((item=>["book","item","spell","weapon"].includes(item.type))).map((item=>item.toJSON()));items.length>0&&await this.actor.createEmbeddedDocuments("Item",items)}onCloseSheet(){}async getData(){const data=await super.getData(),sheetData=data.data;if(sheetData.isKeeper=game.user.isGM,sheetData.editable=this.isEditable,sheetData.itemsByType={},data.items){for(const item of data.items)Object.prototype.hasOwnProperty.call(sheetData.itemsByType,item.type)||(sheetData.itemsByType[item.type]=[]),sheetData.itemsByType[item.type].push(item);for(const itemType in sheetData.itemsByType)sheetData.itemsByType[itemType].sort(((a,b)=>a.name.localeCompare(b.name)))}return sheetData.allowUnlock="always"===game.settings.get("CoC7","playerUnlockSheetMode")||game.user.isGM,sheetData.showInventoryItems=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"item")||!sheetData.data.flags.locked,sheetData.showInventoryBooks=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"book")||!sheetData.data.flags.locked,sheetData.showInventorySpells=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"spell")||!sheetData.data.flags.locked,sheetData.showInventoryTalents=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"talent")||!sheetData.data.flags.locked,sheetData.showInventoryWeapons=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"weapon")||!sheetData.data.flags.locked,sheetData.hasInventory=sheetData.showInventoryItems||sheetData.showInventoryBooks||sheetData.showInventorySpells||sheetData.showInventoryTalents||sheetData.showInventoryStatuses||sheetData.showInventoryWeapons,sheetData}activateListeners(html){super.activateListeners(html),html.find(".item-edit").click((ev=>{const li=$(ev.currentTarget).parents(".item");this.actor.items.get(li.data("itemId")).sheet.render(!0)})),html.find(".inventory-header").click(this._onInventoryHeader.bind(this)),html.find(".item-trade").click(this._onTradeItem.bind(this)),html.find(".show-detail").click(this._onItemSummary.bind(this)),html.find(".item-delete").click((async ev=>{const li=$(ev.currentTarget).parents(".item"),itemToDelete=this.actor.items.get(li.data("itemId"),{strict:!0});await itemToDelete.delete(),li.slideUp(200,(()=>this.render(!1)))})),html.find(".add-item").click((ev=>{switch(ev.currentTarget.dataset.type){case"book":this.actor.createEmptyBook(ev);break;case"item":this.actor.createEmptyItem(ev);break;case"skill":this.actor.createEmptySkill(ev);break;case"spell":this.actor.createEmptySpell(ev);break;case"weapon":this.actor.createEmptyWeapon(ev)}})),html.find(".lock").click(this._onLockClicked.bind(this))}async _onLockClicked(event){event.preventDefault();const isLocked=this.actor.locked;this.actor.locked=!isLocked}async _onTradeItem(event){const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("itemId"));let content="<p>"+game.i18n.localize("CoC7.MessageSelectUserToGiveTo");const message={actorFrom:this.actor.id,scene:null,actorTo:this.actor.id,item:item.id};this.token?.actor&&(message.actorFrom=this.token.id,message.scene=this.token.parent.id);const actors=game.actors.filter((e=>{if(!["character","npc","creature","container"].includes(e.type))return!1;if(this.actor.id===e.id)return!1;let visible=!1;for(const[k,v]of Object.entries(e.data.permission))"default"!==k&&k!==game.user.id||(visible=visible||v!==CONST.ENTITY_PERMISSIONS.NONE);return visible}));content+='<form id="selectform"><select name="user">';for(const actor of actors)content=content+'<option value="'+actor.id+'">'+actor.name+"</option>";content+="</select></form></p>",await Dialog.prompt({title:game.i18n.localize("CoC7.MessageTitleSelectUserToGiveTo"),content,callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)"user"===name&&(message.actorTo=value)}}),await game.CoC7socket.executeAsGM("gmtradeitemto",message)}_onItemSummary(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id")),chatData=item.getChatData({secrets:this.actor.isOwner});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$('<div class="item-summary"></div>'),labels=$('<div class="item-labels"></div>');for(const p of chatData.labels)labels.append(`<div class="item-label"><span class="label-name">${p.name} :</span><span class="label-value">${p.value}</span></div>`);if(div.append(labels),div.append($(`<div class="item-description">${chatData.description.value}</div>`)),item.data.data.properties?.spcl){const specialDiv=$(`<div class="item-special">${chatData.description.special}</div>`);div.append(specialDiv)}const props=$('<div class="item-properties"></div>');for(const p of chatData.properties)props.append(`<div class="tag item-property">${game.i18n.localize(p)}</div>`);div.append(props),li.append(div.hide()),CoC7Parser.bindEventsHandler(div),div.slideDown(200)}li.toggleClass("expanded")}_onInventoryHeader(event){event.preventDefault(),$(event.currentTarget).siblings("li").slideToggle(200)}}class CoC7ChaseSheet extends ItemSheet{static get flags(){return{started:"started"}}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","item","chase"],width:550,height:500,resizable:!0,tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"participants"}]})}get template(){return"systems/CoC7/templates/items/chase.html"}static get type(){return"coc7ChaseSheet"}getData(options={}){ui.notifications.warn(game.i18n.localize("CoC7.ExperimentalFeaturesWarning"));const data=super.getData(options);this.started&&(this._tabs[0].active="setup");const itemData=data.data;return data.data=itemData.data,data.participants=this.participants,data.preys=this.preys,data.chasers=this.chasers,data.preysMinMov=data.preys.length?data.preys.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1,data.preysMaxMov=data.preys.length?data.preys.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1,data.chasersMinMov=data.chasers.length?data.chasers.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1,data.chasersMaxMov=data.chasers.length?data.chasers.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1,data.chasers.forEach((p=>{p.adjustedMov<data.preysMinMov?p.tooSlow():p.includeInChase(),p.fastest=p.adjustedMov==data.chasersMaxMov,p.slowest=p.adjustedMov==data.chasersMinMov})),data.preys.forEach((p=>{p.adjustedMov>data.chasersMaxMov?p.escaped():p.includeInChase(),p.fastest=p.adjustedMov==data.preysMaxMov,p.slowest=p.adjustedMov==data.preysMinMov})),data.locations=this.locations,data.allHaveValidMov=this.allHaveValidMov,data.activeLocation=this.activeLocation,data.previousLocation=this.previousLocation,data.nextLocation=this.nextLocation,data.started=this.started,data.dataListCheckOptions=this.allSkillsAndCharacteristics,data.isKeeper=game.user.isGM,data}get participants(){const pList=[];return this.item.data.data.participants.forEach((p=>{pList.push(new _participant(p)),p.index=pList.length-1})),pList.sort(((a,b)=>a.adjustedMov-b.adjustedMov)),pList}get allSkillsAndCharacteristics(){const list=[];return CoCActor.getCharacteristicDefinition().forEach((c=>list.push(`${game.i18n.localize("CoC7.Characteristics")} (${c.shortName})`))),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.Luck")})`),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.SAN")})`),game.CoC7.skillList?.forEach((s=>{list.includes(s.fullName)||s.fullName.toLowerCase().includes(`(${game.i18n.localize("CoC7.AnySpecName")})`.toLowerCase())||list.push(s.fullName)})),this.participants.forEach((p=>{p.actor&&p.actor.skills.forEach((s=>{list.includes(s.fullName)||list.push(s.fullName)}))})),list.sort(Intl.Collator().compare)}get preys(){return this.participants.filter((p=>!p.isChaser&&p.isValid)).sort(((a,b)=>a.adjustedMov-b.adjustedMov))||[]}get chasers(){return this.participants.filter((p=>p.isChaser&&p.isValid)).sort(((a,b)=>a.adjustedMov-b.adjustedMov))||[]}findMinMov(list){return list?.length?list.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1}findMaxMov(list){return list?.length?list.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1}processLocations(locations){if(locations?.length){locations[0].first=!0;for(let index=0;index<locations.length;index++){const classes=[],location=locations[index];location.name||classes.push("empty"),location.active&&classes.push("active"),location.init&&!this.started&&classes.push("init"),location.cssClasses=classes.join(" ")}locations.length>1&&(locations[locations.length-1].last=!0),locations.forEach((l=>{if(l.participants&&l.participants.length){for(let i=0;i<l.participants.length;i++){const elem=l.participants[i];let p;"string"==typeof elem||elem instanceof String?p=this.item.data.data.participants.find((p=>elem==p.uuid)):"_participant"==elem.constructor.name?(p=void 0,ui.notifications.warn("Participant was already processed.")):p=void 0,null!=p?l.participants[i]=new _participant(p):console.error("Undefined paticipant while processing participants array")}l.participants.sort(sortByRoleAndDex)}}))}}get locations(){const locations=this.started?this.item.data.data.locations.list?duplicate(this.item.data.data.locations.list):[]:this.initTrack;return this.processLocations(locations),locations}get initTrack(){if(!this.item.data.data.locations.list||0===this.item.data.data.locations.list.length)return;const locations=[],init=this.startingLine;let locationsIndexStart,initIndexStart,locationsLength;if(locationsIndexStart=0>=init.length||this.item.data.data.startingIndex>=init.length?0:init.length-this.item.data.data.startingIndex,initIndexStart=this.item.data.data.startingIndex<=0||this.item.data.data.startingIndex<=init.length?0:this.item.data.data.startingIndex-init.length,locationsLength=0==locationsIndexStart?this.item.data.data.locations.list.length:this.item.data.data.locations.list.length+locationsIndexStart,0!=init.length&&this.item.data.data.startingIndex<0)for(let index=0;index<Math.abs(this.item.data.data.startingIndex);index++)init.push({uuid:this.generateNewUuid(),init:!0,participants:[]});const chaseLocations=duplicate(this.item.data.data.locations);for(let index=0;index<locationsLength;index++){let location={};const participants=[];index>=locationsIndexStart&&index-locationsIndexStart<chaseLocations.list.length&&(location=duplicate(chaseLocations.list[index-locationsIndexStart]),location.init=!1,location.participants?.forEach((p=>{null!=p&&participants.push(p)}))),index>=initIndexStart&&index-initIndexStart<init.length&&(mergeObject(location,init[index-initIndexStart],{overwrite:!1}),init[index-initIndexStart].participants?.forEach((p=>{null!=p&&participants.push(p)})),location.participants=participants),location.first=!1,location.end=!1,locations.push(location)}return locations}get activeLocation(){if(this.locations)return this.locations.find((l=>l.active))}get previousLocation(){if(!this.locations)return;const activeIndex=this.locations.findIndex((l=>l.active));return-1!=activeIndex&&0!=activeIndex?this.locations[activeIndex-1]:void 0}get nextLocation(){if(!this.locations)return;const activeIndex=this.locations.findIndex((l=>l.active));return-1!=activeIndex&&activeIndex!=this.locations.length-1?this.locations[activeIndex+1]:void 0}get allHaveValidMov(){return this.participants.every((e=>e.hasValidMov))}get allHaveSpeedRoll(){return this.participants.every((p=>p.speedCheck?.rolled))}get started(){return this.item.getFlag("CoC7",CoC7ChaseSheet.flags.started)}async cutToTheChase(){if(this.allHaveSpeedRoll){if(this.allHaveValidMov){const participants=this.participants,minMov=this.findMinMov(participants);participants.forEach((p=>{p.data.movementAction=p.adjustedMov-minMov+1})),await this.updateParticipants(participants),await this.updateLocationsList(this.locations),await this.item.setFlag("CoC7",CoC7ChaseSheet.flags.started,!0)}}else ui.notifications.warn("Speed roll missing")}get startingLine(){const preys=this.item.data.data.includeEscaped?this.preys:this.preys?.filter((p=>!p.data.escaped)),chasers=this.chasers,track=[],chasersMinMov=this.findMinMov(chasers),chasersMaxMov=this.findMaxMov(chasers),preysMinMov=this.findMinMov(preys),preysMaxMov=this.findMaxMov(preys);if(-1!=chasersMinMov&&-1!=chasersMaxMov){for(let mov=chasersMinMov;mov<=chasersMaxMov;mov++){const location={uuid:this.generateNewUuid(),init:!0,participants:[]};chasers.filter((p=>mov==p.adjustedMov)).sort(((a,b)=>a.dex-b.dex)).forEach((p=>location.participants.push(p.uuid))),track.push(location)}for(let index=0;index<this.item.data.data.startingRange;index++)track.push({uuid:this.generateNewUuid(),init:!0,participants:[]})}if(-1!=preysMinMov&&-1!=preysMaxMov)for(let mov=preysMinMov;mov<=preysMaxMov;mov++){const location={uuid:this.generateNewUuid(),init:!0,participants:[]};preys.filter((p=>mov==p.adjustedMov)).sort(((a,b)=>a.dex-b.dex)).forEach((p=>location.participants.push(p.uuid))),track.push(location)}return track}generateNewUuid(){let uuid,unique=!1;for(;!unique;)uuid=foundry.utils.randomID(16),unique=0===this.item.data.data.participants.filter((p=>p.uuid==uuid)).length&&0===this.item.data.data.locations.list.filter((p=>p.uuid==uuid)).length;return uuid}activateListeners(html){super.activateListeners(html),html.on("dblclick",".open-actor",CoC7Chat._onOpenActor.bind(this)),html.find(".participant").on("dragenter",(event=>this._onDragEnterParticipant(event))),html.find(".participant").on("dragover",(event=>this._onDragEnterParticipant(event))),html.find(".participant").on("dragleave",(event=>this._onDragLeaveParticipant(event))),html.find(".participant").on("drop",(event=>this._onDragLeaveParticipant(event))),html.find(".p-side").click(this._onChangeSide.bind(this)),html.find(".delete-participant").click(this._onDeleteParticipant.bind(this)),html.find(".reset-roll").click(this._onResetRoll.bind(this)),html.find(".delete-driver").click(this._onDeleteDriver.bind(this)),html.find(".new-participant").on("dragenter",(event=>this._onDragEnterParticipant(event))),html.find(".new-participant").on("dragover",(event=>this._onDragEnterParticipant(event))),html.find(".new-participant").on("dragleave",(event=>this._onDragLeaveParticipant(event))),html.find(".new-participant").on("drop",(event=>this._onDragLeaveParticipant(event))),html.find(".add-sign").click(this._onAddParticipant.bind(this)),html.find(".roll-participant").click(this._onRollParticipant.bind(this)),html.find(".button").click(this._onButtonClick.bind(this)),html.find(".name-container").click(this._onLocationClick.bind(this)),html.find(".obstacle-type").click(this._onObstacleTypeClick.bind(this)),html.find(".obstacle-toggle").click(this._onObstacleToggleClick.bind(this)),html.find(".toggle").click(this._onToggle.bind(this));new DragDrop({dropSelector:".participant",callbacks:{drop:this._onDropParticipant.bind(this)}}).bind(html[0]);if(new DragDrop({dropSelector:".new-participant",callbacks:{drop:this._onAddParticipant.bind(this)}}).bind(html[0]),this.started){new DragDrop({dragSelector:".chase-participant",dropSelector:".chase-location",permissions:{dragstart:this._canChaseParticipantDragStart.bind(this),drop:this._canChaseParticipantDragDrop.bind(this)},callbacks:{dragstart:this._onChaseParticipantDragStart.bind(this),drop:this._onChaseParticipantDragDrop.bind(this),dragover:this._onDragEnter.bind(this)}}).bind(html[0]),html.find(".chase-location").on("dragleave",(event=>this._onDragLeave(event)))}}_getSubmitData(updateData={}){let data=new FormDataExtended(this.form,{editors:this.editors}).toObject();if(data=updateData?mergeObject(data,updateData):expandObject(data),this.item.data.data.locations?.list?.length&&data.data.startingIndex>this.item.data.data.locations.list.length&&(data.data.startingIndex=this.item.data.data.locations.list.length),data.data.participants){const participants=duplicate(this.item.data.data.participants);for(const[k,v]of Object.entries(data.data.participants)){const index=participants.findIndex((p=>p.uuid==k));if(-1==index)ui.notifications.error("Participant table corrupted");else{const original=participants[index],cleaned=clean(v);mergeObject(original,cleaned),participants[index]=original}}data.data.participants=participants}if(data.locations){const locations=duplicate(this.item.data.data.locations.list);for(const[key,value]of Object.entries(data.locations)){const locationIndex=locations.findIndex((l=>l.uuid==key));if(-1==locationIndex)ui.notifications.error("Locations table corrupted");else{const originalLocation=locations[locationIndex],cleaned=clean(value);mergeObject(originalLocation,cleaned),locations[locationIndex]=originalLocation}}delete data.locations,data.data.locations={list:locations}}return flattenObject(data)}async _updateObject(event,formData){const target=event.currentTarget;if("true"===target?.dataset?.override){const[,type,uuid,subType,data]=target.name.split("."),index=this.findParticipantIndex(uuid);if("participants"===type&&!isNaN(index)&&"speed-check"===subType&&"name"===data){const participants=this.item.data.data.participants?duplicate(this.item.data.data.participants):[];return participants[index].speedCheck?(delete participants[index].speedCheck.id,delete participants[index].speedCheck.type):participants[index].speedCheck={},participants[index].speedCheck.name=target.value,void await this.item.update({"data.participants":participants})}}super._updateObject(event,formData)}static setScroll(app,html,data){const track=html.find(".track");if(!track.length)return;const element=$(track).find(".active");if(!element.length)return;const originalPosition=data.data.trackScrollPosition;let elementCenterRelativeLeft=element[0].offsetLeft-track[0].clientWidth/2;elementCenterRelativeLeft<0&&(elementCenterRelativeLeft=0);const trackElement=track[0];-1!=originalPosition&&trackElement.scrollTo({top:0,left:originalPosition,behavior:"instant"}),trackElement.scrollTo({top:0,left:elementCenterRelativeLeft,behavior:"smooth"})}static onClose(app,html){app.item.update({"data.trackScrollPosition":-1})}findParticipantIndex(uuid){return this.item.data.data.participants.findIndex((p=>p.uuid==uuid))}findLocationIndex(uuid){return this.item.data.data.locations.list.findIndex((p=>p.uuid==uuid))}findIndex(list,uuid){return list.findIndex((p=>p.uuid==uuid))}async updateLocationsList(list){const updatedList=duplicate(list);updatedList.forEach((l=>{if(delete l.cssClasses,delete l.first,delete l.last,delete l.end,l.participants&&l.participants.length)for(let i=0;i<l.participants.length;i++)l.participants[i].data?.uuid&&(l.participants[i]=l.participants[i].data.uuid)})),await this.item.update({"data.locations.list":updatedList})}async updateParticipants(list){const participantsData=this.item.data.data.participants?duplicate(this.item.data.data.participants):[];list.forEach((p=>{let data;data="_participant"==p.constructor.name?p.data:p;const index=this.findIndex(participantsData,data.uuid);-1===index?(participantsData.push(data),ui.notifications.warn("Participant data missing")):participantsData[index]=data})),await this.item.update({"data.participants":participantsData})}async _onToggle(event){const target=event.currentTarget,toggle=target.getAttribute("toggle"),data=expandObject({[toggle]:!target.classList.contains("switched-on")});if(data.locations){const locations=duplicate(this.item.data.data.locations.list);for(const[key,value]of Object.entries(data.locations)){const locationIndex=locations.findIndex((l=>l.uuid==key));if(-1==locationIndex)ui.notifications.error("Locations table corrupted");else{const originalLocation=locations[locationIndex],cleaned=clean(value);mergeObject(originalLocation,cleaned),locations[locationIndex]=originalLocation}}await this.updateLocationsList(locations)}}async _onObstacleToggleClick(event){const uuid=event.currentTarget.closest(".location.obstacle").dataset.uuid,locations=duplicate(this.item.data.data.locations.list),locationIndex=this.findIndex(locations,uuid);locations[locationIndex].obstacle=!locations[locationIndex].obstacle,locations[locationIndex].obstacleDetails||(locations[locationIndex].obstacleDetails={barrier:!0}),await this.updateLocationsList(locations)}async _onObstacleTypeClick(event){const target=event.currentTarget,uuid=target.closest(".location.obstacle").dataset.uuid,locations=duplicate(this.item.data.data.locations.list),locationIndex=this.findIndex(locations,uuid);locations[locationIndex].obstacleDetails||(locations[locationIndex].obstacleDetails={}),target.classList.contains("barrier")?(locations[locationIndex].obstacleDetails.barrier=!locations[locationIndex].obstacleDetails.barrier,locations[locationIndex].obstacleDetails.hazard=!locations[locationIndex].obstacleDetails.barrier):target.classList.contains("hazard")&&(locations[locationIndex].obstacleDetails.hazard=!locations[locationIndex].obstacleDetails.hazard,locations[locationIndex].obstacleDetails.barrier=!locations[locationIndex].obstacleDetails.hazard),await this.updateLocationsList(locations)}async _onLocationClick(event){const target=event.currentTarget,track=target.closest(".track");await this.item.update({"data.trackScrollPosition":track.scrollLeft});const active=target.classList.contains("active"),locations=duplicate(this.item.data.data.locations.list);locations.forEach((l=>l.active=!1));const uuid=target.closest(".chase-location").dataset.uuid,locationIndex=this.findIndex(locations,uuid);-1!=locationIndex&&(active||(locations[locationIndex].active=!0),await this.updateLocationsList(locations))}async _onButtonClick(event){const action=event.currentTarget.dataset?.action;if(action)switch(action){case"init":if(!isNaN(this.item.data.data.locations.total)&&this.item.data.data.locations.total>0){const locations=Array.apply(null,Array(this.item.data.data.locations.total)).map((function(){return{uuid:foundry.utils.randomID(16)}}));locations[0].name="Start",locations.length>1&&(locations[locations.length-1].name="End"),await this.updateLocationsList(locations)}break;case"reset":Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmResetChase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmResetChaseHint")}</p>`,yes:async()=>{await this.updateLocationsList([]),await this.item.unsetFlag("CoC7",CoC7ChaseSheet.flags.started)}});break;case"cut2chase":Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmCut2Chase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmCut2ChaseHint")}</p>`,yes:()=>this.cutToTheChase()});break;case"restart":Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmRestartChase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmRestartChaseHint")}</p>`,yes:async()=>{const locations=this.locations.filter((l=>!l.init));for(let i=0;i<locations.length;i++)locations[i].participants&&(locations[i].participants=[]);await this.updateLocationsList(locations),await this.item.unsetFlag("CoC7",CoC7ChaseSheet.flags.started)}})}}_canChaseParticipantDragStart(selector){return!!game.user.isGM}_canChaseParticipantDragDrop(selector){return!!game.user.isGM}async _onChaseParticipantDragStart(dragEvent){const dragData={uuid:dragEvent.currentTarget.dataset.uuid};dragEvent.dataTransfer.setData("text/plain",JSON.stringify(dragData))}async _onChaseParticipantDragDrop(dragEvent){ui.notifications.info("Dropped"),this._onDragLeave(dragEvent);const locationUuid=dragEvent.currentTarget.dataset.uuid,dataString=dragEvent.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);ui.notifications.info(`dragged particpant ${data.uuid} onto location ${locationUuid}`),await this.moveParticipant(data.uuid,locationUuid)}_onDragOver(dragEvent){this._onDragEnter(dragEvent)}_onDragEnter(dragEvent){dragEvent.currentTarget.classList.add("drag-over")}_onDragLeave(dragEvent){dragEvent.currentTarget.classList?.remove("drag-over")}async _onDropParticipant(event){const uuid=event.currentTarget.dataset?.uuid,dataString=event.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);await this.alterParticipant(data,uuid)}async _onAddParticipant(event){let data={};if(event.dataTransfer){const dataString=event.dataTransfer.getData("text/plain");data=JSON.parse(dataString)}await this.addParticipant(data)}async _onRollParticipant(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.data.data.participants?duplicate(this.item.data.data.participants):[],participant=new _participant(participants[index]);if(participant.speedCheck.refSet){const roll=new CoC7Check;roll.parent=this.item.uuid,participant.data.rolled=!0,participant.data.rollUuid=roll.uuid,roll.actor=participant.actor.actorKey,!event.shiftKey&&participant.actor.player&&(roll.standby=!0,roll.standbyText="CoC7.Chase",roll.standbyRightIcon="systems/CoC7/assets/icons/running-solid.svg"),participant.speedCheck.isCharacteristic?(await roll.rollCharacteristic(participant.speedCheck.ref.key),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isSkill?(roll.skill=participant.speedCheck.ref,await roll.roll(),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isAttribute&&(await roll.rollAttribute(participant.speedCheck.ref.key),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString)}else if(participant.speedCheck.score){const rollData={rawValue:participant.speedCheck.score,displayName:participant.speedCheck.name,actorName:participant.name?participant.name:void 0};participant.hasActor&&(rollData.actor=participant.actor.actorKey);const roll=CoC7Check.create(rollData);roll.parent=this.item.uuid,await roll.roll(),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString,participant.data.rolled=!0,participant.data.rollUuid=roll.uuid}await this.item.update({"data.participants":participants})}_onDragEnterParticipant(event){event.currentTarget.classList.add("drag-over")}_onDragLeaveParticipant(event){event.currentTarget.classList.remove("drag-over")}async _onChangeSide(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.data.data.participants?duplicate(this.item.data.data.participants):[];participants[index].chaser=!participants[index].chaser,await this.item.update({"data.participants":participants})}async _onDeleteDriver(event){const uuid=event.currentTarget.closest(".driver").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.data.data.participants?duplicate(this.item.data.data.participants):[];delete participants[index].actorKey,await this.item.update({"data.participants":participants})}async _onDeleteParticipant(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.data.data.participants?duplicate(this.item.data.data.participants):[];participants.splice(index,1),await this.item.update({"data.participants":participants})}async _onResetRoll(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.data.data.participants?duplicate(this.item.data.data.participants):[];delete participants[index].speedCheck.rollDataString,await this.item.update({"data.participants":participants})}async alterParticipant(data,uuid){const actorKey=data.sceneId&&data.tokenId?`${data.sceneId}.${data.tokenId}`:"Actor"===data.type?data.id:data.actorId||data.actorKey,participant={},actor=chatHelper.getActorFromKey(actorKey);switch(actor&&("vehicle"===actor.data.type?participant.vehicleKey=actorKey:participant.actorKey=actorKey),data.type?.toLowerCase()){case"actor":break;case"item":participant.speedCheck={id:data.data?._id||data.id,type:"item"};break;case"characteristic":participant.speedCheck={id:data.name,type:"characteristic"};break;case"attribute":participant.speedCheck={id:data.name,type:"attribute"}}const participants=this.item.data.data.participants?duplicate(this.item.data.data.participants):[],oldParticipant=participants[this.findParticipantIndex(uuid)];oldParticipant.mov&&delete oldParticipant.mov,mergeObject(oldParticipant,participant),await this.item.update({"data.participants":participants})}async addParticipant(data){const actorKey=data.sceneId&&data.tokenId?`${data.sceneId}.${data.tokenId}`:data.actorId||data.actorKey||data.id,participant={},actor=chatHelper.getActorFromKey(actorKey);switch(actor&&("vehicle"===actor.data.type?participant.vehicleKey=actorKey:participant.actorKey=actorKey),data.type?.toLowerCase()){case"actor":break;case"item":if(data.id){if("skill"!==game.items.get(data.id)?.data?.type)return}participant.speedCheck={id:data.data?._id||data.id,type:"item"};break;case"characteristic":participant.speedCheck={id:data.name,type:"characteristic"};break;case"attribute":participant.speedCheck={id:data.name,type:"attribute"}}participant.speedCheck||(this.item.data.data.vehicule?participant.speedCheck={type:"item",name:game.i18n.localize("CoC7.DriveAutoSkillName")}:participant.speedCheck={id:"con",type:"characteristic",name:game.i18n.localize("CHARAC.Constitution")});const participants=this.item.data.data.participants?duplicate(this.item.data.data.participants):[];let unique=!1;for(;!unique;)participant.uuid=foundry.utils.randomID(16),unique=0===participants.filter((p=>p.uuid==participant.uuid)).length;participants.push(participant),await this.item.update({"data.participants":participants})}async updateRoll(rollString){if(game.user.isGM){const roll=CoC7Check.fromRollString(rollString),participants=this.item.data.data.participants?duplicate(this.item.data.data.participants):[],index=participants.findIndex((p=>p.rollUuid===roll.uuid));index>=0&&(participants[index].speedCheck.rollDataString=roll.JSONRollString,await this.item.update({"data.participants":participants}))}else{const data={data:rollString,type:"invoke",method:"updateRoll",item:this.item.uuid};game.socket.emit("system.CoC7",data)}}async moveParticipant(participantUuid,locationUuid){const locations=duplicate(this.item.data.data.locations.list),destination=locations.find((l=>locationUuid==l.uuid));if(!destination)return void console.error(`Failed to move ${participantUuid}. Location ${locationUuid} unknown`);const origin=locations.find((l=>l.participants?.includes(participantUuid)));if(!origin)return void console.error(`Failed to find ${participantUuid} in locations`);destination.participants||(destination.participants=[]),destination.participants.push(participantUuid);const oldParticipantsList=origin.participants.filter((p=>participantUuid!=p));origin.participants=oldParticipantsList,await this.updateLocationsList(locations)}}function sortByRoleAndDex(a,b){return b.chaser&&!a.chaser?1:a.chaser&&!b.chaser?-1:a.dex-b.dex}function clean(obj){for(const propName in obj){const tp=getType(obj[propName]);"Object"===tp&&(obj[propName]=clean(obj[propName])),("Object"!==tp||Object.entries(obj[propName]).length)&&("string"!==tp||obj[propName].length)?"string"!==tp||isNaN(Number(obj[propName]))||(obj[propName]=Number(obj[propName])):obj[propName]=null}return obj}class _participant{constructor(data={}){this.data=data}get actor(){return this._actor||(this._actor=chatHelper.getActorFromKey(this.data.actorKey)),this._actor}get isActor(){return this.hasActor||this.hasVehicle}get key(){return this.hasVehicle?this.vehicle.actorKey:this.hasActor?this.actor.actorKey:void 0}get icon(){return this.isActor?this.hasVehicle?this.vehicle.img:this.hasActor?this.actor.img:void 0:"systems/CoC7/assets/icons/question-circle-regular.svg"}get driver(){return this._driver||(this._driver=chatHelper.getActorFromKey(this.data.actorKey)),this._driver}get vehicle(){return this.data.vehicleKey&&(this._vehicle=chatHelper.getActorFromKey(this.data.vehicleKey)),this._vehicle}get hasActor(){return!!this.actor}get hasVehicle(){return!!this.vehicle}get name(){return this.hasVehicle?this.vehicle.name:this.hasActor?this.actor.name:this.data.name||void 0}get mov(){return this.data.mov||(this.hasVehicle?this.data.mov=this.vehicle.mov:this.hasActor&&(this.data.mov=this.actor.mov)),this.data.mov&&(isNaN(Number(this.data.mov))?(this.data.hasValidMov=!1,this.data.mov=void 0):this.data.hasValidMov=!0),this.data.mov}get uuid(){return this.data.uuid}get dex(){return this.data.dex||(this.hasVehicle&&this.hasDriver?this.data.dex=this.driver.characteristics.dex.value:this.hasActor&&(this.data.dex=this.actor.characteristics.dex.value)),this.data.dex&&(isNaN(Number(this.data.dex))?(this.data.hasValidDex=!1,this.data.dex=0):this.data.hasValidDex=!0),this.data.dex}get isChaser(){return!!this.data.chaser}get isValid(){return this.hasValidDex&&this.hasValidMov}get hasValidDex(){return!isNaN(Number(this.data.dex))}get hasValidMov(){return!isNaN(Number(this.data.mov))}get hasDriver(){return this.hasVehicle&&this.hasActor}get movAdjustment(){if(this.data.speedCheck?.rollDataString){const roll=CoC7Check.fromRollString(this.data.speedCheck.rollDataString);if(roll&&!roll.standby){if(roll.successLevel>=CoC7Check.successLevel.extreme)return 1;if(roll.failed)return-1}}return 0}get adjustedMov(){if(void 0!==this.mov&&!isNaN(Number(this.mov)))return Number(this.mov)+this.movAdjustment}get hasMovAdjustment(){return this.hasBonusMov||this.hasMalusMov}get hasBonusMov(){return this.data.movAdjustment>0}get hasMalusMov(){return this.data.movAdjustment<0}tooSlow(){this.data.excluded=!0}includeInChase(){this.data.excluded=!1,this.data.escaped=!1}escaped(){this.data.escaped=!0}set slowest(x){this.data.slowest=x}set fastest(x){this.data.fastest=x}set movementAction(x){this.data.movementAction=x}get cssClass(){const cssClasses=[];return this.isChaser?cssClasses.push("chaser"):cssClasses.push("prey"),this.data.excluded&&cssClasses.push("excluded","too_slow"),this.data.escaped&&cssClasses.push("escaped"),this.data.fastest&&cssClasses.push("fastest"),this.data.slowest&&cssClasses.push("slowest"),cssClasses.join(" ")}get speedCheck(){const check={};if(this.data.speedCheck?.name&&(check.name=this.data.speedCheck.name),this.data.speedCheck?.score&&(check.score=this.data.speedCheck.score),check.cssClasses="",this.data.speedCheck?.rollDataString&&(check.roll=CoC7Check.fromRollString(this.data.speedCheck.rollDataString),check.roll&&(check.roll.standby&&!check.roll.hasCard||(check.rolled=!0,check.inlineRoll=check.roll.inlineCheck.outerHTML,check.cssClasses+="rolled",check.roll.standby||(check.roll.successLevel>=CoC7Check.successLevel.extreme?check.modifierCss="upgrade":check.roll.failed&&(check.modifierCss="downgrade"),(check.roll.successLevel>=CoC7Check.successLevel.extreme||check.roll.failed)&&(check.hasModifier=!0))))),this.hasActor){check.options=[];for(const c of["con"]){const characterisitc=this.actor.getCharacteristic(c);characterisitc?.value&&check.options.push(characterisitc.label)}for(const s of this.actor.driveSkills)check.options.push(s.name);for(const s of this.actor.pilotSkills)check.options.push(s.name);if(check.hasOptions=!!check.options.length,this.data.speedCheck?.id){let item=this.actor.find(this.data.speedCheck.id);if(!item){const gameItem=game.items.get(this.data.speedCheck.id);gameItem&&(item=this.actor.find(gameItem.name))}item&&("item"===item.type&&"skill"===item.value.data?.type&&(check.ref=item.value,check.name=item.value.name,check.type="skill",check.isSkill=!0,check.refSet=!0,check.score=item.value.value),"characteristic"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="characteristic",check.isCharacteristic=!0,check.refSet=!0,check.score=item.value.value),"attribute"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="attribute",check.isAttribute=!0,check.refSet=!0,check.score=item.value.value))}else if(this.data.speedCheck?.name){const item=this.actor.find(this.data.speedCheck.name);item&&("item"===item.type&&"skill"===item.value.data?.type&&(check.ref=item.value,check.name=item.value.name,check.type="skill",check.isSkill=!0,check.refSet=!0,check.score=item.value.value),"characteristic"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="characteristic",check.isCharacteristic=!0,check.refSet=!0,check.score=item.value.value),"attribute"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="attribute",check.isAttribute=!0,check.refSet=!0,check.score=item.value.value))}}else if(this.data.speedCheck?.id){const item=game.items.get(this.data.speedCheck.id);item&&"skill"===item.data?.type&&(check.ref=item,check.name=item.name,check.type="skill",check.isSkill=!0,check.refSet=!1,check.score=item.base)}return check.rolled||check.score||(check.cssClasses+=" invalid"),check.isValid=check.rolled&&!isNaN(check.score),check}}class CoC7ItemSheetV2 extends ItemSheet{constructor(...args){super(...args),this._sheetTab="items"}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","item"],width:290,height:326,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}get template(){return"systems/CoC7/templates/items/item-sheetV2.html"}getData(options={}){const data=super.getData(options),itemData=data.data;if(data.data=itemData.data,data.hasOwner=null!==this.item.actor,"skill"===this.item.data.type){data._properties=[];for(const[key,value]of Object.entries(COC7.skillProperties)){const property={};property.id=key,property.name=value,property.isEnabled=!0===this.item.data.data.properties[key],data._properties.push(property)}data._eras=[];for(const[key,value]of Object.entries(COC7.eras)){const era={};era.id=key,era.name=value,era.isEnabled=!0===this.item.data.data.eras[key],data._eras.push(era)}data.isSpecialized=this.item.data.data.properties.special,data.canModifySpec=!this.item.data.data.properties.firearm&&!this.item.data.data.properties.fighting}return data.isKeeper=game.user.isGM,data}activateListeners(html){super.activateListeners(html),this.options.editable&&html.find(".toggle-switch").click(this._onClickToggle.bind(this))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.closest(".toggle-switch").dataset.property;await this.item.toggleProperty(propertyId,event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode)}}class CoC7ItemSheet extends CoC7ItemSheetV2{static get defaultOptions(){return mergeObject(super.defaultOptions,{width:520,height:506})}}class CoC7OccupationSheet extends ItemSheet{activateListeners(html){if(super.activateListeners(html),!this.options.editable)return;html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"skills"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"skills"))),html.find(".group-item-delete").click(this._onGroupItemDelete.bind(this)),html.find(".group-control").click(this._onGroupControl.bind(this));new DragDrop({dropSelector:".droppable",callbacks:{drop:this._onDrop.bind(this)}}).bind(html[0])}async _onDrop(event,type="skill",collectionName="skills"){event.preventDefault(),event.stopPropagation();const optionalSkill=event?.currentTarget?.classList?.contains("optional-skills"),ol=event?.currentTarget?.closest("ol"),index=ol?.dataset?.group,dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item"),collection=this.item.data.data[collectionName]?duplicate(this.item.data.data[collectionName]):[],groups=this.item.data.data.groups?duplicate(this.item.data.data.groups):[];for(const item of dataList)if(item&&item.data&&[type].includes(item.data.type))if(optionalSkill){if(!CoC7Item.isAnySpec(item)){if(collection.find((el=>el.name===item.data.name)))continue;if(groups[index].skills.find((el=>el.name===item.name)))continue}groups[index].skills=groups[index].skills.concat([item.data])}else{if(!CoC7Item.isAnySpec(item)){if(collection.find((el=>el.name===item.data.name)))continue;for(let i=0;i<groups.length;i++){const index=groups[i].skills.findIndex((el=>el.name===item.data.name));-1!==index&&groups[i].skills.splice(index,1)}}collection.push(duplicate(item.data))}await this.item.update({"data.groups":groups}),await this.item.update({[`data.${collectionName}`]:collection})}async _onGroupControl(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("add-group")){await this._onSubmit(event);const groups=this.item.data.data.groups;await this.item.update({"data.groups":groups.concat([{options:0,skills:[]}])})}if(a.classList.contains("remove-group")){await this._onSubmit(event);const groups=duplicate(this.item.data.data.groups),ol=a.closest(".item-list.group");groups.splice(Number(ol.dataset.group),1),await this.item.update({"data.groups":groups})}}_onItemSummary(event,collectionName="items"){event.preventDefault();const li=$(event.currentTarget).parents(".item"),chatData=this.item.data.data[collectionName].find((s=>s._id===li.data("item-id"))).data.description;if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData.value}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const itemIndex=$(event.currentTarget).parents(".item").data("item-id");itemIndex&&await this.removeItem(itemIndex,collectionName)}async _onGroupItemDelete(event){const li=event.currentTarget.closest(".item"),ol=li.closest(".item-list.group"),groups=duplicate(this.item.data.data.groups);groups[Number(ol.dataset.group)].skills.splice(Number(li.dataset.itemIndex),1),await this.item.update({"data.groups":groups})}async removeItem(itemId,collectionName="items"){const itemIndex=this.item.data.data[collectionName].findIndex((s=>s._id===itemId));if(itemIndex>-1){const collection=this.item.data.data[collectionName]?duplicate(this.item.data.data[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`data.${collectionName}`]:collection})}}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","occupation"],width:520,height:480,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}get template(){return"systems/CoC7/templates/items/occupation.html"}_onDragStart(event){const li=event.currentTarget.closest(".item"),dragData={type:"Item",data:this.item.data.data.skills.find((s=>s._id===li.dataset.itemId))};event.dataTransfer.setData("text/plain",JSON.stringify(dragData))}getData(){const data=super.getData(),itemData=data.data;data.data=itemData.data,data.isOwned=this.item.isOwned;const optionnal=[],mandatory=[];for(const[key,carac]of Object.entries(data.data.occupationSkillPoints))if(carac.multiplier){const caracName=game.i18n.localize(`CHARAC.${key.toUpperCase()}`);carac.selected&&carac.optional&&optionnal.push(`${caracName}x${carac.multiplier}`),carac.selected&&!carac.optional&&mandatory.push(`${caracName}x${carac.multiplier}`)}data.skillListEmpty=0===data.data.skills.length;for(const skill of data.data.skills)skill.data.specialization&&!skill.name.includes(skill.data.specialization)?skill.displayName=`${skill.data.specialization} (${skill.name})`:skill.displayName=skill.name;data.data.skills.sort(((a,b)=>a.displayName.localeCompare(b.displayName)));for(let index=0;index<data.data.groups.length;index++){data.data.groups[index].isEmpty=0===data.data.groups[index].skills.length;for(const skill of data.data.groups[index].skills)skill.data.specialization&&!skill.name.includes(skill.data.specialization)?skill.displayName=`${skill.data.specialization} (${skill.name})`:skill.displayName=skill.name;data.data.groups[index].skills.sort(((a,b)=>a.displayName.localeCompare(b.displayName)))}data.occupationPointsString="";const orString=` ${game.i18n.localize("CoC7.Or")} `;mandatory.length&&(data.occupationPointsString+=mandatory.join(" + ")),optionnal.length&&mandatory.length&&(data.occupationPointsString+=` + (${optionnal.join(orString)})`),optionnal.length&&!mandatory.length&&(data.occupationPointsString+=optionnal.join(orString)),data.itemProperties=[];for(const[key,value]of Object.entries(data.data.type))value&&data.itemProperties.push(COC7.occupationProperties[key]?COC7.occupationProperties[key]:null);return data.isKeeper=game.user.isGM,data}_updateObject(event,formData){if(formData.data||(formData=expandObject(formData)),formData.data.groups){formData.data.groups=Object.values(formData.data?.groups||{});for(let index=0;index<this.item.data.data.groups.length;index++)formData.data.groups[index].skills=duplicate(this.item.data.data.groups[index].skills)}super._updateObject(event,formData)}}class CoC7SetupSheet extends ItemSheet{activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"items"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"items"))),html.find(".add-bio").click((async()=>await this._onAddBio())),html.find(".remove-section").click(this._onRemoveSection.bind(this)))}async _onDrop(event,collectionName="items"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item"),collection=this.item.data.data[collectionName]?duplicate(this.item.data.data[collectionName]):[];for(const item of dataList)item&&item.data&&["item","weapon","skill","book","spell"].includes(item.data.type)&&(!CoC7Item.isAnySpec(item)&&collection.find((el=>el.name===item.data.name))||collection.push(duplicate(item.data)));await this.item.update({[`data.${collectionName}`]:collection})}async _onRemoveSection(event){const div=event.currentTarget.closest(".item"),bio=duplicate(this.item.data.data.bioSections);bio.splice(Number(div.dataset.index),1),await this.item.update({"data.bioSections":bio})}async _onAddBio(){const bio=this.item.data.data.bioSections?duplicate(this.item.data.data.bioSections):[];bio.push(null),await this.item.update({"data.bioSections":bio})}_onItemSummary(event,collectionName="items"){event.preventDefault();const li=$(event.currentTarget).parents(".item"),chatData=this.item.data.data[collectionName].find((s=>s._id===li.data("item-id"))).data.description;if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData.value}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const itemIndex=$(event.currentTarget).parents(".item").data("item-id");itemIndex&&await this.removeItem(itemIndex,collectionName)}getItem(itemId,collectionName="items"){return this.item.data.data[collectionName].find((s=>s._id===itemId))}async removeItem(itemId,collectionName="items"){const itemIndex=this.item.data.data[collectionName].findIndex((s=>s._id===itemId));if(itemIndex>-1){const collection=this.item.data.data[collectionName]?duplicate(this.item.data.data[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`data.${collectionName}`]:collection})}}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","setup"],width:520,height:530,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}get template(){return"systems/CoC7/templates/items/setup.html"}_onDragStart(event){const li=event.currentTarget.closest(".item"),dragData={type:"Item",data:this.item.data.data.items.find((s=>s._id===li.dataset.itemId))};event.dataTransfer.setData("text/plain",JSON.stringify(dragData))}getData(){const data=super.getData();data.isOwned=this.item.isOwned;const itemData=data.data;data.data=itemData.data,data.skills=data.data.items.filter((it=>"skill"===it.type)),data.otherItems=data.data.items.filter((it=>"skill"!==it.type)),data.skillListEmpty=0===data.skills.length,data.itemsListEmpty=0===data.otherItems.length;for(const skill of data.skills)skill.data.specialization&&!skill.name.includes(skill.data.specialization)?skill.displayName=`${skill.data.specialization} (${skill.name})`:skill.displayName=skill.name;data.skills.sort(((a,b)=>a.displayName.localeCompare(b.displayName))),data.eras={},data.itemProperties=[];for(const[key,value]of Object.entries(COC7.eras))data.data.eras[key]||(data.data.eras[key]={},data.data.eras[key].selected=!1),data.data.eras[key].name=game.i18n.localize(value),data.data.eras[key].internalName=value;for(const entry of Object.entries(data.data.eras))entry[1].selected&&data.itemProperties.push(entry[1].name);return data.oneBlockBackStory=game.settings.get("CoC7","oneBlockBackstory"),data.isKeeper=game.user.isGM,data}_updateObject(event,formData){formData.data||(formData=expandObject(formData)),formData.data.bioSections&&(formData.data.bioSections=Object.values(formData.data?.bioSections||[])),"data.characteristics.points.enabled"===event.currentTarget?.name&&(formData.data.characteristics.rolls.enabled=!event.currentTarget.checked),"data.characteristics.rolls.enabled"===event.currentTarget?.name&&(formData.data.characteristics.points.enabled=!event.currentTarget.checked),super._updateObject(event,formData)}}class CoC7SkillSheet extends ItemSheet{constructor(...args){super(...args),this._sheetTab="items"}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","item"],width:520,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}get template(){return`systems/CoC7/templates/items/${this.item.data.type}-sheet.html`}getData(){const data=super.getData(),itemData=data.data;if(data.data=itemData.data,data.hasOwner=null!==this.item.actor,"skill"===this.item.data.type){data._properties=[];for(const[key,value]of Object.entries(COC7.skillProperties)){const property={};property.id=key,property.name=value,property.isEnabled=!0===this.item.data.data.properties[key],data._properties.push(property)}data._eras=[];for(const[key,value]of Object.entries(COC7.eras)){const era={};era.id=key,era.name=value,era.isEnabled=!0===this.item.data.data.eras[key],data._eras.push(era)}data.isSpecialized=this.item.data.data.properties.special,data.canModifySpec=!this.item.data.data.properties.firearm&&!this.item.data.data.properties.fighting}return data.isKeeper=game.user.isGM,data}activateListeners(html){super.activateListeners(html),this.options.editable&&html.find(".toggle-switch").click(this._onClickToggle.bind(this))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.closest(".toggle-switch").dataset.property;await this.item.toggleProperty(propertyId,event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode)}}class CoC7SpellSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/items/spell/main.html",classes:["coc7","item","spell"],width:500,height:"auto",resizable:!1,scrollY:[".body"],tabs:[{navSelector:".navigation",contentSelector:".body",initial:"description"}]})}async getData(){const data=super.getData(),itemData=data.data;return data.data=itemData.data,data.isKeeper=game.user.isGM,data}activateListeners(html){super.activateListeners(html),html.find(".option").click((event=>this.modifyType(event))),html.find("#cast-spell").click((event=>{event.preventDefault(),this.item.cast()}))}modifyType(event){event.preventDefault(),event.stopPropagation();return $(event.currentTarget).prev().trigger("click")}}class CoC7StatusSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","status"],width:520,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}get template(){return"systems/CoC7/templates/items/status.html"}getData(){const data=super.getData(),itemData=data.data;data.data=itemData.data,data.itemProperties=[];for(const[key,value]of Object.entries(data.data.type))value&&data.itemProperties.push(COC7.statusType[key]?COC7.statusType[key]:null);return data.isKeeper=game.user.isGM,data}}class CoC7TalentSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","talent"],width:520,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}get template(){return"systems/CoC7/templates/items/talent.html"}getData(){const data=super.getData(),itemData=data.data;data.data=itemData.data,data.itemProperties=[];for(const[key,value]of Object.entries(data.data.type))value&&data.itemProperties.push(COC7.talentType[key]?COC7.talentType[key]:null);return data.isKeeper=game.user.isGM,data}}class CoC7VehicleSheet extends CoC7ActorSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","actor","item","vehicle"],width:520,height:420,resizable:!0,template:"systems/CoC7/templates/actors/vehicle.html",dragDrop:[{dragSelector:".actor",dropSelector:".dropZone"}],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"description"}]})}async getData(){ui.notifications.warn(game.i18n.localize("CoC7.ExperimentalFeaturesWarning"));const data=await super.getData();data.properties=[],this.actor.data.data.properties.armed&&data.properties.push(game.i18n.localize("CoC7.ArmedVehicle")),data.actor=this.actor;const expanded=this.actor.getFlag("CoC7","expanded");return data.expanded=void 0===expanded||expanded,data.expanded?data.options.height=420:data.options.height="auto",data}activateListeners(html){super.activateListeners(html),html.find(".add-armor").click((async()=>await this._onAddArmor())),html.find(".remove-armor").click((async event=>await this._onRemoveArmor(event))),html.find(".expand-button").click(this._onToggleExpand.bind(this))}async _onToggleExpand(){const expanded=this.actor.getFlag("CoC7","expanded");expanded?(this.oldSize=this.position.height,this.position.height="auto"):this.position.height=this.oldSize||420,await this.actor.setFlag("CoC7","expanded",!expanded)}async _onAddArmor(){const locations=duplicate(this.actor.data.data.attribs.armor.locations||[]);locations.push({name:null,value:null}),await this.actor.update({"data.attribs.armor.locations":locations})}async _onRemoveArmor(event){const index=event.currentTarget.closest(".armor").dataset.index,locations=duplicate(this.actor.data.data.attribs.armor.locations||null);locations&&(locations.splice(index,1),await this.actor.update({"data.attribs.armor.locations":locations}))}onCloseSheet(){super.onCloseSheet()}_getSubmitData(updateData={}){let data=new FormDataExtended(this.form,{editors:this.editors}).toObject();if(data=updateData?mergeObject(data,updateData):expandObject(data),data.data.attribs.armor?.localized){const armor=data.data?.attribs.armor;armor&&(armor.locations=Object.values(armor?.locations||this.actor.data.data.attribs.armor.locations||{}))}return flattenObject(data)}}class CoC7WeaponSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","item"],width:520,height:480,tabs:[{navSelector:".sheet-tabs",contentSelector:".sheet-body",initial:"skills"}]})}get template(){return"systems/CoC7/templates/items/weapon-sheet.html"}getData(){const data=super.getData();data.dtypes=["String","Number","Boolean"];const itemData=data.data;data.data=itemData.data,data.hasOwner=null!=this.item.actor,data.hasOwner&&(data.actorKey=this.item.actor.actorKey),data.combatSkill=[],data.hasOwner&&(data.firearmSkills=this.actor.firearmSkills,data.fightingSkills=this.actor.fightingSkills,data.combatSkill=this.item.actor.items.filter((item=>!("skill"!==item.type||!item.data.data.properties.combat))),data.combatSkill.sort(((a,b)=>{let lca,lcb;return a.data.properties&&b.data.properties?(lca=a.data.properties.special?a.data.specialization.toLowerCase()+a.name.toLowerCase():a.name.toLowerCase(),lcb=b.data.properties.special?b.data.specialization.toLowerCase()+b.name.toLowerCase():b.name.toLowerCase()):(lca=a.name.toLowerCase(),lcb=b.name.toLowerCase()),lca.localeCompare(lcb)}))),data._properties=[];for(const[key,value]of Object.entries(COC7.weaponProperties)){const property={};property.id=key,property.name=value,property.isEnabled=!0===this.item.data.data.properties[key],data._properties.push(property)}this.item.data.data.price||(this.item.data.data.price={}),data._eras=[];for(const[key,value]of Object.entries(COC7.eras)){const era={};this.item.data.data.price[key]||(this.item.data.data.price[key]=0),era.price=this.item.data.data.price[key],era.id=key,era.name=value,era.isEnabled=!0===this.item.data.data.eras[key],data._eras.push(era)}return data.usesAlternateSkill=!0===this.item.data.data.properties.auto||!0===this.item.data.data.properties.brst||!0===this.item.data.data.properties.thrown,data.isKeeper=game.user.isGM,data}activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".toggle-switch").click(this._onClickToggle.bind(this)),html.find(".weapon-property").click(this._onPropertyClick.bind(this)))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.closest(".toggle-switch").dataset.property,elementName=event.currentTarget.parentElement.dataset.set+"-"+propertyId,checkboxControl=this.form.elements.namedItem(elementName);checkboxControl.checked?checkboxControl.checked=!1:checkboxControl.checked=!0,event.target.classList.toggle("switched-on"),await this._onSubmit(event)}async _onPropertyClick(event){event.preventDefault();const property=event.currentTarget.closest(".weapon-property").dataset.property,weaponId=event.currentTarget.closest(".weapon").dataset.itemId,actorKey=event.currentTarget.closest(".weapon").dataset.actorKey;let weapon=null;if(actorKey){weapon=CoCActor.getActorFromKey(actorKey).items.get(weaponId)}else weapon=game.items.get(weaponId);await weapon.toggleProperty(property)}}function listen(){Hooks.once("init",(async()=>{CONFIG.Actor.documentClass=CoCActor,CONFIG.Actor.documentClasses={},CONFIG.Item.documentClass=CoC7Item,CONFIG.Item.documentClasses={book:CoC7Book,spell:CoC7Spell},async function(){loadTemplates(["systems/CoC7/templates/actors/parts/actor-skills.html","systems/CoC7/templates/actors/parts/npc-skills.html","systems/CoC7/templates/actors/parts/actor-weapons.html","systems/CoC7/templates/actors/parts/npc-combat.html","systems/CoC7/templates/actors/parts/character-development.html","systems/CoC7/templates/actors/parts/actor-inventory.html","systems/CoC7/templates/actors/parts/actor-inventory-items.html","systems/CoC7/templates/actors/parts/actor-background.html","systems/CoC7/templates/actors/parts/actor-skills-v2.html","systems/CoC7/templates/actors/parts/actor-weapons-v2.html","systems/CoC7/templates/actors/parts/character-development-v2.html","systems/CoC7/templates/actors/parts/development-controls.html","systems/CoC7/templates/actors/parts/vitals.html","systems/CoC7/templates/actors/parts/combat.html","systems/CoC7/templates/actors/character-sheet-v2.html","systems/CoC7/templates/actors/character/summary.html","systems/CoC7/templates/items/book/details.html","systems/CoC7/templates/items/spell/details.html"])}(),function(){if(game.settings.register("CoC7","pulpRules",{name:"SETTINGS.PulpRules",hint:"SETTINGS.PulpRulesHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","developmentRollForLuck",{name:"SETTINGS.developmentRollForLuck",hint:"SETTINGS.developmentRollForLuckHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","opposedRollTieBreaker",{name:"SETTINGS.OpposedRollTieBreaker",hint:"SETTINGS.OpposedRollTieBreakerHint",scope:"wolrd",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","initiativeRule",{name:"SETTINGS.InitiativeRule",hint:"SETTINGS.InitiativeRuleHint",scope:"world",config:!0,default:"basic",type:String,choices:{basic:"SETTINGS.InitiativeRuleBasic",optional:"SETTINGS.InitiativeRuleOptional"},onChange:rule=>_setInitiativeOptions(rule)}),game.settings.register("CoC7","displayInitDices",{name:"SETTINGS.displayInitDices",hint:"SETTINGS.displayInitDicesHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","displayInitAsText",{name:"SETTINGS.displayInitAsText",hint:"SETTINGS.displayInitAsTextHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","stanbyGMRolls",{name:"SETTINGS.StanbyGMRolls",hint:"SETTINGS.StanbyGMRollsHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","allowFlatDiceModifier",{name:"SETTINGS.AllowFlatDiceModifier",hint:"SETTINGS.AllowFlatDiceModifierHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","allowFlatThresholdModifier",{name:"SETTINGS.AllowFlatThresholdModifier",hint:"SETTINGS.AllowFlatThresholdModifierHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","defaultCheckDifficulty",{name:"SETTINGS.DefaultDifficulty",hint:"SETTINGS.DefaultDifficultyHint",scope:"world",config:!0,default:"regular",type:String,choices:{regular:"SETTINGS.CheckDifficultyRegular",unknown:"SETTINGS.CheckDifficultyUnknown"}}),game.settings.register("CoC7","selfRollWhisperTarget",{name:"SETTINGS.SelfRollWhisperTarget",hint:"SETTINGS.SelfRollWhisperTargetHint",scope:"world",config:!0,default:"everyone",type:String,choices:{nobody:"SETTINGS.DoNotAdvise",owners:"SETTINGS.AdviseOwnersOnly",everyone:"SETTINGS.AdviseAllPlayer"}}),game.settings.register("CoC7","displayActorOnCard",{name:"SETTINGS.DisplayActorOnCard",hint:"SETTINGS.DisplayActorOnCardHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","displayCheckSuccessLevel",{name:"SETTINGS.DisplayCheckSuccessLevel",scope:"client",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","displayResultType",{name:"SETTINGS.DisplayResultType",scope:"client",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","useToken",{name:"SETTINGS.UseToken",hint:"SETTINGS.UseTokenHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","enableStatusIcons",{name:"SETTINGS.EnableStatusIcons",hint:"SETTINGS.EnableStatusIconsHint",scope:"world",config:!0,type:Boolean,default:!0}),game.settings.register("CoC7","gridSpaces",{name:"SETTINGS.RestrictGridSpaces",hint:"SETTINGS.RestrictGridSpacesHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","distanceElevation",{name:"SETTINGS.CheckElevation",hint:"SETTINGS.CheckElevationHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","overrideGameArtwork",{name:"SETTINGS.OverrideGameArtwork",hint:"SETTINGS.OverrideGameArtworkHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.get("CoC7","overrideGameArtwork")&&(game.settings.register("CoC7","artPauseImage",{name:"SETTINGS.ArtPauseImage",hint:"SETTINGS.ArtPauseImageHint",scope:"world",config:!0,default:"systems/CoC7/assets/icons/time-trap.svg",type:String}),game.settings.register("CoC7","artPauseText",{name:"SETTINGS.ArtPauseText",hint:"SETTINGS.ArtPauseTextHint",scope:"world",config:!0,default:"The Blind Idiot God is dreaming...",type:String})),game.settings.register("CoC7","displayPlayerNameOnSheet",{name:"SETTINGS.displayPlayerNameOnSheet",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","toolTipDelay",{name:"CoC7.toolTipDelay",scope:"world",config:!0,default:2e3,type:Number}),game.settings.register("CoC7","showIconsOnly",{name:"SETTINGS.showIconsOnly",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","playerUnlockSheetMode",{name:"SETTINGS.PlayerUnlockSheetMode",scope:"world",config:!0,default:"always",type:String,choices:{always:"SETTINGS.AlwaysEditable",creation:"SETTINGS.CreationModeOnly",never:"SETTINGS.NeverEditable"}}),game.settings.register("CoC7","statusPlayerEditable",{name:"SETTINGS.StatusPlayerEditable",hint:"SETTINGS.StatusPlayerEditableHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","oneBlockBackstory",{name:"SETTINGS.OneBlockBackStory",hint:"SETTINGS.OneBlockBackStoryHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","overrideSheetArtwork",{name:"SETTINGS.OverrideSheetArtwork",hint:"SETTINGS.OverrideSheetArtworkHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.get("CoC7","overrideSheetArtwork")&&(game.settings.register("CoC7","artWorkSheetBackground",{name:"SETTINGS.ArtWorkSheetBackground",hint:"SETTINGS.ArtWorkSheetBackgroundHint",scope:"world",config:!0,default:"url('./assets/images/background.webp') 4 repeat",type:String}),game.settings.register("CoC7","artWorkSheetBackgroundType",{name:"SETTINGS.ArtWorkSheetBackgroundType",scope:"world",config:!0,default:"slice",type:String,choices:{slice:"SETTINGS.BackgroundSlice",auto:"SETTINGS.BackgroundAuto",contain:"SETTINGS.BackgroundContain",cover:"SETTINGS.BackgroundCover"}}),game.settings.register("CoC7","artWorkOtherSheetBackground",{name:"SETTINGS.ArtWorkOtherSheetBackground",hint:"SETTINGS.ArtWorkOtherSheetBackgroundHint",scope:"world",config:!0,default:"url( './assets/images/background.webp')",type:String}),game.settings.register("CoC7","artworkSheetImage",{name:"SETTINGS.ArtworkSheetImage",hint:"SETTINGS.ArtworkSheetImageHint",scope:"world",config:!0,default:"url('./assets/images/tentacles.webp')",type:String}),game.settings.register("CoC7","artworkFrontColor",{name:"SETTINGS.ArtworkFrontColor",hint:"SETTINGS.ArtworkFrontColorHint",scope:"world",config:!0,default:"rgba(43,55,83,1)",type:String}),game.settings.register("CoC7","artworkBackgroundColor",{name:"SETTINGS.ArtworkBackgroundColor",hint:"SETTINGS.ArtworkBackgroundColorHint",scope:"world",config:!0,default:"rgba(103,11,11,1)",type:String}),game.settings.register("CoC7","artworkInteractiveColor",{name:"SETTINGS.ArtworkInteractiveColor",hint:"SETTINGS.ArtworkInteractiveColorHint",scope:"world",config:!0,default:"rgba(103,11,11,1)",type:String}),game.settings.register("CoC7","artworkFixedSkillLength",{name:"SETTINGS.ArtworkFixedSkillLength",hint:"SETTINGS.ArtworkFixedSkillLengthHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","artworkMainFont",{name:"SETTINGS.ArtworkMainFont",scope:"world",config:!0,default:"",type:String}),game.settings.register("CoC7","artworkMainFontBold",{name:"SETTINGS.ArtworkMainFontBold",scope:"world",config:!0,default:"",type:String}),game.settings.register("CoC7","artworkMainFontSize",{name:"SETTINGS.ArtworkMainFontSize",scope:"world",config:!0,default:16,type:Number})),game.settings.register("CoC7","disregardUsePerRound",{name:"SETTINGS.DisregardUsePerRound",hint:"SETTINGS.DisregardUsePerRoundHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","disregardAmmo",{name:"SETTINGS.DisregardAmmo",hint:"SETTINGS.DisregardAmmoHint",scope:"world",config:!0,default:!1,type:Boolean}),game.modules.get("dice-so-nice")?.active){game.settings.register("CoC7","syncDice3d",{name:"SETTINGS.SyncDice3D",hint:"SETTINGS.SyncDice3DHint",scope:"world",config:!0,default:!0,type:Boolean});const[version]=game.modules.get("dice-so-nice")?.data.version.split(".");!isNaN(Number(version))&&Number(version)>=3&&(game.settings.register("CoC7","tenDieBonus",{name:"SETTINGS.TenDieBonus",hint:"SETTINGS.TenDieBonusHint",scope:"client",config:!0,default:"bronze",type:String}),game.settings.register("CoC7","tenDiePenalty",{name:"SETTINGS.TenDiePenalty",hint:"SETTINGS.TenDiePenaltyHint",scope:"client",config:!0,default:"bloodmoon",type:String}))}function _setInitiativeOptions(rule){let decimals=0;switch(rule){case"optional":decimals=2;break;case"basic":decimals=0}CONFIG.Combat.initiative={formula:null,decimals}}game.settings.register("CoC7","debugmode",{name:"SETTINGS.DebugMode",hint:"SETTINGS.DebugModeHint",scope:"world",config:!0,type:Boolean,default:!1}),game.settings.register("CoC7","experimentalFeatures",{name:"SETTINGS.ShowExperimentalFeatures",hint:"SETTINGS.ShowExperimentalFeaturesHint",scope:"world",config:!0,type:Boolean,default:!1}),game.settings.register("CoC7","developmentEnabled",{name:"Dev phased allowed",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","showWelcomeMessage",{name:"SETTINGS.showWelcomeMessage",hint:"SETTINGS.showWelcomeMessage",scope:"world",config:!1,default:!0,type:Boolean}),game.settings.register("CoC7","charCreationEnabled",{name:"Char creation allowed",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","systemUpdateVersion",{name:"System update version",scope:"world",config:!1,type:String,default:game.system.data.version}),game.settings.register("CoC7","systemUpdatedModuleVersion",{scope:"world",config:!1,default:{}}),game.settings.register("CoC7","xpEnabled",{name:"Enable XP gain",scope:"world",config:!1,type:Boolean,default:!0}),CONFIG.Combat.initiative={formula:"@characteristics.dex.value",decimals:4},CONFIG.debug.hooks=!!game.settings.get("CoC7","debugmode"),_setInitiativeOptions(game.settings.get("CoC7","initiativeRule")),CONFIG.Dice.terms.t=CoC7DecaderDie}(),Actors.unregisterSheet("core",ActorSheet),Actors.registerSheet("CoC7",CoC7NPCSheet,{types:["npc"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7VehicleSheet,{types:["vehicle"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7CreatureSheet,{types:["creature"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7ContainerSheet,{types:["container"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7CharacterSheet,{types:["character"]}),Actors.registerSheet("CoC7",CoC7CharacterSheetV2,{types:["character"],makeDefault:!0}),Items.unregisterSheet("core",ItemSheet),Items.registerSheet("CoC7",CoC7SkillSheet,{types:["skill"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7WeaponSheet,{types:["weapon"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7BookSheet,{types:["book"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7SpellSheet,{types:["spell"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7TalentSheet,{types:["talent"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7StatusSheet,{types:["status"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7OccupationSheet,{types:["occupation"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ArchetypeSheet,{types:["archetype"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7SetupSheet,{types:["setup"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ChaseSheet,{types:["chase"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ItemSheet,{types:["item"]}),Items.registerSheet("CoC7",CoC7ItemSheetV2,{types:["item"],makeDefault:!0}),Handlebars.registerHelper("rollActorImg",(function(actorKey){return chatHelper.getActorImgFromKey(actorKey)||"../icons/svg/mystery-man-black.svg"}))}))}class CoC7Tooltips{constructor(){this.ToolTipHover=null,this.toolTipTimer=null}displayToolTip(toolTip){if(void 0!==this.ToolTipHover){const bounds=this.ToolTipHover.getBoundingClientRect();if(!isNaN(bounds.left||"")&&!isNaN(bounds.top||"")){let left=bounds.left,top=bounds.top;const heightText=$(this.ToolTipHover).outerHeight();$("body").append('<div id="help-tooltip">'+toolTip+"</div>");const tip=$("#help-tooltip"),heightTip=tip.outerHeight(),widthTip=tip.outerWidth();window.innerHeight<1.5*heightText+heightTip+top?top-=heightTip:top+=1.5*heightText,window.innerWidth<widthTip+left&&(left=window.innerWidth-widthTip),tip.css({left:left+"px",top:top+"px"})}}}toolTipLeave(event){game.CoC7Tooltips.ToolTipHover===event.currentTarget&&(clearTimeout(game.CoC7Tooltips.toolTipTimer),game.CoC7Tooltips.ToolTipHover=null,$("#help-tooltip").remove())}}const CoC7Hooks={listen(){listen(),Hooks.once("ready",(async()=>{console.log("Call of Cthulhu 7th Edition | Ready"),game.settings.get("CoC7","showWelcomeMessage")&&game.user.isGM,game.CoC7Tooltips=new CoC7Tooltips})),Hooks.on("renderActorSheet",(async(data,html,options)=>{})),Hooks.on("renderChatMessage",(()=>{})),Hooks.on("renderDialog",((dialog,html)=>{const form=html.find("form");if(form.is("#entity-create")&&0!==form.find("select").length){const entityCreateSelectTag=form.find("[name='type']"),entitySortedList=[],showExperimental=!!game.settings.get("CoC7","experimentalFeatures");entityCreateSelectTag.children().each(((o,entityOption)=>{const key=entityOption.textContent?.capitalize();game.i18n.has(`CoC7.Entities.${key}`)&&(entityOption.textContent=game.i18n.localize(`CoC7.Entities.${key}`)),!showExperimental&&["chase","container","vehicle"].includes(entityOption.value)||entitySortedList.push(entityOption)})),entityCreateSelectTag.empty(),entityCreateSelectTag.append(entitySortedList.sort(((first,second)=>first.innerText.localeCompare(second.innerText)))),"actor"===entityCreateSelectTag.val()?entityCreateSelectTag.val("character"):"book"===entityCreateSelectTag.val()&&entityCreateSelectTag.val("item")}})),Hooks.on("renderItemSheet",(async(data,html,options)=>{})),Hooks.on("renderPause",(async(data,html,options)=>{game.settings.get("CoC7","overrideGameArtwork")&&("null"===game.settings.get("CoC7","artPauseImage").toLowerCase()&&html.find("img").remove(),""!=game.settings.get("CoC7","artPauseImage")&&html.find("img").attr("src",game.settings.get("CoC7","artPauseImage")),""!=game.settings.get("CoC7","artPauseText")&&html.find("h3").html(game.settings.get("CoC7","artPauseText")))}))}};async function gmcreatemessageas(data){const meleeTarget=new CoC7MeleeTarget(data.targetKey,data.messageId,data.fastForward);meleeTarget.initiatorKey=data.actorKey;return await meleeTarget.createChatCard()}async function gmtradeitemto(data){try{let actor;actor=data.scene?game.scenes.get(data.scene).tokens.get(data.actorFrom).actor:game.actors.get(data.actorFrom);const item=actor.items.get(data.item);await game.actors.get(data.actorTo).createEmbeddedDocuments("Item",[item.toJSON()])&&actor.deleteEmbeddedDocuments("Item",[item.id])}catch(e){return ui.notifications.error(e),!1}return!0}function _onLeftClick(event){return event.shiftKey}Hooks.on("renderSettingsConfig",((app,html,options)=>{const systemTab=$(app.form).find(".tab[data-tab=system]");systemTab.find("input[name=CoC7\\.pulpRules]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleRules")+"</h2>"),systemTab.find("select[name=CoC7\\.initiativeRule]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleInitiative")+"</h2>"),systemTab.find("input[name=CoC7\\.stanbyGMRolls]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleRoll")+"</h2>"),systemTab.find("input[name=CoC7\\.displayActorOnCard]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleChatCards")+"</h2>"),systemTab.find("input[name=CoC7\\.enableStatusIcons]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleScene")+"</h2>"),systemTab.find("input[name=CoC7\\.overrideGameArtwork]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleGameArtwork")+"</h2>"),systemTab.find("input[name=CoC7\\.displayPlayerNameOnSheet]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleSheet")+"</h2>"),systemTab.find("input[name=CoC7\\.disregardUsePerRound]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleWeapon")+"</h2>"),systemTab.find("input[name=CoC7\\.syncDice3d]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleDiceSoNice")+"</h2>"),systemTab.find("input[name=CoC7\\.debugmode]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleDeveloperDebug")+"</h2>"),systemTab.find("select[name=CoC7\\.boutOfMadnessSummaryTable]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleRollTable")+"</h2>")})),Hooks.once("diceSoNiceReady",(dice3d=>{dice3d.addDicePreset({type:"dt",labels:["10","20","30","40","50","60","70","80","90","00"],fontScale:.75,system:"standard"},"dt")})),Hooks.once("init",(async function(){game.CoC7={macros:{skillCheck:CoC7Utilities.skillCheckMacro,weaponCheck:CoC7Utilities.weaponCheckMacro,check:CoC7Utilities.checkMacro},cards:{DamageCard}},Combat.prototype.rollInitiative=rollInitiative})),Hooks.on("renderCombatTracker",((app,html,data)=>CoC7Combat.renderCombatTracker(app,html,data))),Hooks.on("chatMessage",((html,content)=>{if(content.match(/^\/(cbr|cc)/i)){const commands=content.match(/(\d+)/g);return commands?new Roll("1d100").roll({async:!0}).then((r=>{const s=r.result,res=commands.map((m=>{let res="";return res=s<=1?game.i18n.localize("CoC7.CriticalSuccess"):s>=100?game.i18n.localize("CoC7.Fumble"):s<=m/5?game.i18n.localize("CoC7.ExtremeSuccess"):s<=m/2?game.i18n.localize("CoC7.HardSuccess"):s<=m?game.i18n.localize("CoC7.RegularSuccess"):s>=96&&m<50?game.i18n.localize("CoC7.Fumble"):game.i18n.localize("CoC7.Failure"),res+=" "+game.i18n.localize("CoC7.Value")+" "+m,res})).join(" / ");r.toMessage({speaker:ChatMessage.getSpeaker(),flavor:res})})):ui.notifications.error("Incorrect usage of command"),!1}})),CoC7Hooks.listen(),Hooks.once("socketlib.ready",(function(){game.CoC7socket=socketlib.registerSystem("CoC7"),game.CoC7socket.register("gmcreatemessageas",gmcreatemessageas),game.CoC7socket.register("gmtradeitemto",gmtradeitemto)})),Hooks.once("setup",(function(){const toLocalize=["spellProperties","bookType","talentType","occupationProperties","statusType"];for(const o of toLocalize){const localized=Object.entries(COC7[o]).map((e=>[e[0],game.i18n.localize(e[1])]));COC7[o]=localized.reduce(((obj,e)=>(obj[e[0]]=e[1],obj)),{})}let effectIndex=CONFIG.statusEffects.findIndex((t=>"dead"===t.id));-1!==effectIndex&&(CONFIG.statusEffects[effectIndex].icon="systems/CoC7/assets/icons/tombstone.svg"),effectIndex=CONFIG.statusEffects.findIndex((t=>"unconscious"===t.id)),-1!==effectIndex&&(CONFIG.statusEffects[effectIndex].icon="systems/CoC7/assets/icons/knocked-out-stars.svg"),CONFIG.statusEffects.unshift({id:"boutOfMadness",label:"CoC7.BoutOfMadnessName",icon:"systems/CoC7/assets/icons/hanging-spider.svg"},{id:"insanity",label:"CoC7.InsanityName",icon:"systems/CoC7/assets/icons/tentacles-skull.svg"},{id:"criticalWounds",label:"criticalWounds",icon:"systems/CoC7/assets/icons/arm-sling.svg"},{id:"dying",label:"dying",icon:"systems/CoC7/assets/icons/heart-beats.svg"})})),Hooks.on("hotbarDrop",(async(bar,data,slot)=>CoC7Utilities.createMacro(bar,data,slot))),Hooks.on("renderChatLog",((app,html,data)=>CoC7Chat.chatListeners(app,html,data))),Hooks.on("renderChatMessage",((app,html,data)=>CoC7Chat.renderMessageHook(app,html,data))),Hooks.on("updateChatMessage",((chatMessage,chatData,diff,speaker)=>CoC7Chat.onUpdateChatMessage(chatMessage,chatData,diff,speaker))),Hooks.on("ready",(async()=>{function _tableSettingsChanged(table,id){game.CoC7.tables[table]="none"===id?null:game.tables.get(id)}await Updater.checkForUpdate(),$("body").on("click","a.coc7-inline-check",CoC7Check._onClickInlineRoll),document.addEventListener("mousedown",_onLeftClick),tinyMCE.PluginManager.add("CoC7_Editor_OnDrop",(function(editor){editor.on("drop",(event=>CoC7Parser.onEditorDrop(event,editor)))})),CONFIG.TinyMCE.plugins=`CoC7_Editor_OnDrop ${CONFIG.TinyMCE.plugins}`,game.CoC7.skillList=await(game.packs.get("CoC7.skills")?.getDocuments()),game.socket.on("system.CoC7",(async data=>{if("updateChar"===data.type&&CoC7Utilities.updateCharSheets(),game.user.isGM&&(OpposedCheckCard.defaultConfig.type===data.type&&OpposedCheckCard.dispatch(data),CombinedCheckCard.defaultConfig.type===data.type&&CombinedCheckCard.dispatch(data),"invoke"===data.type)){(await fromUuid(data.item))[data.method](data.data)}}));const tableChoice={none:"SETTINGS.LetKeeperDecide"};for(const t of game.tables)tableChoice[t.data._id]=t.data.name;game.settings.register("CoC7","boutOfMadnessSummaryTable",{name:"SETTINGS.BoutOfMadnessSummaryTable",scope:"world",config:!0,default:"none",type:String,choices:tableChoice,onChange:id=>_tableSettingsChanged("boutOfMadness_Summary",id)}),game.settings.register("CoC7","boutOfMadnessRealTimeTable",{name:"SETTINGS.BoutOfMadnessRealTimeTable",scope:"world",config:!0,default:"none",type:String,choices:tableChoice,onChange:id=>_tableSettingsChanged("boutOfMadness_RealTime",id)}),game.CoC7.tables={boutOfMadness_Summary:"none"===game.settings.get("CoC7","boutOfMadnessSummaryTable")?null:game.tables.get(game.settings.get("CoC7","boutOfMadnessSummaryTable")),boutOfMadness_RealTime:"none"===game.settings.get("CoC7","boutOfMadnessRealTimeTable")?null:game.tables.get(game.settings.get("CoC7","boutOfMadnessRealTimeTable"))}})),Hooks.on("renderCoC7ChaseSheet",((app,html,data)=>CoC7ChaseSheet.setScroll(app,html,data))),Hooks.on("closeCoC7ChaseSheet",((app,html)=>CoC7ChaseSheet.onClose(app,html))),Hooks.on("closeActorSheet",(characterSheet=>characterSheet.onCloseSheet())),Hooks.on("renderCoC7CreatureSheet",((app,html,data)=>CoC7CreatureSheet.forceAuto(app,html,data))),Hooks.on("renderCoC7NPCSheet",((app,html,data)=>CoC7NPCSheet.forceAuto(app,html,data))),Hooks.on("chatMessage",CoC7Utilities.ParseChatEntry),Hooks.on("getSceneControlButtons",(()=>{})),Hooks.on("renderItemSheet",CoC7Parser.ParseSheetContent),Hooks.on("renderJournalSheet",CoC7Parser.ParseSheetContent),Hooks.on("renderActorSheet",CoC7Parser.ParseSheetContent),Hooks.on("renderChatMessage",((app,html,data)=>{CoC7Chat.renderChatMessageHook(app,html,data),CoC7Parser.ParseMessage(app,html,data)})),Hooks.on("renderActorSheet",CoC7CharacterSheetV2.renderSheet),Hooks.on("renderItemSheet",CoC7CharacterSheetV2.renderSheet),Hooks.on("getSceneControlButtons",CoC7Menu.getButtons),Hooks.on("renderSceneControls",CoC7Menu.renderControls),Hooks.on("dropCanvasData",CoC7Canvas.onDropSomething),Hooks.on("dropActorSheetData",(function(actor,sheet,data){if("Item"===data.type&&data.actorId){if(actor.data._id===data.actorId)return;let actorFrom=null;switch(actorFrom=data.sceneId&&data.tokenId?game.scenes.get(data.sceneId).tokens.get(data.tokenId).actor:game.actors.get(data.actorId),actor.data.type){case"character":case"npc":case"creature":if(!["chase"].includes(data.data.type))return;break;case"vehicle":return;case"container":if(!["book","item","spell","weapon"].includes(data.data.type))return}actorFrom&&actorFrom.deleteEmbeddedDocuments("Item",[data.data._id])}})),CONFIG.ui.compendium=CoC7CompendiumDirectory,CONFIG.ui.actors=CoC7ActorDirectory})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmpzIiwibWFwcGluZ3MiOiJtQkFFTyxNQUFNQSxTQUNYLGtCQUFtQkMsTUFBUSxFQUFHQyxTQUFXLEtBQU1DLFVBQVcsR0FDeEQsSUFBSUMsZ0JBQWtCLEdBQ2xCQyxLQUFLQyxRQUFRQyxJQUFJLGlCQUFpQkMsU0FDaENQLE1BQVEsRUFDVkcsZ0JBQWtCQyxLQUFLSSxTQUFTRixJQUFJLE9BQVEsaUJBQ25DTixNQUFRLElBQ2pCRyxnQkFBa0JDLEtBQUtJLFNBQVNGLElBQUksT0FBUSxpQkFHaEQsTUFBTUcsV0FBYSxJQUFJQyxLQUNyQixPQUVJLFFBQThCLEtBQXBCUCxnQkFBeUIsSUFBTUEsZ0JBQWtCLElBQU0sS0FDakVRLE9BQU9DLEtBQUtDLElBQUliLFFBQ2xCLFNBQ0ZTLEtBQUssQ0FBRUssT0FBTyxJQUNWQyxPQUFTLENBQ2JDLEtBQU0sQ0FDSkMsTUFBTyxFQUNQQyxRQUFTLElBRVhDLEtBQU0sQ0FDSkYsTUFBTyxFQUNQQyxRQUFTLElBRVhELE1BQU8sRUFDUFIsTUFFRVIsV0FBVWMsT0FBT2QsU0FBV0EsVUFDNUJDLFdBQVVhLE9BQU9iLFNBQVdBLFVBQ2hDLElBQUssTUFBTWtCLEtBQUtYLEtBQUtZLEtBQ2ZELGFBQWFFLE9BQU9DLEtBQUtDLE1BQU1DLEVBQ2pDVixPQUFPSSxLQUFLRCxRQUFRUSxLQUFLTixFQUFFSCxRQUUzQkYsT0FBT0MsS0FBS0MsTUFBb0IsS0FBWkcsRUFBRUgsTUFBZSxFQUFJRyxFQUFFSCxNQUMzQ0YsT0FBT0MsS0FBS0UsUUFBUVEsS0FBS1gsT0FBT0MsS0FBS0MsUUFHekMsR0FBSWpCLE1BQVEsRUFDVmUsT0FBT0ksS0FBS0YsTUFDWSxJQUF0QkYsT0FBT0MsS0FBS0MsT0FBZUYsT0FBT0ksS0FBS0QsUUFBUVMsU0FBUyxHQUNwRCxJQUNBZixLQUFLZ0IsT0FBT2IsT0FBT0ksS0FBS0QsY0FDekIsR0FBMEIsSUFBdEJILE9BQU9DLEtBQUtDLE1BQWEsQ0FDbEMsTUFBTUksS0FBT04sT0FBT0ksS0FBS0QsUUFBUVcsUUFBT0osR0FBS0EsRUFBSSxJQUNqRFYsT0FBT0ksS0FBS0YsTUFBd0IsSUFBaEJJLEtBQUtTLE9BQWUsSUFBTWxCLEtBQUttQixPQUFPVixXQUUxRE4sT0FBT0ksS0FBS0YsTUFBUUwsS0FBS21CLE9BQU9oQixPQUFPSSxLQUFLRCxTQUc5QyxPQURBSCxPQUFPRSxNQUFRRixPQUFPQyxLQUFLQyxNQUFRRixPQUFPSSxLQUFLRixNQUN4Q0YsT0FHVCw0QkFBNkJOLE1BQzNCLEdBQUlMLEtBQUtDLFFBQVFDLElBQUksaUJBQWlCQyxPQUFRLENBQzVDLE1BQU15QixTQUFXNUIsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGNBRXJDMkIsU0FBVyxDQUNmQyxRQUFTLEtBQ1RDLE9BQU8sR0FFVEMsWUFBWUMsY0FBY0osU0FBVTdCLEtBQUtJLFNBQVNGLElBQUksT0FBUSxtQkFFeERGLEtBQUtrQyxPQUFPQyxZQUNoQjlCLEtBQ0FMLEtBQUtvQyxLQUNMUixTQUNBQyxTQUFTQyxRQUNURCxTQUFTRSxTQy9EVixTQUFTTSxpQkFBa0JoQyxNQUNoQyxNQUFNaUMsS0FBTyxDQUNYQyxJQUFLLENBQUMsZUFDTkMsUUFBUyxJQUdYLElBQ0VGLEtBQUtDLElBQUlqQixLQUFLLGlCQUNkZ0IsS0FBSzNCLE9BQVNOLEtBQUtRLE1BQ25CeUIsS0FBS0csTUFBUXBDLEtBQUtxQyxRQUNsQkosS0FBS0UsUUFBUW5DLEtBQU9zQyxPQUFPQyxLQUFLQyxVQUFVeEMsT0FDMUMsTUFBT3lDLEtBQ1AsT0FBTyxLQUlULE1BQU1DLEVBQUlDLFNBQVNDLGNBQWMsS0FDakNGLEVBQUVHLFVBQVVDLE9BQU9iLEtBQUtDLEtBQ3hCUSxFQUFFTixNQUFRSCxLQUFLRyxNQUNmLElBQUssTUFBT1csRUFBR0MsS0FBTUMsT0FBT0MsUUFBUWpCLEtBQUtFLFNBQ3ZDTyxFQUFFUCxRQUFRWSxHQUFLQyxFQUdqQixPQURBTixFQUFFUyxVQUFZLG1DQUFtQ2xCLEtBQUszQixTQUMvQ29DLEVBcUNGLFNBQVNVLFVBQVdDLE9BQ3pCLE9BQ0VBLE1BQU1DLFNBQ05ELE1BQU1FLFNBQ1ksS0FBbEJGLE1BQU1HLFNBQ1ksTUFBbEJILE1BQU1HLFFBSUgsTUFBTUMsV0FDWCx5QkFBMEJDLFFBQ3hCLE9BQU9BLE9BQU9DLFFBQVEsYUFBYSxTQUFVRCxRQUMzQyxPQUFPQSxPQUFPLEdBQUdFLGlCQUlyQiwyQkFBNEJ4QixNQUFPeUIsUUFBU0MsUUFBVSxJQUNwRCxNQUFNQyxZQUFjLEdBQ3BCQSxZQUFZQyxPQUFTNUIsTUFDckIyQixZQUFZRSxRQUFVSCxRQUFRRyxTQUFXdEMsWUFBWXVDLGFBQ2pESixRQUFRckMsVUFDVnNDLFlBQVlJLEtBQU9DLE1BQU1DLG1CQUFtQkMsUUFDNUNQLFlBQVl0QyxRQUFVcUMsUUFBUXJDLGNBRUosSUFBakJxQyxRQUFROUQsT0FDakIrRCxZQUFZL0QsS0FBTzhELFFBQVE5RCxLQUMzQitELFlBQVlJLEtBQU9DLE1BQU1DLG1CQUFtQkUsS0FDNUNSLFlBQVl2RSxTQUFXNEUsTUFBTUksZ0JBQWdCQyxNQUUvQ1YsWUFBWWhDLEtBQU9wQyxLQUFLb0MsS0FBSzJDLEdBQzdCWCxZQUFZWSxRQUFVZCxRQUV0QmxDLFlBQVlpRCxPQUFPYixhQUFhYyxNQUFLQyxLQUM1QkEsTUFJWCx5QkFBMEJwQixRQUN4QixPQUFPQSxPQUFPQyxRQUFRLFlBQVksU0FBVUQsUUFDMUMsTUFBTyxJQUFNQSxPQUFPcUIsaUJBSXhCLHVCQUF3QkMsS0FDdEIsSUFBS0EsSUFBSyxPQUFPLEtBRWpCLEdBQUlBLElBQUk5RCxTQUFTLEtBQU0sQ0FFckIsTUFBTytELFFBQVNDLFNBQVdGLElBQUlHLE1BQU0sS0FDckMsR0FBZ0IsVUFBWkYsUUFDRixPQUFPdEYsS0FBS3lGLE9BQU9DLE9BQU9ILFNBRzVCLE9BRGN6QixXQUFXNkIsZ0JBQWdCTixNQUMzQk8sTUFJaEIsT0FBTzVGLEtBQUt5RixPQUFPdkYsSUFBSW1GLE1BQVEsS0FHakMseUJBQTBCUSxVQUN4QixNQUFNdkIsUUFBVSxHQUNWc0IsTUFBUTlCLFdBQVdnQyxnQkFBZ0JELFVBQ3pDLEdBQUlBLFNBQVN0RSxTQUFTLEtBQU0sQ0FDMUIsTUFBTytELFFBQVNDLFNBQVdNLFNBQVNMLE1BQU0sS0FDMUNsQixRQUFReUIsTUFBUVIsUUFDaEJqQixRQUFRMEIsTUFBUVYsUUFDWk0sTUFBTUcsT0FBT0UsT0FBTTNCLFFBQVE0QixNQUFRTixNQUFNRyxNQUFNRSxNQUNuRDNCLFFBQVFzQixNQUFRQSxNQUFNYixRQUV0QlQsUUFBUXNCLE1BQVFDLFNBQ2hCdkIsUUFBUTRCLE1BQVFOLE1BQU1LLEtBRXhCLE9BQU8zQixRQUdULDZCQUE4QjZCLE9BQVFDLFFBQVNDLFdBQWEsSUFDMUQsSUFBSyxNQUFNQyxRQUFRaEQsT0FBT2lELEtBQUtKLFFBQ3hCRyxLQUFLRSxXQUFXLE9BQ1MsaUJBQWpCTCxPQUFPRyxNQUNoQnhDLFdBQVcyQyxzQkFDVE4sT0FBT0csTUFDUEYsUUFDQSxHQUFHQyxjQUFjQyxTQUduQkYsUUFBUTVELFFBQVEsR0FBRzZELGFBQWFDLFFBQVVILE9BQU9HLE9BTXpELDRCQUE2QkgsT0FBUUMsU0FDbkMsU0FBU00sWUFBYUMsSUFBS3RCLElBQUt1QixPQUM5QixHQUFJdkIsSUFBSW1CLFdBQVcsS0FBTSxDQUN2QixNQUFNSyxFQUFJeEIsSUFBSXlCLE1BQU0sR0FDZEMsUUFBVUYsRUFBRUMsTUFBTUQsRUFBRUcsUUFBUSxLQUFPLEdBQ25DQyxRQUFVSixFQUFFSyxVQUFVLEVBQUdMLEVBQUVHLFFBQVEsV0FDYixJQUFqQkwsSUFBSU0sV0FBMEJOLElBQUlNLFNBQVcsSUFDeERQLFlBQVlDLElBQUlNLFNBQVVGLFFBQVNILFdBRXJCLFNBQVZBLE1BQWtCRCxJQUFJdEIsTUFBTyxFQUNkLFVBQVZ1QixNQUFtQkQsSUFBSXRCLE1BQU8sRUFDOUI4QixPQUFPUCxPQUFPUSxhQUFlUixNQUFPRCxJQUFJdEIsS0FBTzhCLE9BQU9QLE9BQzFERCxJQUFJdEIsS0FBT3VCLE1BSXBCLEdBQUtSLFNBQVlELE9BQ2pCLElBQUssTUFBTUcsUUFBUWhELE9BQU9pRCxLQUFLSCxRQUFRNUQsU0FBVSxDQUMvQyxHQUFhLGFBQVQ4RCxLQUFxQixPQUN6QkksWUFBWVAsT0FBUUcsS0FBTUYsUUFBUTVELFFBQVE4RCxRQUk5Qyx1QkFBd0JqQixLQUN0QixJQUFLQSxJQUFLLE9BQU8sS0FDakIsR0FBSUEsSUFBSTlELFNBQVMsS0FBTSxDQUNyQixNQUFPK0QsUUFBU0MsU0FBV0YsSUFBSUcsTUFBTSxLQUNyQyxHQUFnQixVQUFaRixRQUFxQixDQUN2QixNQUFNK0IsU0FBV3JILEtBQUt5RixPQUFPQyxPQUFPSCxVQUFVUSxNQUM5QyxPQUFPc0IsU0FBU2xCLE9BQ1gsQ0FDTCxNQUFNSCxNQUFRaEcsS0FBS3NILE9BQU9wSCxJQUFJb0YsU0FDOUIsSUFBS1UsTUFBTyxPQUFPLEtBQ25CLE1BQU11QixVQUFZdkIsTUFBTXdCLG9CQUFvQixRQUFTakMsU0FDckQsSUFBS2dDLFVBQVcsT0FBTyxLQUN2QixNQUFNeEIsTUFBUSxJQUFJMEIsTUFBTUYsV0FFeEIsT0FES3hCLE1BQU1DLFFBQU9ELE1BQU1DLE1BQVEwQixVQUFVMUIsTUFBTTFELE9BQ3pDeUQsT0FFSixDQUNMLE1BQU1ILE1BQVE1RixLQUFLeUYsT0FBT3ZGLElBQUltRixLQUM5QixPQUFPdkIsV0FBVzZELGNBQWMvQixRQUlwQyxxQkFBc0JBLE9BQ3BCLE9BQUtBLE1BRUVBLE1BQU1HLE9BQVMsQ0FBRXpELEtBQU1zRCxNQUFNdEQsS0FBS3lELE9BRnRCLEtBK0JyQiwwQkFBMkJGLFVBQ3pCLElBQUtBLFNBQVUsT0FBTyxLQUN0QixHQUFJN0YsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLFlBQWEsQ0FFekMsTUFBTTZGLE1BQVFqQyxXQUFXNkIsZ0JBQWdCRSxVQUN6QyxHQUFJRSxRQUEwQyxJQUFqQ0EsTUFBTXpELEtBQUtzRixJQUFJWixRQUFRLEtBQWEsT0FBT2pCLE1BQU16RCxLQUFLc0YsSUFFckUsTUFBTWhDLE1BQVE5QixXQUFXZ0MsZ0JBQWdCRCxVQUN6QyxPQUFJN0YsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGFBRXhCMEYsTUFBTXRELEtBQUt5RCxRQUFnRCxJQUF2Q0gsTUFBTXRELEtBQUt5RCxNQUFNNkIsSUFBSVosUUFBUSxLQUM1Q3BCLE1BQU10RCxLQUFLeUQsTUFBTTZCLElBRXJCaEMsTUFBTXRELEtBQUtzRixJQUdwQixtQkFBb0JDLFdBQVlDLFVBRzlCLFFBQzZCLElBQXBCQSxTQUFTQyxhQUNzQixJQUEvQkQsU0FBU3hGLEtBQUtVLFVBQVUrQixJQUUzQjhDLFdBQVc3QixPQUFPakIsR0FBYSxDQUNqQyxNQUFNaUIsTUFBUWhHLEtBQUtzSCxPQUFPcEgsSUFBSTJILFdBQVc3QixNQUFNakIsSUFDL0MsUUFBNkIsSUFBbEJpQixPQUFPTixPQUF3QixDQUN4QyxNQUFNQSxPQUFTTSxPQUFPTixPQUNuQmpFLFFBQU9zRSxPQUFTQSxNQUFNSCxNQUFNYixLQUFPK0MsU0FBU3hGLEtBQUtVLFNBQVMrQixLQUMxRGlELEtBQUlqQyxPQUFTQSxNQUFNSSxTQUNBLElBQWxCVCxPQUFPaEUsU0FDVG9HLFNBQVdwQyxPQUFPLEtBSzFCLElBQUl1QyxTQUFXLENBQ2JDLFNBQVUsRUFDVnRCLE1BQU8sRUFDUGhHLEtBQU11SCxPQUFPbkMsTUFBTTFELEtBQUs4RixXQUUxQixRQUN3QixJQUFmUCxpQkFDc0IsSUFBdEJBLFdBQVdFLGFBQ0UsSUFBYkQsZUFDb0IsSUFBcEJBLFNBQVNDLE9BQ2hCLENBQ0EsTUFBTU0sSUFBTSxJQUFJQyxJQUFJVCxXQUFXRSxPQUFRRCxTQUFTQyxRQUMxQ1EsUUFBVSxDQUFDLENBQUVGLE1BU25CLEdBUkFKLFNBQVcsQ0FDVEMsU0FBVUcsSUFBSUosU0FBV0UsT0FBT25DLE1BQU0xRCxLQUFLa0csS0FFM0M1QixNQUFPdUIsT0FBT0ssS0FBS0MsaUJBQWlCRixRQUFTLENBQzNDRyxXQUFZMUksS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGdCQUNyQyxHQUNIVSxLQUFNdUgsT0FBT25DLE1BQU0xRCxLQUFLOEYsV0FFdEJwSSxLQUFLSSxTQUFTRixJQUFJLE9BQVEscUJBQXNCLENBQ2xELE1BQU15SSxVQUFZbkksS0FBS0MsS0FDcEJvSCxXQUFXdkYsS0FBS3FHLFdBQWEsSUFBTWIsU0FBU3hGLEtBQUtxRyxXQUFhLElBRWpFVixTQUFTckIsTUFBUXBHLEtBQUtvSSxLQUNwQlgsU0FBU3JCLE1BQVFxQixTQUFTckIsTUFBUStCLFVBQVlBLGlCQUlsREUsR0FBR0MsY0FBY0MsS0FDZi9JLEtBQUtnSixLQUFLQyxTQUFTLDJDQUd2QixPQUFPaEIsU0FHVCxlQUFnQkEsVUFDZCxPQUFRQSxTQUFTckgsTUFDZixJQUFLLEtBQ0gsT0FBT3FILFNBQVNyQixNQUFRLEVBRTFCLElBQUssS0FHTCxJQUFLLElBR0wsUUFDRSxPQUFPcUIsU0FBU3JCLFFBS2pCLE1BQU1zQyxTQUNYLG1CQUFvQkMsTUFDbEIsTUFBTUMsUUFBVUQsS0FBS0UsY0FBYyxpQkFDbkMsSUFBS0QsUUFBUyxPQUFPLEtBRXJCLE1BQU0vSSxLQUFPLElBQUk2SSxTQUdqQixPQUZBcEYsV0FBV3dGLHFCQUFxQmpKLEtBQU0rSSxTQUUvQi9JLEtBR1QsaUJBRUUsT0FEQWtKLEtBQUtDLGFBQWVDLFNBQVNGLEtBQUtDLGNBQzFCRCxLQUFLQyxjQUNYLEtBQUtFLFVBQVVGLGFBQWFHLFFBQzFCLE9BQU8zSixLQUFLZ0osS0FBS1ksT0FBTyx1QkFDMUIsS0FBS0YsVUFBVUYsYUFBYUssS0FDMUIsT0FBTzdKLEtBQUtnSixLQUFLWSxPQUFPLG9CQUMxQixLQUFLRixVQUFVRixhQUFhTSxRQUMxQixPQUFPOUosS0FBS2dKLEtBQUtZLE9BQU8sdUJBQzFCLEtBQUtGLFVBQVVGLGFBQWFPLFNBQzFCLE9BQU8vSixLQUFLZ0osS0FBS1ksT0FBTyx3QkFDMUIsS0FBS0YsVUFBVUYsYUFBYVEsT0FDMUIsT0FBT2hLLEtBQUtnSixLQUFLWSxPQUFPLGVBQzFCLEtBQUtGLFVBQVVGLGFBQWFTLFFBQzFCLE9BQU9qSyxLQUFLZ0osS0FBS1ksT0FBTyxnQkFFMUIsUUFDRSxPQUFPLE1BSWIsWUFDRSxPQUFJTCxLQUFLMUQsU0FBaUIvQixXQUFXZ0MsZ0JBQWdCeUQsS0FBSzFELFVBQ25ELEtBR1QsV0FDRSxPQUFJMEQsS0FBS1csUUFBVVgsS0FBSzNELE1BQWMyRCxLQUFLM0QsTUFBTXVFLE1BQU1qSyxJQUFJcUosS0FBS1csUUFDekQsS0FHVCxZQUNFLE9BQUlYLEtBQUthLFNBQVdiLEtBQUszRCxNQUFjMkQsS0FBSzNELE1BQU11RSxNQUFNakssSUFBSXFKLEtBQUthLFNBQzFELEtBR1RDLGVBQ0UsR0FBSXJLLEtBQUtDLFFBQVFDLElBQUksaUJBQWlCQyxPQUFRLENBQzVDLE1BQU1tSyxZQUFjLEdBQ3BCLElBQUssTUFBTUMsYUFBYWhCLEtBQUtpQixNQUFNekosS0FDakN1SixZQUFZaEosS0FBeUIsTUFBcEJpSixVQUFVM0QsTUFBZ0IsRUFBSTJELFVBQVUzRCxNQUFRLElBRW5FMEQsWUFBWWhKLEtBQUtpSSxLQUFLaUIsTUFBTTVKLEtBQUtnRyxPQUVqQyxNQUFNNkQsU0FBVyxDQUNmL0gsUUFBUyxHQUFHNkcsS0FBS2lCLE1BQU16SixLQUFLVyxrQkFDNUJaLFFBQVN3SixZQUNUeEksUUFBUyxLQUNUQyxPQUFPLEdBRVQvQixLQUFLa0MsT0FBT3dJLEtBQUtELFdBSXJCLHNCQUF1QnJFLFFBQVNELE9BQVMsTUFDdkMsSUFBS0MsUUFBUyxPQUNkLE1BQU0vRixLQUFPOEYsUUFBVSxJQUFJK0MsU0FDM0JwRixXQUFXd0YscUJBQXFCakosS0FBTStGLFNBQ3RDL0YsS0FBS21LLE1BQVEsQ0FDWHpKLEtBQU0sR0FDTkgsS0FBTSxJQUVSa0QsV0FBV3dGLHFCQUNUakosS0FBS21LLE1BQ0xwRSxRQUFRaUQsY0FBYyxpQkFFeEJoSixLQUFLbUssTUFBTUcsU0FBaUMsSUFBdEJ0SyxLQUFLdUssYUFDM0J2SyxLQUFLbUssTUFBTUssTUFBUXJLLEtBQUtDLElBQUlKLEtBQUt1SyxjQUNqQ3ZLLEtBQUttSyxNQUFNTSxVQUNUekssS0FBS3VLLGFBQWUsRUFDaEI1SyxLQUFLZ0osS0FBS1ksT0FBTyw0QkFDakI1SixLQUFLZ0osS0FBS1ksT0FBTywwQkFDdkIsTUFBTW1CLFFBQVUzRSxRQUFRaUQsY0FBYyxhQUN0QyxHQUFJMEIsUUFDRixJQUFLLE1BQU0vSixLQUFLK0osUUFBUUMsaUJBQWlCLE1BQU8sQ0FDOUMsTUFBTUMsSUFBTSxDQUNWQyxVQUFVLEVBQ1ZDLE9BQU8sRUFDUEMsT0FBTyxFQUNQeEUsT0FBUSxHQUVWOUMsV0FBV3dGLHFCQUFxQjJCLElBQUtqSyxHQUNyQ1gsS0FBS21LLE1BQU16SixLQUFLTyxLQUFLMkosS0FHekIsTUFBTUksUUFBVWpGLFFBQVFpRCxjQUFjLGFBQ2xDakQsUUFBUWlELGNBQWMsYUFBYUEsY0FBYyxNQUNqRCxLQUNKaEosS0FBS21LLE1BQU01SixLQUFLZ0csTUFBUXlFLFFBQVU1QixTQUFTNEIsUUFBUTdJLFFBQVFvRSxPQUFTLEtBRXBFdkcsS0FBS2lMLGdCQUFrQixHQUN2QixNQUFNQSxnQkFBa0JsRixRQUFRaUQsY0FBYyxxQkFDOUMsR0FBSWlDLGlCQUFtQkEsZ0JBQWdCTixpQkFBaUIsVUFDdEQsSUFBSyxNQUFNTyxPQUFPRCxnQkFBZ0JOLGlCQUFpQixVQUFXLENBQzVELE1BQU1RLGVBQWlCLEdBQ3ZCMUgsV0FBV3dGLHFCQUFxQmtDLGVBQWdCRCxLQUNoRGxMLEtBQUtpTCxnQkFBZ0JoSyxLQUFLa0ssZ0JBUzlCLE9BTEluTCxLQUFLb0wsYUFDUHBMLEtBQUtxTCxjQUFnQjFMLEtBQUtnSixLQUFLWSxPQUFPLGlCQUFrQixDQUN0RCtCLGdCQUFpQnRMLEtBQUtvTCxjQUdyQnRGLFlBQUwsRUFBb0I5RixLQUd0QixvQkFBcUJ1TCxPQUNuQixNQUFNdkwsS0FBTyxJQUFJNkksU0E2QmpCLE9BM0JBN0ksS0FBS3dMLFNBQVdELE1BQU1DLFNBQ3RCeEwsS0FBS3lMLEtBQU9GLE1BQU1FLEtBQ2xCekwsS0FBSzBMLE9BQVNILE1BQU1HLE9BQ3BCMUwsS0FBSzJMLGFBQWVKLE1BQU1JLGFBQzFCM0wsS0FBSzRMLG1CQUFxQkwsTUFBTUssbUJBRWhDNUwsS0FBS21KLGFBQWVvQyxNQUFNcEMsYUFDMUJuSixLQUFLNkwsV0FBYU4sTUFBTU0sV0FDeEI3TCxLQUFLK0osUUFBVXdCLE1BQU1PLE1BQVFQLE1BQU1PLE1BQU1wSCxHQUFLLEtBQzlDMUUsS0FBSzZKLE9BQVMwQixNQUFNUSxLQUFPUixNQUFNUSxLQUFLckgsR0FBSyxLQUMzQzFFLEtBQUtnTSxRQUFVVCxNQUFNaEIsYUFDckJ2SyxLQUFLdUcsTUFBUTZDLFNBQVNtQyxNQUFNVSxVQUM1QmpNLEtBQUsySixPQUFTNEIsTUFBTVcsU0FDcEJsTSxLQUFLMEosU0FBVzZCLE1BQU1ZLFdBQ3RCbk0sS0FBS29NLGVBQWlCYixNQUFNYSxlQUFpQmIsTUFBTWEsZUFBaUIsS0FDcEVwTSxLQUFLTSxPQUFTaUwsTUFBTTNLLEtBQUtKLE1BRXpCUixLQUFLd0YsU0FBVytGLE1BQU1oRyxNQUFNOEcsU0FFeEJkLE1BQU1oRyxNQUFNK0csU0FDZHRNLEtBQUtrRixRQUFVcUcsTUFBTWhHLE1BQU04RyxTQUMzQnJNLEtBQUt1TSxRQUFVLE9BRWZ2TSxLQUFLcU0sU0FBVyxLQUNoQnJNLEtBQUt1TSxRQUFVaEIsTUFBTWhHLE1BQU04RyxVQUd0QnJNLEtBR1QsNEJBQTZCd00sWUFBYWpCLE9BQ3hDLE1BQU12TCxLQUFPNkksU0FBUzRELGFBQWFsQixPQUduQyxPQUZBdkwsS0FBSzBNLGdCQUFnQkYsYUFFZHhNLEtBR1QwTSxnQkFBaUJGLGFBQ2YvSSxXQUFXMkMsc0JBQXNCOEMsS0FBTXNELGNBSXBDLE1BQU1HLFdBQ1gsa0JBQW1CQyxjQUNqQixPQUFJQSxhQUFhN0gsY0FBYzdELFNBQVMsT0FBZSxNQUNuRDBMLGFBQWE3SCxjQUFjN0QsU0FBUyxPQUFlLE1BQ25EMEwsYUFBYTdILGNBQWM3RCxTQUFTLE9BQWUsTUFDbkQwTCxhQUFhN0gsY0FBYzdELFNBQVMsTUFBYyxLQUNsRDBMLGFBQWE3SCxjQUFjN0QsU0FBUyxNQUFjLEtBQy9DLEtBR1Qsc0JBQXVCNkUsUUFBU0QsT0FBUyxNQUN2QyxJQUFLQyxRQUFTLE9BQ2QsTUFBTThHLE9BQVMvRyxRQUFVLEdBQ3pCckMsV0FBV3dGLHFCQUFxQjRELE9BQVE5RyxTQUN4QyxNQUFNK0csTUFBUS9HLFFBQVFpRCxjQUFjLGVBQWUyQixpQkFBaUIsTUFDcEVrQyxPQUFPQyxNQUFRLEdBQ2YsSUFBSyxNQUFNQyxLQUFLRCxNQUFPLENBQ3JCLE1BQU05TSxLQUFPLEdBQ2J5RCxXQUFXd0YscUJBQXFCakosS0FBTStNLEdBQ3RDRixPQUFPQyxNQUFNN0wsS0FBS2pCLE1BR3BCLE9BQUs4RixZQUFMLEVBQW9CK0csUUN6ZmpCLE1BQU1HLGNBWVgsaUJBQWtCQyxHQUNoQixNQUFpQixpQkFBTkEsTUFDTkMsTUFBTXBHLE9BQU9tRyxLQUNYaE4sS0FBS2tOLFNBQVNGLElBR3ZCLHNCQUF1QkcsS0FBTXpJLFNBQzNCLE1BQ001RCxNQUFRNEQsUUFBUTBJLE1BRFQsVUFFYixHQUNFdE0sTUFBTSxJQUFJZ0UsY0FBY3NJLE1BQU0sZ0JBQzlCdE0sTUFBTSxJQUFJZ0UsY0FBY29CLFdBQVcsT0FNbkMsT0FIQW1ILFlBQVcsV0FDVE4sY0FBY08sYUFBYTVJLFdBQzFCLE1BQ0ksRUFJWCwwQkFBMkJBLFNBQ3pCLE1BQU1iLFFBQVVhLFFBQ2JJLGNBQ0FJLE1BQU0sTUFDTHFJLEtBQUssS0FDTDdKLFFBQVEsZUFBZ0IsSUFDdEI0SCxNQUFRLElBQUlsQyxVQUNsQixHQUFJdkYsUUFBUXpDLE9BQVEsQ0FDbEIsSUFDSW9NLFVBSUFDLGlCQUNBQyxzQkFOQUMsUUFBVTlKLFFBRVYrSCxXQUFheEMsVUFBVXdFLGdCQUFnQnZFLFFBQ3ZDaUIsYUFBZSxFQUNmdUQsS0FBTSxFQUdWLE1BQU1DLGFBQWVILFFBQVFQLE1BQU0sZUFDbkMsR0FBSVUsY0FBZ0JBLGFBQWExTSxPQUFRLENBQ3ZDb00sVUFBWTNHLE9BQU9pSCxhQUFhLElBQ2hDLElBQUssTUFBTVYsU0FBU1UsYUFDbEJILFFBQVVBLFFBQVFqSyxRQUFRLElBQUkwSixTQUFVLElBRzVDLE1BQU1XLGNBQWdCSixRQUFRUCxNQUFNLGVBQ3BDLEdBQUlXLGVBQWlCQSxjQUFjM00sT0FBUSxDQUN6Q3dLLFdBQWFtQixjQUFjaUIsa0JBQWtCRCxjQUFjLElBQzNELElBQUssTUFBTVgsU0FBU1csY0FDbEJKLFFBQVVBLFFBQVFqSyxRQUFRLElBQUkwSixTQUFVLElBUzVDLEdBTklPLFFBQVExTSxTQUFTLE9BQ25CNE0sS0FBTSxFQUNORixRQUFVQSxRQUFRakssUUFBUSxJQUFLLEtBRTVCdUosTUFBTXBHLE9BQU84RyxZQUFXckQsYUFBZXpELE9BQU84RyxVQUUvQ0UsSUFBSyxDQUNQLE1BQU1JLGNBQWdCLENBQ3BCVCxVQUNBVSxTQUFVNUQsYUFDVnNCLFdBQ0F1QyxVQUFVLEdBRU5DLFlBQWNDLFdBQVcxSixPQUFPc0osZUFDbENHLFFBQ0Y5RCxhQUFlekQsT0FBT3VILE1BQU14TyxJQUFJLGNBQ2hDZ00sV0FBYS9FLE9BQU91SCxNQUFNeE8sSUFBSSxlQUM5QjROLFVBQVkzRyxPQUFPdUgsTUFBTXhPLElBQUksZUFBaUI0TixVQUM5Q0MsaUJBQW1CNUcsT0FBT3VILE1BQU14TyxJQUFJLHFCQUNwQzhOLHNCQUF3QjdHLE9BQU91SCxNQUFNeE8sSUFBSSwyQkFJN0MwTCxNQUFNaEIsYUFBZUEsY0FBZ0IsRUFDckNnQixNQUFNTSxXQUFhQSxZQUFjeEMsVUFBVXdFLGdCQUFnQnZFLFFBQzNEaUMsTUFBTVUsU0FBV3dCLFVBQ2pCbEMsTUFBTW1DLGlCQUFtQkEsaUJBQ3pCbkMsTUFBTW9DLHNCQUF3QkEsc0JBQzFCRixZQUFXbEMsTUFBTVUsU0FBWWlCLE1BQU1PLGdCQUF5QmMsRUFBWmQsV0FFdEQsTUFBTXhKLFFBQVV0QyxZQUFZdUMsYUFDNUIsR0FBSUQsUUFBUXlCLE9BQVN6QixRQUFRMEIsTUFBTyxDQUNsQyxNQUFNSixNQUFROUIsV0FBV2dDLGdCQUN2QixHQUFHeEIsUUFBUTBCLFNBQVMxQixRQUFReUIsU0FFMUJILFFBQU9nRyxNQUFNaEcsTUFBUUEsWUFDcEIsR0FBSXRCLFFBQVFzQixNQUFPLENBQ3hCLE1BQU1BLE1BQVE1RixLQUFLeUYsT0FBT3ZGLElBQUlvRSxRQUFRc0IsT0FDbENBLFFBQU9nRyxNQUFNaEcsTUFBUUEsYUFFckJnRyxNQUFNdkwsT0FDWnVMLE1BQU1pRCxZQUdSLG9CQUNFaEcsR0FBR0MsY0FBY2dHLE1BQU0saUJBR3pCLDBCQUEyQkMsVUFDekIsSUFBSUMsYUFDQXBKLE1BU0osR0FSa0MsYUFBOUJtSixTQUFTRSxZQUFZaEosT0FDdkJMLE1BQVFtSixVQUdjLGlCQUFiQSxXQUNUbkosTUFBUXlILGNBQWM2QixtQkFBbUJILFdBR3ZDbkosTUFBTyxDQUNULEdBQUlBLE1BQU0rRyxRQUFTLENBQ2pCLE1BQU13QyxPQUFTblAsS0FBS3lGLE9BQU92RixJQUFJMEYsTUFBTWIsSUFNbkNpSyxhQURFRyxRQUFVQSxPQUFPQyxhQUFleEosTUFBTXdKLFdBQ3pCLENBQ2JySyxHQUFJYSxNQUFNRyxNQUFNaEIsR0FDaEJrQixLQUFNTCxNQUFNSyxLQUNabUosV0FBWXhKLE1BQU13SixXQUNsQkQsT0FBUSxDQUNOcEssR0FBSW9LLE9BQU9wSyxHQUNYa0IsS0FBTWtKLE9BQU9sSixLQUNibUosV0FBWUQsT0FBT0MsYUFNUixDQUNickssR0FBSW9LLE9BQVNBLE9BQU9wSyxHQUFLYSxNQUFNYixHQUMvQmtCLEtBQU1rSixPQUFTQSxPQUFPbEosS0FBT0wsTUFBTUssS0FDbkNtSixXQUFZRCxPQUFTQSxPQUFPQyxXQUFheEosTUFBTXdKLGlCQUluREosYUFBZSxDQUNiakssR0FBSWEsTUFBTWIsR0FDVmtCLEtBQU1MLE1BQU1LLEtBQ1ptSixXQUFZeEosTUFBTXdKLFlBR3RCLE9BQU9KLGFBQ0YsTUFBd0IsaUJBQWJELFNBQThCQSxTQUN6QyxLQUdULDBCQUEyQk0sYUFDekIsSUFBSXpKLE1BS0osT0FBSTVGLEtBQUt5RixPQUFPQyxPQUFPMkosYUFBcUJyUCxLQUFLeUYsT0FBT0MsT0FBTzJKLGNBRS9EekosTUFBUTVGLEtBQUt5RixPQUFPdkYsSUFBSW1QLGFBQ3BCekosUUFJSkEsTUFBUXRDLE9BQU9nTSxPQUFPdFAsS0FBS3lGLE9BQU9DLFFBQVE2SixNQUFLbE8sR0FDekNBLEVBQUU0RSxLQUFLYixnQkFBa0JpSyxZQUFZakssZ0JBR3RDUSxRQUVIQSxNQUFRNUYsS0FBS3lGLE9BQU84SixNQUFLeE0sR0FDbkJBLEVBQUVrRCxLQUFLYixnQkFBa0JpSyxZQUFZakssaUJBSXpDUSxPQVNHLE9BR1QsOEJBQStCNEosTUFDN0IsTUFBTUMsUUFBVUQsS0FBS3BLLGNBRXJCLE9BQVFxSyxTQUNOLElBQUssTUFDSCxNQUFPLENBQ0xDLE1BQU8xUCxLQUFLZ0osS0FBS0MsU0FBUyxjQUMxQjBHLE1BQU8zUCxLQUFLZ0osS0FBS0MsU0FBUyxvQkFFOUIsSUFBSyxNQUNILE1BQU8sQ0FDTHlHLE1BQU8xUCxLQUFLZ0osS0FBS0MsU0FBUyxjQUMxQjBHLE1BQU8zUCxLQUFLZ0osS0FBS0MsU0FBUyx3QkFFOUIsSUFBSyxNQUNILE1BQU8sQ0FDTHlHLE1BQU8xUCxLQUFLZ0osS0FBS0MsU0FBUyxjQUMxQjBHLE1BQU8zUCxLQUFLZ0osS0FBS0MsU0FBUyxnQkFFOUIsSUFBSyxNQUNILE1BQU8sQ0FDTHlHLE1BQU8xUCxLQUFLZ0osS0FBS0MsU0FBUyxjQUMxQjBHLE1BQU8zUCxLQUFLZ0osS0FBS0MsU0FBUyxxQkFFOUIsSUFBSyxNQUNILE1BQU8sQ0FDTHlHLE1BQU8xUCxLQUFLZ0osS0FBS0MsU0FBUyxjQUMxQjBHLE1BQU8zUCxLQUFLZ0osS0FBS0MsU0FBUyxzQkFFOUIsSUFBSyxNQUNILE1BQU8sQ0FDTHlHLE1BQU8xUCxLQUFLZ0osS0FBS0MsU0FBUyxjQUMxQjBHLE1BQU8zUCxLQUFLZ0osS0FBS0MsU0FBUyx3QkFFOUIsSUFBSyxNQUNILE1BQU8sQ0FDTHlHLE1BQU8xUCxLQUFLZ0osS0FBS0MsU0FBUyxjQUMxQjBHLE1BQU8zUCxLQUFLZ0osS0FBS0MsU0FBUyxpQkFFOUIsSUFBSyxNQUNILE1BQU8sQ0FDTHlHLE1BQU8xUCxLQUFLZ0osS0FBS0MsU0FBUyxjQUMxQjBHLE1BQU8zUCxLQUFLZ0osS0FBS0MsU0FBUyxxQkFFOUIsUUFDRSxJQUFLLE1BQU8sQ0FBRXJDLFNBQVV0RCxPQUFPQyxRQUM3QnZELEtBQUs0UCxPQUFPQyxTQUFTQyxNQUFNQyxVQUFVQyxnQkFBZ0JBLGlCQUVyRCxHQUFJUCxVQUFZelAsS0FBS2dKLEtBQUtDLFNBQVNyQyxNQUFNOEksT0FBT3RLLGNBQzlDLE1BQU8sQ0FDTHNLLE1BQU8xUCxLQUFLZ0osS0FBS0MsU0FBU3JDLE1BQU04SSxPQUNoQ0MsTUFBTzNQLEtBQUtnSixLQUFLQyxTQUFTckMsTUFBTStJLFFBSXRDLE9BQU8sTUFLYix5QkFBMEJ6RCxZQUN4QixHQUEyQixNQUF2QitELE9BQU8vRCxZQUFxQixPQUFPeEMsVUFBVXdFLGdCQUFnQnZFLFFBQ2pFLEdBQTBCLGlCQUFmdUMsV0FBeUIsT0FBT0EsV0FDM0MsSUFBS3FCLE1BQU1wRyxPQUFPK0UsYUFBYyxPQUFPL0UsT0FBTytFLFlBRTlDLE9BQVFBLFlBQ04sSUFBSyxJQUNILE9BQU94QyxVQUFVd0UsZ0JBQWdCZ0MsUUFDbkMsSUFBSyxJQUNILE9BQU94RyxVQUFVd0UsZ0JBQWdCckUsS0FDbkMsSUFBSyxLQUNILE9BQU9ILFVBQVV3RSxnQkFBZ0JwRSxRQUNuQyxJQUFLLE1BQ0gsT0FBT0osVUFBVXdFLGdCQUFnQm5FLFNBQ25DLFFBQ0UsT0FBT0wsVUFBVXdFLGdCQUFnQnZFLFNBSXZDLHVCQUF3QndDLE1BQU96SSxNQUFPUyxRQUFVLElBQzlDVCxNQUFNeU0saUJBQ04sTUFBTTdMLFFBQVV0QyxZQUFZdUMsYUFDNUIsSUFBSXFCLE1BQ0F0QixRQUFReUIsUUFBT0gsTUFBUTVGLEtBQUt5RixPQUFPQyxPQUFPcEIsUUFBUXlCLFFBQ2pESCxRQUFPQSxNQUFRNUYsS0FBS3lGLE9BQU92RixJQUFJb0UsUUFBUXNCLFFBRXZDQSxNQUtMQSxNQUFNd0ssV0FBV2pFLE1BQU96SSxNQUFNMk0sU0FBVWxNLFNBSnRDMEUsR0FBR0MsY0FBY0MsS0FBSy9JLEtBQUtnSixLQUFLQyxTQUFTLDhCQU83Qyx3QkFBeUJxSCxPQUFRNU0sT0FDL0JBLE1BQU15TSxpQkFDTixNQUFNN0wsUUFBVXRDLFlBQVl1QyxhQUM1QixJQUFJcUIsTUFFSixHQURJdEIsUUFBUXlCLFFBQU9ILE1BQVE1RixLQUFLeUYsT0FBT0MsT0FBT3BCLFFBQVF5QixTQUNqREgsTUFDSCxHQUFJdEIsUUFBUTBCLE9BQVMxQixRQUFReUIsTUFBTyxDQUVsQyxNQUFNd0ssVUFBWXZRLEtBQUt5RixPQUFPdkYsSUFBSW9FLFFBQVFzQixPQUVwQ0csTUFEUS9GLEtBQUtzSCxPQUFPcEgsSUFBSW9FLFFBQVEwQixPQUNsQk4sT0FBT3hGLElBQUlvRSxRQUFReUIsT0FNdkNILE1BSG1CLElBREE0SyxpQkFBaUIsU0FDakIsQ0FBZUQsVUFBVUUsU0FBVSxDQUNwREMsT0FBUTNLLGFBR0xILE1BQVE1RixLQUFLeUYsT0FBT3ZGLElBQUlvRSxRQUFRc0IsT0FHcENBLE1BS0xBLE1BQU0rSyxZQUFZTCxPQUFRNU0sTUFBTTJNLFVBSjlCeEgsR0FBR0MsY0FBY0MsS0FBSy9JLEtBQUtnSixLQUFLQyxTQUFTLDhCQU83Qyx3QkFBeUI2RSxVQUF1QnBLLE1BQVEsWUFDaEQySixjQUFjdUQsU0FBU2xOLE1BQU8sQ0FBRW9LLFlBR3hDLHlCQUEwQitDLElBQUt2TyxLQUFNd08sTUFDbkMsR0FBa0IsU0FBZHhPLEtBQUtrQyxLQUFpQixPQUUxQixJQUFJNEgsS0FDQTJFLE9BNEJBQyxRQTNCQUMsU0FBVyxLQUVmLEdBQUkzTyxLQUFLNE8sS0FBTSxDQUNiLE1BQU1BLEtBQU9sUixLQUFLbVIsTUFBTWpSLElBQUlvQyxLQUFLNE8sTUFDakMsR0FBNkIsU0FBekJBLEtBQUtFLFNBQVNDLE9BQW1CLE9BQ3JDSixTQUFXM08sS0FBSzRPLEtBQ2hCOUUsV0FBYThFLEtBQUtJLFlBQVloUCxLQUFLeUMsSUFDbkNnTSxPQUFTLFlBQ0F6TyxLQUFLQSxNQUNkOEosS0FBTzlKLEtBQUtBLEtBQ1p5TyxPQUFTLFVBRVQzRSxLQUFPcE0sS0FBS21LLE1BQU1qSyxJQUFJb0MsS0FBS3lDLElBQzNCZ00sT0FBUyxRQUdYLElBQUszRSxLQUNILE9BQU92RCxHQUFHQyxjQUFjQyxLQUN0Qi9JLEtBQUtnSixLQUFLQyxTQUFTLDhCQUd2QixHQUFvQixXQUFkbUQsS0FBSzVILE1BQXNDLFVBQWQ0SCxLQUFLNUgsS0FDdEMsT0FBT3FFLEdBQUdDLGNBQWNDLEtBQ3RCL0ksS0FBS2dKLEtBQUtDLFNBQVMsZ0NBVXZCLEdBSmtCLFdBQWRtRCxLQUFLNUgsT0FDUHdNLFFBQVUsdUNBQXVDNUUsS0FBS25HLGNBQWNtRyxLQUFLckgsZ0JBQWdCZ00sbUJBQW1CRSx1QkFHNUYsVUFBZDdFLEtBQUs1SCxLQUFrQixDQUN6QixHQUFJK00sU0FBU0MsVUFBVXBGLE1BQ3JCLE9BQU92RCxHQUFHQyxjQUFjQyxLQUN0Qi9JLEtBQUtnSixLQUFLQyxTQUFTLDBCQUd2QitILFFBQVUsc0NBQXNDNUUsS0FBS25HLGNBQWNtRyxLQUFLckgsZ0JBQWdCZ00sbUJBQW1CRSxzQkFJN0csSUFBSVEsTUFBUXpSLEtBQUswUixPQUFPQyxTQUFTcEMsTUFDL0JxQyxHQUFLQSxFQUFFM0wsT0FBU21HLEtBQUtuRyxNQUFRMkwsRUFBRVosVUFBWUEsVUFXN0MsT0FUS1MsUUFDSEEsWUFBY0ksTUFBTTVNLE9BQU8sQ0FDekJnQixLQUFNbUcsS0FBS25HLEtBQ1h6QixLQUFNLFNBQ05vRCxJQUFLd0UsS0FBS3hFLElBQ1ZvSixXQUdKaFIsS0FBS29DLEtBQUswUCxrQkFBa0JMLE1BQU9YLE9BQzVCLEVBR1QsNEJBQTZCaUIsY0FDckIvUixLQUFLSSxTQUFTNFIsSUFBSSxPQUFRLHFCQUFzQkQsUUFDdERsSixHQUFHQyxjQUFjbUosS0FDZkYsT0FDSS9SLEtBQUtnSixLQUFLQyxTQUFTLHdCQUNuQmpKLEtBQUtnSixLQUFLQyxTQUFTLDBCQUV6QmpKLEtBQUtrUyxPQUFPQyxLQUFLLGNBQWUsQ0FDOUIzTixLQUFNLGVBRVI2SSxjQUFjK0UsbUJBR2hCLGdDQUFpQ0wsY0FDekIvUixLQUFLSSxTQUFTNFIsSUFBSSxPQUFRLHNCQUF1QkQsUUFDdkRsSixHQUFHQyxjQUFjbUosS0FDZkYsT0FDSS9SLEtBQUtnSixLQUFLQyxTQUFTLDRCQUNuQmpKLEtBQUtnSixLQUFLQyxTQUFTLDhCQUV6QmpKLEtBQUtrUyxPQUFPQyxLQUFLLGNBQWUsQ0FDOUIzTixLQUFNLGVBRVI2SSxjQUFjK0UsbUJBQ2RDLE1BQU1DLEtBQUsscUJBQXNCUCxRQUduQyx5QkFDRSxNQUFNdE0sT0FBU3pGLEtBQUt5RixPQUFPaEUsUUFBT21FLE9BQVNBLE1BQU0yTSxpQkFDakQsSUFBSUMsWUFBYyxNQUFNeFMsS0FBS2dKLEtBQUtDLFNBQVMsOEJBQzNDLElBQUssTUFBTXJELFNBQVNILE9BQ2xCLEdBQUksQ0FBQyxZQUFhLE1BQU8sWUFBWWxFLFNBQVNxRSxNQUFNcEIsTUFBTyxDQUN6RCxJQUFJaU8sYUFBYyxFQUNsQixJQUFLLE1BQU1yRyxRQUFReEcsTUFBTXRELEtBQUs2SCxNQUNWLFdBQWRpQyxLQUFLNUgsTUFDSDRILEtBQUtuRyxPQUFTLEdBQUdqRyxLQUFLZ0osS0FBS0MsU0FBUyx3QkFDdEN3SixhQUFjLEdBSXBCLE1BQU1DLGlCQUFtQjlNLE1BQU10RCxLQUFLQSxLQUFLcVEsT0FBT0MsZUFBZWhNLE1BQ3pEaU0sZ0JBQWtCak4sTUFBTXRELEtBQUtBLEtBQUt3USxRQUFRQyxJQUFJQyxVQUM5Q0MsUUFBVXJOLE1BQU10RCxLQUFLQSxLQUFLd1EsUUFBUUksR0FBR3RNLE1BQ3JDdU0sTUFBUXZOLE1BQU10RCxLQUFLQSxLQUFLd1EsUUFBUUksR0FBRzFSLElBQ25DNFIsZUFDSixNQUFRNVMsS0FBSzZTLE1BQU16TixNQUFNdEQsS0FBS0EsS0FBS3dRLFFBQVFDLElBQUluTSxNQUFRLEdBQ25EME0sUUFBVTFOLE1BQU10RCxLQUFLQSxLQUFLd1EsUUFBUVMsR0FBRzNNLE1BQ3JDNE0sTUFBUTVOLE1BQU10RCxLQUFLQSxLQUFLd1EsUUFBUVMsR0FBRy9SLElBQ3pDZ1IsYUFBNEIsVUFBVTVNLE1BQU1LLGNBQ25CLElBQXJCeU0sa0JBQThCTyxRQUFVRSxNQUN0Q25ULEtBQUtJLFNBQVNGLElBQUksT0FBUSxlQUFnQyxJQUFoQnVTLGFBQzVDRCxhQUVFLG1DQUFtQ3hTLEtBQUtnSixLQUFLWSxPQUMzQywyQkFDQSxDQUFFNkosT0FBUSxZQUVkN04sTUFBTThOLE9BQU8sQ0FDWCx3QkFBeUI5TixNQUFNdEQsS0FBS0EsS0FBS3dRLFFBQVFJLEdBQUd0TSxNQUFRLEtBRXJENUcsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGNBQ25Dc1MsYUFFRSxtQ0FBbUN4UyxLQUFLZ0osS0FBS1ksT0FDM0MsMkJBQ0EsQ0FBRTZKLE9BQVEsWUFFZDdOLE1BQU04TixPQUFPLENBQ1gsd0JBQXlCOU4sTUFBTXRELEtBQUtBLEtBQUt3USxRQUFRSSxHQUFHdE0sTUFBUSxNQUc5RDRMLGFBRUUsbUNBQW1DeFMsS0FBS2dKLEtBQUtDLFNBQzNDLGdDQUVKckQsTUFBTThOLE9BQU8sQ0FDWCx3QkFBeUI5TixNQUFNdEQsS0FBS0EsS0FBS3dRLFFBQVFJLEdBQUd0TSxNQUFRLE1BR2xDLElBQXJCOEwsa0JBQTZCTyxRQUFVRSxRQUNoRFgsYUFFRSw0QkFBNEJ4UyxLQUFLZ0osS0FBS0MsU0FDcEMsbUNBR0Y0SixnQkFBa0IsSUFDcEJMLGFBRUUsbUNBQW1DeFMsS0FBS2dKLEtBQUtDLFNBQzNDLHFDQUVKckQsTUFBTThOLE9BQU8sQ0FDWCw2QkFBOEIsRUFDOUIsa0NBQW1DTixrQkFHbkNFLFFBQVVFLFFBQ1poQixhQUVFLG1DQUFtQ3hTLEtBQUtnSixLQUFLWSxPQUMzQyx1Q0FFSmhFLE1BQU04TixPQUFPLENBQ1gsd0JBQXlCOU4sTUFBTXRELEtBQUtBLEtBQUt3USxRQUFRUyxHQUFHM00sTUFBUSxLQUtwRSxNQUFNL0UsU0FBVyxDQUNmTyxLQUFNcEMsS0FBS29DLEtBQUsyQyxHQUNoQlQsUUFBU3RDLFlBQVl1QyxhQUNyQlMsUUFBU3dOLFlBQ1RoTyxLQUFNQyxNQUFNQyxtQkFBbUJpUCxPQUVqQzNSLFlBQVlpRCxPQUFPcEQsVUFHckIsMEJBQTJCa1EsY0FDbkIvUixLQUFLSSxTQUFTNFIsSUFBSSxPQUFRLFlBQWFELFFBQzdDbEosR0FBR0MsY0FBY21KLEtBQ2ZGLE9BQ0kvUixLQUFLZ0osS0FBS0MsU0FBUyxzQkFDbkJqSixLQUFLZ0osS0FBS0MsU0FBUyx3QkFJM0Isc0JBQXVCdkYsTUFBT1MsUUFBVSxJQUV0QyxJQUFJeUcsYUFBY3NCLFdBQVk2QixpQkFBa0JDLHNCQURoRDdKLFFBQVFzSyxVQUFZdEssUUFBUTJKLFVBRTVCLElBQUlBLFVBQVkzSixRQUFRMkosVUFPeEIsUUFMSWMsSUFBY3pLLFFBQVFxSyxXQUFVNUQsYUFBZXpELE9BQU9oRCxRQUFRcUssZ0JBQzlESSxJQUFjekssUUFBUStILGFBQ3hCQSxXQUFhbUIsY0FBY2lCLGtCQUFrQm5LLFFBQVErSCxjQUdsRHhJLE9BQU8yTSxXQUFhbE0sUUFBUXlQLFlBQWEsQ0FDNUMsTUFBTWxGLFlBQWNDLFdBQVcxSixPQUFPZCxTQUNsQ3VLLFFBQ0Y5RCxhQUFlekQsT0FBT3VILE1BQU14TyxJQUFJLGNBQ2hDZ00sV0FBYS9FLE9BQU91SCxNQUFNeE8sSUFBSSxlQUM5QjROLFVBQVkzRyxPQUFPdUgsTUFBTXhPLElBQUksY0FDN0I2TixpQkFBbUI1RyxPQUFPdUgsTUFBTXhPLElBQUkscUJBQ3BDOE4sc0JBQXdCN0csT0FBT3VILE1BQU14TyxJQUFJLDJCQUk3QyxNQUFNdUYsT0FBUyxHQUVmLEdBQUl6RixLQUFLb0MsS0FBS3lSLE1BQVExTCxPQUFPekMsT0FBT29PLFdBQVdwUyxPQUM3QyxJQUFLLE1BQU1xRSxTQUFTb0MsT0FBT3pDLE9BQU9vTyxXQUNoQ3JPLE9BQU9uRSxLQUFLeUUsTUFBTUgsTUFBTThHLGVBRWpCMU0sS0FBS29DLEtBQUsyUixXQUNuQnRPLE9BQU9uRSxLQUFLdEIsS0FBS29DLEtBQUsyUixVQUFVckgsVUFHbEMsSUFBSyxNQUFNc0gsTUFBTXZPLE9BQVEsQ0FDdkIsTUFBTW1HLE1BQVEsSUFBSWxDLFVBQ2xCa0MsTUFBTWhCLGFBQWVBLGNBQWdCLEVBQ3JDZ0IsTUFBTU0sV0FBYUEsWUFBY3hDLFVBQVV3RSxnQkFBZ0J2RSxRQUMzRGlDLE1BQU1VLFNBQVd3QixVQUNqQmxDLE1BQU1tQyxpQkFBbUJBLGlCQUN6Qm5DLE1BQU1vQyxzQkFBd0JBLHNCQUM5QnBDLE1BQU1oRyxNQUFRb08sU0FDUnBJLE1BQU12TCxPQUNadUwsTUFBTWlELFlBR1IsSUFBS3BKLE9BQU8vRCxPQUFRLENBQ2xCLE1BQU1rSyxNQUFRLElBQUlsQyxVQUNsQmtDLE1BQU1oQixhQUFlQSxjQUFnQixFQUNyQ2dCLE1BQU1NLFdBQWFBLFlBQWN4QyxVQUFVd0UsZ0JBQWdCdkUsUUFDM0RpQyxNQUFNVSxTQUFXd0IsVUFDakJsQyxNQUFNbUMsaUJBQW1CQSxpQkFDekJuQyxNQUFNb0Msc0JBQXdCQSw0QkFDeEJwQyxNQUFNdkwsT0FDWnVMLE1BQU1pRCxhQUlWLDBCQUNFLEdBQUk3TyxLQUFLb0MsS0FBS3lSLEtBQ1osSUFBSyxNQUFNOVEsS0FBSy9DLEtBQUt5RixPQUFPa00sU0FDSixjQUFsQjVPLEdBQUdULE1BQU1rQyxNQUF3QnpCLEdBQUdrUixPQUFTbFIsR0FBR2tSLE9BQU9DLFdBQ3pEblIsRUFBRTJRLE9BQU8sQ0FBRSxxQkFBcUIsSUFDaEMzUSxFQUFFb1IsUUFBTyxTQUliLElBQUssTUFBTXBSLEtBQUsvQyxLQUFLeUYsT0FBT2tNLFNBQ3RCNU8sRUFBRXFSLFVBQ0pyUixFQUFFMlEsT0FBTyxDQUFFLHFCQUFxQixJQUNoQzNRLEVBQUVvUixRQUFPLElBV2pCLGtDQUFtQ3pRLE1BQU8yUSxXQUFhLFFBQ3JELEdBQUkzUSxNQUFNNFEsY0FBZSxNQUFPLEdBQ2hDLElBQ0UsTUFBTUMsU0FBVzNSLEtBQUs0UixNQUFNOVEsTUFBTStRLGFBQWFDLFFBQVEsZUFDdkQsR0FBc0IsV0FBbEJILFNBQVMvUCxNQUFxQitQLFNBQVNJLGVBQWlCTixXQUFZLENBQ3RFLE1BQU1PLE9BQVM1VSxLQUFLNlUsUUFBUTNVLElBQUlxVSxTQUFTeFAsSUFDekMsT0FBSzZQLE9BQ0VBLE9BQU9qRCxTQURNLEdBRWYsR0FBSTRDLFNBQVMvUCxPQUFTNlAsV0FBWSxDQUN2QyxHQUFJRSxTQUFTckQsS0FBTSxDQUNqQixNQUFNQSxLQUFPbFIsS0FBS21SLE1BQU1qUixJQUFJcVUsU0FBU3JELE1BQ3JDLE9BQUlBLEtBQUtFLFNBQVNDLFNBQVdnRCxXQUFtQixHQUN6QyxPQUFPbkQsS0FBS0ksWUFBWWlELFNBQVN4UCxLQUNuQyxPQUFJd1AsU0FBU2pTLEtBQ1gsQ0FBQ2lTLFVBRUQsQ0FBQ3ZVLEtBQUttSyxNQUFNakssSUFBSXFVLFNBQVN4UCxLQUdsQyxNQUFPLEdBRVQsTUFBT2pDLEtBQ1AsTUFBTyxJQUlYLDZCQUE4QmdTLE1BQzVCLElBQ0UsR0FBSUMsVUFBVUMsV0FBYUMsT0FBT0MsZ0JBQ2hDLE9BQU9ILFVBQVVDLFVBQVVHLFVBQVVMLE1BQ2hDLENBQ0wsTUFBTU0sU0FBV3BTLFNBQVNDLGNBQWMsWUFReEMsT0FQQW1TLFNBQVN4TyxNQUFRa08sS0FDakJNLFNBQVNDLE1BQU1DLFNBQVcsUUFDMUJGLFNBQVNDLE1BQU1FLEtBQU8sU0FDdEJILFNBQVNDLE1BQU1HLElBQU0sU0FDckJ4UyxTQUFTeVMsS0FBS0MsWUFBWU4sVUFDMUJBLFNBQVNPLFFBQ1RQLFNBQVNRLFNBQ0YsSUFBSUMsU0FBUSxDQUFDQyxRQUFTQyxVQUMzQi9TLFNBQVNnVCxZQUFZLFFBQ2pCRixVQUNBQyxPQUNFLElBQUlFLE1BQU1qVyxLQUFLZ0osS0FBS0MsU0FBUyxrQ0FFbkNtTSxTQUFTYyxZQUNSQyxPQUFNclQsS0FBTytGLEdBQUdDLGNBQWNzTixNQUFNdFQsUUFFekMsTUFBT0EsS0FDUCtGLEdBQUdDLGNBQWNzTixNQUFNcFcsS0FBS2dKLEtBQUtDLFNBQVMsa0NBSTlDLG1CQUFvQmxGLFFBRWxCLE1BQU1zUyxJQUFNdFMsT0FBT3JDLE9BQ25CLElBQUk0VSxRQUFVLEdBRWQsSUFBSyxJQUFJQyxRQUFTQyxFQUFJLEVBQUdBLEVBQUlILE1BQU9HLEVBR2xDLEdBRkFELFFBQVV4UyxPQUFPMFMsT0FBT0QsR0FFcEJELFNBQVcsS0FBT0EsU0FBVyxJQUNmLE9BQVpBLFNBQWdDLE1BQVpBLFVBQ3RCRCxTQUFXLE1BR2JBLFNBQVdDLFFBQVF2UyxRQUFRLHdCQUF5QixhQUVwRCxPQUFRdVMsU0FDTixJQUFLLEtBQ0hELFNBQVcsTUFDWCxNQUVGLElBQUssS0FDSEEsU0FBVyxNQUNYLE1BRUYsSUFBSyxLQUNIQSxTQUFXLE1BQ1gsTUFFRixJQUFLLEtBQ0hBLFNBQVcsTUFDWCxNQUVGLElBQUssS0FDSEEsU0FBVyxNQUNYLE1BRUYsSUFBSyxLQUNIQSxTQUFXLE1BQ1gsTUFFRixRQUNFQSxTQUFXLE1BQ1hDLFFBQVVBLFFBQVFHLFdBQVcsR0FBR3RQLFNBQVMsSUFDekMsSUFBSyxJQUFJdVAsRUFBSSxJQUFLQSxHQUFLSixRQUFRN1UsT0FBUTRVLFNBQVcsS0FDbERBLFNBQVdDLFFBS25CLE9BQU9ELFNDeHJCSixNQUFNTSxjQUNYM0gsWUFBYXBKLFNBQVcsS0FBTStOLGFBQWMsR0FDMUNySyxLQUFLMUQsU0FBV0EsU0FDaEIwRCxLQUFLcUssWUFBY0EsWUFHckIseUJBQ0UsT0FBTzVULEtBQUtJLFNBQVNGLElBQUksT0FBUSxzQkFHbkMsY0FDRSxPQUFLcUosS0FBSzFKLGVBQ04rTyxJQUFjckYsS0FBS3NOLFdBQ3JCdE4sS0FBS3NOLFNBQTZCLGNBQWxCdE4sS0FBSzFKLFVBRWhCMEosS0FBS3NOLFVBSmUsS0FPN0IsWUFBYXZKLEdBQ1gvRCxLQUFLc04sU0FBV3ZKLEVBR2xCLGVBRUUsT0FESy9ELEtBQUt1TixZQUFXdk4sS0FBS3VOLFVBQVk5VyxLQUFLSSxTQUFTRixJQUFJLE9BQVEsYUFDekRxSixLQUFLdU4sVUFHZCxhQUFjeEosR0FDWi9ELEtBQUt1TixVQUFZeEosRUFHbkIsWUFDRSxPQUFLL0QsS0FBSzFELFNBQ0gvQixXQUFXZ0MsZ0JBQWdCeUQsS0FBSzFELFVBRFosS0FJN0IsWUFDRSxPQUFLMEQsS0FBSzNELE1BQ0g5QixXQUFXNkIsZ0JBQWdCNEQsS0FBSzFELFVBRGYsS0FJMUIsV0FDRSxPQUFLMEQsS0FBS1csT0FDSFgsS0FBSzNELE1BQU11RSxNQUFNakssSUFBSXFKLEtBQUtXLFFBRFIsS0FJM0IsYUFDRSxPQUFPWCxLQUFLNkMsS0FHZCxxQkFDRSxNQUFPLElBQUlwTSxLQUFLb0MsS0FBSzJVLFNBR3ZCLGFBQ0UsT0FBSXhOLEtBQUt5TixZQUFvQnpOLEtBQUt5TixZQUMzQnpOLEtBQUswTixZQU9kLGtCQWNFLE9BYksxTixLQUFLMk4sZUFDSjNOLEtBQUs0TixXQUNQNU4sS0FBSzJOLGFBQWVwVCxXQUFXNkIsZ0JBQWdCNEQsS0FBSzROLGFBRXBENU4sS0FBSzJOLGFBQWUzTixLQUFLNk4sZUFBZUMsTUFDcEM5TixLQUFLMk4sYUFDUDNOLEtBQUs0TixXQUFhLEdBQUc1TixLQUFLMk4sYUFBYWxSLE1BQU1qQixNQUFNd0UsS0FBSzJOLGFBQWFuUyxLQUdyRXdFLEtBQUsyTixhQUFlLE9BSW5CM04sS0FBSzJOLGFBR2Qsa0JBS0UsT0FKSzNOLEtBQUsrTixlQUNKL04sS0FBS3lOLFlBQWF6TixLQUFLK04sYUFBZS9OLEtBQUt5TixZQUFZcFIsTUFDdEQyRCxLQUFLK04sYUFBZXhULFdBQVdnQyxnQkFBZ0J5RCxLQUFLNE4sYUFFcEQ1TixLQUFLK04sYUFHZCxnQkFDRSxPQUFLL04sS0FBS3lOLGFBQWdCek4sS0FBSzBOLFlBQ3hCMU4sS0FBSzROLFdBRHVDLEtBSXJELGdCQUNFLFNBQUs1TixLQUFLeU4sY0FBZ0J6TixLQUFLME4sYUFJakMsY0FBZTNKLEdBQ2IvRCxLQUFLNE4sV0FBYTdKLEVBR3BCLGFBQ0UsT0FBTy9ELEtBQUszRCxNQUFNMlIsZ0JBQWdCaE8sS0FBS1csUUFHekMsZ0JBQ0UsTUFBTXRDLElBQU05RCxXQUFXMFQsbUJBQW1Cak8sS0FBS2tPLFdBQy9DLE9BQUk3UCxLQUNHLHFDQUdULFdBQ0UsT0FBSTJCLEtBQUt4RCxNQUFjd0QsS0FBS3hELE1BQU1FLEtBQzNCc0QsS0FBSzNELE1BQU1LLEtBR3BCLGlCQUNFLE9BQUtzRCxLQUFLbU8sT0FDSG5PLEtBQUttTyxPQUFPelIsS0FETSxRQUkzQixlQUNFLE1BQU0yQixJQUFNOUQsV0FBVzBULG1CQUFtQmpPLEtBQUsxRCxVQUMvQyxPQUFJK0IsS0FDRyxxQ0FHVCxVQUFXMUQsUUFBU0csT0FBUyxNQUMzQixNQUFNc1QsWUFBYyxHQUNwQixJQUFJclQsUUFDQWlGLEtBQUszRCxPQUNIMkQsS0FBS3hELE1BQU80UixZQUFZNVIsTUFBUXdELEtBQUt4RCxNQUNwQzRSLFlBQVkvUixNQUFRMkQsS0FBSzNELE1BQzlCdEIsUUFBVXRDLFlBQVl1QyxXQUFXb1QsY0FFakNyVCxRQUFVdEMsWUFBWXVDLGFBR3hCLE1BRU0xQyxTQUFXLENBQ2ZPLE1BSFdtSCxLQUFLM0QsTUFBTXhELEtBQU9tSCxLQUFLM0QsTUFBTXhELEtBQU9wQyxLQUFLb0MsTUFHekMyQyxHQUNYVCxRQUNBRCxPQUNBVyxRQUFTZCxTQUlULENBQUMsU0FBVSxhQUFhM0MsU0FBU3ZCLEtBQUtJLFNBQVNGLElBQUksT0FBUSxlQUUzRDJCLFNBQVNDLFFBQVVFLFlBQVk0VixxQkFBcUIsT0FFaEMsY0FBbEJyTyxLQUFLMUosV0FBMEJnQyxTQUFTRSxPQUFRLEdBRXBEQyxZQUFZaUQsT0FBT3BELFVBQVVxRCxNQUFLQyxLQUN6QkEsT0N4SmIsU0FBUzBTLFNBQVV4UyxJQUFLdUIsT0FDdEIsR0FBSXZCLElBQUltQixXQUFXLE1BQ2pCLE9BSUYsR0FEZ0IsQ0FBQyxTQUFVLGFBQ2ZqRixTQUFTOEQsS0FDbkIsT0FJRixNQURlLENBQUMsV0FBWSxZQUNqQjlELFNBQVM4RCxLQUNYdUIsTUFBTWtSLGFBR1JsUixNQUVGLE1BQU1tUixxQkFBcUJuQixjQUNoQzNILFlBQWFwSixTQUFXLEtBQU1tUyxRQUFVLEdBQUk3VCxRQUFVLElBQ3BEOFQsTUFDRXBTLGNBQytCLElBQXhCMUIsUUFBUXlQLGFBQ1hzRSxRQUFRL1QsUUFBUXlQLGNBR3RCckssS0FBS3lPLFFBQVVBLFFBQ2Z6TyxLQUFLcEYsUUFBVUEsUUFDWDZULFFBQVF4SixXQUFhakIsTUFBTXBHLE9BQU82USxRQUFReEosYUFDNUNqRixLQUFLcEYsUUFBUWdVLFlBQWNoUixPQUFPNlEsUUFBUXhKLFdBRXhDd0osUUFBUTlMLGFBQWVxQixNQUFNcEcsT0FBTzZRLFFBQVE5TCxlQUM5QzNDLEtBQUtwRixRQUFRaVUsY0FBZ0JqUixPQUFPNlEsUUFBUTlMLGFBRzlDM0MsS0FBSzhPLE1BQVEsR0FHZixjQUNFLFlBQXVDLElBQXpCOU8sS0FBS3BGLFFBQVFtVSxRQUN2QkosUUFBUTNPLEtBQUtwRixRQUFRbVUsU0FDckJMLE1BQU1LLFFBR1osaUJBQ0UsWUFBMEMsSUFBNUIvTyxLQUFLcEYsUUFBUStILFdBQ3ZCM0MsS0FBS3BGLFFBQVErSCxXQUNieEMsVUFBVXdFLGdCQUFnQnZFLFFBR2hDLGVBQ0UsWUFBd0MsSUFBMUJKLEtBQUtwRixRQUFRcUssU0FDdkJqRixLQUFLcEYsUUFBUXFLLFNBQ2IsRUFHTixlQVFFLE9BTEVqRixLQUFLeU8sUUFBUU8sYUFDWGhQLEtBQUtpUCxZQUFtRCxXQUFyQ2pQLEtBQUtpUCxXQUFXdkosWUFBWWhKLE9BRWpEc0QsS0FBS2lQLFdBQWExVSxXQUFXZ0MsZ0JBQWdCeUQsS0FBS3lPLFFBQVFPLGNBRXJEaFAsS0FBS2lQLFdBR2Qsd0JBQ0UsU0FDRWpQLEtBQUs4TyxNQUFNSSxZQUNWbFAsS0FBS21QLFNBQVNDLFlBQWFwUCxLQUFLbVAsU0FBU25NLFVBTzlDLHFCQUNFLEdBQUloRCxLQUFLOE8sTUFBTUksVUFBVyxDQUN4QixHQUFJbFAsS0FBS3lPLFFBQVFZLFFBQVVyUCxLQUFLbVAsU0FBU0csT0FDdkMsT0FBUXRMLE1BQU1wRyxPQUFPb0MsS0FBS3lPLFFBQVFZLFNBRTlCclAsS0FBS3lPLFFBQVFZLE9BRGJ6UixPQUFPb0MsS0FBS3lPLFFBQVFZLFFBRzFCLEdBQUlyUCxLQUFLeU8sUUFBUWMsUUFBVXZQLEtBQUttUCxTQUFTSyxPQUN2QyxPQUFReEwsTUFBTXBHLE9BQU9vQyxLQUFLeU8sUUFBUWMsU0FFOUJ2UCxLQUFLeU8sUUFBUWMsT0FEYjNSLE9BQU9vQyxLQUFLeU8sUUFBUWMsUUFJMUIsTUFBTXBXLFFBQVU2RyxLQUFLd0YsVUFBVWlLLFFBQVF6UCxLQUFLbVAsU0FBU0ssU0FBVyxFQUNoRSxPQUFJclcsUUFDRzZLLE1BQU1wRyxPQUFPekUsVUFDWEEsUUFENkJ5RSxPQUFPekUsU0FHdEMsRUFFVCxPQUFPLEtBR1QsNEJBQ0UsR0FBSTZHLEtBQUt3RixTQUFVLE9BQU94RixLQUFLM0QsTUFBTXFULGtCQUFrQjFQLEtBQUt3RixVQUk5RCwrQkFDRSxHQUFJeEYsS0FBS3dGLFNBQ1AsT0FBT3hGLEtBQUszRCxNQUFNc1QsNkJBQTZCM1AsS0FBS3dGLFVBS3hELGlCQUNFLE9BQUl4RixLQUFLd0YsU0FBaUJ4RixLQUFLNFAseUJBQzNCNVAsS0FBS3lPLFFBQVFZLE9BQ1ZyTCxNQUFNcEcsT0FBT29DLEtBQUt5TyxRQUFRWSxTQUd4QixJQUFJdFksS0FBS2lKLEtBQUt5TyxRQUFRWSxRQUFRUSxTQUFTLENBQUVDLFVBQVUsSUFBUXhZLE1BRnpEc0csT0FBT29DLEtBQUt5TyxRQUFRWSxRQUl4QixLQUdULDBCQUNFLEdBQUlyUCxLQUFLd0YsU0FBVSxPQUFPeEYsS0FBSzNELE1BQU0wVCxvQkFBb0IvUCxLQUFLd0YsVUFJaEUsZ0NBQ0UsR0FBSXhGLEtBQUt3RixTQUNQLE9BQU94RixLQUFLM0QsTUFBTTJULDBCQUEwQmhRLEtBQUt3RixVQUtyRCxxQkFDRSxPQUFReEYsS0FBSzNELE1BQU00VCwwQkFHckIsd0JBRUUsUUFEd0JuTSxjQUFjb00sbUJBQW1CbFEsS0FBS3dGLFVBQzFDSSxPQUl0Qix3QkFFRSxHQUFJNUYsS0FBSzNELE1BQU04VCxtQkFDYixPQUFPLEVBSVQsR0FBNEIsSUFBeEJuUSxLQUFLb1EsZUFBc0IsT0FBTyxFQUV0QyxHQUFJcFEsS0FBS3dGLFNBQVUsQ0FFakIsSUFBS3hGLEtBQUt3RixTQUFTSyxXQUFZLE9BQU8sRUFHdEMsR0FDRTdGLEtBQUszRCxNQUFNcVQsa0JBQWtCMVAsS0FBS3dGLFdBQWF4RixLQUFLd0YsU0FBU0ssV0FHN0QsT0FEQTdGLEtBQUs4TyxNQUFNdUIsa0JBQW1CLEdBQ3ZCLEVBSVQsR0FBK0QsSUFBM0RyUSxLQUFLM0QsTUFBTXNULDZCQUE2QjNQLEtBQUt3RixVQUUvQyxPQURBeEYsS0FBSzhPLE1BQU11QixrQkFBbUIsR0FDdkIsRUFJWCxPQUFPLEVBR1QsdUJBQ0UsR0FBSXJRLEtBQUtzUSxhQUFjLENBQ3JCLEdBQUl0USxLQUFLdVEsYUFBYyxNQUFPLEdBQUd2USxLQUFLc1Esc0JBQ3RDLEdBQUl0USxLQUFLd1EsWUFBYSxNQUFPLEdBQUd4USxLQUFLc1EscUJBRXZDLE9BQU8sS0FHVCx3QkFDRSxPQUFJdFEsS0FBSzNELE1BQU1vVSxPQUFPQyxXQUFXQyxXQUN4QmxhLEtBQUtnSixLQUFLQyxTQUFTLGtDQUd4QmpKLEtBQUtnSixLQUFLQyxTQUFTLGtDQUNuQixLQUFLTSxLQUFLM0QsTUFBTW9VLE9BQU9DLFdBQVdFLGdCQUt4QyxpQ0FDRSxPQUFJNVEsS0FBSzZRLFdBQ0FwYSxLQUFLZ0osS0FBS1ksT0FBTyw4QkFBK0IsQ0FDckRoRCxNQUFPMkMsS0FBSzZRLGFBR1QsS0FHVCxtQkFBb0IvQixPQUNsQixPQUFRQSxPQUNOLElBQUssc0JBQ0g5TyxLQUFLOE8sTUFBTWdDLHFCQUFzQixFQUNqQyxNQUVGLElBQUssNkJBQ0g5USxLQUFLOE8sTUFBTUEsUUFBUyxFQUNmOU8sS0FBSytRLG9CQUFtQi9RLEtBQUs4TyxNQUFNa0MsUUFBUyxHQUNqRCxNQUVGLElBQUssdUJBQ0doUixLQUFLaVIsZUFDWCxNQUVGLElBQUssNkJBQ0hqUixLQUFLc1Esb0JBQXNCLElBQUl2WixLQUFLLFFBQVFELEtBQUssQ0FBRUssT0FBTyxLQUFTRyxNQUNuRTBJLEtBQUt1USxjQUFlLEVBQ3BCdlEsS0FBS3dRLGFBQWMsRUFDbkJ4USxLQUFLa1IsaUJBQW1CbFIsS0FBSzNELE1BQU04VSxvQkFDakMsRUFDQW5SLEtBQUtzUSxjQUVQdFEsS0FBSzhPLE1BQU1zQyx1QkFBd0IsRUFDbkNwUixLQUFLOE8sTUFBTXVDLG1CQUFvQixFQUMvQixNQUVGLElBQUssNEJBQ0hyUixLQUFLc1Esb0JBQXNCLElBQUl2WixLQUFLLFFBQVFELEtBQUssQ0FBRUssT0FBTyxLQUFTRyxNQUNuRTBJLEtBQUt1USxjQUFlLEVBQ3BCdlEsS0FBS3dRLGFBQWMsRUFDbkJ4USxLQUFLa1IsaUJBQW1CbFIsS0FBSzNELE1BQU04VSxvQkFDakMsRUFDQW5SLEtBQUtzUSxjQUVQdFEsS0FBSzhPLE1BQU1zQyx1QkFBd0IsUUFDN0JwUixLQUFLc1Isa0JBRVgsTUFFRixJQUFLLDBCQUNHdFIsS0FBSzNELE1BQU1rViwwQkFDWHZSLEtBQUtzUixrQkFDWCxNQUdGLElBQUssaUJBQ0h0UixLQUFLOE8sTUFBTTBDLHNCQUF1QixFQUNsQ3hSLEtBQUs2USxXQUFhLEVBQ2xCLE1BR0YsSUFBSyx1QkFBd0IsQ0FDM0IsSUFBSVksYUFBZSxFQUNkelIsS0FBSzNELE1BQU00VCw0QkFDZHdCLGFBQWUsUUFDVHpSLEtBQUszRCxNQUFNcVYsaUNBRW5CMVIsS0FBSzhPLE1BQU0wQyxzQkFBdUIsRUFDbEMsTUFBTUcsbUJBQXFCM1IsS0FBSzNELE1BQU1zVixtQkFDaENDLFNBQ0pELG1CQUFtQjVZLEtBQUtBLEtBQUs4WSxZQUFZQyxZQUFjLEVBQ3JESCwwQkFDSUEsbUJBQW1CeEgsT0FBTyxDQUM5Qiw4QkFBK0J5SCxTQUFXSCxlQUc5Q3pSLEtBQUs2USxXQUFhWSxhQUNsQixRQUtOLHNCQUNFelIsS0FBSytSLFlBQWEsRUFDbEIvUixLQUFLbVAsU0FBVyxJQUFJaFAsVUFDcEJILEtBQUttUCxTQUFTOVMsTUFBUTJELEtBQUsxRCxTQUMzQjBELEtBQUttUCxTQUFTNkMsVUFBWSxNQUMxQmhTLEtBQUttUCxTQUFTeE0sV0FDWjNDLEtBQUtwRixRQUFRaVUsZUFBaUIxTyxVQUFVd0UsZ0JBQWdCdkUsUUFDMURKLEtBQUttUCxTQUFTOU4sYUFBZXJCLEtBQUtwRixRQUFRZ1UsYUFBZSxRQUNuRDVPLEtBQUttUCxTQUFTOEMsU0FBUyxDQUFFQyxVQUFVLElBQ3pDbFMsS0FBSzhPLE1BQU1JLFdBQVksRUFDdkJsUCxLQUFLOE8sTUFBTXFELDJCQUE2Qm5TLEtBQUttUCxTQUFTSyxPQUN0RHhQLEtBQUs4TyxNQUFNc0QsZUFBZ0IsRUFDM0JwUyxLQUFLOE8sTUFBTXVELGdCQUFpQixFQUM1QnJTLEtBQUt5UCxRQUFVelAsS0FBS29RLGVBR3RCLGdCQVVFLEdBVEFwUSxLQUFLbVAsU0FBVyxJQUFJaFAsVUFDcEJILEtBQUttUCxTQUFTOVMsTUFBUTJELEtBQUsxRCxTQUMzQjBELEtBQUttUCxTQUFTNkMsVUFBWSxNQUMxQmhTLEtBQUttUCxTQUFTeE0sV0FDWjNDLEtBQUtwRixRQUFRaVUsZUFBaUIxTyxVQUFVd0UsZ0JBQWdCdkUsUUFDMURKLEtBQUttUCxTQUFTOU4sYUFBZXJCLEtBQUtwRixRQUFRZ1UsYUFBZSxRQUNuRDVPLEtBQUttUCxTQUFTOEMsU0FBUyxDQUFFQyxVQUFVLElBQ3pDbFMsS0FBSzhPLE1BQU1JLFdBQVksRUFDdkJsUCxLQUFLOE8sTUFBTXFELDJCQUE2Qm5TLEtBQUttUCxTQUFTSyxPQUNqRHhQLEtBQUsrUSxtQkFXSCxHQUFtQyxpQkFBeEIvUSxLQUFLb1EsZUFDckJwUSxLQUFLOE8sTUFBTXNELGVBQWdCLEVBQ3ZCcFMsS0FBS3dGLFVBQ1B4RixLQUFLeVAsUUFBVXhZLEtBQUttQixJQUNsQjRILEtBQUtvUSxlQUNMcFEsS0FBSzRQLDBCQUVINVAsS0FBS29RLGVBQWlCcFEsS0FBSzRQLDJCQUM3QjVQLEtBQUs4TyxNQUFNd0QsdUJBQXdCLElBRWhDdFMsS0FBS3lQLFFBQVV6UCxLQUFLb1Esb0JBQ3RCLEdBQUlwUSxLQUFLbVAsU0FBU25NLFNBQ3ZCaEQsS0FBSzhPLE1BQU1zRCxlQUFnQixFQUMzQnBTLEtBQUt5UCxRQUFVelAsS0FBS3VTLGdCQUNmLEdBQUl2UyxLQUFLd0YsU0FBVSxDQUNaLElBQUl6TyxLQUFLaUosS0FBS29RLGdCQUFnQlAsU0FBUyxDQUNqRDJDLFVBQVUsSUFDVGxiLE9BQ1EwSSxLQUFLNFAsMkJBQ2Q1UCxLQUFLOE8sTUFBTXNELGVBQWdCLEVBQzNCcFMsS0FBS3lQLFFBQVV6UCxLQUFLNFAseUJBQ3BCNVAsS0FBSzhPLE1BQU13RCx1QkFBd0IsU0EvQnJDdFMsS0FBSzhPLE1BQU1rQyxRQUFTLEVBQ2hCaFIsS0FBSzNELE1BQU04VCxxQkFDYm5RLEtBQUs4TyxNQUFNMkQscUJBQXNCLEVBQzVCelMsS0FBS21QLFNBQVNLLFNBQVF4UCxLQUFLOE8sTUFBTWtDLFFBQVMsSUFFakRoUixLQUFLOE8sTUFBTXNELGVBQWdCLEVBQzNCcFMsS0FBSzhPLE1BQU00RCxnQkFBaUIsRUFDNUIxUyxLQUFLOE8sTUFBTTZELFdBQVksRUFDdkIzUyxLQUFLOE8sTUFBTThELFVBQVcsRUFDdEI1UyxLQUFLeVAsUUFBVSxFQTJCbkIsb0JBQ016UCxLQUFLd0YsU0FFUHhGLEtBQUs2UyxZQUFjLElBQUk5YixLQUFLLEdBQUdpSixLQUFLb1Esd0JBS2hDcFEsS0FBSzZTLFlBQVkvYixLQUFLLENBQUVLLE9BQU8sVUFFL0JmLFNBQVMwYyxlQUFlOVMsS0FBSzZTLGFBRS9CN1MsS0FBS3dGLFVBRUh4RixLQUFLNlMsWUFBWXZiLE1BQVEwSSxLQUFLNFAsMkJBQ2hDNVAsS0FBSzhPLE1BQU13RCx1QkFBd0IsR0FJdkN0UyxLQUFLeVAsUUFBVXpQLEtBQUt3RixTQUNoQnZPLEtBQUttQixJQUFJNEgsS0FBSzZTLFlBQVl2YixNQUFPMEksS0FBSzRQLDBCQUN0QzVQLEtBQUs2UyxZQUFZdmIsTUFDckIwSSxLQUFLOE8sTUFBTXNELGVBQWdCLEVBRzdCLHFCQVNFLEdBUklwUyxLQUFLd0YsZUFDRHhGLEtBQUszRCxNQUFNMFcsbUJBQW1CL1MsS0FBS3lQLFFBQVN6UCxLQUFLd0YsZ0JBRWpEeEYsS0FBSzNELE1BQU0yVyxTQUFTaFQsS0FBS3lQLFNBRzdCelAsS0FBS3lQLFFBQVUsSUFBR3pQLEtBQUs4TyxNQUFNbUUsY0FBZSxHQUNoRGpULEtBQUs4TyxNQUFNNEQsZ0JBQWlCLEVBQ3hCMVMsS0FBSzNELE1BQU1tTixLQUFPLEVBUXBCLE9BUEF4SixLQUFLOE8sTUFBTTZELFdBQVksRUFDdkIzUyxLQUFLOE8sTUFBTXVDLG1CQUFvQixFQUUvQnJSLEtBQUs4TyxNQUFNOEQsVUFBVyxFQUN0QjVTLEtBQUs4TyxNQUFNb0UsbUJBQW9CLE9BRS9CbFQsS0FBSzhPLE1BQU1rQyxRQUFTLEdBSWxCaFIsS0FBS3lQLFFBQVUsR0FDakJ6UCxLQUFLOE8sTUFBTTZELFdBQVksRUFDbkIzUyxLQUFLM0QsTUFBTThXLFVBQ2JuVCxLQUFLOE8sTUFBTThELFVBQVcsRUFDdEI1UyxLQUFLOE8sTUFBTXNFLFFBQVMsRUFDcEJwVCxLQUFLOE8sTUFBTXVFLHFCQUFzQixFQUNqQ3JULEtBQUs4TyxNQUFNa0MsUUFBUyxFQUNwQmhSLEtBQUs4TyxNQUFNNkQsV0FBWSxJQUV2QjNTLEtBQUs4TyxNQUFNOEQsVUFBVyxFQUN0QjVTLEtBQUs4TyxNQUFNc0UsUUFBUyxFQUNwQnBULEtBQUs4TyxNQUFNdUUscUJBQXNCLEVBQ2pDclQsS0FBSzhPLE1BQU1rQyxRQUFTLElBR3RCaFIsS0FBSzhPLE1BQU02RCxXQUFZLEVBR3pCLElBQUk5SSxlQUFpQjdKLEtBQUszRCxNQUFNdEQsS0FBS0EsS0FBS3dRLFFBQVFDLElBQUlLLGVBQ3REQSxlQUFpQjNKLFNBQVMySixlQUFlcFAsUUFBUSxNQUFPLEtBQ3BEdUYsS0FBSzNELE1BQU1pWCxjQUFnQnpKLGlCQUU3QjdKLEtBQUs4TyxNQUFNOEQsVUFBVyxFQUN0QjVTLEtBQUs4TyxNQUFNNkQsV0FBWSxFQUN2QjNTLEtBQUs4TyxNQUFNeUUsaUJBQWtCLEVBQzdCdlQsS0FBSzhPLE1BQU0wRSxvQkFBcUIsRUFDaEN4VCxLQUFLOE8sTUFBTXVFLHFCQUFzQixFQUNqQ3JULEtBQUs4TyxNQUFNMkUsaUJBQWtCLEVBQzdCelQsS0FBSzhPLE1BQU1rQyxRQUFTLEdBSXhCLGdCQUNFaFIsS0FBSzBULFNBQVcsSUFBSXZULFVBQ3BCSCxLQUFLMFQsU0FBU3JYLE1BQVEyRCxLQUFLMUQsU0FDM0IwRCxLQUFLMFQsU0FBU3hRLGVBQWlCLE1BQy9CbEQsS0FBSzBULFNBQVMvUSxXQUNaM0MsS0FBS3BGLFFBQVErWSxlQUFpQnhULFVBQVV3RSxnQkFBZ0J2RSxRQUMxREosS0FBSzBULFNBQVNyUyxhQUFlckIsS0FBS3BGLFFBQVFnWixhQUFlLFFBQ25ENVQsS0FBSzBULFNBQVN6QixTQUFTLENBQUVDLFVBQVUsSUFDekNsUyxLQUFLOE8sTUFBTTZELFdBQVksRUFDbkIzUyxLQUFLMFQsU0FBU2xFLFFBQVV4UCxLQUFLOE8sTUFBTStFLGVBQ3JDN1QsS0FBSzhPLE1BQU04RCxVQUFXLEVBQ3RCNVMsS0FBSzhPLE1BQU15RSxpQkFBa0IsRUFDN0J2VCxLQUFLOE8sTUFBTTBFLG9CQUFxQixFQUNoQ3hULEtBQUs4TyxNQUFNMkUsaUJBQWtCLElBRTdCelQsS0FBSzhPLE1BQU04RCxVQUFXLEVBQ3RCNVMsS0FBSzhPLE1BQU15RSxpQkFBa0IsRUFDN0J2VCxLQUFLOE8sTUFBTTBFLG9CQUFxQixFQUNoQ3hULEtBQUs4TyxNQUFNMkUsaUJBQWtCLEVBQzdCelQsS0FBSzhPLE1BQU1rQyxRQUFTLEdBSXhCLHdCQUdFLEdBRkFoUixLQUFLOE8sTUFBTXVDLG1CQUFvQixFQUMzQnJSLEtBQUs4TyxNQUFNMEUsMEJBQTBCeFQsS0FBSzNELE1BQU15WCxlQUFjLEdBQzlEOVQsS0FBSzhPLE1BQU15RSxnQkFBaUIsQ0FDOUIsR0FDRXZULEtBQUszRCxNQUFNb1UsT0FBT0MsV0FBVzlaLFFBQzdCb0osS0FBSzNELE1BQU1vVSxPQUFPQyxXQUFXQyxXQUk3QixZQURBM1EsS0FBSzhPLE1BQU1rQyxRQUFTLEdBR3RCaFIsS0FBSytULDJCQUE2QixJQUFJaGQsS0FBSyxRQUFRRCxLQUFLLENBQUVLLE9BQU8sSUFDakU2SSxLQUFLZ1UsaUJBQW1CaFUsS0FBSytULHFCQUFxQnpjLE1BQzlDMEksS0FBSzNELE1BQU1vVSxPQUFPQyxXQUFXdUQsV0FDL0JqVSxLQUFLZ1Usa0JBQW9CaFUsS0FBSzNELE1BQU1vVSxPQUFPQyxXQUFXdUQsZ0JBRWxEalUsS0FBSzNELE1BQU15WCxlQUFjLEVBQU85VCxLQUFLZ1Usa0JBRTdDaFUsS0FBSzhPLE1BQU1rQyxRQUFTLEVBR3RCLG1DQUNRaFIsS0FBSzNELE1BQU02WCxjQUFjbFUsS0FBS3dGLFVBQy9CeEYsS0FBSytQLHFCQUF3Qi9QLEtBQUtnUSw0QkFDckNoUSxLQUFLOE8sTUFBTWdDLHFCQUFzQixHQUlyQyxpQ0FDUTlRLEtBQUszRCxNQUFNOFgsWUFBWW5VLEtBQUt3RixVQUM3QnhGLEtBQUsrUCxxQkFBd0IvUCxLQUFLZ1EsNEJBQ3JDaFEsS0FBSzhPLE1BQU1nQyxxQkFBc0IsR0FJckMsdUJBTUUsR0FKSTlRLEtBQUs4TyxNQUFNSSxZQUNibFAsS0FBS29VLGlCQUFtQnBVLEtBQUttUCxTQUFTa0YsWUFBWUMsV0FHaER0VSxLQUFLNlMsWUFBYSxDQUNwQixNQUFNclosRUFBSVYsaUJBQWlCa0gsS0FBSzZTLGFBQ2hDN1MsS0FBS3VVLG9CQUFzQi9hLEVBQUU4YSxVQUczQnRVLEtBQUs4TyxNQUFNNkQsV0FBYTNTLEtBQUswVCxXQUMvQjFULEtBQUt3VSxpQkFBbUJ4VSxLQUFLMFQsU0FBU1csWUFBWUMsV0FHcEQsTUFBTXBRLFdBQWF1USxlQUFlakcsYUFBYWxJLFNBQVV0RyxNQUNuRDBVLGdCQUFrQkMsRUFBRUMsVUFBVTFRLE1BQU0sR0FHMUN3USxnQkFBZ0J6YixRQUFRMkQsT0FBU3hELE9BQU9DLEtBQUtDLFVBQVUwRyxLQUFNc08sV0FHN0QsTUFBTXVHLFlBQWNwZSxLQUFLcWUsU0FBU25lLElBQUlxSixLQUFLK1UsV0FFckNuWixVQUFZaVosWUFBWTFLLE9BQU8sQ0FDbkMxTyxRQUFTaVosZ0JBQWdCSixZQUczQixhQURNaFYsR0FBRzBWLEtBQUtDLGNBQWNyWixLQUFLLEdBQzFCQSxJQUdULHNCQUNFLE1BQU8sbURBR1Qsb0JBQXFCb1QsWUFBYTNFLGFBQWMsR0FDOUMsTUFBTW1ELFFBQVUsSUFBSS9XLEtBQUtvQyxLQUFLMlUsU0FDOUIsR0FBSUEsUUFBUXJWLE9BQ1YsSUFBSyxNQUFNTCxLQUFLMFYsUUFFVjFWLEVBQUV1RSxNQUFNK0csUUFDVm9MLGFBQWE5UyxPQUNYNUQsRUFBRXVFLE1BQU04RyxTQUNSLENBQUU2TCxhQUNGLENBQUUzRSxjQUdKbUUsYUFBYTlTLE9BQ1g1RCxFQUFFdUUsTUFBTWIsR0FDUixDQUFFd1QsYUFDRixDQUFFM0UsY0FPWix1QkFBd0I2SyxNQUN0QixNQUFNQyxTQUFXLElBQUkzRyxnQkFBZ0IwRyxNQUVqQ0MsU0FBUzlZLE1BQU04VyxXQUNqQmdDLFNBQVNyRyxNQUFNK0UsZUFBZ0IsR0FHN0JzQixTQUFTOVksTUFBTW1OLEtBQU8sSUFDeEIyTCxTQUFTckcsTUFBTTZELFdBQVksRUFDM0J3QyxTQUFTckcsTUFBTXVDLG1CQUFvQixFQUVuQzhELFNBQVNyRyxNQUFNOEQsVUFBVyxFQUMxQnVDLFNBQVNyRyxNQUFNb0UsbUJBQW9CLEVBRW5DaUMsU0FBU3JHLE1BQU1rQyxRQUFTLEdBR3JCbUUsU0FBU3BGLHFCQUF3Qm9GLFNBQVNuRiw0QkFDN0NtRixTQUFTckcsTUFBTWdDLHFCQUFzQixHQUd2QyxNQUFNNU0sV0FBYXVRLGVBQWVqRyxhQUFhbEksU0FBVTZPLFVBQ25EVCxnQkFBa0JDLEVBQUVDLFVBQVUxUSxNQUFNLEdBRTFDd1EsZ0JBQWdCemIsUUFBUTJELE9BQVN4RCxPQUFPQyxLQUFLQyxVQUFVNmIsU0FBVTdHLGlCQUMzRDZHLFNBQVNDLElBQUlWLGdCQUFnQkosV0FHckMsd0JBQXlCUyxXQUN2QixNQUFNcGEsUUFBVWxFLEtBQUtxZSxTQUFTbmUsSUFBSW9lLFdBRzVCTSxTQUZjVixFQUFFQyxVQUFVamEsUUFBUTVCLEtBQUswQyxTQUFTLEdBRXpCcUUsY0FBYyxjQUUzQyxPQUFPME8sYUFBYThHLFlBQVlELFVBR2xDLG1CQUFvQnpWLE1BQ2xCLE1BQU0yVixpQkFBbUJsYyxLQUFLNFIsTUFBTXVLLFNBQVM1VixLQUFLM0csUUFBUTJELFNBRXBENlksYUFBZSxJQUFJakgsYUEwQnpCLE9BekJBelUsT0FBTzJiLE9BQU9ELGFBQWNGLGtCQUN2QkUsYUFBYVYsWUFDaEJVLGFBQWFWLFVBQVluVixLQUFLK1YsUUFBUSxZQUFZMWMsUUFBUThiLFdBR1gsV0FBN0NVLGFBQWF0RyxVQUFVekosYUFBYWhKLE9BQ3RDK1ksYUFBYXRHLFNBQVdwVixPQUFPMmIsT0FDN0IsSUFBSXZWLFVBQ0pzVixhQUFhdEcsV0FJZ0MsV0FBN0NzRyxhQUFhL0IsVUFBVWhPLGFBQWFoSixPQUN0QytZLGFBQWEvQixTQUFXM1osT0FBTzJiLE9BQzdCLElBQUl2VixVQUNKc1YsYUFBYS9CLFdBSW1DLFdBQWhEK0IsYUFBYTVDLGFBQWFuTixhQUFhaEosT0FDekMrWSxhQUFhNUMsWUFBYzliLEtBQUs2ZSxTQUFTSCxhQUFhNUMsY0FLakQ0QyxjQzdsQkosTUFBTUksS0FBTyxDQVNwQixLQUFZLENBQ1ZDLEtBQU0sZUFDTkMsS0FBTSxlQUNOQyxLQUFNLGVBQ05DLEtBQU0sZUFDTixLQUFNLGVBQ05DLEtBQU0sZUFDTkMsS0FBTSxnQkFHUixnQkFBdUIsQ0FDckJDLElBQUssaUJBQ0xDLElBQUssaUJBQ0xDLElBQUssaUJBQ0xDLElBQUssaUJBQ0xDLElBQUssaUJBQ0xDLElBQUssaUJBQ0xDLElBQUssaUJBQ0xDLElBQUssa0JBT1AsZ0JBQXVCLENBQ3JCQyxjQUFlLDBCQUNmQyxTQUFVLHFCQUNWQyxRQUFTLG9CQUNUQyxPQUFRLG1CQUNSaGYsS0FBTSxpQkFDTmlmLE9BQVEsbUJBQ1JDLFNBQVUscUJBQ1ZDLFFBQVMscUJBR1gsaUJBQXdCLENBQ3RCQyxNQUFPLDZCQUNQQyxLQUFNLGtCQUNOQyxLQUFNLDZCQUNOQyxPQUFRLDhCQUNSQyxRQUFTLCtCQUNUQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLGtCQUNOQyxLQUFNLDZCQUdSLGdCQUF1QixDQUNyQnJQLEtBQU0saUJBQ05zUCxRQUFTLG9CQUNUQyxRQUFTLG9CQUNUQyxPQUFRLG1CQUNSQyxLQUFNLGlCQUNOQyxZQUFhLHdCQUNiQyxLQUFNLGlCQUNOMUIsT0FBUSxvQkFHVixTQUFnQixDQUNkMkIsT0FBUSxrQkFDUkMsT0FBUSxrQkFDUkMsTUFBTyxjQUdULFdBQWtCLENBQ2hCQyxTQUFVLHNCQUNWQyxPQUFRLG9CQUNSL0IsT0FBUSxvQkFDUmdDLGNBQWUsMkJBQ2ZDLE1BQU8sbUJBQ1BDLE9BQVEsb0JBQ1JMLE1BQU8sb0JBR1QsV0FBa0IsQ0FDaEJNLE1BQU8sYUFDUEMsT0FBUSxlQUdWLHFCQUE0QixDQUMxQkMsUUFBUyxlQUNUQyxhQUFjLG9CQUNkQyxPQUFRLGNBQ1JyRCxLQUFNLGFBR1IsUUFBZSxJQUVmTCxLQUFLMWMsUUFBUWtELE1BQVEsQ0FDbkIsT0FBUSwyQ0FDUixPQUFRLDJDQUNSLE9BQVEsMkNBQ1IsT0FBUSwyQ0FDUixPQUFRLDJDQUNSLE9BQVEsMkNBQ1IsT0FBUSwyQ0FDUixPQUFRLDRDQUdWd1osS0FBSzFjLFFBQVFxZ0IsV0FBYSxDQUN4QixPQUFRLGlEQUNSLE9BQVEsaURBQ1IsT0FBUSxpREFDUixPQUFRLGlEQUNSLE9BQVEsaURBQ1IsT0FBUSxpREFDUixPQUFRLGlEQUNSLE9BQVEsa0RBR1YzRCxLQUFLek0sT0FBUyxDQUNacVEsWUFBYSxjQUNiQyxZQUFhLGNBQ2JDLFlBQWEsY0FDYnRRLGVBQWdCLGlCQUNoQnVRLE1BQU8sUUFDUEMsTUFBTyxRQUNQQyxLQUFNLFFBR1JqRSxLQUFLa0UsWUFBYyxtQkFDbkJsRSxLQUFLbUUsYUFBZSxvQkFDcEJuRSxLQUFLb0UsYUFBZSxvQkFDcEJwRSxLQUFLcUUsWUFBYyxtQkFDbkJyRSxLQUFLc0UsY0FBZ0IscUJBRXJCdEUsS0FBS3VFLHNCQUF3Qiw2QkFFN0J2RSxLQUFLd0UsZUFBaUIsc0JBQ3RCeEUsS0FBS3lFLHNCQUF3Qiw2QkFDN0J6RSxLQUFLMEUsa0JBQW9CLHlCQUN6QjFFLEtBQUsyRSwyQkFBNkIsa0NBQ2xDM0UsS0FBSzRFLDBCQUE0QixpQ0FFakM1RSxLQUFLNkUsWUFBYyxDQUNqQkMsVUFBVyxpQkFDWEMsTUFBTyxhQUNQQyxTQUFVLGdCQUNWQyxXQUFZLG1CQ3pKUCxNQUFNQyxhQUNYclYsWUFBYXJDLFFBQVUsS0FBTVYsV0FBYXhDLFVBQVV3RSxnQkFBZ0J2RSxTQUNsRUosS0FBS3FDLE1BQVEsSUFBSWxDLFVBQVVrRCxTQUMzQnJELEtBQUtxQyxNQUFNYSxlQUFpQixNQUM1QmxELEtBQUtxQyxNQUFNTSxXQUFhQSxXQUN4QjNDLEtBQUtxQyxNQUFNMlksVUFBVyxFQUN0QmhiLEtBQUtxRCxRQUFVQSxRQUdqQixjQUlFLFlBSElnQyxJQUFjckYsS0FBS3NOLFdBQ3JCdE4sS0FBS3NOLFNBQTZCLGNBQWxCdE4sS0FBSzFKLFVBRWhCMEosS0FBS3NOLFNBR2QsWUFBYXZKLEdBQ1gvRCxLQUFLc04sU0FBV3ZKLEVBR2xCLGVBRUUsT0FESy9ELEtBQUt1TixZQUFXdk4sS0FBS3VOLFVBQVk5VyxLQUFLSSxTQUFTRixJQUFJLE9BQVEsYUFDekRxSixLQUFLdU4sVUFHZCxhQUFjeEosSUFDRixJQUFOQSxJQUFhL0QsS0FBS3VOLFVBQVk5VyxLQUFLSSxTQUFTRixJQUFJLE9BQVEsYUFDNURxSixLQUFLdU4sVUFBWXhKLEVBR25CLFlBQ0UsT0FBSS9ELEtBQUtxRCxRQUFnQjlJLFdBQVdnQyxnQkFBZ0J5RCxLQUFLcUQsU0FDbEQsS0FHVCxZQUFhVSxHQUNYL0QsS0FBS2liLFNBQVdsWCxFQUNoQi9ELEtBQUtxQyxNQUFNaEcsTUFBUTBILEVBR3JCLGNBQ0UsT0FBSS9ELEtBQUtpYixTQUFpQmpiLEtBQUtpYixTQUN4QixLQUdULGVBQ0UsT0FBSWpiLEtBQUszRCxNQUFNK0csUUFBZ0JwRCxLQUFLM0QsTUFBTThHLFNBQ25DLEtBR1QsZ0JBQ0UsUUFBSW5ELEtBQUtxQyxPQUFjckMsS0FBS3FDLE1BQU02WSxVQUlwQyxlQUNFLFNBQUlsYixLQUFLcUMsT0FBU3JDLEtBQUtxQyxNQUFNcEIsT0FBU2pCLEtBQUtxQyxNQUFNcEIsTUFBTTNKLE9BSXpELG1CQUFvQnNJLE1BQ2xCLE1BQU11YixTQUFXLElBQUlKLGFBQ3JCeGdCLFdBQVd3RixxQkFBcUJvYixTQUFVdmIsTUFDMUMsTUFBTXdiLFVBQVl4YixLQUFLRSxjQUFjLGdCQUdyQyxPQUZBSCxTQUFTMGIsZUFBZUQsVUFBV0QsU0FBUzlZLE9BQzVDOFksU0FBU3BHLFVBQVluVixLQUFLK1YsUUFBUSxZQUFZMWMsUUFBUThiLFVBQy9Db0csU0FHVCx3QkFDRSxNQUNNalgsV0FBYXVRLGVBREYsK0NBQzJCelUsS0FBS3FDLE9BQzNDaUIsWUFBY3FSLEVBQUVDLFVBQVUxUSxNQUFNLEdBQ3RDLE9BQUlaLGFBQ0ZBLFlBQVkzSixVQUFVZ1QsT0FBTyxZQUFhLFlBQWEsYUFDaERySixhQUVGLEtBR1QsZ0JBQWlCK0csYUFBYyxHQUd6QkEsbUJBQ0lySyxLQUFLc2IsVUFHYixNQUFNcFgsV0FBYXVRLGVBTkYsNkNBTTJCelUsTUFDdENzRCxZQUFjcVIsRUFBRUMsVUFBVTFRLE1BQU0sR0FFdEMsR0FBSW1HLFlBQWEsQ0FDRC9HLFlBQVl4RCxjQUFjLGdCQUNsQ3liLGtCQUFrQnZiLEtBQUt3YixtQkFHL0IsTUFBTXBOLFlBQWMsR0FDcEIsSUFBSXJULFFBQ0FpRixLQUFLM0QsT0FDSDJELEtBQUt4RCxNQUFPNFIsWUFBWTVSLE1BQVF3RCxLQUFLeEQsTUFDcEM0UixZQUFZL1IsTUFBUTJELEtBQUszRCxNQUM5QnRCLFFBQVV0QyxZQUFZdUMsV0FBV29ULGNBRWpDclQsUUFBVXRDLFlBQVl1QyxhQUd4QixNQUVNMUMsU0FBVyxDQUNmTyxNQUhXbUgsS0FBSzNELE1BQU14RCxLQUFPbUgsS0FBSzNELE1BQU14RCxLQUFPcEMsS0FBS29DLE1BR3pDMkMsR0FDWFQsUUFDQUQsT0FBUWtGLEtBQUtsRixPQUNiVyxRQUFTNkgsWUFBWWdSLFdBSXJCLENBQUMsU0FBVSxhQUFhdGMsU0FBU3ZCLEtBQUtJLFNBQVNGLElBQUksT0FBUSxlQUUzRDJCLFNBQVNDLFFBQVVFLFlBQVk0VixxQkFBcUIsT0FFaEMsY0FBbEJyTyxLQUFLMUosV0FBMEJnQyxTQUFTRSxPQUFRLEdBRXBEQyxZQUFZaUQsT0FBT3BELFVBQVVxRCxNQUFLQyxLQUN6QkEsTUFJWCxnQkFDRW9FLEtBQUtxQyxNQUFNb1osZ0JBQWlCLFFBQ3RCemIsS0FBS3FDLE1BQU00UCxXQUNaalMsS0FBS2tiLFdBQWNsYixLQUFLK08sVUFDdkIvTyxLQUFLMGIsZ0JBQWlCMWIsS0FBSzNELE1BQU1zZixpQkFDMUIzYixLQUFLM0QsTUFBTXVmLG1CQUV4QjViLEtBQUs2YixTQUFVLEVBR2pCLHVCQUNFLE1BRU0zWCxXQUFhdVEsZUFGRiw2Q0FFMkJ6VSxNQUN0Q3NELFlBQWNxUixFQUFFQyxVQUFVMVEsTUFBTSxHQVV0QyxHQVJjWixZQUFZeEQsY0FBYyxnQkFDbEN5YixrQkFBa0J2YixLQUFLd2IsbUJBRXhCeGIsS0FBSytPLFVBQVcvTyxLQUFLOGIsVUFBYTliLEtBQUtrYixZQUN0Q2xiLEtBQUswYixnQkFBaUIxYixLQUFLM0QsTUFBTXNmLGlCQUMxQjNiLEtBQUszRCxNQUFNdWYsb0JBR25CNWIsS0FBSytVLFVBQVcsT0FDckIsTUFBTUYsWUFBY3BlLEtBQUtxZSxTQUFTbmUsSUFBSXFKLEtBQUsrVSxXQUVyQ25aLFVBQVlpWixZQUFZMUssT0FBTyxDQUFFMU8sUUFBUzZILFlBQVlnUixZQUU1RCxhQURNaFYsR0FBRzBWLEtBQUtDLGNBQWNyWixLQUFLLEdBQzFCQSxLQzlKSixNQUFNbWdCLDBCQUEwQkMsT0FDckNDLGtCQUFtQi9YLE1BQ2pCd0ssTUFBTXVOLGtCQUFrQi9YLE1BRXhCQSxLQUNHOEIsS0FBSyxpQkFDTGtXLE9BQU0va0IsTUFBQUEsT0FBZTZJLEtBQUttYyxzQkFBc0JoaUIsU0FHckQsNEJBQTZCQSxPQUMzQixNQUFNaWlCLEdBQUtqaUIsTUFBTWtpQixjQUFjMUcsUUFBUSxTQUd2QzNWLEtBQUtqSCxLQUFLQSxLQUFLdWpCLE9BQU8xZSxPQUFPd2UsR0FBR25qQixRQUFRc2pCLFFBQVE1YSxVQUFXLEVBQzNEeEgsTUFBTWtpQixjQUFjdlEsTUFBTTBRLFFBQVUsT0FDL0J4YyxLQUFLakgsS0FBS0EsS0FBSzBqQixRQUFPemMsS0FBS2pILEtBQUtBLEtBQUswakIsTUFBUSxHQUNsRHpjLEtBQUtqSCxLQUFLQSxLQUFLMGpCLFFBQ0Z0aUIsTUFBTWtpQixjQUFjMUcsUUFBUSxtQkFDbkI3VixjQUFjLFVBQzNCNGMsVUFBWTFjLEtBQUtqSCxLQUFLQSxLQUFLMGpCLE1BQ2hDemMsS0FBS2pILEtBQUtBLEtBQUswakIsT0FBU3pjLEtBQUtqSCxLQUFLQSxLQUFLNGpCLGNBQ3pDM2MsS0FBSzRjLFFBSVQsb0JBQXFCN2pCLE1BQ25CLE1BQU1tTCxXQUFhdVEsZUFDakIsZ0RBQ0ExYixNQUVGLE9BQU8sSUFBSXVULFNBQVFDLFVBQ0wsSUFBSXdQLGtCQUNkLENBQ0U3aUIsTUFBT0gsS0FBS0csTUFDWnVDLFFBQVN5SSxLQUNUbkwsS0FDQThqQixRQUFTLEdBQ1RELE1BQU8sS0FDTCxJQUFLN2pCLEtBQUswakIsT0FBUzFqQixLQUFLNGpCLGFBQWMsT0FBT3BRLFNBQVEsR0FDckQsTUFBTTVLLFNBQVc1SSxLQUFLdWpCLE9BQU9wa0IsUUFBTzBLLE9BQVNBLE1BQU1qQixXQUNuRCxPQUFPNEssUUFBUTVLLFlBR25CLENBQUVtYixRQUFTLENBQUMsT0FBUSxTQUFVLGtCQUU1QmxTLFFBQU8sT0M3Q1YsTUFBTW1TLDBCQUEwQmYsT0FDckNDLGtCQUFtQi9YLE1BQ2pCd0ssTUFBTXVOLGtCQUFrQi9YLE1BRXhCQSxLQUNHOEIsS0FBSyxjQUNMa1csT0FBTS9rQixNQUFBQSxPQUFlNkksS0FBS2dkLHdCQUF3QjdpQixTQUNyRCtKLEtBQUs4QixLQUFLLFVBQVVrVyxPQUFNL2hCLE9BQVM2RixLQUFLaWQsaUJBQWlCOWlCLFNBRzNELDhCQUErQkEsT0FDN0IsTUFBTWlpQixHQUFLamlCLE1BQU1raUIsY0FBYzFHLFFBQVEsU0FDakN1SCxTQUFXZCxHQUFHekcsUUFBUSxjQUM1QixJQUFLLE1BQU05UyxRQUFRcWEsU0FBU3piLGlCQUFpQixlQUMzQ29CLEtBQUtsSixVQUFVZ1QsT0FBTyxZQUN0QjNNLEtBQUtqSCxLQUFLQSxLQUFLME4sZ0JBQWdCNUQsS0FBSzVKLFFBQVE2QyxLQUFLNkYsVUFBVyxFQUM1RDNCLEtBQUtqSCxLQUFLQSxLQUFLME4sZ0JBQWdCNUQsS0FBSzVKLFFBQVE2QyxLQUFLcWhCLFVBQVcsRUFFOUR4SSxFQUFFeUgsSUFBSWdCLFlBQVksWUFDbEJwZCxLQUFLakgsS0FBS0EsS0FBSzBOLGdCQUFnQjJWLEdBQUduakIsUUFBUTZDLEtBQUs2RixVQUFXLEVBQ3RDeWEsR0FDakJ6RyxRQUFRLHlCQUNSN1YsY0FBYyxXQUNMNGMsVUFDVjFjLEtBQUtqSCxLQUFLQSxLQUFLekIsTUFDZjBJLEtBQUtqSCxLQUFLQSxLQUFLME4sZ0JBQWdCMlYsR0FBR25qQixRQUFRNkMsS0FBS3VoQixXQUM3Q3JkLEtBQUtqSCxLQUFLQSxLQUFLME4sZ0JBQWdCMlYsR0FBR25qQixRQUFRNkMsS0FBS3VCLE1BQ3BDK2UsR0FDWnpHLFFBQVEseUJBQ1I3VixjQUFjLG1CQUNWbkcsVUFBVWdULE9BQU8sWUFDeEIzTSxLQUFLakgsS0FBS0EsS0FBS3VrQixVQUFXLEVBYTVCLHVCQUF3Qm5qQixPQUN0QkEsTUFBTXlNLGlCQUNGek0sTUFBTWtpQixjQUFjMWlCLFVBQVU0akIsU0FBUyxhQUMzQzdPLE1BQU1rTyxRQUdSLG9CQUFxQjdqQixNQUNuQixNQUFNbUwsV0FBYXVRLGVBQ2pCLGdEQUNBMWIsTUFFRixPQUFPLElBQUl1VCxTQUFRQyxVQUNMLElBQUl3USxrQkFDZCxDQUNFN2pCLE1BQU9ILEtBQUtHLE1BQ1p1QyxRQUFTeUksS0FDVG5MLEtBQ0E4akIsUUFBUyxHQUNURCxNQUFPLElBQ0Q3akIsS0FBS3VrQixTQUFpQi9RLFFBQVF4VCxNQUN0QndULFNBQVEsSUFHeEIsQ0FBRXVRLFFBQVMsQ0FBQyxPQUFRLFNBQVUsaUJBRTVCbFMsUUFBTyxPQ3JFVixNQUFNNFMsMkJBQTJCeEIsT0FDdENDLGtCQUFtQi9YLE1BQ2pCd0ssTUFBTXVOLGtCQUFrQi9YLE1BRXhCQSxLQUNHOEIsS0FBSyxjQUNMa1csT0FBTS9rQixNQUFBQSxPQUFlNkksS0FBS2dkLHdCQUF3QjdpQixTQUd2RCw4QkFBK0JBLE9BQzdCLE1BQU1paUIsR0FBS2ppQixNQUFNa2lCLGNBQWMxRyxRQUFRLFNBQ3ZDM1YsS0FBS2pILEtBQUtBLEtBQUs0SSxTQUFXeWEsR0FBR25qQixRQUFRNkMsSUFDckNrRSxLQUFLNGMsUUFHUCxvQkFBcUI3akIsTUFDbkIsTUFBTW1MLFdBQWF1USxlQUNqQiwrQ0FDQTFiLE1BRUYsT0FBTyxJQUFJdVQsU0FBUUMsVUFDTCxJQUFJaVIsbUJBQ2QsQ0FDRXRrQixNQUFPSCxLQUFLRyxNQUNadUMsUUFBU3lJLEtBQ1RuTCxLQUNBOGpCLFFBQVMsR0FDVEQsTUFBTyxJQUNEN2pCLEtBQUs0SSxTQUFpQjRLLFFBQVF4VCxLQUFLNEksVUFDM0I0SyxTQUFRLElBR3hCLENBQUV1USxRQUFTLENBQUMsT0FBUSxTQUFVLGlCQUU1QmxTLFFBQU8sT0NsQ1YsTUFBTTZTLHlCQUF5QnpCLE9BQ3BDdFcsWUFBYTNNLEtBQU02QixTQUNqQjhULE1BQU0zVixLQUFNNkIsU0FFWm9GLEtBQUswZCxPQUFTM2tCLEtBQUsya0IsUUFBVSxHQUcvQnpCLGtCQUFtQi9YLE1BQ2pCd0ssTUFBTXVOLGtCQUFrQi9YLE1BQ3hCQSxLQUFLeVosR0FBRyxTQUFVLFFBQVMzZCxLQUFLNGQsZUFBZXBGLEtBQUt4WSxPQUNwRGtFLEtBQUt5WixHQUFHLFNBQVUsT0FBUTNkLEtBQUs2ZCxVQUFVckYsS0FBS3hZLE9BQzlDa0UsS0FBS3laLEdBQ0gsUUFDQSx1QkFDQTNkLEtBQUs4ZCxzQkFBc0J0RixLQUFLeFksT0FFbENrRSxLQUFLeVosR0FDSCxRQUNBLDJCQUNBM2QsS0FBSytkLDBCQUEwQnZGLEtBQUt4WSxPQUV0Q2tFLEtBQUt5WixHQUNILFFBQ0EsMkJBQ0EzZCxLQUFLZ2UsMEJBQTBCeEYsS0FBS3hZLE9BRXRDa0UsS0FBS3laLEdBQ0gsUUFDQSx3QkFDQTNkLEtBQUtpZSx1QkFBdUJ6RixLQUFLeFksT0FFbkNrRSxLQUFLeVosR0FBRyxRQUFTLFNBQVUzZCxLQUFLa2UsVUFBVTFGLEtBQUt4WSxPQUdqRCw0QkFBNkI3RixPQUMzQkEsTUFBTXlNLGlCQUNOLE1BQ011WCxVQURLaGtCLE1BQU1raUIsY0FBYzFHLFFBQVEsU0FDbEIxYyxRQUFRNkMsVUFDdkJrRSxLQUFLb2UsbUJBQW1CRCxXQUdoQyxnQ0FBaUNoa0IsT0FDL0JBLE1BQU15TSxpQkFDTixNQUNNdVgsVUFES2hrQixNQUFNa2lCLGNBQWMxRyxRQUFRLFNBQ2xCMWMsUUFBUTZDLElBQzdCa0UsS0FBS3FlLHVCQUF1QkYsV0FHOUIsZ0NBQWlDaGtCLE9BQy9CQSxNQUFNeU0saUJBQ04sTUFDTXVYLFVBREtoa0IsTUFBTWtpQixjQUFjMUcsUUFBUSxTQUNsQjFjLFFBQVE2QyxJQUM3QmtFLEtBQUtzZSx1QkFBdUJILFdBRzlCLDZCQUE4QmhrQixPQUM1QkEsTUFBTXlNLGlCQUNOLE1BQ011WCxVQURLaGtCLE1BQU1raUIsY0FBYzFHLFFBQVEsU0FDbEIxYyxRQUFRNkMsSUFDN0JrRSxLQUFLdWUsb0JBQW9CSixXQUczQixnQkFBaUJoa0IsT0FDZixNQUFNcUksT0FBU3JJLE1BQU1raUIsY0FBY3BqQixRQUFRdUosT0FDM0MsR0FBZSxTQUFYQSxPQUNGLElBQUssTUFBTXlELE9BQVEsQ0FDakIsTUFDQSxNQUNBLE1BQ0EsTUFDQSxNQUNBLE1BQ0EsTUFDQSxNQUNBLGNBRU1qRyxLQUFLb2UsbUJBQW1CblksTUFJckIsYUFBWHpELFFBQ0NySSxNQUFNa2lCLGNBQWMxaUIsVUFBVTRqQixTQUFTLGNBRXhDdmQsS0FBS3dlLGFBQ0x4ZSxLQUFLNGMsU0FJVCx5QkFBMEI5Z0IsS0FDeEIsTUFDTTJpQixNQURLemUsS0FBSzBlLFNBQVMsR0FBRzVlLGNBQWMsb0JBQW9CaEUsU0FDNUNnRSxjQUFjLFNBQzFCM0csUUFBVTZHLEtBQUtqSCxLQUFLQSxLQUFLME4sZ0JBQWdCN0MsTUFBTTlILEtBQ3JELEdBQUkyaUIsT0FBU3RsQixRQUFTLENBQ3BCLEdBQUk2SyxNQUFNcEcsT0FBT3pFLFVBQVcsQ0FDMUIsTUFBTXJDLEtBQU8sSUFBSUMsS0FBS29DLGVBQ2hCckMsS0FBSytZLFNBQVMsQ0FBRTFZLE9BQU8sSUFDN0JMLEtBQUt3TyxVQUFVLENBQ2J4SyxPQUFRLDJCQUEyQmtGLEtBQUtqSCxLQUFLQSxLQUFLME4sZ0JBQWdCa1ksS0FBSzdpQixLQUFLc0ssVUFBVWpOLFlBRXhGc2xCLE1BQU1waEIsTUFBUXZHLEtBQUtRLFdBQ2RtbkIsTUFBTXBoQixNQUFRTyxPQUFPekUsU0FDNUI2RyxLQUFLakgsS0FBS0EsS0FBSzBOLGdCQUFnQlYsT0FBT2pLLEtBQU84QixPQUFPNmdCLE1BQU1waEIsT0FDckQyQyxLQUFLMGQsU0FBUTFkLEtBQUswZCxPQUFTLElBQ2hDMWQsS0FBSzBkLE9BQU81aEIsTUFBTyxFQUVyQmtFLEtBQUt3ZSxhQUdQLDZCQUE4QjFpQixLQUM1QixNQUNNMmlCLE1BREt6ZSxLQUFLMGUsU0FBUyxHQUFHNWUsY0FBYyxvQkFBb0JoRSxTQUM1Q2dFLGNBQWMsU0FDNUIyZSxRQUNGQSxNQUFNcGhCLE1BQVFPLE9BQU82Z0IsTUFBTXBoQixPQUFTLEVBQ3BDMkMsS0FBS2pILEtBQUtBLEtBQUswTixnQkFBZ0JWLE9BQU9qSyxLQUFPOEIsT0FBTzZnQixNQUFNcGhCLFFBRTVEMkMsS0FBS3dlLGFBR1AsNkJBQThCMWlCLEtBQzVCLE1BQ00yaUIsTUFES3plLEtBQUswZSxTQUFTLEdBQUc1ZSxjQUFjLG9CQUFvQmhFLFNBQzVDZ0UsY0FBYyxTQUM1QjJlLE9BQVM3Z0IsT0FBTzZnQixNQUFNcGhCLE9BQVMsSUFDakNvaEIsTUFBTXBoQixNQUFRTyxPQUFPNmdCLE1BQU1waEIsT0FBUyxFQUNwQzJDLEtBQUtqSCxLQUFLQSxLQUFLME4sZ0JBQWdCVixPQUFPakssS0FBTzhCLE9BQU82Z0IsTUFBTXBoQixRQUU1RDJDLEtBQUt3ZSxhQUdQLDBCQUEyQjFpQixLQUN6QixNQUNNMmlCLE1BREt6ZSxLQUFLMGUsU0FBUyxHQUFHNWUsY0FBYyxvQkFBb0JoRSxTQUM1Q2dFLGNBQWMsU0FDNUIyZSxRQUNGQSxNQUFNcGhCLE1BQVEsS0FDZDJDLEtBQUtqSCxLQUFLQSxLQUFLME4sZ0JBQWdCVixPQUFPakssS0FBTyxHQUUvQ2tFLEtBQUt3ZSxhQUdQLHFCQUFzQnJrQixPQUNwQkEsTUFBTXlNLGlCQUNOLE1BQU02WCxNQUFRdGtCLE1BQU1raUIsY0FDZGhmLE1BQVFPLE9BQU82Z0IsTUFBTXBoQixPQUN0QjJHLE1BQU0zRyxTQUNUMkMsS0FBS2pILEtBQUtBLEtBQUswTixnQkFBZ0JWLE9BQU8wWSxNQUFNL2hCLE1BQVFXLE9BR3REMkMsS0FBS3dlLGFBR1BBLGFBQ0V4ZSxLQUFLakgsS0FBS0EsS0FBSzBOLGdCQUFnQm1ZLE9BQU90bkIsTUFBUSxFQUM5QyxJQUFLLE1BQU93RSxJQUFLdUIsU0FBVXRELE9BQU9DLFFBQ2hDZ0csS0FBS2pILEtBQUtBLEtBQUswTixnQkFBZ0JWLFFBRW5CLFNBQVJqSyxNQUNGa0UsS0FBS2pILEtBQUtBLEtBQUswTixnQkFBZ0JtWSxPQUFPdG5CLE9BQVMrRixPQUluRCxNQUFNd2hCLFdBQWE3ZSxLQUFLMGUsU0FBUyxHQUFHNWUsY0FBYyxXQUNsRCxHQUFJRSxLQUFLakgsS0FBS0EsS0FBSzBOLGdCQUFnQm1ZLE9BQU9FLFFBQVMsQ0FDakQsR0FDRWxoQixPQUFPb0MsS0FBS2pILEtBQUtBLEtBQUswTixnQkFBZ0JtWSxPQUFPdG5CLFNBQzdDc0csT0FBT29DLEtBQUtqSCxLQUFLQSxLQUFLME4sZ0JBQWdCbVksT0FBT3ZoQixPQUU3Q3doQixXQUFXbGxCLFVBQVVDLElBQUksZUFDcEIsQ0FDTGlsQixXQUFXbGxCLFVBQVVnVCxPQUFPLFdBQ0wzTSxLQUFLMGUsU0FBUyxHQUFHNWUsY0FBYyxtQkFDdkNuRyxVQUFVZ1QsT0FBTyxZQUNoQzNNLEtBQUtqSCxLQUFLQSxLQUFLa0wsVUFBVyxFQUVkNGEsV0FBVy9lLGNBQWMsVUFDakM0YyxVQUFZMWMsS0FBS2pILEtBQUtBLEtBQUswTixnQkFBZ0JtWSxPQUFPdmhCLE1BTTFELEdBSGN3aEIsV0FBVy9lLGNBQWMsVUFDakM0YyxVQUFZMWMsS0FBS2pILEtBQUtBLEtBQUswTixnQkFBZ0JtWSxPQUFPdG5CLE1BRXBEMEksS0FBS2pILEtBQUtBLEtBQUswTixnQkFBZ0I3QyxNQUFNa2IsU0FDbkM5ZSxLQUFLMGQsU0FDUDFkLEtBQUtqSCxLQUFLQSxLQUFLa0wsVUFDWmxLLE9BQU9DLFFBQVFnRyxLQUFLMGQsUUFBUTFYLE1BQUsrWSxLQUFPQSxNQUNGLElBQXZDaGxCLE9BQU9DLFFBQVFnRyxLQUFLMGQsUUFBUXZsQixPQUMxQjZILEtBQUtqSCxLQUFLQSxLQUFLa0wsVUFBVSxDQUNKakUsS0FBSzBlLFNBQVMsR0FBRzVlLGNBQ3RDLG1CQUVhbkcsVUFBVWdULE9BQU8sYUFNeEMsZ0JBQWlCeFMsT0FDZkEsTUFBTXlNLGlCQUdSLG9CQUFxQjdOLE1BQ25CLE1BQU0ya0IsT0FBUyxHQUNmM2tCLEtBQUswTixnQkFBZ0JtWSxPQUFPdG5CLE1BQVEsRUFDcEMsSUFBSyxNQUFPd0UsSUFBS3VCLFNBQVV0RCxPQUFPQyxRQUFRakIsS0FBSzBOLGdCQUFnQlYsUUFDakQsU0FBUmpLLE1BQ0YvQyxLQUFLME4sZ0JBQWdCbVksT0FBT3RuQixPQUFTK0YsT0FBUyxJQUUzQzJHLE1BQU0zRyxRQUFVQSxNQUFRLElBQzNCcWdCLE9BQU81aEIsTUFBTyxHQUlkL0MsS0FBSzBOLGdCQUFnQm1ZLE9BQU9FLFNBRTVCbGhCLE9BQU83RSxLQUFLME4sZ0JBQWdCbVksT0FBT3RuQixTQUNuQ3NHLE9BQU83RSxLQUFLME4sZ0JBQWdCbVksT0FBT3ZoQixTQUVuQ3RFLEtBQUtpbUIsZUFBZ0IsR0FJekIsTUFBTTlhLFdBQWF1USxlQUNqQiw2Q0FDQTFiLE1BRUYsT0FBTyxJQUFJdVQsU0FBUUMsVUFDTCxJQUFJa1IsaUJBQ2QsQ0FDRXZrQixNQUFPSCxLQUFLRyxNQUNadUMsUUFBU3lJLEtBQ1RuTCxLQUNBMmtCLE9BQ0FiLFFBQVMsR0FDVEQsTUFBTyxJQUNEN2pCLEtBQUtrTCxTQUFpQnNJLFNBQVEsR0FDdEJBLFNBQVEsSUFHeEIsQ0FBRXVRLFFBQVMsQ0FBQyxPQUFRLFNBQVUsaUJBRTVCbFMsUUFBTyxPQzlPVixNQUFNcVUsc0JBQ1gsb0JBQ0UzQyxPQUNBNEMsbUJBQ0FDLFVBQVksS0FDWnppQixLQUFPLE1BRVAsTUFBTXdILFdBQWF1USxlQUNqQixxREFDQSxDQUNFMkssVUFBVzlDLE9BQU9ua0IsT0FBUyxFQUMzQm1rQixPQUNBK0MsS0FBTUYsVUFDTnppQixPQUdKLE9BQU8sSUFBSTRQLFNBQVFDLFVBQ2pCLElBQUkrUyxTQUFXLEtBQ0gsSUFBSXRELE9BQU8sQ0FDckI5aUIsTUFBT3dELEtBQ0hqRyxLQUFLZ0osS0FBS1ksT0FBTyx1QkFBd0IsQ0FBRTNELE9BQzNDakcsS0FBS2dKLEtBQUtZLE9BQU8sNEJBQTZCLENBQzVDa2YsZUFBZ0JMLHFCQUV0QnpqQixRQUFTeUksS0FDVDJZLFFBQVMsQ0FDUDVZLFNBQVUsQ0FDUm1DLE1BQU8zUCxLQUFLZ0osS0FBS0MsU0FBUyxpQkFDMUI4ZixTQUFVdGIsT0FDUm9iLFNBQVcsSUFBSUcsU0FDYnZiLEtBQUssR0FBR3BFLGNBQWMsdUJBRWpCeU0sUUFBUStTLGFBSXJCSSxRQUFTLFdBQ1Q5QyxNQUFPLElBQ0VyUSxTQUFRLEtBR2YzQixRQUFPLE9DckNWLE1BQU0rVSxtQkFDWGphLFlBQ0VrYSxpQkFBbUIsS0FDbkJDLGNBQWdCLEtBQ2hCOUssVUFBWSxNQUVaL1UsS0FBSzRmLGlCQUFtQkEsaUJBQ3hCNWYsS0FBSzZmLGNBQWdCQSxjQUNyQjdmLEtBQUsrVSxVQUFZQSxVQUduQix5QkFDRSxNQUFNN1EsV0FBYXVRLGVBQWV6VSxLQUFLc0csU0FBVXRHLE1BTzNDMUgsU0FBVyxDQUNmTyxLQUFNcEMsS0FBS29DLEtBQUsyQyxHQUNoQkMsUUFBU3lJLE1BUUw1TixTQUFXRyxLQUFLSSxTQUFTRixJQUFJLE9BQVEsWUFDdkMsQ0FBQyxTQUFVLGFBQWFxQixTQUFTMUIsWUFDbkNnQyxTQUFTQyxRQUFVRSxZQUFZNFYscUJBQXFCLE9BR3REL1YsU0FBU0UsT0FBUSxFQUVqQixNQUFNcWMsa0JBQW9CcGMsWUFBWWlELE9BQU9wRCxVQUU3QyxPQURBMEgsS0FBSytVLFVBQVlGLFlBQVlyWixHQUN0QnFaLFlBR1QseUJBQ0UsT0FBT3BlLEtBQUtJLFNBQVNGLElBQUksT0FBUSxzQkFHbkMsYUFDRSxPQUFJcUosS0FBSzZmLGNBQ0FDLGdCQUFnQkMsaUJBQWlCL2YsS0FBSzZmLGVBRXhDLEtBR1Qsa0JBQ0UsT0FBSTdmLEtBQUttTyxPQUFlNVQsV0FBVzZCLGdCQUFnQjRELEtBQUttTyxPQUFPN1IsVUFDeEQsS0FHVCxnQkFDRSxPQUFJMEQsS0FBSzRmLGlCQUNBSSxtQkFBbUJELGlCQUFpQi9mLEtBQUs0ZixrQkFFM0MsS0FHVCxxQkFDRSxPQUFJNWYsS0FBS2lnQixVQUNBMWxCLFdBQVc2QixnQkFBZ0I0RCxLQUFLaWdCLFVBQVUzakIsVUFFNUMsS0FHVCxnQkFDRSxHQUFJMEQsS0FBS21PLE9BQ1AsT0FBUW5PLEtBQUttTyxPQUFPM0wsUUFDbEIsSUFBSyxhQUNDeEMsS0FBS2lnQixVQUFVbnBCLEtBQUttSixhQUFlLEdBQ3JDRCxLQUFLa2dCLGFBQWV6cEIsS0FBS2dKLEtBQUtZLE9BQU8sd0JBQXlCLENBQzVEM0QsS0FBTXNELEtBQUtpZ0IsVUFBVXZqQixPQUV2QnNELEtBQUt3QyxPQUFTLG9CQUNkeEMsS0FBS21nQixZQUFhLElBRWxCbmdCLEtBQUtrZ0IsYUFBZXpwQixLQUFLZ0osS0FBS1ksT0FBTyx1QkFBd0IsQ0FDM0QzRCxLQUFNc0QsS0FBS2lnQixVQUFVdmpCLE9BRXZCc0QsS0FBS29nQixPQUFTcGdCLEtBQUtpZ0IsVUFDbkJqZ0IsS0FBS21nQixZQUFhLEdBRXBCbmdCLEtBQUtvZ0IsT0FBU3BnQixLQUFLaWdCLFVBQ25CamdCLEtBQUtxZ0IsVUFBWXJnQixLQUFLaWdCLFVBQVVsWixPQUFPMUksSUFDdkMyQixLQUFLc2dCLFlBQWN0Z0IsS0FBS2lnQixVQUFVbFosT0FBT3JLLEtBQ3pDc0QsS0FBS3VnQixPQUFTdmdCLEtBQUttTyxPQUNuQixNQUVGLElBQUssUUFFRG5PLEtBQUtpZ0IsVUFBVW5wQixLQUFLbUosY0FBZ0IsR0FDcENELEtBQUttTyxPQUFPclgsS0FBS21KLGNBQWdCLEdBRWpDRCxLQUFLa2dCLGFBQWV6cEIsS0FBS2dKLEtBQUtDLFNBQVMsaUJBQ3ZDTSxLQUFLb2dCLE9BQVMsS0FDZHBnQixLQUFLbWdCLFlBQWEsR0FFbEJuZ0IsS0FBS2lnQixVQUFVbnBCLEtBQUttSixhQUFlRCxLQUFLbU8sT0FBT3JYLEtBQUttSixjQUVwREQsS0FBS2tnQixhQUFlenBCLEtBQUtnSixLQUFLWSxPQUFPLHdCQUF5QixDQUM1RDNELEtBQU1zRCxLQUFLaWdCLFVBQVV2akIsT0FFdkJzRCxLQUFLb2dCLE9BQVNwZ0IsS0FBS2lnQixVQUNuQmpnQixLQUFLcWdCLFVBQVlyZ0IsS0FBS2lnQixVQUFVbFosT0FBTzFJLElBQ3ZDMkIsS0FBS3NnQixZQUFjdGdCLEtBQUtpZ0IsVUFBVWxaLE9BQU9ySyxLQUN6Q3NELEtBQUt1Z0IsT0FBU3ZnQixLQUFLbU8sT0FDbkJuTyxLQUFLd0MsT0FBUyxvQkFDZHhDLEtBQUttZ0IsWUFBYSxHQUVsQm5nQixLQUFLaWdCLFVBQVVucEIsS0FBS21KLGNBQWdCRCxLQUFLbU8sT0FBT3JYLEtBQUttSixlQUVyREQsS0FBS2tnQixhQUFlenBCLEtBQUtnSixLQUFLWSxPQUFPLG9CQUFxQixDQUN4RDNELEtBQU1zRCxLQUFLbU8sT0FBT3pSLE9BRXBCc0QsS0FBS29nQixPQUFTcGdCLEtBQUttTyxPQUNuQm5PLEtBQUt1Z0IsT0FBU3ZnQixLQUFLaWdCLFVBQ25CamdCLEtBQUtxZ0IsVUFBWXJnQixLQUFLbU8sT0FBT3ZMLE1BQU03SixLQUFLc0YsSUFDeEMyQixLQUFLc2dCLFlBQWN0Z0IsS0FBS21PLE9BQU92TCxNQUFNbEcsS0FDckNzRCxLQUFLd0MsT0FBUyxRQUNkeEMsS0FBS21nQixZQUFhLEdBR3BCLE1BRUYsSUFBSyxZQUVEbmdCLEtBQUtpZ0IsVUFBVW5wQixLQUFLbUosY0FBZ0IsR0FDcENELEtBQUttTyxPQUFPclgsS0FBS21KLGNBQWdCLEdBRWpDRCxLQUFLa2dCLGFBQWV6cEIsS0FBS2dKLEtBQUtDLFNBQVMsaUJBQ3ZDTSxLQUFLb2dCLE9BQVMsS0FDZHBnQixLQUFLbWdCLFlBQWEsR0FFbEJuZ0IsS0FBS2lnQixVQUFVbnBCLEtBQUttSixjQUFnQkQsS0FBS21PLE9BQU9yWCxLQUFLbUosY0FFckRELEtBQUtrZ0IsYUFBZXpwQixLQUFLZ0osS0FBS1ksT0FBTyx3QkFBeUIsQ0FDNUQzRCxLQUFNc0QsS0FBS2lnQixVQUFVdmpCLE9BRXZCc0QsS0FBS29nQixPQUFTcGdCLEtBQUtpZ0IsVUFDbkJqZ0IsS0FBS3FnQixVQUFZcmdCLEtBQUtpZ0IsVUFBVWxaLE9BQU8xSSxJQUN2QzJCLEtBQUtzZ0IsWUFBY3RnQixLQUFLaWdCLFVBQVVsWixPQUFPckssS0FDekNzRCxLQUFLdWdCLE9BQVN2Z0IsS0FBS21PLE9BQ25Cbk8sS0FBS21nQixZQUFhLEdBRWxCbmdCLEtBQUtpZ0IsVUFBVW5wQixLQUFLbUosY0FBZ0JELEtBQUttTyxPQUFPclgsS0FBS21KLGVBR3JERCxLQUFLa2dCLGFBQWV6cEIsS0FBS2dKLEtBQUtZLE9BQU8sd0JBQXlCLENBQzVEM0QsS0FBTXNELEtBQUttTyxPQUFPelIsT0FFcEJzRCxLQUFLb2dCLE9BQVNwZ0IsS0FBS21PLE9BQ25Cbk8sS0FBS3FnQixVQUFZcmdCLEtBQUttTyxPQUFPcEgsT0FBTzFJLElBQ3BDMkIsS0FBS3NnQixZQUFjdGdCLEtBQUttTyxPQUFPcEgsT0FBT3JLLEtBQ3RDc0QsS0FBS3VnQixPQUFTdmdCLEtBQUtpZ0IsVUFDbkJqZ0IsS0FBS21nQixZQUFhLEdBR3BCLE1BRUYsSUFBSyxXQUVEbmdCLEtBQUtpZ0IsVUFBVW5wQixLQUFLbUosY0FBZ0IsR0FDcENELEtBQUttTyxPQUFPclgsS0FBS21KLGNBQWdCLEdBRWpDRCxLQUFLa2dCLGFBQWV6cEIsS0FBS2dKLEtBQUtDLFNBQVMsaUJBQ3ZDTSxLQUFLb2dCLE9BQVMsS0FDZHBnQixLQUFLbWdCLFlBQWEsR0FFbEJuZ0IsS0FBS2lnQixVQUFVbnBCLEtBQUttSixjQUFnQkQsS0FBS21PLE9BQU9yWCxLQUFLbUosY0FFckRELEtBQUtrZ0IsYUFBZXpwQixLQUFLZ0osS0FBS1ksT0FBTyx3QkFBeUIsQ0FDNUQzRCxLQUFNc0QsS0FBS2lnQixVQUFVdmpCLE9BRXZCc0QsS0FBS29nQixPQUFTcGdCLEtBQUtpZ0IsVUFDbkJqZ0IsS0FBS3FnQixVQUFZcmdCLEtBQUtpZ0IsVUFBVWxaLE9BQU8xSSxJQUN2QzJCLEtBQUtzZ0IsWUFBY3RnQixLQUFLaWdCLFVBQVVsWixPQUFPckssS0FDekNzRCxLQUFLdWdCLE9BQVN2Z0IsS0FBS21PLE9BQ25Cbk8sS0FBS21nQixZQUFhLEdBRWxCbmdCLEtBQUtpZ0IsVUFBVW5wQixLQUFLbUosY0FBZ0JELEtBQUttTyxPQUFPclgsS0FBS21KLGVBRXJERCxLQUFLa2dCLGFBQWV6cEIsS0FBS2dKLEtBQUtZLE9BQU8sdUJBQXdCLENBQzNEM0QsS0FBTXNELEtBQUttTyxPQUFPelIsT0FFcEJzRCxLQUFLb2dCLE9BQVNwZ0IsS0FBS21PLE9BQ25Cbk8sS0FBS3FnQixVQUFZcmdCLEtBQUttTyxPQUFPdkwsTUFBTTdKLEtBQUtzRixJQUN4QzJCLEtBQUtzZ0IsWUFBY3RnQixLQUFLbU8sT0FBT3ZMLE1BQU1sRyxLQUNyQ3NELEtBQUt1Z0IsT0FBU3ZnQixLQUFLaWdCLFVBQ25CamdCLEtBQUttZ0IsWUFBYSxRQVFmbmdCLEtBQUtpZ0IsVUFBVW5wQixLQUFLbUosYUFBZSxHQUM1Q0QsS0FBS2tnQixhQUFlenBCLEtBQUtnSixLQUFLWSxPQUFPLHdCQUF5QixDQUM1RDNELEtBQU1zRCxLQUFLaWdCLFVBQVV2akIsT0FFdkJzRCxLQUFLb2dCLE9BQVNwZ0IsS0FBS2lnQixVQUNuQmpnQixLQUFLbWdCLFlBQWEsSUFFbEJuZ0IsS0FBS2tnQixhQUFlenBCLEtBQUtnSixLQUFLWSxPQUFPLHVCQUF3QixDQUMzRDNELEtBQU1zRCxLQUFLaWdCLFVBQVV2akIsT0FFdkJzRCxLQUFLb2dCLE9BQVNwZ0IsS0FBS2lnQixVQUNuQmpnQixLQUFLbWdCLFlBQWEsR0FHaEJuZ0IsS0FBS29nQixTQUNIcGdCLEtBQUtvZ0IsT0FBT3RwQixLQUFLbUosY0FBZ0JFLFVBQVVGLGFBQWFNLFFBQzFEUCxLQUFLb2dCLE9BQU90cEIsS0FBSzBwQixnQkFBaUIsRUFFbEN4Z0IsS0FBS29nQixPQUFPdHBCLEtBQUswcEIsZ0JBQWlCLEdBSXRDeGdCLEtBQUtzZCxVQUFXLEVBQ2hCLE1BQU1wWixXQUFhdVEsZUFBZXpVLEtBQUtzRyxTQUFVdEcsTUFDakQsR0FBSUEsS0FBSytVLFVBQVcsQ0FDbEIsTUFBTXBhLFFBQVVsRSxLQUFLcWUsU0FBU25lLElBQUlxSixLQUFLK1UsV0FDakMzRyxZQUFjLEdBQ2hCcE8sS0FBS29nQixTQUNIcGdCLEtBQUtvZ0IsT0FBTzVqQixRQUFPNFIsWUFBWTVSLE1BQVF3RCxLQUFLb2dCLE9BQU81akIsTUFBTWlrQixXQUN6RHpnQixLQUFLb2dCLE9BQU8vakIsUUFBTytSLFlBQVkvUixNQUFRMkQsS0FBS29nQixPQUFPL2pCLFFBRXpELE1BQU10QixRQUFVaUYsS0FBS29nQixPQUFTM25CLFlBQVl1QyxXQUFXb1QsYUFBZSxLQUM5RHZWLEtBQ0ptSCxLQUFLb2dCLFFBQVVwZ0IsS0FBS29nQixPQUFPL2pCLE1BQU14RCxLQUM3Qm1ILEtBQUtvZ0IsT0FBTy9qQixNQUFNeEQsS0FDbEJwQyxLQUFLb0MsS0FFWCxJQUFJK0MsSUFDSixPQUFLakIsU0FNSGlCLElBREViLGNBQ1VKLFFBQVF3UCxPQUFPLENBRXpCdFIsS0FBTUEsS0FBSzJDLEdBQ1hULFFBQ0FVLFFBQVN5SSxhQUdDdkosUUFBUXdQLE9BQU8sQ0FDekJ0UixLQUFNQSxLQUFLMkMsR0FDWEMsUUFBU3lJLGFBR1A1RSxHQUFHMFYsS0FBS0MsY0FBY3JaLEtBQUssR0FDMUJBLFVBakJMMEQsR0FBR0MsY0FBY0MsS0FBSywyQ0FxQjVCLGVBQ0UsTUFBTyw0RENyUUosTUFBTXNnQix3QkFBd0J6UyxjQUNuQzNILFlBQWFwSixTQUFVb2tCLGdCQUFrQixLQUFNclcsYUFBYyxHQUMzRHFFLE1BQU1wUyxTQUFVK04sYUFDaEJySyxLQUFLMUQsU0FBV0EsU0FDaEIwRCxLQUFLMmdCLGFBQWUsS0FDcEIzZ0IsS0FBSzBnQixnQkFBa0JBLGdCQUN2QjFnQixLQUFLcUssWUFBY0EsWUFDbkJySyxLQUFLc2QsVUFBVyxFQUVoQnRkLEtBQUs0Z0IsYUFBYyxFQUNuQjVnQixLQUFLNmdCLFdBQVksRUFDakI3Z0IsS0FBSzhnQixhQUFjLEVBQ25COWdCLEtBQUsrZ0IsV0FBWSxFQUNqQi9nQixLQUFLZ2hCLGNBQWUsRUFFcEJoaEIsS0FBSytVLFVBQVksS0FDakIvVSxLQUFLYSxRQUFVLEtBQ2ZiLEtBQUtXLE9BQVMsS0FDZFgsS0FBS2loQixTQUFVLEVBQ2ZqaEIsS0FBS2toQixlQUFnQixFQUNyQmxoQixLQUFLbWhCLGNBQWUsRUFDcEJuaEIsS0FBS29oQixhQUFjLEVBR3JCLHFCQUNFLE9BQ0VwaEIsS0FBS2loQixTQUNMamhCLEtBQUtraEIsZUFDTGxoQixLQUFLbWhCLGNBQ0xuaEIsS0FBS29oQixZQUlULGFBQ0UsT0FBSXBoQixLQUFLaWhCLFFBQWdCLFFBQ3JCamhCLEtBQUtraEIsY0FBc0IsYUFDM0JsaEIsS0FBS21oQixhQUFxQixZQUMxQm5oQixLQUFLb2hCLFlBQW9CLFdBQ3RCLEtBR1QsYUFDRSxPQUFPcGhCLEtBQUszRCxNQUFNdUUsTUFBTWpLLElBQUlxSixLQUFLVyxRQUduQyxZQUNFLE9BQU9YLEtBQUszRCxNQUFNdUUsTUFBTWpLLElBQUlxSixLQUFLYSxTQUduQyxpQkFBa0JrRCxHQUNoQi9ELEtBQUtxaEIsY0FBZ0J0ZCxFQUNyQi9ELEtBQUtrTyxVQUFZbkssRUFHbkIsbUJBU0UsT0FSSy9ELEtBQUtxaEIsaUJBQ0hyaEIsS0FBS3NoQixZQUFjdGhCLEtBQUswZ0Isa0JBQzNCMWdCLEtBQUtzaEIsV0FBYXRCLG1CQUFtQkQsaUJBQ25DL2YsS0FBSzBnQixrQkFHTDFnQixLQUFLc2hCLGFBQVl0aEIsS0FBS3FoQixjQUFnQnJoQixLQUFLc2hCLFdBQVdobEIsV0FFdkQwRCxLQUFLcWhCLGNBTUhyaEIsS0FBS3FoQixlQUxWL2hCLEdBQUdDLGNBQWNzTixNQUNmLG1DQUFtQzdNLEtBQUszRCxNQUFNSyxRQUV6QyxNQUtYLGdCQUNFLElBQUtzRCxLQUFLMmdCLGFBQWMsQ0FDdEIsSUFBSTNnQixLQUFLMGdCLGdCQUtGLE9BQU8sS0FKWjFnQixLQUFLc2hCLFdBQWF0QixtQkFBbUJELGlCQUNuQy9mLEtBQUswZ0IsaUJBRVAxZ0IsS0FBSzJnQixhQUFlM2dCLEtBQUtzaEIsV0FBV2hsQixTQUd4QyxPQUFPL0IsV0FBV2dDLGdCQUFnQnlELEtBQUsyZ0IsY0FHekMscUJBTUUsT0FMSzNnQixLQUFLc2hCLGFBQ1J0aEIsS0FBS3NoQixXQUFhdEIsbUJBQW1CRCxpQkFDbkMvZixLQUFLMGdCLGtCQUdGMWdCLEtBQUtzaEIsV0FHZCxlQUNFLE1BQU8sdURBR1Qsd0JBQXlCdk0sV0FDdkIsTUFBTXBhLFFBQVVsRSxLQUFLcWUsU0FBU25lLElBQUlvZSxXQUNsQyxJQUFLcGEsUUFBUyxPQUFPLEtBQ3JCLE1BQU1pRixLQUFPK1UsRUFBRWhhLFFBQVE1QixLQUFLMEMsU0FBUyxHQUUvQjBTLE9BQVMyUixnQkFBZ0J4SyxZQUFZMVYsS0FBTW1WLFdBR2pELE9BRkE1RyxPQUFPNEcsVUFBWUEsVUFFWjVHLE9BR1Qsd0JBQXlCaFUsTUFBT29uQixlQUFnQixHQUM5QyxNQUFNM2hCLEtBQU96RixNQUFNa2lCLGNBQWMxRyxRQUFRLGlCQUNuQzZMLEtBQU9ybkIsTUFBTWtpQixjQUFjcGpCLFFBQVF1b0IsS0FDbkNDLFVBQVlsbkIsV0FBV21uQixrQkFBa0JGLE1BRy9DLEdBQUtELGNBSUUsQ0FFTCxNQUFNcFQsT0FBUzJSLGdCQUFnQnhLLFlBQVkxVixNQUMzQ3VPLE9BQU93VCxXQUFXSCxNQUNsQnJULE9BQU95VCxzQkFQUGhpQixLQUFLM0csUUFBUXdvQixXQUF5QyxTQUE1QjdoQixLQUFLM0csUUFBUXdvQixXQUN2Q3RuQixNQUFNa2lCLGNBQWMxaUIsVUFBVTZPLE9BQU8sZUFDckNyTyxNQUFNa2lCLGNBQWNwakIsUUFBUTBJLFNBQVcvQixLQUFLM0csUUFBUXdvQixXQVN4REUsV0FBWUUsVUFDVixNQUFNTCxLQUFPSyxTQUFTN3BCLFNBQVMsS0FDM0J1QyxXQUFXbW5CLGtCQUFrQkcsVUFDN0JBLFNBQ0o3aEIsS0FBS3doQixPQUFTeGhCLEtBQUt3aEIsTUFHckIsdUJBQ0UsTUFBTXRkLFdBQWF1USxlQUFlelUsS0FBS3NHLFNBQVV0RyxNQUUzQ29PLFlBQWMsR0FDZDVSLE1BQVFqQyxXQUFXNkIsZ0JBQWdCNEQsS0FBSzFELFVBQzFDRSxNQUFPNFIsWUFBWTVSLE1BQVFBLE1BQU0vQyxTQUNoQzJVLFlBQVkvUixNQUFRMkQsS0FBSzNELE1BRTlCLE1BQU10QixRQUFVdEMsWUFBWXVDLFdBQVdvVCxhQUNuQ3BPLEtBQUszRCxNQUFNK0csVUFBU3JJLFFBQVE0QixNQUFRcUQsS0FBSzNELE1BQU1HLE1BQU1FLE1BRXpELElBQUk3RCxLQUFPcEMsS0FBS29DLEtBQ2hCLFFBQStCLElBQXBCbUgsS0FBSzNELE1BQU14RCxLQUFzQixDQUMxQyxJQUFJaXBCLE9BQVMsR0FDYixNQUFNQyxJQUFNdHJCLEtBQUt1ckIsTUFBTTlwQixRQUFPc0IsR0FBS0EsRUFBRThRLE9BQU03TCxLQUFJakYsR0FBS0EsRUFBRWdDLEtBQ3RELElBQUssTUFBTzNCLEVBQUdDLEtBQU1DLE9BQU9DLFFBQVFnRyxLQUFLM0QsTUFBTXRELEtBQUtrcEIsWUFDbEQsR0FBSW5vQixJQUFNb0IsTUFBTWduQixtQkFBbUJDLE1BQU8sQ0FDeEMsR0FBVSxZQUFOdG9CLEVBQWlCLENBQ25CaW9CLE9BQVNyckIsS0FBS3VyQixNQUFNdmpCLEtBQUlqRixHQUFLQSxFQUFFZ0MsS0FDL0IsTUFDVXVtQixJQUFJL3BCLFNBQVM2QixJQUN2QmlvQixPQUFPL3BCLEtBQUs4QixHQUlsQixJQUFJNEIsUUFBVSxHQUNkLE9BQVFxbUIsT0FBTzNwQixRQUNiLEtBQUssRUFFSCxNQUNGLEtBQUssT0FDc0MsSUFBOUIxQixLQUFLdXJCLE1BQU1yckIsSUFBSW1yQixPQUFPLE1BQy9CanBCLEtBQU9wQyxLQUFLdXJCLE1BQU1yckIsSUFBSW1yQixPQUFPLEtBRS9CLE1BQ0YsUUFDRXJtQixRQUNFLE1BQVFoRixLQUFLZ0osS0FBS0MsU0FBUyx5Q0FDN0JqRSxTQUFvQiw2Q0FDcEIsSUFBSyxNQUFNNUIsS0FBS2lvQixPQUNkcm1CLFFBQ0VBLFFBQ0Esa0JBQ0E1QixFQUNBLEtBQ0FwRCxLQUFLdXJCLE1BQU1yckIsSUFBSWtELEdBQUc2QyxLQUNsQixZQUVKakIsU0FBb0IsNkJBQ2R1Z0IsT0FBT29HLE9BQU8sQ0FDbEJscEIsTUFBT3pDLEtBQUtnSixLQUFLQyxTQUNmLDhDQUVGakUsUUFDQStqQixTQUFVdGIsT0FDUixNQUFNb2IsU0FBVyxJQUFJRyxTQUNuQnZiLEtBQUssR0FBR3BFLGNBQWMsZ0JBRXhCLElBQUssTUFBT3BELEtBQU1XLFNBQVVpaUIsU0FDYixTQUFUNWlCLE9BQ0Y3RCxLQUFPcEMsS0FBS3VyQixNQUFNcnJCLElBQUkwRyxzQkFNRSxJQUFwQjJDLEtBQUszRCxNQUFNeEQsT0FDM0JBLEtBQU9tSCxLQUFLM0QsTUFBTXhELE1BR3BCLE1BQU1QLFNBQVcsQ0FDZk8sS0FBTUEsS0FBSzJDLEdBQ1hULFFBQ0FVLFFBQVN5SSxNQUdQLENBQUMsU0FBVSxhQUFhbE0sU0FBU2dJLEtBQUsxSixZQUN4Q2dDLFNBQVNDLFFBQVVFLFlBQVk0VixxQkFBcUIsT0FHdEQvVixTQUFTRSxPQUFRLEVBRWpCLE1BQU1tQyxjQUFnQmxDLFlBQVlpRCxPQUFPcEQsVUFHekMsT0FEQTBILEtBQUsrVSxVQUFZcGEsUUFBUWEsR0FDbEJiLFFBR1QsdUJBQ0UsTUFBTUEsUUFBVWxFLEtBQUtxZSxTQUFTbmUsSUFBSXFKLEtBQUsrVSxXQUN2QyxJQUFLdGUsS0FBS29DLEtBQUt5UixNQUFRM1AsUUFBUTlCLEtBQUsyQyxLQUFPL0UsS0FBS29DLEtBQUsyQyxHQUluRCxZQUhBOEQsR0FBR0MsY0FBY21KLEtBQ2ZqUyxLQUFLZ0osS0FBS0MsU0FBUyxzQ0FJdkIsTUFBTXdFLFdBQWF1USxlQUFlelUsS0FBS3NHLFNBQVV0RyxNQUUzQ3BFLFVBQVlqQixRQUFRd1AsT0FBTyxDQUFFMU8sUUFBU3lJLE9BRTVDLGFBRE01RSxHQUFHMFYsS0FBS0MsY0FBY3JaLEtBQUssR0FDMUJBLElBR1QsMkJBQ0U2WSxlQUFlelUsS0FBS3NHLFNBQVV0RyxNQUFNckUsTUFBS3VJLE1BQ2hDQSxPQUlYLDRCQUE2QnRFLEtBQU16RixPQUNqQyxNQUFNZ1UsT0FBUzJSLGdCQUFnQnhLLFlBQVkxVixNQUUzQyxPQUFRekYsTUFBTWtpQixjQUFjcGpCLFFBQVF1SixRQUNsQyxJQUFLLFFBQ0gyTCxPQUFPOFMsU0FBVSxFQUNqQjlTLE9BQU8rUyxlQUFnQixFQUN2Qi9TLE9BQU9nVCxjQUFlLEVBQ3RCaFQsT0FBT2lULGFBQWMsRUFDckJqVCxPQUFPdE4sUUFBVTFHLE1BQU1raUIsY0FBY3BqQixRQUFRNEgsUUFDN0NzTixPQUFPeE4sT0FBUyxLQUNoQixNQUVGLElBQUssYUFDSHdOLE9BQU84UyxTQUFVLEVBQ2pCOVMsT0FBTytTLGVBQWdCLEVBQ3ZCL1MsT0FBT2dULGNBQWUsRUFDdEJoVCxPQUFPaVQsYUFBYyxFQUNyQmpULE9BQU90TixRQUFVLEtBQ2pCc04sT0FBT3hOLE9BQVMsS0FDaEIsTUFFRixJQUFLLFlBQ0h3TixPQUFPOFMsU0FBVSxFQUNqQjlTLE9BQU8rUyxlQUFnQixFQUN2Qi9TLE9BQU9nVCxjQUFlLEVBQ3RCaFQsT0FBT2lULGFBQWMsRUFDckJqVCxPQUFPdE4sUUFBVTFHLE1BQU1raUIsY0FBY3BqQixRQUFRNEgsUUFDN0NzTixPQUFPeE4sT0FBU3hHLE1BQU1raUIsY0FBY3BqQixRQUFRb3BCLFNBQzVDLE1BRUYsSUFBSyxXQUNIbFUsT0FBTzhTLFNBQVUsRUFDakI5UyxPQUFPK1MsZUFBZ0IsRUFDdkIvUyxPQUFPZ1QsY0FBZSxFQUN0QmhULE9BQU9pVCxhQUFjLEVBQ3JCalQsT0FBT3ROLFFBQVUxRyxNQUFNa2lCLGNBQWNwakIsUUFBUTRILFFBQzdDc04sT0FBT3hOLE9BQVMsS0FTcEIsT0FGQXdOLE9BQU95VCxpQkFFQXpULE9BR1Qsd0JBQXlCdE4sUUFBVSxLQUFNeWhCLFNBQVUsR0FDakQsTUFBTWpnQixNQUFRLElBQUlsQyxVQXVCbEIsT0FyQkFrQyxNQUFNME0sU0FBVSxFQUNoQjFNLE1BQU1rZ0IsV0FBWSxFQUNsQmxnQixNQUFNSyxtQkFBcUIxQyxLQUFLK1UsVUFDaEMxUyxNQUFNQyxTQUFXLFVBQ2pCRCxNQUFNRSxLQUFPLFNBQ2JGLE1BQU1HLE9BQVN4QyxLQUFLd0MsT0FDcEJILE1BQU1oRyxNQUFRMkQsS0FBSzNELE1BQ25CZ0csTUFBTVEsS0FBTzdDLEtBQUtXLE9BQ2xCMEIsTUFBTU8sTUFBUS9CLFFBQ2R3QixNQUFNTSxXQUFheEMsVUFBVXdFLGdCQUFnQnZFLFFBQzdDaUMsTUFBTWhCLGFBQWUsRUFFakJyQixLQUFLZ2hCLGVBQWMzZSxNQUFNaEIsY0FBZ0IsR0FDekNyQixLQUFLK2dCLFlBQVcxZSxNQUFNaEIsY0FBZ0IsU0FFcENnQixNQUFNdkwsT0FDWmtKLEtBQUtxQyxNQUFRQSxNQUNickMsS0FBSzBkLFFBQVMsRUFDZDFkLEtBQUtzZCxVQUFXLEVBQ1pnRixTQUFTamdCLE1BQU1pRCxZQUVaakQsTUFHVCwrQkFDRXJDLEtBQUswZCxRQUFTLEVBQ2QxZCxLQUFLc2QsVUFBVyxFQUNoQnRkLEtBQUtraEIsZUFBZ0IsRUFDckIsTUFBTXNCLGVBQWlCLElBQUk3QyxtQkFDekIzZixLQUFLMGdCLGdCQUNMMWdCLEtBQUsrVSxXQUdEME4sd0JBQTBCRCxlQUFlRSxtQkFFL0MxaUIsS0FBS3dpQixlQUFpQkMsa0JBQWtCam5CLFNBQ2xDd0UsS0FBSzRoQixpQkFHYix5QkFBMEJ2ZixNQUFRLE1BQ2hDLElBQUtBLFFBQVVyQyxLQUFLcUMsTUFBTyxPQUFPLEtBT2xDLEdBTElBLFFBQU9yQyxLQUFLcUMsTUFBUUEsT0FDeEJyQyxLQUFLbEosS0FBTzZJLFNBQVM0RCxhQUFhdkQsS0FBS3FDLE9BQ3ZDckMsS0FBSzBkLFFBQVMsRUFFZDFkLEtBQUtsSixLQUFLNnJCLFVBQVksR0FDbEIzaUIsS0FBS2xKLEtBQUswSixTQUFVLENBQ3RCUixLQUFLbEosS0FBSzhyQixVQUFZLFlBQ3RCNWlCLEtBQUtsSixLQUFLK3JCLFVBQVlwc0IsS0FBS2dKLEtBQUtDLFNBQVMsd0JBQ3pDLElBQUssSUFBSTZjLE1BQVEsRUFBR0EsTUFBUSxFQUFHQSxRQUM3QnZjLEtBQUtsSixLQUFLNnJCLFVBQVU1cUIsS0FBSyxjQUV0QixHQUFJaUksS0FBS2xKLEtBQUsySixPQUFRLENBQzNCVCxLQUFLbEosS0FBSzhyQixVQUFZLFVBQ3RCNWlCLEtBQUtsSixLQUFLK3JCLFVBQVlwc0IsS0FBS2dKLEtBQUtDLFNBQVMsZUFDekMsSUFBSyxJQUFJNmMsTUFBUSxFQUFHQSxNQUFRLEVBQUdBLFFBQzdCdmMsS0FBS2xKLEtBQUs2ckIsVUFBVTVxQixLQUFLLGVBRXRCLEdBQUlpSSxLQUFLbEosS0FBS2dzQixRQUFTLENBQzVCOWlCLEtBQUtsSixLQUFLOHJCLFVBQVksWUFDbEJ6aUIsVUFBVUYsYUFBYUcsVUFBWUosS0FBS2xKLEtBQUttSixlQUMvQ0QsS0FBS2xKLEtBQUsrckIsVUFBWXBzQixLQUFLZ0osS0FBS0MsU0FBUyx3QkFFdkNTLFVBQVVGLGFBQWFLLE9BQVNOLEtBQUtsSixLQUFLbUosZUFDNUNELEtBQUtsSixLQUFLK3JCLFVBQVlwc0IsS0FBS2dKLEtBQUtDLFNBQVMscUJBRXZDUyxVQUFVRixhQUFhTSxVQUFZUCxLQUFLbEosS0FBS21KLGVBQy9DRCxLQUFLbEosS0FBSytyQixVQUFZcHNCLEtBQUtnSixLQUFLQyxTQUFTLHdCQUUzQyxJQUFLLElBQUk2YyxNQUFRLEVBQUdBLE1BQVF2YyxLQUFLbEosS0FBS21KLGFBQWNzYyxRQUNsRHZjLEtBQUtsSixLQUFLNnJCLFVBQVU1cUIsS0FBSyxhQUczQmlJLEtBQUtsSixLQUFLOHJCLFVBQVksUUFDdEI1aUIsS0FBS2xKLEtBQUsrckIsVUFBWXBzQixLQUFLZ0osS0FBS0MsU0FBUyxnQkFDekNNLEtBQUtsSixLQUFLNnJCLFVBQVU1cUIsS0FBSyxTQUczQixNQUFNeXFCLGVBQWlCLElBQUk3QyxtQkFDekIzZixLQUFLMGdCLGdCQUNMMWdCLEtBQUsrVSxXQUVEME4sd0JBQTBCRCxlQUFlRSxtQkFFL0MxaUIsS0FBS3dpQixlQUFpQkMsa0JBQWtCam5CLFNBQ2xDd0UsS0FBSzRoQixpQkFHYixtQkFBb0JoaUIsS0FBTW1WLFVBQVksTUFDcEMsTUFBTXpZLFNBQVdzRCxLQUFLM0csUUFBUXFELFNBQ3hCb2tCLGdCQUFrQjlnQixLQUFLM0csUUFBUXluQixnQkFDL0JyVyxZQUEyQyxTQUE3QnpLLEtBQUszRyxRQUFRb1IsWUFDM0I4RCxPQUFTLElBQUkyUixnQkFBZ0J4akIsU0FBVW9rQixnQkFBaUJyVyxhQVE5RCxPQU5BOEQsT0FBT3JYLEtBQU82SSxTQUFTMlYsWUFBWTFWLE1BQ25DckYsV0FBV3dGLHFCQUFxQm9PLE9BQVF2TyxNQUVwQ0EsS0FBSytWLFFBQVEsWUFDZnhILE9BQU80RyxVQUFZblYsS0FBSytWLFFBQVEsWUFBWTFjLFFBQVE4YixVQUMvQzVHLE9BQU80RyxVQUFZQSxVQUNuQjVHLE9BR1Q0VSxZQUFhQyxXQUFZQyxnQkFBaUJDLFNBRW5DbGpCLEtBQUszRCxNQUFNOG1CLFVBQVVILGFBQ3hCMWpCLEdBQUdDLGNBQWNzTixNQUNmLEdBQUc3TSxLQUFLM0QsTUFBTUssa0RBR2xCc0QsS0FBS2xKLEtBQUt1RyxNQUFRLEtBQ2xCMkMsS0FBS2xKLEtBQUttSixhQUFlZ2pCLGdCQUN6QmpqQixLQUFLbEosS0FBS3NzQixXQUFZLEVBQ3RCRixRQUFRanFCLFFBQVFvcUIsV0FBWSxFQUU1QixNQUFNQyxVQUFZSixRQUFRcGpCLGNBQWMsY0FDeEN3akIsVUFBVXJxQixRQUFRb0UsTUFBUSxLQUMxQmltQixVQUFVcnFCLFFBQVFnSCxhQUFlZ2pCLGdCQUNqQ0ssVUFBVXJxQixRQUFRbXFCLFdBQVksRUFFOUIsTUFBTUcsYUFBZUwsUUFBUXBqQixjQUFjLG1CQUNyQzBqQixVQUFZTixRQUFRcGpCLGNBQWMsZUFDeEMsT0FBUW1qQixpQkFDTixLQUFLOWlCLFVBQVVGLGFBQWFHLFFBQzFCb2pCLFVBQVU5RyxVQUFZam1CLEtBQUtnSixLQUFLQyxTQUFTLHVCQUN6QzZqQixhQUFhN0csVUFBWWptQixLQUFLZ0osS0FBS1ksT0FDakMsZ0NBQ0EsQ0FDRTJpQixXQUNBL2lCLGFBQWN4SixLQUFLZ0osS0FBS0MsU0FBUyw0QkFHckMsTUFFRixLQUFLUyxVQUFVRixhQUFhSyxLQUMxQmtqQixVQUFVOUcsVUFBWWptQixLQUFLZ0osS0FBS0MsU0FBUyxvQkFDekM2akIsYUFBYTdHLFVBQVlqbUIsS0FBS2dKLEtBQUtZLE9BQ2pDLGdDQUNBLENBQ0UyaUIsV0FDQS9pQixhQUFjeEosS0FBS2dKLEtBQUtDLFNBQVMseUJBR3JDLE1BRUYsS0FBS1MsVUFBVUYsYUFBYU0sUUFDMUJpakIsVUFBVTlHLFVBQVlqbUIsS0FBS2dKLEtBQUtDLFNBQVMsdUJBQ3pDNmpCLGFBQWE3RyxVQUFZam1CLEtBQUtnSixLQUFLWSxPQUNqQyxnQ0FDQSxDQUNFMmlCLFdBQ0EvaUIsYUFBY3hKLEtBQUtnSixLQUFLQyxTQUFTLDRCQUdyQyxNQUVGLEtBQUtTLFVBQVVGLGFBQWFPLFNBQzFCZ2pCLFVBQVU5RyxVQUFZam1CLEtBQUtnSixLQUFLQyxTQUFTLHdCQUN6QzZqQixhQUFhN0csVUFBWWptQixLQUFLZ0osS0FBS1ksT0FDakMsZ0NBQ0EsQ0FDRTJpQixXQUNBL2lCLGFBQWN4SixLQUFLZ0osS0FBS0MsU0FBUyw2QkFTekM4akIsVUFBVTdwQixVQUFVYyxRQUFRLFVBQVcsV0FDdkN5b0IsUUFBUXBqQixjQUFjLGlCQUFpQjZNLFNBQ3ZDdVcsUUFBUXBqQixjQUFjLGlCQUFpQmdNLE1BQU0wUSxRQUFVLE9BQ3ZEaUgsU0FBUzdCLGVBQWVzQixVQ3hkckIsTUFBTVEsbUJBQ1hoZSxZQUFhcEosU0FBVyxLQUFNcUUsT0FBUyxLQUFNMEosYUFBYyxHQUN6RHJLLEtBQUsxRCxTQUFXQSxTQUNoQjBELEtBQUtXLE9BQVNBLE9BQ2RYLEtBQUtxSyxZQUFjQSxZQUNuQnJLLEtBQUtzZCxVQUFXLEVBQ2hCdGQsS0FBSzJqQixPQUFRLEVBQ2IzakIsS0FBSzZnQixXQUFZLEVBQ2pCN2dCLEtBQUs4Z0IsYUFBYyxFQUNuQjlnQixLQUFLK2dCLFdBQVksRUFDakIvZ0IsS0FBS2doQixjQUFlLEVBQ3BCaGhCLEtBQUsrVSxVQUFZLEtBQ2pCL1UsS0FBSzRqQixXQUFhLEtBQ2xCNWpCLEtBQUswZCxRQUFTLEVBQ2QxZCxLQUFLNmpCLFlBQWEsRUFDbEI3akIsS0FBSzhqQixlQUFnQixFQUNyQjlqQixLQUFLK2pCLE9BQVEsRUFDYi9qQixLQUFLZ2tCLFVBQVcsRUFDaEJoa0IsS0FBS21ELFNBQVcsS0FDaEJuRCxLQUFLaWtCLE9BQVEsRUFDYmprQixLQUFLa2tCLGtCQUFvQixFQUN6QmxrQixLQUFLbWtCLFNBQVcsR0FDaEIsSUFBSyxNQUFNcnNCLElBQUssSUFBSXJCLEtBQUtvQyxLQUFLMlUsU0FBVSxDQUN0QyxNQUFNVyxPQUFTLElBQUlpVyxnQkFBZ0IsR0FBR3RzQixFQUFFMkUsTUFBTWpCLE1BQU0xRCxFQUFFMEQsTUFDdEQyUyxPQUFPM1IsTUFBUTFFLEVBQ2ZrSSxLQUFLbWtCLFNBQVNwc0IsS0FBS29XLFFBRXJCLEdBQUluTyxLQUFLbWtCLFNBQVNoc0IsT0FBUTZILEtBQUtta0IsU0FBUyxHQUFHdnRCLFFBQVMsTUFDL0MsQ0FDSCxNQUFNdVgsT0FBUyxJQUFJaVcsZ0JBQ25CalcsT0FBT3ZYLFFBQVMsRUFDaEJvSixLQUFLbWtCLFNBQVNwc0IsS0FBS29XLFFBRXJCLEdBQUk3UixTQUFVLENBQ1osTUFBTUQsTUFBUTlCLFdBQVdnQyxnQkFBZ0JELFVBR3pDLEdBRkEwRCxLQUFLeEQsTUFBUWpDLFdBQVc2QixnQkFBZ0JFLFVBQ3BDMEQsS0FBS3hELFFBQU93RCxLQUFLbUQsU0FBVzlHLE1BQU04RyxVQUNsQ3hDLE9BQVEsQ0FDS3RFLE1BQU11RSxNQUFNakssSUFBSWdLLFVBRXpCWCxLQUFLK0csT0FBTzhjLFdBQVk3akIsS0FBSzZqQixZQUFhLEVBQ3JDN2pCLEtBQUsrRyxPQUFPaE8sS0FBS0EsS0FBS3NyQixXQUFXMU0sT0FBTTNYLEtBQUtna0IsVUFBVyxLQUl0RSxHQUFJaGtCLEtBQUttRCxTQUNQLElBQUssTUFBTXJMLEtBQUtrSSxLQUFLbWtCLFNBQ25CLEdBQUlyc0IsRUFBRTBFLE9BQVN3RCxLQUFLeEQsTUFBTyxDQUN6QjFFLEVBQUU0RyxTQUFXbkUsV0FBVytwQixZQUFZeHNCLEVBQUUwRSxNQUFPd0QsS0FBS3hELE9BQ2xEMUUsRUFBRXlzQixnQkFBa0J0dEIsS0FBS3V0QixNQUF5QixJQUFuQjFzQixFQUFFNEcsU0FBU3JCLE9BQWUsSUFDekR2RixFQUFFMnNCLGFBQWUzc0IsRUFBRTRHLFNBQVNySCxLQUM1QixNQUFNcXRCLFNBQ0p6dEIsS0FBS3V0QixNQUF1QyxJQUFqQ2pxQixXQUFXb3FCLFFBQVE3c0IsRUFBRTRHLFdBQW1CLElBRXJELEdBQUlzQixLQUFLM0QsTUFBTyxDQUNkdkUsRUFBRThzQixpQkFBa0IsRUFHaEJGLFVBREYxa0IsS0FBSzNELE1BQU10RCxLQUFLQSxLQUFLME4sZ0JBQWdCOFAsSUFBSWxaLE1BQVEsS0FDdEJ2RixFQUFFOHNCLGlCQUFrQixHQUUvQzVrQixLQUFLK0csUUFDSC9HLEtBQUsrRyxPQUFPOGQsWUFDZC9zQixFQUFFK3NCLFdBQVksRUFDZC9zQixFQUFFZ3RCLFdBQVksRUFDZGh0QixFQUFFaXRCLGNBQWUsRUFDakJqdEIsRUFBRWt0QixZQUFhLEVBQ1hobEIsS0FBSytHLE9BQU9oTyxLQUFLQSxLQUFLc3JCLFdBQVc5TSxTQUMvQm1OLFVBQVkxa0IsS0FBSytHLE9BQU84ZCxZQUFXL3NCLEVBQUUrc0IsV0FBWSxHQUVuREgsU0FBVzFrQixLQUFLK0csT0FBTzhkLFdBQ3ZCSCxVQUFZMWtCLEtBQUsrRyxPQUFPK2QsWUFFeEJodEIsRUFBRWd0QixXQUFZLEdBR2RKLFNBQVcxa0IsS0FBSytHLE9BQU8rZCxXQUN2QkosVUFBWTFrQixLQUFLK0csT0FBT2dlLGVBRXhCanRCLEVBQUVpdEIsY0FBZSxHQUVmTCxTQUFXMWtCLEtBQUsrRyxPQUFPZ2UsZUFBY2p0QixFQUFFa3RCLFlBQWEsS0FFcEROLFVBQVkxa0IsS0FBSytHLE9BQU84ZCxZQUFXL3NCLEVBQUUrc0IsV0FBWSxHQUVuREgsU0FBVzFrQixLQUFLK0csT0FBTzhkLFdBQ3ZCSCxVQUFvQyxFQUF4QjFrQixLQUFLK0csT0FBTzhkLFlBRXhCL3NCLEVBQUVndEIsV0FBWSxHQUdkSixTQUFtQyxFQUF4QjFrQixLQUFLK0csT0FBTzhkLFdBQ3ZCSCxVQUFvQyxFQUF4QjFrQixLQUFLK0csT0FBTzhkLFlBRXhCL3NCLEVBQUVpdEIsY0FBZSxHQUVmTCxTQUFtQyxFQUF4QjFrQixLQUFLK0csT0FBTzhkLFlBQWUvc0IsRUFBRWt0QixZQUFhLElBR3ZEbHRCLEVBQUUrc0IsV0FBYS9zQixFQUFFZ3RCLFdBQWFodEIsRUFBRWl0QixjQUFnQmp0QixFQUFFa3RCLGFBRXBEbHRCLEVBQUUrc0IsV0FBWSxTQUtmL3NCLEVBQUUrc0IsV0FBWSxFQUszQix5QkFDRSxPQUFPcHVCLEtBQUtJLFNBQVNGLElBQUksT0FBUSxzQkFHbkMsZUFDRSxNQUFNMEgsSUFBTTlELFdBQVcwVCxtQkFBbUJqTyxLQUFLMUQsVUFDL0MsT0FBSStCLEtBQ0cscUNBR1QsWUFDRSxPQUFPOUQsV0FBV2dDLGdCQUFnQnlELEtBQUsxRCxVQUd6QyxXQUNFLE9BQU8wRCxLQUFLM0QsTUFBTXVFLE1BQU1qSyxJQUFJcUosS0FBS1csUUFHbkMsYUFDRSxPQUFPWCxLQUFLNkMsS0FHZCxjQUVFLE9BREs3QyxLQUFLbWtCLFdBQVVua0IsS0FBS21rQixTQUFXLElBQzdCbmtCLEtBQUtta0IsU0FHZCxhQUNFLE9BQUlua0IsS0FBS3dOLFNBQVd4TixLQUFLd04sUUFBUXJWLE9BQWU2SCxLQUFLd04sUUFBUU0sTUFDdEQsS0FHVCxhQUNFLE9BQU85TixLQUFLM0QsTUFBTTJSLGdCQUFnQmhPLEtBQUtXLFFBR3pDLHNCQUNFLE9BQU9YLEtBQUszRCxNQUFNdUUsTUFBTWpLLElBQUlxSixLQUFLK0csT0FBT2hPLEtBQUtBLEtBQUs2SixNQUFNcWlCLEtBQUt6cEIsSUFHL0Qsc0JBQ0UsT0FBSXdFLEtBQUsrRyxPQUFPaE8sS0FBS0EsS0FBSzZKLE1BQU1zaUIsV0FBVzFwQixHQUNsQ3dFLEtBQUszRCxNQUFNdUUsTUFBTWpLLElBQUlxSixLQUFLK0csT0FBT2hPLEtBQUtBLEtBQUs2SixNQUFNc2lCLFdBQVcxcEIsSUFFOUR3RSxLQUFLbWxCLGdCQUdkLGVBQ0UsT0FBT25sQixLQUFLK2pCLE9BQVMvakIsS0FBS2drQixTQUc1QixrQkFDRSxPQUFPaGtCLEtBQUtna0IsVUFBWWhrQixLQUFLOGpCLGNBRy9CLGFBSUUsWUFISXplLElBQWNyRixLQUFLb2xCLFVBQ3JCcGxCLEtBQUtvbEIsUUFBVXBsQixLQUFLM0QsTUFBTWdwQixhQUFhLFdBRWxDcmxCLEtBQUtvbEIsUUFHZCxtQkFDRSxPQUFLcGxCLEtBQUtta0IsU0FBU2hzQixPQUNaNkgsS0FBS21rQixTQUFTbmUsTUFBS2xPLEdBQUtBLEVBQUVsQixTQURDLEtBSXBDLFlBRUUsWUFESXlPLElBQWNyRixLQUFLc2xCLFNBQVF0bEIsS0FBS3NsQixPQUFTLElBQ3RDdGxCLEtBQUtzbEIsT0FHZCxzQkFDRSxPQUFPdGxCLEtBQUt1bEIsTUFBTXB0QixPQUFTLEVBRzdCLGlDQUNFLE9BQU82SCxLQUFLd2xCLGlCQUdkLFdBQVlDLEdBQ1Z6bEIsS0FBS29sQixRQUFVSyxFQUdqQixvQkFDRSxJQUFJQyxRQUFTLEVBQ2IsSUFBSyxNQUFNN2hCLEtBQUs3RCxLQUFLNEQsTUFDbkI4aEIsT0FBU0EsUUFBVTdoQixFQUFFcVgsVUFFdkIsT0FBT3dLLE9BR1QscUJBQ0UsTUFBTUMsS0FBTyxHQUNiLElBQUssSUFBSXBKLE1BQVEsRUFBR0EsTUFBUXZjLEtBQUs0RCxNQUFNekwsT0FBUW9rQixRQUM3QyxHQUFJdmMsS0FBSzRELE1BQU0yWSxPQUFPckIsVUFBVyxDQUMvQixNQUFNMEssSUFBTSxDQUNWOXVCLEtBQU1rSixLQUFLNEQsTUFBTTJZLE9BQ2pCc0osS0FBTTdsQixLQUFLdWxCLE1BQU1oSixRQUVuQm9KLEtBQUs1dEIsS0FBSzZ0QixLQUdkLE9BQW9CLElBQWhCRCxLQUFLeHRCLE9BQXFCd3RCLEtBQ2xCLEtBR2QsZ0JBQ0UsT0FBTzNsQixLQUFLdWxCLE1BQVF2bEIsS0FBS3VsQixNQUFNcHRCLE9BQVMsRUFHMUMsZ0JBQ0UsT0FBTzZILEtBQUsrRyxPQUFPK2UsZ0JBR3JCLGVBQ0UsT0FBSTlsQixLQUFLZ2tCLFNBQWlCLElBR25CaGtCLEtBQUsrRyxPQUFPaE8sS0FBS0EsS0FBS2d0QixhQUFhOXRCLElBQ3RDaUksU0FBU0YsS0FBSytHLE9BQU9oTyxLQUFLQSxLQUFLZ3RCLGFBQWE5dEIsS0FDNUMsRUFHTixpQkFDRSxPQUFPeEIsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGlCQUduQyx5QkFDRSxPQUFPRixLQUFLSSxTQUFTRixJQUFJLE9BQVEsd0JBR25DLGdCQUNFLE9BQUlxSixLQUFLZ21CLFlBQ0xobUIsS0FBS2trQixtQkFBcUJsa0IsS0FBSytHLE9BQU8rZSxnQkFJNUMsaUJBQ0UsT0FBSTlsQixLQUFLaW1CLHVCQUNMam1CLEtBQUt1bEIsT0FBY3ZsQixLQUFLdWxCLE1BQU1wdEIsUUFBVTZILEtBQUtrbUIsVUFJbkQsaUJBQ0UsSUFBS2xtQixLQUFLK0csT0FBT2hPLEtBQUtBLEtBQUtzckIsV0FBVzFNLEtBQU0sT0FBTyxFQUNuRCxHQUFJM1gsS0FBS21tQixZQUFhLE9BQU9ubUIsS0FBS21tQixZQUNsQyxNQUFNQyxLQUFPbnZCLEtBQUs2UyxNQUFNOUosS0FBS3FtQixnQkFBZ0JocEIsTUFBUSxJQUNyRCxPQUFPK29CLEtBQU8sRUFBSSxFQUFJQSxLQUd4QixlQUFnQnJpQixHQUNWQSxHQUFLOU0sS0FBSzZTLE1BQU05SixLQUFLcW1CLGdCQUFnQmhwQixNQUFRLElBQy9DMkMsS0FBS21tQixZQUFjbHZCLEtBQUs2UyxNQUFNOUosS0FBS3FtQixnQkFBZ0JocEIsTUFBUSxJQUNsRDBHLEdBQUssSUFDZC9ELEtBQUttbUIsWUFBYyxHQUVyQm5tQixLQUFLbW1CLFlBQWNqbUIsU0FBUzZELEdBRzlCLHNCQUNFLE9BQXdCLElBQXBCL0QsS0FBS3NtQixXQUlYLHNCQUtFLE9BSEVydkIsS0FBSzZTLE1BQU05SixLQUFLcW1CLGdCQUFnQmhwQixNQUFRLElBQU0sRUFDMUMsRUFDQXBHLEtBQUs2UyxNQUFNOUosS0FBS3FtQixnQkFBZ0JocEIsTUFBUSxPQUM5QjJDLEtBQUtzbUIsV0FJdkJDLGlCQUFrQnpxQixLQUNoQixPQUFPa0UsS0FBS21rQixTQUFTbmUsTUFBS2xPLEdBQUtnRSxNQUFRaEUsRUFBRXdFLFdBRzNDa3FCLHdCQUNFLElBQUssTUFBTTF1QixLQUFLa0ksS0FBS3dOLFFBQ25CMVYsRUFBRTB0QixlQUFpQnhsQixLQUFLd2xCLGVBQWUxdEIsR0FJM0MwdEIsZUFBZ0IxdEIsRUFBSSxNQUNsQixNQUFNcVcsT0FBU3JXLEdBQUtrSSxLQUFLeW1CLGFBQ3pCLElBQUk5aUIsT0FBUzNELEtBQUsrRyxPQUFPaE8sS0FBS0EsS0FBSzJ0QixNQUFNQyxPQUFPaGpCLE9BQzVDM0QsS0FBSytHLE9BQU9oTyxLQUFLQSxLQUFLc3JCLFdBQVc5TSxVQUMvQnpmLEVBQUVndEIsWUFBV25oQixPQUFTM0QsS0FBSytHLE9BQU9oTyxLQUFLQSxLQUFLMnRCLE1BQU1FLEtBQUtqakIsUUFDdkQ3TCxFQUFFaXRCLGVBQWNwaEIsT0FBUzNELEtBQUsrRyxPQUFPaE8sS0FBS0EsS0FBSzJ0QixNQUFNbm1CLFFBQVFvRCxTQUVuRSxJQUNJaEIsV0FEQXNDLFNBQVdrSixPQUFPbEosU0FHakJ0QyxXQURMM0MsS0FBSytHLE9BQU9oTyxLQUFLQSxLQUFLc3JCLFdBQVc5TSxRQUNmLEVBQ0FwSixPQUFPeEwsV0FDekIsSUFBSWtrQixlQUFpQixHQU9yQixHQU5JN21CLEtBQUs4bUIsUUFBbUMsSUFBekI5bUIsS0FBSyttQixpQkFBdUI5aEIsV0FDM0NqRixLQUFLK2dCLFdBQVc5YixXQUNoQmpGLEtBQUtnaEIsY0FBYy9iLFdBQ25CakYsS0FBS2duQixRQUFRL2hCLFdBQ2JqRixLQUFLOGpCLGdCQUFrQjlqQixLQUFLZ2tCLFVBQVUvZSxXQUN0Q2pGLEtBQUtna0IsV0FBVS9lLFVBQVlqRixLQUFLK21CLGdCQUFrQixHQUNsRDloQixVQUFZLEVBQUcsQ0FFakJ0QyxZQURlMUwsS0FBS0MsSUFBSStOLFNBQVcsR0FFL0J0QyxXQUFheEMsVUFBVXdFLGdCQUFnQm5FLFdBQ3pDbUMsV0FBYXhDLFVBQVV3RSxnQkFBZ0JzaUIsWUFFekNoaUIsVUFBWSxFQWlCZCxPQWRJOUUsVUFBVXdFLGdCQUFnQnZFLFVBQVl1QyxhQUN4Q2trQixlQUFpQixXQUVmMW1CLFVBQVV3RSxnQkFBZ0JyRSxPQUFTcUMsYUFBWWtrQixlQUFpQixRQUNoRTFtQixVQUFVd0UsZ0JBQWdCcEUsVUFBWW9DLGFBQ3hDa2tCLGVBQWlCLFdBRWYxbUIsVUFBVXdFLGdCQUFnQm5FLFdBQWFtQyxhQUN6Q2trQixlQUFpQixZQUVmMW1CLFVBQVV3RSxnQkFBZ0JzaUIsYUFBZXRrQixhQUMzQ2trQixlQUFpQixjQUdaLENBQ0xLLE1BQU92a0IsV0FDUGpHLEtBQU1tcUIsZUFDTjVoQixTQUNBdEIsT0FDQXNqQixXQUFZdGtCLGFBQWV4QyxVQUFVd0UsZ0JBQWdCc2lCLFlBUXpERSx5QkFDRW5uQixLQUFLd21CLHdCQUNMLE1BQU1YLEtBQU8sQ0FDWDFYLE9BQVFuTyxLQUFLeW1CLGFBQ2IxQixhQUFjL2tCLEtBQUt5bUIsYUFBYTFCLGFBQ2hDem9CLFNBQVUwRCxLQUFLeW1CLGFBQWFucUIsU0FDNUI4cUIsVUFBV3BuQixLQUFLeW1CLGFBQWEvcEIsS0FDN0JpRyxXQUFZM0MsS0FBS3ltQixhQUFhakIsZUFBZTBCLE1BQzdDamlCLFNBQVVqRixLQUFLeW1CLGFBQWFqQixlQUFldmdCLFNBQzNDdEIsT0FBUTNELEtBQUt5bUIsYUFBYWpCLGVBQWU3aEIsT0FDekMwakIsWUFBYSxFQUNiQyxlQUFnQixFQUNoQkMsbUJBQW9CLEVBQ3BCQyxTQUFTLEdBR1gsSUFBSUMsV0FBYXpuQixLQUFLMG5CLFVBQVkxbkIsS0FBS2trQixrQkFFdkMsR0FBSWxrQixLQUFLZ2tCLFNBQVUsQ0FDakIsR0FBSWhrQixLQUFLK21CLGdCQUFrQixFQUFHLENBQzVCLE1BQU1ZLGFBQWUzbkIsS0FBS3VsQixNQUFNdmxCLEtBQUsrbUIsZ0JBQWtCLEdBQ3ZELEdBQUlZLGFBQWFyckIsV0FBYTBELEtBQUt5bUIsYUFBYW5xQixTQUFVLENBQ3hELE1BQU1vQyxTQUFXbkUsV0FBVytwQixZQUMxQi9wQixXQUFXNkIsZ0JBQWdCdXJCLGFBQWFyckIsVUFDeEMvQixXQUFXNkIsZ0JBQWdCNEQsS0FBS3ltQixhQUFhbnFCLFdBRS9DdXBCLEtBQUt5QixlQUFpQnJ3QixLQUFLNlMsTUFBTXZQLFdBQVdvcUIsUUFBUWptQixXQUNoRG1uQixLQUFLeUIsZ0JBQWtCRyxhQUFlem5CLEtBQUtnbUIsYUFDN0NILEtBQUt5QixlQUFpQkcsV0FDdEJBLFdBQWEsR0FFZnpuQixLQUFLa2tCLGtCQUNIaGtCLFNBQVNGLEtBQUtra0IsbUJBQXFCMkIsS0FBS3lCLGVBQzFDekIsS0FBSzJCLFNBQVUsR0FHbkIzQixLQUFLd0IsWUFBY3JuQixLQUFLc21CLFdBQ3BCVCxLQUFLd0IsYUFBZSxJQUFHeEIsS0FBS3dCLFlBQWMsR0FDMUN4QixLQUFLd0IsYUFBZUksYUFBZXpuQixLQUFLZ21CLGFBQzFDSCxLQUFLd0IsWUFBY0ksV0FDbkJBLFdBQWEsR0FHZjVCLEtBQUswQixtQkFBcUIxQixLQUFLd0IsWUFBY3hCLEtBQUt5QixlQUVoRHRuQixLQUFLK2pCLFFBQ1A4QixLQUFLd0IsWUFBY25uQixTQUFTRixLQUFLK0csT0FBT2hPLEtBQUtBLEtBQUtndEIsYUFBYWhDLE9BQzNEN2pCLFNBQVNGLEtBQUsrRyxPQUFPaE8sS0FBS0EsS0FBS2d0QixhQUFhaEMsT0FDNUMsRUFDQThCLEtBQUt3QixhQUFlSSxhQUFlem5CLEtBQUtnbUIsYUFDMUNILEtBQUt3QixZQUFjSSxXQUNuQkEsV0FBYSxJQUlqQnpuQixLQUFLa2tCLGtCQUFvQmhrQixTQUFTRixLQUFLa2tCLG1CQUFxQjJCLEtBQUt3QixZQUU3RHJuQixLQUFLOG1CLFNBQ1A5bUIsS0FBSzhtQixRQUFTLEVBQ2Q5bUIsS0FBS2lrQixPQUFRLEdBR2Zqa0IsS0FBS3VsQixNQUFNeHRCLEtBQUs4dEIsTUFHbEIsZUFDRSxNQUFPLDBEQUdULHVCQUNFN2xCLEtBQUt3bUIsd0JBQ0wsTUFBTXRpQixXQUFhdVEsZUFBZXpVLEtBQUtzRyxTQUFVdEcsTUFLM0NvTyxZQUFjLEdBQ2Q1UixNQUFRakMsV0FBVzZCLGdCQUFnQjRELEtBQUsxRCxVQUMxQ0UsTUFBTzRSLFlBQVk1UixNQUFRQSxNQUFNL0MsU0FDaEMyVSxZQUFZL1IsTUFBUTJELEtBQUszRCxNQUU5QixNQUFNdEIsUUFBVXRDLFlBQVl1QyxXQUFXb1QsYUFJakM5VixTQUFXLENBQ2ZPLE1BRldtSCxLQUFLM0QsTUFBTXhELEtBQU9tSCxLQUFLM0QsTUFBTXhELEtBQU9wQyxLQUFLb0MsTUFFekMyQyxHQUNYVCxRQUNBVSxRQUFTeUksTUFHTDVOLFNBQVdHLEtBQUtJLFNBQVNGLElBQUksT0FBUSxZQUN2QyxDQUFDLFNBQVUsYUFBYXFCLFNBQVMxQixZQUNuQ2dDLFNBQVNDLFFBQVVFLFlBQVk0VixxQkFBcUIsT0FHdEQvVixTQUFTRSxPQUFRLEVBSWpCLGFBRjBCQyxZQUFZaUQsT0FBT3BELFVBSy9DLHVCQUNFMEgsS0FBS3dtQix3QkFDTCxNQUFNdGlCLFdBQWF1USxlQUFlelUsS0FBS3NHLFNBQVV0RyxNQUUzQ3JGLFFBQVVsRSxLQUFLcWUsU0FBU25lLElBQUlxSixLQUFLK1UsV0FFakNuWixVQUFZakIsUUFBUXdQLE9BQU8sQ0FBRTFPLFFBQVN5SSxPQUU1QyxhQURNNUUsR0FBRzBWLEtBQUtDLGNBQWNyWixLQUFLLEdBQzFCQSxJQUdUK2xCLFdBQVlFLFVBQ1YsTUFBTUwsS0FBT0ssU0FBUzdwQixTQUFTLEtBQzNCdUMsV0FBV21uQixrQkFBa0JHLFVBQzdCQSxTQUVPLGVBQVRMLE1BQ1Msa0JBQVRBLE1BQ1MsYUFBVEEsTUFFQXhoQixLQUFLNmpCLFlBQWEsRUFDbEI3akIsS0FBSzhqQixlQUFnQixFQUNyQjlqQixLQUFLZ2tCLFVBQVcsRUFDSCxhQUFUeEMsT0FBcUJ4aEIsS0FBSytqQixPQUFRLEdBQ3RDL2pCLEtBQUt3aEIsT0FBUSxHQUNLLFVBQVRBLE1BQ1R4aEIsS0FBS2drQixVQUFXLEVBQ1hoa0IsS0FBSzZqQixZQUFlN2pCLEtBQUs4akIsZ0JBQWU5akIsS0FBSzZqQixZQUFhLEdBQy9EN2pCLEtBQUsrakIsT0FBUy9qQixLQUFLK2pCLE9BRW5CL2pCLEtBQUt3aEIsT0FBU3hoQixLQUFLd2hCLE1BSXZCLG9CQUVFLEdBREF4aEIsS0FBSzRELE1BQVEsR0FDVDVELEtBQUs0bkIsWUFBYSxDQUNwQixJQUFJQyxtQkFBb0IsRUFDcEJ0TCxNQUFRLEVBQ1osTUFBUXNMLG1CQUFxQjduQixLQUFLdWxCLE1BQU1wdEIsT0FBU29rQixPQUFPLENBQ3RELE1BQU16bEIsV0FBYWtKLEtBQUs4bkIsY0FBYzluQixLQUFLdWxCLE1BQU1oSixRQUM3Q3psQixLQUFLWSxNQUFNWixZQUNQVixTQUFTMGMsZUFBZWhjLEtBQUtZLEtBQUtaLFlBRXBDa0osS0FBSytHLE9BQU9naEIsYUFDaEI3bkIsU0FBU0YsS0FBS3VsQixNQUFNaEosT0FBTzhLLGFBQ3pCbm5CLFNBQVNGLEtBQUt1bEIsTUFBTWhKLE9BQU8rSyxpQkFFM0J4d0IsS0FBS2t4QixpQkFDUGx4QixLQUFLb2tCLFdBQVksRUFDakIyTSxtQkFBb0IsR0FFdEJ0TCxRQUNBdmMsS0FBSzRELE1BQU03TCxLQUFLakIsV0FFYixDQUNMLE1BQU1BLFdBQWFrSixLQUFLOG5CLGdCQUNwQmh4QixLQUFLWSxNQUFNWixZQUNQVixTQUFTMGMsZUFBZWhjLEtBQUtZLEtBQUtaLE1BRTFDLElBQUlteEIsWUFBY2pvQixLQUFLK2pCLE1BQ25CN2pCLFNBQVNGLEtBQUsrRyxPQUFPaE8sS0FBS0EsS0FBS2d0QixhQUFhaEMsT0FDNUMsRUFDQWtFLGFBQWVqb0IsS0FBSzBuQixZQUFXTyxZQUFjam9CLEtBQUswbkIsV0FDdEQsTUFBTTdCLEtBQU8sQ0FDWDFYLE9BQVFuTyxLQUFLeW1CLGFBQ2IxQixhQUFjL2tCLEtBQUt5bUIsYUFBYTFCLGFBQ2hDem9CLFNBQVUwRCxLQUFLeW1CLGFBQWFucUIsU0FDNUI4cUIsVUFBV3BuQixLQUFLeW1CLGFBQWEvcEIsS0FDN0JpRyxXQUFZM0MsS0FBS3ltQixhQUFhakIsZUFBZTBCLE1BQzdDamlCLFNBQVVqRixLQUFLeW1CLGFBQWFqQixlQUFldmdCLFNBQzNDdEIsT0FBUTNELEtBQUt5bUIsYUFBYWpCLGVBQWU3aEIsT0FDekMwakIsWUFBYVksWUFDYlgsZUFBZ0IsRUFDaEJFLFNBQVMsU0FFTHhuQixLQUFLK0csT0FBT2doQixhQUFhRSxhQUUzQm54QixLQUFLa3hCLGlCQUNQbHhCLEtBQUtva0IsV0FBWSxHQUVuQmxiLEtBQUt1bEIsTUFBTXh0QixLQUFLOHRCLE1BQ2hCN2xCLEtBQUs0RCxNQUFNN0wsS0FBS2pCLE1BRWxCa0osS0FBS3NkLFVBQVcsRUFDaEJ0ZCxLQUFLMGQsUUFBUyxRQUVSMWQsS0FBSzRoQixpQkFHYixvQkFBcUJpRSxLQUFPLE1BQzFCLE1BQU0xWCxPQUFTMFgsS0FDWDdsQixLQUFLdW1CLGlCQUFpQlYsS0FBS3ZwQixVQUMzQjBELEtBQUt5bUIsYUFDSHBrQixNQUFRLElBQUlsQyxVQTJCbEIsT0ExQkFrQyxNQUFNL0YsU0FBVzBELEtBQUsxRCxTQUN0QitGLE1BQU1oRyxNQUFRMkQsS0FBSzFELFNBQ25CK0YsTUFBTVEsS0FBTzdDLEtBQUtXLE9BRWxCMEIsTUFBTTBNLFNBQVUsRUFDaEIxTSxNQUFNa2dCLFdBQVksRUFDZHZpQixLQUFLa29CLFNBQVU3bEIsTUFBTU8sTUFBUTVDLEtBQUtxbUIsZ0JBQ2pDaGtCLE1BQU1PLE1BQVE1QyxLQUFLbWxCLGdCQUNwQm5sQixLQUFLNG5CLGFBQ1B2bEIsTUFBTU0sV0FBYWtqQixLQUFLbGpCLFdBQ3hCTixNQUFNaEIsYUFBZXdrQixLQUFLNWdCLFdBRTFCakYsS0FBS3dtQix3QkFDTHhtQixLQUFLa2tCLGtCQUFvQmhrQixTQUFTRixLQUFLa2tCLG1CQUFxQixFQUN4RGxrQixLQUFLOG1CLFNBQ1A5bUIsS0FBSzhtQixRQUFTLEVBQ2Q5bUIsS0FBS2lrQixPQUFRLEdBRWY1aEIsTUFBTU0sV0FBYTNDLEtBQUt5bUIsYUFBYWpCLGVBQWUwQixNQUNwRDdrQixNQUFNaEIsYUFBZXJCLEtBQUt5bUIsYUFBYWpCLGVBQWV2Z0IsVUFHeEQ1QyxNQUFNOGxCLFFBQVUsR0FBRzF4QixLQUFLZ0osS0FBS0MsU0FBUyxtQkFBbUJ5TyxPQUFPelIsT0FDaEUyRixNQUFNNkwsVUFBWUMsT0FBTzdSLGVBRW5CK0YsTUFBTXZMLE9BQ0x1TCxNQUdULHdCQUF5QjBTLFdBQ3ZCLE1BQU1wYSxRQUFVbEUsS0FBS3FlLFNBQVNuZSxJQUFJb2UsV0FDbEMsSUFBS3BhLFFBQVMsT0FBTyxLQUNyQixNQUFNaUYsS0FBTytVLEVBQUVoYSxRQUFRNUIsS0FBSzBDLFNBQVMsR0FFL0J3a0IsVUFBWXlELG1CQUFtQnBPLFlBQVkxVixLQUFNbVYsV0FHdkQsT0FGQWtMLFVBQVVsTCxVQUFZQSxVQUVma0wsVUFHVG1JLGlCQUFrQnJrQixHQUNoQi9ELEtBQUtzbUIsV0FBYXRtQixLQUFLc21CLFdBQWF2aUIsRUFDcEMvRCxLQUFLNGhCLGlCQUdQLHdCQUF5QnpuQixNQUFPb25CLGVBQWdCLEdBQzlDLE1BQU0zaEIsS0FBT3pGLE1BQU1raUIsY0FBYzFHLFFBQVEsb0JBQ25DNkwsS0FBT3JuQixNQUFNa2lCLGNBQWNwakIsUUFBUXVvQixLQUNuQ0MsVUFBWWxuQixXQUFXbW5CLGtCQUFrQkYsTUFHL0MsR0FBS0QsY0FJRSxDQUVMLE1BQU10QixVQUFZeUQsbUJBQW1CcE8sWUFBWTFWLE1BQ2pELEdBQUl6RixNQUFNa2lCLGNBQWMxaUIsVUFBVTRqQixTQUFTLGVBQWdCLENBQ3pELE1BQU1wUCxPQUFTaFUsTUFBTWtpQixjQUFjMUcsUUFBUSxXQUNyQzdaLElBQU1vRSxTQUFTaU8sT0FBT2xWLFFBQVFpVixXQUNwQytSLFVBQVV6UyxRQUFRMVIsS0FBSzZsQixXQUFXRixnQkFDN0J4QixVQUFVMEIsV0FBV0YsV0FDNUJ4QixVQUFVMkIsc0JBWFZoaUIsS0FBSzNHLFFBQVF3b0IsV0FBeUMsU0FBNUI3aEIsS0FBSzNHLFFBQVF3b0IsV0FDdkN0bkIsTUFBTWtpQixjQUFjMWlCLFVBQVU2TyxPQUFPLGVBQ3JDck8sTUFBTWtpQixjQUFjcGpCLFFBQVEwSSxTQUFXL0IsS0FBSzNHLFFBQVF3b0IsV0FheEQ0RyxTQUFVQyxXQUNSLE1BQU14eEIsS0FBT2tKLEtBQUs0RCxNQUFNMGtCLFdBQ2xCdEYsV0FBYTlpQixTQUFTcEosS0FBS29MLFlBQzVCbEMsS0FBSzNELE1BQU04bUIsVUFBVUgsYUFNMUJsc0IsS0FBS21KLGFBQWVuSixLQUFLNkwsV0FDekI3TCxLQUFLb2tCLFdBQVksRUFDakJwa0IsS0FBS3NzQixXQUFZLEVBQ2pCcGpCLEtBQUs0aEIsa0JBUkh0aUIsR0FBR0MsY0FBY3NOLE1BQ2YsR0FBRzdNLEtBQUszRCxNQUFNSyxvREFVcEJxbUIsWUFBYXVGLFVBQVdDLGNBRXRCLE1BQU16eEIsS0FBT2tKLEtBQUs0RCxNQUFNMGtCLFdBQ2xCRSxpQkFBbUIxeEIsS0FBS2lMLGdCQUFnQndtQixjQUN4Q3ZGLFdBQWE5aUIsU0FBU3NvQixpQkFBaUJ4RixZQUM3QyxJQUFLaGpCLEtBQUszRCxNQUFNOG1CLFVBQVVILFlBSXhCLFlBSEExakIsR0FBR0MsY0FBY3NOLE1BQ2YsR0FBRzdNLEtBQUszRCxNQUFNSyxvREFJbEIsTUFBTXVtQixnQkFBa0IvaUIsU0FBU3NvQixpQkFBaUJ2RixpQkFDbERuc0IsS0FBS21KLGFBQWVnakIsZ0JBQ2hCbnNCLEtBQUs2TCxZQUFjc2dCLGtCQUFpQm5zQixLQUFLb2tCLFdBQVksR0FDekRwa0IsS0FBS3NzQixXQUFZLEVBQ2pCcGpCLEtBQUs0aEIsaUJBR1AsbUJBQW9CaGlCLEtBQU1tVixVQUFZLE1BQ3BDLE1BQU0wVCxlQUFpQixJQUFJL0UsbUJBQzNCK0UsZUFBZXRFLFNBQVcsR0FDdEJwUCxVQUFXMFQsZUFBZTFULFVBQVlBLFVBQ2pDblYsS0FBSytWLFFBQVEsY0FDcEI4UyxlQUFlMVQsVUFBWW5WLEtBQUsrVixRQUFRLFlBQVkxYyxRQUFROGIsV0FHOUR4YSxXQUFXd0YscUJBQXFCMG9CLGVBQWdCN29CLE1BQ2hELE1BQU04b0IsWUFBYzlvQixLQUFLNkIsaUJBQWlCLFdBQzFDLElBQUssTUFBTTNKLEtBQUs0d0IsWUFBYSxDQUMzQixNQUFNdmEsT0FBU2lXLGdCQUFnQi9JLGVBQWV2akIsR0FDOUMyd0IsZUFBZWpiLFFBQVF6VixLQUFLb1csUUFHOUIsTUFBTXdhLFVBQVkvb0IsS0FBSzZCLGlCQUFpQixTQUN4QyxHQUFJa25CLFVBQ0YsSUFBSyxNQUFNcnJCLEtBQUtxckIsVUFBVyxDQUN6QixNQUFNOUMsS0FBTyxHQUNidHJCLFdBQVd3RixxQkFBcUI4bEIsS0FBTXZvQixHQUN0Q21yQixlQUFlbEQsTUFBTXh0QixLQUFLOHRCLE1BVzlCNEMsZUFBZTdrQixNQUFRLEdBQ3ZCLE1BQU1BLE1BQVFoRSxLQUFLNkIsaUJBQWlCLGdCQUNwQyxJQUFLLE1BQU1vQyxLQUFLRCxNQUFPLENBQ3JCLE1BQU05TSxLQUFPNkksU0FBUzBiLGVBQWV4WCxHQUNyQzRrQixlQUFlN2tCLE1BQU03TCxLQUFLakIsTUFHNUIyeEIsZUFBZTlrQixPQUFTLEdBQ3hCLE1BQU1pbEIsWUFBY2hwQixLQUFLNkIsaUJBQWlCLG1CQUMxQyxJQUFLLE1BQU1vbkIsTUFBTUQsWUFBYSxDQUM1QixNQUFNRSxXQUFhcmxCLFdBQVc0WCxlQUFld04sSUFDN0NKLGVBQWU5a0IsT0FBTzVMLEtBQUsrd0IsWUFHN0IsT0FBT0wsZUFHVCxtQkFDRXpvQixLQUFLMkQsT0FBUyxHQUNkLE1BQU1naUIsS0FBTzNsQixLQUFLK29CLGVBUWxCLElBQUssSUFBSTliLEVBQUksRUFBR0EsRUFBSTBZLEtBQUt4dEIsT0FBUThVLElBQUssQ0FDcEMsTUFBTStiLEVBQUlyRCxLQUFLMVksR0FDVHFaLFdBQWFwbUIsU0FBUzhvQixFQUFFbkQsS0FBS3dCLGFBQzdCdUIsWUFBYyxHQUVwQixJQUFJSyxjQUFnQnZpQixPQUFPc2lCLEVBQUVuRCxLQUFLbGlCLFFBQzdCc2xCLGVBQW1DLEtBQWxCQSxnQkFBc0JBLGNBQWdCLEtBQzVELE1BQU1DLFVBQVl6bEIsV0FBVzBsQixXQUFXRixlQUNsQ0csVUFBWSxJQUFJcnlCLEtBQUtreUIsZUFBZXBaLFNBQVMsQ0FDakRDLFVBQVUsSUFDVHhZLE1BQ0creEIsc0JBQXdCcnBCLEtBQUsrRyxPQUFPdWlCLE9BQ3RDLEdBQUdMLG1CQUFtQkcsWUFDdEIsR0FBR0EsWUFDREcsa0JBQW9COWxCLFdBQVcwbEIsV0FBV0UsdUJBRWhELElBQUlHLGNBQWdCLEVBQ2hCQyxnQkFBa0IsRUFDbEJqcEIsVUFBVyxHQUNYUixLQUFLZ2tCLFVBQVloa0IsS0FBSytqQixTQUN4QjBGLGdCQUFrQnh5QixLQUFLNlMsTUFBTXdjLFdBQWEsSUFFcEIsSUFBcEJtRCxrQkFBdUJBLGdCQUFrQixHQUN6Q1QsRUFBRWx5QixLQUFLbUosY0FBZ0JFLFVBQVV3RSxnQkFBZ0JwRSxVQUNuRGlwQixjQUFnQkMsZ0JBQ2hCQSxnQkFBa0JuRCxXQUFha0QsY0FDL0JocEIsVUFBVyxFQUVUTCxVQUFVd0UsZ0JBQWdCbkUsV0FBYXdvQixFQUFFbHlCLEtBQUttSixlQUM3Q0UsVUFBVXdFLGdCQUFnQnBFLFNBQVd5b0IsRUFBRWx5QixLQUFLNkwsWUFDM0NxbUIsRUFBRW5ELEtBQUtkLGdCQUVUMEUsZ0JBQWtCbkQsV0FDbEJrRCxjQUFnQixFQUNoQmhwQixVQUFXLElBSWYsSUFBSWxKLE1BQVEsRUFDWixJQUFLLElBQUlpbEIsTUFBUSxFQUFHQSxNQUFRa04sZ0JBQWlCbE4sUUFBUyxDQUNwRCxNQUFNemxCLEtBQU8sSUFBSUMsS0FBS2t5QixxQkFFaEJueUIsS0FBSytZLFNBQVMsQ0FBRTFZLE9BQU8sVUFDdkJmLFNBQVMwYyxlQUFlaGMsTUFFOUI4eEIsWUFBWTd3QixLQUFLLENBQ2ZvQixRQUFTOHZCLGNBQ1QzeEIsTUFBT1IsS0FBS1EsTUFDWm9LLElBQUt3bkIsVUFDTDFvQixVQUFVLElBRVpsSixPQUFTUixLQUFLUSxNQUVoQixJQUFLLElBQUlpbEIsTUFBUSxFQUFHQSxNQUFRaU4sY0FBZWpOLFFBQVMsQ0FDbEQsTUFBTXpsQixLQUFPLElBQUlDLEtBQUtzeUIsNkJBRWhCdnlCLEtBQUsrWSxTQUFTLENBQUUxWSxPQUFPLFVBQ3ZCZixTQUFTMGMsZUFBZWhjLE1BRTlCOHhCLFlBQVk3d0IsS0FBSyxDQUNmb0IsUUFBU2t3QixzQkFDVC94QixNQUFPUixLQUFLUSxNQUNab0ssSUFBSzZuQixrQkFDTC9vQixVQUFVLElBRVpsSixPQUFTUixLQUFLUSxNQUdoQixJQUFJb3lCLFdBQWEsUUFDYnZiLE9BQVM1VCxXQUFXNkIsZ0JBQWdCNHNCLEVBQUVseUIsS0FBS29YLFdBQzFDQyxTQUFRQSxPQUFTNVQsV0FBV2dDLGdCQUFnQnlzQixFQUFFbHlCLEtBQUtvWCxZQUNwREMsU0FBUXViLFdBQWF2YixPQUFPelIsTUFFaENzRCxLQUFLMkQsT0FBTzVMLEtBQUssQ0FDZm1XLFVBQVc4YSxFQUFFbHlCLEtBQUtvWCxVQUNsQndiLFdBQ0E5bEIsTUFBT2dsQixZQUNQdHhCLE1BQ0FrSixTQUNBbXBCLE9BQU8sRUFDUHpKLGFBQWN6cEIsS0FBS2dKLEtBQUtZLE9BQU8seUJBQTBCLENBQ3ZEM0QsS0FBTWd0QixXQUNOcHlCLFVBS04wSSxLQUFLNHBCLGFBQXNDLElBQXZCNXBCLEtBQUsyRCxPQUFPeEwsT0FDaEM2SCxLQUFLNGhCLGlCQUdQLG1CQUNFLElBQUssSUFBSWlJLE9BQVMsRUFBR0EsT0FBUzdwQixLQUFLMkQsT0FBT3hMLE9BQVEweEIsU0FBVSxDQUMxRCxNQUFNeHRCLE1BQVE5QixXQUFXZ0MsZ0JBQWdCeUQsS0FBSzJELE9BQU9rbUIsUUFBUTNiLFdBQzdELEdBQWMsT0FBVjdSLE1BQ0ZpRCxHQUFHQyxjQUFjc04sTUFBTXBXLEtBQUtnSixLQUFLQyxTQUFTLDhCQUNyQyxDQUNMTSxLQUFLMkQsT0FBT2ttQixRQUFRQyxXQUFhLEVBQ2pDOXBCLEtBQUsyRCxPQUFPa21CLFFBQVFFLGNBQWdCLEVBQ3BDLElBQ0UsSUFBSUMsT0FBUyxFQUNiQSxPQUFTaHFCLEtBQUsyRCxPQUFPa21CLFFBQVFqbUIsTUFBTXpMLE9BQ25DNnhCLFNBQ0EsQ0FDQSxNQUFNQyxrQkFBb0I1dEIsTUFBTTZ0QixXQUM5QmxxQixLQUFLMkQsT0FBT2ttQixRQUFRam1CLE1BQU1vbUIsUUFBUTF5QixPQUVwQzBJLEtBQUsyRCxPQUFPa21CLFFBQVFDLFlBQWNHLFlBQ2xDanFCLEtBQUsyRCxPQUFPa21CLFFBQVFqbUIsTUFBTW9tQixRQUFRRyxNQUFRRixZQUMxQ2pxQixLQUFLMkQsT0FBT2ttQixRQUFRam1CLE1BQU1vbUIsUUFBUUksU0FDaENwcUIsS0FBSzJELE9BQU9rbUIsUUFBUWptQixNQUFNb21CLFFBQVExeUIsTUFBUTJ5QixZQUM1Q2pxQixLQUFLMkQsT0FBT2ttQixRQUFRRSxlQUNsQi9wQixLQUFLMkQsT0FBT2ttQixRQUFRam1CLE1BQU1vbUIsUUFBUTF5QixNQUFRMnlCLFlBRTlDanFCLEtBQUsyRCxPQUFPa21CLFFBQVFGLE9BQVEsRUFDNUIzcEIsS0FBSzJELE9BQU9rbUIsUUFBUTNKLGFBQWV6cEIsS0FBS2dKLEtBQUtZLE9BQzNDLDhCQUNBLENBQ0UzRCxLQUFNc0QsS0FBSzJELE9BQU9rbUIsUUFBUUgsV0FDMUJweUIsTUFBTzBJLEtBQUsyRCxPQUFPa21CLFFBQVFDLFdBQzNCTyxNQUFPcnFCLEtBQUsyRCxPQUFPa21CLFFBQVFFLGlCQUtuQy9wQixLQUFLc3FCLGFBQWMsRUFDbkJ0cUIsS0FBSzRoQixrQkFJRixNQUFNd0MsZ0JBQ1gxZSxZQUFhcEosU0FBVyxNQUN0QjBELEtBQUsxRCxTQUFXQSxTQUNoQjBELEtBQUsyakIsT0FBUSxFQUNiM2pCLEtBQUs0a0IsaUJBQWtCLEVBQ3ZCNWtCLEtBQUs2a0IsV0FBWSxFQUNqQjdrQixLQUFLOGtCLFdBQVksRUFDakI5a0IsS0FBSytrQixjQUFlLEVBQ3BCL2tCLEtBQUt1cUIsU0FBVSxFQUdqQixVQUtFLFlBSklsbEIsSUFBY3JGLEtBQUt3cUIsT0FDakJ4cUIsS0FBSzNELE9BQVMyRCxLQUFLM0QsTUFBTW91QixNQUFPenFCLEtBQUt3cUIsS0FBT3hxQixLQUFLM0QsTUFBTW91QixPQUFTLEVBQy9EenFCLEtBQUt3cUIsTUFBTyxHQUVaeHFCLEtBQUt3cUIsS0FHZCxRQUFTL0UsR0FDUHpsQixLQUFLd3FCLEtBQU8vRSxFQUdkLFlBS0UsWUFKSXBnQixJQUFjckYsS0FBSzBxQixTQUNqQjFxQixLQUFLM0QsT0FBUzJELEtBQUszRCxNQUFNb3VCLE1BQU96cUIsS0FBSzBxQixPQUFTMXFCLEtBQUszRCxNQUFNb3VCLFFBQVUsRUFDbEV6cUIsS0FBSzBxQixRQUFTLEdBRWQxcUIsS0FBSzBxQixPQUdkLFVBQVdqRixHQUNUemxCLEtBQUswcUIsT0FBU2pGLEVBR2hCLGFBQ0UsT0FBUXpsQixLQUFLMnFCLE1BQVEzcUIsS0FBSzRxQixNQUc1QixXQUFZbkYsR0FDVnpsQixLQUFLd3FCLE1BQU8sRUFDWnhxQixLQUFLMHFCLFFBQVMsRUFHaEIsYUFDRSxTQUFJMXFCLEtBQUszRCxRQUFTMkQsS0FBSzNELE1BQU13dUIsTUFBWTdxQixLQUFLM0QsTUFBTXd1QixLQUFPLEVBSTdELFdBTUUsWUFMSXhsQixJQUFjckYsS0FBSzhxQixRQUdyQjlxQixLQUFLOHFCLE9BQVEsR0FFUjlxQixLQUFLOHFCLE1BR2QsU0FBVXJGLEdBQ1J6bEIsS0FBSzhxQixNQUFRckYsRUFHZixZQUlFLE9BSEl6bEIsS0FBSzFELFdBQWEwRCxLQUFLK3FCLFNBQ3pCL3FCLEtBQUsrcUIsT0FBU3h3QixXQUFXZ0MsZ0JBQWdCeUQsS0FBSzFELFdBRXpDMEQsS0FBSytxQixPQUdkLFdBQ0UsT0FBSS9xQixLQUFLeEQsTUFBY3dELEtBQUt4RCxNQUFNRSxLQUM5QnNELEtBQUszRCxNQUFjMkQsS0FBSzNELE1BQU1LLEtBQzNCLFFBR1QsVUFDRSxPQUFJc0QsS0FBS3hELE1BQWN3RCxLQUFLeEQsTUFBTXpELEtBQUtzRixJQUNuQzJCLEtBQUszRCxNQUFjMkQsS0FBSzNELE1BQU10RCxLQUFLc0YsSUFDaEMscUNBR1QsWUFJRSxPQUhLMkIsS0FBS2dyQixRQUFVaHJCLEtBQUsxRCxXQUN2QjBELEtBQUtnckIsT0FBU3p3QixXQUFXNkIsZ0JBQWdCNEQsS0FBSzFELFdBRXpDMEQsS0FBS2dyQixPQUdkLGVBQ0UsT0FBSWhyQixLQUFLMnFCLElBQ0FsMEIsS0FBS2dKLEtBQUtDLFNBQVMsdUNBRXhCTSxLQUFLNHFCLE1BQ0FuMEIsS0FBS2dKLEtBQUtDLFNBQVMseUNBRXJCakosS0FBS2dKLEtBQUtDLFNBQVMsMENBRzVCLGdCQUNFLE9BQUlNLEtBQUsycUIsSUFBWWwwQixLQUFLZ0osS0FBS0MsU0FBUyxrQ0FDcENNLEtBQUs0cUIsTUFBY24wQixLQUFLZ0osS0FBS0MsU0FBUywrQkFDbkNqSixLQUFLZ0osS0FBS0MsU0FBUyxxQ0FHNUIsaUJBQ0UsT0FBSU0sS0FBSzZrQixXQUFhN2tCLEtBQUs0a0IsZ0JBQ2xCemtCLFVBQVV3RSxnQkFBZ0J2RSxRQUUvQkosS0FBSzhrQixVQUFrQjNrQixVQUFVd0UsZ0JBQWdCckUsS0FDakROLEtBQUsra0IsYUFBcUI1a0IsVUFBVXdFLGdCQUFnQnBFLFFBQ2pESixVQUFVd0UsZ0JBQWdCc2lCLFdBR25DLGVBQ0UsSUFBSWhpQixTQUFXLEVBUWYsT0FQSWpGLEtBQUsyakIsT0FBTzFlLFdBQ1pqRixLQUFLNGtCLGlCQUFpQjNmLFdBQ3RCakYsS0FBS2lyQixNQUFNaG1CLFdBQ1hqRixLQUFLNHFCLE9BQU8zbEIsV0FDWmpGLEtBQUsycUIsS0FBSzFsQixXQUNWakYsS0FBS3VxQixTQUFTdGxCLFdBQ2RqRixLQUFLNmdCLFdBQVc1YixXQUNiQSxTQUdULFVBQVduTixHQUNUa0ksS0FBS2dyQixPQUFTbHpCLEVBR2hCLHNCQUF1QitFLFNBQ3JCLE1BQU1zUixPQUFTLElBQUlpVyxnQkFFbkIsT0FEQTdwQixXQUFXd0YscUJBQXFCb08sT0FBUXRSLFNBQ2pDc1IsT0FHVCw2QkFBOEJoVSxPQUM1QixJQUFLQSxNQUFNa2lCLGNBQWMxaUIsVUFBVTRqQixTQUFTLG1CQUFvQixPQUFPLEtBSXZFLE9BSHVCcGpCLE1BQU1raUIsY0FDRTFHLFFBQVEsWUFDWmxVLGlCQUFpQixXQUk5QytCLGdCQUFpQjNHLFNBQ2Z0QyxXQUFXMkMsc0JBQXNCOEMsS0FBTW5ELFNBR3pDOGtCLFdBQVlILE1BRUMsY0FBVEEsTUFDUyxjQUFUQSxNQUNTLGlCQUFUQSxNQUNTLG9CQUFUQSxNQUVBeGhCLEtBQUs0a0IsaUJBQWtCLEVBQ3ZCNWtCLEtBQUs2a0IsV0FBWSxFQUNqQjdrQixLQUFLOGtCLFdBQVksRUFDakI5a0IsS0FBSytrQixjQUFlLEVBQ3BCL2tCLEtBQUtnbEIsWUFBYSxFQUNsQmhsQixLQUFLd2hCLE9BQVEsR0FDSyxTQUFUQSxLQUNMeGhCLEtBQUs0cUIsT0FDUDVxQixLQUFLNHFCLE9BQVEsRUFDYjVxQixLQUFLMnFCLEtBQU0sR0FDRjNxQixLQUFLMnFCLEtBQ2QzcUIsS0FBSzRxQixPQUFRLEVBQ2I1cUIsS0FBSzJxQixLQUFNLEdBQ04zcUIsS0FBSzRxQixPQUFRLEVBQ2Y1cUIsS0FBS3doQixPQUFTeGhCLEtBQUt3aEIsTUFDYixTQUFUQSxNQUFtQnhoQixLQUFLaXJCLE9BQVNqckIsS0FBS2tyQixRQUN4QzVyQixHQUFHQyxjQUFjQyxLQUNmL0ksS0FBS2dKLEtBQUtZLE9BQU8sa0NBQW1DLENBQ2xEd3FCLElBQUs3cUIsS0FBSzNELE1BQU13dUIsUUNqL0JuQixNQUFNTSxvQkFDWHpsQixZQUFhOUssUUFBVSxJQUNyQm9GLEtBQUtvckIsU0FBV3h3QixRQUdsQixjQUNFLE9BQU95d0IsWUFBWXJyQixLQUFLMEYsWUFBWTRsQixlQUFnQnRyQixLQUFLb3JCLFVBRzNELGVBQ0UsT0FBT3ByQixLQUFLcEYsUUFBUTBMLFNBR3RCLGlCQUNFLE9BQU90RyxLQUFLcEYsUUFBUWtpQixRQUd0QixnQkFBaUJ5TyxrQkFBb0IsSUFDbkMsTUFBTXJuQixXQUFhdVEsZUFBZXpVLEtBQUtzRyxTQUFVdEcsTUFDM0MwVSxnQkFBa0JDLEVBQUV6USxNQUFNLEdBQ2hDd1EsZ0JBQWdCemIsUUFBUTJELE9BQVN4RCxPQUFPNEcsS0FBS3dyQixZQUM3QzlXLGdCQUFnQnpiLFFBQVF3eUIsVUFBWXpyQixLQUFLMEYsWUFBWWhKLEtBQ3JEZ1ksZ0JBQWdCL2EsVUFBVUMsT0FBT29HLEtBQUswckIsWUFFdEMsTUFBTXB6QixTQUFXK3lCLFlBQ2YsQ0FDRXh5QixLQUFNcEMsS0FBS29DLEtBQUsyQyxHQUNoQlYsT0FBUXJFLEtBQUtnSixLQUFLQyxTQUFTTSxLQUFLcEYsUUFBUTFCLE9BQ3hDdUMsUUFBU2laLGdCQUFnQkosV0FFM0JpWCxtQkFHRSxDQUFDLFNBQVUsYUFBYXZ6QixTQUFTZ0ksS0FBSzFKLFlBQ3hDZ0MsU0FBU0MsUUFBVUUsWUFBWTRWLHFCQUFxQixPQUVoQyxjQUFsQnJPLEtBQUsxSixXQUEwQmdDLFNBQVNFLE9BQVEsR0FFcERDLFlBQVlpRCxPQUFPcEQsVUFBVXFELE1BQUtDLEtBQ3pCQSxNQUlYLHFCQUFzQmhCLFFBQVUsSUFFOUIsR0FESUEsUUFBUSt3QixTQUFTM3JCLEtBQUsyckIsVUFDckIzckIsS0FBSytVLFVBRUgsQ0FDTCxNQUFNN1EsV0FBYXVRLGVBQWV6VSxLQUFLc0csU0FBVXRHLE1BQzNDMFUsZ0JBQWtCQyxFQUFFQyxVQUFVMVEsTUFBTSxHQUcxQ3dRLGdCQUFnQnpiLFFBQVEyRCxPQUFTeEQsT0FBTzRHLEtBQUt3ckIsWUFDN0M5VyxnQkFBZ0J6YixRQUFRd3lCLFVBQVl6ckIsS0FBSzBGLFlBQVloSixLQUNyRGdZLGdCQUFnQi9hLFVBQVVDLE9BQU9vRyxLQUFLMHJCLFlBR3RDLE1BQU03VyxZQUFjcGUsS0FBS3FlLFNBQVNuZSxJQUFJcUosS0FBSytVLFdBQ3ZDL1UsS0FBSzRyQixjQUFjL1csWUFBWWdYLFFBQVEsT0FBUSxRQUFTLFlBRTVELE1BQU1qd0IsVUFBWWlaLFlBQVkxSyxPQUFPLENBQ25DMU8sUUFBU2laLGdCQUFnQkosWUFHM0IsYUFETWhWLEdBQUcwVixLQUFLQyxjQUFjclosS0FBSyxHQUMxQkEsSUFsQlBvRSxLQUFLc0YsWUFzQlQyVyxrQkFBbUIvWCxNQUNqQkEsS0FBS3laLEdBQ0gsUUFDQSxxQ0FDQTNkLEtBQUs4ckIsVUFBVXRULEtBQUt4WSxPQUV0QmtFLEtBQUt5WixHQUFHLFFBQVMsK0JBQWdDM2QsS0FBSzhyQixVQUFVdFQsS0FBS3hZLE9BQ3JFa0UsS0FBS3laLEdBQUcsUUFBUyw0QkFBNkIzZCxLQUFLNmQsVUFBVXJGLEtBQUt4WSxPQUNsRWtFLEtBQUt5WixHQUFHLFdBQVksUUFBUzNkLEtBQUs2ZCxVQUFVckYsS0FBS3hZLE9BQ2pEa0UsS0FBS3laLEdBQUcsUUFBUywyQkFBNEIzZCxLQUFLa2UsVUFBVTFGLEtBQUt4WSxPQUNqRWtFLEtBQUt5WixHQUFHLFVBQVcsT0FBUTNkLEtBQUsrckIsT0FBT3ZULEtBQUt4WSxPQUc5QywyQkFBNEJrRSxNQUMxQixNQUNNd1EsZ0JBRHFCeFEsS0FBSyxHQUNXcEUsY0FBYyxjQUN6RCxJQUFLNFUsZ0JBQWlCLE9BQ3RCLElBQ0czYSxPQUFPaXlCLG9CQUFvQnYxQixLQUFLdzFCLEtBQUtDLE9BQU9sMEIsU0FDM0MwYyxnQkFBZ0J6YixRQUFRd3lCLFdBRzFCLE9BRUYsTUFBTTdyQixXQUFhdXJCLG9CQUFvQmdCLG9CQUFvQnpYLGlCQUNyRDBYLFVBQVlyeUIsT0FBTzJiLE9BQ3ZCLElBQUlqZixLQUFLdzFCLEtBQUtDLE1BQU14WCxnQkFBZ0J6YixRQUFRd3lCLFdBQzVDN3JCLE1BRUZ3c0IsVUFBVUMsZUFDVkQsVUFBVW5RLGtCQUFrQi9YLE1BTzlCbW9CLGdCQU9Bbk8sVUFBVy9qQixPQUNULE1BRU1xSSxPQUZTckksTUFBTWtpQixjQUVDcGpCLFFBQVF1SixPQUMxQnhDLEtBQUt3QyxTQUFTeEMsS0FBS3dDLFFBQVEsQ0FBRXJJLE1BQWNnUSxRQUFRLElBUXpENGhCLE9BQVE1eEIsT0FFTixNQURrQixVQUFkQSxNQUFNMkIsS0FBaUJrRSxLQUFLNmQsVUFBVTFqQixPQUNyQixVQUFkQSxNQUFNMkIsSUFHZitoQixVQUFXMWpCLE9BQ1RBLE1BQU15TSxpQkFFTixNQUNNaEgsS0FEU3pGLE1BQU1raUIsY0FDRDFHLFFBQVEscUJBQzVCLElBQUsvVixLQUFNLE9BQ0tJLEtBQUtzc0IsUUFBUTFzQixPQUNoQkksS0FBSzRoQixpQkFHcEIwSyxRQUFTMXNCLE1BQ1AsTUFBTTJzQixNQUFRM3NCLEtBQUs2QixpQkFBaUIsUUFDcEMsSUFBSStxQixTQUFVLEVBQ2QsSUFBSyxJQUFJdmYsRUFBSSxFQUFHQSxFQUFJc2YsTUFBTXAwQixPQUFROFUsSUFBSyxDQUNyQyxNQUFNd2YsS0FBT0YsTUFBTXRmLEdBRW5CLElBQUlsVSxLQURPLElBQUkyekIsaUJBQWlCRCxNQUNsQkUsV0FDZDV6QixLQUFPNnpCLFdBQVc1c0IsS0FBTTZzQixhQUFhOXpCLE9BQ3JDLElBQUssTUFBTytDLElBQUt1QixTQUFVdEQsT0FBT0MsUUFBUWpCLE1BQ3hDaUgsS0FBS2xFLEtBQU91QixNQUNabXZCLFNBQVUsRUFHZCxPQUFPQSxRQUdULGNBQ0UsT0FBSXhzQixLQUFLOHNCLFNBQWlCOXNCLEtBQUs4c0IsU0FDM0I5c0IsS0FBSytzQixXQUFtQnQyQixLQUFLa0UsUUFBUWhFLElBQUlxSixLQUFLK3NCLGlCQUFsRCxFQUlGLFlBQWFocEIsR0FDWC9ELEtBQUs4c0IsU0FBVy9vQixFQUdsQixnQkFDRSxPQUFJL0QsS0FBSytzQixXQUFtQi9zQixLQUFLK3NCLFdBQzdCL3NCLEtBQUs4c0IsU0FBaUI5c0IsS0FBSzhzQixTQUFTdHhCLFFBQXhDLEVBSUYsY0FBZXVJLEdBQ2IvRCxLQUFLK3NCLFdBQWFocEIsRUFHcEIsNEJBQ0UsTUFBTyxDQUNMK1ksUUFBUyxDQUFDLG9CQUNWa1EsUUFBUyxDQUFDLFNBQVUsU0FBVSxRQUFTLFdBQVksYUFDbkRDLGlCQUFrQixNQUl0QixXQUNFLE9BQU81ekIsS0FBSzRSLE1BQU1qTCxLQUFLd3JCLFlBR3pCLGlCQUNFLE9BQU9ueUIsS0FBS0MsVUFBVTBHLE1BQU0sQ0FBQ2xFLElBQUt1QixTQUNoQyxHQUFjLE9BQVZBLFFBQ0EyQyxLQUFLcEYsUUFBUW95QixTQUFTaDFCLFNBQVM4RCxPQUMvQkEsSUFBSW1CLFdBQVcrQyxLQUFLcEYsUUFBUXF5QixrQkFDaEMsT0FBTzV2QixTQUlYLGVBRUUsT0FESzJDLEtBQUt1TixZQUFXdk4sS0FBS3VOLFVBQVk5VyxLQUFLSSxTQUFTRixJQUFJLE9BQVEsYUFDekRxSixLQUFLdU4sVUFHZCxhQUFjeEosSUFDRixJQUFOQSxJQUFhL0QsS0FBS3VOLFVBQVk5VyxLQUFLSSxTQUFTRixJQUFJLE9BQVEsYUFDNURxSixLQUFLdU4sVUFBWXhKLEVBR25CLDJCQUE0QmdSLFdBQzFCLE1BQU1wYSxRQUFVbEUsS0FBS3FlLFNBQVNuZSxJQUFJb2UsV0FDbEMsSUFBS3BhLFFBQVMsT0FDZCxNQUFNaUYsV0FBYUksS0FBS2t0QixZQUFZdnlCLFNBRXBDLE9BREFpRixLQUFLbVYsVUFBWUEsVUFDVm5WLEtBR1QseUJBQTBCakYsU0FDeEIsTUFBTXd5QixZQUFjeFksRUFBRWhhLFFBQVE1QixLQUFLMEMsU0FBUyxHQUM1QyxJQUFLMHhCLFlBQWEsT0FDbEIsTUFBTXZ0QixXQUFhSSxLQUFLbXNCLG9CQUFvQmdCLGFBRTVDLE9BREF2dEIsS0FBS2pGLFFBQVVBLFFBQ1JpRixLQUdULGlDQUFrQ0EsTUFDaEMsTUFBTXd0QixTQUFXL3pCLEtBQUs0UixNQUFNdUssU0FBUzVWLEtBQUszRyxRQUFRMkQsU0FDbEQsSUFBS3d3QixTQUFTclksVUFBVyxDQUN2QixNQUFNcGEsUUFBVWlGLEtBQUsrVixRQUFRLFlBQzdCeVgsU0FBU3JZLFVBQVlwYSxTQUFTMUIsU0FBUzhiLFVBRXpDLGFBQWEvVSxLQUFLNFYsU0FBU3dYLFVBRzdCLHNCQUF1QnIwQixNQUNyQixNQUFNNkcsS0FBTzdGLE9BQU8yYixPQUFPLElBQUkxVixLQUFRakgsTUFFdkMsYUFETTZHLEtBQUt5c0IsZUFDSnpzQixLQUlUaXNCLFFBQVNoSyxXQUNGQSxVQUFtQyxXQUFyQmxOLEVBQUUxWixLQUFLNG1CLGFBQzFCN2hCLEtBQUs2aEIsV0FBWSxHQUduQndMLFVBQVd4TCxXQUNKQSxVQUFtQyxXQUFyQmxOLEVBQUUxWixLQUFLNG1CLGFBQzFCN2hCLEtBQUs2aEIsV0FBWSxHQUduQkYsV0FBWUUsVUFDVjdoQixLQUFLNmhCLFdBQWE3aEIsS0FBSzZoQixVQUd6QixnQkFBaUIxbkIsT0FDZkEsTUFBTXlNLGlCQUVOLE1BQU11SCxPQUFTaFUsTUFBTWtpQixjQUNyQixHQUFJLFdBQVlsTyxPQUFPbFYsUUFBUyxPQUFPK0csS0FBS2tlLFVBQVUvakIsT0FDdEQsR0FDRWdVLFFBQ0FBLE9BQU94VSxVQUFVNGpCLFNBQVMsb0JBQ3pCOW1CLEtBQUtvQyxLQUFLeVIsS0FFWCxPQUVGLE1BQU1rWCxLQUFPclQsT0FBT2xWLFFBQVF1b0IsS0FDNUIsSUFBS0EsS0FBTSxPQUNYLE1BQU1oWixPQUFTMkYsT0FBT3dILFFBQVEsYUFDOUIsR0FBS25OLE9BRUUsQ0FDTCxNQUFNcVUsUUFBVXJVLE9BQU8vRyxpQkFBaUIsb0JBQ3hDLElBQUssTUFBTWdrQixLQUFLNUksUUFDZDdjLEtBQUtxdEIsVUFBVTVILEVBQUV4c0IsUUFBUXVvQixNQUUzQnhoQixLQUFLNnJCLFFBQVFySyxXQU5ieGhCLEtBQUsyaEIsV0FBV0gsTUFRbEIsTUFBTTVoQixLQUFPdU8sT0FBT3dILFFBQVEscUJBQ3hCL1YsTUFBTUksS0FBS3NzQixRQUFRMXNCLE1BQ3ZCSSxLQUFLNGhCLGlCQUtQLHlCQUNFLE9BQU9uckIsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLHNCQUduQyxjQUNFLE9BQUtxSixLQUFLMUosZUFDTitPLElBQWNyRixLQUFLc04sV0FDckJ0TixLQUFLc04sU0FBNkIsY0FBbEJ0TixLQUFLMUosVUFFaEIwSixLQUFLc04sVUFKZSxLQU83QixZQUFhdkosR0FDWC9ELEtBQUtzTixTQUFXdkosRUFHbEIsWUFDRSxPQUFLL0QsS0FBSzFELFNBQ0gvQixXQUFXZ0MsZ0JBQWdCeUQsS0FBSzFELFVBRFosS0FJN0IsWUFDRSxPQUFLMEQsS0FBSzNELE1BQ0g5QixXQUFXNkIsZ0JBQWdCNEQsS0FBSzFELFVBRGYsS0FJMUIsV0FDRSxPQUFLMEQsS0FBS1csT0FDSFgsS0FBSzNELE1BQU11RSxNQUFNakssSUFBSXFKLEtBQUtXLFFBRFIsS0FJM0IsYUFDRSxPQUFPWCxLQUFLNkMsS0FHZCxxQkFDRSxNQUFPLElBQUlwTSxLQUFLb0MsS0FBSzJVLFNBR3ZCLGFBQ0UsT0FBSXhOLEtBQUt5TixZQUFvQnpOLEtBQUt5TixZQUMzQnpOLEtBQUswTixZQUdkLG9CQUNFLE9BQU8xTixLQUFLbU8sT0FBT3RELFFBR3JCLFdBQ0UsT0FBT3BVLEtBQUtvQyxLQUFLeVIsS0FPbkIsa0JBY0UsT0FiS3RLLEtBQUsyTixlQUNKM04sS0FBSzROLFdBQ1A1TixLQUFLMk4sYUFBZXBULFdBQVc2QixnQkFBZ0I0RCxLQUFLNE4sYUFFcEQ1TixLQUFLMk4sYUFBZTNOLEtBQUs2TixlQUFlQyxNQUNwQzlOLEtBQUsyTixhQUNQM04sS0FBSzROLFdBQWEsR0FBRzVOLEtBQUsyTixhQUFhbFIsTUFBTWpCLE1BQU13RSxLQUFLMk4sYUFBYW5TLEtBR3JFd0UsS0FBSzJOLGFBQWUsT0FJbkIzTixLQUFLMk4sYUFHZCxrQkFXRSxPQVZLM04sS0FBSytOLGVBQ0ovTixLQUFLeU4sWUFDUHpOLEtBQUsrTixhQUNIL04sS0FBS3lOLFlBQVlwUixPQUNqQjJELEtBQUt5TixZQUFZMVUsS0FBS3NELE9BQ3RCMkQsS0FBS3lOLFlBQVkxVSxLQUFLVSxTQUV4QnVHLEtBQUsrTixhQUFleFQsV0FBV2dDLGdCQUFnQnlELEtBQUs0TixhQUdqRDVOLEtBQUsrTixhQUdkLGdCQUNFLE9BQUsvTixLQUFLeU4sYUFBZ0J6TixLQUFLME4sWUFDeEIxTixLQUFLNE4sV0FEdUMsS0FJckQsZ0JBQ0UsU0FBSzVOLEtBQUt5TixjQUFnQnpOLEtBQUswTixhQUlqQyxjQUFlM0osR0FDYi9ELEtBQUs0TixXQUFhN0osRUFHcEIsYUFDRSxPQUFPL0QsS0FBSzNELE1BQU0yUixnQkFBZ0JoTyxLQUFLVyxRQUd6QyxnQkFDRSxNQUFNdEMsSUFBTTlELFdBQVcwVCxtQkFBbUJqTyxLQUFLa08sV0FDL0MsT0FBSTdQLEtBQ0cscUNBR1QsV0FDRSxPQUFJMkIsS0FBS3hELE1BQWN3RCxLQUFLeEQsTUFBTUUsS0FDM0JzRCxLQUFLM0QsTUFBTUssS0FHcEIsaUJBQ0UsT0FBS3NELEtBQUttTyxPQUNIbk8sS0FBS21PLE9BQU96UixLQURNLFFBSTNCLGVBQ0UsTUFBTTJCLElBQU05RCxXQUFXMFQsbUJBQW1Cak8sS0FBSzFELFVBQy9DLE9BQUkrQixLQUNHLHNDQ3JaSixNQUFNaXZCLG1CQUFtQm5DLG9CQUs5Qiw0QkFDRSxPQUFPRSxZQUFZM2MsTUFBTTRjLGVBQWdCLENBQ3ZDMEIsUUFBUyxDQUNQLGVBQ0EsZUFDQSxZQUNBLG1CQUNBTyxPQUFPN2UsTUFBTTRjLGVBQWUwQixTQUM5QjFtQixTQUFVLGtEQUlkMlYsa0JBQW1CL1gsTUFDakJ3SyxNQUFNdU4sa0JBQWtCL1gsTUFHMUIscUJBQ01sRSxLQUFLOG9CLFlBQW1ELFdBQXJDOW9CLEtBQUs4b0IsV0FBV3BqQixZQUFZaEosT0FDakRzRCxLQUFLOG9CLFdBQWEveEIsS0FBSzZlLFNBQVM1VixLQUFLOG9CLGFBSXpDNUssVUFBVy9qQixPQUNUdVUsTUFBTXdQLFVBQVUvakIsT0FHbEIsZUFDRSxPQUFPNkYsS0FBS3BGLFFBQVE0RixTQUd0QixhQUFjdUQsR0FDWi9ELEtBQUtvckIsU0FBUzVxQixTQUFXdUQsRUFHM0IsYUFDRSxNQUFxQixjQUFqQi9ELEtBQUt3dEIsUUFBZ0N4dEIsS0FBSytHLE9BQU91aUIsT0FDOUN0cEIsS0FBS3d0QixRQUdkLFdBQVl6cEIsR0FDVi9ELEtBQUt3dEIsUUFBVXpwQixFQUdqQixzQkFDRSxNQUFrQyxpQkFBdkIvRCxLQUFLaXBCLGtCQUNYamxCLE1BQU1wRyxPQUFPb0MsS0FBS2lwQixpQkFDaEJseUIsS0FBS2tOLFNBQVNqRSxLQUFLaXBCLGdCQUc1QixxQkFDRSxPQUFRamxCLE1BQU1wRyxPQUFPb0MsS0FBS2lwQixnQkFHNUIsb0JBQ0UsTUFBMEIsaUJBQWZqcEIsS0FBS3FxQixVQUNYcm1CLE1BQU1wRyxPQUFPb0MsS0FBS3FxQixTQUNoQnR6QixLQUFLa04sU0FBU2pFLEtBQUtxcUIsUUFHNUIsd0JBQ0UsSUFBSTFtQixPQUFTL0YsT0FDWG9DLEtBQUt5dEIsZUFBaUJ6dEIsS0FBS2lwQixjQUFnQmpwQixLQUFLbEosS0FBS1EsT0FFdkQsT0FBSzBJLEtBQUswdEIsZUFDSjFwQixNQUFNcEcsT0FBT29DLEtBQUtxcUIsU0FBV3pzQixPQUFPb0MsS0FBS3FxQixPQUFTLEtBQ3BEMW1CLFFBQWtCL0YsT0FBT29DLEtBQUtxcUIsU0FFM0JybUIsTUFBTXBHLE9BQU9vQyxLQUFLcXFCLFNBQ2pCMW1CLFFBQVUsR0FDTGxOLEtBQUtnSixLQUFLQyxTQUFTLDJCQUl6QmlFLE9BR1QsZUFDRSxHQUFJM0QsS0FBSzBkLE9BQVEsQ0FDZixNQUFNL1osT0FBUzNELEtBQUt5dEIsZUFBaUJ6dEIsS0FBS2lwQixjQUFnQmpwQixLQUFLbEosS0FBS1EsTUFDcEUsT0FBSzBJLEtBQUswdEIsZUFNRS9wQixRQUFVLElBTGZLLE1BQU1wRyxPQUFPb0MsS0FBS3FxQixZQUNYMW1CLE9BQVMvRixPQUFPb0MsS0FBS3FxQixRQUFVLEdBTXhDLE9BQU8sRUFHaEIsdUJBaUJFLElBaEJJcnFCLEtBQUtwRixRQUFReVAsYUFBZ0JySyxLQUFLbEosTUFBU2tKLEtBQUt5dEIsc0JBQzVDenRCLEtBQUttZ0IsV0FBVyxDQUFFaFcsUUFBUSxJQUdoQ25LLEtBQUt5dEIsZ0JBQ0p6dEIsS0FBS2xKLE1BQTJCLE1BQW5Ca0osS0FBS2xKLEtBQUtRLE9BQ3hCMEksS0FBSzJ0QixXQUVMM3RCLEtBQUswZCxRQUFTLEVBRWQxZCxLQUFLMGQsUUFBUyxHQUVaMWQsS0FBS3BGLFFBQVF5UCxhQUFnQnJLLEtBQUs0dEIsaUJBQW9CNXRCLEtBQUs2dEIsZ0JBQ3ZEN3RCLEtBQUtrcUIsV0FBVyxDQUFFL2YsUUFBUSxJQUc5Qm5LLEtBQUswZCxRQUFVMWQsS0FBS2xKLEtBQU0sQ0FDTyxXQUEvQmtKLEtBQUtsSixLQUFLNE8sWUFBWWhKLE9BQ3hCc0QsS0FBS2xKLEtBQU9DLEtBQUs2ZSxTQUFTNVYsS0FBS2xKLE9BRWpDLE1BQU0wQyxFQUFJVixpQkFBaUJrSCxLQUFLbEosTUFDaENrSixLQUFLOHRCLGdCQUFrQnQwQixFQUFFOGEsVUFDekJ0VSxLQUFLK3RCLGdCQUFrQi90QixLQUFLbEosS0FBSzhULGVBRTdCOEQsTUFBTWtULGlCQUdkLGlCQUFrQmhuQixRQUFVLENBQUV1UCxRQUFRLElBQ3BDbkssS0FBS2xKLFdBQWEsSUFBSUMsS0FBS2lKLEtBQUtpcEIsZUFBaUIsS0FBS3BaLFNBQVMsQ0FDN0QxWSxPQUFPLFVBRUhmLFNBQVMwYyxlQUFlOVMsS0FBS2xKLE1BQ25Da0osS0FBSzJ0QixZQUFhLEVBQ2xCL3lCLFFBQVF1UCxZQUNvQixJQUFuQnZQLFFBQVF1UCxRQUFnQ3ZQLFFBQVF1UCxPQUNyRHZQLFFBQVF1UCxRQUFRbkssS0FBSzRoQixpQkFHM0IsZ0JBQWlCaG5CLFFBQVUsQ0FBRXVQLFFBQVEsSUFDbkMsTUFBTXJULFdBQWEsSUFBSUMsS0FBS2lKLEtBQUtxcUIsT0FBT3hhLFNBQVMsQ0FBRTFZLE9BQU8sSUFDMUQ2SSxLQUFLcXFCLE1BQVF2ekIsS0FBS1EsTUFDbEJzRCxRQUFRdVAsWUFDb0IsSUFBbkJ2UCxRQUFRdVAsUUFBZ0N2UCxRQUFRdVAsT0FDckR2UCxRQUFRdVAsUUFBUW5LLEtBQUs0aEIsaUJBRzNCLGlDQUFrQ2huQixRQUFVLENBQUV1UCxRQUFRLElBRXBELEdBREluSyxLQUFLZ3VCLHFCQUFxQmh1QixLQUFLaXVCLFlBQy9CanFCLE1BQU1wRyxPQUFPb0MsS0FBS2t1QixvQkFFcEIsWUFEQTV1QixHQUFHQyxjQUFjc04sTUFBTSwyQkFHekIsTUFBTVcsUUFBVSxHQUNWa2MsV0FBYSxHQUNieUUsZ0JBQWtCdnZCLE9BQU96QyxPQUFPb08sV0FBVzlMLEtBQUlqQyxPQUM1Q0EsTUFBTUgsUUFFZixJQUFLLElBQUlrZ0IsTUFBUSxFQUFHQSxNQUFRNFIsZ0JBQWdCaDJCLE9BQVFva0IsUUFDOUN2YyxLQUFLM0QsTUFBTWIsS0FBTzJ5QixnQkFBZ0I1UixPQUFPL2dCLEtBRzdDa3VCLFdBQVczeEIsS0FBS28yQixnQkFBZ0I1UixPQUFPN2YsTUFDdkM4USxRQUFRelYsS0FBS28yQixnQkFBZ0I1UixTQUUvQixNQUFNeGpCLEtBQU8sQ0FDWEcsTUFBTyxJQUNQdUMsUUFBU2hGLEtBQUtnSixLQUFLWSxPQUFPLGtCQUFtQixDQUMzQ3NELE9BQVEzRCxLQUFLa3VCLGtCQUNiL2YsT0FBUXViLGFBRVY3TSxRQUFTLENBQ1B1UixJQUFLLENBQ0hDLEtBQU0sK0JBQ05qb0IsTUFBTzNQLEtBQUtnSixLQUFLQyxTQUFTLGdCQUMxQjhmLFNBQVUsS0FDUnhmLEtBQUtzdUIsY0FBYzlnQixXQUd2QitnQixJQUFLLENBQ0hGLEtBQU0sK0JBQ05qb0IsTUFBTzNQLEtBQUtnSixLQUFLQyxTQUFTLGVBQzFCOGYsU0FBVSxTQUdkRSxRQUFTLE9BRVBnSyxXQUFXdnhCLE9BQVMsR0FDdEIsSUFBSTZqQixPQUFPampCLE1BQU02UixRQUFPLEdBSTVCLG9CQUFxQjRDLFNBQ25CLElBQUssSUFBSStPLE1BQVEsRUFBR0EsTUFBUS9PLFFBQVFyVixPQUFRb2tCLGNBQ3BDL08sUUFBUStPLE9BQU8yTixXQUFXdHNCLE9BQU9vQyxLQUFLa3VCLG1CQUFvQixDQUM5RFIsYUFBYSxJQUVmajFCLFlBQVlpRCxPQUFPLENBQ2pCRCxRQUFTLFVBQVUrUixRQUFRK08sT0FBTzdmLFFBQVFzRCxLQUFLa3VCLHdCQUtyRCxpQkFBa0J0ekIsUUFBVSxDQUFFdVAsUUFBUSxJQUNoQ25LLEtBQUtndUIscUJBQXFCaHVCLEtBQUtpdUIsWUFDbkMsSUFBSXRxQixPQUFTM0QsS0FBS2t1QixrQkFDbEIsR0FBSWxxQixNQUFNcEcsT0FBTytGLFNBQVUsQ0FDekIsR0FBSWxOLEtBQUtnSixLQUFLQyxTQUFTLDZCQUErQmlFLE9BSXBELFlBREFyRSxHQUFHQyxjQUFjc04sTUFBTSwyQkFGdkJsSixPQUFTLEVBTVQzRCxLQUFLME4sbUJBQ0QxTixLQUFLME4sWUFBWXdjLFdBQVd0c0IsT0FBTytGLFFBQVMsQ0FDaEQrcEIsYUFBYSxJQUdqQjF0QixLQUFLNHRCLGlCQUFrQixFQUN2Qmh6QixRQUFRdVAsWUFDb0IsSUFBbkJ2UCxRQUFRdVAsUUFBZ0N2UCxRQUFRdVAsT0FDckR2UCxRQUFRdVAsUUFBUW5LLEtBQUs0aEIsaUJBRzNCLFlBQ0UsT0FBTzVoQixLQUFLcEYsUUFBUThyQixPQUFTLFNBRy9CLFVBQVczaUIsR0FDTSxDQUFDLFNBQVUsT0FBUSxXQUN0QnlxQixRQUFRenFCLEVBQUVsSSxpQkFDdEJtRSxLQUFLb3JCLFNBQVMxRSxNQUFRM2lCLEdBR3hCLG9CQUNFLE1BQU0yaUIsTUFBUTFtQixLQUFLMG1CLE1BQ25CLElBQUl2dEIsUUFBVTZHLEtBQUsrRyxRQUFRaE8sTUFBTUEsTUFBTTJ0QixNQUFNQSxRQUFRL2lCLE9BQ2pEOHFCLEdBQUt6dUIsS0FBSzNELE1BQU1veUIsR0FXcEIsR0FURUEsR0FEUyxPQUFQQSxHQUNHLEdBRUEsR0FBR0EsS0FHTkEsS0FBT0EsR0FBR3h4QixXQUFXLE9BQU13eEIsR0FBSyxJQUFNQSxJQUN0Q3p1QixLQUFLK0csT0FBT2hPLEtBQUtBLEtBQUtzckIsV0FBV3hNLE9BQU0xZSxTQUFvQnMxQixJQUMzRHp1QixLQUFLK0csT0FBT2hPLEtBQUtBLEtBQUtzckIsV0FBV3pNLE9BQU16ZSxRQUFVQSxRQUFVczFCLEdBQUssTUFFaEV0MUIsUUFBUyxDQUNYLE1BQU1pd0IsVUFBWSxJQUFJcnlCLEtBQUtvQyxTQUFTMFcsU0FBUyxDQUFFQyxVQUFVLElBQVF4WSxNQUNqRSxJQUFJbzNCLFdBQ0osT0FBSTF1QixLQUFLUSxTQUNIUixLQUFLc3BCLFFBQ1BvRixXQUFhdjFCLFFBQVUsSUFBTWl3QixVQUN0QnNGLFlBRUF0RixVQUdGandCLFNBS2IsWUFDRSxZQUFJa00sSUFBY3JGLEtBQUsydUIsUUFBMEIsS0FBaEIzdUIsS0FBSzJ1QixPQUFzQjN1QixLQUFLMnVCLE9BQzdEM3VCLEtBQUttTyxPQUNBbk8sS0FBSzBOLFlBQVkzVSxLQUFLQSxLQUFLd1EsUUFBUThnQixNQUFNaHRCLE1BRTNDLEVBR1QsVUFBVzBHLEdBQ1QvRCxLQUFLMnVCLE9BQVM1cUIsR0M5UVgsTUFBTTZxQixTQUNYbHBCLGNBQ0UxRixLQUFLNEQsTUFBUSxHQUdmLDJCQUE0Qm1SLFdBQzFCLE1BQU1wYSxRQUFVbEUsS0FBS3FlLFNBQVNuZSxJQUFJb2UsV0FDbEMsSUFBS3BhLFFBQVMsT0FDZCxNQUFNaUYsV0FBYUksS0FBS2t0QixZQUFZdnlCLFNBRXBDLE9BREFpRixLQUFLbVYsVUFBWUEsVUFDVm5WLEtBR1QseUJBQTBCakYsU0FDeEIsTUFBTXd5QixZQUFjeFksRUFBRWhhLFFBQVE1QixLQUFLMEMsU0FBUyxHQUM1QyxJQUFLMHhCLFlBQWEsT0FDbEIsTUFBTXZ0QixXQUFhSSxLQUFLbXNCLG9CQUFvQmdCLGFBRTVDLE9BREF2dEIsS0FBS2pGLFFBQVVBLFFBQ1JpRixLQUdULGlDQUFrQ0EsTUFDaEMsTUFBTXd0QixTQUFXL3pCLEtBQUs0UixNQUFNdUssU0FBUzVWLEtBQUszRyxRQUFRMkQsU0FDbEQsYUFBYW9ELEtBQUs0VixTQUFTd1gsVUFHN0Isc0JBQXVCcjBCLE1BQ3JCLE1BQU02RyxLQUFPN0YsT0FBTzJiLE9BQU8sSUFBSTFWLEtBQVFqSCxNQUN2QyxJQUFLLElBQUl3akIsTUFBUSxFQUFHQSxNQUFRM2MsS0FBS2dFLE1BQU16TCxPQUFRb2tCLFFBQ0EsV0FBekMzYyxLQUFLZ0UsTUFBTTJZLFFBQVE3VyxhQUFhaEosT0FDbENrRCxLQUFLZ0UsTUFBTTJZLE9BQVN4aUIsT0FBTzJiLE9BQU8sSUFBSXZWLFVBQWFQLEtBQUtnRSxNQUFNMlksUUFDMUQzYyxLQUFLZ0UsTUFBTTJZLE9BQU9tQixTQUNwQjlkLEtBQUtnRSxNQUFNMlksT0FBT3dSLGdCQUFrQm51QixLQUFLZ0UsTUFBTTJZLE9BQU9zUyxnQkFJNUQsT0FBT2p2QixLQUdULHVCQUF3QnpGLE9BQ3RCQSxNQUFNeU0saUJBRU4sTUFBTWtvQixLQUFPMzBCLE1BQU1raUIsY0FDbkIsR0FBSXlTLE1BQVFBLEtBQUtuMUIsVUFBVTRqQixTQUFTLG9CQUFzQjltQixLQUFLb0MsS0FBS3lSLEtBQ2xFLE9BRUYsTUFBTTNQLFFBQVVtMEIsS0FBS25aLFFBQVEsaUJBQ3ZCL1YsV0FBYUksS0FBSyt1QixjQUFjcDBCLFFBQVExQixRQUFROGIsV0FDdEQsSUFBS25WLEtBQU0sT0FDWCxNQUFNNGhCLEtBQU9zTixLQUFLNzFCLFFBQVF1b0IsS0FDMUIsSUFBS0EsS0FBTSxPQUNYLE1BQU1oWixPQUFTc21CLEtBQUtuWixRQUFRLFdBQzVCLEdBQUtuTixPQUVFLENBQ0wsTUFBTXFVLFFBQVVyVSxPQUFPL0csaUJBQWlCLGtCQUN4QyxJQUFLLE1BQU1na0IsS0FBSzVJLFFBQ2RqZCxLQUFLeXRCLFVBQVU1SCxFQUFFeHNCLFFBQVF1b0IsTUFFM0I1aEIsS0FBS2lzQixRQUFRckssV0FOYjVoQixLQUFLK2hCLFdBQVdILE1BUWxCNWhCLEtBQUtnaUIsaUJBR1Asc0JBQXVCN29CLE1BQ3JCLEdBQUl0QyxLQUFLb0MsS0FBS3lSLEtBQU0sQ0FDbEIsSUFxQkkxSyxLQXJCQWtWLFNBQVd4VixHQUFHMFYsS0FBS2dhLFdBQVc5MkIsUUFBT3lDLFNBRXJDcUYsS0FBS2l2QixjQUFjaDBCLE9BQVNOLFFBQVF1MEIsUUFBUSxPQUFRLFNBQ2YsYUFBckN2MEIsUUFBUXUwQixRQUFRLE9BQVEsV0FPNUIsR0FBSXBhLFNBQVMzYyxPQUFRLENBRW5CLE1BQU1nM0IsVUFBWSxJQUFJQyxLQUFLdGEsU0FBUyxHQUFHL2IsS0FBS28yQixXQUd4QyxPQUZRLElBQUlDLEtBQ1dELFdBQWEsWUFFaENyYSxTQUFTLEdBQUcrVyxRQUFRLE9BQVEsUUFBUyxZQUMzQy9XLFNBQVcsSUFNVmxWLEtBREFrVixTQUFTM2MsYUFDSTZILEtBQUtrdEIsWUFBWXBZLFNBQVMsSUFEZixJQUFJOVUsV0FFM0JKLEtBQUt5dkIsUUFBUXQyQixXQUNkdEMsS0FBS2tTLE9BQU9DLEtBQUssY0FBZTdQLE1BR3pDLGtCQUNFLE1BQU1tTCxXQUFhdVEsZUFBZXpVLEtBQUtzdkIsT0FBT2hwQixTQUFVdEcsTUFDbEQwVSxnQkFBa0JDLEVBQUV6USxNQUMxQndRLGdCQUFnQixHQUFHemIsUUFBUTJELE9BQVN4RCxPQUFPNEcsS0FBS3dyQixZQUVoRCxNQUFNbHpCLFNBQVcsQ0FDZk8sS0FBTXBDLEtBQUtvQyxLQUFLMkMsR0FDaEJWLE9BQVFyRSxLQUFLZ0osS0FBS0MsU0FBU00sS0FBS3N2QixPQUFPcDJCLE9BQ3ZDdUMsUUFBU2laLGdCQUFnQixHQUFHSixVQUM1QmliLE1BQU8sQ0FDTHRELEtBQU0sQ0FDSmh4QixLQUFNK0UsS0FBS3N2QixPQUFPcjBCLEtBQ2xCNlQsTUFBTyxlQUtULENBQUMsU0FBVSxhQUFhOVcsU0FBU2dJLEtBQUsxSixZQUN4Q2dDLFNBQVNDLFFBQVVFLFlBQVk0VixxQkFBcUIsT0FFaEMsY0FBbEJyTyxLQUFLMUosV0FBMEJnQyxTQUFTRSxPQUFRLEdBR3BELGFBRGtCQyxZQUFZaUQsT0FBT3BELFVBSXZDLHVCQUVFLFNBRE0wSCxLQUFLMnJCLFVBQ04zckIsS0FBSytVLFVBRUgsQ0FDTCxNQUFNN1EsV0FBYXVRLGVBQWV6VSxLQUFLc3ZCLE9BQU9ocEIsU0FBVXRHLE1BQ2xEMFUsZ0JBQWtCQyxFQUFFQyxVQUFVMVEsTUFBTSxHQUcxQ3dRLGdCQUFnQnpiLFFBQVEyRCxPQUFTeEQsT0FBTzRHLEtBQUt3ckIsWUFHN0MsTUFBTTNXLFlBQWNwZSxLQUFLcWUsU0FBU25lLElBQUlxSixLQUFLK1UsV0FDdkMvVSxLQUFLNHJCLGNBQWMvVyxZQUFZZ1gsUUFBUSxPQUFRLFFBQVMsWUFFNUQsTUFBTWp3QixVQUFZaVosWUFBWTFLLE9BQU8sQ0FDbkMxTyxRQUFTaVosZ0JBQWdCSixZQUczQixhQURNaFYsR0FBRzBWLEtBQUtDLGNBQWNyWixLQUFLLEdBQzFCQSxVQWhCRG9FLEtBQUtzRixZQW9CZmtxQixXQUFZejJCLE1BQ0xBLEtBQUswMkIsUUFDUjExQixPQUFPMmIsT0FBTzFWLEtBQUs0RCxNQUFNN0ssS0FBSzIyQixNQUFPMzJCLEtBQUtqQyxNQUk5QzY0QixZQUFhNTJCLE1BQ1gsTUFBTXNKLE1BQVF0SSxPQUFPMmIsT0FBTyxJQUFJdlYsVUFBYXBILEtBQUtqQyxNQUNsRGtKLEtBQUs0RCxNQUFNN0wsS0FBS3NLLE9BR2xCdXRCLFFBQVM3MkIsTUFDUGlILEtBQUs0RCxNQUFNN0wsS0FBS2dCLE1BR2xCODJCLFdBQVlILE1BQ1YxdkIsS0FBSzRELE1BQU1rc0IsT0FBT0osS0FBTSxHQUcxQjdELFFBQVNoSyxXQUNGQSxVQUFtQyxXQUFyQmxOLEVBQUUxWixLQUFLNG1CLGFBQzFCN2hCLEtBQUs2aEIsV0FBWSxHQUduQndMLFVBQVd4TCxXQUNKQSxVQUFtQyxXQUFyQmxOLEVBQUUxWixLQUFLNG1CLGFBQzFCN2hCLEtBQUs2aEIsV0FBWSxHQUduQkYsV0FBWUUsVUFDVjdoQixLQUFLNmhCLFdBQWE3aEIsS0FBSzZoQixVQUd6QixjQUNFLE9BQUk3aEIsS0FBSzhzQixTQUFpQjlzQixLQUFLOHNCLFNBQzNCOXNCLEtBQUsrc0IsV0FBbUJ0MkIsS0FBS2tFLFFBQVFoRSxJQUFJcUosS0FBSytzQixpQkFBbEQsRUFJRixZQUFhaHBCLEdBQ1gvRCxLQUFLOHNCLFNBQVcvb0IsRUFHbEIsZ0JBQ0UsT0FBSS9ELEtBQUsrc0IsV0FBbUIvc0IsS0FBSytzQixXQUM3Qi9zQixLQUFLOHNCLFNBQWlCOXNCLEtBQUs4c0IsU0FBU3R4QixRQUF4QyxFQUlGLGNBQWV1SSxHQUNiL0QsS0FBSytzQixXQUFhaHBCLEVBS3BCLDJCQUNFLE1BQU8sQ0FDTGlwQixRQUFTLENBQUMsU0FBVSxTQUFVLFFBQVMsV0FBWSxhQUNuREMsaUJBQWtCLE1BTXRCLGNBQ0UsT0FBT2p0QixLQUFLNEQsTUFBTTFMLFFBQU8yTCxHQUFLQSxFQUFFdWMsU0FHbEMsYUFDRSxHQUFJcGdCLEtBQUsrdkIsUUFBUTUzQixPQUFRLE9BQU82SCxLQUFLK3ZCLFFBQVEsR0FJL0MsY0FDRSxPQUFPL3ZCLEtBQUs0RCxNQUFNMUwsUUFBTzJMLElBQU1BLEVBQUV1YyxTQUduQyxhQUNFLEdBQUlwZ0IsS0FBS2d3QixRQUFRNzNCLE9BQVEsT0FBTzZILEtBQUtnd0IsUUFBUSxHQUkvQyxnQkFDRSxPQUFJaHdCLEtBQUsrdkIsUUFBUTUzQixPQUFTLEVBSTVCLFdBQ0UsT0FBTzFCLEtBQUtvQyxLQUFLeVIsS0FHbkIsZUFFRSxPQURLdEssS0FBS3VOLFlBQVd2TixLQUFLdU4sVUFBWTlXLEtBQUtJLFNBQVNGLElBQUksT0FBUSxhQUN6RHFKLEtBQUt1TixVQUdkLGFBQWN4SixJQUNGLElBQU5BLElBQWEvRCxLQUFLdU4sVUFBWTlXLEtBQUtJLFNBQVNGLElBQUksT0FBUSxhQUM1RHFKLEtBQUt1TixVQUFZeEosRUFHbkIsV0FDRSxPQUFPMUssS0FBSzRSLE1BQU1qTCxLQUFLd3JCLFlBR3pCLGlCQUNFLE9BQU9ueUIsS0FBS0MsVUFBVTBHLE1BQU0sQ0FBQ2xFLElBQUt1QixTQUNoQyxHQUFjLE9BQVZBLFFBQ0EyQyxLQUFLc3ZCLE9BQU90QyxTQUFTaDFCLFNBQVM4RCxPQUM5QkEsSUFBSW1CLFdBQVcrQyxLQUFLc3ZCLE9BQU9yQyxrQkFDL0IsT0FBTzV2QixVQzVQTixNQUFNNHlCLHlCQUF5QnJCLFNBQ3BDLDRCQUE2QjFxQixNQUMzQkEsS0FBS3laLEdBQ0gsUUFDQSxvQ0FDQTNkLEtBQUs4ckIsVUFBVXRULEtBQUt4WSxPQUd0QmtFLEtBQUt5WixHQUNILFFBQ0EsdUJBQ0FzUyxpQkFBaUJDLFNBQVMxWCxLQUFLeFksT0FFakNrRSxLQUFLeVosR0FDSCxRQUNBLDRCQUNBc1MsaUJBQWlCQyxTQUFTMVgsS0FBS3hZLE9BSW5DLDJCQUNFLE9BQU9xckIsWUFBWTNjLE1BQU11Z0IsY0FBZSxDQUN0QzNvQixTQUFVLHNEQUNWckwsS0FBTSxnQkFJVixhQUNFLE9BQU9nMUIsaUJBQWlCaEIsY0FHMUIsbUJBQ0UsR0FBSWp2QixLQUFLZ1gsUUFDUCxHQUFJaFgsS0FBSzRELE9BQU96TCxPQUFRLENBQ3RCLE1BQU1nNEIsU0FBV253QixLQUFLNEQsTUFBTTFMLFFBQU8yTCxHQUFpQixJQUFaQSxFQUFFMFksT0FBZTFZLEVBQUVzc0IsV0FDM0QsR0FBSUEsU0FBU2g0QixPQUFRLE9BQU9nNEIsU0FBUyxVQU8zQyxtQkFDRSxHQUFJbndCLEtBQUtnWCxRQUNQLEdBQUloWCxLQUFLNEQsT0FBT3pMLE9BQVEsQ0FDdEIsTUFBTWk0QixTQUFXcHdCLEtBQUs0RCxNQUFNMUwsUUFBTzJMLEdBQWlCLElBQVpBLEVBQUUwWSxRQUFnQjFZLEVBQUVzc0IsV0FDNUQsR0FBSUMsU0FBU2o0QixPQUFRLE9BQU9pNEIsU0FBUyxVQU8zQyx3QkFDRSxTQUNFcHdCLEtBQUtxd0IsY0FBY2gwQixPQUFPaTBCLFlBQVk1ekIsT0FDdENzRCxLQUFLcXdCLGNBQWN6dEIsT0FBT2xHLE9BR3hCc0QsS0FBS3F3QixhQUFhaDBCLE1BQU1pMEIsV0FBVzV6QixLQUFLYixnQkFDeENtRSxLQUFLcXdCLGFBQWF6dEIsTUFBTWxHLEtBQUtiLGNBTW5DLHdCQUNFLFlBQXdCLElBQWJtRSxLQUFLdXdCLE1BQ1Z2d0IsS0FBS3F3QixlQUNDcndCLEtBQUt3d0Isa0JBS1Z4d0IsS0FBS3V3QixJQUdkLHdCQUNFLFNBQ0V2d0IsS0FBS2dYLFFBQ0xoWCxLQUFLNEQsTUFBTXpMLFFBQVUsR0FDckI2SCxLQUFLeXdCLFdBQ3VCLFdBQTVCendCLEtBQUtvZ0IsUUFBUXZkLE1BQU01SCxNQU92QixzQkFBdUI4SSxHQUNyQi9ELEtBQUt1d0IsS0FBTSxFQUNYdndCLEtBQUswd0IsS0FBTSxFQUdiLHdCQUNFLFlBQXdCLElBQWIxd0IsS0FBSzB3QixJQUE0QjF3QixLQUFLd3dCLGtCQUMxQ3h3QixLQUFLMHdCLElBR2Qsc0JBQXVCM3NCLEdBQ3JCL0QsS0FBSzB3QixLQUFNLEVBQ1gxd0IsS0FBS3V3QixLQUFNLEVBR2IsWUFDRSxPQUFPdndCLEtBQUsyd0IsWUFBYyxFQUc1QixzQkFDRSxRQUFLM3dCLEtBQUtnWCxXQUVSaFgsS0FBSzR3QixlQUNMNXdCLEtBQUtxd0IsY0FDTHJ3QixLQUFLNHdCLGFBQWEzd0IsZUFBaUJELEtBQUtxd0IsYUFBYXB3QixjQU96RCxrQkFDRSxJQUFJNHdCLE1BQVEsRUFDWixJQUFLLE1BQU1odEIsS0FBSzdELEtBQUs0RCxNQUNmQyxFQUFFdWMsU0FBUXlRLE9BQVMsR0FFekIsT0FBT0EsTUFHVCx1QkFDRSxTQUNFN3dCLEtBQUtnWCxTQUNMaFgsS0FBSzR3QixjQUNINXdCLEtBQUs0d0IsY0FBYy90QixPQUNuQjdDLEtBQUs0d0IsY0FBYy90QixLQUFLOUosS0FBS0EsS0FBS3NyQixZQUFZaE4sTUFPcEQsaUJBQ0UsR0FBSXJYLEtBQUtnWCxRQUFVaFgsS0FBSzR3QixjQUFnQjV3QixLQUFLcXdCLGFBQWMsQ0FDekQsSUFBS3J3QixLQUFLNHdCLGFBQWF4USxTQUFXcGdCLEtBQUtxd0IsYUFBYWpRLE9BQ2xELE9BQU8zcEIsS0FBS2dKLEtBQUtDLFNBQVMsaUJBRTVCLEdBQUlNLEtBQUs0d0IsYUFBYXhRLE9BQ3BCLE9BQUlwZ0IsS0FBSzR3QixhQUFhL1YsU0FDYnBrQixLQUFLZ0osS0FBS1ksT0FBTyx1QkFBd0IsQ0FDOUMzRCxLQUFNc0QsS0FBSzR3QixhQUFhdjBCLE1BQU1LLE9BRzNCakcsS0FBS2dKLEtBQUtZLE9BQU8scUJBQXNCLENBQzVDM0QsS0FBTXNELEtBQUs0d0IsYUFBYXYwQixNQUFNSyxPQUdsQyxHQUFJc0QsS0FBS3F3QixhQUFhalEsT0FDcEIsT0FBSXBnQixLQUFLcXdCLGFBQWF4VixTQUNicGtCLEtBQUtnSixLQUFLWSxPQUFPLHVCQUF3QixDQUM5QzNELEtBQU1zRCxLQUFLcXdCLGFBQWFoMEIsTUFBTUssT0FHOUJzRCxLQUFLd3dCLGtCQUNBLzVCLEtBQUtnSixLQUFLWSxPQUFPLG9CQUFxQixDQUMzQzNELEtBQU1zRCxLQUFLcXdCLGFBQWFoMEIsTUFBTUssT0FHM0JqRyxLQUFLZ0osS0FBS1ksT0FBTyxxQkFBc0IsQ0FDNUMzRCxLQUFNc0QsS0FBS3F3QixhQUFhaDBCLE1BQU1LLFFBT3RDLGNBQWUzRCxNQUNiLE9BQVFBLEtBQUt5SixRQUNYLElBQUssTUFDRXhDLEtBQUs0RCxPQUFPekwsU0FDZjZILEtBQUtnWCxPQUFTamUsS0FBS2llLGFBQVUzUixFQUN6QnJGLEtBQUtnWCxTQUNQamUsS0FBS2pDLEtBQUtxNUIsVUFBVyxJQUd6QnAzQixLQUFLakMsS0FBS3lsQixNQUFRdmMsS0FBSzRELE1BQU16TCxPQUM3QjZILEtBQUsydkIsWUFBWTUyQixNQUNqQixNQUVGLElBQUssT0FDSGlILEtBQUsydkIsWUFBWTUyQixNQUNqQixNQUVGLElBQUssYUFDSGlILEtBQUt3dkIsV0FBV3oyQixNQUloQnRDLEtBQUtvQyxLQUFLeVIsV0FBWXRLLEtBQUs0aEIsaUJBQzFCbnJCLEtBQUtrUyxPQUFPQyxLQUFLLGNBQWU3UCxNQUd2QyxXQUFZMjJCLFlBQ0oxdkIsS0FBSzRELE1BQU04ckIsTUFBTXpkLFdBQ3ZCLE1BQU1sWixLQUFPLENBQ1hrQyxLQUFNK0UsS0FBS3N2QixPQUFPcjBCLEtBQ2xCdUgsT0FBUSxhQUNSa3RCLEtBQ0FELE9BQVFoNUIsS0FBS29DLEtBQUt5UixNQUdwQixPQURLN1QsS0FBS29DLEtBQUt5UixPQUFNdlIsS0FBS2pDLEtBQU9rSixLQUFLNEQsTUFBTThyQixNQUFNbmhCLGNBQzNDeFYsS0FHVCxzQkFBdUJvQixPQUNyQkEsTUFBTXlNLGlCQUVOLE1BQU1wTixFQUFJVyxNQUFNa2lCLGNBQ1Y3WixPQUFTaEosRUFBRVAsUUFBUXVKLE9BQ25CNFosR0FBSzVpQixFQUFFbWMsUUFBUSxpQkFDZmhiLFFBQVVuQixFQUFFbWMsUUFBUSxpQkFDcEJ3WCxZQUFjM3pCLEVBQUVtYyxRQUFRLGlCQUN4Qi9WLFdBQWFxd0IsaUJBQWlCOUQsb0JBQW9CZ0IsYUFDeER2dEIsS0FBS21WLFVBQVlwYSxRQUFRMUIsUUFBUThiLFVBQ2pDLE1BQU0yYSxLQUFPOXhCLE9BQU93ZSxJQUFJbmpCLFNBQVN5MkIsTUFFakMsT0FBUWx0QixRQUNOLElBQUssZ0JBQ0g1QyxLQUFLb1gsUUFBVXBYLEtBQUtvWCxhQUVkcFgsS0FBS2dpQixpQkFDWCxNQUdGLElBQUssY0FDSGhpQixLQUFLaXdCLFdBQVdILFlBQ1Y5dkIsS0FBS2dpQixpQkFDWCxNQUdGLElBQUssYUFDSGhpQixLQUFLa3hCLGtCQUNDbHhCLEtBQUtnaUIsaUJBQ1gsTUFHRixJQUFLLGFBQWMsQ0FDakIsTUFBTTdtQixRQUFVdEMsWUFBWXVDLGFBQ3ZCNEUsS0FBS2dFLE1BQU04ckIsTUFBTXB6QixXQUNwQnNELEtBQUtnRSxNQUFNOHJCLE1BQU1wekIsU0FBVyxHQUFHdkIsUUFBUTBCLFNBQVMxQixRQUFReUIsU0FHMUQsTUFBTXpELFdBQWE2RyxLQUFLOUksS0FBSzQ0QixZQUN2Qjl2QixLQUFLeXZCLFFBQVF0MkIsTUFDbkIsTUFHRixJQUFLLGNBQWUsQ0FDbEI2RyxLQUFLa3hCLGtCQUNDbHhCLEtBQUtnaUIsaUJBQ1gsTUFBTW1QLGVBQWlCLElBQUl6RCxXQUFXLENBQ3BDOXNCLFNBQVVaLEtBQUt3Z0IsT0FBTzRRLGlCQUN0QjNtQixZQUFhbFEsTUFBTTJNLFdBRXJCaXFCLGVBQWV6MEIsU0FBV3NELEtBQUt3Z0IsT0FBTy9qQixNQUFNQyxTQUM1Q3kwQixlQUFlN2lCLFVBQVl0TyxLQUFLMmdCLE9BQU9sa0IsTUFBTUMsU0FDN0N5MEIsZUFBZXB3QixPQUFTZixLQUFLd2dCLE9BQU96ZixPQUVwQ293QixlQUFlblAsaUJBQ2YsTUFHRixRQUFTLENBQ1AsTUFBTWhuQixRQUFVLENBQ2R1UCxRQUFRLEVBQ1JwUixLQUFNUyxFQUFFUCxRQUNSNmpCLFFBQVN0akIsRUFBRUcsVUFDWHdVLE9BQVEzVSxTQUVKMkcsVUFBVTh3QixNQUFNcnhCLEtBQUtnRSxNQUFNOHJCLE1BQU9sdEIsT0FBUTVILFNBQ2hELE1BQU03QixLQUFPLENBQ1hrQyxLQUFNK0UsS0FBS2l2QixjQUFjaDBCLEtBQ3pCdUgsT0FBUSxhQUNSa3RCLEtBQ0FELE9BQVFoNUIsS0FBS29DLEtBQUt5UixNQUVmN1QsS0FBS29DLEtBQUt5UixPQUFNdlIsS0FBS2pDLEtBQU84SSxLQUFLZ0UsTUFBTThyQixNQUFNbmhCLGNBQ2xEM08sS0FBS3l2QixRQUFRdDJCLE1BQ2IsUUFLTixjQUFlMjJCLE1BQ2IsR0FBS0EsS0FzQkMxdkIsS0FBSzRELE1BQU04ckIsTUFBTWhTLFNBQ25CMWQsS0FBSzRELE1BQU04ckIsTUFBTTNCLGdCQUFrQi90QixLQUFLNEQsTUFBTThyQixNQUFNYixZQUFZLENBQzlEcFQsZ0JBQWdCLFVBdkJwQixJQUFLLElBQUl4TyxFQUFJLEVBQUdBLEVBQUlqTixLQUFLNEQsTUFBTXpMLE9BQVE4VSxXQUM5QmpOLEtBQUs0RCxNQUFNcUosR0FBRzROLFNBRW5CN2EsS0FBS2dYLFVBQ0hoWCxLQUFLNEQsTUFBTXFKLEdBQUdwSyxNQUNkN0MsS0FBSzRELE1BQU1xSixHQUFHcEssS0FBSzlKLEtBQUtBLEtBQUtzckIsWUFBWWhOLFFBQ3pDclgsS0FBSzRELE1BQU1xSixJQUFJNVEsT0FBT2kwQixZQUFZNXpCLE1BQ2xDc0QsS0FBSzRELE1BQU1xSixJQUFJckssT0FBT2xHLE1BQ3RCc0QsS0FBSzRELE1BQU1xSixHQUFHNVEsTUFBTWkwQixXQUFXNXpCLEtBQUtiLGdCQUNsQ21FLEtBQUs0RCxNQUFNcUosR0FBR3JLLE1BQU1sRyxLQUFLYixnQkFDMUJtRSxLQUFLNEQsTUFBTXFKLElBQUk1USxPQUFPaTBCLFlBQVk1ekIsUUFFckNzRCxLQUFLNEQsTUFBTXFKLEdBQUc0TixVQUFXLEdBRXZCN2EsS0FBSzRELE1BQU1xSixHQUFHeVEsU0FDaEIxZCxLQUFLNEQsTUFBTXFKLEdBQUc4Z0IsZ0JBQWtCL3RCLEtBQUs0RCxNQUFNcUosR0FBRzRoQixZQUFZLENBQ3hEcFQsZ0JBQWdCLEtBZ0J4QixHQUpBemIsS0FBSzRELE1BQVE1RCxLQUFLNEQsTUFBTTFMLFFBQU9wQixXQUNLLElBQXBCQSxLQUFLdUYsTUFBTXRELE9BR3ZCaUgsS0FBS2dYLE9BQVEsQ0FTZixHQVBBaFgsS0FBSzRELE1BQU1zdEIsTUFBSyxDQUFDMTNCLEVBQUdpc0IsSUFDZGpzQixFQUFFK2lCLE1BQVFrSixFQUFFbEosTUFBYyxFQUMxQi9pQixFQUFFK2lCLE1BQVFrSixFQUFFbEosT0FBZSxFQUN4QixJQUlMdmMsS0FBSzRELE1BQU16TCxPQUFTLEVBQUcsQ0FDekI2SCxLQUFLNEQsTUFBUSxDQUFDNUQsS0FBSzRELE1BQU0sR0FBSTVELEtBQUs0RCxNQUFNLElBQ3hDLElBQUssTUFBTUMsS0FBSzdELEtBQUs0RCxhQUNaQyxFQUFFdWMsY0FDRnZjLEVBQUVzdEIsSUFLVG54QixLQUFLNEQsTUFBTSxLQUFJNUQsS0FBSzRELE1BQU0sR0FBR3VzQixVQUFXLEdBRXhDbndCLEtBQUs0RCxNQUFNLElBQUk4WixRQUFVMWQsS0FBSzRELE1BQU0sSUFBSThaLFNBQ3RDMWQsS0FBSzRELE1BQU0sR0FBRzRMLFFBQVV4UCxLQUFLNEQsTUFBTSxHQUFHNEwsVUFDcEN4UCxLQUFLNEQsTUFBTSxHQUFHM0QsYUFBZUQsS0FBSzRELE1BQU0sR0FBRzNELGFBQzdDRCxLQUFLNEQsTUFBTSxHQUFHd2MsUUFBUyxFQUNkcGdCLEtBQUs0RCxNQUFNLEdBQUczRCxhQUFlRCxLQUFLNEQsTUFBTSxHQUFHM0QsYUFDcERELEtBQUs0RCxNQUFNLEdBQUd3YyxRQUFTLEVBRW5CcGdCLEtBQUtveEIsa0JBQW1CcHhCLEtBQUs0RCxNQUFNLEdBQUd3YyxRQUFTLEVBQzlDcGdCLEtBQUs0RCxNQUFNLEdBQUd3YyxRQUFTLE9BSTdCLENBb0NMLEdBbkNBcGdCLEtBQUs0RCxNQUFNc3RCLE1BQUssQ0FBQzEzQixFQUFHaXNCLEtBQ2xCLEdBQUlqc0IsRUFBRWtrQixTQUFXK0gsRUFBRS9ILE9BQVEsT0FBUSxFQUNuQyxJQUFLbGtCLEVBQUVra0IsUUFBVStILEVBQUUvSCxPQUFRLE9BQU8sRUFDbEMsSUFBS2xrQixFQUFFa2tCLFNBQVcrSCxFQUFFL0gsT0FBUSxPQUFPLEVBQ25DLEdBQUlsa0IsRUFBRXlHLGFBQWV3bEIsRUFBRXhsQixhQUVyQixPQURBRCxLQUFLc2QsVUFBVyxHQUNSLEVBRVYsR0FBSTlqQixFQUFFeUcsYUFBZXdsQixFQUFFeGxCLGFBRXJCLE9BREFELEtBQUtzZCxVQUFXLEVBQ1QsRUFFVCxHQUFJN21CLEtBQUtJLFNBQVNGLElBQUksT0FBUSx5QkFBMEIsQ0FDdEQsR0FBSTZDLEVBQUU2M0IsZUFBaUI1TCxFQUFFNEwsZUFFdkIsT0FEQXJ4QixLQUFLc2QsVUFBVyxHQUNSLEVBRVYsR0FBSTlqQixFQUFFNjNCLGVBQWlCNUwsRUFBRTRMLGVBRXZCLE9BREFyeEIsS0FBS3NkLFVBQVcsRUFDVCxNQUVKLENBQ0wsR0FBSTlqQixFQUFFdUosU0FBVzBpQixFQUFFMWlCLFNBRWpCLE9BREEvQyxLQUFLc2QsVUFBVyxHQUNSLEVBRVYsR0FBSTlqQixFQUFFdUosU0FBVzBpQixFQUFFMWlCLFNBRWpCLE9BREEvQyxLQUFLc2QsVUFBVyxFQUNULEVBR1gsT0FBTyxLQUdUdGQsS0FBS3N4QixTQUFXLEVBQ1p0eEIsS0FBSzRELE1BQU0sSUFBTTVELEtBQUs0RCxNQUFNLEdBQUc4WixTQUFXMWQsS0FBSzRELE1BQU0sR0FBRzBMLE9BQVEsQ0FDbEV0UCxLQUFLc3hCLFNBQVcsRUFDaEIsSUFBSyxJQUFJcmtCLEVBQUksRUFBR0EsRUFBSWpOLEtBQUs0RCxNQUFNekwsT0FBUThVLElBRW5Dak4sS0FBSzRELE1BQU1xSixJQUNYak4sS0FBSzRELE1BQU1xSixHQUFHeVEsUUFDZDFkLEtBQUs0RCxNQUFNLEdBQUczRCxlQUFpQkQsS0FBSzRELE1BQU1xSixHQUFHaE4sZUFDNUN4SixLQUFLSSxTQUFTRixJQUFJLE9BQVEseUJBQ3ZCcUosS0FBSzRELE1BQU0sR0FBR3l0QixpQkFBbUJyeEIsS0FBSzRELE1BQU1xSixHQUFHb2tCLGVBQy9DcnhCLEtBQUs0RCxNQUFNLEdBQUdiLFdBQWEvQyxLQUFLNEQsTUFBTXFKLEdBQUdsSyxZQUU3Qy9DLEtBQUtzeEIsU0FBV3R4QixLQUFLc3hCLFNBQVcsR0FLdEMsSUFBSyxJQUFJcmtCLEVBQUksRUFBR0EsRUFBSWpOLEtBQUs0RCxNQUFNekwsT0FBUThVLElBQ3JDak4sS0FBSzRELE1BQU1xSixHQUFHbVQsT0FBU25ULEVBQUlqTixLQUFLc3hCLFNBQ2hDdHhCLEtBQUs0RCxNQUFNcUosR0FBR2trQixJQUFNbnhCLEtBQUs0RCxNQUFNcUosR0FBR21ULFFBQVVwZ0IsS0FBS3N4QixTQUFXLEdBS2xFUixZQUNFOXdCLEtBQUs0ckIsUUFBUyxHQ2hhWCxNQUFNMkYsMEJBQTBCM0MsU0FDckMsNEJBQTZCMXFCLE1BQzNCQSxLQUFLeVosR0FDSCxRQUNBLHFDQUNBM2QsS0FBSzhyQixVQUFVdFQsS0FBS3hZLE9BR3RCa0UsS0FBS3laLEdBQ0gsUUFDQSx3QkFDQTRULGtCQUFrQnJCLFNBQVMxWCxLQUFLeFksT0FFbENrRSxLQUFLeVosR0FDSCxRQUNBLDZCQUNBNFQsa0JBQWtCckIsU0FBUzFYLEtBQUt4WSxPQUlwQywyQkFDRSxPQUFPcXJCLFlBQVkzYyxNQUFNdWdCLGNBQWUsQ0FDdEMzb0IsU0FBVSx1REFDVnJMLEtBQU0sZUFDTi9CLE1BQU8sMEJBSVgsYUFDRSxPQUFPcTRCLGtCQUFrQnRDLGNBRzNCLG1CQUNFLEdBQUlqdkIsS0FBSzBkLE9BQVEsQ0FDZixJQUFJbVQsTUFBUSxFQUNaLElBQUssTUFBTWh0QixLQUFLN0QsS0FBSzRELE1BQ2ZDLEVBQUUyTCxTQUFRcWhCLE9BQVMsR0FFekIsT0FBT0EsT0FLWCxtQkFDRSxPQUFPN3dCLEtBQUs0RCxNQUFNLElBQUl2SCxPQUFPQyxlQUFZK0ksRUFHM0MsY0FDRSxRQUFpQyxJQUF0QnJGLEtBQUt3eEIsYUFDaEIsT0FBSXh4QixLQUFLeXhCLElBQ0h6eEIsS0FBS3d4QixhQUFlLEVBR3RCeHhCLEtBQUsweEIsSUFDSDF4QixLQUFLd3hCLGVBQWlCeHhCLEtBQUs0RCxNQUFNekwsWUFEdkMsRUFPRixjQUNFLFFBQTRCLElBQWpCNkgsS0FBSzhpQixRQUNoQixPQUFROWlCLEtBQUs4aUIsUUFHZixvQkFDRSxJQUFLOWlCLEtBQUswZCxPQUFRLE9BQ2xCLE1BQU1yYixNQUFRLElBQUlsQyxVQUVsQixhQURNa0MsTUFBTTRQLFNBQVMsQ0FBRW5iLEtBQU1rSixLQUFLMnhCLE1BQU9DLFFBQVEsVUFDcEN2dkIsTUFBTXdzQixZQUFZLENBQUVnRCxhQUFhLElBR2hEeEMsUUFBU3QyQixNQUNQLE9BQVFBLEtBQUt5SixRQUNYLElBQUssTUFJTCxJQUFLLE9BQ0h4QyxLQUFLMnZCLFlBQVk1MkIsTUFDakIsTUFFRixJQUFLLGFBQ0hpSCxLQUFLd3ZCLFdBQVd6MkIsTUFDaEIsTUFHRixJQUFLLGFBQ0hpSCxLQUFLOHhCLFdBQVcvNEIsTUFLaEJ0QyxLQUFLb0MsS0FBS3lSLEtBQU10SyxLQUFLNGhCLGlCQUNwQm5yQixLQUFLa1MsT0FBT0MsS0FBSyxjQUFlN1AsTUFHdkMsaUJBQWtCQSxNQUNadEMsS0FBS29DLEtBQUt5UixPQUNQdEssS0FBSzBkLFNBQ1IxZCxLQUFLMGQsUUFBUyxFQUNkMWQsS0FBSzJ4QixNQUFRNTRCLEtBQUtqQyxLQUNsQmtKLEtBQUtwRixRQUFVN0IsS0FBSzZCLFVBSzFCLHNCQUF1QlQsT0FDckJBLE1BQU15TSxpQkFFTixNQUFNcE4sRUFBSVcsTUFBTWtpQixjQUNWN1osT0FBU2hKLEVBQUVQLFFBQVF1SixPQUNuQjRaLEdBQUs1aUIsRUFBRW1jLFFBQVEsaUJBQ2ZoYixRQUFVbkIsRUFBRW1jLFFBQVEsaUJBQ3BCd1gsWUFBYzN6QixFQUFFbWMsUUFBUSxpQkFDeEIvVixXQUFhMnhCLGtCQUFrQnBGLG9CQUFvQmdCLGFBQ3pEdnRCLEtBQUttVixVQUFZcGEsUUFBUTFCLFFBQVE4YixVQUNqQyxNQUFNMmEsS0FBTzl4QixPQUFPd2UsSUFBSW5qQixTQUFTeTJCLE1BRWpDLE9BQVFsdEIsUUFDTixJQUFLLGNBQ0g1QyxLQUFLaXdCLFdBQVdILFlBQ1Y5dkIsS0FBS2dpQixpQkFDWCxNQUdGLElBQUssYUFDSGhpQixLQUFLa3hCLGtCQUNDbHhCLEtBQUtnaUIsaUJBQ1gsTUFHRixJQUFLLFlBQWEsQ0FDaEIsTUFBTTlxQixLQUFPLEdBRWIsSUFBS3FELE1BQU0yTSxTQUFVLENBQ25CLE1BQU0zQixZQUFjQyxXQUFXMUosT0FBTyxDQUNwQ3EyQiw2QkFDRTUzQixNQUFNQyxTQUNORCxNQUFNRSxTQUNZLEtBQWxCRixNQUFNRyxTQUNZLE1BQWxCSCxNQUFNRyxRQUNSMDNCLHdCQUNFNzNCLE1BQU1DLFNBQ05ELE1BQU1FLFNBQ1ksS0FBbEJGLE1BQU1HLFNBQ1ksTUFBbEJILE1BQU1HLFVBRU42SyxRQUNGck8sS0FBS3VLLGFBQWV6RCxPQUFPdUgsTUFBTXhPLElBQUksY0FDckNHLEtBQUs2TCxXQUFhL0UsT0FBT3VILE1BQU14TyxJQUFJLGVBQ25DRyxLQUFLME4saUJBQW1CNUcsT0FBT3VILE1BQU14TyxJQUFJLHFCQUN6Q0csS0FBSzJOLHNCQUF3QjdHLE9BQzNCdUgsTUFBTXhPLElBQUksMkJBS2hCLE1BQU1vQyxLQUFPLENBQ1hrQyxLQUFNK0UsS0FBS2l2QixjQUFjaDBCLEtBQ3pCdUgsT0FBUSxhQUNSaXRCLE9BQVFoNUIsS0FBS29DLEtBQUt5UixLQUNsQjFQLFFBQVM5RCxNQUVYaUMsS0FBS2pDLFdBQWFWLFNBQVNVLEtBQUtBLEtBQUttTyxVQUFZLEdBQ2pEZ3RCLFlBQVlDLEtBQUssQ0FBRUMsSUFBS3g2QixPQUFPeTZCLE9BQU8xNkIsT0FDdENrSSxLQUFLeXZCLFFBQVF0MkIsTUFDYixNQUdGLFFBQVMsQ0FDUCxNQUFNNkIsUUFBVSxDQUNkdVAsUUFBUSxFQUNScFIsS0FBTVMsRUFBRVAsUUFDUjZqQixRQUFTdGpCLEVBQUVHLFVBQ1h3VSxPQUFRM1UsU0FFSjJHLFVBQVU4d0IsTUFBTXJ4QixLQUFLZ0UsTUFBTThyQixNQUFPbHRCLE9BQVE1SCxTQUNoRCxNQUFNN0IsS0FBTyxDQUNYa0MsS0FBTStFLEtBQUtpdkIsY0FBY2gwQixLQUN6QnVILE9BQVEsYUFDUmt0QixLQUNBRCxPQUFRaDVCLEtBQUtvQyxLQUFLeVIsTUFFZjdULEtBQUtvQyxLQUFLeVIsT0FBTXZSLEtBQUtqQyxLQUFPOEksS0FBS2dFLE1BQU04ckIsTUFBTW5oQixjQUNsRDNPLEtBQUt5dkIsUUFBUXQyQixNQUNiLFFBS04sZ0JBQ0UsR0FBS2lILEtBQUsyeEIsTUFBVixDQUNBLElBQUssTUFBTTl0QixLQUFLN0QsS0FBSzRELE1BQ2RDLEVBQUU2WixTQUNMN1osRUFBRW9CLFNBQVdqRixLQUFLcEYsUUFBUXFLLFVBQVksRUFDdENwQixFQUFFbEIsV0FDQTNDLEtBQUtwRixRQUFRK0gsWUFBY3hDLFVBQVV3RSxnQkFBZ0J2RSxRQUN2RHlELEVBQUVXLGlCQUFtQnhFLEtBQUtwRixRQUFRNEosa0JBQW9CLEVBQ3REWCxFQUFFWSxzQkFBd0J6RSxLQUFLcEYsUUFBUTZKLHVCQUF5QixRQUMxRFosRUFBRW9PLFNBQVMsQ0FBRW5iLEtBQU1rSixLQUFLMnhCLE1BQU9DLFFBQVEsS0FJakQsSUFBSyxJQUFJM2tCLEVBQUksRUFBR0EsRUFBSWpOLEtBQUs0RCxNQUFNekwsT0FBUThVLElBQ2pDak4sS0FBSzRELE1BQU1xSixHQUFHeVEsU0FDaEIxZCxLQUFLNEQsTUFBTXFKLEdBQUc4Z0IsZ0JBQWtCL3RCLEtBQUs0RCxNQUFNcUosR0FBRzRoQixZQUFZLENBQ3hEcFQsZ0JBQWdCLEtBS3RCemIsS0FBSzRELE1BQVE1RCxLQUFLNEQsTUFBTTFMLFFBQU9wQixXQUNLLElBQXBCQSxLQUFLdUYsTUFBTXRELE9BRzNCaUgsS0FBSyt0QixnQkFBa0IvdEIsS0FBSzZ1QixlQUc5QmlDLFlBQ0U5d0IsS0FBSzRyQixRQUFTLEdDaE5sQixNQUFNeUcsMkJBRUYsK0hBRUcsTUFBTTVPLFNBSVgsNkJBQThCNU8sWUFBYTNRLE1BQ3JDMlEsWUFBWXFhLFFBQVEsT0FBUSxnQkFBa0J6NEIsS0FBS29DLEtBQUt5UixPQUMxRHBHLEtBQUs4QixLQUFLLGVBQWUyRyxTQUN6QnpJLEtBQ0c4QixLQUFLLGdCQUNMdVYsWUFDQyw2QkFBNkI5a0IsS0FBS2dKLEtBQUtDLFNBQ3JDLGlDQUdOd0UsS0FDRzhCLEtBQUssb0JBQ0x1VixZQUNDLGdDQUFnQzhXLHFDQUlsQ3hkLFlBQVlxYSxRQUFRLE9BQVEseUJBQTJCejRCLEtBQUtvQyxLQUFLeVIsTUFDbkVwRyxLQUFLOEIsS0FBSyxlQUFlMkcsU0FHdkJrSSxZQUFZcWEsUUFBUSxPQUFRLGFBQWV6NEIsS0FBS29DLEtBQUt5UixPQUN2RHBHLEtBQ0c4QixLQUFLLGdCQUNMdVYsWUFBWTlrQixLQUFLZ0osS0FBS0MsU0FBUyx5QkFDbEN3RSxLQUFLOEIsS0FBSyxvQkFBb0IyRyxVQUlsQyx5QkFDRSxNQUFNclUsU0FBVyxDQUNmTyxLQUFNcEMsS0FBS29DLEtBQUsyQyxHQUNoQlYsT0FBUXJFLEtBQUtnSixLQUFLQyxTQUFTLHVCQUMzQm5ILFFBQVM5QixLQUFLdXJCLE1BQU1zUSxRQUNwQnIzQixLQUFNQyxNQUFNQyxtQkFBbUJDLFFBQy9CbTBCLE1BQU8sQ0FDTHRELEtBQU0sQ0FDSnNHLFlBQVksRUFDWkMscUJBQXFCLEVBQ3JCQyxVQUFVLElBR2RoM0IsUUFBUzQyQiw0QkFHWDU1QixZQUFZaUQsT0FBT3BELFVBU3JCLGVBRUU3QixLQUFLdzFCLEtBQU8sT0FZZCwyQkFBNEJ6VixJQUFLdFMsTUFDL0JBLEtBQUt5WixHQUNILFFBQ0EsdUJBQ0E4RixTQUFTaVAsa0JBQWtCbGEsS0FBS3hZLE9BR2xDa0UsS0FBS3laLEdBQ0gsUUFDQSxjQUNBOEYsU0FBU2tQLHlCQUF5Qm5hLEtBQUt4WSxPQUV6Q2tFLEtBQUt5WixHQUNILFFBQ0EsZ0JBQ0E4RixTQUFTbVAsdUJBQXVCcGEsS0FBS3hZLE9BRXZDa0UsS0FBS3laLEdBQ0gsUUFDQSxnQkFDQThGLFNBQVNvUCx3QkFBd0JyYSxLQUFLeFksT0FHeENrRSxLQUFLeVosR0FDSCxRQUNBLGVBQ0E4RixTQUFTb1Asd0JBQXdCcmEsS0FBS3hZLE9BRXhDa0UsS0FBS3laLEdBQUcsUUFBUyxlQUFnQjhGLFNBQVNxUCxzQkFBc0J0YSxLQUFLeFksT0FFckVrRSxLQUFLeVosR0FDSCxRQUNBLG9CQUNBOEYsU0FBU3NQLDJCQUEyQnZhLEtBQUt4WSxPQUUzQ2tFLEtBQUt5WixHQUFHLFFBQVMsaUJBQWtCOEYsU0FBU3VQLGtCQUFrQnhhLEtBQUt4WSxPQUduRWtFLEtBQUt5WixHQUFHLFFBQVMsbUJBQW9COEYsU0FBU3dQLGdCQUFnQnphLEtBQUt4WSxPQUVuRWtFLEtBQUt5WixHQUFHLFdBQVksY0FBZThGLFNBQVN5UCxhQUFhMWEsS0FBS3hZLE9BRTlEa0UsS0FBS3laLEdBQUcsUUFBUyxtQkFBb0J3VixXQUFXQyxTQUFTNWEsS0FBS3hZLE9BQzlEa0UsS0FBS3laLEdBQUcsWUFBYSxjQUFld1YsV0FBV0UsZ0JBQWdCN2EsS0FBS3hZLE9BRXBFa0UsS0FBS3laLEdBQUcsUUFBUyxxQkFBc0I4RixTQUFTNlAsVUFBVTlhLEtBQUt4WSxPQUcvRGl3QixpQkFBaUJzRCxlQUFlcnZCLE1BQ2hDcXRCLGtCQUFrQmdDLGVBQWVydkIsTUFHbkMsb0JBQXFCL0osT0FDbkJBLE1BQU15TSxpQkFDTixNQUFNdEssU0FBV25DLE1BQU1raUIsY0FBY3BqQixRQUFRcUQsU0FDN0MsR0FBSUEsU0FBVSxDQUNaLE1BQU1ELE1BQVE5QixXQUFXZ0MsZ0JBQWdCRCxVQUNyQ0QsTUFBTXdPLFNBQVN4TyxNQUFNcU8sTUFBTUUsUUFBTyxJQUkxQyxpQ0FBa0NpSyxhQUtoQyxHQUpBdlYsR0FBRzBWLEtBQUt3ZSxlQUlKLzhCLEtBQUtvQyxLQUFLeVIsTUFBa0MsSUFBMUJ1SyxZQUFZOWIsS0FBS2tDLEtBQVksQ0FDakQsTUFBTTJFLEtBQU8rVSxFQUFFRSxZQUFZOWIsS0FBSzBDLFNBQVMsR0FDekMsR0FBSW1FLEtBQUtqRyxVQUFVNGpCLFNBQVMsVUFDSSxTQUExQjNkLEtBQUszRyxRQUFRcWtCLFNBQXFCLENBQ3BDLEdBQUkxZCxLQUFLakcsVUFBVTRqQixTQUFTLGFBQzFCLEdBQUkzZCxLQUFLM0csUUFBUTJxQixXQUFZLENBQzNCLE1BQU0zRCxVQUFZRCxtQkFBbUJELGlCQUNuQ2xMLFlBQVlyWixJQUVSMlMsT0FBUzJSLGdCQUFnQkMsaUJBQzdCRSxVQUFVMkQsWUFFWixHQUFJelYsT0FBT21QLFNBQVUsQ0FDbkIsTUFBTWtGLGVBQWlCLElBQUk3QyxtQkFDekI5SyxZQUFZclosR0FDWjJTLE9BQU80RyxVQUNQNUcsT0FBT3FVLHNCQUVIQSxlQUFlalcsVUFDaEIwVCxVQUFVd1QscUJBQXFCeFQsVUFBVXlULG1CQUUzQyxDQUNMLE1BQU16VCxVQUFZRCxtQkFBbUJELGlCQUNuQ2xMLFlBQVlyWixJQUVkLEdBQUl5a0IsVUFBVXVDLGVBQWdCLENBQzVCLE1BQU1BLGVBQWlCLElBQUk3QyxtQkFDekI5SyxZQUFZclosR0FDWixLQUNBeWtCLFVBQVV1QyxzQkFFTkEsZUFBZWpXLFVBQ2hCMFQsVUFBVXdULHFCQUFxQnhULFVBQVV5VCxlQUlwRCxHQUFJOXpCLEtBQUtqRyxVQUFVNGpCLFNBQVMsVUFBVyxDQUNyQyxNQUFNcFAsT0FBUzJSLGdCQUFnQkMsaUJBQWlCbEwsWUFBWXJaLElBQ3REZ25CLGVBQWlCLElBQUk3QyxtQkFDekJ4UixPQUFPdVMsZ0JBQ1A3TCxZQUFZclosR0FDWjJTLE9BQU9xVSxzQkFFSEEsZUFBZWpXLFVBQ2hCNEIsT0FBT3dsQixlQUFlRixxQkFDbkJ0bEIsT0FBT3dsQixlQUFlRCxpQkFReEMsK0JBQWdDLzRCLFFBQVN1SixNQThCdkMsR0E3QkE1RSxHQUFHMFYsS0FBS3dlLGVBRVJySSxvQkFBb0J5SSxjQUFjMXZCLE1BRTlCdkosUUFBUXUwQixRQUFRLE9BQVEsbUJBQzFCaHJCLEtBQUs4QixLQUFLLGNBQWM2dEIsWUFBWSxtQkFDcEMzdkIsS0FBSyxHQUFHakwsUUFBUXc2QixlQUFnQixHQUlsQ3Z2QixLQUFLOEIsS0FBSyxZQUFZa1csT0FBTS9oQixPQUMxQkEsTUFBTWtpQixjQUNIMUcsUUFBUSxhQUNSN1YsY0FBYyxxQkFDZG5HLFVBQVU2TyxPQUFPLFVBRXRCdEUsS0FDRzhCLEtBQUssYUFDTDh0QixZQUFXMzVCLE9BQ1ZBLE1BQU1raUIsY0FDSHZjLGNBQWMscUJBQ2RuRyxVQUFVZ1QsT0FBTyxVQVFwQmxXLEtBQUtvQyxLQUFLeVIsS0FBTSxDQUNsQixNQUFNMUssS0FBT3NFLEtBQUssR0FBR3BFLGNBQWMsbUJBQ25DLEdBQUlGLE1BRUFBLEtBQUtqRyxVQUFVNGpCLFNBQVMsY0FDSyxTQUEzQjNkLEtBQUszRyxRQUFRb3FCLFdBQ2Z6akIsS0FBSzNHLFFBQVF3SixhQUNiLENBQ0EsTUFBTTNMLEtBQU82SSxTQUFTMGIsZUFBZXpiLE1BRVgsV0FBdEJBLEtBQUszRyxRQUFRc0osT0FDZnpMLEtBQUtpOUIsWUFBY24wQixLQUFLM0csUUFBUStDLFFBQzVCNEQsS0FBSzNHLFFBQVErQyxRQUNiNEQsS0FBSzNHLFFBQVFvSyxTQUVPLGNBQXRCekQsS0FBSzNHLFFBQVFzSixPQUNmekwsS0FBS2s5QixZQUFjcDBCLEtBQUszRyxRQUFRK0MsUUFDNUI0RCxLQUFLM0csUUFBUStDLFFBQ2I0RCxLQUFLM0csUUFBUW9LLFNBRW5CekQsS0FBSzNHLFFBQVFvcUIsVUFBWSxPQUV6QkksU0FBU3dRLHVCQUF1Qm45QixPQUt0QyxNQUFNbzlCLFNBQVdod0IsS0FBSzhCLEtBQUssZ0JBQzNCLElBQUssTUFBTW5KLFdBQVdxM0IsU0FDcEIsSUFBS3o5QixLQUFLb0MsS0FBS3lSLEtBQU0sQ0FDbkJ6TixRQUFRaVAsTUFBTTBRLFFBQVUsT0FDeEIsTUFBTW5aLFFBQVV4RyxRQUFRczNCLGFBQWEsaUJBQ2pDOXdCLFNBQ0U1TSxLQUFLeUYsT0FBT3ZGLElBQUkwTSxTQUFTd0gsVUFDM0JoTyxRQUFRaVAsTUFBTTBRLFFBQVUsU0FNaEMsTUFBTTRYLE9BQVNsd0IsS0FBSzhCLEtBQUssWUFDekIsSUFBSyxNQUFNcXVCLFFBQVFELE9BQ1ozOUIsS0FBS29DLEtBQUt5UixPQUNiK3BCLEtBQUt2b0IsTUFBTTBRLFFBQVUsUUFJekIsTUFBTThYLGdCQUFrQnB3QixLQUFLOEIsS0FBSyxzQkFDbEMsSUFBSyxNQUFNdXVCLFFBQVFELGdCQUNiNzlCLEtBQUtvQyxLQUFLeVIsT0FBTWlxQixLQUFLem9CLE1BQU0wUSxRQUFVLFFBRzNDLE1BQU1nWSxjQUFnQnR3QixLQUFLOEIsS0FBSyxvQkFDaEMsSUFBSyxNQUFNdXVCLFFBQVFDLGNBQ1ovOUIsS0FBS29DLEtBQUt5UixPQUFNaXFCLEtBQUt6b0IsTUFBTTBRLFFBQVUsUUFHNUMsTUFBTWlZLGlCQUFtQnZ3QixLQUFLOEIsS0FBSyx1QkFDbkMsSUFBSyxNQUFNcXVCLFFBQVFJLGlCQUFrQixDQUVuQyxJQUFJcDRCLE1BQVFvbkIsU0FBU2lSLGlCQUFpQkwsS0FBS3A3QixTQUFTcUQsVUFDL0NELFFBQU9BLE1BQVFvbkIsU0FBU2tSLGtCQUFrQk4sS0FBSzFlLFFBQVEsZ0JBQ3ZEdFosUUFDSEEsTUFBUW9uQixTQUFTaVIsaUJBQWlCTCxLQUFLTyxjQUFjMzdCLFFBQVFxRCxXQUUxREQsUUFDSEEsTUFBUW9uQixTQUFTaVIsaUJBQ2ZMLEtBQUsxZSxRQUFRLHFCQUFxQjFjLFFBQVFxRCxXQUd6Q0QsUUFDSEEsTUFBUW9uQixTQUFTaVIsaUJBQ2ZMLEtBQUsxZSxRQUFRLHFCQUFxQjFjLFFBQVFxRCxZQUt6Q0QsUUFBVUEsTUFBTXdPLFNBQVlwVSxLQUFLb0MsS0FBS3lSLFFBQ3pDK3BCLEtBQUt2b0IsTUFBTTBRLFFBQVUsUUFLekIsSUFBSy9sQixLQUFLb0MsS0FBS3lSLEtBQU0sQ0FFbkIsTUFBTXVxQixVQUFZM3dCLEtBQUs4QixLQUFLLGVBQzVCLElBQUssTUFBTXF1QixRQUFRUSxVQUFXLENBRTVCLElBQUl4NEIsTUFBUW9uQixTQUFTaVIsaUJBQWlCTCxLQUFLcDdCLFNBQVNxRCxVQUMvQ0QsUUFDSEEsTUFBUW9uQixTQUFTa1Isa0JBQWtCTixLQUFLMWUsUUFBUSxnQkFFN0N0WixRQUNIQSxNQUFRb25CLFNBQVNpUixpQkFBaUJMLEtBQUtPLGNBQWMzN0IsUUFBUXFELFdBRTFERCxRQUNIQSxNQUFRb25CLFNBQVNpUixpQkFDZkwsS0FBSzFlLFFBQVEscUJBQXFCMWMsUUFBUXFELFdBR3pDRCxRQUNIQSxNQUFRb25CLFNBQVNpUixpQkFDZkwsS0FBSzFlLFFBQVEscUJBQXFCMWMsUUFBUXFELFlBS3pDRCxRQUFVQSxNQUFNd08sVUFBY3hPLFFBQVU1RixLQUFLb0MsS0FBS3lSLFFBQ3JEK3BCLEtBQUt2b0IsTUFBTTBRLFFBQVUsUUFLekIsTUFBTXNZLGFBQWU1d0IsS0FBSzhCLEtBQUssbUJBQy9CLElBQUssTUFBTXFHLFVBQVV5b0IsYUFDbkJ6b0IsT0FBTzFTLFVBQVVDLElBQUksWUFDckJ5UyxPQUFPMVMsVUFBVWdULE9BQU8sZ0JBSzlCLDhCQUNFLE1BQU8sQ0FDTGdPLFVBQVcsaUJBQ1hFLFNBQVUsZ0JBQ1ZvRyxRQUFTLGNBSWIsdUJBQXdCOW1CLE9BQ3RCLE1BQU1vaUIsTUFBUXJjLFNBQVMvRixNQUFNa2lCLGNBQWNwakIsUUFBUTZDLEtBQzdDaTVCLGdCQUFrQjU2QixNQUFNa2lCLGNBQWMxRyxRQUFRLHFCQUNwRCxJQUFLLE1BQU0xSSxLQUFLOG5CLGdCQUFnQnR6QixpQkFBaUIsT0FDL0N3TCxFQUFFbkIsTUFBTWtwQixPQUFTLE9BRW5CRCxnQkFDR2oxQixjQUFjLGNBQWN5YyxXQUM1QnpjLGNBQWMsT0FBT2dNLE1BQU1rcEIsT0FBUyxpQkFDdkMsTUFBTXhuQixRQUFVclQsTUFBTWtpQixjQUFjMUcsUUFBUSxZQUM1QyxJQUFLLE1BQU03ZCxLQUFLMFYsUUFBUS9MLGlCQUFpQixXQUN2QzNKLEVBQUVnVSxNQUFNMFEsUUFBVSxPQUNsQjFrQixFQUFFbUIsUUFBUXJDLE9BQVMsUUFFckIsTUFBTXErQixnQkFBa0J6bkIsUUFBUTFOLGNBQzlCLHFCQUFxQnljLFdBRXZCMFksZ0JBQWdCbnBCLE1BQU0wUSxRQUFVLFFBQ2hDeVksZ0JBQWdCaDhCLFFBQVFyQyxPQUFTLE9BS25DLGtDQUFtQ3VELE9BQ2pDQSxNQUFNeU0saUJBRU4sTUFBTWhILEtBQU96RixNQUFNa2lCLGNBQWMxRyxRQUFRLGNBQ3pDLEdBQUkvVixLQUFLakcsVUFBVTRqQixTQUFTLFVBRTFCLFlBREF1QyxnQkFBZ0JvVixlQUFldDFCLEtBQU16RixPQUt2QyxNQUFNZzdCLGNBQWdCaDdCLE1BQU1raUIsY0FDekIxRyxRQUFRLHVCQUNSbFUsaUJBQWlCLGtCQUNwQixJQUFLLE1BQU0yekIsV0FBV0QsY0FDcEJDLFFBQVF6N0IsVUFBVWdULE9BQU8sZUFFM0J4UyxNQUFNa2lCLGNBQWMxRyxRQUFRLGtCQUFrQmhjLFVBQVVDLElBQUksZUFHNURPLE1BQU1raUIsY0FBYzFHLFFBQVEscUJBQXFCaGMsVUFBVTZPLE9BQU8sUUFHbEUsTUFBTTZzQixZQUFjbDdCLE1BQU1raUIsY0FDdkIxRyxRQUFRLDJCQUNSN1YsY0FBYyxvQkFDakJ1MUIsWUFBWXZwQixNQUFNMFEsUUFBVSxRQUM1QixNQUFNOFksT0FBU0QsWUFBWXYxQixjQUFjLFVBbUJ6QyxPQVZBdzFCLE9BQU9yOEIsUUFBUXVKLE9BQVMsWUFDeEI4eUIsT0FBT3I4QixRQUFRczhCLFdBQWFwN0IsTUFBTWtpQixjQUFjcGpCLFFBQVF1SixPQUN4RDh5QixPQUFPcjhCLFFBQVF1OEIsZUFBaUJyN0IsTUFBTWtpQixjQUFjcGpCLFFBQVF1SixPQUM1RDh5QixPQUFPcjhCLFFBQVE0SCxRQUFVMUcsTUFBTWtpQixjQUFjcGpCLFFBQVE0SCxRQUNyRHkwQixPQUFPcjhCLFFBQVF3OEIsV0FBYXQ3QixNQUFNa2lCLGNBQWNwakIsUUFBUXc4QixXQUN4REgsT0FBT3I4QixRQUFReThCLFVBQVl2N0IsTUFBTWtpQixjQUFjcGpCLFFBQVF5OEIsVUFDdkRKLE9BQU9yOEIsUUFBUTBILE9BQVN4RyxNQUFNa2lCLGNBQWNwakIsUUFBUW9wQixTQUNwRGlULE9BQU9yOEIsUUFBUTA4QixTQUFXeDdCLE1BQU1raUIsY0FBY3BqQixRQUFRMjhCLFdBRzlDejdCLE1BQU1raUIsY0FBY3BqQixRQUFRdUosUUFDbEMsSUFBSyxXQUNIOHlCLE9BQU81WSxVQUFZLEdBQUdqbUIsS0FBS2dKLEtBQUtDLFNBQzlCbVcsS0FBSzZFLFlBQVl2Z0IsTUFBTWtpQixjQUFjcGpCLFFBQVF1SixjQUN4Q3JJLE1BQU1raUIsY0FBY3BqQixRQUFReThCLGNBQ2pDdjdCLE1BQU1raUIsY0FBY3BqQixRQUFRdzhCLGVBRTlCLE1BQ0YsSUFBSyxZQUNISCxPQUFPNVksVUFBWSxHQUFHam1CLEtBQUtnSixLQUFLQyxTQUM5Qm1XLEtBQUs2RSxZQUFZdmdCLE1BQU1raUIsY0FBY3BqQixRQUFRdUosY0FDeENySSxNQUFNa2lCLGNBQWNwakIsUUFBUTI4QixlQUNqQ3o3QixNQUFNa2lCLGNBQWNwakIsUUFBUXc4QixnQkFVcEMsdUJBQXdCdDdCLE9BQ3RCQSxNQUFNeU0saUJBQ04sTUFBTXBOLEVBQUlXLE1BQU1raUIsY0FFaEIsR0FBSTdpQixFQUFFRyxVQUFVNGpCLFNBQVMsaUJBQ3ZCLE9BQUkvakIsRUFBRUcsVUFBVTRqQixTQUFTLFlBQ2hCcGQsVUFBVTAxQixzQkFBc0JyOEIsR0FFaEMyRyxVQUFVMjFCLG9CQUFvQnQ4QixHQUszQyx5QkFBMEJXLE9BQ3hCLE1BQU15RixLQUFPekYsTUFBTWtpQixjQUFjMUcsUUFBUSxjQUN6QyxHQUFJL1YsS0FBS2pHLFVBQVU0akIsU0FBUyxVQUUxQixZQURBdUMsZ0JBQWdCb1YsZUFBZXQxQixLQUFNekYsT0FJdkMsR0FBNEMsS0FBeENBLE1BQU1raUIsY0FBY3BqQixRQUFRNEgsUUFFOUIsWUFEQXZCLEdBQUdDLGNBQWNzTixNQUFNcFcsS0FBS2dKLEtBQUtDLFNBQVMsMkJBSzVDLE1BQU15MUIsY0FBZ0JoN0IsTUFBTWtpQixjQUN6QjFHLFFBQVEsdUJBQ1JsVSxpQkFBaUIsa0JBQ3BCLElBQUssTUFBTTJ6QixXQUFXRCxjQUNwQkMsUUFBUXo3QixVQUFVZ1QsT0FBTyxlQUUzQnhTLE1BQU1raUIsY0FBYzFpQixVQUFVQyxJQUFJLGVBR2xDLE1BQU15N0IsWUFBY2w3QixNQUFNa2lCLGNBQ3ZCMUcsUUFBUSwyQkFDUjdWLGNBQWMsb0JBQ2pCdTFCLFlBQVl2cEIsTUFBTTBRLFFBQVUsUUFDNUIsTUFBTThZLE9BQVNELFlBQVl2MUIsY0FBYyxVQUV6Q3cxQixPQUFPcjhCLFFBQVF1SixPQUFTLFlBQ3hCOHlCLE9BQU9yOEIsUUFBUXM4QixXQUFhLFVBQzVCRCxPQUFPcjhCLFFBQVF1OEIsZUFBaUJyN0IsTUFBTWtpQixjQUFjcGpCLFFBQVF1SixPQUM1RDh5QixPQUFPcjhCLFFBQVE0SCxRQUFVMUcsTUFBTWtpQixjQUFjcGpCLFFBQVE0SCxRQUNyRHkwQixPQUFPcjhCLFFBQVF3OEIsV0FBYXQ3QixNQUFNa2lCLGNBQWNwakIsUUFBUXc4QixXQUN4REgsT0FBT3I4QixRQUFReThCLFVBQVl2N0IsTUFBTWtpQixjQUFjcGpCLFFBQVF5OEIsVUFFdkRKLE9BQU81WSxVQUFZLEdBQUdqbUIsS0FBS2dKLEtBQUtDLFNBQzlCbVcsS0FBSzZFLFlBQVl2Z0IsTUFBTWtpQixjQUFjcGpCLFFBQVF1SixjQUN4Q3JJLE1BQU1raUIsY0FBY3BqQixRQUFReThCLGNBQ2pDdjdCLE1BQU1raUIsY0FBY3BqQixRQUFRdzhCLGVBSWhDLDhCQUErQnQ3QixPQUU3QkEsTUFBTXlNLGlCQUNOLE1BQU1tdkIsV0FBYTU3QixNQUFNa2lCLGNBQWN1WSxjQUFjb0IsdUJBQ25ELGdCQUVGLElBQUl6WixNQUNKLElBQUtBLE1BQVEsRUFBR0EsTUFBUXdaLFdBQVc1OUIsT0FBUW9rQixRQUFTLENBQ2xELE1BQU0xZixRQUFVazVCLFdBQVd4WixPQUN2QjFmLFFBQVE1RCxRQUFRZzlCLFdBQWE5N0IsTUFBTWtpQixjQUFjcGpCLFFBQVFnOUIsU0FDM0RwNUIsUUFBUWxELFVBQVVDLElBQUksZUFFdEJpRCxRQUFRbEQsVUFBVWdULE9BQU8sZUFHN0J4UyxNQUFNa2lCLGNBQWN1WSxjQUFjMzdCLFFBQVEwSSxTQUN4Q3hILE1BQU1raUIsY0FBY3BqQixRQUFRZzlCLFNBR2hDLG1DQUFvQzk3QixPQUNsQyxNQUFNeUYsS0FBT3pGLE1BQU1raUIsY0FBYzFHLFFBQVEsY0FFekMsR0FBSS9WLEtBQUtqRyxVQUFVNGpCLFNBQVMsVUFDdEIzZCxLQUFLakcsVUFBVTRqQixTQUFTLGFBQWMsQ0FDeEMsTUFBTTJZLFVBQVl4UyxtQkFBbUJwTyxZQUFZMVYsTUFDN0N6RixNQUFNa2lCLGNBQWMxaUIsVUFBVTRqQixTQUFTLFlBQ3pDMlksVUFBVTlOLGlCQUFpQixHQUNsQmp1QixNQUFNa2lCLGNBQWMxaUIsVUFBVTRqQixTQUFTLGFBQ2hEMlksVUFBVTlOLGtCQUFrQixJQU1wQyxxQ0FBc0NqdUIsT0FDcENBLE1BQU15TSxpQkFFTixNQUFNaEgsS0FBT3pGLE1BQU1raUIsY0FBYzFHLFFBQVEsY0FDckMvVixLQUFLakcsVUFBVTRqQixTQUFTLFdBQ3RCM2QsS0FBS2pHLFVBQVU0akIsU0FBUyxjQUMxQnlDLG1CQUFtQm1XLGlCQUFpQmg4QixPQUdsQ3lGLEtBQUtqRyxVQUFVNGpCLFNBQVMsV0FDMUJ1QyxnQkFBZ0JxVyxpQkFBaUJoOEIsUUFJakN5RixLQUFLakcsVUFBVTRqQixTQUFTLFVBQ3RCM2QsS0FBS2pHLFVBQVU0akIsU0FBUyxjQUMxQm1HLG1CQUFtQnlTLGlCQUFpQmg4QixPQUlwQ3lGLEtBQUtqRyxVQUFVNGpCLFNBQVMsVUFJeEIzZCxLQUFLakcsVUFBVTRqQixTQUFTLGNBQzFCcGQsVUFBVWcyQixpQkFBaUJoOEIsT0FVL0IseUJBQTBCeUYsTUFHeEIsTUFBTXd0QixTQUFXeHRCLEtBQUszRyxRQUFRMkQsT0FDMUJ2RCxLQUFLNFIsTUFBTXVLLFNBQVM1VixLQUFLM0csUUFBUTJELFNBQ2pDZ0QsS0FBSzNHLFFBRVQsR0FBSW0wQixTQUFTOXdCLFNBQVUsT0FBT21uQixTQUFTaVIsaUJBQWlCdEgsU0FBUzl3QixVQUdqRSxNQUFNNkcsU0FBV2lxQixTQUFTcHhCLFFBQzFCLEdBQUltSCxTQUFVLENBQ1osTUFBT3BILFFBQVNDLFNBQVdtSCxTQUFTbEgsTUFBTSxLQUMxQyxHQUFnQixVQUFaRixRQUNGLE9BQU90RixLQUFLeUYsT0FBT0MsT0FBT0gsU0FDckIsQ0FDTCxNQUFNUyxNQUFRaEcsS0FBS3NILE9BQU9wSCxJQUFJb0YsU0FDOUIsSUFBS1UsTUFBTyxPQUFPLEtBQ25CLE1BQU1ELE1BQVFDLE1BQU13QixvQkFBb0IsUUFBU2pDLFNBQ2pELE9BQUtRLE1BQ0VBLE1BQU1ILE9BQVMsSUFBSTZCLE1BQU1GLFdBQVczQixNQUR4QixNQU12QixNQUFNZ0gsUUFBVStwQixTQUFTL3BCLFFBQ3pCLEdBQUlBLFFBQVMsT0FBTzVNLEtBQUt5RixPQUFPdkYsSUFBSTBNLFNBRXBDLE1BQU0xSSxRQUFVaUYsS0FBSytWLFFBQVEsWUFDdkJaLFVBQVlwYSxRQUFVQSxRQUFRMUIsUUFBUThiLFVBQVksS0FDeEQsR0FBSUEsVUFBVyxDQUNiLE1BQU1GLFlBQWNwZSxLQUFLcWUsU0FBU25lLElBQUlvZSxXQUN0QyxHQUFJRixZQUFZaGMsS0FBTSxPQUFPZ2MsWUFBWWhjLEtBQUsyUixVQUdoRCxPQUFPLEtBR1QsbUJBQW9CNUssTUFDbEIsTUFBTWpGLFFBQVVpRixLQUFLK1YsUUFBUSxZQUN2QlosVUFBWXBhLFFBQVVBLFFBQVExQixRQUFROGIsVUFBWSxLQUN4RCxHQUFJQSxVQUFXLENBRWIsT0FEb0J0ZSxLQUFLcWUsU0FBU25lLElBQUlvZSxXQUNuQnFoQixTQUFVLEVBRy9CLE9BQU8sRUFHVCx3QkFBeUJ0NkIsS0FDdkIsR0FBS0EsSUFBTCxDQUVBLEdBQUlBLElBQUk5RCxTQUFTLEtBQU0sQ0FFckIsTUFBTytELFFBQVNDLFNBQVdGLElBQUlHLE1BQU0sS0FDckMsR0FBZ0IsVUFBWkYsUUFDRixPQUFPdEYsS0FBS3lGLE9BQU9DLE9BQU9ILFNBQ3JCLENBQ0wsTUFBTVMsTUFBUWhHLEtBQUtzSCxPQUFPcEgsSUFBSW9GLFNBQzlCLElBQUtVLE1BQU8sT0FBTyxLQUNuQixNQUFNRCxNQUFRQyxNQUFNd0Isb0JBQW9CLFFBQVNqQyxTQUNqRCxPQUFLUSxNQUNFQSxNQUFNSCxPQUFTLElBQUk2QixNQUFNRixXQUFXM0IsTUFEeEIsTUFNdkIsT0FBTzVGLEtBQUt5RixPQUFPdkYsSUFBSW1GLE1BQVEsTUFHakMseUJBQTBCcUgsVUFDeEIsTUFBTTNHLE1BQVFpbkIsU0FBUzRTLFNBQVNsekIsVUFDaEMsT0FBTzNHLE1BQVFBLE1BQU1ILE1BQVEsS0FHL0IsZ0JBQWlCOEcsVUFDZixHQUFJQSxTQUFVLENBQ1osTUFBT3BILFFBQVNDLFNBQVdtSCxTQUFTbEgsTUFBTSxLQUMxQyxHQUFnQixVQUFaRixRQUFxQixDQUN2QixNQUFNK0IsU0FBV3JILEtBQUt5RixPQUFPQyxPQUFPSCxVQUFVUSxNQUM5QyxPQUFPc0IsU0FBU2xCLE9BQ1gsQ0FDTCxNQUFNSCxNQUFRaEcsS0FBS3NILE9BQU9wSCxJQUFJb0YsU0FDOUIsSUFBS1UsTUFBTyxPQUFPLEtBQ25CLE1BQU1ELE1BQVFDLE1BQU13QixvQkFBb0IsUUFBU2pDLFNBQ2pELE9BQUtRLE1BQ0VBLE9BQVMsSUFBSTBCLE1BQU1GLFdBRFAsTUFJdkIsT0FBTyxLQU9ULDRCQUE2QjRCLEtBQU0wMkIsT0FBUyxNQUMxQyxNQUFNdmhCLFVBQ00sTUFBVnVoQixPQUFpQjEyQixLQUFLK1YsUUFBUSxZQUFZMWMsUUFBUThiLFVBQVl1aEIsT0FDMUQzN0IsUUFBVWxFLEtBQUtxZSxTQUFTbmUsSUFBSW9lLFdBRTVCblosVUFBWWpCLFFBQVF3UCxPQUFPLENBQUUxTyxRQUFTbUUsS0FBSzBVLFlBRWpELGFBRE1oVixHQUFHMFYsS0FBS0MsY0FBY3JaLEtBQUssR0FDMUJBLElBR1QsK0JBQWdDekIsT0FFOUJBLE1BQU15TSxpQkFFTixNQUFNMHVCLE9BQVNuN0IsTUFBTWtpQixjQUNmemMsS0FBTzAxQixPQUFPM2YsUUFBUSxjQUN0QjRnQixjQUFnQmpCLE9BQU8zZixRQUFRLFlBRS9CblQsT0FBUzh5QixPQUFPcjhCLFFBQVF1SixPQUU5QixHQUFLaWhCLFNBQVNrUixrQkFBa0IvMEIsTUFFaEMsT0FBUTRDLFFBQ04sSUFBSyxVQUFXLENBQ2QsTUFBTXdnQixXQUFhOWlCLFNBQVNvMUIsT0FBT3I4QixRQUFRK3BCLFlBQ3JDQyxnQkFBa0IvaUIsU0FDdEIvRixNQUFNa2lCLGNBQWNwakIsUUFBUWdxQixpQkFHOUIsR0FBSXJqQixLQUFLakcsVUFBVTRqQixTQUFTLFNBQVUsQ0FDcEMsSUFBSWlaLFVBQ0E1MkIsS0FBS2pHLFVBQVU0akIsU0FBUyxZQUMxQmlaLFVBQVkxVyxnQkFBZ0J4SyxZQUFZMVYsT0FFdENBLEtBQUtqRyxVQUFVNGpCLFNBQVMsZUFDMUJpWixVQUFZeFcsbUJBQW1CMUssWUFBWTFWLE9BRTdDNDJCLFVBQVV6VCxZQUFZQyxXQUFZQyxnQkFBaUJyakIsV0FDOUMsR0FBSUEsS0FBS2pHLFVBQVU0akIsU0FBUyxTQUFVLENBQzNDLE1BQU0yWSxVQUFZeFMsbUJBQW1CcE8sWUFBWTFWLE1BQzNDNjJCLFdBQWFuQixPQUFPM2YsUUFBUSxnQkFDNUIyUyxVQUFZbU8sV0FDZHYyQixTQUFTdTJCLFdBQVd4OUIsUUFBUXNqQixPQUM1QixLQUNKLEdBQUkrWSxPQUFPMzdCLFVBQVU0akIsU0FBUyxjQUM1QjJZLFVBQVU3TixTQUFTQyxlQUNkLENBQ0wsTUFBTW9PLGFBQWV4MkIsU0FBU28xQixPQUFPcjhCLFFBQVFzakIsT0FDN0MyWixVQUFVblQsWUFBWXVGLFVBQVdvTyxvQkFFOUIsR0FDTDkyQixLQUFLakcsVUFBVTRqQixTQUFTLGNBQ2MsTUFBdEMzZCxLQUFLRSxjQUFjLGdCQUNuQixDQUNBLE1BQU11QyxZQUFjbEMsVUFBVW1WLFlBQVkxVixNQUMxQyxHQUFJMDFCLE9BQU8zN0IsVUFBVTRqQixTQUFTLGNBQWUsQ0FDM0MsTUFBTXlGLFdBQWE5aUIsU0FBU28xQixPQUFPcjhCLFFBQVErcEIsWUFDM0MzZ0IsTUFBTXMwQixVQUFVM1QsZ0JBQ1gsQ0FDTCxNQUFNMFQsYUFBZXgyQixTQUFTbzFCLE9BQU9yOEIsUUFBUXNqQixhQUN2Q2xhLE1BQU11MEIsYUFBYUYsbUJBRXRCLENBQ0wsTUFBTXI2QixNQUFRb25CLFNBQVNrUixrQkFBa0IvMEIsTUFDbkNpM0IsMEJBQTRCajNCLEtBQUtFLGNBQ3JDLG1CQUdGLEdBQUl6RCxNQUFNOG1CLFVBQVVILFlBQWEsQ0FDL0IsTUFBTTVyQixPQUFTd0ksS0FBS0UsY0FBYyxlQUdsQyxPQUZBRixLQUFLM0csUUFBUWdILGFBQWVnakIsZ0JBQzVCcmpCLEtBQUszRyxRQUFRb3FCLFVBQVksUUFDakJKLGlCQUNOLEtBQUs5aUIsVUFBVUYsYUFBYUcsUUFDMUJoSixPQUFPc2xCLFVBQVlqbUIsS0FBS2dKLEtBQUtDLFNBQVMsdUJBQ3RDbTNCLDBCQUEwQm5hLFVBQVlqbUIsS0FBS2dKLEtBQUtZLE9BQzlDLGdDQUNBLENBQ0UyaUIsV0FDQS9pQixhQUFjeEosS0FBS2dKLEtBQUtDLFNBQVMsNEJBR3JDLE1BRUYsS0FBS1MsVUFBVUYsYUFBYUssS0FDMUJsSixPQUFPc2xCLFVBQVlqbUIsS0FBS2dKLEtBQUtDLFNBQVMsb0JBQ3RDbTNCLDBCQUEwQm5hLFVBQVlqbUIsS0FBS2dKLEtBQUtZLE9BQzlDLGdDQUNBLENBQ0UyaUIsV0FDQS9pQixhQUFjeEosS0FBS2dKLEtBQUtDLFNBQVMseUJBR3JDLE1BRUYsS0FBS1MsVUFBVUYsYUFBYU0sUUFDMUJuSixPQUFPc2xCLFVBQVlqbUIsS0FBS2dKLEtBQUtDLFNBQVMsdUJBQ3RDbTNCLDBCQUEwQm5hLFVBQVlqbUIsS0FBS2dKLEtBQUtZLE9BQzlDLGdDQUNBLENBQ0UyaUIsV0FDQS9pQixhQUFjeEosS0FBS2dKLEtBQUtDLFNBQVMsNEJBR3JDLE1BRUYsS0FBS1MsVUFBVUYsYUFBYU8sU0FDMUJwSixPQUFPc2xCLFVBQVlqbUIsS0FBS2dKLEtBQUtDLFNBQVMsd0JBQ3RDbTNCLDBCQUEwQm5hLFVBQVlqbUIsS0FBS2dKLEtBQUtZLE9BQzlDLGdDQUNBLENBQ0UyaUIsV0FDQS9pQixhQUFjeEosS0FBS2dKLEtBQUtDLFNBQVMsNkJBUXpDdEksT0FBT3VDLFVBQVVjLFFBQVEsVUFBVyxXQUNwQ3JELE9BQU91QyxVQUFVZ1QsT0FBTyxVQUN4Qi9NLEtBQUtFLGNBQWMsaUJBQWlCNk0sU0FDcEMvTSxLQUFLRSxjQUFjLGlCQUFpQmdNLE1BQU0wUSxRQUFVLGFBQzlDaUgsU0FBUzdCLGVBQWVoaUIsV0FFOUJOLEdBQUdDLGNBQWNzTixNQUNmcFcsS0FBS2dKLEtBQUtZLE9BQU8sMEJBQTJCLENBQzFDaEUsTUFBT0EsTUFBTUssUUFLckIsTUFFRixJQUFLLE9BQVEsQ0FDWCxNQUFNbzZCLFFBQVVsM0IsS0FBS20zQixXQUFVLEdBQ3pCMy9CLE9BQVMwL0IsUUFBUWgzQixjQUFjLGVBQ3JDMUksT0FBT3NsQixVQUNMdGxCLE9BQU9zbEIsVUFBWWptQixLQUFLZ0osS0FBS0MsU0FBUyxxQkFDeEN0SSxPQUFPdUMsVUFBVWdULE9BQU8sV0FDeEJtcUIsUUFBUWgzQixjQUFjLGlCQUFpQjZNLFNBQ3ZDbXFCLFFBQVE3OUIsUUFBUSs5QixZQUFhLFFBQ3ZCdlQsU0FBUzdCLGVBQWVrVixRQUFTUCxjQUFjdDlCLFFBQVE4YixpQkFDdkQ1VSxVQUFVcEksS0FBSzZILE1BQ3JCLE1BRUYsSUFBSyxZQUFhLENBQ2hCLElBRUl3d0IsU0FGQTZHLFlBQWM5OEIsTUFBTWtpQixjQUFjMUcsUUFBUSwyQkFDM0MxYyxRQUFRK0MsUUFFTmk3QixZQUtIN0csU0FBV3B3QixLQUFLazNCLGtCQUFrQkQsY0FKbENBLFlBQWM5OEIsTUFBTWtpQixjQUFjMUcsUUFBUSwyQkFDdkMxYyxRQUFRb0ssUUFDWCtzQixTQUFXMzVCLEtBQUt5RixPQUFPdkYsSUFBSXNnQyxjQUs3QixNQUFNRSxhQUFlaDlCLE1BQU1raUIsY0FBY3BqQixRQUFRczhCLFdBQzNDM1UsWUFBMEQsU0FBNUN6bUIsTUFBTWtpQixjQUFjcGpCLFFBQVEybkIsWUFDMUN2ZSxNQUFRLElBQUlsQyxVQUtsQixPQUpBa0MsTUFBTUssbUJBQXFCNnpCLGNBQWN0OUIsUUFBUThiLFVBQ2pEMVMsTUFBTUMsU0FBVyxVQUNqQkQsTUFBTUUsS0FBTyxTQUNiRixNQUFNRyxPQUFTMjBCLGFBQ1BBLGNBQ04sSUFBSyxVQUNIOTBCLE1BQU1oRyxNQUFRK3pCLFNBQ2QvdEIsTUFBTU8sTUFBUXpJLE1BQU1raUIsY0FBY3BqQixRQUFRNEgsUUFDMUN3QixNQUFNTSxXQUFheEMsVUFBVXdFLGdCQUFnQnZFLFFBQ3pDd2dCLGNBQWF2ZSxNQUFNaEIsY0FBZ0IsU0FFakNnQixNQUFNdkwsT0FDWnVMLE1BQU1pRCxZQUNOLE1BQ0YsSUFBSyxZQUNIakQsTUFBTWhHLE1BQVErekIsU0FDZC90QixNQUFNTyxNQUFRekksTUFBTWtpQixjQUFjcGpCLFFBQVE0SCxRQUMxQ3dCLE1BQU1NLFdBQWF4QyxVQUFVd0UsZ0JBQWdCdkUsUUFDN0NpQyxNQUFNUSxLQUFPMUksTUFBTWtpQixjQUFjcGpCLFFBQVEwSCxPQUNyQ2lnQixjQUFhdmUsTUFBTWhCLGNBQWdCLFNBRWpDZ0IsTUFBTXZMLE9BQ1p1TCxNQUFNaUQsWUFDTixNQUNGLElBQUssV0FBWSxDQUNmLE1BQU1qSixNQUFRb25CLFNBQVNrUixrQkFBa0IvMEIsTUFDekMsR0FBSXd3QixTQUFTM0YsT0FBU3B1QixNQUFNb3VCLE1BQVEsRUFJbEMsWUFIQW5yQixHQUFHQyxjQUFjc04sTUFDZnBXLEtBQUtnSixLQUFLQyxTQUFTLGtDQUl2QjJDLE1BQU1oRyxNQUFRK3pCLFNBQ2QvdEIsTUFBTU8sTUFBUXpJLE1BQU1raUIsY0FBY3BqQixRQUFRNEgsUUFDMUN3QixNQUFNTSxXQUFheEMsVUFBVXdFLGdCQUFnQnZFLFFBQ3pDd2dCLGNBQWF2ZSxNQUFNaEIsY0FBZ0IsR0FDbkMrdUIsU0FBUzNGLE1BQVFwdUIsTUFBTW91QixRQUN6QnBvQixNQUFNaEIsYUFDSmdCLE1BQU1oQixjQUFnQmhGLE1BQU1vdUIsTUFBUTJGLFNBQVMzRixRQUc3Q3BvQixNQUFNaEIsY0FBZ0IsSUFDeEJnQixNQUFNTSxXQUNKTixNQUFNTSxXQUFhMUwsS0FBS0MsSUFBSW1MLE1BQU1oQixjQUFnQixFQUNwRGdCLE1BQU1oQixjQUFnQixTQUdsQmdCLE1BQU12TCxPQUNadUwsTUFBTWlELFlBQ04sT0FLSixNQUdGLElBQUssdUJBQXdCLENBQzNCLE1BQU0yYSxVQUFZRCxtQkFBbUIxSyxZQUFZMVYsTUFDM0N5QyxZQUFjNGQsVUFBVW1YLGtCQUM1Qmo5QixNQUFNa2lCLGNBQWNwakIsUUFBUTJKLE9BRTlCK1IsRUFBRTJnQixRQUFRdjRCLEtBQUssWUFBWSxTQUNyQjNHLFNBQVMwYyxlQUFlelEsTUFBTTNLLEtBQUtaLFlBQ25DbXBCLFVBQVVvWCxxQkFDaEIsTUFHRixJQUFLLDJCQUE0QixDQUMvQixNQUFNbHBCLE9BQVMyUixnQkFBZ0J4SyxZQUFZMVYsWUFDckN1TyxPQUFPbXBCLHlCQUNiLE1BR0YsSUFBSyxvQkFBcUIsQ0FDeEIsTUFBTW5wQixPQUFTMlIsZ0JBQWdCeEssWUFBWTFWLE1BQ3JDeUMsWUFBYzhMLE9BQU9pcEIsa0JBQ3pCajlCLE1BQU1raUIsY0FBY3BqQixRQUFRMkosT0FFOUIrUixFQUFFMmdCLFFBQVF2NEIsS0FBSyxZQUFZLFNBQ3JCM0csU0FBUzBjLGVBQWV6USxNQUFNM0ssS0FBS1osWUFDbkNxWCxPQUFPa3BCLHFCQUNiLE1BRUYsSUFBSyxvQkFBcUIsQ0FDeEIsTUFBTXRHLGVBQWlCLElBQUl6RCxXQUFXLENBQ3BDOXNCLFNBQXNDLFNBQTVCODBCLE9BQU9yOEIsUUFBUXVILFNBQ3pCNkosWUFBYWxRLE1BQU0yTSxXQUVyQmlxQixlQUFlejBCLFNBQVdnNUIsT0FBT3I4QixRQUFRcytCLE9BQ3pDeEcsZUFBZTdpQixVQUFZb25CLE9BQU9yOEIsUUFBUWtWLE9BQzFDNGlCLGVBQWVwd0IsT0FBUzIwQixPQUFPcjhCLFFBQVE4TixPQUNuQ3d2QixjQUFjdDlCLFFBQVE4YixZQUN4QmdjLGVBQWVoYyxVQUFZd2hCLGNBQWN0OUIsUUFBUThiLFdBRW5EZ2MsZUFBZW5QLGlCQWdCZixNQUVGLElBQUssd0JBQXlCLENBQzVCLE1BQU02RyxlQUFpQi9FLG1CQUFtQnBPLFlBQVkxVixNQUN0RDZvQixlQUFldEIsK0JBQ1RzQixlQUFlN0csaUJBQ3JCLE1BRUYsSUFBSyx1QkFBd0IsQ0FDM0IsTUFBTTZHLGVBQWlCL0UsbUJBQW1CcE8sWUFBWTFWLFlBQ2hENm9CLGVBQWUrTyxjQUNyQixNQUVGLElBQUssb0JBQXFCLENBQ3hCLE1BQU0vTyxlQUFpQi9FLG1CQUFtQnBPLFlBQVkxVixZQUNoRDZvQixlQUFldEksYUFDckIsTUFFRixJQUFLLG9CQUFxQixDQUN4QixNQUFNalMsVUFBWXRPLEtBQUszRyxRQUFRaVYsVUFDekJ1cEIsT0FBUzczQixLQUFLM0csUUFBUTdCLE9BQ3RCc1csWUFBY25ULFdBQVdnQyxnQkFBZ0IyUixpQkFDekNSLFlBQVl3YyxXQUFXdU4sUUFDN0IsTUFBTTVhLFFBQVVqZCxLQUFLRSxjQUFjLGlCQUM3QjBqQixVQUFZNWpCLEtBQUtFLGNBQWMsZUFDckM2VSxFQUFFNk8sV0FBV2tVLE9BQU8sZ0NBQ2hCN2EsU0FBU0EsUUFBUWxRLGVBQ2Y4VyxTQUFTN0IsZUFBZWhpQixNQUU5QixNQUdGLElBQUssb0JBQXFCLENBQ3hCLE1BQU02b0IsZUFBaUIvRSxtQkFBbUJwTyxZQUFZMVYsWUFDaEQ2b0IsZUFBZXlCLGFBQ3JCLE1BR0YsSUFBSyxtQkFDaUIvcEIsVUFBVW1WLFlBQVkxVixPQUNwQysyQixZQUNOLE1BR0YsSUFBSyxvQkFDaUJ4MkIsVUFBVW1WLFlBQVkxVixPQUNwQysyQixZQUNOLE1BR0YsSUFBSyxvQkFDaUJ4MkIsVUFBVW1WLFlBQVkxVixPQUNwQyszQixZQUNOLE1BR0YsSUFBSyxnQ0FDaUJ4M0IsVUFBVW1WLFlBQVkxVixPQUNwQ2c0Qix1QkFDTixNQUdGLElBQUssZ0NBQ2lCejNCLFVBQVVtVixZQUFZMVYsT0FDcENpNEIsdUJBQ04sTUFHRixJQUFLLGVBQWdCLENBQ25CLE1BQU14MUIsWUFBY2xDLFVBQVVtVixZQUFZMVYsTUFDMUN5QyxNQUFNME0sU0FBVSxFQUNoQjFNLE1BQU15MUIsZUFFSjM5QixNQUFNQyxTQUNORCxNQUFNRSxTQUNZLEtBQWxCRixNQUFNRyxTQUNZLE1BQWxCSCxNQUFNRyxRQUVOK0gsTUFBTXVmLGVBQWUsQ0FBRW1XLFlBQVksSUFFbkMxMUIsTUFBTXVmLGlCQUVSLE1BR0YsSUFBSyxrQkFBbUIsQ0FDdEIsTUFBTXZmLFlBQWNsQyxVQUFVbVYsWUFBWTFWLE1BQzFDeUMsTUFBTTIxQixTQUFVLFFBQ1YzMUIsTUFBTTRQLFdBQ1o1UCxNQUFNdWYsZUFBZSxDQUFFcVcsV0FBVyxJQUNsQyxNQUdGLElBQUssdUJBQXdCLENBQzNCLE1BQU01MUIsWUFBY2xDLFVBQVVtVixZQUFZMVYsWUFDcEN5QyxNQUFNNjFCLHNCQUNaNzFCLE1BQU15MUIsZUFDTnoxQixNQUFNdWYsaUJBQ04sTUFHRixJQUFLLDBCQUEyQixDQUM5QixNQUFNelMsU0FBV1gsYUFBYThHLFlBQVkxVixZQUNwQ3VQLFNBQVNncEIsNkJBQ1RocEIsU0FBU3lTLGlCQUNmLE1BR0YsSUFBSyx3QkFBeUIsQ0FDNUIsTUFBTXpTLFNBQVdYLGFBQWE4RyxZQUFZMVYsWUFDcEN1UCxTQUFTaXBCLDJCQUNUanBCLFNBQVN5UyxpQkFDZixNQUdGLElBQUssaUJBQWtCLENBQ3JCLE1BQU16UyxTQUFXWCxhQUFhOEcsWUFBWTFWLFlBQ3BDdVAsU0FBU2twQixnQkFDVGxwQixTQUFTeVMsaUJBQ2YsTUFHRixJQUFLLGdCQUFpQixDQUNwQixNQUFNelMsU0FBV1gsYUFBYThHLFlBQVkxVixZQUNwQ3VQLFNBQVNtcEIsYUFDYmhELE9BQU9yOEIsUUFBUTZWLGFBRVhLLFNBQVN5UyxpQkFDZixNQUdGLElBQUssZ0JBQWlCLENBQ3BCLE1BQU16UyxTQUFXWCxhQUFhOEcsWUFBWTFWLFlBQ3BDdVAsU0FBU29wQixjQUNmcHBCLFNBQVN5UyxpQkFDVCxNQUdGLElBQUssaUJBQWtCLENBQ3JCLE1BQU16UyxTQUFXWCxhQUFhOEcsWUFBWTFWLFlBQ3BDdVAsU0FBU3FwQixVQUNmcnBCLFNBQVN5UyxpQkFDVCxNQWlCRixJQUFLLGlCQUFrQixDQUNyQixNQUFNekcsU0FBV0osYUFBYXpGLFlBQVkxVixZQUNwQ3ViLFNBQVNHLFVBQ2ZILFNBQVN5RyxpQkFDVCxNQUdGLElBQUssbUJBQW9CLENBQ3ZCLE1BQU16RyxTQUFXSixhQUFhekYsWUFBWTFWLE1BQzFDdWIsU0FBU3BNLFNBQVUsRUFDbkJvTSxTQUFTeUcsaUJBQ1QsUUFhTixnQ0FBaUN6bkIsT0FDL0JBLE1BQU15TSxpQkFDTixNQUVNbkwsUUFGU3RCLE1BQU1raUIsY0FDRDFHLFFBQVEsY0FDUDdWLGNBQWMsaUJBQy9CckUsVUFDR0EsUUFBUXFRLE1BQU0wUSxRQUdqQi9nQixRQUFRcVEsTUFBTTBRLFFBQ2MsU0FBMUIvZ0IsUUFBUXFRLE1BQU0wUSxRQUFxQixRQUFVLE9BSC9DL2dCLFFBQVFxUSxNQUFNMFEsUUFBVSxVQ2puQ3pCLE1BQU13RCwyQkFBMkIzUyxjQUN0QzNILFlBQWFwSixTQUFXLEtBQU1xRSxPQUFTLEtBQU0wSixhQUFjLEdBQ3pEcUUsTUFBTXBTLFNBQVUrTixhQUNoQnJLLEtBQUtXLE9BQVNBLE9BQ2RYLEtBQUtzZCxVQUFXLEVBQ2hCdGQsS0FBSzRnQixhQUFjLEVBQ25CNWdCLEtBQUs2Z0IsV0FBWSxFQUNqQjdnQixLQUFLOGdCLGFBQWMsRUFDbkI5Z0IsS0FBSytnQixXQUFZLEVBQ2pCL2dCLEtBQUtnaEIsY0FBZSxFQUNwQmhoQixLQUFLK1UsVUFBWSxLQUNqQi9VLEtBQUs0akIsV0FBYSxLQUNsQjVqQixLQUFLMGQsUUFBUyxFQUdoQixlQUNFLE1BQU8sMERBR1Qsb0JBRUUsTUFBTTdJLFlBQWNwZSxLQUFLcWUsU0FBU25lLElBQUlxSixLQUFLK1UsaUJBRXJDRixZQUFZZ1gsUUFBUSxPQUFRLGlCQUFpQixTQUM3Q3ZzQixHQUFHMFYsS0FBS0MsY0FBY0osYUFBYSxHQUczQyx1QkFDRXRhLFdBQVcwVCxtQkFBbUJqTyxLQUFLMUQsVUFDbkMsTUFBTTRILFdBQWF1USxlQUFlelUsS0FBS3NHLFNBQVV0RyxNQUUzQ29PLFlBQWMsR0FDaEJwTyxLQUFLeEQsTUFBTzRSLFlBQVk1UixNQUFRd0QsS0FDL0JvTyxZQUFZL1IsTUFBUTJELEtBQ3pCLE1BQU1qRixRQUFVdEMsWUFBWXVDLFdBQVdvVCxhQUlqQzlWLFNBQVcsQ0FDZk8sTUFIV21ILEtBQUszRCxNQUFNeEQsS0FBT21ILEtBQUszRCxNQUFNeEQsS0FBT3BDLEtBQUtvQyxNQUd6QzJDLEdBQ1hULFFBQ0FVLFFBQVN5SSxNQUdQLENBQUMsU0FBVSxhQUFhbE0sU0FBU2dJLEtBQUsxSixZQUN4Q2dDLFNBQVNDLFFBQVVFLFlBQVk0VixxQkFBcUIsT0FHdEQvVixTQUFTRSxPQUFRLEVBSWpCLGFBRjBCQyxZQUFZaUQsT0FBT3BELFVBSy9DLHVCQUNFLE1BQU00TCxXQUFhdVEsZUFBZXpVLEtBQUtzRyxTQUFVdEcsTUFFM0NyRixRQUFVbEUsS0FBS3FlLFNBQVNuZSxJQUFJcUosS0FBSytVLFdBRWpDblosVUFBWWpCLFFBQVF3UCxPQUFPLENBQUUxTyxRQUFTeUksT0FFNUMsYUFETTVFLEdBQUcwVixLQUFLQyxjQUFjclosS0FBSyxHQUMxQkEsSUFHVCtsQixXQUFZRSxVQUNWLE1BQU1MLEtBQU9LLFNBQVM3cEIsU0FBUyxLQUMzQnVDLFdBQVdtbkIsa0JBQWtCRyxVQUM3QkEsU0FDSjdoQixLQUFLd2hCLE9BQVN4aEIsS0FBS3doQixNQUdyQix3QkFBeUIzZ0IsUUFBVSxLQUFNeWhCLFNBQVUsR0FDakQsTUFBTWpnQixNQUFRLElBQUlsQyxVQStCbEIsR0E3QkFrQyxNQUFNME0sU0FBVSxFQUNoQjFNLE1BQU1rZ0IsV0FBWSxFQUNsQmxnQixNQUFNSyxtQkFBcUIxQyxLQUFLK1UsVUFDaEMxUyxNQUFNQyxTQUFXLFVBQ2pCRCxNQUFNRSxLQUFPLFlBQ2JGLE1BQU1HLE9BQVMsU0FDZkgsTUFBTWhHLE1BQVEyRCxLQUFLMUQsU0FDbkIrRixNQUFNUSxLQUFPN0MsS0FBS1csT0FDbEIwQixNQUFNTyxNQUFRL0IsUUFDZHdCLE1BQU1NLFdBQWF4QyxVQUFVd0UsZ0JBQWdCdkUsUUFDN0NpQyxNQUFNaEIsYUFBZSxFQUVqQjVLLEtBQUtvQyxLQUFLeVIsS0FBTXRLLEtBQUt5ekIsZUFBZ0IsRUFDcEN6ekIsS0FBS3l6QixlQUFnQixFQUV0Qnp6QixLQUFLNGdCLGNBQWF2ZSxNQUFNaEIsY0FBZ0IsR0FDeENyQixLQUFLNmdCLFlBQVd4ZSxNQUFNaEIsY0FBZ0IsR0FDdENyQixLQUFLZ2hCLGVBQWMzZSxNQUFNaEIsY0FBZ0IsR0FDekNyQixLQUFLK2dCLFlBQVcxZSxNQUFNaEIsY0FBZ0IsU0FFcENnQixNQUFNdkwsT0FDWmtKLEtBQUtxQyxNQUFRQSxNQUNickMsS0FBSzBkLFFBQVMsRUFDZDFkLEtBQUtzZCxVQUFXLEVBQ1pnRixTQUFTamdCLE1BQU1pRCxZQUVuQnRGLEtBQUt3Z0IsZUFDSG5lLE1BQU1wQyxlQUFpQkUsVUFBVUYsYUFBYU0sU0FDOUM4QixNQUFNcEMsZUFBaUJFLFVBQVVGLGFBQWFPLFNBQzVDUixLQUFLeTRCLFlBQWN6NEIsS0FBSzhnQixZQUFhLENBQ3ZDLE1BQU1ubUIsY0FBZ0JsRSxLQUFLaWlDLFdBQVdDLFlBQVksb0JBQXFCLENBQ3JFenFCLFVBQVdsTyxLQUFLa08sVUFDaEI2RyxVQUFXL1UsS0FBSytVLFVBQ2hCMUssWUFBYXJLLEtBQUtxSyxZQUNsQi9OLFNBQVUwRCxLQUFLMUQsV0FFakIwRCxLQUFLNGpCLFdBQWFqcEIsUUFBUWEsSUFBTWIsUUFBUWkrQixJQU0xQyxPQUhJNTRCLEtBQUs4Z0IsY0FBZ0I5Z0IsS0FBS3FDLE1BQU1XLFVBQ2xDaEQsS0FBS3FDLE1BQU1zMEIsWUFFTnQwQixNQUdULHlCQUEwQkEsTUFBUSxNQUNoQyxJQUFLQSxRQUFVckMsS0FBS3FDLE1BQU8sT0FBTyxLQU9sQyxHQUxJQSxRQUFPckMsS0FBS3FDLE1BQVFBLE9BQ3hCckMsS0FBS2xKLEtBQU82SSxTQUFTNEQsYUFBYXZELEtBQUtxQyxPQUN2Q3JDLEtBQUswZCxRQUFTLEVBRWQxZCxLQUFLbEosS0FBSzZyQixVQUFZLEdBQ2xCM2lCLEtBQUtsSixLQUFLMEosU0FBVSxDQUN0QlIsS0FBS2xKLEtBQUs4ckIsVUFBWSxZQUN0QjVpQixLQUFLbEosS0FBSytyQixVQUFZcHNCLEtBQUtnSixLQUFLQyxTQUFTLHdCQUN6QyxJQUFLLElBQUk2YyxNQUFRLEVBQUdBLE1BQVEsRUFBR0EsUUFDN0J2YyxLQUFLbEosS0FBSzZyQixVQUFVNXFCLEtBQUssY0FFdEIsR0FBSWlJLEtBQUtsSixLQUFLMkosT0FBUSxDQUMzQlQsS0FBS2xKLEtBQUs4ckIsVUFBWSxVQUN0QjVpQixLQUFLbEosS0FBSytyQixVQUFZcHNCLEtBQUtnSixLQUFLQyxTQUFTLGVBQ3pDLElBQUssSUFBSTZjLE1BQVEsRUFBR0EsTUFBUSxFQUFHQSxRQUM3QnZjLEtBQUtsSixLQUFLNnJCLFVBQVU1cUIsS0FBSyxlQUV0QixHQUFJaUksS0FBS2xKLEtBQUtnc0IsUUFBUyxDQUM1QjlpQixLQUFLbEosS0FBSzhyQixVQUFZLFlBQ2xCemlCLFVBQVVGLGFBQWFHLFVBQVlKLEtBQUtsSixLQUFLbUosZUFDL0NELEtBQUtsSixLQUFLK3JCLFVBQVlwc0IsS0FBS2dKLEtBQUtDLFNBQVMsd0JBRXZDUyxVQUFVRixhQUFhSyxPQUFTTixLQUFLbEosS0FBS21KLGVBQzVDRCxLQUFLbEosS0FBSytyQixVQUFZcHNCLEtBQUtnSixLQUFLQyxTQUFTLHFCQUV2Q1MsVUFBVUYsYUFBYU0sVUFBWVAsS0FBS2xKLEtBQUttSixlQUMvQ0QsS0FBS2xKLEtBQUsrckIsVUFBWXBzQixLQUFLZ0osS0FBS0MsU0FBUyx3QkFFM0MsSUFBSyxJQUFJNmMsTUFBUSxFQUFHQSxNQUFRdmMsS0FBS2xKLEtBQUttSixhQUFjc2MsUUFDbER2YyxLQUFLbEosS0FBSzZyQixVQUFVNXFCLEtBQUssYUFHM0JpSSxLQUFLbEosS0FBSzhyQixVQUFZLFFBQ3RCNWlCLEtBQUtsSixLQUFLK3JCLFVBQVlwc0IsS0FBS2dKLEtBQUtDLFNBQVMsZ0JBQ3pDTSxLQUFLbEosS0FBSzZyQixVQUFVNXFCLEtBQUssU0FHM0IsSUFBS2lJLEtBQUs0akIsYUFBZTVqQixLQUFLOGdCLGFBQWU5Z0IsS0FBS3k0QixVQUFXLENBQzNELE1BQU1qVyxlQUFpQixJQUFJN0MsbUJBQ3pCM2YsS0FBSzBnQixnQkFDTDFnQixLQUFLK1UsV0FFRDBOLHdCQUEwQkQsZUFBZUUsbUJBQy9DMWlCLEtBQUt3aUIsZUFBaUJDLGtCQUFrQmpuQixTQUVwQ3dFLEtBQUs0aEIsaUJBR2IsbUJBQW9CaGlCLEtBQU1tVixVQUFZLE1BQ3BDLE1BQU1rTCxVQUFZLElBQUlELG1CQU90QixPQU5BemxCLFdBQVd3RixxQkFBcUJrZ0IsVUFBV3JnQixNQUMzQ3FnQixVQUFVbnBCLEtBQU82SSxTQUFTMlYsWUFBWTFWLE1BRWxDQSxLQUFLK1YsUUFBUSxZQUNmc0ssVUFBVWxMLFVBQVluVixLQUFLK1YsUUFBUSxZQUFZMWMsUUFBUThiLFVBQ2xEa0wsVUFBVWxMLFVBQVlBLFVBQ3RCa0wsVUFHVCx3QkFBeUJsTCxXQUN2QixNQUFNcGEsUUFBVWxFLEtBQUtxZSxTQUFTbmUsSUFBSW9lLFdBQ2xDLElBQUtwYSxRQUFTLE9BQU8sS0FDckIsTUFBTWlGLEtBQU8rVSxFQUFFaGEsUUFBUTVCLEtBQUswQyxTQUFTLEdBRS9Cd2tCLFVBQVlELG1CQUFtQjFLLFlBQVkxVixLQUFNbVYsV0FHdkQsT0FGQWtMLFVBQVVsTCxVQUFZQSxVQUVma0wsVUFHVCx3QkFBeUI5bEIsTUFBT29uQixlQUFnQixHQUM5QyxNQUFNM2hCLEtBQU96RixNQUFNa2lCLGNBQWMxRyxRQUFRLG9CQUNuQzZMLEtBQU9ybkIsTUFBTWtpQixjQUFjcGpCLFFBQVF1b0IsS0FDbkNDLFVBQVlsbkIsV0FBV21uQixrQkFBa0JGLE1BRy9DLEdBQUtELGNBSUUsQ0FFTCxNQUFNdEIsVUFBWUQsbUJBQW1CMUssWUFBWTFWLE1BQ2pEcWdCLFVBQVUwQixXQUFXSCxNQUNyQnZCLFVBQVUyQixzQkFQVmhpQixLQUFLM0csUUFBUXdvQixXQUF5QyxTQUE1QjdoQixLQUFLM0csUUFBUXdvQixXQUN2Q3RuQixNQUFNa2lCLGNBQWMxaUIsVUFBVTZPLE9BQU8sZUFDckNyTyxNQUFNa2lCLGNBQWNwakIsUUFBUTBJLFNBQVcvQixLQUFLM0csUUFBUXdvQixXQVN4RHNCLFlBQWFDLFdBQVlDLGdCQUFpQkMsU0FFbkNsakIsS0FBSzNELE1BQU04bUIsVUFBVUgsYUFDeEIxakIsR0FBR0MsY0FBY3NOLE1BQ2YsR0FBRzdNLEtBQUszRCxNQUFNSyxrREFHbEJzRCxLQUFLbEosS0FBS3VHLE1BQVEsS0FDbEIyQyxLQUFLbEosS0FBS21KLGFBQWVnakIsZ0JBQ3pCampCLEtBQUtsSixLQUFLc3NCLFdBQVksRUFDdEJGLFFBQVFqcUIsUUFBUW9xQixXQUFZLEVBRTVCLE1BQU1DLFVBQVlKLFFBQVFwakIsY0FBYyxjQUN4Q3dqQixVQUFVcnFCLFFBQVFvRSxNQUFRLEtBQzFCaW1CLFVBQVVycUIsUUFBUWdILGFBQWVnakIsZ0JBQ2pDSyxVQUFVcnFCLFFBQVFtcUIsV0FBWSxFQUU5QixNQUFNRyxhQUFlTCxRQUFRcGpCLGNBQWMsbUJBQ3JDMGpCLFVBQVlOLFFBQVFwakIsY0FBYyxlQUNsQys0QixpQkFBbUIzVixRQUFRcGpCLGNBQy9CLDJDQUlGLE9BRkkrNEIsa0JBQWtCQSxpQkFBaUJsL0IsVUFBVWdULE9BQU8sYUFFaERzVyxpQkFDTixLQUFLOWlCLFVBQVVGLGFBQWFHLFFBQzFCb2pCLFVBQVU5RyxVQUFZam1CLEtBQUtnSixLQUFLQyxTQUFTLHVCQUN6QzZqQixhQUFhN0csVUFBWWptQixLQUFLZ0osS0FBS1ksT0FDakMsZ0NBQ0EsQ0FDRTJpQixXQUNBL2lCLGFBQWN4SixLQUFLZ0osS0FBS0MsU0FBUyw0QkFHckMsTUFFRixLQUFLUyxVQUFVRixhQUFhSyxLQUMxQmtqQixVQUFVOUcsVUFBWWptQixLQUFLZ0osS0FBS0MsU0FBUyxvQkFDekM2akIsYUFBYTdHLFVBQVlqbUIsS0FBS2dKLEtBQUtZLE9BQ2pDLGdDQUNBLENBQ0UyaUIsV0FDQS9pQixhQUFjeEosS0FBS2dKLEtBQUtDLFNBQVMseUJBR3JDLE1BRUYsS0FBS1MsVUFBVUYsYUFBYU0sUUFDdEJzNEIsbUJBQWtCQSxpQkFBaUI1L0IsUUFBUXVILFVBQVcsR0FDMURnakIsVUFBVTlHLFVBQVlqbUIsS0FBS2dKLEtBQUtDLFNBQVMsdUJBQ3pDNmpCLGFBQWE3RyxVQUFZam1CLEtBQUtnSixLQUFLWSxPQUNqQyxnQ0FDQSxDQUNFMmlCLFdBQ0EvaUIsYUFBY3hKLEtBQUtnSixLQUFLQyxTQUFTLDRCQUdyQyxNQUVGLEtBQUtTLFVBQVVGLGFBQWFPLFNBQ3RCcTRCLG1CQUFrQkEsaUJBQWlCNS9CLFFBQVF1SCxVQUFXLEdBQzFEZ2pCLFVBQVU5RyxVQUFZam1CLEtBQUtnSixLQUFLQyxTQUFTLHdCQUN6QzZqQixhQUFhN0csVUFBWWptQixLQUFLZ0osS0FBS1ksT0FDakMsZ0NBQ0EsQ0FDRTJpQixXQUNBL2lCLGFBQWN4SixLQUFLZ0osS0FBS0MsU0FBUyw2QkFTekM4akIsVUFBVTdwQixVQUFVYyxRQUFRLFVBQVcsV0FDdkN5b0IsUUFBUXBqQixjQUFjLGlCQUFpQjZNLFNBQ3ZDdVcsUUFBUXBqQixjQUFjLGlCQUFpQmdNLE1BQU0wUSxRQUFVLE9BQ3ZEaUgsU0FBUzdCLGVBQWVzQixVQ3BSckIsTUFBTTRWLGlCQUFpQnZ5QixNQUM1QixtQkFDRW1JLE1BQU1xcUIsbUJBQ0EvNEIsS0FBS2c1QixlQW1DYixvQkFBcUJqZ0MsS0FBTTZCLFFBQVUsSUFzQm5DLE9BckJBN0IsS0FBS3lELE1BQVF6RCxLQUFLeUQsT0FBUyxHQUNULGNBQWR6RCxLQUFLa0MsS0FDUG93QixZQUNFdHlCLEtBQUt5RCxNQUNMLENBQ0V5OEIsUUFBUSxFQUNSQyxTQUFVLEdBQ1ZDLFlBQWEsRUFDYkMsV0FBVyxFQUNYQyxZQUFhLEdBRWYsQ0FBRUMsV0FBVyxJQUVRLFlBQWR2Z0MsS0FBS2tDLEtBQ2RsQyxLQUFLc0YsSUFBTSxxQ0FDWSxjQUFkdEYsS0FBS2tDLE9BQ2RsQyxLQUFLc0YsSUFBTSxzQkFDWGd0QixZQUFZdHlCLEtBQUt5RCxNQUFPLENBQ3RCNDhCLFdBQVcsS0FHUjFxQixNQUFNaFQsT0FBTzNDLEtBQU02QixTQU81QjIrQixxQkFDRSxNQUFNQyxXQUFhLENBQ2pCandCLFFBQVMsQ0FDUEksR0FBSSxHQUNKSyxHQUFJLEdBQ0pSLElBQUssR0FDTHFoQixJQUFLLEdBQ0w0RCxHQUFJLEdBQ0poRSxNQUFPLEtBc0JYLFlBbkJ5Q3BsQixJQUFyQ3JGLEtBQUtqSCxLQUFLQSxLQUFLd1EsU0FBU0ksSUFBSWdPLE9BQzlCNmhCLFdBQVdqd0IsUUFBUUksR0FBR2dPLE1BQU8sUUFFVXRTLElBQXJDckYsS0FBS2pILEtBQUtBLEtBQUt3USxTQUFTUyxJQUFJMk4sT0FDOUI2aEIsV0FBV2p3QixRQUFRUyxHQUFHMk4sTUFBTyxRQUVXdFMsSUFBdENyRixLQUFLakgsS0FBS0EsS0FBS3dRLFNBQVNDLEtBQUttTyxPQUMvQjZoQixXQUFXandCLFFBQVFDLElBQUltTyxNQUFPLFFBRVV0UyxJQUF0Q3JGLEtBQUtqSCxLQUFLQSxLQUFLd1EsU0FBU3NoQixLQUFLbFQsT0FDL0I2aEIsV0FBV2p3QixRQUFRc2hCLElBQUlsVCxNQUFPLFFBRVN0UyxJQUFyQ3JGLEtBQUtqSCxLQUFLQSxLQUFLd1EsU0FBU2tsQixJQUFJOVcsT0FDOUI2aEIsV0FBV2p3QixRQUFRa2xCLEdBQUc5VyxNQUFPLFFBRWF0UyxJQUF4Q3JGLEtBQUtqSCxLQUFLQSxLQUFLd1EsU0FBU2toQixPQUFPOVMsT0FDakM2aEIsV0FBV2p3QixRQUFRa2hCLE1BQU05UyxNQUFPLEdBRzNCNmhCLFdBR1Qsc0JBQ0UsTUFBTS95QixnQkFBa0IsQ0FDdEIyUCxJQUFLLENBQ0gvWSxNQUFPLEtBQ1BvOEIsVUFBVyxhQUNYcnpCLE1BQU8sa0JBQ1BqTixRQUFTLE1BRVhrZCxJQUFLLENBQ0hoWixNQUFPLEtBQ1BvOEIsVUFBVyxhQUNYcnpCLE1BQU8sc0JBQ1BqTixRQUFTLE1BRVhtZCxJQUFLLENBQ0hqWixNQUFPLEtBQ1BvOEIsVUFBVyxhQUNYcnpCLE1BQU8sY0FDUGpOLFFBQVMsTUFFWG9kLElBQUssQ0FDSGxaLE1BQU8sS0FDUG84QixVQUFXLGFBQ1hyekIsTUFBTyxtQkFDUGpOLFFBQVMsTUFFWHFkLElBQUssQ0FDSG5aLE1BQU8sS0FDUG84QixVQUFXLGFBQ1hyekIsTUFBTyxvQkFDUGpOLFFBQVMsTUFFWHNkLElBQUssQ0FDSHBaLE1BQU8sS0FDUG84QixVQUFXLGFBQ1hyekIsTUFBTyxzQkFDUGpOLFFBQVMsTUFFWHVkLElBQUssQ0FDSHJaLE1BQU8sS0FDUG84QixVQUFXLGFBQ1hyekIsTUFBTyxlQUNQak4sUUFBUyxNQUVYd2QsSUFBSyxDQUNIdFosTUFBTyxLQUNQbzhCLFVBQVcsYUFDWHJ6QixNQUFPLG1CQUNQak4sUUFBUyxPQUdiLEdBQUk2RyxLQUFLakgsS0FBS0EsS0FBSzBOLGdCQUNqQixJQUFLLE1BQU8zSyxJQUFLdUIsU0FBVXRELE9BQU9DLFFBQ2hDZ0csS0FBS2pILEtBQUtBLEtBQUswTixpQkFFZkEsZ0JBQWdCM0ssS0FBTyxDQUNyQkEsSUFDQTI5QixVQUFXaGpDLEtBQUtnSixLQUFLQyxTQUFTckMsTUFBTThJLE9BQ3BDQyxNQUFPM1AsS0FBS2dKLEtBQUtDLFNBQVNyQyxNQUFNK0ksT0FDaEMvSSxNQUFPQSxNQUFNQSxNQUNiaUQsS0FBTXJKLEtBQUs2UyxNQUFNek0sTUFBTUEsTUFBUSxJQUFNLEtBQ3JDa0QsUUFBU3RKLEtBQUs2UyxNQUFNek0sTUFBTUEsTUFBUSxJQUFNLEtBQ3hDbEUsUUFBU2tFLE1BQU1sRSxTQUlyQixPQUFPc04sZ0JBT1QsdUJBQXdCaXpCLGFBT3hCLG9CQUNFLE9BQU8xNUIsS0FBSzI1QixRQUFRM3pCLE1BQ2xCNHpCLEdBQUtBLEVBQUU3Z0MsS0FBS3FOLFFBQVUzUCxLQUFLZ0osS0FBS0MsU0FBUyw0QkFJN0MsZUFDRSxPQUFPTSxLQUFLMjVCLFFBQVEzekIsTUFDbEI0ekIsR0FBS0EsRUFBRTdnQyxLQUFLcU4sUUFBVTNQLEtBQUtnSixLQUFLQyxTQUFTLHVCQUk3Qyx5QkFDRSxRQUFLTSxLQUFLNjVCLGdCQUNGNzVCLEtBQUs2NUIsY0FBYzlnQyxLQUFLK2dDLFNBR2xDLGVBQ0UsUUFBSzk1QixLQUFLNFMsV0FDRjVTLEtBQUs0UyxTQUFTN1osS0FBSytnQyxTQUc3QixhQUNFLE1BQU12cEIsZUFBaUJ2USxLQUFLNjVCLGVBQWU5Z0MsS0FBS3cyQixPQUFPdEQsTUFBTThOLFNBQzdELElBQUk5bEIsU0FBVzFELGFBQ1h2USxLQUFLNjVCLGVBQWU5Z0MsTUFBTWtiLFVBQVUrbEIsT0FDcENoNkIsS0FBSzY1QixlQUFlOWdDLE1BQU1rYixTQUFTZ21CLFNBQ2xDMXBCLGNBQWdCMEQsV0FBVUEsU0FBV2hkLEtBQUt1dEIsTUFBTXZRLFNBQVcsT0FDaEUsSUFBSWltQixzQkFBd0JsNkIsS0FBSzRTLFVBQVU3WixLQUFLdzJCLE9BQU90RCxNQUFNa08sV0FDekRDLGVBQWlCRixvQkFDakIsS0FDQWw2QixLQUFLNFMsVUFBVTdaLE1BQU1rYixTQUFTZ21CLFNBQzdCQyxxQkFBdUJFLGlCQUMxQkEsZ0JBQWtDLE1BRXBDLElBQUlDLGlCQUFtQnI2QixLQUFLbVEsbUJBQ3hCSSxhQUNFLEdBQUcwRCxZQUFZeGQsS0FBS2dKLEtBQUtDLFNBQVMsaUJBQ2xDLEdBQUd1VSxZQUFZeGQsS0FBS2dKLEtBQUtDLFNBQVMsZ0JBQ3BDLEtBQ0osTUFBTTQ2QixxQkFBdUJGLGdCQUN6QnA2QixLQUFLbVQsU0FDSCttQixvQkFDRSxLQUNBLEdBQUdFLGtCQUFrQjNqQyxLQUFLZ0osS0FBS0MsU0FBUyxnQkFFNUMsS0FNSixPQUxJTSxLQUFLbVQsVUFBYW1uQixzQkFBeUJKLHNCQUM3Q0EscUJBQXNCLEdBRW5Cam1CLFdBQVVvbUIsaUJBQW1CLElBRTNCLENBQ0xSLGNBQWUsQ0FDYmpqQyxPQUFRb0osS0FBS21RLG1CQUNiNHBCLFNBQVUvNUIsS0FBS21RLG1CQUFxQkksa0JBQWVsTCxFQUNuRGsxQixRQUFTdjZCLEtBQUttUSxvQkFBc0JJLGtCQUFlbEwsRUFDbkQ0TyxTQUFValUsS0FBS21RLG1CQUFxQjhELGNBQVc1TyxFQUMvQ3VMLGFBQWN5cEIsa0JBQW9CLEdBQ2xDRyxLQUFNeDZCLEtBQUttUSxtQkFDUCxHQUFHMVosS0FBS2dKLEtBQUtDLFNBQVMsd0JBQ3BCMjZCLGlCQUFtQixLQUFPQSxpQkFBbUIsS0FFL0M1akMsS0FBS2dKLEtBQUtDLFNBQVMsdUJBRXpCZ1IsV0FBWSxDQUNWOVosT0FBUW9KLEtBQUttVCxTQUNieEMsV0FBWTNRLEtBQUttVCxTQUFXK21CLHlCQUFzQjcwQixFQUNsRDRPLFNBQVVtbUIsZUFDVnhwQixhQUFjMHBCLHNCQUF3QixHQUN0Q0UsS0FBTXg2QixLQUFLbVQsU0FDUCttQixvQkFDRXpqQyxLQUFLZ0osS0FBS0MsU0FBUywyQkFDbkIsR0FBR2pKLEtBQUtnSixLQUFLQyxTQUNYLDZCQUNHNDZCLHNCQUF3QixLQUMvQjdqQyxLQUFLZ0osS0FBS0MsU0FBUyxvQkFLN0IsZUFDRSxPQUFLakosS0FBS0ksU0FBU0YsSUFBSSxPQUFRLFlBQzNCcUosS0FBS29ELFFBQ0FwRCxLQUFLeEQsT0FBT3pELE1BQU1zRixLQUFPMkIsS0FBSzNCLElBRTlCMkIsS0FBS2pILEtBQUt5RCxPQUFPNkIsS0FBTzJCLEtBQUszQixJQUphMkIsS0FBSzNCLElBUTFELHlCQUEwQjA3QixVQUFXLEVBQU05bEIsU0FBVyxHQVNwRCxJQUFJN2MsT0FBUyxLQUNiLE1BQU1xakMscUJBQXVCVixTQUN6QnRqQyxLQUFLSSxTQUFTRixJQUFJLE9BQVEsOEJBQzFCRixLQUFLSSxTQUFTRixJQUFJLE9BQVEsNkJBQzlCLEdBQTZCLFNBQXpCOGpDLHFCQUFpQyxDQUNuQ3JqQyxPQUFTLENBQ1BnaUIsUUFBUSxFQUNSRCxPQUFPLEVBQ1B1aEIsWUFBYSxNQUVmLE1BQU1DLG1CQUFxQmxrQyxLQUFLbWtDLE9BQU9qa0MsSUFBSThqQyxzQkFFM0MsR0FEQXJqQyxPQUFPeWpDLGdCQUFrQkYsbUJBQW1CN2pDLFlBQ0QsSUFBaENNLE9BQU95akMsVUFBVXRqQyxRQUFRLEdBQW9CLENBQ3RELEdBQ0UyRCxNQUFNNC9CLG1CQUFtQkMsU0FDekIzakMsT0FBT3lqQyxVQUFVdGpDLFFBQVEsR0FBR3dCLEtBQUtrQyxLQUNqQyxDQUNBLE1BQU00SCxLQUFPcE0sS0FBS21LLE1BQU1qSyxJQUFJUyxPQUFPeWpDLFVBQVV0akMsUUFBUSxHQUFHd0IsS0FBS2lpQyxlQUN6QyxJQUFUbjRCLE1BQ0xBLEtBQUs5SixNQUFNQSxNQUFNa0MsTUFBTW1lLFNBQVFoaUIsT0FBT2dpQixRQUFTLEdBQy9DdlcsS0FBSzlKLE1BQU1BLE1BQU1rQyxNQUFNa2UsUUFBTy9oQixPQUFPK2hCLE9BQVEsR0FDakQvaEIsT0FBT3NqQyxZQUFjLEdBQUc3M0IsS0FBS25HLFFBQVF1K0IsV0FBV0MsV0FDOUNyNEIsS0FBSzlKLEtBQUtBLEtBQUsyaEMsWUFBWXI5QixTQUU3QmpHLE9BQU9zRixLQUFPbUcsS0FBS25HLFlBQ1ptRyxLQUFLOUosS0FBSzYvQixVQUNYNTRCLEtBQUttN0Isd0JBQXdCLE9BQVEsQ0FBQ3Q0QixLQUFLOUosUUFFakR1RyxHQUFHQyxjQUFjc04sTUFDZnBXLEtBQUtnSixLQUFLQyxTQUFTLDBDQUt2QnhFLE1BQU00L0IsbUJBQW1CTSxPQUN6QmhrQyxPQUFPeWpDLFVBQVV0akMsUUFBUSxHQUFHd0IsS0FBS2tDLE9BRWpDN0QsT0FBT3NqQyxZQUFjTyxXQUFXQyxXQUM5QjlqQyxPQUFPeWpDLFVBQVV0akMsUUFBUSxHQUFHd0IsS0FBS3dTLFlBSXJDak0sR0FBR0MsY0FBY3NOLE1BQ2ZwVyxLQUFLZ0osS0FBS0MsU0FBUywyQ0FNekIsT0FBS3E2QixVQUVELzVCLEtBQUs2NUIsb0JBQ0Q3NUIsS0FBSzY1QixjQUFjMXZCLE9BQU8sQ0FDOUIydkIsVUFBVSxFQUNWN2xCLFNBQVUsQ0FDUitsQixPQUFRRCxVQUFZOWxCLFNBQVdBLGNBQVc1TyxFQUMxQzQwQixRQUFTRixjQUFXMTBCLEVBQXVCLEtBQVg0TyxTQUNoQ29uQixNQUFPLEdBRVQ5TCxNQUFPLENBQ0x0RCxLQUFNLENBQ0o4TixtQkFNQXJyQixNQUFNeXNCLHdCQUF3QixlQUFnQixDQUNsRCxDQUNFLzBCLE1BQU8zUCxLQUFLZ0osS0FBS0MsU0FBUywwQkFDMUIydUIsS0FBTSwrQ0FDTjdtQixPQUFReEgsS0FBS3M3QixLQUNicm5CLFNBQVUsQ0FDUitsQixPQUFRRCxVQUFZOWxCLFNBQVdBLGNBQVc1TyxFQUMxQzQwQixRQUFTRixjQUFXMTBCLEVBQXVCLEtBQVg0TyxTQUNoQ29uQixNQUFPLEdBRVQ5TCxNQUFPLENBQ0x0RCxLQUFNLENBQ0pzUCxTQUFTLEVBQ1R4QixXQUlKRCxVQUFVLEtBU1QxaUMsUUE1Q2VBLE9BK0N4QixvQkFBcUIraUMsWUFBYSxFQUFNbG1CLFVBQ2xDalUsS0FBSzRTLGVBQ0Q1UyxLQUFLNFMsU0FBU3pJLE9BQU8sQ0FDekIydkIsVUFBVSxFQUNWN2xCLFNBQVUsQ0FDUmdtQixTQUFVRSxZQUFjbG1CLFNBQXNCLEtBQVhBLGNBQWtCNU8sRUFDckRnMkIsTUFBTyxHQUVUOUwsTUFBTyxDQUNMdEQsS0FBTSxDQUNKa08scUJBS0F6ckIsTUFBTXlzQix3QkFBd0IsZUFBZ0IsQ0FDbEQsQ0FDRS8wQixNQUFPM1AsS0FBS2dKLEtBQUtDLFNBQVMscUJBQzFCMnVCLEtBQU0sZ0RBQ043bUIsT0FBUXhILEtBQUtzN0IsS0FDYnJuQixTQUFVLENBQ1JnbUIsU0FBVUUsWUFBY2xtQixTQUFzQixLQUFYQSxjQUFrQjVPLEVBQ3JEZzJCLE1BQU8sR0FFVDlMLE1BQU8sQ0FDTHRELEtBQU0sQ0FDSnNQLFNBQVMsRUFDVHBCLGFBR0pMLFVBQVUsS0FNbEIsMEJBQ0UsYUFBYTk1QixLQUFLNjVCLGVBQWUyQixVQUduQyxxQkFDRSxhQUFheDdCLEtBQUs0UyxVQUFVNG9CLFVBZ0I5QixrQkFDRTlGLFVBQ0FyNEIsT0FDQSxRQUNXLEVBQUssTUFDUCxFQUFJLFFBQ0YsRUFBSyxLQUNSLEVBQUssZ0JBQ00sR0FDZixJQUVKLE1BQU10RSxLQUFPLENBQ1gyRCxLQUFNZzVCLFVBQ056NkIsS0FBTSxRQUNObEMsS0FBTSxDQUNKc0UsTUFDQWduQixXQUFZLENBQ1Z2TixTQUFTLEVBQ1RDLE9BQ0FoZixLQUNBaWYsVUFXTixPQVBZLElBQVIzWSxNQUNGdEYsS0FBS3NGLElBQU1BLE1BRVUsSUFBbkJraEIsaUJBQ0Z4bUIsS0FBS0EsS0FBS3dtQixlQUFpQkEsZUFDM0J4bUIsS0FBS0EsS0FBS3NyQixXQUFXdk4sU0FBVSxHQUUxQi9kLEtBSVQsa0JBQW1CMjhCLFVBQVdyNEIsTUFBT28rQixXQUFZLEdBQy9DLE1BQU0xaUMsS0FBTysvQixTQUFTNEMsV0FBV2hHLFVBQVdyNEIsT0FJNUMsYUFIc0IyQyxLQUFLbTdCLHdCQUF3QixPQUFRLENBQUNwaUMsTUFBTyxDQUNqRTRpQyxZQUFhRixZQUtqQix3QkFBeUIvK0IsS0FBTWsvQixVQUFXLEVBQU92YyxLQUFPLE1BR3RELE1BQU13YyxnQkFBa0I1YyxzQkFBc0J2akIsT0FDNUMsR0FDQWpGLEtBQUtnSixLQUFLQyxTQUNSazhCLFNBQ0ksaUNBQ0EsbUNBRU4sRUFDQWwvQixNQUVJVyxNQUFRTyxPQUFPaStCLFVBQVVsbEMsSUFBSSxlQUM3Qm9DLEtBQU8sQ0FDWDJELEtBQ0F6QixLQUFNLFFBQ05sQyxLQUFNLENBQ0p3bUIsZUFBZ0I5b0IsS0FBS2dKLEtBQUtDLFNBQ3hCazhCLFNBQ0ksaUNBQ0EsbUNBRU52YyxLQUFNcmIsTUFBTTNHLE9BQVMsRUFBSUEsTUFDekJ3VSxZQUFhLENBQ1hpcUIsU0FBVSxLQUNWQyxXQUFZLEtBQ1pDLFVBQVcsS0FDWGxxQixXQUFZLE1BRWR1UyxXQUFZLENBQ1Z2TixTQUFTLEVBQ1RHLFVBQVcya0IsU0FDWDFrQixRQUFTMGtCLFNBQ1Q1a0IsUUFBUSxXQUlSaFgsS0FBS203Qix3QkFBd0IsT0FBUSxDQUFDcGlDLE1BQU8sQ0FDakQ0aUMsYUFBY3RjLE9BR2hCLE9BRGNyZixLQUFLaThCLGdCQUFnQnYvQixNQUN0QixHQU1mLHFCQUNFLEdBQXVCLGFBQW5Cc0QsS0FBS2pILEtBQUtrQyxLQUFxQixPQUNuQyxHQUFJK0UsS0FBS3FsQixhQUFhLGVBQWdCLE9BTXRDLEdBQXNCLElBSFBybEIsS0FBS2k4QixnQkFDbEJ4bEMsS0FBS2dKLEtBQUtDLFNBQVNtVyxLQUFLdUUsd0JBRWZqaUIsT0FBYyxDQUV2QixJQUNFLE1BQU15SyxZQUFjNUMsS0FBS203Qix3QkFDdkIsT0FDQSxDQUNFLENBQ0V6K0IsS0FBTWpHLEtBQUtnSixLQUFLQyxTQUFTbVcsS0FBS3VFLHVCQUM5Qm5mLEtBQU0sUUFDTmxDLEtBQU0sQ0FDSnNtQixLQUFNLEVBQ05oaUIsTUFBTyxLQUNQa2lCLGVBQWdCOW9CLEtBQUtnSixLQUFLQyxTQUN4Qm1XLEtBQUsyRSw0QkFFUDZKLFdBQVksQ0FDVnJOLFFBQVEsRUFDUkMsVUFBVSxFQUNWSCxTQUFTLEdBRVh5WSxNQUFPLE1BSWIsQ0FBRW9NLGFBQWEsSUFHWE8sYUFBZWw4QixLQUFLbTdCLHdCQUN4QixPQUNBLENBQ0UsQ0FDRXorQixLQUFNLGdCQUNOekIsS0FBTSxTQUNObEMsS0FBTSxDQUNKMmhDLFlBQWEsQ0FDWHI5QixNQUFPLDRCQUNQMlgsS0FBTSw2QkFFUm1uQixRQUFTLFNBQ1Q5WCxXQUFZLENBQ1Z4TSxNQUFNLEVBQ05DLE1BQU0sTUFLZCxDQUFFNmpCLGFBQWEsSUFFakIsR0FBSS80QixNQUFNekssT0FBUyxHQUFLK2pDLE9BQU8vakMsT0FBUyxFQUFHLENBQ3pDLE1BQU1pa0MsY0FBZ0JwOEIsS0FBS1ksTUFBTWpLLElBQUl1bEMsT0FBTyxHQUFHMWdDLFVBQ3pDNGdDLGNBQWNqeUIsT0FBTyxDQUN6QixxQkFBc0J2SCxNQUFNLEdBQUdwSCxHQUMvQix1QkFBd0JvSCxNQUFNLEdBQUdsRyxRQUdyQyxNQUFPbkQsS0FDUDhpQyxRQUFReHZCLE1BQU0sa0JBQW9CdFQsSUFBSW9CLGVBR2xDcUYsS0FBS3M4QixhQUFhLGdCQUs1QixpQkFBa0IzRyxTQUFVNEcsU0FBVyxFQUFHZCxXQUFZLEdBQ3BELE1BQU0xaUMsS0FBTyxDQUNYMkQsS0FBTWk1QixTQUNOMTZCLEtBQU0sT0FDTmxDLEtBQU0sQ0FDSndqQyxXQU1KLGFBSHNCdjhCLEtBQUttN0Isd0JBQXdCLE9BQVEsQ0FBQ3BpQyxNQUFPLENBQ2pFNGlDLFlBQWFGLFlBS2pCLHNCQUF1QnRoQyxNQUFRLE1BQzdCLE1BQU1zaEMsV0FBWXRoQyxRQUFTQSxNQUFNMk0sU0FDakMsSUFBSzlHLEtBQUt3OEIsZ0JBQWdCL2xDLEtBQUtnSixLQUFLQyxTQUFTbVcsS0FBS2tFLGNBQ2hELE9BQU8vWixLQUFLeThCLFdBQVdobUMsS0FBS2dKLEtBQUtDLFNBQVNtVyxLQUFLa0UsYUFBYzBoQixXQUUvRCxJQUFJbGYsTUFBUSxFQUNSb1osU0FBV2wvQixLQUFLZ0osS0FBS0MsU0FBU21XLEtBQUtrRSxhQUFlLElBQU13QyxNQUM1RCxLQUFPdmMsS0FBS3c4QixnQkFBZ0I3RyxXQUMxQnBaLFFBQ0FvWixTQUFXbC9CLEtBQUtnSixLQUFLQyxTQUFTbVcsS0FBS2tFLGFBQWUsSUFBTXdDLE1BRTFELE9BQU92YyxLQUFLeThCLFdBQVc5RyxTQUFVOEYsV0FHbkMsaUJBQWtCOUYsU0FBVThGLFdBQVksR0FDdEMsTUFBTTFpQyxLQUFPLENBQ1gyRCxLQUFNaTVCLFNBQ04xNkIsS0FBTSxPQUNObEMsS0FBTSxJQUtSLGFBSHNCaUgsS0FBS203Qix3QkFBd0IsT0FBUSxDQUFDcGlDLE1BQU8sQ0FDakU0aUMsWUFBYUYsWUFLakIsdUJBQXdCdGhDLE1BQVEsTUFDOUIsTUFBTXNoQyxXQUFZdGhDLFFBQVNBLE1BQU0yTSxTQUNqQyxJQUFLOUcsS0FBS3c4QixnQkFBZ0IvbEMsS0FBS2dKLEtBQUtDLFNBQVNtVyxLQUFLb0UsZUFDaEQsT0FBT2phLEtBQUswOEIsWUFBWWptQyxLQUFLZ0osS0FBS0MsU0FBU21XLEtBQUtvRSxjQUFld2hCLFdBRWpFLElBQUlsZixNQUFRLEVBQ1JvWixTQUFXbC9CLEtBQUtnSixLQUFLQyxTQUFTbVcsS0FBS29FLGNBQWdCLElBQU1zQyxNQUM3RCxLQUFPdmMsS0FBS3c4QixnQkFBZ0I3RyxXQUMxQnBaLFFBQ0FvWixTQUFXbC9CLEtBQUtnSixLQUFLQyxTQUFTbVcsS0FBS29FLGNBQWdCLElBQU1zQyxNQUUzRCxPQUFPdmMsS0FBSzA4QixZQUFZL0csU0FBVThGLFdBR3BDLGtCQUFtQjlGLFVBTWpCLE1BTGEsQ0FDWGo1QixLQUFNaTVCLFNBQ04xNkIsS0FBTSxRQUNObEMsS0FBTSxJQUtWLGtCQUFtQjQ4QixTQUFVOEYsV0FBWSxHQUN2QyxNQUFNMWlDLEtBQU8rL0IsU0FBUzZELFdBQVdoSCxVQUlqQyxhQUhzQjMxQixLQUFLbTdCLHdCQUF3QixPQUFRLENBQUNwaUMsTUFBTyxDQUNqRTRpQyxZQUFhRixZQUtqQix1QkFBd0J0aEMsTUFBUSxNQUM5QixNQUFNc2hDLFdBQVl0aEMsUUFBU0EsTUFBTTJNLFNBQ2pDLElBQUs5RyxLQUFLdzhCLGdCQUFnQi9sQyxLQUFLZ0osS0FBS0MsU0FBU21XLEtBQUttRSxlQUNoRCxPQUFPaGEsS0FBSzQ4QixZQUNWbm1DLEtBQUtnSixLQUFLQyxTQUFTbVcsS0FBS21FLGNBQ3hCLEtBQ0F5aEIsV0FHSixJQUFJbGYsTUFBUSxFQUNSbVosVUFBWWovQixLQUFLZ0osS0FBS0MsU0FBU21XLEtBQUttRSxjQUFnQixJQUFNdUMsTUFDOUQsS0FBT3ZjLEtBQUt3OEIsZ0JBQWdCOUcsWUFDMUJuWixRQUNBbVosVUFBWWovQixLQUFLZ0osS0FBS0MsU0FBU21XLEtBQUttRSxjQUFnQixJQUFNdUMsTUFHNUQsT0FBT3ZjLEtBQUs0OEIsWUFBWWxILFVBQVcsS0FBTStGLFdBRzNDLHNCQUF1QnRoQyxNQUFRLE1BQzdCLE1BQU1zaEMsV0FBWXRoQyxRQUFTQSxNQUFNMk0sU0FDakMsSUFBSzlHLEtBQUt3OEIsZ0JBQWdCL2xDLEtBQUtnSixLQUFLQyxTQUFTbVcsS0FBS3FFLGNBQ2hELE9BQU9sYSxLQUFLNjhCLFdBQVdwbUMsS0FBS2dKLEtBQUtDLFNBQVNtVyxLQUFLcUUsYUFBYyxFQUFHdWhCLFdBRWxFLElBQUlsZixNQUFRLEVBQ1JvWixTQUFXbC9CLEtBQUtnSixLQUFLQyxTQUFTbVcsS0FBS3FFLGFBQWUsSUFBTXFDLE1BQzVELEtBQU92YyxLQUFLdzhCLGdCQUFnQjdHLFdBQzFCcFosUUFDQW9aLFNBQVdsL0IsS0FBS2dKLEtBQUtDLFNBQVNtVyxLQUFLcUUsYUFBZSxJQUFNcUMsTUFFMUQsT0FBT3ZjLEtBQUs2OEIsV0FBV2xILFNBQVUsRUFBRzhGLFdBR3RDLHdCQUF5QnRoQyxNQUFRLE1BQy9CLE1BQU1zaEMsV0FBWXRoQyxRQUFTQSxNQUFNMk0sU0FDakMsSUFBSTh1QixXQUFhbi9CLEtBQUtnSixLQUFLQyxTQUFTbVcsS0FBS3NFLGVBQ3pDLEdBQUluYSxLQUFLdzhCLGdCQUFnQi9sQyxLQUFLZ0osS0FBS0MsU0FBU21XLEtBQUtzRSxnQkFBaUIsQ0FDaEUsSUFBSW9DLE1BQVEsRUFFWixJQURBcVosV0FBYW4vQixLQUFLZ0osS0FBS0MsU0FBU21XLEtBQUtzRSxlQUFpQixJQUFNb0MsTUFDckR2YyxLQUFLdzhCLGdCQUFnQjVHLGFBQzFCclosUUFDQXFaLFdBQWFuL0IsS0FBS2dKLEtBQUtDLFNBQVNtVyxLQUFLc0UsZUFBaUIsSUFBTW9DLE1BSWhFLE1BQU14akIsS0FBTyxDQUNYMkQsS0FBTWs1QixXQUNOMzZCLEtBQU0sU0FDTmxDLEtBQU0sQ0FDSnNyQixXQUFZLEtBSWhCLElBQUssTUFBT3ZvQixPQUFRL0IsT0FBT0MsUUFBUTZiLEtBQUtpbkIsa0JBQ3RDL2pDLEtBQUtBLEtBQUtzckIsV0FBV3ZvQixNQUFPLFFBRXhCa0UsS0FBS203Qix3QkFBd0IsT0FBUSxDQUFDcGlDLE1BQU8sQ0FDakQ0aUMsWUFBYUYsWUFJakIsdUJBQXdCdmlDLE1BQVEsTUFDOUIsTUFBTTZqQyxJQUFNLzhCLEtBQUtqSCxLQUFLQSxLQUFLaWtDLFVBQ3ZCNytCLFVBQVU2QixLQUFLakgsS0FBS0EsS0FBS2lrQyxXQUN6QixHQUNKRCxJQUFJaGxDLEtBQUssQ0FDUG1CLE1BQ0FtRSxNQUFPLGFBRUgyQyxLQUFLbUssT0FBTyxDQUFFLGlCQUFrQjR5QixNQUd4QyxxQkFBc0J4Z0IsTUFBTzlnQixTQUMzQixNQUFNc2hDLElBQU01K0IsVUFBVTZCLEtBQUtqSCxLQUFLQSxLQUFLaWtDLFdBQ3JDRCxJQUFJeGdCLE9BQU9sZixNQUFRNUIsY0FDYnVFLEtBQUttSyxPQUFPLENBQUUsaUJBQWtCNHlCLEtBQU8sQ0FBRW55QixRQUFRLElBR3pELHFCQUFzQjJSLE1BQU9yakIsT0FDM0IsTUFBTTZqQyxJQUFNNStCLFVBQVU2QixLQUFLakgsS0FBS0EsS0FBS2lrQyxXQUNyQ0QsSUFBSXhnQixPQUFPcmpCLE1BQVFBLFlBQ2I4RyxLQUFLbUssT0FBTyxDQUFFLGlCQUFrQjR5QixNQUd4Qyx1QkFBd0J4Z0IsT0FDdEIsTUFBTXdnQixJQUFNNStCLFVBQVU2QixLQUFLakgsS0FBS0EsS0FBS2lrQyxXQUNyQ0QsSUFBSWpOLE9BQU92VCxNQUFPLFNBQ1p2YyxLQUFLbUssT0FBTyxDQUFFLGlCQUFrQjR5QixNQUd4Qyx1QkFBd0J4Z0IsT0FDdEIsR0FBYyxJQUFWQSxNQUFhLE9BQ2pCLE1BQU13Z0IsSUFBTTUrQixVQUFVNkIsS0FBS2pILEtBQUtBLEtBQUtpa0MsV0FDckMsR0FBSXpnQixPQUFTd2dCLElBQUk1a0MsT0FBUSxPQUN6QixNQUFNbzhCLEtBQU93SSxJQUFJak4sT0FBT3ZULE1BQU8sR0FBRyxHQUNsQ3dnQixJQUFJak4sT0FBT3ZULE1BQVEsRUFBRyxFQUFHZ1ksWUFDbkJ2MEIsS0FBS21LLE9BQU8sQ0FBRSxpQkFBa0I0eUIsTUFHeEMseUJBQTBCeGdCLE9BQ3hCLE1BQU13Z0IsSUFBTTUrQixVQUFVNkIsS0FBS2pILEtBQUtBLEtBQUtpa0MsV0FDckMsR0FBSXpnQixPQUFTd2dCLElBQUk1a0MsT0FBUyxFQUFHLE9BQzdCLE1BQU1vOEIsS0FBT3dJLElBQUlqTixPQUFPdlQsTUFBTyxHQUFHLEdBQ2xDd2dCLElBQUlqTixPQUFPdlQsTUFBUSxFQUFHLEVBQUdnWSxZQUNuQnYwQixLQUFLbUssT0FBTyxDQUFFLGlCQUFrQjR5QixNQUd4QyxxQkFBc0JseEIsVUFDcEIsTUFBTW5QLEtBQU8sUUFBVW1QLFNBQVM1UyxRQUFRZ2tDLGVBQ2xDajlCLEtBQUttSyxPQUFPLENBQUUsQ0FBQ3pOLE1BQU9tUCxTQUFTeE8sUUFXdkMsOEJBQStCNi9CLGFBQWNDLFVBQVd2aUMsU0FDdEQsTUFBTXdpQyxtQkFBcUIsR0FDM0IsSUFBSWplLFVBQVksRUFDWmtlLGVBQWlCLEVBQ2pCckIsV0FBWSxFQUNaRCxZQUFhLEVBQ2pCLElBQUssTUFBTWhqQyxRQUFRb2tDLFVBQ2pCLE9BQVFwa0MsS0FBS2tDLE1BQ1gsSUFBSyxRQUdILEdBRkFra0IsVUFBWXBtQixLQUFLQSxLQUFLc21CLEtBQ3RCZ2UscUJBQXVCcjFCLFNBQVNzMUIsY0FBY3Q5QixLQUFNakgsTUFDN0IsY0FBbkJpSCxLQUFLakgsS0FBS2tDLEtBQXNCLENBRWxDLEdBQUkrRSxLQUFLdzhCLGdCQUFnQnpqQyxLQUFLMkQsTUFBTyxPQVFyQyxHQU5JeWlCLFdBQ0V6WSxPQUFPeVksYUFBZXpZLE9BQU8zTixLQUFLQSxLQUFLc0UsU0FDekN0RSxLQUFLQSxLQUFLc0UsTUFBUWdnQyxnQkFJbEJyNUIsTUFBTXBHLE9BQU83RSxLQUFLQSxLQUFLc0UsUUFBUyxDQUNsQyxJQUFJQSxNQUNKLElBQ0VBLGFBQ1EsSUFBSXRHLEtBQ1JnQyxLQUFLQSxLQUFLc0UsTUFDVjJDLEtBQUt1OUIsd0JBQ0wxdEIsU0FBUyxDQUFFMVksT0FBTyxLQUNwQkcsTUFDRixNQUFPaUMsS0FDUDhELE1BQVEsS0FFTkEsUUFBT3RFLEtBQUtBLEtBQUtzRSxNQUFRcEcsS0FBSzZTLE1BQU16TSxjQUVyQ3RFLEtBQUtBLEtBQUtzRSxNQUFRLEtBRXpCLEdBQUkySyxTQUFTQyxVQUFVbFAsTUFBTyxDQUM1QixNQUFNd21CLGVBQWlCeG1CLEtBQUtBLEtBQUt3bUIsZ0JBQWdCMWpCLGNBQ2pELEdBQUkwakIsZUFBZ0IsQ0FDbEIsSUFBSWllLFVBQVksSUFDWnprQyxLQUFLQSxNQUFNdzJCLE9BQU93TSxZQUFjaGpDLEtBQUtBLE1BQU13MkIsT0FBT3lNLGFBQ3BEd0IsVUFBWXg5QixLQUFLc2MsT0FBT3BrQixRQUFPNm1CLE1BQ3hCQSxHQUFHaG1CLEtBQUtBLEtBQUt3bUIsbUJBRWhCeG1CLEtBQUtBLE1BQU13MkIsT0FBT3dNLGFBQ2xCaGQsR0FBR2htQixLQUFLQSxLQUFLdzJCLE9BQU93TSxnQkFLcEJoakMsS0FBS0EsTUFBTXcyQixPQUFPeU0sWUFDbEJqZCxHQUFHaG1CLEtBQUtBLEtBQUt3MkIsT0FBT3lNLFlBS3BCemMsZUFBZTFqQixnQkFDZmtqQixHQUFHaG1CLEtBQUtBLEtBQUt3bUIsZ0JBQWdCMWpCLG1CQUtuQyxNQUFNZ2dDLGdCQUFrQjVjLHNCQUFzQnZqQixPQUM1QzhoQyxVQUNBemtDLEtBQUtBLEtBQUt3bUIsZUFDVjhkLGdCQUVGLEdBQUl4QixVQUFXLENBQ2IsR0FBSUEsVUFBVWxsQyxJQUFJLGtCQUFtQixDQUNuQyxNQUFNOG1DLGFBQWV6OUIsS0FBS1ksTUFBTWpLLElBQzlCa2xDLFVBQVVsbEMsSUFBSSxtQkFFaEIsSUFBSyxNQUFPbUYsSUFBS3VCLFNBQVV0RCxPQUFPQyxRQUFRakIsS0FBS0EsS0FBS3cyQixPQUM5Q2x5QixhQUFhb2dDLGFBQWFDLFlBQVk1aEMsS0FHNUMsWUFEQS9DLEtBQUsyRCxLQUFPc0wsU0FBUzIxQixtQkFBbUJGLGVBR3BDNUIsVUFBVWxsQyxJQUFJLGtCQUNoQm9DLEtBQUsyRCxLQUFPbS9CLFVBQVVsbEMsSUFBSSxrQkFDckJvQyxLQUFLMkQsS0FBT3NMLFNBQVMyMUIsbUJBQW1CNWtDLFlBS2hELENBQ2tCQSxLQUFLQSxLQUFLd21CLGlCQUUvQnhtQixLQUFLMkQsS0FBT3NMLFNBQVMyMUIsbUJBQW1CNWtDLE9BSXhDMk4sT0FBT3lZLGFBQWV6WSxPQUFPMjJCLGtCQUMvQnRrQyxLQUFLQSxLQUFLc21CLEtBQU9nZSxnQkFHbkJELG1CQUFtQnJsQyxLQUFLb0csVUFBVXBGLE9BQ2xDLE1BRUYsSUFBSyxTQUNILEdBQXVCLGNBQW5CaUgsS0FBS2pILEtBQUtrQyxLQUFzQixDQUNsQyxNQUFNMmlDLFVBQVk3a0MsS0FBS0EsTUFBTTZKLE9BQU9xaUIsTUFBTXZvQixLQUMxQyxHQUFJa2hDLFVBQVcsQ0FDYixJQUFJaDdCLE1BQVE1QyxLQUFLaThCLGdCQUFnQjJCLFdBQVcsR0FDNUMsSUFBS2g3QixNQUFPLENBQ1YsTUFBTWxHLEtBQU9raEMsVUFBVXo1QixNQUFNLGVBQ3pCeTVCLFVBQVV6NUIsTUFBTSxlQUFlLEdBQy9CeTVCLFVBQ0poN0IsWUFBYzVDLEtBQUs2OUIsa0JBQ2pCbmhDLE9BQ0UzRCxLQUFLQSxLQUFLc3JCLFlBQVlqTixNQUd4QnhVLFFBQU83SixLQUFLQSxLQUFLNkosTUFBTXFpQixLQUFLenBCLEdBQUtvSCxNQUFNcEgsSUFHN0MsTUFBTXNpQyxZQUFjL2tDLEtBQUtBLE1BQU02SixPQUFPc2lCLFlBQVl4b0IsS0FDbEQsR0FBSW9oQyxZQUFhLENBQ2YsSUFBSWw3QixNQUFRNUMsS0FBS2k4QixnQkFBZ0I2QixhQUFhLEdBQzlDLElBQUtsN0IsTUFBTyxDQUNWLE1BQU1sRyxLQUFPa2hDLFVBQVV6NUIsTUFBTSxlQUN6Qnk1QixVQUFVejVCLE1BQU0sZUFBZSxHQUMvQnk1QixVQUNKaDdCLFlBQWM1QyxLQUFLNjlCLGtCQUNqQm5oQyxPQUNFM0QsS0FBS0EsS0FBS3NyQixZQUFZak4sTUFHeEJ4VSxRQUFPN0osS0FBS0EsS0FBSzZKLE1BQU1zaUIsV0FBVzFwQixHQUFLb0gsTUFBTXBILEtBSXJENGhDLG1CQUFtQnJsQyxLQUFLb0csVUFBVXBGLE9BQ2xDLE1BR0YsSUFBSyxRQUFTLENBQ1osR0FBSUEsS0FBS0EsS0FBS2dsQyx1QkFBd0IsQ0FDcENobEMsS0FBS0EsS0FBSzBOLGdCQUFnQmtZLEtBQU8sR0FDakM1bEIsS0FBS0EsS0FBSzBOLGdCQUFnQmtZLEtBQUt2SSxJQUFNcFcsS0FBS2crQixrQkFBa0IsT0FDNURqbEMsS0FBS0EsS0FBSzBOLGdCQUFnQmtZLEtBQUt0SSxJQUFNclcsS0FBS2crQixrQkFBa0IsT0FDNURqbEMsS0FBS0EsS0FBSzBOLGdCQUFnQmtZLEtBQUtySSxJQUFNdFcsS0FBS2crQixrQkFBa0IsT0FDNURqbEMsS0FBS0EsS0FBSzBOLGdCQUFnQmtZLEtBQUtwSSxJQUFNdlcsS0FBS2crQixrQkFBa0IsT0FDNURqbEMsS0FBS0EsS0FBSzBOLGdCQUFnQmtZLEtBQUtuSSxJQUFNeFcsS0FBS2crQixrQkFBa0IsT0FDNURqbEMsS0FBS0EsS0FBSzBOLGdCQUFnQmtZLEtBQUtsSSxJQUFNelcsS0FBS2crQixrQkFBa0IsT0FDNURqbEMsS0FBS0EsS0FBSzBOLGdCQUFnQmtZLEtBQUtqSSxJQUFNMVcsS0FBS2crQixrQkFBa0IsT0FDNURqbEMsS0FBS0EsS0FBSzBOLGdCQUFnQmtZLEtBQUtoSSxJQUFNM1csS0FBS2crQixrQkFBa0IsT0FFNURqbEMsS0FBS0EsS0FBSzBOLGdCQUFnQmtZLEtBQUtzZixLQUFPLEdBQ3RDbGxDLEtBQUtBLEtBQUswTixnQkFBZ0JrWSxLQUFLc2YsS0FBSzVnQyxNQUFRMkcsTUFBTWhFLEtBQUtpK0IsTUFDbkQsS0FDQWorQixLQUFLaStCLEtBQ1RsbEMsS0FBS0EsS0FBSzBOLGdCQUFnQmtZLEtBQUtzZixLQUFLNzNCLE1BQVEzUCxLQUFLZ0osS0FBS0MsU0FDcEQsYUFFRjNHLEtBQUtBLEtBQUswTixnQkFBZ0JrWSxLQUFLc2YsS0FBS3hFLFVBQVloakMsS0FBS2dKLEtBQUtDLFNBQ3hELGFBR0czRyxLQUFLQSxLQUFLME4sZ0JBQWdCVixTQUM3QmhOLEtBQUtBLEtBQUswTixnQkFBZ0JWLE9BQVMsSUFFckNoTixLQUFLQSxLQUFLME4sZ0JBQWdCVixPQUFPcVEsSUFDL0JyZCxLQUFLQSxLQUFLME4sZ0JBQWdCa1ksS0FBS3ZJLElBQUkvWSxNQUNyQ3RFLEtBQUtBLEtBQUswTixnQkFBZ0JWLE9BQU9zUSxJQUMvQnRkLEtBQUtBLEtBQUswTixnQkFBZ0JrWSxLQUFLdEksSUFBSWhaLE1BQ3JDdEUsS0FBS0EsS0FBSzBOLGdCQUFnQlYsT0FBT3VRLElBQy9CdmQsS0FBS0EsS0FBSzBOLGdCQUFnQmtZLEtBQUtySSxJQUFJalosTUFDckN0RSxLQUFLQSxLQUFLME4sZ0JBQWdCVixPQUFPd1EsSUFDL0J4ZCxLQUFLQSxLQUFLME4sZ0JBQWdCa1ksS0FBS3BJLElBQUlsWixNQUNyQ3RFLEtBQUtBLEtBQUswTixnQkFBZ0JWLE9BQU95USxJQUMvQnpkLEtBQUtBLEtBQUswTixnQkFBZ0JrWSxLQUFLbkksSUFBSW5aLE1BQ3JDdEUsS0FBS0EsS0FBSzBOLGdCQUFnQlYsT0FBTzBRLElBQy9CMWQsS0FBS0EsS0FBSzBOLGdCQUFnQmtZLEtBQUtsSSxJQUFJcFosTUFDckN0RSxLQUFLQSxLQUFLME4sZ0JBQWdCVixPQUFPMlEsSUFDL0IzZCxLQUFLQSxLQUFLME4sZ0JBQWdCa1ksS0FBS2pJLElBQUlyWixNQUNyQ3RFLEtBQUtBLEtBQUswTixnQkFBZ0JWLE9BQU80USxJQUMvQjVkLEtBQUtBLEtBQUswTixnQkFBZ0JrWSxLQUFLaEksSUFBSXRaLE1BQ3JDdEUsS0FBS0EsS0FBSzBOLGdCQUFnQlYsT0FBT2s0QixLQUMvQmxsQyxLQUFLQSxLQUFLME4sZ0JBQWdCa1ksS0FBS3NmLEtBQUs1Z0MsTUFDbEN0RSxLQUFLQSxLQUFLME4sZ0JBQWdCbVksT0FBT0UsUUFDbkMvbEIsS0FBS0EsS0FBS0csTUFBUXpDLEtBQUtnSixLQUFLQyxTQUFTLG9CQUVyQzNHLEtBQUtBLEtBQUtHLE1BQVF6QyxLQUFLZ0osS0FBS0MsU0FBUyxtQkFFdkMzRyxLQUFLQSxLQUFLaW1CLGdCQUNpQyxPQUF6Q2ptQixLQUFLQSxLQUFLME4sZ0JBQWdCVixPQUFPcVEsS0FDUSxPQUF6Q3JkLEtBQUtBLEtBQUswTixnQkFBZ0JWLE9BQU9zUSxLQUNRLE9BQXpDdGQsS0FBS0EsS0FBSzBOLGdCQUFnQlYsT0FBT3VRLEtBQ1EsT0FBekN2ZCxLQUFLQSxLQUFLME4sZ0JBQWdCVixPQUFPd1EsS0FDUSxPQUF6Q3hkLEtBQUtBLEtBQUswTixnQkFBZ0JWLE9BQU95USxLQUNRLE9BQXpDemQsS0FBS0EsS0FBSzBOLGdCQUFnQlYsT0FBTzBRLEtBQ1EsT0FBekMxZCxLQUFLQSxLQUFLME4sZ0JBQWdCVixPQUFPMlEsS0FDUSxPQUF6QzNkLEtBQUtBLEtBQUswTixnQkFBZ0JWLE9BQU80USxLQUduQyxVQURxQjhHLGlCQUFpQi9oQixPQUFPM0MsS0FBS0EsTUF3QzNDLE9BdkNLLENBQ1YsTUFBTW1sQyxXQUFhLEdBQ25CLElBQUssTUFBTXBpQyxNQUFPLENBQ2hCLE1BQ0EsTUFDQSxNQUNBLE1BQ0EsTUFDQSxNQUNBLE1BQ0EsT0FFSS9DLEtBQUtBLEtBQUswTixnQkFBZ0JWLE9BQU9qSyxPQUNuQ29pQyxXQUFXLHdCQUF3QnBpQyxhQUNqQy9DLEtBQUtBLEtBQUswTixnQkFBZ0JWLE9BQU9qSyxLQUNuQ29pQyxXQUFXLHdCQUF3QnBpQyxlQUNqQy9DLEtBQUtBLEtBQUswTixnQkFBZ0I3QyxNQUFNOUgsTUFHbEMvQyxLQUFLQSxLQUFLME4sZ0JBQWdCVixPQUFPazRCLE9BQ25DQyxXQUFXLDBCQUNUbmxDLEtBQUtBLEtBQUswTixnQkFBZ0JWLE9BQU9rNEIsTUFFakNsbEMsS0FBS0EsS0FBSzBOLGdCQUFnQlYsT0FBTzJRLE1BQ25Dd25CLFdBQVcsMEJBQ1RubEMsS0FBS0EsS0FBSzBOLGdCQUFnQlYsT0FBTzJRLElBQ25Dd25CLFdBQVcsbUNBQ1QsTUFBUWpuQyxLQUFLNlMsTUFBTS9RLEtBQUtBLEtBQUswTixnQkFBZ0JWLE9BQU8yUSxJQUFNLEdBQzVEd25CLFdBQVcsb0NBQXNDQSxXQUMvQyx5QkFDRUEsV0FBVyx1QkFBeUJqbkMsS0FBSzZTLE1BQzNDL1EsS0FBS0EsS0FBSzBOLGdCQUFnQlYsT0FBTzJRLElBQU0sVUFHckMxVyxLQUFLbUssT0FBTyt6QixrQkFDWmwrQixLQUFLbUssT0FBTyxDQUNoQix3QkFBeUJuSyxLQUFLNEosTUFDOUIsc0JBQXVCNUosS0FBSzRKLFNBSWxDLE1BQU0wUyxPQUFTdmpCLEtBQUtBLEtBQUs2SCxNQUFNMUksUUFBT2ltQyxJQUFrQixVQUFaQSxHQUFHbGpDLE9BQ3pDbWpDLFlBQWNybEMsS0FBS0EsS0FBSzZILE1BQU0xSSxRQUFPaW1DLElBQWtCLFVBQVpBLEdBQUdsakMsT0FHcEQsU0FGTStFLEtBQUtxK0IsZUFBZS9oQixjQUNwQnRjLEtBQUtzK0IsU0FBU0YsYUFDaEIzbkMsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLDJCQUN0QnFKLEtBQUttSyxPQUFPLENBQUUsaUJBQWtCcFIsS0FBS0EsS0FBS3dsQyxpQkFFaEQsSUFBSyxNQUFNQyxlQUFlemxDLEtBQUtBLEtBQUswbEMsYUFFL0J6K0IsS0FBS2pILEtBQUtBLEtBQUtpa0MsV0FBV2gzQixNQUN6QitZLElBQU15ZixjQUFnQnpmLEdBQUc3bEIsU0FFM0JzbEMsbUJBRU14K0IsS0FBSzArQixpQkFBaUJGLGFBSWxDMTFCLE1BQU1DLEtBQUsscUJBQ1gsTUFFRixJQUFLLFlBQ0gsR0FBdUIsY0FBbkIvSSxLQUFLakgsS0FBS2tDLEtBQXNCLENBRWxDLEdBQUkrRSxLQUFLZzhCLFVBQVcsQ0FDbEIsSUFBSTJDLGdCQUFpQixFQVdyQixTQVZNM2lCLE9BQU80aUIsUUFBUSxDQUNuQjFsQyxNQUFPekMsS0FBS2dKLEtBQUtDLFNBQVMsdUJBQzFCakUsUUFBUyxNQUFNaEYsS0FBS2dKLEtBQUtZLE9BQU8sMEJBQTJCLENBQ3pEM0QsS0FBTXNELEtBQUt0RCxhQUVibWlDLElBQUssS0FDSEYsZ0JBQWlCLEdBRW5CRyxZQUFZLEtBRVZILGVBQ0MsYUFEcUIzK0IsS0FBSzIrQixpQkFJakMsTUFBTUksV0FBYSxHQUNuQixJQUFLLE1BQU1DLFNBQVNqbEMsT0FBT0MsUUFBUWpCLEtBQUtBLEtBQUtrbUMscUJBQXNCLENBQ2pFLE1BQU9uakMsSUFBS3VCLE9BQVMyaEMsTUFFckIsR0FEQWptQyxLQUFLQSxLQUFLa21DLG9CQUFvQm5qQyxNQUFPLEVBQ2pDdUIsTUFBTyxDQUNULE1BQU00SSxLQUFPakcsS0FBS2crQixrQkFBa0JsaUMsS0FDcENtSyxLQUFLbkssSUFBTUEsSUFDWGlqQyxXQUFXaG5DLEtBQUtrTyxPQUlwQixJQUFJaTVCLE9BRUosR0FBSUgsV0FBVzVtQyxPQUFTLEVBQUcsQ0FDekIsTUFBTWduQyxlQUFpQixHQUN2QkEsZUFBZTE0QixnQkFBa0JzNEIsV0FDakNJLGVBQWVqbUMsTUFBUXpDLEtBQUtnSixLQUFLQyxTQUFTLHlCQUMxQ3cvQixhQUFlMWhCLG1CQUFtQjloQixPQUFPeWpDLHFCQUNWLElBQXRCSixXQUFXNW1DLFNBQ3BCK21DLE9BQVNILFdBQVcsR0FBR2pqQyxLQUd6QixJQUFLb2pDLE9BQVEsT0FFYixHQURBbm1DLEtBQUtBLEtBQUtrbUMsb0JBQW9CQyxTQUFVLEVBQ3BDbm1DLEtBQUtBLEtBQUtxbUMsMkJBQTJCdGdCLFFBQVMsQ0FDaEQsSUFBSXpoQixNQUFRTyxPQUFPN0UsS0FBS0EsS0FBS3FtQywyQkFBMkIvaEMsT0FDeEQsR0FBSTJHLE1BQU0zRyxPQUFRLENBQ2hCLE1BQU00SSxLQUFPakcsS0FBS2crQixrQkFBa0JrQixRQUM5QnBvQyxLQUFPLElBQUlDLEtBQ2ZnQyxLQUFLQSxLQUFLcW1DLDJCQUEyQi9oQyxhQUVqQ3ZHLEtBQUtBLEtBQUssQ0FBRUssT0FBTyxJQUN6QkwsS0FBS3dPLFVBQVUsQ0FDYnhLLE9BQVEsMkJBQTJCbUwsS0FBS0csVUFBVXJOLEtBQUtBLEtBQUtxbUMsMkJBQTJCL2hDLFVBRXpGQSxNQUFRNEksS0FBSzVJLE1BQVF2RyxLQUFLUSxNQUFRUixLQUFLUSxNQUFRMk8sS0FBSzVJLFlBRWhEMkMsS0FBS21LLE9BQU8sQ0FDaEIsQ0FBQyx3QkFBd0IrMEIsZ0JBQWlCN2hDLGNBS3hDMkMsS0FBS3ErQixlQUFldGxDLEtBQUtBLEtBQUt1akIsT0FBUSxhQUU1QzhnQixtQkFBbUJybEMsS0FBS29HLFVBQVVwRixPQUNsQ2lqQyxXQUFZLEVBR2QsTUFDRixJQUFLLGFBQ0gsR0FBdUIsY0FBbkJoOEIsS0FBS2pILEtBQUtrQyxLQUFzQixDQUVsQyxHQUFJK0UsS0FBSys3QixXQUFZLENBQ25CLElBQUlzRCxpQkFBa0IsRUFXdEIsU0FWTXJqQixPQUFPNGlCLFFBQVEsQ0FDbkIxbEMsTUFBT3pDLEtBQUtnSixLQUFLQyxTQUFTLHdCQUMxQmpFLFFBQVMsTUFBTWhGLEtBQUtnSixLQUFLWSxPQUFPLDJCQUE0QixDQUMxRDNELEtBQU1zRCxLQUFLdEQsYUFFYm1pQyxJQUFLLEtBQ0hRLGlCQUFrQixHQUVwQlAsWUFBWSxLQUVWTyxnQkFDQyxhQURzQnIvQixLQUFLcS9CLGtCQUtsQyxNQUFNQyxpQkFBbUIsR0FDekJBLGlCQUFpQjc0QixnQkFBa0IxTixLQUFLQSxLQUFLd21DLHNCQUM3QyxJQUFJam9DLE1BQVEsRUFDUmtvQyxjQUFlLEVBQ25CLElBQUssTUFBTVIsU0FBU2psQyxPQUFPQyxRQUN6QmpCLEtBQUtBLEtBQUt3bUMsdUJBQ1QsQ0FDRCxNQUFPempDLElBQUt1QixPQUFTMmhDLE1BQ2YvNEIsS0FBT2pHLEtBQUtnK0Isa0JBQWtCbGlDLEtBQ3BDd2pDLGlCQUFpQjc0QixnQkFBZ0IzSyxLQUFLWSxLQUFPdUosS0FBS0csTUFDbERrNUIsaUJBQWlCNzRCLGdCQUFnQjNLLEtBQUt1QixNQUFRNEksS0FBSzVJLE1BQy9DQSxNQUFNc0UsV0FDUjI5QixpQkFBaUI3NEIsZ0JBQWdCM0ssS0FBS3hFLE1BQ3BDMk8sS0FBSzVJLE1BQ0xPLE9BQU8waEMsaUJBQWlCNzRCLGdCQUFnQjNLLEtBQUt1aEIsWUFDMUNoZ0IsTUFBTThmLFNBR1RxaUIsY0FBZSxFQUZmbG9DLE9BQVNnb0MsaUJBQWlCNzRCLGdCQUFnQjNLLEtBQUt4RSxPQU9yRCxHQURBZ29DLGlCQUFpQmhvQyxNQUFRQSxNQUNyQmtvQyxhQUFjLENBR2hCLFVBRHFCemlCLGtCQUFrQnJoQixPQUFPNGpDLGtCQUNqQyxPQUlmLElBQUssSUFBSS9pQixNQUFRLEVBQUdBLE1BQVF4akIsS0FBS0EsS0FBSzBtQyxPQUFPdG5DLE9BQVFva0IsUUFBUyxDQUM1RCxNQUFNbWpCLFdBQWEsQ0FDbkIsT0FBb0IsR0FDcEIsS0FBa0IsY0FDbEJBLFdBQVdyOEIsUUFBVXJELEtBQUt4RSxHQUMxQmtrQyxXQUFXL2lCLGFBQWUvZSxPQUFPN0UsS0FBS0EsS0FBSzBtQyxPQUFPbGpCLE9BQU8zaEIsU0FDekQ4a0MsV0FBV3htQyxNQUFRekMsS0FBS2dKLEtBQUtDLFNBQVMsNkJBR3RDLElBQUssTUFBTXJDLFNBQVN0RSxLQUFLQSxLQUFLMG1DLE9BQU9sakIsT0FBT0QsT0FDMUMsR0FBSXRVLFNBQVNDLFVBQVU1SyxPQUFRcWlDLFdBQVdwakIsT0FBT3ZrQixLQUFLc0YsV0FFakQsQ0FDSCxNQUFNdUYsTUFBUTVDLEtBQUtZLE1BQU1vRixNQUFLbkQsTUFDckJBLEtBQUtuRyxPQUFTVyxNQUFNWCxNQUFzQixVQUFkbUcsS0FBSzVILE9BRTFDLElBQUsySCxRQUFVQSxNQUFNN0osS0FBS0EsS0FBS3cyQixPQUFPd00sV0FBWSxDQUVuQmhqQyxLQUFLQSxLQUFLdWpCLE9BQU90VyxNQUFLbkQsTUFDMUNBLEtBQUtuRyxPQUFTVyxNQUFNWCxRQUVGZ2pDLFdBQVdwakIsT0FBT3ZrQixLQUFLc0YsUUFNeEQsR0FBaUMsSUFBN0JxaUMsV0FBV3BqQixPQUFPbmtCLE9BQWMsQ0FDbEMsSUFBSyxNQUFNeUssU0FBUzg4QixXQUFXcGpCLE9BRTNCMVosTUFBTTdKLEtBQUt3bUIsaUJBQ1YzYyxNQUFNbEcsS0FBSzFFLFNBQVM0SyxNQUFNN0osS0FBS3dtQixnQkFFaEMzYyxNQUFNKzhCLFlBQWMsR0FBRy84QixNQUFNN0osS0FBS3dtQixtQkFBbUIzYyxNQUFNbEcsUUFDdERrRyxNQUFNKzhCLFlBQWMvOEIsTUFBTWxHLEtBR25DLEdBQUlnakMsV0FBV3BqQixPQUFPbmtCLFFBQVV1bkMsV0FBVy9pQixhQUFjLENBRXZEcmQsR0FBR0MsY0FBY21KLEtBQ2ZqUyxLQUFLZ0osS0FBS1ksT0FBTyxnQ0FBaUMsQ0FDaER1L0IsV0FBWUYsV0FBV3BqQixPQUFPbmtCLE9BQzlCd2tCLGFBQWMraUIsV0FBVy9pQixnQkFJN0IsTUFBTWtqQixPQUFTNzNCLFNBQVM4M0Isb0JBQ3RCL21DLEtBQUtBLEtBQUt1akIsT0FDVm9qQixXQUFXcGpCLFFBRWJ2akIsS0FBS0EsS0FBS3VqQixPQUFTdWpCLFdBQ2QsQ0FFTCxNQUFNbCtCLGVBQWlCb2Esa0JBQWtCcmdCLE9BQU9na0MsWUFDaEQsSUFBSy85QixTQUFVLE9BQ2YsTUFBTWsrQixPQUFTNzNCLFNBQVM4M0Isb0JBQ3RCL21DLEtBQUtBLEtBQUt1akIsT0FDVjNhLFVBRUY1SSxLQUFLQSxLQUFLdWpCLE9BQVN1akIsYUFHckJ2Z0MsR0FBR0MsY0FBY21KLEtBQ2ZqUyxLQUFLZ0osS0FBS0MsU0FBUyxzQ0FNekIsR0FBSTlCLE9BQU83RSxLQUFLQSxLQUFLK2lDLFVBQVcsQ0FDOUIsTUFBTTRELFdBQWEsQ0FDbkIsT0FBb0IsR0FDcEIsS0FBa0IsY0FDbEJBLFdBQVdyOEIsUUFBVXJELEtBQUt4RSxHQUMxQmtrQyxXQUFXL2lCLGFBQWUvZSxPQUFPN0UsS0FBS0EsS0FBSytpQyxVQUMzQzRELFdBQVd4bUMsTUFBUXpDLEtBQUtnSixLQUFLWSxPQUFPLDRCQUE2QixDQUMvRDZKLE9BQVF0TSxPQUFPN0UsS0FBS0EsS0FBSytpQyxZQUkzQixJQUFLLE1BQU14K0IsS0FBSzBDLEtBQUtzYyxPQUVuQixJQUNHaGYsRUFBRXZFLEtBQUtBLEtBQUt3MkIsTUFBTXdNLGFBQ2xCeitCLEVBQUV2RSxLQUFLQSxLQUFLc3JCLFdBQVd6TixnQkFDdkJ0WixFQUFFdkUsS0FBS0EsS0FBS3NyQixXQUFXeE4sU0FDeEIsQ0FFNkI5ZCxLQUFLQSxLQUFLdWpCLE9BQU90VyxNQUFLbkQsTUFDMUNBLEtBQUtuRyxPQUFTWSxFQUFFWixRQUVFZ2pDLFdBQVdwakIsT0FBT3ZrQixLQUFLdUYsRUFBRXZFLE1BS3hELEdBQWlDLElBQTdCMm1DLFdBQVdwakIsT0FBT25rQixPQUFjLENBQ2xDLElBQUssTUFBTXlLLFNBQVM4OEIsV0FBV3BqQixPQUUzQjFaLE1BQU03SixLQUFLd21CLGlCQUNWM2MsTUFBTWxHLEtBQUsxRSxTQUFTNEssTUFBTTdKLEtBQUt3bUIsZ0JBRWhDM2MsTUFBTSs4QixZQUFjLEdBQUcvOEIsTUFBTTdKLEtBQUt3bUIsbUJBQW1CM2MsTUFBTWxHLFFBQ3REa0csTUFBTSs4QixZQUFjLzhCLE1BQU1sRyxLQUVuQyxHQUFJZ2pDLFdBQVdwakIsT0FBT25rQixRQUFVdW5DLFdBQVcvaUIsYUFBYyxDQUV2RHJkLEdBQUdDLGNBQWNtSixLQUNmalMsS0FBS2dKLEtBQUtZLE9BQU8sZ0NBQWlDLENBQ2hEdS9CLFdBQVlGLFdBQVdwakIsT0FBT25rQixPQUM5QndrQixhQUFjK2lCLFdBQVcvaUIsZ0JBSTdCLE1BQU1rakIsT0FBUzczQixTQUFTODNCLG9CQUN0Qi9tQyxLQUFLQSxLQUFLdWpCLE9BQ1ZvakIsV0FBV3BqQixRQUVidmpCLEtBQUtBLEtBQUt1akIsT0FBU3VqQixXQUNkLENBRUwsTUFBTWwrQixlQUFpQm9hLGtCQUFrQnJnQixPQUFPZ2tDLFlBQ2hELElBQUsvOUIsU0FBVSxPQUNmLE1BQU1rK0IsT0FBUzczQixTQUFTODNCLG9CQUN0Qi9tQyxLQUFLQSxLQUFLdWpCLE9BQ1YzYSxVQUVGNUksS0FBS0EsS0FBS3VqQixPQUFTdWpCLGFBR3JCdmdDLEdBQUdDLGNBQWNtSixLQUNmalMsS0FBS2dKLEtBQUtDLFNBQVMsNENBTW5CTSxLQUFLcStCLGVBQWV0bEMsS0FBS0EsS0FBS3VqQixPQUFRLG9CQUV0Q3RjLEtBQUsrL0IsbUJBQW1CckMsWUFBWSxxQkFFcEMxOUIsS0FBSysvQixtQkFBbUI1MUIsT0FBTyxDQUNuQyw4QkFBK0J2TSxPQUFPN0UsS0FBS0EsS0FBS2luQyxhQUFhNW5DLFFBRy9EZ2xDLG1CQUFtQnJsQyxLQUFLb0csVUFBVXBGLE9BQ2xDZ2pDLFlBQWEsRUFFZixNQUVGLFFBQ0VxQixtQkFBbUJybEMsS0FBS29HLFVBQVVwRixPQUd4QyxHQUFrQyxJQUE5QnFrQyxtQkFBbUJqbEMsT0FDckIsTUFBTyxHQUVULE1BQU1rckIsZ0JBQWtCM1UsTUFBTXlzQix3QkFDNUIrQixhQUNBRSxtQkFDQXhpQyxTQW1CRixPQWhCSW9oQyxrQkFFSWg4QixLQUFLbUssT0FBTyxDQUNoQiw2QkFBOEJuSyxLQUFLaWdDLGtCQUVyQ24zQixNQUFNQyxLQUFLLDBCQUVUZ3pCLG1CQUVJLzdCLEtBQUttSyxPQUFPLENBQ2hCLDhCQUErQm5LLEtBQUtrZ0MsaUJBQ3BDLDRCQUE2QmxnQyxLQUFLbWdDLGlCQUVwQ3IzQixNQUFNQyxLQUFLLDJCQUdOc2EsVUFZVG1aLGdCQUFpQjdHLFVBQ2YsSUFBSW42QixHQUFLLEtBQ1QsTUFBTWtCLEtBQU9pNUIsU0FBU3h4QixNQUFNLGVBQ3hCd3hCLFNBQVN4eEIsTUFBTSxlQUFlLEdBQzlCd3hCLFNBQ0osSUFBSyxNQUFNdDRCLFNBQVMyQyxLQUFLWSxNQUVyQm9ILFNBQVMyMUIsbUJBQW1CdGdDLE9BQU94QixnQkFBa0JhLEtBQUtiLGdCQUUxREwsR0FBSzZCLE1BQU03QixJQUlmLE9BQU9BLEdBR1Q0a0MsZUFBZ0J6SyxVQUNkLE1BQU16WSxTQUFXLEdBQ2pCLElBQUssTUFBTTdmLFNBQVMyQyxLQUFLWSxNQUNuQnZELE1BQU1YLE9BQVNpNUIsVUFBVXpZLFNBQVNubEIsS0FBS3NGLE9BRzdDLE9BQU82ZixTQU9UK2UsZ0JBQWlCdkcsV0FFZixNQUFNOEgsVUFBWSxHQUNaOWdDLEtBQU9nNUIsVUFBVXZ4QixNQUFNLGVBQ3pCdXhCLFVBQVV2eEIsTUFBTSxlQUFlLEdBQy9CdXhCLFVBRUosSUFBSyxNQUFNcjRCLFNBQVMyQyxLQUFLWSxNQUVyQm9ILFNBQVMyMUIsbUJBQW1CdGdDLE9BQU94QixnQkFDakNhLEtBQUtiLGVBQ1EsVUFBZndCLE1BQU1wQyxNQUVOdWlDLFVBQVV6bEMsS0FBS3NGLE9BR25CLE9BQU9tZ0MsVUFHVDZDLGFBQWNsbkMsU0FDWixJQUFJbW5DLGNBQWdCbm5DLFFBQ3BCLElBQUssTUFBTzJDLElBQUt1QixTQUFVdEQsT0FBT0MsUUFBUTZiLEtBQUsxYyxRQUFRa0QsT0FDckRpa0MsY0FBZ0JBLGNBQWM3bEMsUUFBUXFCLElBQUt1QixPQUU3QyxPQUFPaWpDLGNBR1QvQyx1QkFDRSxNQUFNZ0QsT0FBUyxHQUNmLElBQUssTUFBT3prQyxJQUFLdUIsU0FBVXRELE9BQU9DLFFBQVE2YixLQUFLMWMsUUFBUWtELE9BQ2pEUCxJQUFJbUIsV0FBVyxNQUFRSSxNQUFNSixXQUFXLFdBQzFDc2pDLE9BQU96a0MsSUFBSTZCLFVBQVUsSUFBTTZpQyxZQUFZeGdDLEtBQU0zQyxNQUFNTSxVQUFVLEtBR2pFLE9BQU80aUMsT0FHVCxxQ0FDRSxNQUFNOTVCLGdCQUFrQixHQUN4QixJQUFLLE1BQU8zSyxJQUFLdUIsU0FBVXRELE9BQU9DLFFBQ2hDdkQsS0FBSzRQLE9BQU9DLFNBQVNDLE1BQU1DLFVBQVVDLGdCQUFnQkEsaUJBRXJEQSxnQkFBZ0IxTyxLQUFLLENBQ25CK0QsSUFDQTI5QixVQUFXaGpDLEtBQUtnSixLQUFLQyxTQUFTckMsTUFBTThJLE9BQ3BDQyxNQUFPM1AsS0FBS2dKLEtBQUtDLFNBQVNyQyxNQUFNK0ksU0FHcEMsT0FBT0ssZ0JBR1R1M0Isa0JBQW1CeUMsVUFDakIsR0FBSXpnQyxLQUFLakgsS0FBS0EsS0FBSzBOLGdCQUNqQixJQUFLLE1BQU8zSyxJQUFLdUIsU0FBVXRELE9BQU9DLFFBQ2hDZ0csS0FBS2pILEtBQUtBLEtBQUswTixpQkFFZixHQUNFaFEsS0FBS2dKLEtBQUtDLFNBQVNyQyxNQUFNOEksT0FBT3RLLGdCQUM5QjRrQyxTQUFTNWtDLGVBQ1hwRixLQUFLZ0osS0FBS0MsU0FBU3JDLE1BQU0rSSxPQUFPdkssZ0JBQzlCNGtDLFNBQVM1a0MsZUFDWEMsTUFBUTJrQyxTQUFTNWtDLGNBRWpCLE1BQU8sQ0FDTEMsSUFDQTI5QixVQUFXaGpDLEtBQUtnSixLQUFLQyxTQUFTckMsTUFBTThJLE9BQ3BDQyxNQUFPM1AsS0FBS2dKLEtBQUtDLFNBQVNyQyxNQUFNK0ksT0FDaEMvSSxNQUFPQSxNQUFNQSxPQUtyQixPQUFPLEtBR1Q4MkIsYUFBY3VNLFlBQ1osTUFDRSxDQUFDLE1BQU8sT0FBUWpxQyxLQUFLZ0osS0FBS0MsU0FBUyxhQUFhN0QsZUFBZTdELFNBQzdEMG9DLFdBQVc3a0MsZUFHTixDQUNMQyxJQUFLLE1BQ0wyOUIsVUFBVyxPQUNYcnpCLE1BQU8zUCxLQUFLZ0osS0FBS0MsU0FBUyxhQUMxQnJDLE1BQU8yQyxLQUFLakgsS0FBS0EsS0FBS3dRLFFBQVFvM0IsSUFBSXRqQyxPQUlwQyxDQUNFLE1BQ0E1RyxLQUFLZ0osS0FBS0MsU0FBUyxZQUFZN0QsY0FDL0JwRixLQUFLZ0osS0FBS0MsU0FBUyxlQUFlN0QsZUFDbEM3RCxTQUFTMG9DLFdBQVc3a0MsZUFFZixDQUNMQyxJQUFLLE1BQ0wyOUIsVUFBV2hqQyxLQUFLZ0osS0FBS0MsU0FBUyxZQUM5QjBHLE1BQU8zUCxLQUFLZ0osS0FBS0MsU0FBUyxlQUMxQnJDLE1BQU8yQyxLQUFLakgsS0FBS0EsS0FBS3dRLFFBQVFDLElBQUluTSxPQUcvQixLQUdULGlCQUVFLE9BRG1CMkMsS0FBS1ksTUFBTTFJLFFBQU8ySyxNQUFzQixlQUFkQSxLQUFLNUgsT0FDaEMsR0FHcEIsZ0JBRUUsT0FEa0IrRSxLQUFLWSxNQUFNMUksUUFBTzJLLE1BQXNCLGNBQWRBLEtBQUs1SCxPQUNoQyxHQUduQixzQkFBdUIybEMsVUFBVyxHQUNoQyxHQUFJQSxTQUFVLENBQ1osTUFBTUMsZ0JBQWtCN2dDLEtBQUtZLE1BQU0xSSxRQUFPMkssTUFDeENBLEtBQUtpK0IsWUFBWSxnQkFFbkIsSUFBSyxJQUFJdmtCLE1BQVEsRUFBR0EsTUFBUXNrQixnQkFBZ0Ixb0MsT0FBUW9rQixjQUM1Q3NrQixnQkFBZ0J0a0IsT0FBT3drQixjQUFjLGNBRzNDL2dDLEtBQUsrN0Isa0JBQWtCLzdCLEtBQUsrN0IsV0FBV1AsZUFDckN4N0IsS0FBS21LLE9BQU8sQ0FBRSw4QkFBK0IsT0FHckQscUJBQXNCeTJCLFVBQVcsR0FDL0IsR0FBSUEsU0FBVSxDQUNaLE1BQU1JLGVBQWlCaGhDLEtBQUtZLE1BQU0xSSxRQUFPMkssTUFDdkNBLEtBQUtpK0IsWUFBWSxlQUVuQixJQUFLLElBQUl2a0IsTUFBUSxFQUFHQSxNQUFReWtCLGVBQWU3b0MsT0FBUW9rQixjQUMzQ3lrQixlQUFlemtCLE9BQU93a0IsY0FBYyxhQUcxQy9nQyxLQUFLZzhCLGlCQUFpQmg4QixLQUFLZzhCLFVBQVVSLGVBQ25DeDdCLEtBQUttSyxPQUFPLENBQUUsNkJBQThCLE9BR3BELFdBQ0UsT0FBT2pLLFNBQVNGLEtBQUtqSCxLQUFLQSxLQUFLd1EsU0FBU28zQixLQUFLdGpDLE9BRy9DLGNBQWVBLE9BQ2IsYUFBYTJDLEtBQUttSyxPQUFPLENBQUUseUJBQTBCOU0sUUFHdkQsZ0JBQWlCbzZCLFFBRWYsT0FEQUEsT0FBU3YzQixTQUFTdTNCLFFBQ1p6M0IsS0FBS2krQixNQUFReEcsUUFDWnozQixLQUFLaWhDLFFBQVFqaEMsS0FBS2krQixLQUFPeEcsUUFHbEMsU0FDRSxHQUFJLENBQUMsV0FBV3ovQixTQUFTZ0ksS0FBS2pILEtBQUtrQyxNQUFPLENBQ3hDLEdBQzJDLE9BQXpDK0UsS0FBS2pILEtBQUtBLEtBQUt3USxRQUFRa2hCLE1BQU16ZCxjQUM3QjNILElBQWNyRixLQUFLakgsS0FBS0EsS0FBS3dRLFFBQVFraEIsTUFBTXpkLFNBQ0YsS0FBekNoTixLQUFLakgsS0FBS0EsS0FBS3dRLFFBQVFraEIsTUFBTXpkLFFBRTdCLE9BQU9oTixLQUFLeXFCLE1BRWQsR0FDRXpxQixLQUFLakgsS0FBS0EsS0FBS3dRLFFBQVFraEIsTUFBTXpkLFFBQzdCaE4sS0FBS2pILEtBQUtBLEtBQUt3USxRQUFRa2hCLE1BQU1wdEIsTUFFN0IsT0FBTzJDLEtBQUt5cUIsTUFFZCxNQUFNOWdCLEdBQUt6SixTQUFTRixLQUFLakgsS0FBS0EsS0FBS3dRLFFBQVFraEIsTUFBTXpkLFNBQ2pELE9BQU9oSixNQUFNMkYsSUFBTSxLQUFPQSxHQUU1QixPQUFPekosU0FBU0YsS0FBS2pILEtBQUtBLEtBQUt3USxRQUFRSSxHQUFHdE0sT0FHNUMsWUFDRSxNQUFJLENBQUMsV0FBV3JGLFNBQVNnSSxLQUFLakgsS0FBS2tDLE1BQWMrRSxLQUFLeXFCLE1BQ2xEenFCLEtBQUtqSCxLQUFLQSxLQUFLd1EsUUFBUUksR0FBR2dPLEtBRWtCLE1BQTVDM1gsS0FBS2pILEtBQUtBLEtBQUswTixnQkFBZ0I2UCxJQUFJalosT0FDUyxNQUE1QzJDLEtBQUtqSCxLQUFLQSxLQUFLME4sZ0JBQWdCNFAsSUFBSWhaLE1BRTVCcEcsS0FBSzZTLE9BQ1Q5SixLQUFLakgsS0FBS0EsS0FBSzBOLGdCQUFnQjZQLElBQUlqWixNQUNsQzJDLEtBQUtqSCxLQUFLQSxLQUFLME4sZ0JBQWdCNFAsSUFBSWhaLFFBQ2xDNUcsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGNBQ1IsY0FBbkJxSixLQUFLakgsS0FBS2tDLEtBQ04sRUFDQSxLQUdOK0UsS0FBS2pILEtBQUtBLEtBQUt3USxRQUFRSSxHQUFHMVIsSUFDckJpSSxTQUFTRixLQUFLakgsS0FBS0EsS0FBS3dRLFFBQVFJLEdBQUcxUixLQUVyQyxLQUVGaUksU0FBU0YsS0FBS2pILEtBQUtBLEtBQUt3USxRQUFRSSxHQUFHMVIsS0FHNUMsWUFBYW9GLE9BRVgsT0FESUEsTUFBUSxJQUFHQSxNQUFRLEdBQ25CLENBQUMsV0FBV3JGLFNBQVNnSSxLQUFLakgsS0FBS2tDLE9BQzdCb0MsTUFBUTJDLEtBQUt5cUIsUUFBT3B0QixNQUFRNkMsU0FBU0YsS0FBS3lxQixjQUNqQ3pxQixLQUFLbUssT0FBTyxDQUFFLDZCQUE4QjlNLFVBRXZEQSxNQUFRMkMsS0FBSzRKLFFBQU92TSxNQUFRNkMsU0FBU0YsS0FBSzRKLGNBQ2pDNUosS0FBS21LLE9BQU8sQ0FBRSx3QkFBeUI5TSxTQUd0RCxxQkFBc0JtZ0MsVUFBV2hjLEtBQU8sTUFDdEMsTUFBTTZCLFVBQVksR0FDbEIsSUFBSyxNQUFNemdCLFNBQVM0NkIsVUFDbEIsR0FBSXgxQixTQUFTQyxVQUFVckYsT0FDaEJBLE1BQU03SixLQUFLdzJCLFFBQU8zc0IsTUFBTTdKLEtBQUt3MkIsTUFBUSxJQUN0Qy9OLE9BQU01ZSxNQUFNN0osS0FBS3cyQixNQUFNL04sT0FBUSxHQUNuQzZCLFVBQVV0ckIsS0FBS29HLFVBQVV5RSxZQUNwQixDQUNMLE1BQU1qQyxPQUFTWCxLQUFLdzhCLGdCQUFnQjU1QixNQUFNbEcsTUFDMUMsR0FBS2lFLFFBTUUsR0FBSTZnQixLQUFNLENBQ2YsTUFBTTNlLEtBQU83QyxLQUFLWSxNQUFNakssSUFBSWdLLGNBQ3RCa0MsS0FBSzY2QixZQUFZbGMsWUFQbkJBLE9BQ0c1ZSxNQUFNN0osS0FBS3cyQixRQUFPM3NCLE1BQU03SixLQUFLdzJCLE1BQVEsSUFDMUMzc0IsTUFBTTdKLEtBQUt3MkIsTUFBTS9OLE9BQVEsR0FFM0I2QixVQUFVdHJCLEtBQUtvRyxVQUFVeUUsUUFPTixJQUFyQnlnQixVQUFVbHJCLGNBR1I2SCxLQUFLbTdCLHdCQUF3QixPQUFROVgsVUFBVyxDQUNwRHNZLGFBQWEsSUFJakIsZUFBZ0J6ZSxTQUFVc0UsS0FBTyxNQUMvQixNQUFNNkIsVUFBWSxHQUNsQixJQUFLLE1BQU14Z0IsUUFBUXFhLFNBQ2JzRSxPQUNHM2UsS0FBSzlKLEtBQUt3MkIsUUFBTzFzQixLQUFLOUosS0FBS3cyQixNQUFRLElBQ3hDMXNCLEtBQUs5SixLQUFLdzJCLE1BQU0vTixPQUFRLEdBRTFCNkIsVUFBVXRyQixLQUFLb0csVUFBVTBFLE9BRTNCLEdBQXlCLElBQXJCd2dCLFVBQVVsckIsT0FHZCxhQUFhNkgsS0FBS203Qix3QkFBd0IsT0FBUTlYLFVBQVcsQ0FDM0RzWSxhQUFhLElBSWpCLG9CQUFxQi80QixNQUFPNGUsS0FBTyxNQUNqQyxNQUFNN2dCLE9BQVNYLEtBQUt3OEIsZ0JBQWdCNTVCLE1BQU1sRyxNQUMxQyxHQUFLaUUsUUFRRSxHQUFJNmdCLEtBQU0sQ0FDZixNQUFNM2UsS0FBTzdDLEtBQUtZLE1BQU1qSyxJQUFJZ0ssY0FDdEJrQyxLQUFLNjZCLFlBQVlsYyxZQVRuQkEsT0FDRzVlLE1BQU03SixLQUFLdzJCLFFBQU8zc0IsTUFBTTdKLEtBQUt3MkIsTUFBUSxJQUMxQzNzQixNQUFNN0osS0FBS3cyQixNQUFNL04sT0FBUSxTQUVyQnhoQixLQUFLbTdCLHdCQUF3QixPQUFRLENBQUN2NEIsT0FBUSxDQUNsRCs0QixhQUFhLElBUW5CLFlBQ0UsT0FBSTM3QixLQUFLakgsS0FBS0EsS0FBS3dRLFFBQVFTLEdBQUcyTixLQUNvQixNQUE1QzNYLEtBQUtqSCxLQUFLQSxLQUFLME4sZ0JBQWdCaVEsSUFBSXJaLE1BQzlCcEcsS0FBSzZTLE1BQU05SixLQUFLakgsS0FBS0EsS0FBSzBOLGdCQUFnQmlRLElBQUlyWixNQUFRLEdBQ2pELEtBRVQ2QyxTQUFTRixLQUFLakgsS0FBS0EsS0FBS3dRLFFBQVFTLEdBQUcvUixLQUc1Q2lwQyw0QkFBNkIxN0IsVUFDM0IsTUFBTXlILEVBQUlqTixLQUFLbWhDLGlDQUFpQzM3QixVQUNoRCxPQUFXLElBQVB5SCxFQUFpQmpOLEtBQUtqSCxLQUFLQSxLQUFLcW9DLHFCQUFxQm4wQixHQUNsRCxLQUdUazBCLGlDQUFrQzM3QixVQUNoQyxNQUFNaUosUUFBVTNLLGNBQWNvTSxtQkFBbUIxSyxVQUNqRCxPQUFPeEYsS0FBS2pILEtBQUtBLEtBQUtxb0MscUJBQXFCQyxXQUFVQyxJQUVqREEsR0FBRzlsQyxLQUFPaVQsU0FBU2pULElBQ25COGxDLEdBQUc1a0MsS0FBS2IsZ0JBQWtCNFMsUUFBUS9SLE1BQU02a0Msc0JBSzlDN3hCLGtCQUFtQmxLLFVBQ2pCLE1BQU1pSixRQUFVek8sS0FBS2toQyw0QkFBNEIxN0IsVUFDakQsR0FBSWlKLFFBRUYsT0FBSUEsUUFBUTdJLE9BQ0gzTyxLQUFLZ0IsSUFBSXdXLFFBQVE3SSxPQUFPNDdCLFdBQWEsRUFBRy95QixRQUFRK3lCLFdBR2xEL3lCLFFBQVEreUIsV0FBYSxFQUN2QixDQUVMLE1BQU1DLGdCQUFrQjM5QixjQUFjb00sbUJBQW1CMUssVUFDekQsR0FBSWk4QixnQkFBZ0I3N0IsT0FBUSxDQUMxQixNQUFNODdCLGtCQUFvQjFoQyxLQUFLa2hDLDRCQUM3Qk8sZ0JBQWdCNzdCLFFBRWxCLEdBQUk4N0Isa0JBQW1CLE9BQU9BLGtCQUFrQkYsVUFFbEQsT0FBTyxHQUlYN3hCLDZCQUE4Qm5LLFVBRTVCLE1BQU1pSixRQUFVek8sS0FBS2toQyw0QkFBNEIxN0IsVUFDM0NpOEIsZ0JBQWtCMzlCLGNBQWNvTSxtQkFBbUIxSyxVQUV6RCxHQUFJaUosUUFBUyxDQUVYLElBQUlrekIsU0FBVSxFQTRCZCxHQTNCSUYsZ0JBQWdCNTdCLGFBQWU0SSxRQUFRNUksYUFDekM0SSxRQUFRNUksV0FBYTQ3QixnQkFBZ0I1N0IsV0FDckM4N0IsU0FBVSxHQUVSRixnQkFBZ0I3N0IsU0FBVzZJLFFBQVE3SSxTQUNyQzZJLFFBQVE3SSxPQUFTNjdCLGdCQUFnQjc3QixPQUNqQys3QixTQUFVLEdBR1ZGLGdCQUFnQjc3QixRQUNoQjY3QixnQkFBZ0I3N0IsT0FBT0MsYUFBZTRJLFFBQVE3SSxPQUFPQyxhQUVyRDRJLFFBQVE3SSxPQUFPQyxXQUFhNDdCLGdCQUFnQjc3QixPQUFPQyxXQUNuRDg3QixTQUFVLEdBRVJsekIsUUFBUSt5QixVQUFZL3lCLFFBQVE1SSxhQUM5QjRJLFFBQVEreUIsVUFBWS95QixRQUFRNUksV0FDNUI4N0IsU0FBVSxHQUdWbHpCLFFBQVE3SSxRQUNSNkksUUFBUTdJLE9BQU80N0IsVUFBWS95QixRQUFRN0ksT0FBT0MsYUFFMUM0SSxRQUFRN0ksT0FBTzQ3QixVQUFZL3lCLFFBQVE3SSxPQUFPQyxXQUMxQzg3QixTQUFVLEdBR1JBLFFBQVMsQ0FDWCxNQUFNQyx5QkFBMkI1aEMsS0FBS2pILEtBQUtBLEtBQUtxb0MscUJBQzVDampDLFVBQVU2QixLQUFLakgsS0FBS0EsS0FBS3FvQyxzQkFDekIsR0FFSlEseUJBRHFCNWhDLEtBQUttaEMsaUNBQWlDMzdCLFdBQ2xCaUosUUFDckNBLFFBQVE3SSxRQUNWNUYsS0FBSzZoQyx1QkFBdUJELHlCQUEwQm56QixRQUFRN0ksUUFHaEU1RixLQUFLbUssT0FBTyxDQUNWLDRCQUE2QnkzQiwyQkFJakMsT0FBT256QixRQUFRNUksV0FBYTRJLFFBQVEreUIsVUFHdEMsR0FBSUMsZ0JBQWlCLENBQ25CLE1BQU0veEIsa0JBQW9CMVAsS0FBSzBQLGtCQUFrQmxLLFVBQ2pELE9BQU92TyxLQUFLZ0IsSUFBSSxFQUFHd3BDLGdCQUFnQjU3QixXQUFhNkosbUJBRWxELE9BQU8sR0FHVEssb0JBQXFCdkssVUFDbkIsU0FBVXhGLEtBQUttaEMsaUNBQWlDMzdCLFVBR2xEd0ssMEJBQTJCeEssVUFDekIsTUFBTWk4QixnQkFBa0IzOUIsY0FBY29NLG1CQUFtQjFLLFVBQ3pELE9BQUlpOEIsZ0JBQWdCNzdCLFVBQ1I1RixLQUFLbWhDLGlDQUFpQ00sZ0JBQWdCNzdCLFFBRTNENUYsS0FBSytQLG9CQUFvQnZLLFVBR2xDcThCLHVCQUF3QkQseUJBQTBCRSxlQUNoRCxJQUFLLElBQUl2bEIsTUFBUSxFQUFHQSxNQUFRcWxCLHlCQUF5QnpwQyxPQUFRb2tCLFFBQzNELElBQ0VxbEIseUJBQXlCcmxCLE9BQU8zVyxRQUFRcEssS0FBT3NtQyxjQUFjdG1DLElBQzdEb21DLHlCQUF5QnJsQixPQUFPM1csUUFBUWxKLEtBQUtiLGdCQUMzQ2ltQyxjQUFjcGxDLE1BQU1iLGdCQUlwQitsQyx5QkFBeUJybEIsT0FBTzNXLE9BQU80N0IsWUFDdkNNLGNBQWNOLFVBQ2QsQ0FDQSxNQUFNTyxNQUNKRCxjQUFjTixVQUNkSSx5QkFBeUJybEIsT0FBTzNXLE9BQU80N0IsVUFDckNPLE1BQVEsSUFDVkgseUJBQXlCcmxCLE9BQU8zVyxPQUFTazhCLGNBQ3pDRix5QkFBeUJybEIsT0FBT2lsQixXQUFhTyxNQUM3Q0gseUJBQXlCcmxCLE9BQU9pbEIsVUFBWXZxQyxLQUFLbUIsSUFDL0N3cEMseUJBQXlCcmxCLE9BQU9pbEIsVUFDaENJLHlCQUF5QnJsQixPQUFPMVcsY0FRNUNtOEIsY0FBZUoseUJBQTBCRSxlQUN2QyxJQUFLLElBQUl2bEIsTUFBUSxFQUFHQSxNQUFRcWxCLHlCQUF5QnpwQyxPQUFRb2tCLFFBQzNELEdBQ0VxbEIseUJBQXlCcmxCLE9BQU8zVyxRQUFRcEssS0FBT3NtQyxjQUFjdG1DLElBQzdEb21DLHlCQUF5QnJsQixPQUFPM1csUUFBUWxKLEtBQUtiLGdCQUMzQ2ltQyxjQUFjcGxDLE1BQU1iLGNBQ3RCLENBQ0EsTUFBTW9tQyxtQkFDSkwseUJBQXlCcmxCLE9BQU8zVyxPQUFPNDdCLGlCQUNsQ0kseUJBQXlCcmxCLE9BQU8zVyxPQUV2Q2c4Qix5QkFBeUJybEIsT0FBT2lsQixVQUM5QkkseUJBQXlCcmxCLE9BQU9pbEIsVUFBWVMsbUJBQzFDTCx5QkFBeUJybEIsT0FBT2lsQixVQUFZLElBQzlDSSx5QkFBeUJybEIsT0FBT2lsQixVQUFZLElBTXBELG9CQUFxQmg4QixVQUNuQixNQUFNMDhCLGFBQWVsaUMsS0FBS21oQyxpQ0FBaUMzN0IsVUFDM0QsSUFBSzA4QixhQUFjLENBQ2pCLE1BQU1ULGdCQUFrQjM5QixjQUFjb00sbUJBQW1CMUssVUFDbkRvOEIseUJBQTJCNWhDLEtBQUtqSCxLQUFLQSxLQUFLcW9DLHFCQUM1Q2pqQyxVQUFVNkIsS0FBS2pILEtBQUtBLEtBQUtxb0Msc0JBQ3pCLEdBQ0pRLHlCQUF5QjlSLE9BQU9vUyxhQUFjLEdBQzlDVCxnQkFBZ0JELFVBQVksRUFDeEJDLGdCQUFnQjc3QixlQUFlNjdCLGdCQUFnQjc3QixPQUNuRDVGLEtBQUs2aEMsdUJBQXVCRCx5QkFBMEJILHVCQUNoRHpoQyxLQUFLbUssT0FBTyxDQUNoQiw0QkFBNkJ5M0IsNEJBS25DLGtCQUFtQnA4QixVQUNqQixNQUFNbzhCLHlCQUEyQjVoQyxLQUFLakgsS0FBS0EsS0FBS3FvQyxxQkFDNUNqakMsVUFBVTZCLEtBQUtqSCxLQUFLQSxLQUFLcW9DLHNCQUN6QixHQUNFSyxnQkFBa0IzOUIsY0FBY29NLG1CQUFtQjFLLFVBQ3pELElBQUtpOEIsZ0JBQWdCNzdCLE9BQVEsT0FDN0IsTUFBTXM4QixhQUFlbGlDLEtBQUttaEMsaUNBQ3hCTSxnQkFBZ0I3N0IsUUFVbEIsT0FSS3M4QixjQUNITix5QkFBeUI5UixPQUFPb1MsYUFBYyxHQUVoRGxpQyxLQUFLZ2lDLGNBQWNKLHlCQUEwQkgsZ0JBQWdCNzdCLGNBQ3ZENUYsS0FBS21LLE9BQU8sQ0FDaEIsNEJBQTZCeTNCLDRCQUd4QixFQUdULHlCQUEwQm55QixRQUFTakssVUFDakMsSUFBSTI4QixhQUFlMXlCLFFBRW5CLE1BQU1neUIsZ0JBQWtCMzlCLGNBQWNvTSxtQkFBbUIxSyxVQUduRDA4QixhQUFlbGlDLEtBQUttaEMsaUNBQWlDMzdCLFVBRzNELElBQUk0OEIscUJBQXVCLEVBQ3ZCWCxnQkFBZ0I3N0IsUUFBUXBLLEtBQzFCNG1DLG9CQUFzQnBpQyxLQUFLbWhDLGlDQUN6Qk0sZ0JBQWdCNzdCLE9BQU9wSyxNQUdFLElBQXpCNG1DLHFCQUE4QlgsZ0JBQWdCNzdCLFFBQVFsSixPQUN4RDBsQyxvQkFBc0JwaUMsS0FBS21oQyxpQ0FDekJNLGdCQUFnQjc3QixPQUFPbEosT0FLM0IsTUFBTWtsQyx5QkFBMkI1aEMsS0FBS2pILEtBQUtBLEtBQUtxb0MscUJBQzVDampDLFVBQVU2QixLQUFLakgsS0FBS0EsS0FBS3FvQyxzQkFDekIsR0FHSixJQUFLYyxhQUFjLENBQ2pCLE1BQU1HLFdBQWFULHlCQUF5Qk0sY0FDNUMsSUFBSUksV0FFQWIsa0JBQ0ZhLFdBQWFiLGdCQUNiYSxXQUFXZCxVQUFZYSxXQUFXYixXQUFhLEVBQzNDYyxXQUFXMThCLE9BQ2IwOEIsV0FBVzE4QixPQUFPNDdCLFVBQVlhLFdBQVd6OEIsUUFBUTQ3QixVQUM3Q2EsV0FBV3o4QixPQUFPNDdCLFVBQ2xCLEVBRUFhLFdBQVd6OEIsU0FBUTA4QixXQUFXMThCLE9BQVN5OEIsV0FBV3o4QixTQUkxRDA4QixXQUFXZCxVQUFZYyxXQUFXZCxVQUM5QmMsV0FBV2QsVUFBWS94QixRQUN2QkEsUUFDQTZ5QixXQUFXZCxVQUFZYyxXQUFXejhCLGFBQ3BDczhCLGNBQ2tCRyxXQUFXZCxVQUFZYyxXQUFXejhCLFdBQ3BEeThCLFdBQVdkLFVBQVljLFdBQVd6OEIsWUFJaEN5OEIsV0FBVzE4QixTQUNiMDhCLFdBQVcxOEIsT0FBTzQ3QixVQUFZYyxXQUFXMThCLE9BQU80N0IsVUFDNUNjLFdBQVcxOEIsT0FBTzQ3QixVQUFZVyxhQUM5QkEsYUFDQUcsV0FBVzE4QixPQUFPNDdCLFVBQVljLFdBQVcxOEIsT0FBT0MsYUFDbER5OEIsV0FBVzE4QixPQUFPNDdCLFVBQVljLFdBQVcxOEIsT0FBT0MsWUFJbEQ3RixLQUFLNmhDLHVCQUF1QkQseUJBQTBCVSxXQUFXMThCLFNBR25FZzhCLHlCQUF5Qk0sY0FBZ0JJLFlBRXBDRixxQkFBdUJFLFdBQVcxOEIsT0FDckNnOEIseUJBQXlCUSxxQkFBdUJFLFdBQVcxOEIsT0FJdkQwOEIsV0FBVzE4QixRQUFRZzhCLHlCQUF5QjdwQyxLQUFLdXFDLFdBQVcxOEIsWUFFN0QsQ0FFTCxNQUFNMDhCLFdBQWFiLGdCQUNuQmEsV0FBV2QsVUFBWSxFQUVuQmMsV0FBVzE4QixVQUVSdzhCLHFCQUNIRSxXQUFXMThCLE9BQU80N0IsVUFDaEJJLHlCQUF5QlEscUJBQXFCWixVQUdoRGMsV0FBV2QsVUFBWWMsV0FBVzE4QixPQUFPNDdCLFVBQ3JDYyxXQUFXZCxVQUFZYyxXQUFXejhCLGFBQ3BDeThCLFdBQVdkLFVBQVljLFdBQVd6OEIsY0FJcEN5OEIsV0FBVzE4QixPQUFPNDdCLFVBQVksRUFDOUJjLFdBQVdkLFVBQVksSUFLM0JjLFdBQVdkLFVBQVljLFdBQVdkLFVBQVkveEIsUUFHMUM2eUIsV0FBV2QsVUFBWWMsV0FBV3o4QixhQUVwQ3M4QixjQUNrQkcsV0FBV2QsVUFBWWMsV0FBV3o4QixXQUNwRHk4QixXQUFXZCxVQUFZYyxXQUFXejhCLFlBSWhDeThCLFdBQVcxOEIsU0FFYjA4QixXQUFXMThCLE9BQU80N0IsVUFBWWMsV0FBVzE4QixPQUFPNDdCLFVBQVlXLGFBQ3hERyxXQUFXMThCLE9BQU80N0IsVUFBWWMsV0FBVzE4QixPQUFPQyxhQUNsRHk4QixXQUFXMThCLE9BQU80N0IsVUFBWWMsV0FBVzE4QixPQUFPQyxhQUk3Q3U4QixvQkFDSFIseUJBQXlCUSxxQkFBdUJFLFdBQVcxOEIsT0FFM0RnOEIseUJBQXlCN3BDLEtBQUt1cUMsV0FBVzE4QixRQUkzQzVGLEtBQUs2aEMsdUJBQXVCRCx5QkFBMEJVLFdBQVcxOEIsU0FHbkVnOEIseUJBQXlCN3BDLEtBQUt1cUMsWUFPaEMsYUFKTXRpQyxLQUFLdWlDLE9BQU92aUMsS0FBS3dKLElBQU0yNEIsb0JBQ3ZCbmlDLEtBQUttSyxPQUFPLENBQ2hCLDRCQUE2QnkzQiwyQkFFeEJPLGFBR1QsZUFBZ0IxeUIsUUFBU2pLLFNBQVcsTUFDOUJBLGVBQWdCeEYsS0FBSytTLG1CQUFtQnRELFFBQVNqSyxnQkFDMUN4RixLQUFLdWlDLE9BQU92aUMsS0FBS3dKLElBQU1pRyxTQUdwQyxjQUNFLE9BQU8zTCxjQUFjb00sbUJBQW1CbFEsTUFHMUN5UCxRQUFTK3lCLGFBQ1AsT0FBSUEsWUFBb0J4aUMsS0FBS3lpQyxtQkFDdEJ6aUMsS0FBSzBpQyxvQkFHZCx5QkFDRSxPQUFPMWlDLEtBQUtqSCxLQUFLQSxLQUFLK2QsU0FBU3JILFNBQVMreUIsWUFHMUMsMEJBQ0UsT0FBT3hpQyxLQUFLakgsS0FBS0EsS0FBSytkLFNBQVNySCxTQUFTa3pCLGFBRzFDLGlCQUNFLE9BQUkzaUMsS0FBSzBpQyxvQkFDRjErQixNQUFNcEcsT0FBT29DLEtBQUswaUMsc0JBR2hCLElBQUkzckMsS0FBS2lKLEtBQUswaUMscUJBQXFCN3lCLFNBQVMsQ0FDakRDLFVBQVUsSUFDVHhZLE1BSk1zRyxPQUFPb0MsS0FBSzBpQyxxQkFNaEIsRUFHVCxpQkFDRSxPQUFJMWlDLEtBQUt5aUMsbUJBQ0Z6K0IsTUFBTXBHLE9BQU9vQyxLQUFLeWlDLHFCQUdoQixJQUFJMXJDLEtBQUtpSixLQUFLeWlDLG9CQUFvQjV5QixTQUFTLENBQ2hEQyxVQUFVLElBQ1R4WSxNQUpNc0csT0FBT29DLEtBQUt5aUMsb0JBTWhCLEVBR1QsbUJBQ0UsT0FBT3ppQyxLQUFLakgsS0FBS0EsS0FBS3dRLFFBQVFDLEtBQUtDLFdBQWEsRUFHbEQsYUFDRSxHQUFLekosS0FBS2pILEtBQUtBLEtBQUt3USxRQUNwQixPQUFJdkosS0FBS2pILEtBQUtBLEtBQUt3USxTQUFTQyxLQUFLbU8sS0FDM0IzWCxLQUFLNGlDLGNBQXNCM3JDLEtBQUtnQixJQUFJLEdBQUsrSCxLQUFLNGlDLGNBQWUsR0FDMUQsR0FFRjFpQyxTQUFTRixLQUFLakgsS0FBS0EsS0FBS3dRLFFBQVFDLElBQUl2UixLQUc3QyxTQUNFLE9BQU9pSSxTQUFTRixLQUFLakgsS0FBS0EsS0FBS3dRLFFBQVFTLEdBQUczTSxPQUc1QyxZQUFhQSxPQUdYLE9BRklBLE1BQVEsSUFBR0EsTUFBUSxHQUNuQkEsTUFBUTZDLFNBQVNGLEtBQUtpSyxTQUFRNU0sTUFBUTZDLFNBQVNGLEtBQUtpSyxjQUMzQ2pLLEtBQUttSyxPQUFPLENBQUUsd0JBQXlCOU0sUUFHdEQsVUFDRSxPQUFPNkMsU0FBU0YsS0FBS2pILEtBQUtBLEtBQUt3USxRQUFRQyxJQUFJbk0sT0FHN0MsVUFDRSxPQUFPMkMsS0FBS2crQixrQkFBa0IsT0FHaEMsNEJBQ0UsSUFBSWtDLGlCQUFtQixFQUN2QixJQUFLLE1BQU10OUIsU0FBUzVDLEtBQUtzYyxPQUNuQjFaLE1BQU03SixLQUFLQSxLQUFLOFksYUFBYWtxQixhQUMvQm1FLGtCQUFvQnQ5QixNQUFNN0osS0FBS0EsS0FBSzhZLFlBQVlrcUIsWUFHcEQsT0FBT21FLGlCQUdULHVCQUNFLElBQUtsZ0MsS0FBSys3QixXQUFZLE9BQU8sRUFDN0IsSUFBSW5kLE9BQVMsRUFDYixJQUFLLE1BQU1vZ0IsU0FBU2psQyxPQUFPQyxRQUN6QmdHLEtBQUsrN0IsV0FBV2hqQyxLQUFLQSxLQUFLd21DLHVCQUN6QixDQUNELE1BQU96akMsSUFBS3VCLE9BQVMyaEMsTUFDZi80QixLQUFPakcsS0FBS2crQixrQkFBa0JsaUMsS0FDaEN1QixNQUFNc0UsV0FDUmlkLFFBQVUzWSxLQUFLNUksTUFBUU8sT0FBT1AsTUFBTWdnQixhQUd4QyxPQUFPdUIsT0FHVCxvQ0FDUTVlLEtBQUttSyxPQUFPLENBQ2hCLDhCQUErQm5LLEtBQUtrZ0MsbUJBSXhDLG1DQUNRbGdDLEtBQUttSyxPQUFPLENBQ2hCLDZCQUE4Qm5LLEtBQUtrZ0MsbUJBSXZDLGtDQUNRbGdDLEtBQUttSyxPQUFPLENBQ2hCLDRCQUE2Qm5LLEtBQUttZ0MsaUJBSXRDLDJCQUNFLElBQUlGLGdCQUFrQixFQUN0QixJQUFLLE1BQU1yOUIsU0FBUzVDLEtBQUtzYyxPQUNuQjFaLE1BQU03SixLQUFLQSxLQUFLOFksYUFBYW1xQixZQUMvQmlFLGlCQUFtQnI5QixNQUFNN0osS0FBS0EsS0FBSzhZLFlBQVltcUIsV0FHbkQsT0FBT2lFLGdCQUdULHNCQUNFLE9BQUtqZ0MsS0FBS2c4QixVQUNIaDhCLEtBQUtnOEIsVUFBVWpqQyxLQUFLQSxLQUFLOHBDLFlBREosRUFJOUIsdUJBQ0UsSUFBSUMsaUJBQW1CLEVBQ3ZCLElBQUssTUFBTWxnQyxTQUFTNUMsS0FBS3NjLE9BQ25CMVosTUFBTTdKLEtBQUtBLEtBQUs4WSxhQUFhQyxhQUMvQmd4QixrQkFBb0JsZ0MsTUFBTTdKLEtBQUtBLEtBQUs4WSxZQUFZQyxZQUdwRCxPQUFPZ3hCLGlCQUdULDBCQUNFLElBQUkzQyxlQUFpQixFQUNyQixJQUFLLE1BQU12OUIsU0FBUzVDLEtBQUtzYyxPQUNuQjFaLE1BQU03SixLQUFLQSxLQUFLOFksYUFBYWlxQixXQUMvQnFFLGdCQUFrQnY5QixNQUFNN0osS0FBS0EsS0FBSzhZLFlBQVlpcUIsVUFHbEQsT0FBT3FFLGVBR1QscUJBQ0UsT0FBTyxFQUFJdmlDLE9BQU9vQyxLQUFLakgsS0FBS0EsS0FBSzBOLGdCQUFnQmdRLElBQUlwWixPQUd2RCw0QkFDRSxJQUFLLE1BQU11RixTQUFTNUMsS0FBS3NjLE9BQ3ZCLEdBQUkxWixNQUFNN0osS0FBS0EsS0FBS3cyQixPQUFPd1QsYUFBYyxPQUFPLEVBRWxELE9BQU8sRUFHVCxhQUFjMWxDLE9BQ1JBLE1BQVEsSUFBR0EsTUFBUSxHQUNuQkEsTUFBUTJDLEtBQUtxUCxTQUFRaFMsTUFBUTJDLEtBQUtxUCxRQUN0QyxNQUFNMnpCLEtBQU85aUMsU0FBU0YsS0FBS2pILEtBQUtBLEtBQUt3USxRQUFRQyxJQUFJbk0sT0FBU0EsTUF5QjFELEdBQUkybEMsS0FBTyxFQUFHLENBQ1osSUFBSXhCLFVBQVl0aEMsU0FBU0YsS0FBS2pILEtBQUtBLEtBQUt3USxRQUFRQyxJQUFJQyxXQUNoRHZKLFNBQVNGLEtBQUtqSCxLQUFLQSxLQUFLd1EsUUFBUUMsSUFBSUMsV0FDcEMsRUFNSixPQUxBKzNCLFdBQXdCd0IsS0FDcEJBLE1BQVEsR0FBR2hqQyxLQUFLaWpDLFVBQVVwdEIsS0FBS3pNLE9BQU9xUSxhQUN0QytuQixXQUFhdnFDLEtBQUs2UyxNQUFNOUosS0FBS3dKLElBQU0sSUFDckN4SixLQUFLaWpDLFVBQVVwdEIsS0FBS3pNLE9BQU9zUSxtQkFFaEIxWixLQUFLbUssT0FBTyxDQUN2Qix5QkFBMEI5TSxNQUMxQiw2QkFBOEJta0MsWUFFM0IsYUFBYXhoQyxLQUFLbUssT0FBTyxDQUFFLHlCQUEwQjlNLFFBRzlELG9CQUFxQkEsTUFBTzZsQyxRQUMxQixNQUFNQyxXQUFhLGdCQUFnQkQsY0FDbkMsYUFBYWxqQyxLQUFLbUssT0FBTyxDQUFFLENBQUNnNUIsWUFBYTlsQyxRQUczQyx1QkFBd0I2bEMsUUFDdEJsakMsS0FBS29qQyxlQUFlcGpDLEtBQUtqSCxLQUFLQSxLQUFLd1EsUUFBUTI1QixRQUFRdnJCLEtBQU11ckIsUUFHM0QsWUFDRSxHQUFJLENBQUMsV0FBV2xyQyxTQUFTZ0ksS0FBS2pILEtBQUtrQyxNQUFPLENBQ3hDLE1BQU13dkIsTUFBUXZxQixTQUFTRixLQUFLakgsS0FBS0EsS0FBS3dRLFFBQVFraEIsTUFBTXB0QixPQUNwRCxPQUFPMkcsTUFBTXltQixPQUFTLEtBQU9BLE1BRS9CLElBQUt6cUIsS0FBS2pILEtBQUtBLEtBQUt3USxRQUFTLE9BQU8sS0FDcEMsSUFBS3ZKLEtBQUtqSCxLQUFLQSxLQUFLd1EsUUFBUWtoQixNQUFPLE9BQU8sS0FJMUMsR0FIMkMsU0FBdkN6cUIsS0FBS2pILEtBQUtBLEtBQUt3USxRQUFRa2hCLE1BQU1wdEIsUUFDL0IyQyxLQUFLakgsS0FBS0EsS0FBS3dRLFFBQVFraEIsTUFBTTlTLE1BQU8sR0FFbEMzWCxLQUFLakgsS0FBS0EsS0FBS3dRLFFBQVFraEIsTUFBTTlTLEtBQU0sQ0FDckMsTUFBTTByQixJQUNKcmpDLEtBQUtqSCxLQUFLQSxLQUFLME4sZ0JBQWdCMlAsSUFBSS9ZLE1BQ25DMkMsS0FBS2pILEtBQUtBLEtBQUswTixnQkFBZ0I2UCxJQUFJalosTUFDckMsR0FBSWdtQyxJQUFNLElBQUssT0FBT3BzQyxLQUFLNlMsT0FBT3U1QixJQUFNLElBQU0sSUFBTSxFQUNwRCxHQUFJQSxJQUFNLEdBQUksT0FBUSxFQUN0QixHQUFJQSxJQUFNLEdBQUksT0FBUSxFQUN0QixHQUFJQSxJQUFNLElBQUssT0FBTyxFQUN0QixHQUFJQSxJQUFNLElBQUssT0FBTyxFQUd4QixPQUFPcmpDLEtBQUtqSCxLQUFLQSxLQUFLd1EsUUFBUWtoQixNQUFNcHRCLE1BR3RDLFNBQ0UsR0FBSSxDQUFDLFdBQVdyRixTQUFTZ0ksS0FBS2pILEtBQUtrQyxNQUFPLE9BQU8sRUFDakQsSUFBSytFLEtBQUtqSCxLQUFLQSxLQUFLd1EsUUFBUyxPQUFPLEtBQ3BDLElBQUt2SixLQUFLakgsS0FBS0EsS0FBS3dRLFFBQVFrbEIsR0FBSSxPQUFPLEtBSXZDLEdBSHdDLFNBQXBDenVCLEtBQUtqSCxLQUFLQSxLQUFLd1EsUUFBUWtsQixHQUFHcHhCLFFBQzVCMkMsS0FBS2pILEtBQUtBLEtBQUt3USxRQUFRa2xCLEdBQUc5VyxNQUFPLEdBRS9CM1gsS0FBS2pILEtBQUtBLEtBQUt3USxRQUFRa2xCLEdBQUc5VyxLQUFNLENBQ2xDLE1BQU0wckIsSUFDSnJqQyxLQUFLakgsS0FBS0EsS0FBSzBOLGdCQUFnQjJQLElBQUkvWSxNQUNuQzJDLEtBQUtqSCxLQUFLQSxLQUFLME4sZ0JBQWdCNlAsSUFBSWpaLE1BQ3JDLEdBQUlnbUMsSUFBTSxJQUFLLE1BQU8sR0FBR3BzQyxLQUFLNlMsT0FBT3U1QixJQUFNLElBQU0sUUFDakQsR0FBSUEsSUFBTSxHQUFJLE9BQVEsRUFDdEIsR0FBSUEsSUFBTSxHQUFJLE9BQVEsRUFDdEIsR0FBSUEsSUFBTSxJQUFLLE9BQU8sRUFDdEIsR0FBSUEsSUFBTSxJQUFLLE1BQU8sTUFFeEIsT0FBT3JqQyxLQUFLakgsS0FBS0EsS0FBS3dRLFFBQVFrbEIsR0FBR3B4QixNQUduQyxVQUNFLEdBQUksQ0FBQyxXQUFXckYsU0FBU2dJLEtBQUtqSCxLQUFLa0MsTUFDakMsT0FBTytFLEtBQUtqSCxLQUFLQSxLQUFLd1EsUUFBUXNoQixJQUFJeHRCLE1BRXBDLElBQUsyQyxLQUFLakgsS0FBS0EsS0FBS3dRLFFBQVMsT0FBTyxLQUNwQyxJQUFLdkosS0FBS2pILEtBQUtBLEtBQUt3USxRQUFRc2hCLElBQUssT0FBTyxLQUl4QyxHQUh5QyxTQUFyQzdxQixLQUFLakgsS0FBS0EsS0FBS3dRLFFBQVFzaEIsSUFBSXh0QixRQUM3QjJDLEtBQUtqSCxLQUFLQSxLQUFLd1EsUUFBUXNoQixJQUFJbFQsTUFBTyxHQUVoQzNYLEtBQUtqSCxLQUFLQSxLQUFLd1EsUUFBUXNoQixJQUFJbFQsS0FBTSxDQUNuQyxJQUFJMnJCLElBMEJKLEdBbkJFQSxJQUxBdGpDLEtBQUtqSCxLQUFLQSxLQUFLME4sZ0JBQWdCOFAsSUFBSWxaLE1BQ2pDMkMsS0FBS2pILEtBQUtBLEtBQUswTixnQkFBZ0I2UCxJQUFJalosT0FDckMyQyxLQUFLakgsS0FBS0EsS0FBSzBOLGdCQUFnQjJQLElBQUkvWSxNQUNqQzJDLEtBQUtqSCxLQUFLQSxLQUFLME4sZ0JBQWdCNlAsSUFBSWpaLE1BRS9CLEVBRU4yQyxLQUFLakgsS0FBS0EsS0FBSzBOLGdCQUFnQjhQLElBQUlsWixPQUNqQzJDLEtBQUtqSCxLQUFLQSxLQUFLME4sZ0JBQWdCNlAsSUFBSWpaLE9BQ3JDMkMsS0FBS2pILEtBQUtBLEtBQUswTixnQkFBZ0IyUCxJQUFJL1ksT0FDakMyQyxLQUFLakgsS0FBS0EsS0FBSzBOLGdCQUFnQjZQLElBQUlqWixNQUUvQixFQUVBLEVBRW9CLGFBQXhCMkMsS0FBS2pILEtBQUtBLEtBQUtrQyxPQUNaK0ksTUFBTTlELFNBQVNGLEtBQUtqSCxLQUFLQSxLQUFLd00sTUFBTWcrQixRQUN2Q0QsSUFDRXBqQyxTQUFTRixLQUFLakgsS0FBS0EsS0FBS3dNLE1BQU1nK0IsTUFBUSxHQUNsQ0QsSUFBTXJzQyxLQUFLNlMsTUFBTTVKLFNBQVNGLEtBQUtqSCxLQUFLQSxLQUFLd00sTUFBTWcrQixLQUFPLElBQU0sRUFDNURELE1BR05BLElBQU0sRUFBRyxPQUFPQSxJQUV0QixPQUFPdGpDLEtBQUtqSCxLQUFLQSxLQUFLd1EsUUFBUXNoQixJQUFJeHRCLE1BR3BDLGNBRUUsT0FBTzJDLEtBQUt4RCxNQUFRLEdBQUd3RCxLQUFLeEQsTUFBTUMsTUFBTW04QixPQUFPNTRCLEtBQUt4RCxNQUFNaEIsS0FBTyxLQUduRSxhQVFFLE9BUEt3RSxLQUFLakgsS0FBS0EsS0FBS3cyQixRQUNsQnZ2QixLQUFLakgsS0FBS0EsS0FBS3cyQixNQUFRLEdBQ3ZCdnZCLEtBQUtqSCxLQUFLQSxLQUFLdzJCLE1BQU1pVSxRQUFTLEVBQzlCeGpDLEtBQUttSyxPQUFPLENBQUUsYUFBYyxLQUM1Qm5LLEtBQUttSyxPQUFPLENBQUUscUJBQXFCLEtBRzlCbkssS0FBS2pILEtBQUtBLEtBQUt3MkIsTUFBTWlVLE9BRzlCQyxpQkFBa0IvbUMsTUFDaEIsT0FBT3NELEtBQUtZLE1BQU0xSSxRQUFPK1UsR0FBS0EsRUFBRXZRLE9BQVNBLE9BRzNDLFdBQVlXLE9BQ1YyQyxLQUFLbUssT0FBTyxDQUFFLG9CQUFxQjlNLFFBR3JDLHNCQUF1QndrQixVQUNyQixNQUFNNmhCLFdBQWExakMsS0FBS2pILEtBQUtBLEtBQUt3MkIsTUFBTTFOLFVBQ2xDbmxCLEtBQU8sY0FBY21sQixpQkFDckI3aEIsS0FBS21LLE9BQU8sQ0FBRSxDQUFDek4sTUFBT2duQyxZQVM5QixxQkFBc0JDLGNBQWV0NUIsYUFBYyxFQUFPelAsUUFBVSxJQUNsRSxNQUFNc29DLE9BQVNsakMsS0FBS20wQixhQUFhd1AsY0FBYzluQyxlQUMvQyxJQUFLcW5DLE9BTUgsT0FMQTVqQyxHQUFHQyxjQUFjc04sTUFDZnBXLEtBQUtnSixLQUFLWSxPQUFPLHFCQUFzQixDQUNyQ3VqQyxRQUFTRCxpQkFHTixLQUdULE1BQU10aEMsTUFBUSxJQUFJbEMsVUFPbEIsR0FMSXZGLFFBQVFxSyxXQUFVNUMsTUFBTWhCLGFBQWV6RCxPQUFPaEQsUUFBUXFLLFdBQ3REckssUUFBUStILGFBQ1ZOLE1BQU1NLFdBQWFtQixjQUFjaUIsa0JBQWtCbkssUUFBUStILGNBR3hEMEgsbUJBQ0NoRixJQUFjekssUUFBUStILGlCQUFjMEMsSUFBY3pLLFFBQVFxSyxVQUFVLENBQ3RFLE1BQU1FLFlBQWNDLFdBQVcxSixPQUFPZCxTQUNsQ3VLLFFBQ0Y5QyxNQUFNaEIsYUFBZXpELE9BQU91SCxNQUFNeE8sSUFBSSxjQUN0QzBMLE1BQU1NLFdBQWEvRSxPQUFPdUgsTUFBTXhPLElBQUksZUFDcEMwTCxNQUFNbUMsaUJBQW1CNUcsT0FBT3VILE1BQU14TyxJQUFJLHFCQUMxQzBMLE1BQU1vQyxzQkFBd0I3RyxPQUM1QnVILE1BQU14TyxJQUFJLDJCQU1sQjBMLE1BQU1oRyxNQUFRMkQsS0FBS21ELFNBQ0csVUFBbEJ2SSxRQUFRcEMsTUFBbUI2SixNQUFNME0sU0FBVSxFQUMxQzFNLE1BQU0wTSxVQUFZblUsUUFBUXBDLFlBQ3pCNkosTUFBTXdoQyxjQUFjWCxPQUFPcG5DLEtBQ2pDdUcsTUFBTWlELFlBU1IsMEJBQ0V3K0IsbUJBQ0F6NUIsYUFBYyxFQUNkelAsUUFBVSxJQUVWLE1BQU1xTCxLQUFPakcsS0FBS2crQixrQkFBa0I4RixvQkFFcEMsSUFBSzc5QixLQU9ILFlBTkEzRyxHQUFHQyxjQUFjc04sTUFDZnBXLEtBQUtnSixLQUFLWSxPQUFPLDZCQUE4QixDQUM3Q3VqQyxRQUFTRSxtQkFDVHpuQyxNQUFPMkQsS0FBS3RELFFBTWxCLE1BQU0yRixNQUFRLElBQUlsQyxVQU9sQixHQUxJdkYsUUFBUXFLLFdBQVU1QyxNQUFNaEIsYUFBZXpELE9BQU9oRCxRQUFRcUssV0FDdERySyxRQUFRK0gsYUFDVk4sTUFBTU0sV0FBYW1CLGNBQWNpQixrQkFBa0JuSyxRQUFRK0gsY0FHeEQwSCxtQkFDQ2hGLElBQWN6SyxRQUFRK0gsaUJBQWMwQyxJQUFjekssUUFBUXFLLFVBQVUsQ0FDdEVySyxRQUFRK2tDLFlBQWMxNUIsS0FBS0csTUFDM0IsTUFBTWpCLFlBQWNDLFdBQVcxSixPQUFPZCxTQUNsQ3VLLFFBQ0Y5QyxNQUFNaEIsYUFBZXpELE9BQU91SCxNQUFNeE8sSUFBSSxjQUN0QzBMLE1BQU1NLFdBQWEvRSxPQUFPdUgsTUFBTXhPLElBQUksZUFDcEMwTCxNQUFNbUMsaUJBQW1CNUcsT0FBT3VILE1BQU14TyxJQUFJLHFCQUMxQzBMLE1BQU1vQyxzQkFBd0I3RyxPQUM1QnVILE1BQU14TyxJQUFJLDJCQU1sQjBMLE1BQU1oRyxNQUFRMkQsS0FBS21ELFNBQ0csVUFBbEJ2SSxRQUFRcEMsTUFBbUI2SixNQUFNME0sU0FBVSxFQUMxQzFNLE1BQU0wTSxVQUFZblUsUUFBUXBDLFlBQ3pCNkosTUFBTStiLG1CQUFtQm5ZLEtBQUtuSyxLQUNwQ3VHLE1BQU1pRCxZQUdSLGlCQUFrQnUyQixVQUFXeHhCLFlBQWF6UCxRQUFVLElBQ2xELElBQUlnSSxNQUFRNUMsS0FBS2k4QixnQkFDZkosVUFBVW4vQixLQUFPbS9CLFVBQVVuL0IsS0FBT20vQixXQUVwQyxJQUFLajVCLE1BQU16SyxPQUFRLENBQ2pCLElBQUkwSyxLQUFPLEtBQ1gsR0FBSWc1QixVQUFVbDBCLEtBQU0sQ0FDbEIsTUFBTUEsS0FBT2xSLEtBQUttUixNQUFNalIsSUFBSWtsQyxVQUFVbDBCLE1BQ3RDLEdBQTZCLFNBQXpCQSxLQUFLRSxTQUFTQyxPQUFtQixPQUNyQ2pGLFdBQWE4RSxLQUFLSSxZQUFZOHpCLFVBQVVyZ0MsU0FDL0JxZ0MsVUFBVXJnQyxLQUNuQnFILEtBQU9wTSxLQUFLbUssTUFBTWpLLElBQUlrbEMsVUFBVXJnQyxLQUlsQyxJQUFLcUgsS0FBTSxDQUdULE1BQU1SLE1BQVEsSUFBSWxDLFVBQ2xCa0MsTUFBTTBoQyxVQUFZLFVBQ1oxaEMsTUFBTXZMLE9BQ1p1TCxNQUFNaUQsWUFFUixJQUFLekMsS0FDSCxPQUFPdkQsR0FBR0MsY0FBY0MsS0FDdEIvSSxLQUFLZ0osS0FBS1ksT0FBTyxnQkFDZjVKLEtBQUtnSixLQUFLWSxPQUFPLDZCQUE4QixDQUM3Q3VqQyxRQUFTL0gsVUFBVW4vQixLQUFPbS9CLFVBQVVuL0IsS0FBT20vQixVQUMzQ3gvQixNQUFPMkQsS0FBS3RELFFBS3BCLElBQUloQixRQUFTLEVBWWIsU0FYTXNnQixPQUFPNGlCLFFBQVEsQ0FDbkIxbEMsTUFBTyxHQUFHekMsS0FBS2dKLEtBQUtDLFNBQVMsb0JBQzdCakUsUUFBUyxNQUFNaEYsS0FBS2dKLEtBQUtZLE9BQU8sc0JBQXVCLENBQ3JEMEcsT0FBUTgwQixVQUFVbi9CLEtBQ2xCTCxNQUFPMkQsS0FBS3RELGFBRWRtaUMsSUFBSyxLQUNIbmpDLFFBQVMsTUFJRSxJQUFYQSxPQUVHLE9BSVAsU0FMUXNFLEtBQUttN0Isd0JBQXdCLE9BQVEsQ0FBQ2g5QixVQUFVMEUsUUFHeERELE1BQVE1QyxLQUFLaThCLGdCQUFnQnA1QixLQUFLbkcsT0FFN0JrRyxNQUFNekssT0FBUSxPQUVuQixHQUFJMUIsS0FBS29DLEtBQUt5UixLQUFNLENBQ2xCLE1BQU1tckIsaUJDdDhFUCxNQUNMLG9CQUFxQi80QixLQUFPLEtBQU15aUIsVUFBWSxNQUM1QyxNQUFNamIsV0FBYXVRLGVBQ2pCLCtDQUNBLENBQUU0SyxLQUFNRixVQUFXemlCLE9BRXJCLE9BQU8sSUFBSTRQLFNBQVFDLFVBQ2pCLElBQUkrUyxTQUFXLEtBQ0gsSUFBSXRELE9BQU8sQ0FDckI5aUIsTUFBT3pDLEtBQUtnSixLQUFLWSxPQUFPLGtCQUFtQixDQUFFM0QsT0FDN0NqQixRQUFTeUksS0FDVDJZLFFBQVMsQ0FDUDVZLFNBQVUsQ0FDUm1DLE1BQU8zUCxLQUFLZ0osS0FBS0MsU0FBUyxpQkFDMUI4ZixTQUFVdGIsT0FDUm9iLFNBQVcsSUFBSUcsU0FDYnZiLEtBQUssR0FBR3BFLGNBQWMsdUJBRWpCeU0sUUFBUStTLGFBSXJCSSxRQUFTLFdBQ1Q5QyxNQUFPLElBQ0VyUSxTQUFRLEtBR2YzQixRQUFPLFFEMjZFaUNsUCxPQUN4Q2tILE1BQU0sR0FBR2xHLEtBQ1RrRyxNQUFNLEdBQUd5YyxNQUVMaGlCLE1BQVFPLE9BQU82M0IsV0FBVzkrQixJQUFJLHFCQUM5QmlNLE1BQU0sR0FBR29oQyxZQUFZM21DLFFBSS9CLE1BQU1nRixNQUFRLElBQUlsQyxVQVNsQixRQVBJa0YsSUFBY3pLLFFBQVFxSyxXQUN4QjVDLE1BQU1oQixhQUFlekQsT0FBT2hELFFBQVFxSyxnQkFFbENJLElBQWN6SyxRQUFRK0gsYUFDeEJOLE1BQU1NLFdBQWFtQixjQUFjaUIsa0JBQWtCbkssUUFBUStILGNBR3hEMEgsbUJBQ0NoRixJQUFjekssUUFBUStILGlCQUFjMEMsSUFBY3pLLFFBQVFxSyxVQUFVLENBQ3RFLE1BQU1FLFlBQWNDLFdBQVcxSixPQUFPZCxTQUNsQ3VLLFFBQ0Y5QyxNQUFNaEIsYUFBZXpELE9BQU91SCxNQUFNeE8sSUFBSSxjQUN0QzBMLE1BQU1NLFdBQWEvRSxPQUFPdUgsTUFBTXhPLElBQUksZUFDcEMwTCxNQUFNbUMsaUJBQW1CNUcsT0FBT3VILE1BQU14TyxJQUFJLHFCQUMxQzBMLE1BQU1vQyxzQkFBd0I3RyxPQUM1QnVILE1BQU14TyxJQUFJLDJCQU1sQjBMLE1BQU1oRyxNQUFRMkQsS0FBS21ELFNBQ25CZCxNQUFNTyxNQUFRQSxNQUFNLEdBQUdwSCxHQUNELFVBQWxCWixRQUFRcEMsTUFBbUI2SixNQUFNME0sU0FBVSxFQUMxQzFNLE1BQU0wTSxVQUFZblUsUUFBUXBDLFlBQ3pCNkosTUFBTXZMLE9BQ1p1TCxNQUFNaUQsWUFHUixrQkFBbUIyK0IsV0FBWTU1QixhQUFjLEdBQzNDLE1BQU0xSixPQUFTc2pDLFdBQVd6b0MsR0FDMUIsSUFBSXVMLE9BRUosR0FEQUEsT0FBUy9HLEtBQUtZLE1BQU1qSyxJQUFJZ0ssU0FDbkJvRyxPQUFRLENBQ1gsSUFBSW05QixRQUFVbGtDLEtBQUt5akMsaUJBQWlCUSxXQUFXdm5DLE1BQy9DLEdBQXVCLElBQW5Cd25DLFFBQVEvckMsT0FBYyxDQUN4QixJQUFJMUIsS0FBS29DLEtBQUt5UixLQXdDWixZQUhBaEwsR0FBR0MsY0FBY0MsS0FDZixTQUFTUSxLQUFLdEQsNEJBQTRCdW5DLFdBQVd2bkMsUUF0Q3JDLENBQ2xCLElBQUltRyxLQUFPLEtBQ1gsTUFBTThFLEtBQU9zOEIsV0FBV3Q4QixLQUFPbFIsS0FBS21SLE1BQU1qUixJQUFJc3RDLFdBQVd0OEIsTUFBUSxLQUNqRSxHQUFJQSxLQUFNLENBQ1IsR0FBNkIsU0FBekJBLEtBQUtFLFNBQVNDLE9BQW1CLE9BQ3JDakYsV0FBYThFLEtBQUtJLFlBQVlrOEIsV0FBV3pvQyxTQUNoQ3lvQyxXQUFXem9DLEtBQ3BCcUgsS0FBT3BNLEtBQUttSyxNQUFNakssSUFBSXN0QyxXQUFXem9DLEtBR25DLElBQUtxSCxLQUNILE9BQU92RCxHQUFHQyxjQUFjQyxLQUN0Qi9JLEtBQUtnSixLQUFLQyxTQUFTLDhCQUl2QixJQUFJaEUsUUFBUyxRQUNQc2dCLE9BQU80aUIsUUFBUSxDQUNuQjFsQyxNQUFPLEdBQUd6QyxLQUFLZ0osS0FBS0MsU0FBUyxvQkFDN0JqRSxRQUFTLE1BQU1oRixLQUFLZ0osS0FBS1ksT0FBTyxzQkFBdUIsQ0FDckQwRyxPQUFRazlCLFdBQVd2bkMsS0FDbkJMLE1BQU8yRCxLQUFLdEQsYUFFZG1pQyxJQUFLLEtBQ0huakMsUUFBUyxLQUdiLE1BQU1XLFdBQzBCLElBQXZCMkQsS0FBS21ILFFBQVE5SyxNQUF3QjJELEtBQUttSCxPQUFPOUssTUFBUTJELEtBRWxFLElBQWUsSUFBWHRFLE9BRUcsT0FFUCxTQUhRVyxNQUFNOCtCLHdCQUF3QixPQUFRLENBQUN0NEIsS0FBS3FFLFdBRXBEZzlCLFFBQVU3bkMsTUFBTW9uQyxpQkFBaUI1Z0MsS0FBS25HLE9BQ2pDd25DLFFBQVEvckMsT0FBUSxhQUNmK3JDLFFBQVEsR0FBR2xkLGVBT1ZrZCxRQUFRL3JDLE9BQVMsR0FDMUJtSCxHQUFHQyxjQUFjQyxLQUNmLFNBQVNRLEtBQUt0RCx1Q0FBdUN1bkMsV0FBV3ZuQyxzQ0FHcEVxSyxPQUFTbTlCLFFBQVEsR0FHbkIsSUFBS245QixPQUFPaE8sS0FBS0EsS0FBS3NyQixXQUFXak4sS0FBTSxDQUNqQzNnQixLQUFLb0MsS0FBSzJVLFFBQVE0WSxLQUFPLEdBQzNCOW1CLEdBQUdDLGNBQWNDLEtBQUsvSSxLQUFLZ0osS0FBS0MsU0FBUywyQkFHOUIsSUFBSXNnQixtQkFBbUJoZ0IsS0FBS21ELFNBQVU0RCxPQUFPdkwsR0FBSTZPLGFBQ3pEODVCLGlCQUVQLEdBQUlwOUIsT0FBT2hPLEtBQUtBLEtBQUtzckIsV0FBV2pOLEtBQU0sQ0FDdkIsSUFBSXNNLG1CQUFtQjFqQixLQUFLbUQsU0FBVTRELE9BQU92TCxHQUFJNk8sYUFDekQ4NUIsa0JBSVQscUJBQXNCQyxRQUFTLEdBQzdCLE9BQVEzdEMsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLG1CQUNoQyxJQUFLLFdBQVksQ0FDZixNQUFNRyxLQUFPLElBQUlxSixVQUFVSCxLQUFLMUQsVUFRaEMsT0FQQXhGLEtBQUtra0IsVUFBVyxFQUNoQmxrQixLQUFLdXRDLFVBQVcsRUFDaEJ2dEMsS0FBS3d0QyxvQkFBcUIsRUFDMUJ4dEMsS0FBS1AsVUFBNkQsSUFBbERFLEtBQUtJLFNBQVNGLElBQUksT0FBUSxvQkFDMUNHLEtBQUtnRSxPQUFTLHdCQUNSaEUsS0FBS3NuQixtQkFBbUIsTUFBT2dtQixPQUFTLEVBQUksR0FDbER0dEMsS0FBS3dPLFlBRUh4TyxLQUFLbUosYUFBZUQsS0FBS2pILEtBQUtBLEtBQUswTixnQkFBZ0I4UCxJQUFJbFosTUFBUSxJQUluRSxRQUNFLE9BQU8rbUMsT0FDSHBrQyxLQUFLakgsS0FBS0EsS0FBSzBOLGdCQUFnQjhQLElBQUlsWixNQUFRLEdBQzNDMkMsS0FBS2pILEtBQUtBLEtBQUswTixnQkFBZ0I4UCxJQUFJbFosT0FJN0Nnb0IsYUFBY3hELFVBQ1osT0FBSzdoQixLQUFLakgsS0FBS0EsS0FBS3cyQixRQU9mdnZCLEtBQUtqSCxLQUFLQSxLQUFLdzJCLE1BQU0xTixXQUNuQjdoQixLQUFLakgsS0FBS0EsS0FBS3cyQixNQUFNMU4sV0FQMUI3aEIsS0FBS2pILEtBQUtBLEtBQUt3MkIsTUFBUSxHQUN2QnZ2QixLQUFLakgsS0FBS0EsS0FBS3cyQixNQUFNaVUsUUFBUyxFQUM5QnhqQyxLQUFLbUssT0FBTyxDQUFFLGFBQWMsTUFDckIsR0FPWCxtQkFBb0IwWCxnQkFDWjdoQixLQUFLbUssT0FBTyxDQUFFLENBQUMsY0FBYzBYLGFBQWEsSUFHbEQscUJBQXNCQSxnQkFDZDdoQixLQUFLbUssT0FBTyxDQUFFLENBQUMsY0FBYzBYLGFBQWEsSUFHbEQ3VCxnQkFBaUJyTixRQUNmLE1BQU1vRyxPQUFTL0csS0FBS1ksTUFBTWpLLElBQUlnSyxRQUM5QixHQUF5QixXQUFyQm9HLE9BQU9oTyxLQUFLa0MsS0FBbUIsT0FBTyxLQUMxQyxNQUFNcWhCLE9BQVMsR0FTZixPQVJJdlYsT0FBT2hPLEtBQUtBLEtBQUs2SixNQUFNcWlCLEtBQUt6cEIsSUFDOUI4Z0IsT0FBT3ZrQixLQUFLaUksS0FBS1ksTUFBTWpLLElBQUlvUSxPQUFPaE8sS0FBS0EsS0FBSzZKLE1BQU1xaUIsS0FBS3pwQixLQUdyRHVMLE9BQU93OUIsc0JBQXdCeDlCLE9BQU9oTyxLQUFLQSxLQUFLNkosTUFBTXNpQixXQUFXMXBCLElBQ25FOGdCLE9BQU92a0IsS0FBS2lJLEtBQUtZLE1BQU1qSyxJQUFJb1EsT0FBT2hPLEtBQUtBLEtBQUs2SixNQUFNc2lCLFdBQVcxcEIsS0FHeEQ4Z0IsT0FJVHRXLEtBQU10SixNQUVKLE1BQU1tRyxLQUFPN0MsS0FBS1ksTUFBTWpLLElBQUkrRixNQUM1QixHQUFJbUcsS0FDRixNQUFPLENBQ0w1SCxLQUFNLE9BQ05vQyxNQUFPd0YsTUFJWCxNQUNNMmhDLFFBRFMsY0FDUUMsS0FBSy9uQyxNQUM1QixJQUFJKzhCLFVBQVksS0FDWitLLFNBQVdBLFFBQVFyc0MsU0FBUXNoQyxVQUFZK0ssUUFBUSxJQUVuRCxNQUFNNWhDLE1BQVE1QyxLQUFLc2MsT0FBT3BrQixRQUFPb0YsS0FFM0JBLEVBQUVaLE9BQ0hZLEVBQUVaLEtBQUs2a0Msb0JBQW9COW1DLFFBQVEsTUFBTyxNQUN6Q2lDLEtBQUs2a0Msb0JBQW9COW1DLFFBQVEsTUFBTyxLQUN4QzZDLEVBQUVvbkMsTUFBTW5ELG9CQUFvQjltQyxRQUFRLE1BQU8sTUFDekNpQyxLQUFLNmtDLG9CQUFvQjltQyxRQUFRLE1BQU8sS0FDMUM2QyxFQUFFb25DLE1BQU1uRCxvQkFBb0I5bUMsUUFBUSxNQUFPLE1BQ3pDZy9CLFdBQVc4SCxvQkFBb0I5bUMsUUFBUSxNQUFPLE9BR3RELEdBQUltSSxNQUFNekssT0FBUSxNQUFPLENBQUU4QyxLQUFNLE9BQVFvQyxNQUFPdUYsTUFBTSxJQUd0RCxNQUFNc0QsUUFBVSxDQUFDLE1BQU8sTUFBTyxNQUFPLE1BQU8sTUFBTyxNQUFPLE1BQU8sT0FDbEUsSUFBSyxJQUFJK0csRUFBSSxFQUFHQSxFQUFJL0csUUFBUS9OLE9BQVE4VSxJQUFLLENBQ3ZDLE1BQU1oSCxLQUFPakcsS0FBS2crQixrQkFBa0I5M0IsUUFBUStHLElBQzVDLEdBQUloSCxLQUFNLENBQ1IsR0FBSUEsS0FBS25LLEtBQUt5bEMsc0JBQXdCN2tDLEtBQUtiLGNBQ3pDLE1BQU8sQ0FBRVosS0FBTSxpQkFBa0JvQyxNQUFPNEksTUFFMUMsR0FBSUEsS0FBS3d6QixXQUFXOEgsc0JBQXdCN2tDLEtBQUtiLGNBQy9DLE1BQU8sQ0FBRVosS0FBTSxpQkFBa0JvQyxNQUFPNEksTUFFMUMsR0FBSUEsS0FBS0csT0FBT203QixzQkFBd0I3a0MsS0FBS2IsY0FDM0MsTUFBTyxDQUFFWixLQUFNLGlCQUFrQm9DLE1BQU80SSxPQU05QyxNQUFNMCtCLFVBQVksQ0FBQyxNQUFPLE9BQzFCLElBQUssSUFBSTEzQixFQUFJLEVBQUdBLEVBQUkwM0IsVUFBVXhzQyxPQUFROFUsSUFBSyxDQUN6QyxNQUFNMjNCLEtBQU81a0MsS0FBS20wQixhQUFhd1EsVUFBVTEzQixJQUN6QyxHQUFJMjNCLEtBQU0sQ0FDUixHQUFJQSxLQUFLOW9DLEtBQUt5bEMsc0JBQXdCN2tDLEtBQUtiLGNBQ3pDLE1BQU8sQ0FBRVosS0FBTSxZQUFhb0MsTUFBT3VuQyxNQUVyQyxHQUFJQSxLQUFLbkwsV0FBVzhILHNCQUF3QjdrQyxLQUFLYixjQUMvQyxNQUFPLENBQUVaLEtBQU0sWUFBYW9DLE1BQU91bkMsTUFFckMsR0FBSUEsS0FBS3grQixPQUFPbTdCLHNCQUF3QjdrQyxLQUFLYixjQUMzQyxNQUFPLENBQUVaLEtBQU0sWUFBYW9DLE1BQU91bkMsUUFTM0Msa0JBQ0UsT0FBTzVrQyxLQUFLc2MsT0FBT3BrQixRQUFPb0YsS0FFcEJBLEVBQUV2RSxLQUFLQSxLQUFLd21CLGdCQUNkamlCLEVBQUV2RSxLQUFLQSxLQUFLd21CLGVBQWVwbkIsUUFDM0JtRixFQUFFdkUsS0FBS0EsS0FBS3dtQixnQkFBZ0JnaUIsc0JBQzFCOXFDLEtBQUtnSixLQUNGQyxTQUFTLGlDQUNSNmhDLHNCQUtaLGtCQUNFLE9BQU92aEMsS0FBS3NjLE9BQU9wa0IsUUFBT29GLEtBRXBCQSxFQUFFdkUsS0FBS0EsS0FBS3dtQixnQkFDZGppQixFQUFFdkUsS0FBS0EsS0FBS3dtQixlQUFlcG5CLFFBQzNCbUYsRUFBRXZFLEtBQUtBLEtBQUt3bUIsZ0JBQWdCZ2lCLHNCQUMxQjlxQyxLQUFLZ0osS0FDRkMsU0FBUyxpQ0FDUjZoQyxzQkFLWixlQUtFLE9BQUl2aEMsS0FBSzBLLE1BQU1sTyxNQUNOLEdBQUd3RCxLQUFLMEssTUFBTWxPLE1BQU0ySyxPQUFPM0wsTUFBTXdFLEtBQUswSyxNQUFNbE8sTUFBTWhCLEtBR2xEd0UsS0FBS3hFLEdBYWhCLGVBQ0UsT0FBSXdFLEtBQUtqSCxLQUFLeUQsTUFBTTQ4QixVQUFrQnA1QixLQUFLeEUsR0FDcEN3RSxLQUFLbUQsU0FHZCx1QkFBd0JySCxLQUV0QixHQUFJQSxJQUFJOUQsU0FBUyxLQUFNLENBRXJCLE1BQU8rRCxRQUFTQyxTQUFXRixJQUFJRyxNQUFNLEtBQ3JDLEdBQWdCLFVBQVpGLFFBQ0YsT0FBT3RGLEtBQUt5RixPQUFPQyxPQUFPSCxTQUNyQixDQUNMLE1BQU1TLE1BQVFoRyxLQUFLc0gsT0FBT3BILElBQUlvRixTQUM5QixJQUFLVSxNQUFPLE9BQU8sS0FDbkIsTUFBTXVCLFVBQVl2QixNQUFNd0Isb0JBQW9CLFFBQVNqQyxTQUNyRCxJQUFLZ0MsVUFBVyxPQUFPLEtBRXZCLE9BRGMsSUFBSUUsTUFBTUYsV0FDWDNCLE9BS2pCLE9BQU81RixLQUFLeUYsT0FBT3ZGLElBQUltRixNQUFRLEtBTWpDLGlDQUNFLE1BQU0ySyxnQkFBa0IsR0FDeEIsSUFBSyxNQUFPM0ssSUFBS3VCLFNBQVV0RCxPQUFPQyxRQUFRZ0csS0FBS2pILEtBQUtBLEtBQUswTixpQkFDdkQsR0FBSXBKLE1BQU1sRSxVQUFZa0UsTUFBTWxFLFFBQVE4RCxXQUFXLEtBQU0sQ0FDbkQsTUFBTTRHLEVBQUksSUFBSTlNLEtBQUtzRyxNQUFNbEUsZUFDbkIwSyxFQUFFL00sS0FBSyxDQUFFSyxPQUFPLElBQ2xCME0sRUFBRXZNLFFBQ0ptUCxnQkFBZ0Isd0JBQXdCM0ssYUFBZTdFLEtBQUs2UyxNQUMxRGpHLEVBQUV2TSxjQU1KMEksS0FBS21LLE9BQU8xRCx1QkFDWnpHLEtBQUs2a0MsNkJBTWIsb0NBQ0UsTUFBTXArQixnQkFBa0IsR0FDeEIsSUFBSyxNQUFPM0ssSUFBS3VCLFNBQVV0RCxPQUFPQyxRQUFRZ0csS0FBS2pILEtBQUtBLEtBQUswTixpQkFDdkQsR0FBSXBKLE1BQU1sRSxVQUFZa0UsTUFBTWxFLFFBQVE4RCxXQUFXLEtBQU0sQ0FDbkQsTUFBTWhGLElBQU0sSUFBSWxCLEtBQUtzRyxNQUFNbEUsU0FBUzBXLFNBQVMsQ0FBRUMsVUFBVSxJQUFReFksTUFDM0RjLElBQU0sSUFBSXJCLEtBQUtzRyxNQUFNbEUsU0FBUzBXLFNBQVMsQ0FBRTJDLFVBQVUsSUFBUWxiLE1BQzNEd3RDLFFBQVU3dEMsS0FBSzZTLE9BQU83UixJQUFNRyxLQUFPLEdBQ25DMnNDLFVBQ0pELFFBQVUsR0FBTSxFQUFJQSxRQUFxQyxHQUEzQjd0QyxLQUFLdXRCLE1BQU1zZ0IsUUFBVSxJQUNqREMsWUFDRnQrQixnQkFBZ0Isd0JBQXdCM0ssYUFBZWlwQyxpQkFLdkQva0MsS0FBS21LLE9BQU8xRCx1QkFDWnpHLEtBQUs2a0MsNkJBTWIsbUNBQ0UsTUFBTXArQixnQkFBa0IsR0FDeEIsSUFBSyxNQUFPM0ssSUFBS3VCLFNBQVV0RCxPQUFPQyxRQUFRZ0csS0FBS2pILEtBQUtBLEtBQUswTixpQkFDdkQsR0FBSXBKLE1BQU1sRSxTQUFXa0UsTUFBTWxFLFFBQVE4RCxXQUFXLEtBQU0sQ0FDbEQsSUFBSThuQyxVQUNKLElBQ0VBLFVBQVksSUFBSWh1QyxLQUNkc0csTUFBTWxFLFFBQ042RyxLQUFLdTlCLHdCQUNMMXRCLFNBQVMsQ0FBRUMsVUFBVSxJQUFReFksTUFDL0IsTUFBT2lDLEtBQ1B3ckMsVUFBWSxLQUVWQSxZQUNGdCtCLGdCQUFnQix3QkFBd0IzSyxhQUFlaXBDLGlCQUt2RC9rQyxLQUFLbUssT0FBTzFELGlCQUdwQix3QkFBeUIvSixLQUFNVyxPQUM3QixNQUFNNkYsZUFBaUIsR0FDakI2aEMsVUFBWS9nQyxNQUFNOUQsU0FBUzdDLFFBQVUsS0FBTzZDLFNBQVM3QyxPQUUzRCxHQURBNkYsZUFBZXhHLE1BQVFxb0MsV0FDbEJBLFdBQ0MxbkMsTUFBTUosV0FBVyxLQUFNLENBRXpCaUcsZUFEZ0J4RyxLQUFLakMsUUFBUSxTQUFVLGFBQ2I0QyxZQUl4QjJDLEtBQUttSyxPQUFPakgsc0JBQ1psRCxLQUFLNmtDLDZCQUdiLHdCQUF5Qng2QixhQUFjLEdBQ3JDLE1BQU0zSixRQUFVLEdBQ1ZvaUIsUUFBVSxHQUlWNXBCLE1BQVF6QyxLQUFLZ0osS0FBS0MsU0FBUyxvQkFDakMsSUFBSS9FLFFBQVUsd0JBQ2QsSUFBSyxNQUFNa0ksUUFBUTdDLEtBQUtZLE1BQ3RCLEdBQWtCLFVBQWRpQyxLQUFLNUgsTUFDSDRILEtBQUttaUMsaUJBQWtCLENBQ3pCLE1BQU10akMsVUFBWSxJQUFJdWpDLElBQUksQ0FBRUMsTUFBTyxNQUFPcjFCLFNBQVMsQ0FBRTFZLE9BQU8sSUFDdERzK0IsV0FBYTV5QixLQUFLeEYsTUFDeEIsSUFBSThuQyxRQUFVLEtBQ1ZDLHNCQUF3QixLQUM1QixHQUFJMWpDLElBQUlwSyxNQUFRbStCLFlBQWMvekIsSUFBSXBLLE9BWFQsR0FXMEMsQ0FDakUsTUFBTSt0QyxpQkFBbUIsSUFBSUosSUFBSSxDQUFFQyxNQUFPLEtBQU1yMUIsU0FBUyxDQUN2RDFZLE9BQU8sSUFJVCxHQUZBMnJCLFFBQVEvcUIsS0FBSzhLLEtBQUtySCxJQUdoQmk2QixXQW5Cc0IsSUFvQnRCQSxXQUFhNFAsV0FBVy90QyxPQXBCRixHQXFCdEIsQ0FDQSxNQUFNZ3VDLG9CQUFzQixJQUFJTCxJQUFJLENBQ2xDQyxNQUFPLEVBQ1BoN0IsT0FBUSxJQUNQMkYsU0FBUyxDQUFFMVksT0FBTyxJQUNmb3VDLFVBQVlELGNBQWNodUMsTUFDMUJrdUMsaUJBQW1CLGVBQWVGLGNBQWN2L0IsT0FBTyxRQUFRdS9CLGNBQWN2L0IsT0FBTyxRQUFRdy9CLGlCQUNsR2xKLFFBQVFvSixNQUFNRCxrQkFDZEosc0JBQXdCLGlDQUFpQzN1QyxLQUFLZ0osS0FBS1ksT0FDakUsaUJBQ0EsQ0FDRTlJLFFBQVMsR0FBRyt0QyxjQUFjdi9CLE9BQU8sUUFBUXUvQixjQUFjdi9CLE9BQU8sS0FDOUR3L0IsVUFDQTNpQyxNQUFPQyxLQUFLOUosS0FBSzJELEtBQ2pCKzRCLFdBQVlBLFdBQWE0UCxXQUFXL3RDLDJCQUlsQzBJLEtBQUt1aUMsT0FBT3ZpQyxLQUFLd0osSUFBTSs3QixXQUUvQkosU0FBV0UsV0FBVy90QyxNQUN0QnFELFNBQVcsaUNBQWlDbEUsS0FBS2dKLEtBQUtZLE9BQ3BELGtCQUNBLENBQ0V3QyxLQUFNQSxLQUFLOUosS0FBSzJELEtBQ2hCZ0YsSUFBS0EsSUFBSXBLLE1BQ1RvdUMsTUFBTzdpQyxLQUFLeEYsTUFDWjhuQyxRQUFTRSxXQUFXL3RDLHFCQUdNLE9BQTFCOHRDLHdCQUNGenFDLFNBQVd5cUMsNkJBRVB2aUMsS0FBSzhpQyxtQkFBbUJSLGNBRTlCeHFDLFNBQVcsZ0NBQWdDbEUsS0FBS2dKLEtBQUtZLE9BQ25ELGtCQUNBLENBQ0V3QyxLQUFNQSxLQUFLOUosS0FBSzJELEtBQ2hCZ0YsSUFBS0EsSUFBSXBLLE1BQ1RvdUMsTUFBTzdpQyxLQUFLeEYscUJBR2hCcUQsUUFBUTNJLEtBQUs4SyxLQUFLckgsVUFFZHFILEtBQUsraUMsd0JBSWpCLElBQUt2N0IsWUFBYSxDQUNoQjFQLFNBQVcsT0FDWCxNQUFNSSxRQUFVLENBQUVzQixNQUFPMkQsS0FBSzNELGFBQ3hCOUIsV0FBV3NyQyxjQUFjM3NDLE1BQU95QixRQUFTLENBQUVJLFVBRW5ELE1BQU8sQ0FBRTJGLFFBQWtCb2lCLFNBRzdCLGtCQUFtQnpZLGFBQWMsR0FDL0IsTUFBTXk3QixZQUFjOWxDLEtBQUtqSCxLQUFLQSxLQUFLd1EsUUFBUW8zQixJQUFJdGpDLE1BQzFDeW9DLG1CQUFtQjlsQyxLQUFLbUssT0FBTyxDQUFFLHlCQUEwQixJQUNoRSxNQUFNNDdCLG1CQUFxQnR2QyxLQUFLSSxTQUFTRixJQUFJLE9BQVEsYUFDL0Nvc0IsbUJBQXFCLElBQUloc0IsS0FBSyxTQUFTRCxLQUFLLENBQUVLLE9BQU8sS0FBU0csTUFDOUQwdUMsdUJBQXlCampCLGFBQWUraUIsWUFDOUMsSUFBSUcsWUFDQUYsbUJBRUdFLFlBRExELHVCQUNtQixVQUNBLFNBQ1ZBLHlCQUNUQyxZQUFjLFFBRWhCLE1BQU0vc0MsTUFBUXpDLEtBQUtnSixLQUFLQyxTQUFTLHFCQUNqQyxJQUFJL0UsUUFBVSx3QkFDZCxHQUFJb3JDLG9CQUFzQkMsdUJBQXdCLENBQ2hELE1BQU1FLG9CQUFzQixJQUFJbnZDLEtBQUtrdkMsYUFBYW52QyxLQUFLLENBQUVLLE9BQU8sS0FDN0RHLFlBQ0cwSSxLQUFLbUssT0FBTyxDQUNoQix5QkFDRW5LLEtBQUtqSCxLQUFLQSxLQUFLd1EsUUFBUW8zQixJQUFJdGpDLE1BQVE2b0MsZUFFdkN2ckMsU0FBVyxpQ0FBaUNsRSxLQUFLZ0osS0FBS1ksT0FDcEQscUJBQ0EsQ0FDRXFCLElBQUtxaEIsWUFDTDJpQixNQUFPSSxZQUNQWCxRQUFTZSw2QkFJYnZyQyxTQUFXLGdDQUFnQ2xFLEtBQUtnSixLQUFLWSxPQUNuRCx3QkFDQSxDQUFFcUIsSUFBS3FoQixZQUFhMmlCLE1BQU9JLHVCQUcvQixJQUFLejdCLFlBQWEsQ0FDaEIxUCxTQUFXLE9BQ1gsTUFBTUksUUFBVSxDQUFFc0IsTUFBTzJELFlBQ25CekYsV0FBV3NyQyxjQUFjM3NDLE1BQU95QixRQUFTLENBQUVJLFdBSXJELG1CQUFvQjhGLFFBQVN3SixhQUFjLEdBQ3pDLE1BQU16SCxNQUFRNUMsS0FBS1ksTUFBTWpLLElBQUlrSyxTQUM3QixJQUFLK0IsTUFBTyxPQUNaLElBQUkxSixNQUFRLEdBQ1J5QixRQUFVLEdBQ2QsTUFBTW9vQixZQUFjLElBQUloc0IsS0FBSyxTQUc3QixTQUZNZ3NCLFlBQVlqc0IsS0FBSyxDQUFFSyxPQUFPLElBQzNCa1QsbUJBQW1CalUsU0FBUzBjLGVBQWVpUSxhQUM1Q0EsWUFBWXpyQixNQUFRc0wsTUFBTXZGLE9BQVMwbEIsWUFBWXpyQixPQUFTLEdBQUksQ0FDOUQsTUFBTTJ1QyxZQUFjLElBQUlsdkMsS0FBSyxjQUN2Qmt2QyxZQUFZbnZDLEtBQUssQ0FBRUssT0FBTyxJQUMzQmtULG1CQUFtQmpVLFNBQVMwYyxlQUFlbXpCLGFBQ2hEdHJDLFFBQVVsRSxLQUFLZ0osS0FBS1ksT0FBTyx5QkFBMEIsQ0FDbkR3QyxLQUFNRCxNQUFNbEcsS0FDWnlvQyxRQUFTYyxZQUFZM3VDLFFBRXZCNEIsTUFBUXpDLEtBQUtnSixLQUFLWSxPQUFPLG9CQUFxQixDQUM1Q3dDLEtBQU1ELE1BQU1sRyxLQUNaZ0YsSUFBS3FoQixZQUFZenJCLE1BQ2pCb3VDLE1BQU85aUMsTUFBTXZGLGNBRVR1RixNQUFNK2lDLG1CQUFtQk0sWUFBWTN1QyxZQUUzQzRCLE1BQVF6QyxLQUFLZ0osS0FBS1ksT0FBTyxvQkFBcUIsQ0FDNUN3QyxLQUFNRCxNQUFNbEcsS0FDWmdGLElBQUtxaEIsWUFBWXpyQixNQUNqQm91QyxNQUFPOWlDLE1BQU12RixRQUVmMUMsUUFBVWxFLEtBQUtnSixLQUFLWSxPQUFPLHlCQUEwQixDQUNuRHdDLEtBQU1ELE1BQU1sRyxPQUdoQixNQUFNM0IsUUFBVSxDQUFFc0IsTUFBTzJELEtBQUs0NEIsV0FDeEJyK0IsV0FBV3NyQyxjQUFjM3NDLE1BQU95QixRQUFTLENBQUVJLGdCQUMzQzZILE1BQU1nakMsd0JBR2QsbUJBQW9CTyxZQUNsQixJQVVJQyxhQVZBQyxZQUFjcm1DLEtBQUtqSCxLQUFLQSxLQUFLcVEsT0FBTys4QixhQUFhOW9DLE1BSXJELEdBSDZCLGtCQUFoQmdwQyxjQUNYQSxZQUE4QixVQUFoQkEsYUFFWnh3QixLQUFLek0sT0FBT0MsaUJBQW1CODhCLFdBT25DLE9BQVFBLFlBQ04sSUFBSyxPQUNILEdBQUlFLGFBR0YsU0FGTXJtQyxLQUFLc21DLFlBQVksUUFDdkJGLG1CQUFxQnBtQyxLQUFLdW1DLGdCQUFnQixRQUN0Q0gsYUFBYWp1QyxPQUFTLEVBQ3hCLElBQUssTUFBTXF1QyxVQUFVSixhQUNuQkksT0FBT2hMLGNBR054N0IsS0FBSzJiLFdBQ1osTUFDRixJQUFLLFFBQ0gsR0FBSTBxQixhQUdGLFNBRk1ybUMsS0FBS3NtQyxZQUFZLFNBQ3ZCRixtQkFBcUJwbUMsS0FBS3VtQyxnQkFBZ0IsU0FDdENILGFBQWFqdUMsT0FBUyxFQUN4QixJQUFLLE1BQU1xdUMsVUFBVUosYUFDbkJJLE9BQU9oTCxjQUdOeDdCLEtBQUt5bUMsWUFDWixNQUNGLElBQUssUUFDSCxHQUFJSixhQUdGLFNBRk1ybUMsS0FBS3NtQyxZQUFZLFNBQ3ZCRixtQkFBcUJwbUMsS0FBS3VtQyxnQkFBZ0IsU0FDdENILGFBQWFqdUMsT0FBUyxFQUN4QixJQUFLLE1BQU1xdUMsVUFBVUosYUFDbkJJLE9BQU9oTCxjQUdOeDdCLEtBQUswbUMsWUFDWixNQUNGLElBQUssY0FDSCxHQUFJTCxhQUdGLFNBRk1ybUMsS0FBS3NtQyxZQUFZLGVBQ3ZCRixtQkFBcUJwbUMsS0FBS3VtQyxnQkFBZ0IsZUFDdENILGFBQWFqdUMsT0FBUyxFQUN4QixJQUFLLE1BQU1xdUMsVUFBVUosYUFDbkJJLE9BQU9oTCxjQUdOeDdCLEtBQUs0Yix1QkFqRFZ5cUIsa0JBQW1Ccm1DLEtBQUsybUMsdUJBQ2pCM21DLEtBQUs0bUMsb0JBcURwQixzQkFBdUJDLGFBTXJCLE9BTG1CN21DLEtBQUsyNUIsUUFDckJsN0IsS0FBSStuQyxRQUNJQSxTQUVSdHVDLFFBQU9zdUMsUUFBVUEsT0FBT3p0QyxLQUFLcU4sUUFBVXlnQyxjQUk1QyxtQkFBb0JDLFlBQ2xCLE9BQVFBLFlBQ04sSUFBSyxnQkFDQzltQyxLQUFLNjVCLG9CQUNENzVCLEtBQUs2NUIsY0FBYzJCLGVBS25COXNCLE1BQU15c0Isd0JBQXdCLGVBQWdCLENBQ2xELENBQ0UvMEIsTUFBTzNQLEtBQUtnSixLQUFLQyxTQUFTLDBCQUMxQjJ1QixLQUFNNTNCLEtBQUtJLFNBQVNGLElBQUksT0FBUSxxQkFDNUIsK0NBQ0EsS0FDSjZRLE9BQVF4SCxLQUFLczdCLEtBQ2JybkIsU0FBVSxDQUNSZ21CLGFBQVM1MEIsRUFDVDIwQixZQUFRMzBCLEVBQ1JnMkIsTUFBTyxHQUVUOUwsTUFBTyxDQUNMdEQsS0FBTSxDQUNKc1AsU0FBUyxFQUNUeEIsVUFBVSxJQUdkRCxVQUFVLEtBS2hCLE1BQ0YsSUFBSyxXQUNDOTVCLEtBQUs0UyxTQUNQNVMsS0FBSzRTLFNBQVM0b0IsZUFLUjlzQixNQUFNeXNCLHdCQUF3QixlQUFnQixDQUNsRCxDQUNFLzBCLE1BQU8zUCxLQUFLZ0osS0FBS0MsU0FBUyxxQkFDMUIydUIsS0FBTTUzQixLQUFLSSxTQUFTRixJQUFJLE9BQVEscUJBQzVCLGdEQUNBLEtBQ0o2USxPQUFReEgsS0FBS3M3QixLQUNicm5CLFNBQVUsQ0FDUmdtQixhQUFTNTBCLEVBQ1QyMEIsWUFBUTMwQixFQUNSZzJCLE1BQU8sR0FFVDlMLE1BQU8sQ0FDTHRELEtBQU0sQ0FDSnNQLFNBQVMsRUFDVHBCLFlBQVksSUFJaEJMLFVBQVUsTUFXdEJpTixVQUFXWixZQUNULElBQUtubUMsS0FBS2pILEtBQUtBLEtBQUtxUSxPQUFRLE9BQU8sRUFDbkMsSUFBSWk5QixZQUFjcm1DLEtBQUtqSCxLQUFLQSxLQUFLcVEsT0FBTys4QixhQUFhOW9DLE1BQ3JELFlBQUlnSSxJQUFjZ2hDLGNBQ1csa0JBQWhCQSxjQUNYQSxZQUE4QixVQUFoQkEsYUFFVEEsYUFHVCxnQkFBaUJGLGtCQUNUbm1DLEtBQUttSyxPQUFPLENBQUUsQ0FBQyxlQUFlZzhCLHFCQUFxQixJQUczRCxrQkFBbUJBLGtCQUNYbm1DLEtBQUttSyxPQUFPLENBQUUsQ0FBQyxlQUFlZzhCLHFCQUFxQixJQUczRCxtQkFBb0JhLGVBQ1pobkMsS0FBS21LLE9BQU8sQ0FBRSxDQUFDNjhCLFNBQVUsSUFHakMsd0JBQXlCbjlCLHNCQUNqQjdKLEtBQUttSyxPQUFPLENBQUUsa0NBQW1DTixpQkFHekQscUJBQ0UsTUFBTTJ6QixVQUFZLEdBQ2xCLElBQUssTUFBTW5nQyxTQUFTMkMsS0FBS1ksTUFDSixVQUFmdkQsTUFBTXBDLE1BQW9Cb0MsTUFBTXRFLEtBQUtBLEtBQUtzckIsV0FBV3BOLFVBQ3ZEdW1CLFVBQVV6bEMsS0FBS3NGLE9BUW5CLE9BSkFtZ0MsVUFBVXRNLE1BQUssQ0FBQzEzQixFQUFHaXNCLElBQ1Zqc0IsRUFBRWtELEtBQUt1cUMsY0FBY3hoQixFQUFFL29CLFFBR3pCOGdDLFVBR1QseUJBQ0UsTUFBTTBKLFdBQWEsR0FDbkIsSUFBSyxNQUFNN3BDLFNBQVMyQyxLQUFLWSxNQUN2QixHQUFtQixXQUFmdkQsTUFBTXBDLE9BQXNCb0MsTUFBTXRFLEtBQUtBLEtBQUtzckIsV0FBV2pOLEtBQU0sQ0FDL0QsTUFBTXhVLE1BQVE1QyxLQUFLWSxNQUFNakssSUFBSTBHLE1BQU10RSxLQUFLQSxLQUFLNkosTUFBTXFpQixLQUFLenBCLElBQ3hENkIsTUFBTXRFLEtBQUtBLEtBQUs2SixNQUFNcWlCLEtBQUs1bkIsTUFBUXVGLE1BQVFBLE1BQU12RixNQUFRLEVBQ3pENnBDLFdBQVdudkMsS0FBS3NGLE9BUXBCLE9BSkE2cEMsV0FBV2hXLE1BQUssQ0FBQzEzQixFQUFHaXNCLElBQ1hqc0IsRUFBRWtELEtBQUt1cUMsY0FBY3hoQixFQUFFL29CLFFBR3pCd3FDLFdBR1Qsb0JBQ0UsTUFBTTFKLFVBQVksR0FDbEIsSUFBSyxNQUFNbmdDLFNBQVMyQyxLQUFLWSxNQUNKLFVBQWZ2RCxNQUFNcEMsTUFBb0JvQyxNQUFNdEUsS0FBS0EsS0FBS3NyQixXQUFXbk4sU0FDdkRzbUIsVUFBVXpsQyxLQUFLc0YsT0FRbkIsT0FKQW1nQyxVQUFVdE0sTUFBSyxDQUFDMTNCLEVBQUdpc0IsSUFDVmpzQixFQUFFa0QsS0FBS3VxQyxjQUFjeGhCLEVBQUUvb0IsUUFHekI4Z0MsVUFHVCxXQUVFLE9BQU8vbUMsS0FBS3VyQixNQUFNaGMsTUFBS25OLFNBQ2pCQSxLQUFLMlIsV0FDSDNSLEtBQUsyUixVQUFVaFAsS0FBT3dFLEtBQUt4RSxNQU1yQyxpQkFDRSxNQUFNZ2lDLFVBQVl4OUIsS0FBS2k4QixnQkFDckJ4bEMsS0FBS2dKLEtBQUtDLFNBQVNtVyxLQUFLd0UsaUJBRTFCLE9BQXlCLElBQXJCbWpCLFVBQVVybEMsT0FBcUJxbEMsVUFBVSxHQUN0QyxLQUdULHdCQUNFLE1BQU1BLFVBQVl4OUIsS0FBS2k4QixnQkFDckJ4bEMsS0FBS2dKLEtBQUtDLFNBQVNtVyxLQUFLeUUsd0JBRTFCLE9BQXlCLElBQXJCa2pCLFVBQVVybEMsT0FBcUJxbEMsVUFBVSxHQUN0QyxLQUdULHlCQUNFLE1BQU1BLFVBQVl4OUIsS0FBS2k4QixnQkFDckJ4bEMsS0FBS2dKLEtBQUtDLFNBQVNtVyxLQUFLMEUsb0JBRTFCLE9BQXlCLElBQXJCaWpCLFVBQVVybEMsT0FBcUJxbEMsVUFBVSxHQUN0QyxLQUdULG9CQUNFLE1BQU0ySixHQUFLbm5DLEtBQUsyUixtQkFDaEIsR0FBSXcxQixHQUFJLENBQ04sTUFBTTlwQyxNQUFROHBDLEdBQUc5cEMsTUFDakIsT0FBSUEsT0FDRzZDLFNBQVNpbkMsR0FBR3B1QyxLQUFLQSxLQUFLc0UsT0FFL0IsT0FBTyxFQUdULGdDQUNFLE9BQU8yQyxLQUFLa3ZCLFFBQVEsT0FBUSwrQkFBZ0MsRUFHOUQsNENBQ1FsdkIsS0FBSzZyQixRQUFRLE9BQVEsNkJBQTZCLEdBRzFELG1CQUNFLE1BQU11YixHQUFLcG5DLEtBQUsrL0Isa0JBQ2hCLEdBQUlxSCxHQUFJLENBQ04sTUFBTS9wQyxNQUFRK3BDLEdBQUcvcEMsTUFDakIsT0FBSUEsT0FDRzZDLFNBQVNrbkMsR0FBR3J1QyxLQUFLQSxLQUFLc0UsT0FFL0IsT0FBTyxFQUdULG9CQUNFLE1BQU0rcEMsR0FBS3BuQyxLQUFLZ2dDLGFBQ2hCLE9BQUlvSCxJQUFNLEdBQVcsSUFDakJBLElBQU0sR0FBVyxJQUNqQkEsSUFBTSxHQUFXLEdBQ2pCQSxJQUFNLEdBQVcsR0FDakJBLElBQU0sRUFBVSxFQUNiLEdBR1QsV0FDRSxNQUFNQSxHQUFLcG5DLEtBQUtnZ0MsYUFDaEIsT0FBSW9ILElBQU0sR0FBVyxJQUNqQkEsSUFBTSxHQUFnQixHQUFMQSxHQUNqQkEsSUFBTSxHQUFnQixFQUFMQSxHQUNqQkEsSUFBTSxHQUFnQixFQUFMQSxHQUNqQkEsSUFBTSxFQUFVQSxHQUNiLEdBR1QsYUFDRSxNQUFNQSxHQUFLcG5DLEtBQUtnZ0MsYUFDaEIsT0FBSW9ILElBQU0sR0FBVyxJQUNqQkEsSUFBTSxHQUFnQixJQUFMQSxHQUNqQkEsSUFBTSxHQUFnQixJQUFMQSxHQUNqQkEsSUFBTSxHQUFnQixHQUFMQSxHQUNqQkEsSUFBTSxFQUFlLEdBQUxBLEdBQ2IsRUFHVCxhQUNFLE1BQU01SixVQUFZLEdBQ2xCLElBQUssTUFBTW5nQyxTQUFTMkMsS0FBS1ksTUFDSixVQUFmdkQsTUFBTXBDLE1BQWtCdWlDLFVBQVV6bEMsS0FBS3NGLE9BTzdDLE9BSkFtZ0MsVUFBVXRNLE1BQUssQ0FBQzEzQixFQUFHaXNCLElBQ1Zqc0IsRUFBRWtELEtBQUt1cUMsY0FBY3hoQixFQUFFL29CLFFBR3pCOGdDLFVBR1QsYUFDRSxPQUFPL21DLEtBQUt1ckIsTUFBTTlwQixRQUNoQm12QyxHQUFLcm5DLEtBQUtzbkMsbUJBQW1CRCxFQUFHLFdBQWFBLEVBQUUvOEIsT0FJbkQsYUFDRSxPQUFPdEssS0FBSzhoQixPQUFPNXBCLFFBQU9tdkMsR0FBS0EsRUFBRTc4QixXQUFXaFAsS0FBT3dFLEtBQUt4RSxLQUcxRCxvQkFDRSxPQUNFL0UsS0FBS3VyQixNQUFNNVosU0FBU2xRLFFBQU9tdkMsR0FBS0EsRUFBRTc4QixXQUFXaFAsS0FBT3dFLEtBQUt4RSxLQUFJLElBQU0sS0FJdkUsOEJBQStCckIsT0FFN0IsR0FEQUEsTUFBTXlNLGlCQUNGek0sTUFBTTRRLGNBQWUsQ0FDdkIsTUFBTXc4QixhQUFlcm5DLFNBQ25CL0YsTUFBTTRRLGNBQWNzUixjQUFjbXJCLGNBRTlCQyxZQUFjdm5DLFNBQVMvRixNQUFNNFEsY0FBY3NSLGNBQWNoZixPQUMvRCxJQUFJcXFDLFlBRUosT0FBSUQsWUFBY0YsbUJBQTJCdm5DLEtBQUsybkMsTUFBTUYsY0FDOUJDLFlBQWpCRCxZQUFjLEVBQWlCeHdDLEtBQUtDLElBQUl1d0MsYUFDOUJGLGFBQWVFLFlBQ2xDem5DLEtBQUs0SyxRQUFPLFNBQ0M1SyxLQUFLa3FCLFdBQVd3ZCxZQUFhLENBQUVoYSxhQUFhLE1BSTdELGlCQUFrQitKLE9BQVE3OEIsUUFBVSxJQUNsQyxNQUFNZ3RDLFVBQVk1bkMsS0FBS2pILEtBQUtBLEtBQUt3USxRQUFROGdCLE1BQU1odEIsTUFDekN3cUMsWUFBYzNuQyxTQUFTdTNCLFFBQzdCLElBQUlxUSxXQUFhLEVBQ1psdEMsUUFBUTh5QixhQUNPLE9BQWRrYSxZQUNPOWpDLGNBQWNpa0MsVUFBVUgsV0FDakNFLGtCQUFvQixJQUFJL3dDLEtBQUs2d0MsV0FBVzl3QyxLQUFLLENBQUVLLE9BQU8sS0FBU0csTUFDckQwTSxNQUFNcEcsT0FBT2dxQyxZQUd2QnRvQyxHQUFHQyxjQUFjQyxLQUNmLGtDQUFrQ29vQyw4QkFIcENFLFdBQWFscUMsT0FBT2dxQyxZQU94QixNQUFNSSxVQUFZSCxZQUFjQyxXQUNoQyxPQUFJRSxXQUFhLEVBQVUsU0FDckJob0MsS0FBSzJuQyxNQUFNM25DLEtBQUsySixHQUFLcStCLFdBQ3ZCQSxXQUFhaG9DLEtBQUs0SixZQUNkNUosS0FBSzJiLFlBRVBxc0IsV0FBYS93QyxLQUFLNlMsTUFBTTlKLEtBQUs0SixNQUFRLFVBQ2pDNUosS0FBSzRtQyxvQkFFRyxJQUFaNW1DLEtBQUsySixLQUNGM0osS0FBSyttQyxVQUFVbHhCLEtBQUt6TSxPQUFPdVEsb0JBQ3hCM1osS0FBSzRiLGtCQUVUNWIsS0FBS2lvQyxZQUFZam9DLEtBQUt5bUMsY0FHdkJ1QixXQUdULDBCQUNFLElBQUtob0MsS0FBS2lvQyxXQUFZLE9BQ2Rqb0MsS0FBS2lqQyxVQUFVcHRCLEtBQUt6TSxPQUFPQyxnQkFFRyxXQUREckosS0FBS3VtQyxnQkFBZ0IsbUJBQy9CcHVDLGNBQ2pCdVcsTUFBTXlzQix3QkFBd0IsZUFBZ0IsQ0FDbEQsQ0FDRS8wQixNQUFPLGlCQUNQaW9CLEtBQU01M0IsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLHFCQUM1QiwwQ0FDQSxLQUNKNlEsT0FBUXhILEtBQUtzN0IsS0FDYnJuQixTQUFVLENBQ1JnbUIsYUFBUzUwQixFQUNUMjBCLFlBQVEzMEIsRUFDUmcyQixNQUFPLEdBRVR2QixVQUFVLEtBTWxCLFNBRE05NUIsS0FBSzBtQyxhQUVSMW1DLEtBQUsrbUMsVUFBVWx4QixLQUFLek0sT0FBT3VRLGVBQzNCM1osS0FBSyttQyxVQUFVbHhCLEtBQUt6TSxPQUFPMFEsTUFDNUIsQ0FDaUIsSUFBSWlCLGFBQWEvYSxLQUFLb0QsUUFBVXBELEtBQUttRCxTQUFXbkQsS0FBS3hFLElBQzdEOEosYUFJYiw2QkFDUXRGLEtBQUtzbUMsWUFBWXp3QixLQUFLek0sT0FBT0MsZ0JBQ25DLE1BQU02K0IsMkJBQTZCbG9DLEtBQUt1bUMsZ0JBQWdCLGtCQUN4RCxHQUFJMkIscUJBQXFCL3ZDLE9BQVMsRUFDaEMsSUFBSyxNQUFNcXVDLFVBQVUwQixxQkFDbkIxQixPQUFPaEwsU0FLYix3QkFDUXg3QixLQUFLaWpDLFVBQVVwdEIsS0FBS3pNLE9BQU95USxPQUVOLFdBREQ3WixLQUFLdW1DLGdCQUFnQixVQUMvQnB1QyxjQUNSdVcsTUFBTXlzQix3QkFBd0IsZUFBZ0IsQ0FDbEQsQ0FDRS8wQixNQUFPLFFBQ1Bpb0IsS0FBTTUzQixLQUFLSSxTQUFTRixJQUFJLE9BQVEscUJBQzVCLHdDQUNBLEtBQ0o2USxPQUFReEgsS0FBS3M3QixLQUNicm5CLFNBQVUsQ0FDUmdtQixhQUFTNTBCLEVBQ1QyMEIsWUFBUTMwQixFQUNSZzJCLE1BQU8sR0FFVHZCLFVBQVUsS0FNbEIsOEJBQ1E5NUIsS0FBS2lqQyxVQUFVcHRCLEtBQUt6TSxPQUFPdVEsYUFFQSxXQUREM1osS0FBS3VtQyxnQkFBZ0IsZ0JBQy9CcHVDLGNBQ2R1VyxNQUFNeXNCLHdCQUF3QixlQUFnQixDQUNsRCxDQUNFLzBCLE1BQU8sY0FDUGlvQixLQUFNNTNCLEtBQUtJLFNBQVNGLElBQUksT0FBUSxxQkFDNUIsa0RBQ0EsS0FDSjZRLE9BQVF4SCxLQUFLczdCLEtBQ2JybkIsU0FBVSxDQUNSZ21CLGFBQVM1MEIsRUFDVDIwQixZQUFRMzBCLEVBQ1JnMkIsTUFBTyxHQUVUdkIsVUFBVSxLQU1sQix3QkFDUTk1QixLQUFLaWpDLFVBQVVwdEIsS0FBS3pNLE9BQU93USxPQUVOLFdBREQ1WixLQUFLdW1DLGdCQUFnQixVQUMvQnB1QyxjQUNSdVcsTUFBTXlzQix3QkFBd0IsZUFBZ0IsQ0FDbEQsQ0FDRS8wQixNQUFPLFFBQ1Bpb0IsS0FBTTUzQixLQUFLSSxTQUFTRixJQUFJLE9BQVEscUJBQzVCLDRDQUNBLEtBQ0o2USxPQUFReEgsS0FBS3M3QixLQUNicm5CLFNBQVUsQ0FDUmdtQixhQUFTNTBCLEVBQ1QyMEIsWUFBUTMwQixFQUNSZzJCLE1BQU8sR0FFVHZCLFVBQVUsS0FNbEIsdUJBQ1E5NUIsS0FBS3NtQyxZQUFZendCLEtBQUt6TSxPQUFPQyxzQkFDN0JySixLQUFLc21DLFlBQVl6d0IsS0FBS3pNLE9BQU93USxhQUM3QjVaLEtBQUtzbUMsWUFBWXp3QixLQUFLek0sT0FBT3VRLG1CQUM3QjNaLEtBQUtpakMsVUFBVXB0QixLQUFLek0sT0FBTzBRLE1BRVAsV0FERDlaLEtBQUt1bUMsZ0JBQWdCLFNBQy9CcHVDLGNBQ1B1VyxNQUFNeXNCLHdCQUF3QixlQUFnQixDQUNsRCxDQUNFLzBCLE1BQU8sT0FDUGlvQixLQUFNNTNCLEtBQUtJLFNBQVNGLElBQUksT0FBUSxxQkFDNUIsMENBQ0EsS0FDSjZRLE9BQVF4SCxLQUFLczdCLEtBQ2JybkIsU0FBVSxDQUNSZ21CLGFBQVM1MEIsRUFDVDIwQixZQUFRMzBCLEVBQ1JnMkIsTUFBTyxHQUVUdkIsVUFBVSxLQUloQixNQUFNcU8sa0JBQW9Cbm9DLEtBQUt1bUMsZ0JBQWdCLFNBQy9DLElBQUt2bUMsS0FBSzRaLE9BQVN1dUIsWUFBWWh3QyxPQUFTLEVBQ3RDLElBQUssTUFBTXF1QyxVQUFVMkIsWUFDbkIzQixPQUFPaEwsU0FLYixpQkFDRSxPQUFPeDdCLEtBQUsrbUMsVUFBVWx4QixLQUFLek0sT0FBT0MsZ0JBR3BDLFlBQ0UsT0FBT3JKLEtBQUsrbUMsVUFBVWx4QixLQUFLek0sT0FBT3dRLE9BR3BDLGtCQUNFLE9BQU81WixLQUFLK21DLFVBQVVseEIsS0FBS3pNLE9BQU91USxhQUdwQyxXQUNFLE9BQU8zWixLQUFLK21DLFVBQVVseEIsS0FBS3pNLE9BQU8wUSxNQUdwQyxZQUNFLE9BQU85WixLQUFLK21DLFVBQVVseEIsS0FBS3pNLE9BQU95USxRRTFnSC9CLE1BQU11dUIsU0FDWDFpQyxjQUNFMUYsS0FBS3FvQyxVQUFZLENBQ2ZwdEMsS0FBTW10QyxTQUFTRSxVQUFVQyxNQUN6QmxtQyxNQUFPK2xDLFNBQVNJLFdBQVdDLE9BSS9CLHNCQUF1QkMsVUFDckIsTUFBTXRpQyxNQUFRdWlDLHVCQUF1QkMsV0FBdkIsT0FDSjlQLFNBQVMrUCwrQkFDaEIzd0MsUUFBTzBoQyxHQUFLQSxFQUFFOTlCLE1BQVE0c0MsU0FBU2hzQyxPQUMvQitCLEtBQUltN0IsR0FBS0EsRUFBRXh6QixRQUNWQSxNQUFNak8sT0FBUyxJQUNqQnV3QyxTQUFTdGlDLE1BQVFBLE1BQU0sSUFFekIsTUFBTTBpQyxLQUFPLElBQUlWLFNBRWpCLGFBRE1VLEtBQUtDLFFBQVFMLFVBQ1pJLEtBR1QsMEJBQ0UsTUFBTyxDQUFDLFFBQVMsVUFBVyxRQUc5Qiw0QkFDRSxNQUFPLENBQUMsU0FBVSxPQUFRLGlCQUFrQixtQkFHOUMsNEJBQ0UsTUFBTyxDQUFDLGFBQWMsWUFBYSxTQUFVLFdBRy9DLDJCQUNFLE1BQU8sQ0FBQyxTQUdWLHVCQUNFLE1BQU8sQ0FDTFAsTUFBTyxFQUNQUyxRQUFTLEVBQ1RDLEtBQU0sR0FJVix3QkFDRSxNQUFPLENBQ0xDLGVBQWdCLEVBQ2hCQyxVQUFXLEVBQ1hWLE1BQU8sR0FJWCxZQUNFLE9BQUl6b0MsS0FBSzFELFNBQ0EvQixXQUFXZ0MsZ0JBQWdCeUQsS0FBSzFELFVBRWxDLEtBR1QsV0FDRSxNQUFNdkQsS0FBT29GLFVBQVU2QixLQUFLcW9DLFdBSTVCLE9BSEF0dkMsS0FBS3F3QyxRQUFVcHBDLEtBQUtxcEMsR0FBR2huQyxNQUN2QnRKLEtBQUt1d0MsVUFBWXRwQyxLQUFLcXBDLEdBQUdFLFFBQ3pCeHdDLEtBQUt5d0MsT0FBU3hwQyxLQUFLcXBDLEdBQUd4bUMsS0FDZjlKLEtBR1Qsa0JBRUUsR0FEQWlILEtBQUtxb0MsVUFBVW9CLFdBQVksR0FDdEJ6cEMsS0FBS3FvQyxVQUFVcUIsaUJBQW1CMXBDLEtBQUtxb0MsVUFBVXNCLGNBRXBELE9BREEzcEMsS0FBSzRwQyxXQUFRdmtDLEdBQ04sRUFHVCxHQUFJckYsS0FBS3FvQyxVQUFVcUIsZUFBZ0IsQ0FDakMsTUFBTS9oQyxLQUFPbFIsS0FBS21SLE1BQU1qUixJQUFJcUosS0FBS3FvQyxVQUFVMWdDLE1BQzNDLElBQUtBLEtBQU0sT0FBTyxFQUNsQixHQUE2QixTQUF6QkEsS0FBS0UsU0FBU0MsT0FBbUIsT0FDckM5SCxLQUFLNHBDLFlBQWNqaUMsS0FBS0ksWUFBWS9ILEtBQUtxb0MsVUFBVTdzQyxJQVVyRCxHQVBJd0UsS0FBS3FvQyxVQUFVc0IsZ0JBQ2pCM3BDLEtBQUs0cEMsTUFBUW56QyxLQUFLbUssTUFBTWpLLElBQUlxSixLQUFLcW9DLFVBQVU3c0MsS0FHN0N3RSxLQUFLcW9DLFVBQVUzUyxVQUFZLEtBQzNCMTFCLEtBQUtxb0MsVUFBVTFTLFNBQVcsS0FFdEIzMUIsS0FBSzRwQyxNQUFPLENBQ2QsR0FBNkIsV0FBekI1cEMsS0FBSzRwQyxNQUFNN3dDLEtBQUtrQyxLQUlsQixPQUhBK0UsS0FBSy9FLEtBQU9tdEMsU0FBU0UsVUFBVVcsS0FDL0JqcEMsS0FBS3FvQyxVQUFVMVMsU0FBVzMxQixLQUFLNHBDLE1BQU03d0MsS0FBSzJELEtBQzFDc0QsS0FBS3FvQyxVQUFVb0IsV0FBWSxHQUNwQixFQUdULEdBQTZCLFVBQXpCenBDLEtBQUs0cEMsTUFBTTd3QyxLQUFLa0MsS0FLbEIsT0FKQStFLEtBQUsvRSxLQUFPbXRDLFNBQVNFLFVBQVVDLE1BQy9Cdm9DLEtBQUtxQyxNQUFRK2xDLFNBQVNJLFdBQVdDLE1BQ2pDem9DLEtBQUtxb0MsVUFBVTNTLFVBQVkxMUIsS0FBSzRwQyxNQUFNN3dDLEtBQUsyRCxLQUMzQ3NELEtBQUtxb0MsVUFBVW9CLFdBQVksR0FDcEIsRUFHWCxPQUFPLEVBR1QsY0FBZTFsQyxHQUdiL0QsS0FBS3FvQyxVQUFVcUIsZ0JBQWlCLEVBQ2hDMXBDLEtBQUtxb0MsVUFBVXNCLGVBQWdCLEVBQy9CM3BDLEtBQUtnSixnQkFBaUIsRUFFbEJqRixFQUFFaUYsaUJBQ0poSixLQUFLZ0osZ0JBQWlCLEVBQ3RCaEosS0FBSzFELFNBQVd5SCxFQUFFekgsVUFJaEJ5SCxFQUFFNEQsTUFBUTVELEVBQUV2SSxLQUNkd0UsS0FBS3FvQyxVQUFVcUIsZ0JBQWlCLEVBQ2hDMXBDLEtBQUtxb0MsVUFBVTFnQyxLQUFPNUQsRUFBRTRELEtBQ3hCM0gsS0FBS3FvQyxVQUFVN3NDLEdBQUt1SSxFQUFFdkksSUFHcEJ1SSxFQUFFdkksS0FBT3VJLEVBQUU0RCxPQUNiM0gsS0FBS3FvQyxVQUFVc0IsZUFBZ0IsRUFDL0IzcEMsS0FBS3FvQyxVQUFVN3NDLEdBQUt1SSxFQUFFdkksSUFLeEIsVUFGc0J3RSxLQUFLNnBDLGNBSXJCOWxDLEVBQUUxQixNQUFPckMsS0FBSy9FLEtBQU84SSxFQUFFMUIsTUFDdEJyQyxLQUFLL0UsS0FBT210QyxTQUFTRSxVQUFVQyxNQUNoQ3hrQyxFQUFFOUksS0FBTStFLEtBQUtxQyxNQUFRMEIsRUFBRTlJLEtBRWxCK0UsS0FBSy9FLE9BQU0rRSxLQUFLcUMsTUFBUStsQyxTQUFTSSxXQUFXVSxnQkFHakRubEMsRUFBRXJILE1BS0osR0FKQXNELEtBQUtxb0MsVUFBVTFTLFNBQVcsS0FDMUIzMUIsS0FBS3FvQyxVQUFVM1MsVUFBWSxLQUMzQjExQixLQUFLcW9DLFVBQVV5QixrQkFBb0IsS0FDbkM5cEMsS0FBS3FvQyxVQUFVMEIsYUFBZSxLQUMxQi9wQyxLQUFLcXBDLEdBQUdobkMsTUFDVixPQUFRckMsS0FBS3FDLE9BQ1gsS0FBSytsQyxTQUFTSSxXQUFXQyxNQUN2QnpvQyxLQUFLcW9DLFVBQVUzUyxVQUFZM3hCLEVBQUVySCxLQUM3QixNQUNGLEtBQUswckMsU0FBU0ksV0FBV1UsZUFDdkJscEMsS0FBS3FvQyxVQUFVeUIsa0JBQW9CL2xDLEVBQUVySCxLQUNyQyxNQUNGLEtBQUswckMsU0FBU0ksV0FBV1csVUFDdkJucEMsS0FBS3FvQyxVQUFVMEIsYUFBZWhtQyxFQUFFckgsVUFLM0JzRCxLQUFLcXBDLEdBQUd4bUMsT0FBTTdDLEtBQUtxb0MsVUFBVTFTLFNBQVc1eEIsRUFBRXJILE9BS3JEcUgsRUFBRXBCLFlBQWVxQixNQUFNcEcsT0FBT21HLEVBQUVwQixlQUNsQzNDLEtBQUtxb0MsVUFBVTFsQyxXQUFhL0UsT0FBT21HLEVBQUVwQixjQUVuQ29CLEVBQUVrQixVQUFhakIsTUFBTXBHLE9BQU9tRyxFQUFFa0IsYUFDaENqRixLQUFLcW9DLFVBQVVwakMsU0FBV3JILE9BQU9tRyxFQUFFa0IsZ0JBR1gsSUFBakJsQixFQUFFcEIsaUJBQ2EsSUFBZm9CLEVBQUVrQixXQUVUakYsS0FBS3FvQyxVQUFVMkIsZ0JBQWlCLEdBRTlCam1DLEVBQUVpbUMsaUJBQWdCaHFDLEtBQUtxb0MsVUFBVTJCLGdCQUFpQixHQUdoQyxTQUFsQmptQyxFQUFFNDdCLGNBQTRDLElBQWxCNTdCLEVBQUU0N0IsY0FDaEMzL0IsS0FBS3FvQyxVQUFVMUksYUFBYyxHQUUzQjU3QixFQUFFcUMsUUFDSnBHLEtBQUtxb0MsVUFBVTRCLFVBQVcsRUFDMUJqcUMsS0FBS3FvQyxVQUFVamlDLE1BQVFyQyxFQUFFcUMsT0FJdkJyQyxFQUFFc3FCLE9BQ0pydUIsS0FBS3FvQyxVQUFVNkIsU0FBVSxFQUN6QmxxQyxLQUFLcW9DLFVBQVVoYSxLQUFPdHFCLEVBQUVzcUIsTUFJVixTQUFadHFCLEVBQUV2TCxRQUFnQyxJQUFadUwsRUFBRXZMLFFBQWdCd0gsS0FBS3FvQyxVQUFVN3ZDLE9BQVEsR0FHbkV3SCxLQUFLcW9DLFVBQVU5NEIsT0FBU3hMLEVBQUV3TCxPQUMxQnZQLEtBQUtxb0MsVUFBVWg1QixPQUFTdEwsRUFBRXNMLE9BRzVCLFdBQ0UsT0FBT3JQLEtBQUtxb0MsVUFBVXB0QyxLQUd4QixnQkFDRSxPQUFRK0UsS0FBS3FDLE9BQ1gsS0FBSytsQyxTQUFTSSxXQUFXVSxlQUN2QixNQUFPLGlCQUNULEtBQUtkLFNBQVNJLFdBQVdXLFVBQ3ZCLE1BQU8sWUFDVCxLQUFLZixTQUFTSSxXQUFXQyxNQUN2QixNQUFPLFFBQ1QsUUFDRSxRQUlOLFNBQVUxa0MsR0FDUixHQUFLQyxNQUFNcEcsT0FBT21HLElBRWhCLE9BQVFBLEVBQUVsSSxlQUNSLElBQUssUUFDSG1FLEtBQUtxb0MsVUFBVXB0QyxLQUFPbXRDLFNBQVNFLFVBQVVDLE1BQ3pDLE1BQ0YsSUFBSyxVQUNIdm9DLEtBQUtxb0MsVUFBVXB0QyxLQUFPbXRDLFNBQVNFLFVBQVVVLFFBQ3pDLE1BQ0YsSUFBSyxPQUNIaHBDLEtBQUtxb0MsVUFBVXB0QyxLQUFPbXRDLFNBQVNFLFVBQVVXLEtBQ3pDLE1BQ0YsUUFDRWpwQyxLQUFLcW9DLFVBQVVwdEMsVUFBT29LLE9BYkxyRixLQUFLcW9DLFVBQVVwdEMsS0FBTzhJLEVBbUIvQyxZQUNFLE9BQVFDLE1BQU1wRyxPQUFPb0MsS0FBS3FvQyxVQUFVaG1DLGFBRWhDZ0QsRUFEQXpILE9BQU9vQyxLQUFLcW9DLFVBQVVobUMsT0FJNUIsVUFBVzBCLEdBQ0pDLE1BQU1wRyxPQUFPbUcsS0FFaEIvRCxLQUFLcW9DLFVBQVVobUMsV0FBUWdELEVBQ25CK2lDLFNBQVMrQixlQUFlbnlDLFNBQVMrTCxLQUNuQy9ELEtBQUsvRSxLQUFPbXRDLFNBQVNFLFVBQVVDLE1BQy9Cdm9DLEtBQUtxb0MsVUFBVWhtQyxNQUFRK2xDLFNBQVNJLFdBQVdVLGdCQUV6Q2QsU0FBU2dDLGVBQWVweUMsU0FBUytMLEtBQ25DL0QsS0FBSy9FLEtBQU9tdEMsU0FBU0UsVUFBVUMsTUFDL0J2b0MsS0FBS3FvQyxVQUFVaG1DLE1BQVErbEMsU0FBU0ksV0FBV1csV0FFekNmLFNBQVNpQyxjQUFjcnlDLFNBQVMrTCxLQUNsQy9ELEtBQUsvRSxLQUFPbXRDLFNBQVNFLFVBQVVDLE1BQy9Cdm9DLEtBQUtxb0MsVUFBVWhtQyxNQUFRK2xDLFNBQVNJLFdBQVdDLFFBYnhCem9DLEtBQUtxb0MsVUFBVWhtQyxNQUFRekUsT0FBT21HLEdBa0J2RCxXQUNFLEdBQUkvRCxLQUFLcXBDLEdBQUdobkMsTUFDVixPQUFRckMsS0FBS3FDLE9BQ1gsS0FBSytsQyxTQUFTSSxXQUFXVSxlQUN2QixPQUFPbHBDLEtBQUtxb0MsVUFBVXlCLGtCQUN4QixLQUFLMUIsU0FBU0ksV0FBV1csVUFDdkIsT0FBT25wQyxLQUFLcW9DLFVBQVUwQixhQUN4QixLQUFLM0IsU0FBU0ksV0FBV0MsTUFDdkIsT0FBT3pvQyxLQUFLcW9DLFVBQVUzUyxVQUV4QixRQUNFLFlBRUMsR0FBSTExQixLQUFLcXBDLEdBQUd4bUMsS0FBTSxPQUFPN0MsS0FBS3FvQyxVQUFVMVMsU0FJakQsU0FBVTV4QixHQUNSLEdBQUkvRCxLQUFLcXBDLEdBQUdobkMsTUFDVixPQUFRckMsS0FBS3FDLE9BQ1gsS0FBSytsQyxTQUFTSSxXQUFXVSxlQUN2QmxwQyxLQUFLcW9DLFVBQVV5QixrQkFBb0IvbEMsRUFDbkMsTUFDRixLQUFLcWtDLFNBQVNJLFdBQVdXLFVBQ3ZCbnBDLEtBQUtxb0MsVUFBVTBCLGFBQWVobUMsRUFDOUIsTUFDRixLQUFLcWtDLFNBQVNJLFdBQVdDLE1BQ3ZCem9DLEtBQUtxb0MsVUFBVTNTLFVBQVkzeEIsT0FNdEIvRCxLQUFLcXBDLEdBQUd4bUMsT0FBTTdDLEtBQUtxb0MsVUFBVTFTLFNBQVc1eEIsR0FHckQsU0FDRSxNQUFNK2tDLEtBQU85b0MsS0FDYixNQUFPLENBQ0wsWUFDRSxPQUFPOG9DLEtBQUs3dEMsT0FBU210QyxTQUFTRSxVQUFVQyxPQUUxQyxVQUFXeGtDLElBQ0MsSUFBTkEsSUFBWStrQyxLQUFLN3RDLEtBQU9tdEMsU0FBU0UsVUFBVUMsUUFFakQsY0FDRSxPQUFPTyxLQUFLN3RDLE9BQVNtdEMsU0FBU0UsVUFBVVUsU0FFMUMsWUFBYWpsQyxJQUNELElBQU5BLElBQVkra0MsS0FBSzd0QyxLQUFPbXRDLFNBQVNFLFVBQVVVLFVBRWpELFdBQ0UsT0FBT0YsS0FBSzd0QyxPQUFTbXRDLFNBQVNFLFVBQVVXLE1BRTFDLFNBQVVsbEMsSUFDRSxJQUFOQSxJQUFZK2tDLEtBQUs3dEMsS0FBT210QyxTQUFTRSxVQUFVVyxRQUtyRCxhQUFjL0ssWUFDWmwrQixLQUFLcW9DLFVBQVloZCxZQUFZcnJCLEtBQUtxb0MsVUFBV25LLGFBQ3pDbCtCLEtBQUtxb0MsVUFBVXNCLGVBQWlCM3BDLEtBQUtxb0MsVUFBVXFCLHVCQUMzQzFwQyxLQUFLNnBDLFlBSWYscUJBQXNCbkIsZ0JBQ2Qxb0MsS0FBSytvQyxRQUFRTCxXQUNmMW9DLEtBQUtxb0MsVUFBVXNCLGVBQWlCM3BDLEtBQUtxb0MsVUFBVXFCLHVCQUMzQzFwQyxLQUFLNnBDLFlBSWYsV0FDRSxJQUFLN3BDLEtBQUsvRSxLQUFNLE9BQU8sS0FDdkIsT0FBUStFLEtBQUsvRSxNQUNYLEtBQUttdEMsU0FBU0UsVUFBVUMsTUFBTyxDQUU3QixJQUFLdm9DLEtBQUsvRSxPQUFTK0UsS0FBS3RELEtBQU0sT0FBTyxLQUNyQyxJQUFJOUIsUUFBVSxHQUFHb0YsS0FBS3FvQyxVQUFVN3ZDLE1BQVEsU0FBVyxVQUNqRHdILEtBQUtzcUMsa0JBQ0V0cUMsS0FBS3RELFlBQzJCLElBQTlCc0QsS0FBS3FvQyxVQUFVMWxDLGFBQ3hCL0gsU0FBVyxlQUFlb0YsS0FBS3FvQyxVQUFVMWxDLG1CQUVKLElBQTVCM0MsS0FBS3FvQyxVQUFVcGpDLFdBQ3hCckssU0FBVyxhQUFhb0YsS0FBS3FvQyxVQUFVcGpDLFlBRXJDakYsS0FBS3FvQyxVQUFVaGEsT0FBTXp6QixTQUFXLFNBQVNvRixLQUFLcW9DLFVBQVVoYSxRQUd4RHJ1QixLQUFLcW9DLFVBQVVxQixpQkFDakI5dUMsU0FBVyxTQUFTb0YsS0FBS3FvQyxVQUFVMWdDLFNBRWpDM0gsS0FBS3FvQyxVQUFVcUIsZ0JBQWtCMXBDLEtBQUtxb0MsVUFBVXNCLGlCQUNsRC91QyxTQUFXLE9BQU9vRixLQUFLcW9DLFVBQVU3c0MsTUFHbkMsSUFBSXN0QyxLQUFPLGVBQWVsdUMsV0FNMUIsT0FMSW9GLEtBQUtxb0MsVUFBVTRCLFVBQVlqcUMsS0FBS3FvQyxVQUFVamlDLE1BQzVDMGlDLE1BQVEsSUFBSTlvQyxLQUFLcW9DLFVBQVVqaUMsU0FDbEJwRyxLQUFLdEQsT0FDZG9zQyxNQUFRLElBQUk5b0MsS0FBS3RELFNBRVpvc0MsS0FHVCxLQUFLVixTQUFTRSxVQUFVVSxRQUFTLENBRS9CLElBQUtocEMsS0FBS3FvQyxVQUFVaDVCLFNBQVdyUCxLQUFLcW9DLFVBQVU5NEIsT0FBUSxPQUFPLEtBSTdELElBQUkzVSxRQUFVLFVBQVVvRixLQUFLcW9DLFVBQVVoNUIsaUJBQWlCclAsS0FBS3FvQyxVQUFVOTRCLFNBRW5FdlAsS0FBS3FvQyxVQUFVMWxDLGFBQ2pCL0gsU0FBVyxlQUFlb0YsS0FBS3FvQyxVQUFVMWxDLGNBRXZDM0MsS0FBS3FvQyxVQUFVcGpDLFdBQ2pCckssU0FBVyxhQUFhb0YsS0FBS3FvQyxVQUFVcGpDLFlBRXJDakYsS0FBS3FvQyxVQUFVaGEsT0FBTXp6QixTQUFXLFNBQVNvRixLQUFLcW9DLFVBQVVoYSxRQUM1RCxJQUFJeWEsS0FBTyxpQkFBaUJsdUMsV0FFNUIsT0FESW9GLEtBQUtxb0MsVUFBVTRCLFdBQVVuQixNQUFRLElBQUk5b0MsS0FBS3FvQyxVQUFVamlDLFVBQ2pEMGlDLEtBSVQsS0FBS1YsU0FBU0UsVUFBVVcsS0FBTSxDQUU1QixJQUFLanBDLEtBQUsvRSxPQUFTK0UsS0FBS3RELEtBQU0sT0FBTyxLQUNyQyxJQUFJOUIsUUFBVSxRQUFRb0YsS0FBS3RELE9BQ3ZCc0QsS0FBS3FvQyxVQUFVaGEsT0FBTXp6QixTQUFXLFNBQVNvRixLQUFLcW9DLFVBQVVoYSxRQUd4RHJ1QixLQUFLcW9DLFVBQVVxQixpQkFDakI5dUMsU0FBVyxTQUFTb0YsS0FBS3FvQyxVQUFVMWdDLFNBRWpDM0gsS0FBS3FvQyxVQUFVcUIsZ0JBQWtCMXBDLEtBQUtxb0MsVUFBVXNCLGlCQUNsRC91QyxTQUFXLE9BQU9vRixLQUFLcW9DLFVBQVU3c0MsTUFHbkMsSUFBSXN0QyxLQUFPLGNBQWNsdUMsV0FFekIsT0FESW9GLEtBQUtxb0MsVUFBVTRCLFdBQVVuQixNQUFRLElBQUk5b0MsS0FBS3FvQyxVQUFVamlDLFVBQ2pEMGlDLEtBR1QsUUFDRSxPQUFPLE9DOVpSLE1BQU1ILCtCQUErQjRCLGdCQUUxQyw0QkFDRSxPQUFPbGYsWUFBWTNjLE1BQU00YyxlQUFnQixDQUN2Qzl2QixHQUFJLGdCQUNKc2hCLFFBQVMsQ0FBQyxRQUNWNWpCLE1BQU96QyxLQUFLZ0osS0FBS0MsU0FBUyxtQkFDMUI4cUMsU0FBVSxDQUFDLENBQUVDLGFBQWMsS0FBTUMsYUFBYyxlQUMvQ3BrQyxTQUFVLGlEQUNWcWtDLGVBQWUsRUFDZkMsZUFBZSxFQUNmQyxnQkFBZ0IsRUFDaEJDLE1BQU8sSUFDUEMsT0FBUSxPQUNSQyxRQUFTLEdBQ1RDLGFBQWEsRUFDYkMsUUFBUyxFQUNUQyxRQUFTLE9BSWIsMEJBQTJCekMsU0FBVTl0QyxRQUFVLElBQzdDLE1BQU1rdUMsV0FBYVYsU0FBU3h5QixTQUFTOHlCLFVBQ3JDLE9BQU8sSUFBSUMsdUJBQXVCRyxLQUFNbHVDLFNBRzFDLHdCQUNFLE1BQU8sQ0FDTCxDQUNFa0IsSUFBSyxNQUNMc0ssTUFBTzNQLEtBQUtnSixLQUFLQyxTQUFTLGFBQzFCaUMsVUFBVSxHQUVaLENBQ0U3RixJQUFLLE1BQ0xzSyxNQUFPM1AsS0FBS2dKLEtBQUtDLFNBQVMsZUFDMUJpQyxVQUFVLElBTWhCLGdCQUNFLE1BQU01SSxXQUFhMlYsTUFBTXZELFVBRXpCcFMsS0FBSyt2QyxLQUFPOW9DLEtBQUs4b0MsS0FDakIvdkMsS0FBS0EsS0FBT2lILEtBQUs4b0MsS0FBSy92QyxLQUN0QkEsS0FBS3F5QyxTQUNIcHJDLEtBQUs4b0MsS0FBS08sR0FBR3htQyxNQUNaN0MsS0FBSzhvQyxLQUFLTyxHQUFHaG5DLE9BQVNyQyxLQUFLOG9DLEtBQUt6bUMsUUFBVStsQyxTQUFTSSxXQUFXQyxNQUNqRTF2QyxLQUFLc3lDLE1BQ0h0eUMsS0FBS3F5QyxXQUNKcHJDLEtBQUs4b0MsS0FBSy92QyxLQUFLNHdDLGVBQWlCM3BDLEtBQUs4b0MsS0FBSy92QyxLQUFLMndDLGdCQUNsRDN3QyxLQUFLdXlDLFFBQVV2eUMsS0FBS3F5QyxVQUFZcHJDLEtBQUs4b0MsS0FBSy92QyxLQUFLMndDLGVBQy9DM3dDLEtBQUt3eUMsY0FBZ0J4eUMsS0FBS3N5QyxPQUFTdHlDLEtBQUt1eUMsUUFHeEN2eUMsS0FBSzRMLGdCQUFrQnhFLFVBQVV3RSxnQkFDakM1TCxLQUFLeXlDLG1CQUFxQixDQUN4QjdrQyxRQUFTeEcsVUFBVXdFLGdCQUFnQmdDLFVBQVkzRyxLQUFLOG9DLEtBQUsvdkMsS0FBSzRKLFdBQzlEdkMsUUFBU0QsVUFBVXdFLGdCQUFnQnZFLFVBQVlKLEtBQUs4b0MsS0FBSy92QyxLQUFLNEosV0FDOURyQyxLQUFNSCxVQUFVd0UsZ0JBQWdCckUsT0FBU04sS0FBSzhvQyxLQUFLL3ZDLEtBQUs0SixXQUN4RHBDLFFBQVNKLFVBQVV3RSxnQkFBZ0JwRSxVQUFZUCxLQUFLOG9DLEtBQUsvdkMsS0FBSzRKLFdBQzlEbkMsU0FBVUwsVUFBVXdFLGdCQUFnQm5FLFdBQWFSLEtBQUs4b0MsS0FBSy92QyxLQUFLNEosWUFFN0QzQyxLQUFLOG9DLEtBQUsvdkMsS0FBSzRKLGFBQzBDLFlBQXhEbE0sS0FBS0ksU0FBU0YsSUFBSSxPQUFRLDBCQUM1Qm9DLEtBQUt5eUMsbUJBQW1CN2tDLFNBQVUsRUFFbEM1TixLQUFLeXlDLG1CQUFtQnByQyxTQUFVLEdBS3RDckgsS0FBSzB5QyxTQUFXLENBQ2QsQ0FDRTN2QyxJQUFLc3NDLFNBQVNFLFVBQVVDLE1BQ3hCbmlDLE1BQU8zUCxLQUFLZ0osS0FBS0MsU0FBUyxjQUMxQmlDLFNBQVUzQixLQUFLOG9DLEtBQUtPLEdBQUdobkMsT0FFekIsQ0FDRXZHLElBQUtzc0MsU0FBU0UsVUFBVVUsUUFDeEI1aUMsTUFBTzNQLEtBQUtnSixLQUFLQyxTQUFTLG9CQUMxQmlDLFNBQVUzQixLQUFLOG9DLEtBQUtPLEdBQUdFLFNBRXpCLENBQ0V6dEMsSUFBS3NzQyxTQUFTRSxVQUFVVyxLQUN4QjdpQyxNQUFPM1AsS0FBS2dKLEtBQUtDLFNBQVMsbUJBQzFCaUMsU0FBVTNCLEtBQUs4b0MsS0FBS08sR0FBR3htQyxPQUszQjlKLEtBQUt1eEMsVUFBWWxDLFNBQVNJLFdBQzFCenZDLEtBQUsyeUMsa0JBQW9CLENBQ3ZCeG9DLGVBQWdCa2xDLFNBQVNJLFdBQVdVLGlCQUFtQmxwQyxLQUFLOG9DLEtBQUt6bUMsTUFDakUyUCxVQUFXbzJCLFNBQVNJLFdBQVdXLFlBQWNucEMsS0FBSzhvQyxLQUFLem1DLE1BQ3ZETyxNQUFPd2xDLFNBQVNJLFdBQVdDLFFBQVV6b0MsS0FBSzhvQyxLQUFLem1DLE9BRTVDckMsS0FBSzhvQyxLQUFLem1DLFFBQU90SixLQUFLMnlDLGtCQUFrQnhvQyxnQkFBaUIsR0FHOURuSyxLQUFLME4sZ0JBQWtCcXlCLFNBQVMrUCw4QkFDaEMsSUFBSyxJQUFJNTdCLEVBQUksRUFBR0EsRUFBSWxVLEtBQUswTixnQkFBZ0J0TyxPQUFROFUsSUFFN0NsVSxLQUFLQSxLQUFLK3dDLG9CQUFzQi93QyxLQUFLME4sZ0JBQWdCd0csR0FBR25SLEtBQ3hEL0MsS0FBS0EsS0FBSyt3QyxvQkFBc0Ivd0MsS0FBSzBOLGdCQUFnQndHLEdBQUd3c0IsV0FDeEQxZ0MsS0FBS0EsS0FBSyt3QyxvQkFBc0Ivd0MsS0FBSzBOLGdCQUFnQndHLEdBQUc3RyxNQUV4RHJOLEtBQUswTixnQkFBZ0J3RyxHQUFHdEwsVUFBVyxFQUVuQzVJLEtBQUswTixnQkFBZ0J3RyxHQUFHdEwsVUFBVyxFQVV2QyxPQUxBNUksS0FBSzZ2QyxXQUFhRCx1QkFBdUJDLFdBQVducUMsS0FBSW03QixJQUN0REEsRUFBRWo0QixTQUFXNUksS0FBS0EsS0FBS2d4QyxlQUFpQm5RLEVBQUU5OUIsSUFDbkM4OUIsS0FHRjdnQyxLQUdULFdBQ0UsT0FBT2lILEtBQUtwRCxPQUdkcWYsa0JBQW1CL1gsTUFDakJBLEtBQUs4QixLQUFLLGtCQUFrQmtXLE1BQU1sYyxLQUFLMnJDLGVBQWVuekIsS0FBS3hZLE9BUzNEME8sTUFBTXVOLGtCQUFrQi9YLE1BRzFCLGNBQWUvSixPQUNiLE1BQU1xeEIsV0FBYXJ4QixNQUFNK1EsYUFBYUMsUUFBUSxjQUN4Q3BTLEtBQU9NLEtBQUs0UixNQUFNdWdCLFlBQ3hCLEdBQXNCLFNBQWxCenlCLEtBQUs2eUMsZUFDRDVyQyxLQUFLOG9DLEtBQUsrQyxlQUFlOXlDLE1BQy9CaUgsS0FBSzRLLFFBQU8sT0FDUCxDQUNMLEdBQUk3UixLQUFLc0ssUUFBUyxDQUNoQixNQUFNL0csU0FDSnZELEtBQUtnRCxTQUFXaEQsS0FBS2lELFFBQ2pCLEdBQUdqRCxLQUFLZ0QsV0FBV2hELEtBQUtpRCxVQUN4QmpELEtBQUtzSyxRQUNMaEgsTUFBUTlCLFdBQVdnQyxnQkFBZ0JELFVBQ3JDRCxNQUFNMk0sZ0JBQ1JoSixLQUFLOG9DLEtBQUs5L0IsZ0JBQWlCLEVBQzNCaEosS0FBSzhvQyxLQUFLeHNDLFNBQVdELE1BQU1DLFVBQ3RCMEQsS0FBSzhvQyxLQUFLOS9CLGdCQUFpQixFQUVwQyxHQUFrQixTQUFkalEsS0FBS2tDLEtBQ1AsR0FBS2xDLEtBQUtBLEtBYVIsT0FBUUEsS0FBS0EsS0FBS2tDLE1BQ2hCLElBQUssUUFDSCtFLEtBQUs4b0MsS0FBS1QsVUFBVXNCLGVBQWdCLEVBQ3BDM3BDLEtBQUs4b0MsS0FBS1QsVUFBVXFCLGdCQUFpQixFQUNyQzFwQyxLQUFLOG9DLEtBQUs3dEMsS0FBT210QyxTQUFTRSxVQUFVQyxNQUNwQ3ZvQyxLQUFLOG9DLEtBQUt6bUMsTUFBUStsQyxTQUFTSSxXQUFXQyxNQUN0Q3pvQyxLQUFLOG9DLEtBQUtwc0MsS0FBTzNELEtBQUtBLEtBQUsyRCxLQUMzQnNELEtBQUs0SyxRQUFPLEdBQ1osTUFDRixJQUFLLFNBQ0g1SyxLQUFLOG9DLEtBQUtULFVBQVVzQixlQUFnQixFQUNwQzNwQyxLQUFLOG9DLEtBQUtULFVBQVVxQixnQkFBaUIsRUFDckMxcEMsS0FBSzhvQyxLQUFLN3RDLEtBQU9tdEMsU0FBU0UsVUFBVVcsS0FDcENqcEMsS0FBSzhvQyxLQUFLcHNDLEtBQU8zRCxLQUFLQSxLQUFLMkQsS0FDM0JzRCxLQUFLNEssUUFBTyxRQTFCWjdSLEtBQUt5QyxLQUNQd0UsS0FBSzhvQyxLQUFLVCxVQUFVN3NDLEdBQUt6QyxLQUFLeUMsR0FDOUJ3RSxLQUFLOG9DLEtBQUtULFVBQVVzQixlQUFnQixHQUVsQzV3QyxLQUFLNE8sT0FDUDNILEtBQUs4b0MsS0FBS1QsVUFBVTFnQyxLQUFPNU8sS0FBSzRPLEtBQ2hDM0gsS0FBSzhvQyxLQUFLVCxVQUFVc0IsZUFBZ0IsRUFDcEMzcEMsS0FBSzhvQyxLQUFLVCxVQUFVcUIsZ0JBQWlCLFNBRWpDMXBDLEtBQUs4b0MsS0FBS2UsWUFDaEI3cEMsS0FBSzRLLFFBQU8sSUEyQnBCK2dDLGVBQWdCeHhDLE9BQ2QsTUFBTXFJLE9BQVNySSxNQUFNa2lCLGNBQWNwakIsUUFBUXVKLE9BQzNDLEdBQUt4QyxLQUFLOG9DLEtBQUtBLEtBQWYsQ0FJQSxPQUFRdG1DLFFBQ04sSUFBSyxZQUNIc0IsY0FBY2dvQyxnQkFBZ0I5ckMsS0FBSzhvQyxLQUFLQSxNQUN4QyxNQUVGLElBQUssT0FDSCxDQUNFLE1BQU1pRCxPQUFTLEdBQ2ZBLE9BQU9oeEMsUUFBVSxDQUNmNEIsTUFBT2xHLEtBQUtvQyxLQUFLNkQsTUFFbkJuQyxXQUFXc3JDLGNBQ1QsS0FDQXB2QyxLQUFLZ0osS0FBS1ksT0FBTyxpQ0FBa0MsQ0FDakRnQyxNQUFPckMsS0FBSzhvQyxLQUFLQSxPQUVuQmlELFFBR0osTUFFRixJQUFLLGdCQUNILENBQ0UsTUFBTUEsT0FBUyxHQUNmQSxPQUFPaHhDLFFBQVUsQ0FDZjRCLE1BQU9sRyxLQUFLb0MsS0FBSzZELE1BRW5CcXZDLE9BQU94ekMsUUFBVXlILEtBQUs4b0MsS0FBS3pzQyxNQUFNeWxCLE9BQ2pDdm5CLFdBQVdzckMsY0FDVCxLQUNBcHZDLEtBQUtnSixLQUFLWSxPQUFPLG1DQUFvQyxDQUNuRDNELEtBQU1zRCxLQUFLOG9DLEtBQUt6c0MsTUFBTUssS0FDdEIyRixNQUFPckMsS0FBSzhvQyxLQUFLQSxPQUVuQmlELFFBR0osTUFFRixJQUFLLG1CQUNILENBQ0UsSUFBS250QyxPQUFPekMsT0FBT29PLFdBQVdwUyxPQUU1QixZQURBbUgsR0FBR0MsY0FBY0MsS0FBSyxzQkFHeEIsTUFBTXVzQyxPQUFTLEdBQ2ZBLE9BQU9oeEMsUUFBVSxDQUNmNEIsTUFBT2xHLEtBQUtvQyxLQUFLNkQsTUFFbkIsSUFBSyxNQUFNNUUsS0FBSzhHLE9BQU96QyxPQUFPb08sV0FDeEJ6UyxFQUFFdUUsTUFBTTJNLGlCQUNWK2lDLE9BQU94ekMsUUFBVVQsRUFBRXVFLE1BQU15bEIsT0FDekJ2bkIsV0FBV3NyQyxjQUNULEtBQ0FwdkMsS0FBS2dKLEtBQUtZLE9BQU8sbUNBQW9DLENBQ25EM0QsS0FBTTVFLEVBQUV1RSxNQUFNSyxLQUNkMkYsTUFBT3JDLEtBQUs4b0MsS0FBS0EsT0FFbkJpRCxVQVVaL3JDLEtBQUs0YyxTQU1QLG9CQUFxQnppQixNQUFPbWxCLFVBQzFCLE1BQU1uUixPQUFTaFUsTUFBTWtpQixjQUNmMnZCLE1BQVE3OUIsUUFBUXdILFFBQVEsZUFDeEJzMkIsVUFBWUQsT0FBTy95QyxRQUFRK3lDLE1BQ2pDLEdBQWtCLFdBQWRDLFVBRWtCLG1CQUFoQjk5QixPQUFPelIsT0FDVHNELEtBQUs4b0MsS0FBS1QsVUFBVXFCLGdCQUFrQjFwQyxLQUFLOG9DLEtBQUtULFVBQVVxQixlQUN0RDFwQyxLQUFLOG9DLEtBQUtULFVBQVVxQixpQkFDdEIxcEMsS0FBSzhvQyxLQUFLVCxVQUFVc0IsZUFBZ0IsSUFHcEIsa0JBQWhCeDdCLE9BQU96UixPQUNUc0QsS0FBSzhvQyxLQUFLVCxVQUFVc0IsZUFBaUIzcEMsS0FBSzhvQyxLQUFLVCxVQUFVc0IsY0FDckQzcEMsS0FBSzhvQyxLQUFLVCxVQUFVc0IsZ0JBQ3RCM3BDLEtBQUs4b0MsS0FBS1QsVUFBVXFCLGdCQUFpQixVQUduQzFwQyxLQUFLOG9DLEtBQUtlLGdCQUNYLENBQ0wsTUFBTXFDLFdBQWFyZixhQUFhdk4sVUFDNUI0c0IsV0FBVzdwQyxRQUFPNnBDLFdBQVc3cEMsTUFBUXpFLE9BQU9zdUMsV0FBVzdwQyxRQUN2RDZwQyxXQUFXdnBDLGFBQ2J1cEMsV0FBV3ZwQyxXQUFhL0UsT0FBT3N1QyxXQUFXdnBDLGFBRXhDdXBDLFdBQVdqeEMsT0FBTWl4QyxXQUFXanhDLEtBQU8yQyxPQUFPc3VDLFdBQVdqeEMsT0FDekQsTUFBTWt4QyxTQUFXdmYsV0FBVzVzQixLQUFLOG9DLEtBQUsvdkMsS0FBTW16QyxrQkFDdENsc0MsS0FBSzhvQyxLQUFLMytCLE9BQU9naUMsVUFFekJuc0MsS0FBSzRLLFFBQU8sR0F3QmQsc0JBQ0UsTUFBTWsrQixLQUFPLElBQUlWLFNBQ2pCLElBQUlPLHVCQUF1QkcsS0FBTSxJQUFJbCtCLFFBQU8sSUNoVHpDLE1BQU11b0IsV0FDWCwwQkFBMkJoNUIsTUFBT2l5QyxRQUVoQ2p5QyxNQUFNeU0saUJBTU4sTUFBTTRrQixXQUFhcnhCLE1BQU0rUSxhQUFhQyxRQUFRLGNBQ3hDcFMsS0FBT00sS0FBSzRSLE1BQU11Z0IsWUFDeEIsR0FBc0IsY0FBbEJ6eUIsS0FBSzB5QyxTQUEwQixDQUVqQyxHQURBdHhDLE1BQU1reUMsbUJBRUhseUMsTUFBTTJNLGdCQUNxQixJQUFwQi9OLEtBQUs0SixpQkFDYyxJQUFsQjVKLEtBQUtrTSxVQUNkLENBQ0EsTUFBTUUsWUFBY0MsV0FBVzFKLE9BQU8sQ0FDcENzMkIseUJBQXlCLElBRXZCN3NCLFFBQ0ZwTSxLQUFLa00sU0FBV0UsTUFBTXhPLElBQUksYUFDMUJvQyxLQUFLNEosV0FBYXdDLE1BQU14TyxJQUFJLGVBR2MsY0FBMUNGLEtBQUtJLFNBQVNGLElBQUksT0FBUSxjQUM1Qm9DLEtBQUtQLE9BQVEsR0FHZixNQUFNc3dDLEtBQU8zVixXQUFXbVosZUFBZXZ6QyxNQUVuQyt2QyxNQUNGc0QsT0FBT0csY0FBY3pELFdBRWxCLEdBQUk1dUMsVUFBVUMsT0FBUSxDQUczQixHQUZBQSxNQUFNa3lDLGtCQUVZLFNBQWR0ekMsS0FBS2tDLEtBQWlCLE9BRTFCLElBQUk0SCxLQUNKLE1BQU02bEMsU0FBVyxHQUVqQixHQUFJM3ZDLEtBQUs0TyxLQUFNLENBQ2IsTUFBTUEsS0FBT2xSLEtBQUttUixNQUFNalIsSUFBSW9DLEtBQUs0TyxNQUNqQyxHQUE2QixTQUF6QkEsS0FBS0UsU0FBU0MsT0FBbUIsT0FDckNqRixXQUFhOEUsS0FBS0ksWUFBWWhQLEtBQUt5QyxTQUVuQ3FILEtBRFM5SixLQUFLQSxLQUNQQSxLQUFLQSxLQUVMdEMsS0FBS21LLE1BQU1qSyxJQUFJb0MsS0FBS3lDLElBRzdCLElBQUtxSCxLQUFNLE9BTVgsR0FKQTZsQyxTQUFTaHNDLEtBQU9tRyxLQUFLbkcsS0FDakIzRCxLQUFLNE8sT0FBTStnQyxTQUFTL2dDLEtBQU81TyxLQUFLNE8sTUFDaEM1TyxLQUFLeUMsS0FBSWt0QyxTQUFTbHRDLEdBQUt6QyxLQUFLeUMsSUFFZCxVQUFkcUgsS0FBSzVILEtBQWtCLENBQ3pCLElBQUtkLE1BQU0yTSxTQUFVLENBQ25CLE1BQU0zQixZQUFjQyxXQUFXMUosT0FBTyxDQUNwQ3MyQix5QkFBeUIsSUFFdkI3c0IsUUFDRnVqQyxTQUFTempDLFNBQVdFLE1BQU14TyxJQUFJLGFBQzlCK3hDLFNBQVMvbEMsV0FBYXdDLE1BQU14TyxJQUFJLGVBR3BDK3hDLFNBQVNybUMsTUFBUSxRQUNqQnFtQyxTQUFTenRDLEtBQU8sUUFDOEIsY0FBMUN4RSxLQUFLSSxTQUFTRixJQUFJLE9BQVEsY0FDNUIreEMsU0FBU2x3QyxPQUFRLE9BRWQsSUFBa0IsV0FBZHFLLEtBQUs1SCxLQUdULE9BRkx5dEMsU0FBU3JtQyxNQUFRLE9BQ2pCcW1DLFNBQVN6dEMsS0FBTyxTQUdsQixNQUFNNnRDLEtBQU8zVixXQUFXbVosZUFBZTVELFVBQ25DSSxNQUNGc0QsT0FBT0csY0FBY3pELE9BSzNCLG9CQUNFbnVDLFFBQ0F1SixLQUNBbkwsTUFXQSxHQUFLNEIsUUFBUTZ4QyxpQkFBYixDQUVBLEdBQUl6ekMsS0FBSzRCLFFBQVFjLFFBQVE4bEMsb0JBQW9CdnBDLFNBQVMsU0FBVSxDQUM5RCxNQUFNeTBDLGNBQWdCdFosV0FBVytILFdBQVduaUMsS0FBSzRCLFFBQVFjLFNBQ3pEeUksS0FBSzhCLEtBQUssb0JBQW9COUIsS0FBS3VvQyxlQUVuQzF6QyxLQUFLNEIsUUFBUWMsUUFBVWd4QyxjQUV6QixPQUFPLEdBR1Qsc0JBQXVCMXpDLE1BQ3JCLEdBQUtBLEtBQUtzSixNQUNWLE9BQVF0SixLQUFLc0osTUFBTXhHLGVBQ2pCLElBQUssUUFBUyxDQUVaLElBQUs5QyxLQUFLa0MsT0FBU2xDLEtBQUsyRCxLQUFNLE9BQzlCLElBQUk5QixRQUFVLEdBQUc3QixLQUFLUCxNQUFRLFNBQVcsVUFBVU8sS0FBS2tDLGFBQ3REbEMsS0FBSzJELFlBRXdCLElBQXBCM0QsS0FBSzRKLGFBQ2QvSCxTQUFXLGVBQWU3QixLQUFLNEosbUJBRUosSUFBbEI1SixLQUFLa00sV0FDZHJLLFNBQVcsYUFBYTdCLEtBQUtrTSxZQUUzQmxNLEtBQUtzMUIsT0FBTXp6QixTQUFXLFNBQVM3QixLQUFLczFCLFFBQ3BDdDFCLEtBQUs0TyxPQUFNL00sU0FBVyxTQUFTN0IsS0FBSzRPLFFBQ3BDNU8sS0FBS3lDLEtBQUlaLFNBQVcsT0FBTzdCLEtBQUt5QyxNQUNwQyxJQUFJc3RDLEtBQU8sZUFBZWx1QyxXQUUxQixPQURJN0IsS0FBSzRtQyxjQUFhbUosTUFBUSxJQUFJL3ZDLEtBQUs0bUMsZ0JBQ2hDbUosS0FHVCxJQUFLLFVBQVcsQ0FFZCxJQUFLL3ZDLEtBQUtzVyxTQUFXdFcsS0FBS3dXLE9BQVEsT0FDbEMsSUFBSTNVLFFBQVUsR0FBRzdCLEtBQUtQLE1BQVEsU0FBVyxZQUN2Q08sS0FBS3NXLGlCQUNJdFcsS0FBS3dXLFNBQ1p4VyxLQUFLNEosYUFBWS9ILFNBQVcsZUFBZTdCLEtBQUs0SixjQUNoRDVKLEtBQUtrTSxXQUFVckssU0FBVyxhQUFhN0IsS0FBS2tNLFlBQzVDbE0sS0FBS3MxQixPQUFNenpCLFNBQVcsU0FBUzdCLEtBQUtzMUIsUUFDeEMsSUFBSXlhLEtBQU8saUJBQWlCbHVDLFdBRTVCLE9BREk3QixLQUFLNG1DLGNBQWFtSixNQUFRLElBQUkvdkMsS0FBSzRtQyxnQkFDaENtSixLQUlULElBQUssT0FBUSxDQUVYLElBQUsvdkMsS0FBS2tDLE9BQVNsQyxLQUFLMkQsS0FBTSxPQUM5QixJQUFJOUIsUUFBVSxHQUFHN0IsS0FBS1AsTUFBUSxTQUFXLFVBQVVPLEtBQUtrQyxhQUN0RGxDLEtBQUsyRCxPQUlIM0QsS0FBS3MxQixPQUFNenpCLFNBQVcsU0FBUzdCLEtBQUtzMUIsUUFDcEN0MUIsS0FBSzRPLE9BQU0vTSxTQUFXLFNBQVM3QixLQUFLNE8sUUFDcEM1TyxLQUFLeUMsS0FBSVosU0FBVyxPQUFPN0IsS0FBS3lDLE1BQ3BDLElBQUlzdEMsS0FBTyxjQUFjbHVDLFdBRXpCLE9BREk3QixLQUFLNG1DLGNBQWFtSixNQUFRLElBQUkvdkMsS0FBSzRtQyxnQkFDaENtSixPQVFiLHlCQUEwQnR5QixJQUFLdFMsTUFFN0IsSUFBSyxNQUFNckgsV0FBV3FILEtBQUs4QixLQUFLLDZCQUMxQm5KLFFBQVF5WCxVQUFVaXRCLG9CQUFvQnZwQyxTQUFTLFdBQ2pENkUsUUFBUXlYLFVBQVk2ZSxXQUFXK0gsV0FBV3IrQixRQUFReVgsWUFNdERwUSxLQUNHOEIsS0FBSyxlQUNMMlgsR0FBRyxTQUFTeG1CLE1BQUFBLGFBQXFCZzhCLFdBQVdDLFNBQVNqNUIsU0FDeEQrSixLQUNHOEIsS0FBSyxlQUNMMlgsR0FBRyxhQUFheGpCLE9BQVNnNUIsV0FBV0UsZ0JBQWdCbDVCLFNBR3pELHFCQUFzQmdOLFFBQ3BCLE1BQU1vRSxLQUFPLEdBQ1BtaEMsS0FBT2p6QyxTQUFTa3pDLGlCQUNwQnhsQyxPQUNBeWxDLFdBQVdDLFVBQ1gsTUFDQSxHQUVGLEtBQU9ILEtBQUtJLFlBQVl2aEMsS0FBS3hULEtBQUsyMEMsS0FBS0ssYUFDdkMsT0FBT3hoQyxLQUdULGtCQUFtQjlQLFNBQ2pCLE1BQU15SSxLQUFPekssU0FBU0MsY0FBYyxPQUNwQ3dLLEtBQUtqSyxVQUFZeU0sT0FBT2pMLFNBRXhCLElBQUk4UCxLQUFPLEdBRVhBLEtBQU8wdkIsV0FBVytSLGNBQWM5b0MsTUFFaEMsTUFBTStvQyxJQUFNLElBQUlDLE9BQ2QsNkNBQ0EsTUFHRixPQURBalMsV0FBV2tTLG9CQUFvQjVoQyxLQUFNMGhDLElBQUs5WixXQUFXaWEsYUFDOUNscEMsS0FBS2pLLFVBR2QseUJBQTBCaUssTUFDeEJBLEtBQ0c4QixLQUFLLGVBQ0wyWCxHQUFHLFNBQVN4bUIsTUFBQUEsYUFBcUJnOEIsV0FBV0MsU0FBU2o1QixTQUN4RCtKLEtBQ0c4QixLQUFLLGVBQ0wyWCxHQUFHLGFBQWF4akIsT0FBU2c1QixXQUFXRSxnQkFBZ0JsNUIsU0FHekQsdUJBQXdCQSxPQUN0QixNQUFNWCxFQUFJVyxNQUFNa2lCLGNBQ1ZwUCxFQUFJelQsRUFBRXNHLGNBQWMsZUFDcEIvRyxLQUFPb0YsVUFBVTNFLEVBQUVQLFNBQ3pCRixLQUFLMHlDLFNBQVcsWUFDaEIxeUMsS0FBSzZ5QyxTQUFXLE9BQ2hCN3lDLEtBQUtzMUIsS0FBTyxLQUdWcGhCLEVBQUVoVSxTQUNGZ1UsRUFBRWhVLFFBQVFvMEMsVUFDYSxnQkFBdkJwZ0MsRUFBRWhVLFFBQVFvMEMsV0FFVnQwQyxLQUFLczFCLEtBQU9waEIsRUFBRWhVLFFBQVFvMEMsVUFFeEJ0MEMsS0FBSzRtQyxZQUFjbm1DLEVBQUVQLFFBQVEwbUMsWUFBY25tQyxFQUFFa2pCLFVBQVksS0FDekR2aUIsTUFBTTRRLGNBQWNHLGFBQWE2OUIsUUFBUSxhQUFjMXZDLEtBQUtDLFVBQVVQLE9BR3hFLG1CQUFvQm9MLE1BQU9tcEMsSUFBS3J5QyxLQUFNTCxRQUFTOEIsTUFDN0MsTUFBTTNELEtBQU8sQ0FDWEMsSUFBSyxDQUFDLGFBQ05DLFFBQVMsQ0FBRW9KLE1BQU9wSCxNQUNsQm96QixLQUFNLGNBQ043MUIsT0FBTyxFQUNQa0UsTUFHSThuQyxRQUFVNXBDLFFBQVEyeUMsU0FBUyxXQUNqQyxJQUFLLE1BQU1wcEMsU0FBU3FwQyxNQUFNQyxLQUFLakosU0FBVSxDQUN2QyxJQUFLMW9DLElBQUt1QixPQUFTOEcsTUFBTSxHQUFHbEksTUFBTSxLQUN0QixTQUFSSCxNQUFnQi9DLEtBQUtzMUIsS0FBT2h4QixPQUNwQixVQUFSdkIsVUFBb0MsSUFBVnVCLFFBQzVCQSxPQUFRLEVBQ1J0RSxLQUFLUCxNQUFnQixDQUFDLFNBQVNSLFNBQVNpRCxLQUFLWSxnQkFFL0M5QyxLQUFLRSxRQUFRNkMsS0FBT3VCLE1BR3RCLElBQUluRSxNQUNKLE1BQU15SixXQUFheEMsVUFBVXV0QyxpQkFBaUIzMEMsS0FBS0UsUUFBUTBKLFlBRTNELE9BQVExSCxLQUFLWSxlQUNYLElBQUssUUFBUyxDQUNaLElBQUk4eEMsVUFBWTUwQyxLQUFLRSxRQUFReUQsS0FFM0IsQ0FBQyxhQUFjLFlBQWEsU0FBVSxXQUFXMUUsU0FDL0NlLEtBQUtFLFFBQVFnQyxNQUFNWSxpQkFHSyxRQUF0QjlDLEtBQUtFLFFBQVF5RCxPQUNmaXhDLFVBQVlsM0MsS0FBS2dKLEtBQUtDLFNBQVMsY0FFUCxRQUF0QjNHLEtBQUtFLFFBQVF5RCxPQUNmaXhDLFVBQVlsM0MsS0FBS2dKLEtBQUtDLFNBQVMsaUJBSWpDLENBQUMsU0FBVSxPQUFRLGlCQUFrQixtQkFBbUIxSCxTQUN0RGUsS0FBS0UsUUFBUWdDLE1BQU1ZLGlCQUdyQjh4QyxVQUFZN3BDLGNBQWM4cEMsdUJBQXVCNzBDLEtBQUtFLFFBQVF5RCxPQUMxRDBKLE9BRU5sTixNQUFRekMsS0FBS2dKLEtBQUtZLE9BQ2hCLGlCQUFrQnRILEtBQUtFLFFBQVEwSixXQUFrQixPQUFMLEtBQ3pDNUosS0FBS0UsUUFBUWdNLFNBQWdCLFFBQUwsS0FFM0IsQ0FDRXRDLFdBQ0FzQyxTQUFVbE0sS0FBS0UsUUFBUWdNLFNBQ3ZCdkksS0FBTWl4QyxZQUdWLE1BRUYsSUFBSyxVQUNIejBDLE1BQVF6QyxLQUFLZ0osS0FBS1ksT0FDaEIsbUJBQW9CdEgsS0FBS0UsUUFBUTBKLFdBQWtCLE9BQUwsS0FDM0M1SixLQUFLRSxRQUFRZ00sU0FBZ0IsUUFBTCxLQUUzQixDQUNFdEMsV0FDQXNDLFNBQVVsTSxLQUFLRSxRQUFRZ00sU0FDdkJzSyxPQUFReFcsS0FBS0UsUUFBUXNXLE9BQ3JCRixPQUFRdFcsS0FBS0UsUUFBUW9XLFNBR3pCLE1BQ0YsSUFBSyxPQUNIblcsTUFBUXpDLEtBQUtnSixLQUFLWSxPQUNoQixnQkFBaUJ0SCxLQUFLRSxRQUFRMEosV0FBa0IsT0FBTCxLQUN4QzVKLEtBQUtFLFFBQVFnTSxTQUFnQixRQUFMLEtBRTNCLENBQ0V0QyxXQUNBc0MsU0FBVWxNLEtBQUtFLFFBQVFnTSxTQUN2QnZJLEtBQU0zRCxLQUFLRSxRQUFReUQsT0FRdEJBLEtBRUUzRCxLQUFLRSxRQUFRMG1DLGFBQWMsRUFEaEM1bUMsS0FBSzJELEtBQU94RCxNQUdkLE1BQU1NLEVBQUlDLFNBQVNDLGNBQWMsS0FDakNGLEVBQUVOLE1BQVF6QyxLQUFLb0MsS0FBS3lSLEtBQU92UixLQUFLMkQsS0FBT3hELE1BQ3ZDTSxFQUFFRyxVQUFVQyxPQUFPYixLQUFLQyxLQUN4QixJQUFLLE1BQU9hLEVBQUdDLEtBQU1DLE9BQU9DLFFBQVFqQixLQUFLRSxTQUN2Q08sRUFBRVAsUUFBUVksR0FBS0MsRUFTakIsT0FQQU4sRUFBRXEwQyxXQUFZLEVBQ2RyMEMsRUFBRVMsVUFBWSxHQUNabEIsS0FBS1AsTUFBUSxtQ0FBcUMsd0JBQzlCTyxLQUFLczFCLDBCQUEwQnQxQixLQUFLczFCLGFBQ3hEdDFCLEtBQUsyRCxPQUdBbEQsRUFTVCxzQkFBdUJXLE9BQ3JCLE1BQU1TLFFBQVVULE1BQU1raUIsY0FBY3BqQixRQVNwQyxHQVBJMkIsUUFBUStILGFBQ1YvSCxRQUFRK0gsV0FBYW1CLGNBQWNpQixrQkFBa0JuSyxRQUFRK0gsYUFNM0RsTSxLQUFLb0MsS0FBS3lSLEtBQU0sQ0FDbEIsR0FBSXBRLFVBQVVDLE9BQVEsQ0FDaEJTLFFBQVEra0MsY0FBYS9rQyxRQUFRd0wsTUFBUWpNLE1BQU1raUIsY0FBY0ssV0FDN0QsTUFBTW9zQixXQUFhVixTQUFTeHlCLFNBQVNoYixTQUdyQyxZQUZtQixJQUFJK3RDLHVCQUF1QkcsTUFDbkNsK0IsUUFBTyxHQUdwQixHQUFJaE0sT0FBT3pDLE9BQU9vTyxXQUFXcFMsT0FDM0IsSUFBSyxNQUFNcUUsU0FBU29DLE9BQU96QyxPQUFPb08sV0FDaEMsT0FBUTNQLFFBQVF5SCxPQUNkLElBQUssUUFDSCxHQUNFLENBQ0UsU0FDQSxPQUNBLGlCQUNBLG1CQUNBckssU0FBUzRDLFFBQVFLLEtBQUtZLGVBRXhCLE9BQU9XLE1BQU1ILE1BQU15eEMsb0JBQ2pCbHpDLFFBQVE4QixLQUNSdkMsTUFBTTJNLFNBQ05sTSxTQUdKLEdBQUksQ0FBQyxTQUFTNUMsU0FBUzRDLFFBQVFLLEtBQUtZLGVBQ2xDLE9BQU9XLE1BQU1ILE1BQU13SyxXQUFXak0sUUFBU1QsTUFBTTJNLFNBQVVsTSxTQUV6RCxHQUNFLENBQUMsYUFBYyxZQUFhLFNBQVUsV0FBVzVDLFNBQy9DNEMsUUFBUUssS0FBS1ksZUFHZixPQUFPVyxNQUFNSCxNQUFNMHhDLGVBQ2pCbnpDLFFBQVE4QixLQUNSdkMsTUFBTTJNLFNBQ05sTSxTQUdKLE1BRUYsSUFBSyxVQUNINFQsYUFBYTlTLE9BQU9jLE1BQU1ILE1BQU1iLEdBQUlaLFFBQVMsQ0FDM0N5UCxZQUFhbFEsTUFBTTJNLFdBU3JCLE1BR0YsSUFBSyxPQUNILE9BQU90SyxNQUFNSCxNQUFNK0ssWUFBWXhNLFFBQVNULE1BQU0yTSxlQU9wRCxHQUFJclEsS0FBS29DLEtBQUtFLEtBQUtVLFNBQVMrUSxXQUFXelIsV0FDL0J1VCxRQUFRb2xCLElBQ1pqN0IsS0FBS29DLEtBQUtFLEtBQUtVLFNBQVMrUSxVQUFVelIsS0FBSzZILE1BQU1uQyxLQUFJdEgsTUFBQUEsSUFDL0MsR0FBSTJDLEVBQUU0QyxPQUFTOUIsUUFBUThCLEtBQU0sQ0FDM0IsTUFBTTJGLE1BQVEsSUFBSWxDLFVBQ2xCa0MsTUFBTTBoQyxVQUFZanFDLEVBQUVmLEtBQUtBLEtBQUtzbUIsV0FDeEJoZCxNQUFNdkwsT0FDWnVMLE1BQU1pRCxZQUVSLE9BQU8sV0FHTixHQUFJN08sS0FBS29DLEtBQUt5UixLQUFNLENBQ3pCLE1BQU15aEMsT0FBUyxDQUNiaHhDLFFBQVMsQ0FDUDRCLE1BQU9sRyxLQUFLb0MsS0FBSzZELE9BR3JCbkMsV0FBV3NyQyxjQUNULEtBQ0FwdkMsS0FBS2dKLEtBQUtZLE9BQU8saUNBQWtDLENBQ2pEZ0MsYUFBYytsQyxTQUFTeHlCLFNBQVNoYixVQUFVa3VDLE9BRTVDaUQsYUFJRCxDQUNMLE1BQU1oeEMsUUFBVXRDLFlBQVl1QyxhQUN0QnFCLE1BQVE1RCxZQUFZdTFDLGdCQUFnQmp6QyxTQUMxQyxHQUFJc0IsTUFDRixPQUFRekIsUUFBUXlILE9BQ2QsSUFBSyxRQUNILEdBQ0UsQ0FBQyxTQUFVLE9BQVEsaUJBQWtCLG1CQUFtQnJLLFNBQ3RENEMsUUFBUUssS0FBS1ksZUFHZixPQUFPUSxNQUFNeXhDLG9CQUNYbHpDLFFBQVE4QixLQUNSdkMsTUFBTTJNLFNBQ05sTSxTQUdKLEdBQUksQ0FBQyxTQUFTNUMsU0FBUzRDLFFBQVFLLEtBQUtZLGVBQ2xDLE9BQU9RLE1BQU13SyxXQUFXak0sUUFBU1QsTUFBTTJNLFNBQVVsTSxTQUVuRCxHQUNFLENBQUMsYUFBYyxZQUFhLFNBQVUsV0FBVzVDLFNBQy9DNEMsUUFBUUssS0FBS1ksZUFHZixPQUFPUSxNQUFNMHhDLGVBQWVuekMsUUFBUThCLEtBQU12QyxNQUFNMk0sU0FBVWxNLFNBRTVELE1BRUYsSUFBSyxVQUNINFQsYUFBYTlTLE9BQU9XLE1BQU1iLEdBQUlaLFFBQVMsQ0FDckN5UCxZQUFhbFEsTUFBTTJNLFdBU3JCLE1BR0YsSUFBSyxPQUNILE9BQU96SyxNQUFNK0ssWUFBWXhNLFFBQVNULE1BQU0yTSxlQUt4Q3JRLEtBQUtvQyxLQUFLRSxLQUFLVSxTQUFTK1EsV0FBV3pSLFdBQy9CdVQsUUFBUW9sQixJQUNaajdCLEtBQUtvQyxLQUFLRSxLQUFLVSxTQUFTK1EsVUFBVXpSLEtBQUs2SCxNQUFNbkMsS0FBSXRILE1BQUFBLElBQy9DLEdBQUkyQyxFQUFFNEMsT0FBUzlCLFFBQVE4QixLQUFNLENBQzNCLE1BQU0yRixNQUFRLElBQUlsQyxVQUNsQmtDLE1BQU0waEMsVUFBWWpxQyxFQUFFZixLQUFLQSxLQUFLc21CLFdBQ3hCaGQsTUFBTXZMLE9BQ1p1TCxNQUFNaUQsWUFFUixPQUFPLE1BSVhoRyxHQUFHQyxjQUFjQyxLQUNmL0ksS0FBS2dKLEtBQUtDLFNBQVMsaUNDcmlCeEIsTUFBTXNJLGlCQUFpQmltQyxLQUU1QnZvQyxZQUFhM00sS0FBTW0xQyxTQUVqQixHQUFJbjFDLEtBQUtrQyxRQUFRdEQsT0FBT3MyQyxLQUFLRSxrQkFBb0JELFNBQVNFLFNBTXhELE9BQU8sSUFBSXoyQyxPQUFPczJDLEtBQUtFLGdCQUFnQnAxQyxLQUFLa0MsTUFBTWxDLEtBQU0sQ0FDakRxMUMsVUFBVSxLQUNaRixlQUdpQixJQUFibjFDLEtBQUtzRixNQUNJLFVBQWR0RixLQUFLa0MsS0FDUGxDLEtBQUtzRixJQUFNLDhDQUNZLFVBQWR0RixLQUFLa0MsS0FDZGxDLEtBQUtzRixJQUFNLHVDQUNZLFdBQWR0RixLQUFLa0MsS0FDZGxDLEtBQUtzRixJQUFNLHFCQUNZLFdBQWR0RixLQUFLa0MsT0FDZGxDLEtBQUtzRixJQUFNLHdCQUlmcVEsTUFBTTNWLEtBQU1tMUMsU0FHZCwwQkFDRSxNQUFPLGdEQUdULG1CQUNFLE1BQU8sQ0FDTEcsWUFBYSxTQVFqQixxQkFBc0JDLFdBQVlDLFVBQVcsR0FDM0MsSUFDSXQzQixTQUNBMmtCLFNBRkE0UyxhQUFlLEdBR25CLEdBQWtCLFdBQWR4dUMsS0FBSy9FLE9BQXNCc3pDLFdBQ1YsU0FBZkQsYUFPQUUsYUFOR3h1QyxLQUFLakgsS0FBS0EsS0FBS3NyQixXQUFXek0sS0FNZCxDQUNiLHdCQUF3QixHQU5YLENBQ2Isd0JBQXdCLEVBQ3hCLHdCQUF3QixJQVNYLFNBQWYwMkIsYUFPQUUsYUFOR3h1QyxLQUFLakgsS0FBS0EsS0FBS3NyQixXQUFXeE0sS0FNZCxDQUNiLHdCQUF3QixHQU5YLENBQ2Isd0JBQXdCLEVBQ3hCLHdCQUF3QixJQVNYLFlBQWZ5MkIsYUFRQUUsYUFQR3h1QyxLQUFLakgsS0FBS0EsS0FBS3NyQixXQUFXOU0sUUFPZCxDQUNiLDJCQUEyQixFQUMzQiwyQkFBNEIsS0FDNUIsNEJBQTZCLEtBQzdCLHdCQUF5QixLQUN6Qix5QkFBMEIsTUFYYixDQUNiLHdCQUF3QixFQUN4Qix5QkFBeUIsRUFDekIsMkJBQTJCLElBYWQsVUFBZisyQixZQUF5QyxTQUFmQSxZQUF1QixDQUNuRCxJQUFJRyxZQUNlLFVBQWZILFlBQTJCdHVDLEtBQUtqSCxLQUFLQSxLQUFLc3JCLFdBQVdsTixRQUN2RHMzQixhQUFjLEdBRUcsVUFBZkgsWUFBMEJ0dUMsS0FBS2pILEtBQUtBLEtBQUtzckIsV0FBV2xOLFFBQ3REczNCLGFBQWMsR0FFRyxTQUFmSCxZQUEwQnR1QyxLQUFLakgsS0FBS0EsS0FBS3NyQixXQUFXak4sT0FDdERxM0IsYUFBYyxHQUVHLFNBQWZILFlBQXlCdHVDLEtBQUtqSCxLQUFLQSxLQUFLc3JCLFdBQVdqTixPQUNyRHEzQixhQUFjLEdBR2RELGFBREVDLFlBQ2EsQ0FDYix5QkFBeUIsRUFDekIsd0JBQXdCLEVBQ3hCLDJCQUEyQixFQUMzQix3QkFBd0IsRUFDeEIsd0JBQXdCLEVBQ3hCLHdCQUF3QixHQUdYLENBQ2IseUJBQXlCLEVBQ3pCLHdCQUF3QixHQU1oQyxHQUFrQixVQUFkenVDLEtBQUsvRSxPQUFxQnN6QyxTQUFVLENBQ3RDLElBQUlsNEMsT0FBUSxFQUNPLFdBQWZpNEMsYUFDR3R1QyxLQUFLakgsS0FBS0EsS0FBS3NyQixXQUFXck4sT0FNN0J3M0IsYUFBZSxDQUNiLDBCQUEwQixFQUMxQiwyQkFBMkIsRUFDM0IsNEJBQTRCLEVBQzVCLDJCQUEyQixFQUMzQixzQkFBdUIsTUFUcEJ4dUMsS0FBS2pILEtBQUtBLEtBQUtzckIsV0FBV25OLFFBRXhCMGtCLFVBQVcsRUFEaEIza0IsVUFBVyxFQVdmNWdCLE9BQVEsR0FHUyxhQUFmaTRDLGFBQ0d0dUMsS0FBS2pILEtBQUtBLEtBQUtzckIsV0FBV3BOLFVBSTdCMmtCLFVBQVcsRUFDWDNrQixVQUFXLElBSlgya0IsVUFBVyxFQUNYM2tCLFVBQVcsR0FLYjVnQixPQUFRLEdBR1MsWUFBZmk0QyxhQUNHdHVDLEtBQUtqSCxLQUFLQSxLQUFLc3JCLFdBQVduTixTQUk3QjBrQixVQUFXLEVBQ1gza0IsVUFBVyxJQUpYMmtCLFVBQVcsRUFDWDNrQixVQUFXLEdBS2I1Z0IsT0FBUSxHQUdOQSxRQUVFNGdCLFdBQ0Z1M0IsYUFBZSxDQUNiLDRCQUE0QixFQUM1QiwyQkFBMkIsRUFDM0IsMEJBQTBCLEVBQzFCLDJCQUEyQixFQUMzQixzQkFBdUIvM0MsS0FBS2dKLEtBQUtDLFNBQy9CbVcsS0FBSzJFLDhCQUtQb2hCLFdBQ0Y0UyxhQUFlLENBQ2IsNEJBQTRCLEVBQzVCLDJCQUEyQixFQUMzQiwwQkFBMEIsRUFDMUIsMkJBQTJCLEVBQzNCLHNCQUF1Qi8zQyxLQUFLZ0osS0FBS0MsU0FDL0JtVyxLQUFLNEUsOEJBT2YsR0FBSTFnQixPQUFPaUQsS0FBS3d4QyxjQUFjcjJDLE9BQVMsRUFBRyxDQUV4QyxhQURtQjZILEtBQUttSyxPQUFPcWtDLGNBRTFCLENBQ0wsTUFBTUUsU0FBVyxtQkFBbUJKLGFBQzlCSyxXQUFhM3VDLEtBQUtqSCxLQUFLQSxLQUFLc3JCLFdBQVdpcUIsa0JBQ3ZDdHVDLEtBQUttSyxPQUFPLENBQUUsQ0FBQ3VrQyxVQUFXQyxZQUFhaHpDLE1BQUtrSCxNQUN6Q0EsUUFLYityQyxZQUFhTixZQUNYLE9BQU90dUMsS0FBSzZ1QyxnQkFBZ0IsYUFBY1AsWUFHNUMsV0FDRSxHQUFrQixVQUFkdHVDLEtBQUsvRSxPQUFxQitFLEtBQUtqSCxLQUFLQSxNQUFNc3JCLFlBQVl2TixRQUN4RCxPQUFPcEksTUFBTWhTLEtBRWYsR0FDRXNELEtBQUtqSCxLQUFLMkQsS0FDUGIsY0FDQTdELFNBQVNnSSxLQUFLakgsS0FBS0EsS0FBS3dtQixnQkFBZ0IxakIsZUFDM0MsQ0FFQSxHQUFJbUUsS0FBSzh1QyxTQUFXcGdDLE1BQU1oUyxPQUFTc0QsS0FBS2pILEtBQUsyRCxLQUFNLENBQ2pELE1BS015SCxNQUxLLElBQUkrb0MsT0FDYixJQUNFcHBDLGNBQWNpckMsWUFBWS91QyxLQUFLakgsS0FBS0EsS0FBS3dtQixnQkFDekMsZ0JBRWFrbEIsS0FBS3prQyxLQUFLakgsS0FBSzJELE1BQ2hDLEdBQWMsT0FBVnlILFlBQXNDLElBQWJBLE1BQU0sR0FDakMsT0FBT0EsTUFBTSxHQUdqQixPQUFPdUssTUFBTWhTLEtBRWYsT0FBSXNELEtBQUs4dUMsUUFDQXBnQyxNQUFNaFMsS0FFUixHQUFHc0QsS0FBS2pILEtBQUtBLEtBQUt3bUIsbUJBQW1CdmYsS0FBS2pILEtBQUsyRCxRQUd4RCxlQUNFLE9BQUlzRCxLQUFLakgsS0FBS0EsS0FBS3NyQixXQUFXdk4sUUFDckIsR0FBRzlXLEtBQUtqSCxLQUFLQSxLQUFLd21CLG1CQUFtQnZmLEtBQUtqSCxLQUFLMkQsUUFDakRzRCxLQUFLdEQsS0FHZCxZQUNFLE1BQWtCLFVBQWRzRCxLQUFLL0UsTUFBcUIrRSxLQUFLakgsS0FBS0EsTUFBTXNyQixZQUFZdk4sUUFJeEQ5VyxLQUFLakgsS0FBSzJELEtBQ1BiLGNBQ0E3RCxTQUFTZ0ksS0FBS2pILEtBQUtBLEtBQUt3bUIsZ0JBQWdCMWpCLGVBRXBDNlMsTUFBTWhTLEtBRVIsR0FBR3NELEtBQUtqSCxLQUFLMkQsT0FUWGdTLE1BQU1oUyxLQVlqQixpQkFBa0I1RixNQUNoQixNQUFJLGVBQWdCa0osS0FBSzBLLFlBQW9CMUssS0FBSzBLLE1BQU04a0IsV0FBVzE0QixNQUMxRCxlQUFnQmtKLFdBQW1CQSxLQUFLd3ZCLFdBQVcxNEIsV0FBdkQsRUFJUCwwQkFBMkIrTCxNQUN6QixHQUFJQSxnQkFBZ0JtRixVQUNsQixHQUFJbkYsS0FBSzlKLEtBQUtBLE1BQU1zckIsWUFBWXZOLFFBQVMsQ0FDdkMsTUFBTWs0QixjQUFnQixJQUFJOUIsT0FDeEJwcEMsY0FBY2lyQyxZQUFZbHNDLEtBQUs5SixLQUFLQSxLQUFLd21CLGdCQUN6QyxNQUVJMHZCLGFBQWVwc0MsS0FBS25HLEtBQ3ZCakMsUUFBUXUwQyxjQUFlLElBQ3ZCRSxPQUNBejBDLFFBQVEsY0FBZSxJQUMxQixPQUFPdzBDLGFBQWE5MkMsT0FBUzgyQyxhQUFlcHNDLEtBQUtuRyxXQUduRCxHQUFJbUcsS0FBSzlKLEtBQUtzckIsWUFBWXZOLFFBQVMsQ0FDakMsTUFBTWs0QixjQUFnQixJQUFJOUIsT0FDeEIsSUFDRXBwQyxjQUFjaXJDLFlBQVlsc0MsS0FBSzlKLEtBQUt3bUIsZ0JBQ3BDLGtCQUNGLEtBRUYsT0FBTzFjLEtBQUtuRyxLQUFLakMsUUFBUXUwQyxjQUFlLE1BRzVDLE9BQU9uc0MsS0FBS25HLEtBR2QsaUJBQWtCbUcsTUFDaEIsT0FBSUEsZ0JBQWdCbUYsV0FDQSxVQUFkbkYsS0FBSzVILE9BQXFCNEgsS0FBSzlKLEtBQUtBLEtBQUtzckIsWUFBWXZOLFVBR2xELENBQ0xyZ0IsS0FBS2dKLEtBQUtDLFNBQVMsb0JBQW9CN0QsY0FDdkMsT0FDQTdELFNBQVNnUSxTQUFTMjFCLG1CQUFtQjk2QixNQUFNaEgsaUJBRzNCLFVBQWRnSCxLQUFLNUgsT0FBcUI0SCxLQUFLOUosS0FBS3NyQixZQUFZdk4sVUFDN0MsQ0FDTHJnQixLQUFLZ0osS0FBS0MsU0FBUyxvQkFBb0I3RCxjQUN2QyxPQUNBN0QsU0FBU2dRLFNBQVMyMUIsbUJBQW1COTZCLE1BQU1oSCxlQUlqRCw2QkFDRSxHQUFrQixVQUFkbUUsS0FBSy9FLEtBQWtCLE9BQzNCLE1BQU11ekMsYUFBZSxHQXlEckIsT0F4REl4dUMsS0FBS2pILEtBQUtBLEtBQUtzckIsV0FBV3JOLFFBRXZCaFgsS0FBS2pILEtBQUtBLEtBQUtzckIsV0FBV3ZOLFVBQzdCOVcsS0FBS2pILEtBQUtBLEtBQUtzckIsV0FBV3ZOLFNBQVUsRUFDcEMwM0IsYUFBYSw0QkFBNkIsR0FLekN4dUMsS0FBS2pILEtBQUtBLEtBQUtzckIsV0FBV3BOLFVBQzFCalgsS0FBS2pILEtBQUtBLEtBQUtzckIsV0FBV25OLFVBRTNCbFgsS0FBS2pILEtBQUtBLEtBQUtzckIsV0FBV3BOLFVBQVcsRUFDckN1M0IsYUFBYSw2QkFBOEIsSUFLM0N4dUMsS0FBS2pILEtBQUtBLEtBQUtzckIsV0FBV3BOLFVBQ3hCalgsS0FBS2pILEtBQUtBLEtBQUt3bUIsZ0JBQW9ELEtBQWxDdmYsS0FBS2pILEtBQUtBLEtBQUt3bUIsaUJBRWxEdmYsS0FBS2pILEtBQUtBLEtBQUt3bUIsZUFBaUI5b0IsS0FBS2dKLEtBQUtDLFNBQ3hDbVcsS0FBSzJFLDRCQUVQZzBCLGFBQWEsdUJBQXlCLzNDLEtBQUtnSixLQUFLQyxTQUM5Q21XLEtBQUsyRSw4QkFNUHhhLEtBQUtqSCxLQUFLQSxLQUFLc3JCLFdBQVduTixTQUN4QmxYLEtBQUtqSCxLQUFLQSxLQUFLd21CLGdCQUFvRCxLQUFsQ3ZmLEtBQUtqSCxLQUFLQSxLQUFLd21CLGlCQUVsRHZmLEtBQUtqSCxLQUFLQSxLQUFLd21CLGVBQWlCOW9CLEtBQUtnSixLQUFLQyxTQUN4Q21XLEtBQUs0RSwyQkFFUCt6QixhQUFhLHVCQUF5Qi8zQyxLQUFLZ0osS0FBS0MsU0FDOUNtVyxLQUFLNEUsOEJBSUx6YSxLQUFLakgsS0FBS0EsS0FBS3NyQixXQUFXcE4sV0FDNUJqWCxLQUFLakgsS0FBS0EsS0FBS3NyQixXQUFXcE4sVUFBVyxFQUNyQ3UzQixhQUFhLDZCQUE4QixHQUV6Q3h1QyxLQUFLakgsS0FBS0EsS0FBS3NyQixXQUFXbk4sVUFDNUJsWCxLQUFLakgsS0FBS0EsS0FBS3NyQixXQUFXbk4sU0FBVSxFQUNwQ3MzQixhQUFhLDRCQUE2QixJQUkxQ3owQyxPQUFPaUQsS0FBS3d4QyxjQUFjcjJDLE9BQVMsU0FDL0I2SCxLQUFLbUssT0FBT3FrQyxjQUdiQSxhQVdUSyxnQkFBaUJwbUMsSUFBSzZsQyxZQUNmdHVDLEtBQUtqSCxLQUFLQSxLQUFLMFAsT0FBTXpJLEtBQUtqSCxLQUFLQSxLQUFLMFAsS0FBTyxJQUVoRCxPQURzQnpJLEtBQUtqSCxLQUFLQSxLQUFLMFAsS0FBS2hMLFFBQVE2d0MsYUFDN0IsRUFJdkIsNkJBQ003M0MsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGNBQWdCRixLQUFLb0MsS0FBS3lSLFFBQ2pEdEssS0FBS2pILEtBQUtBLEtBQUt3MkIsYUFDWnZ2QixLQUFLbUssT0FBTyxDQUFFLGFBQWMsV0FFOUJuSyxLQUFLbUssT0FBTyxDQUFFLDJCQUEyQixLQUluRCwrQkFDTTFULEtBQUtJLFNBQVNGLElBQUksT0FBUSxjQUFnQkYsS0FBS29DLEtBQUt5UixRQUNqRHRLLEtBQUtqSCxLQUFLQSxLQUFLdzJCLGFBQ1p2dkIsS0FBS21LLE9BQU8sQ0FBRSxhQUFjLFdBRTlCbkssS0FBS21LLE9BQU8sQ0FBRSwyQkFBMkIsS0FJbkQsdUJBQ0UsT0FBT25LLEtBQUs4Z0MsWUFBWSxnQkFHMUIscUJBQXNCamYsU0FBVXN0QixpQkFBa0IsR0FDaEQsTUFBTXpMLFdBQWExakMsS0FBSzhnQyxZQUFZamYsVUFDOUJubEIsS0FBTyxjQUFjbWxCLFdBRVgsZUFBYkEsVUFBMEMsY0FBYkEsVUFDN0I2aEIsWUFDRHlMLGdCQU1zQixpQkFBYnR0QixTQUNMcHJCLEtBQUtJLFNBQVNGLElBQUksT0FBUSxjQUFnQkYsS0FBS29DLEtBQUt5UixXQUNoRHRLLEtBQUttSyxPQUFPLENBQUUsQ0FBQ3pOLE1BQU9nbkMsWUFFNUJwa0MsR0FBR0MsY0FBY21KLEtBQUssMkJBRWIxSSxLQUFLbUssT0FBTyxDQUFFLENBQUN6TixNQUFPZ25DLGtCQVYzQjFqQyxLQUFLbUssT0FBTyxDQUNoQixDQUFDLG9CQUFvQjBYLFlBQWEsS0FDbEMsQ0FBQ25sQixNQUFPZ25DLFlBV2Qsa0JBQW1CN2hCLGdCQUNYN2hCLEtBQUttSyxPQUFPLENBQUUsQ0FBQyxjQUFjMFgsYUFBYSxJQUdsRCxvQkFBcUJBLFNBQVVzdEIsaUJBQWtCLEdBQy9DLE1BQU16eUMsS0FBTyxjQUFjbWxCLFdBRVgsZUFBYkEsVUFBMEMsY0FBYkEsV0FDOUJzdEIsc0JBTVdudkMsS0FBS21LLE9BQU8sQ0FBRSxDQUFDek4sT0FBTyxVQUozQnNELEtBQUttSyxPQUFPLENBQ2hCLENBQUMsb0JBQW9CMFgsWUFBYSxLQUNsQyxDQUFDbmxCLE9BQU8sSUFLZG9rQyxZQUFhamYsVUFDWCxPQUFLN2hCLEtBQUtqSCxLQUFLQSxLQUFLdzJCLFFBT2Z2dkIsS0FBS2pILEtBQUtBLEtBQUt3MkIsTUFBTTFOLFdBQ25CN2hCLEtBQUtqSCxLQUFLQSxLQUFLdzJCLE1BQU0xTixXQVAxQjdoQixLQUFLakgsS0FBS0EsS0FBS3cyQixNQUFRLEdBQ3ZCdnZCLEtBQUtqSCxLQUFLQSxLQUFLdzJCLE1BQU1pVSxRQUFTLEVBQzlCeGpDLEtBQUttSyxPQUFPLENBQUUsYUFBYyxNQUNyQixHQU9YLDJCQUNFLE1BQ2dCLFdBQWRuSyxLQUFLL0UsUUFDZ0MsSUFBcEMrRSxLQUFLakgsS0FBS0EsS0FBS3NyQixZQUFZMU0sT0FDVSxJQUFwQzNYLEtBQUtqSCxLQUFLQSxLQUFLc3JCLFlBQVkzTSxPQUNXLElBQXRDMVgsS0FBS2pILEtBQUtBLEtBQUtzckIsWUFBWS9NLFFBSWpDLHNCQUNFLEdBQWtCLFdBQWR0WCxLQUFLL0UsS0FBbUIsT0FBTyxLQUNuQyxNQUFNbTBDLFVBQVlsdkMsU0FBU0YsS0FBS2pILEtBQUtBLEtBQUtndEIsYUFBYTl0QixLQUN2RCxPQUFJK0wsTUFBTW9yQyxXQUFtQixFQUN0QkEsVUFHVCxtQkFDRSxHQUFrQixXQUFkcHZDLEtBQUsvRSxLQUFtQixPQUFPLEtBQ25DLE1BQU00b0IsV0FBYTNqQixTQUFTRixLQUFLakgsS0FBS0EsS0FBS2d0QixhQUFhWSxRQUN4RCxPQUFJM2lCLE1BQU02ZixZQUFvQixFQUN2QkEsV0FHVCx5QkFDRSxJQUFJa0MsYUFtQkosT0FqQkVBLGFBREUvbEIsS0FBS2pILEtBQUtBLEtBQUtndEIsYUFBYVksT0FDZjNtQixLQUFLakgsS0FBS0EsS0FBS2d0QixhQUFhWSxPQUU1QixJQUViM21CLEtBQUtqSCxLQUFLQSxLQUFLZ3RCLGFBQWE5dEIsTUFDOUI4dEIsY0FBZ0IsSUFBSS9sQixLQUFLakgsS0FBS0EsS0FBS2d0QixhQUFhOXRCLFFBRTlDK0gsS0FBS2pILEtBQUtBLEtBQUtzckIsV0FBVzFNLE9BQzVCb08sY0FBZ0IsSUFBSXR2QixLQUFLZ0osS0FBS0MsU0FBUyxzQkFFckNNLEtBQUtqSCxLQUFLQSxLQUFLc3JCLFdBQVczTSxPQUM1QnFPLGNBQWdCLElBQUl0dkIsS0FBS2dKLEtBQUtDLFNBQVMscUJBQ25DTSxLQUFLakgsS0FBS0EsS0FBS2d0QixhQUFhaEMsUUFDOUJnQyxjQUFnQixJQUFJL2xCLEtBQUtqSCxLQUFLQSxLQUFLZ3RCLGFBQWFoQyxXQUk3Q2dDLGFBR1Qsb0JBQ0UsTUFBa0IsV0FBZC9sQixLQUFLL0UsS0FBMEIsT0FDL0IrRSxLQUFLcXZDLGlCQUFtQixHQU05QixpQkFDRSxNQUFrQixXQUFkcnZDLEtBQUsvRSxLQUEwQixPQUM5QitFLEtBQUsrbEIsYUFNWixnQkFDRSxPQUFPN2xCLFNBQVNGLEtBQUtqSCxLQUFLQSxLQUFLMnRCLE1BQU1DLE9BQU90cEIsT0FHOUMsZ0JBQ0UsT0FBTzZDLFNBQVNGLEtBQUtqSCxLQUFLQSxLQUFLMnRCLE1BQU1FLEtBQUt2cEIsT0FHNUMsbUJBQ0UsT0FBTzZDLFNBQVNGLEtBQUtqSCxLQUFLQSxLQUFLMnRCLE1BQU1ubUIsUUFBUWxELE9BRy9DLHNCQUNFLEdBQWtCLFVBQWQyQyxLQUFLL0UsS0FBa0IsTUFBTyxHQUVsQyxNQUFNcTBDLGdCQUFrQixHQUN4QixJQUFLLE1BQU94ekMsSUFBS3VCLFNBQVV0RCxPQUFPQyxRQUFRNmIsS0FBS3k1QixrQkFDTixJQUFuQ3R2QyxLQUFLakgsS0FBS0EsS0FBS3NyQixXQUFXdm9CLE1BQzVCd3pDLGdCQUFnQnYzQyxLQUFLdEIsS0FBS2dKLEtBQUtDLFNBQVNyQyxRQUc1QyxPQUFPaXlDLGdCQUdULDJCQUE0Qmp6QyxNQUFPdEQsTUFDakMsR0FBa0IsVUFBZEEsS0FBS2tDLEtBQWtCLE9BQU8sS0FDbEMsR0FBSXlMLE9BQU8zTixLQUFLQSxLQUFLc21CLE1BQU1ybkIsU0FBUyxLQUFNLENBQ3hDLE1BQU11b0MsT0FBUyxHQUNmLElBQUssTUFBT3prQyxJQUFLdUIsU0FBVXRELE9BQU9DLFFBQVE2YixLQUFLMWMsUUFBUXFnQixZQUNqRDFkLElBQUltQixXQUFXLE1BQVFJLE1BQU1KLFdBQVcsaUJBQzFDc2pDLE9BQU96a0MsSUFBSTZCLFVBQVUsSUFBTTZpQyxZQUFZbmtDLE1BQU9nQixNQUFNTSxVQUFVLE1BR2xFLElBQUlOLE1BQ0osSUFDRUEsTUFBUXBHLEtBQUs2UyxNQUNYLElBQUkvUyxLQUFLZ0MsS0FBS0EsS0FBS3NtQixLQUFNa2hCLFFBQVExd0IsU0FBUyxDQUN4Q0MsVUFBVSxJQUNUeFksT0FFTCxNQUFPaUMsS0FDUDhELE1BQVEsRUFFVixPQUFPQSxNQUVULE9BQVEyRyxNQUFNOUQsU0FBU25ILEtBQUtBLEtBQUtzbUIsT0FBb0MsS0FBM0JuZixTQUFTbkgsS0FBS0EsS0FBS3NtQixNQUcvRCxZQUNFLEdBQWtCLFVBQWRyZixLQUFLL0UsS0FBa0IsTUFBTyxDQUFDLE1BQU0sR0FDekMsR0FBbUMsaUJBQXhCK0UsS0FBS2pILEtBQUtBLEtBQUtzbUIsS0FDeEIsTUFBTyxDQUFDcmYsS0FBS2pILEtBQUtBLEtBQUtzbUIsTUFBTSxHQUUvQixHQUFJcmYsS0FBS2pILEtBQUtBLEtBQUtzbUIsS0FBS3JuQixTQUFTLEtBQU0sQ0FDckMsTUFBTXVvQyxPQUFTLEdBQ2YsSUFBSyxNQUFPemtDLElBQUt1QixTQUFVdEQsT0FBT0MsUUFBUTZiLEtBQUsxYyxRQUFRcWdCLFlBQ2pEMWQsSUFBSW1CLFdBQVcsTUFBUUksTUFBTUosV0FBVyxXQUMxQ3NqQyxPQUFPemtDLElBQUk2QixVQUFVLElBQU02aUMsWUFBWXhnQyxLQUFNM0MsTUFBTU0sVUFBVSxLQUdqRSxJQUFJTixNQUNKLElBQ0VBLE1BQVFwRyxLQUFLNlMsTUFDWCxJQUFJL1MsS0FBS2lKLEtBQUtqSCxLQUFLQSxLQUFLc21CLEtBQU1raEIsUUFBUTF3QixTQUFTLENBQzdDQyxVQUFVLElBQ1R4WSxPQUVMLE1BQU9pQyxLQUNQOEQsTUFBUSxFQUdWLE1BQU8sQ0FBQ0EsT0FBTyxHQUVqQixNQUFPLENBQ0oyRyxNQUFNOUQsU0FBU0YsS0FBS2pILEtBQUtBLEtBQUtzbUIsT0FFM0IsS0FEQW5mLFNBQVNGLEtBQUtqSCxLQUFLQSxLQUFLc21CLE9BRTVCLEdBSUosa0JBQ0UsTUFBTXVhLEVBQUk1NUIsS0FBS3V2QyxNQUlmLE9BSEkzVixFQUFFLFVBQ0U1NUIsS0FBS21LLE9BQU8sQ0FBRSxZQUFheXZCLEVBQUUsS0FFOUJBLEVBQUUsR0FHWCxXQUNFLE1BQU1BLEVBQUk1NUIsS0FBS3V2QyxNQUlmLE9BSEkzVixFQUFFLElBQ0o1NUIsS0FBS21LLE9BQU8sQ0FBRSxZQUFheXZCLEVBQUUsS0FFeEJBLEVBQUUsR0FHWCxZQUNFLEdBQWtCLFVBQWQ1NUIsS0FBSy9FLEtBQWtCLE9BQU8sS0FDbEMsSUFBSW9DLE1BQVEsRUFvQlosTUFuQjZCLGNBQXpCMkMsS0FBSzNELE1BQU10RCxLQUFLa0MsTUFDbEJvQyxNQUFRMkMsS0FBS3FmLEtBQ2JoaUIsT0FBUzJDLEtBQUtqSCxLQUFLQSxLQUFLOFksYUFBYWlxQixTQUNqQzU3QixTQUFTRixLQUFLakgsS0FBS0EsS0FBSzhZLGFBQWFpcUIsVUFDckMsRUFDSnorQixPQUFTMkMsS0FBS2pILEtBQUtBLEtBQUs4WSxhQUFha3FCLFdBQ2pDNzdCLFNBQVNGLEtBQUtqSCxLQUFLQSxLQUFLOFksYUFBYWtxQixZQUNyQyxFQUNKMStCLE9BQVMyQyxLQUFLakgsS0FBS0EsS0FBSzhZLGFBQWFDLFdBQ2pDNVIsU0FBU0YsS0FBS2pILEtBQUtBLEtBQUs4WSxhQUFhQyxZQUNyQyxFQUNBcmIsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGNBQ3hCcUosS0FBS2pILEtBQUtBLEtBQUs4WSxhQUFhbXFCLFlBQzlCMytCLE9BQVM2QyxTQUFTRixLQUFLakgsS0FBS0EsS0FBSzhZLGFBQWFtcUIsYUFJbEQzK0IsTUFBUTZDLFNBQVNGLEtBQUtqSCxLQUFLQSxLQUFLc0UsT0FFMUIyRyxNQUFNM0csT0FBaUIsS0FBUkEsTUFHekIsa0JBQW1CQSxPQUNqQixHQUFrQixVQUFkMkMsS0FBSy9FLEtBQWtCLE9BQU8sS0FDbEMsR0FBNkIsY0FBekIrRSxLQUFLM0QsTUFBTXRELEtBQUtrQyxLQUFzQixDQUN4QyxNQUFNOG1DLE1BQVE3aEMsU0FBUzdDLE9BQVMyQyxLQUFLM0MsTUFDL0JteUMsS0FDSHh2QyxLQUFLakgsS0FBS0EsS0FBSzhZLGFBQWFDLFdBQ3pCNVIsU0FBU0YsS0FBS2pILEtBQUtBLEtBQUs4WSxZQUFZQyxZQUNwQyxHQUFLaXdCLFlBQ0wvaEMsS0FBS21LLE9BQU8sQ0FDaEIsOEJBQStCcWxDLElBQU0sRUFBSUEsSUFBTSxlQUV0Q3h2QyxLQUFLbUssT0FBTyxDQUFFLGFBQWM5TSxRQUczQyx5QkFBMEIwRyxHQUN4QixHQUFrQixVQUFkL0QsS0FBSy9FLEtBQWtCLE9BQU8sS0FDbEMsR0FBNkIsY0FBekIrRSxLQUFLM0QsTUFBTXRELEtBQUtrQyxLQUFzQixDQUN4QyxNQUFNdTBDLEtBQ0h4dkMsS0FBS2pILEtBQUtBLEtBQUs4WSxhQUFhQyxXQUN6QjVSLFNBQVNGLEtBQUtqSCxLQUFLQSxLQUFLOFksWUFBWUMsWUFDcEMsR0FBSzVSLFNBQVM2RCxTQUNkL0QsS0FBS21LLE9BQU8sQ0FDaEIsOEJBQStCcWxDLElBQU0sRUFBSUEsSUFBTSxLQUtyRDFwQixnQkFDRSxNQUFrQixXQUFkOWxCLEtBQUsvRSxLQUEwQixLQUM5QitFLEtBQUtqSCxLQUFLQSxLQUFLMDJDLEtBSWJ6dkMsS0FBS2pILEtBQUtBLEtBQUswMkMsTUFIcEJ6dkMsS0FBSzB2QyxXQUFXLEdBQ1QsR0FLWCxlQUNFLEdBQWtCLFdBQWQxdkMsS0FBSy9FLEtBQW1CLE9BQU8sS0FDbkMsTUFBTTAwQyxVQUFZM3ZDLEtBQUtqSCxLQUFLQSxLQUFLNjJDLFFBQzdCMXZDLFNBQVNGLEtBQUtqSCxLQUFLQSxLQUFLNjJDLFNBQ3hCLFFBQ0U1dkMsS0FBSzB2QyxXQUFXQyxXQUd4QixpQkFBa0JDLFNBQ2hCLEdBQWtCLFdBQWQ1dkMsS0FBSy9FLEtBQW1CLE9BQU8sV0FDN0IrRSxLQUFLbUssT0FBTyxDQUFFLFlBQWF5bEMsU0FBVyxJQUc5QyxrQkFDRSxHQUFrQixXQUFkNXZDLEtBQUsvRSxLQUFtQixPQUFPLEtBQ25DLE1BQU0yMEMsY0FBZ0I1dkMsS0FBSzhsQixnQkFDckIrcEIsV0FBYTd2QyxLQUFLakgsS0FBS0EsS0FBSzYyQyxRQUM5QjF2QyxTQUFTRixLQUFLakgsS0FBS0EsS0FBSzYyQyxTQUN4QixFQUNBQSxRQUFVLEdBQUtDLGlCQUFrQjd2QyxLQUFLMHZDLFdBQVdHLGtCQUMxQzd2QyxLQUFLMHZDLFdBQVdFLFFBQVUsR0FHdkMsbUJBQW9CN3JDLEdBQ2xCLEdBQWtCLFdBQWQvRCxLQUFLL0UsS0FBbUIsT0FBTyxLQUNuQyxNQUFNMjBDLGNBQWdCNXZDLEtBQUs4bEIsZ0JBQ3ZCL2hCLEVBQUk2ckMsY0FBZTV2QyxLQUFLMHZDLFdBQVcsU0FDNUIxdkMsS0FBSzB2QyxXQUFXRSxRQUFVN3JDLEdBR3ZDLDJCQUE0Qnk1QixVQUFXNWlDLFNBRXJDLE9BRG1CNGlDLFVBQVVqUSxPQUFPM3lCLFNBRWpDazFDLFFBQU8sQ0FBQ0MsU0FBVWx0QyxRQUdkbUYsU0FBU0MsVUFBVXBGLE9BQ3BCa3RDLFNBQVMvcEMsTUFBS3BELE9BQVNBLE1BQU1sRyxPQUFTbUcsS0FBS25HLE9BRXBDcXpDLFNBR0YsSUFBSUEsU0FBVWx0QyxPQUNwQixJQUNGcXVCLE1BQUssQ0FBQzEzQixFQUFHaXNCLEtBQ1IsSUFBSXVxQixJQUNBQyxJQVlKLE9BWEl6MkMsRUFBRVQsS0FBS3NyQixZQUFjb0IsRUFBRTFzQixLQUFLc3JCLFlBQzlCMnJCLElBQU14MkMsRUFBRVQsS0FBS3NyQixXQUFXdk4sUUFDcEJ0ZCxFQUFFVCxLQUFLd21CLGVBQWUxakIsY0FBZ0JyQyxFQUFFa0QsS0FBS2IsY0FDN0NyQyxFQUFFa0QsS0FBS2IsY0FDWG8wQyxJQUFNeHFCLEVBQUUxc0IsS0FBS3NyQixXQUFXdk4sUUFDcEIyTyxFQUFFMXNCLEtBQUt3bUIsZUFBZTFqQixjQUFnQjRwQixFQUFFL29CLEtBQUtiLGNBQzdDNHBCLEVBQUUvb0IsS0FBS2IsZ0JBRVhtMEMsSUFBTXgyQyxFQUFFa0QsS0FBS2IsY0FDYm8wQyxJQUFNeHFCLEVBQUUvb0IsS0FBS2IsZUFFUm0wQyxJQUFJL0ksY0FBY2dKLFFBVS9CLHlCQUEwQnJ3QyxNQUV4QixNQUFNdUQsU0FBV3ZELEtBQUszRyxRQUFRK0MsUUFDOUIsR0FBSW1ILFNBQVUsQ0FDWixNQUFPcEgsUUFBU0MsU0FBV21ILFNBQVNsSCxNQUFNLEtBQzFDLEdBQWdCLFVBQVpGLFFBQ0YsT0FBT3RGLEtBQUt5RixPQUFPQyxPQUFPSCxTQUNyQixDQUNMLE1BQU1TLE1BQVFoRyxLQUFLc0gsT0FBT3BILElBQUlvRixTQUM5QixJQUFLVSxNQUFPLE9BQU8sS0FDbkIsTUFBTXVCLFVBQVl2QixNQUFNd0Isb0JBQW9CLFFBQVNqQyxTQUNyRCxJQUFLZ0MsVUFBVyxPQUFPLEtBRXZCLE9BRGMsSUFBSUUsTUFBTUYsV0FDWDNCLE9BS2pCLE1BQU1nSCxRQUFVekQsS0FBSzNHLFFBQVFvSyxRQUM3QixPQUFPNU0sS0FBS3lGLE9BQU92RixJQUFJME0sVUFBWSxLQVlyQzZzQyxZQUFhQyxZQUFjLElBQ3pCLE1BQU1wM0MsS0FBT29GLFVBQVU2QixLQUFLakgsS0FBS0EsTUFFRCxpQkFBckJBLEtBQUsyaEMsY0FDZDNoQyxLQUFLMmhDLFlBQWMsQ0FDakJyOUIsTUFBT3RFLEtBQUsyaEMsWUFDWjVqQixRQUFTLFVBR3lCLElBQTNCL2QsS0FBSzJoQyxZQUFZcjlCLFFBQzFCdEUsS0FBSzJoQyxZQUFZcjlCLE1BQVEsU0FFYSxJQUE3QnRFLEtBQUsyaEMsWUFBWTVqQixVQUMxQi9kLEtBQUsyaEMsWUFBWTVqQixRQUFVLElBRTdCLE1BQU1zNUIsT0FBUyxHQUdmcjNDLEtBQUsyaEMsWUFBWXI5QixNQUFRNDlCLFdBQVdDLFdBQ2xDbmlDLEtBQUsyaEMsWUFBWXI5QixNQUNqQjh5QyxhQUVGcDNDLEtBQUsyaEMsWUFBWXI5QixNQUFRODFCLFdBQVcrSCxXQUFXbmlDLEtBQUsyaEMsWUFBWXI5QixPQUNoRXRFLEtBQUsyaEMsWUFBWTVqQixRQUFVbWtCLFdBQVdDLFdBQ3BDbmlDLEtBQUsyaEMsWUFBWTVqQixRQUNqQnE1QixhQUVGcDNDLEtBQUsyaEMsWUFBWTVqQixRQUFVcWMsV0FBVytILFdBQVduaUMsS0FBSzJoQyxZQUFZNWpCLFNBR2xFLE1BQU11NUIsTUFBUSxHQUNSQyxHQUFLdHdDLEtBQUssSUFBSUEsS0FBS2pILEtBQUtrQyxnQkFHOUIsR0FGSXExQyxJQUFJQSxHQUFHOTNCLEtBQUt4WSxLQUFSc3dDLENBQWN2M0MsS0FBTXEzQyxPQUFRQyxNQUFPRixhQUV6QixVQUFkbndDLEtBQUsvRSxLQUNQLElBQUssTUFBT2EsSUFBS3VCLFNBQVV0RCxPQUFPQyxRQUFRNmIsS0FBS3k1QixrQkFDTixJQUFuQ3R2QyxLQUFLakgsS0FBS0EsS0FBS3NyQixXQUFXdm9CLE1BQWV1MEMsTUFBTXQ0QyxLQUFLc0YsT0FPNUQsT0FGQXRFLEtBQUtzckIsV0FBYWdzQixNQUFNbjRDLFFBQU9xNEMsS0FBT0EsSUFDdEN4M0MsS0FBS3EzQyxPQUFTQSxPQUNQcjNDLEtBR1R5M0MsZ0JBQWlCejNDLEtBQU1xM0MsT0FBUUMsT0FDN0IsSUFBSyxNQUFPdjBDLElBQUt1QixTQUFVdEQsT0FBT0MsUUFBUTZiLEtBQUtpbkIsbUJBQ04sSUFBbkM5OEIsS0FBS2pILEtBQUtBLEtBQUtzckIsV0FBV3ZvQixNQUFldTBDLE1BQU10NEMsS0FBS3NGLE9BRzFELElBQUlvekMsV0FBYWg2QyxLQUFLZ0osS0FBS0MsU0FBUyxjQUNoQ2cyQixVQUFZLEdBQ1pnYixPQUFRLEVBQ1osR0FBSTF3QyxLQUFLakgsS0FBS0EsS0FBSzZKLE1BQU1xaUIsS0FBS3pwQixHQUFJLENBQ2hDLE1BQU1vSCxNQUFRNUMsS0FBSzNELE9BQU91RSxNQUFNakssSUFBSXFKLEtBQUtqSCxLQUFLQSxLQUFLNkosTUFBTXFpQixLQUFLenBCLElBQzFEb0gsUUFDRjh5QixXQUFhMXRCLFNBQVMyMUIsbUJBQW1CLzZCLE9BQ3pDOHRDLE9BQVEsR0FJWixHQUFJMXdDLEtBQUt1a0Msc0JBQXdCdmtDLEtBQUtqSCxLQUFLQSxLQUFLNkosTUFBTXNpQixXQUFXMXBCLEdBQUksQ0FDbkVpMUMsV0FBYWg2QyxLQUFLZ0osS0FBS0MsU0FBUyxlQUNoQyxNQUFNa0QsTUFBUTVDLEtBQUszRCxPQUFPdUUsTUFBTWpLLElBQUlxSixLQUFLakgsS0FBS0EsS0FBSzZKLE1BQU1zaUIsV0FBVzFwQixJQUNoRW9ILFFBQ0Y4eUIsV0FBYSxJQUFJMXRCLFNBQVMyMUIsbUJBQW1CLzZCLFNBQzdDOHRDLE9BQVEsR0FJUEEsUUFDSGhiLFVBQVkxMUIsS0FBS2pILEtBQUtBLEtBQUs2SixNQUFNcWlCLEtBQUt2b0IsS0FDbENzRCxLQUFLdWtDLHNCQUF3QnZrQyxLQUFLakgsS0FBS0EsS0FBSzZKLE1BQU1zaUIsV0FBV3hvQixPQUMvRGc1QixXQUFhLElBQUkxMUIsS0FBS2pILEtBQUtBLEtBQUs2SixNQUFNc2lCLFdBQVd4b0IsU0FJakRnNUIsV0FDRjBhLE9BQU9yNEMsS0FBSyxDQUNWMkUsS0FBTSt6QyxXQUNOcHpDLE1BQU9xNEIsWUFJWDBhLE9BQU9yNEMsS0FBSyxDQUNWMkUsS0FBTWpHLEtBQUtnSixLQUFLQyxTQUFTLDJCQUN6QnJDLE1BQU8yQyxLQUFLMndDLHFCQUdkUCxPQUFPcjRDLEtBQUssQ0FDVjJFLEtBQU1qRyxLQUFLZ0osS0FBS0MsU0FBUywwQkFDekJyQyxNQUFPMkMsS0FBS2pILEtBQUtBLEtBQUtzMUMsWUFBY3J1QyxLQUFLakgsS0FBS0EsS0FBS3MxQyxZQUFjLE1BRy9EcnVDLEtBQUtqSCxLQUFLQSxLQUFLNjJDLFNBQ2pCUSxPQUFPcjRDLEtBQUssQ0FDVjJFLEtBQU1qRyxLQUFLZ0osS0FBS0MsU0FBUywyQkFDekJyQyxNQUFPMkMsS0FBS2pILEtBQUtBLEtBQUs2MkMsVUFLNUJnQixjQUNFLFFBQWtCLFVBQWQ1d0MsS0FBSy9FLE9BQW9CK0UsS0FBS2pILEtBQUtBLEtBQUtzckIsV0FBV3RzQixNQUl6RCxhQUNFLE9BQU9pSSxLQUFLakgsS0FBS0EsS0FBS3NyQixXQUFXNU0sS0FHbkMsY0FDRSxNQUFrQixVQUFkelgsS0FBSy9FLE1BRVArRSxLQUFLdEQsS0FBS2IsZ0JBQ1ZwRixLQUFLZ0osS0FBS0MsU0FBUyx1QkFBdUI3RCxlQ2g0QnpDLE1BQU1zRSxVQUNYdUYsWUFDRXJKLE1BQVEsS0FDUnVHLE1BQVEsS0FDUkMsS0FBTyxLQUNQQyxRQUFVLEVBQ1ZILFdBQWEsS0FDYjhCLHNCQUF3QixFQUN4QkQsaUJBQW1CLEdBY25CLEdBWkF4RSxLQUFLM0QsTUFBUUEsTUFDYjJELEtBQUs0QyxNQUFRQSxNQUNiNUMsS0FBSzZDLEtBQU9BLEtBQ1o3QyxLQUFLMkMsV0FBYUEsV0FDbEIzQyxLQUFLcUIsYUFBZXlCLFFBQ3BCOUMsS0FBSytDLFNBQVcsRUFDaEIvQyxLQUFLQyxhQUFlLEtBQ3BCRCxLQUFLMEMsbUJBQXFCLEtBQzFCMUMsS0FBSzZ3QyxTQUFVLEVBQ2Y3d0MsS0FBS3dFLGlCQUFtQkEsaUJBQ3hCeEUsS0FBS3lFLHNCQUF3QkEsc0JBRVYsT0FBZjlCLFdBQXFCLENBQ3ZCLE1BQU1tdUMsVUFDb0QsWUFBeERyNkMsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLDBCQUM1QnFKLEtBQUsyQyxXQUFhbXVDLFVBQ2Qzd0MsVUFBVXdFLGdCQUFnQmdDLFFBQzFCeEcsVUFBVXdFLGdCQUFnQnZFLFNBSWxDLHNCQUNFLE1BQU8sV0FHVCw2QkFDRSxNQUFPLENBQ0x1RyxTQUFVLEVBQ1Z2RyxRQUFTLEVBQ1RFLEtBQU0sRUFDTkMsUUFBUyxFQUNUQyxTQUFVLEVBQ1Z5bUIsV0FBWSxHQUloQiwwQkFDRSxNQUFPLENBQ0x4bUIsUUFBUyxHQUNUQyxRQUFTLEVBQ1ROLFFBQVMsRUFDVEUsS0FBTSxFQUNOQyxRQUFTLEVBQ1RDLFNBQVUsR0FJZCx3QkFBeUJtRSxpQkFDdkIsT0FDR1gsTUFBTXBHLE9BQU8rRyxrQkFFVkEsZ0JBREEvRyxPQUFPK0csa0JBR1gsSUFBSyxJQUNILE9BQU9sTyxLQUFLZ0osS0FBS0MsU0FBUywwQkFDNUIsSUFBSyxJQUNILE9BQU9qSixLQUFLZ0osS0FBS0MsU0FBUyx1QkFDNUIsSUFBSyxLQUNILE9BQU9qSixLQUFLZ0osS0FBS0MsU0FBUywwQkFDNUIsSUFBSyxNQUNILE9BQU9qSixLQUFLZ0osS0FBS0MsU0FBUywyQkFDNUIsS0FBSyxFQUNILE9BQU9qSixLQUFLZ0osS0FBS0MsU0FBUywwQkFDNUIsS0FBS1MsVUFBVXdFLGdCQUFnQmdDLFFBQzdCLE9BQU9sUSxLQUFLZ0osS0FBS0MsU0FBUywwQkFDNUIsS0FBS1MsVUFBVXdFLGdCQUFnQnZFLFFBQzdCLE9BQU8zSixLQUFLZ0osS0FBS0MsU0FBUywwQkFDNUIsS0FBS1MsVUFBVXdFLGdCQUFnQnJFLEtBQzdCLE9BQU83SixLQUFLZ0osS0FBS0MsU0FBUyx1QkFDNUIsS0FBS1MsVUFBVXdFLGdCQUFnQnBFLFFBQzdCLE9BQU85SixLQUFLZ0osS0FBS0MsU0FBUywwQkFDNUIsS0FBS1MsVUFBVXdFLGdCQUFnQm5FLFNBQzdCLE9BQU8vSixLQUFLZ0osS0FBS0MsU0FBUywyQkFDNUIsUUFDRSxPQUFPLE1BSWIsZUFhRSxHQVhLTSxLQUFLK2pDLFlBQ0ovakMsS0FBS2tELGlCQUNQbEQsS0FBSytDLFNBQVcvQyxLQUFLM0QsTUFBTXRELEtBQUtBLEtBQUswTixnQkFDbkN6RyxLQUFLa0QsZ0JBQ0w3RixPQUVBMkMsS0FBSzRDLFFBQU81QyxLQUFLK0MsU0FBVy9DLEtBQUs0QyxNQUFNdkYsT0FDdkMyQyxLQUFLZ1MsWUFDUGhTLEtBQUsrQyxTQUFXL0MsS0FBSzNELE1BQU10RCxLQUFLQSxLQUFLd1EsUUFBUXZKLEtBQUtnUyxXQUFXM1UsUUFHN0QyQyxLQUFLK2pDLFVBQ1AsT0FDRS9qQyxLQUFLeUUsdUJBQ0xoTyxLQUFLSSxTQUFTRixJQUFJLE9BQVEsOEJBRXRCcUosS0FBSytqQyxVQUFZL2pDLEtBQUt5RSxzQkFBd0IsRUFBVSxFQUNyRHpFLEtBQUsrakMsVUFBWS9qQyxLQUFLeUUsc0JBRXhCekUsS0FBSytqQyxVQUtoQixhQUFjaGdDLEdBQ1ovRCxLQUFLK2pDLFVBQVloZ0MsRUFHbkIsU0FBVUEsR0FDUi9ELEtBQUsrd0MsTUFBUWh0QyxFQUdmLFdBRUUsT0FESy9ELEtBQUsrd0MsUUFBTy93QyxLQUFLK3dDLE1BQVFDLFFBQVFDLE1BQU1DLFNBQVMsS0FDOUNseEMsS0FBSyt3QyxNQUdkLGNBT0UsT0FOaUJ6eEMsR0FBRzBWLEtBQUtnYSxXQUFXOTJCLFFBQU95QyxTQUV2Q3FGLEtBQUtzN0IsT0FBUzNnQyxRQUFRdTBCLFFBQVEsT0FBUSxTQUN0Qy91QixVQUFVZ3hDLFdBQWF4MkMsUUFBUXUwQixRQUFRLE9BQVEsVUFHdEMvMkIsT0FBUyxFQUl4QixxQkFDRSxHQUFLNkgsS0FBSytqQyxVQUNWLE9BQ0UvakMsS0FBS3lFLHVCQUNMaE8sS0FBS0ksU0FBU0YsSUFBSSxPQUFRLDhCQUV0QnFKLEtBQUt5RSxzQkFBd0IsRUFDeEJ6RSxLQUFLK2pDLFVBQVVsbUMsV0FBYW1DLEtBQUt5RSxzQkFBc0I1RyxXQUc5RG1DLEtBQUsrakMsVUFBVWxtQyxXQUFhLElBQU1tQyxLQUFLeUUsc0JBQXNCNUcsV0FFbkRtQyxLQUFLK2pDLFVBQVVsbUMsV0FHL0Isd0JBQ0UsT0FBTyxFQUdULHVCQUNFLE9BQUltQyxLQUFLK0MsU0FDSC9DLEtBQUsrQyxVQUFZLElBQVksR0FDMUI3QyxTQUFTRixLQUFLK0MsVUFFaEIsS0FHVCxvQkFDRSxPQUFJL0MsS0FBSytDLFNBQWlCOUwsS0FBSzZTLE1BQU05SixLQUFLK0MsU0FBVyxHQUM5QyxLQUdULHVCQUNFLE9BQUkvQyxLQUFLK0MsU0FBaUI5TCxLQUFLNlMsTUFBTTlKLEtBQUsrQyxTQUFXLEdBQzlDLEtBR1Qsc0JBQ0UsT0FBSS9DLEtBQUsrQyxTQUFpQi9DLEtBQUsrQyxTQUFXLEdBQUssR0FBSyxJQUM3QyxLQUdULHNCQUNFLFFBQStCLElBQXBCL0MsS0FBSzJDLFdBQ2QsT0FBUTNDLEtBQUsyQyxZQUNYLEtBQUt4QyxVQUFVd0UsZ0JBQWdCcEUsUUFDN0IsT0FBT1AsS0FBS294QyxpQkFDZCxLQUFLanhDLFVBQVV3RSxnQkFBZ0JyRSxLQUM3QixPQUFPTixLQUFLcXhDLGNBQ2QsS0FBS2x4QyxVQUFVd0UsZ0JBQWdCdkUsUUFDN0IsT0FBT0osS0FBS3N4QyxpQkFDZCxLQUFLbnhDLFVBQVV3RSxnQkFBZ0JuRSxTQUM3QixPQUFPUixLQUFLdXhDLGtCQUNkLEtBQUtweEMsVUFBVXdFLGdCQUFnQmdDLFFBQzdCLE9BQVEsRUFDVixRQUNFLE9BQU8zRyxLQUFLK0MsU0FHbEIsT0FBTyxLQUdULHVCQUNFLFFBQStCLElBQXBCL0MsS0FBSzJDLFdBQ2QsT0FBUTNDLEtBQUsyQyxZQUNYLEtBQUt4QyxVQUFVd0UsZ0JBQWdCcEUsUUFDN0IsT0FBTzlKLEtBQUtnSixLQUFLWSxPQUFPLDBCQUMxQixLQUFLRixVQUFVd0UsZ0JBQWdCckUsS0FDN0IsT0FBTzdKLEtBQUtnSixLQUFLWSxPQUFPLHVCQUMxQixLQUFLRixVQUFVd0UsZ0JBQWdCdkUsUUFDN0IsT0FBTzNKLEtBQUtnSixLQUFLWSxPQUFPLDBCQUMxQixLQUFLRixVQUFVd0UsZ0JBQWdCbkUsU0FDN0IsT0FBTy9KLEtBQUtnSixLQUFLWSxPQUFPLDJCQUMxQixLQUFLRixVQUFVd0UsZ0JBQWdCZ0MsUUFDN0IsT0FBT2xRLEtBQUtnSixLQUFLWSxPQUFPLDBCQUMxQixRQUNFLE1BQU8sR0FHYixNQUFPLEdBR1QscUJBQ0UsSUFBSUwsS0FBS2c0QixRQUFULENBQ0EsUUFBb0MsSUFBekJoNEIsS0FBS3d4QyxnQkFBaUMsT0FBT3h4QyxLQUFLd3hDLGdCQUM3RCxHQUFJeHhDLEtBQUt3RSxpQkFBa0IsQ0FDekIsTUFBTWl0QyxTQUFXenhDLEtBQUtpQixNQUFNM0osTUFBUTBJLEtBQUt3RSxpQkFDekMsT0FBSWl0QyxTQUFXLEVBQVUsRUFDckJBLFNBQVcsSUFBWSxJQUNwQkEsU0FFVCxPQUFPenhDLEtBQUtpQixNQUFNM0osT0FHcEIsbUJBQW9CeU0sR0FDbEIvRCxLQUFLd3hDLGdCQUFrQnp0QyxFQUd6Qiw2QkFDRSxPQUFLL0QsS0FBS3dFLGlCQUNOeEUsS0FBS3dFLGlCQUFtQixFQUFVLElBQUl4RSxLQUFLd0UsbUJBQ3hDeEUsS0FBS3dFLGlCQUFpQjNHLFdBRk0sS0FLckMsZUFDRSxJQUFJbUMsS0FBS2c0QixVQUNMaDRCLEtBQUsweEMsYUFDVCxPQUFPMXhDLEtBQUtxeEIsZ0JBQWtCcnhCLEtBQUsyeEMsZ0JBR3JDLGlCQUNFLElBQUkzeEMsS0FBS2c0QixRQUNULE9BQStCLElBQXhCaDRCLEtBQUtxeEIsZUFHZCx1QkFDRSxJQUFJcnhCLEtBQUtnNEIsUUFDVCxPQUFPaDRCLEtBQUtDLGNBQWdCRSxVQUFVRixhQUFhTSxRQUdyRCxhQUNFLElBQUlQLEtBQUtnNEIsVUFDTGg0QixLQUFLMHhDLGFBQ1QsT0FBSTF4QyxLQUFLb2pCLFVBQWtCcGpCLEtBQUsyQyxZQUFjM0MsS0FBS0MsYUFDNUNELEtBQUs0eEMsaUJBQW1CNXhDLEtBQUtxeEIsZ0JBQWtCcnhCLEtBQUtpRCxXQUc3RCxhQUNFLElBQUlqRCxLQUFLZzRCLFVBQ0xoNEIsS0FBSzB4QyxhQUNULE9BQVExeEMsS0FBS3dQLE9BR2YsbUJBQ0UsWUFBZ0MsSUFBbEJ4UCxLQUFLK0MsU0FHckIsZUFDRSxTQUFJL0MsS0FBS3FCLGNBQWdCckIsS0FBS3FCLGFBQWUsR0FJL0MsaUJBQ0UsU0FBSXJCLEtBQUtxQixjQUFnQnJCLEtBQUtxQixhQUFlLEdBSS9DLGtCQUNFLFNBQUlyQixLQUFLcUIsY0FBc0MsSUFBdEJyQixLQUFLcUIsY0FJaEMsbUJBQ0UsT0FBSXJCLEtBQUs2eEMsY0FBc0I3eEMsS0FBSzZ4QyxjQUM3QixLQUdULGlCQUFrQjl0QyxHQUNoQi9ELEtBQUs2eEMsY0FBZ0IzeEMsU0FBUzZELEdBR2hDLFdBQ0UsR0FBSS9ELEtBQUszRCxNQUFPLENBQ2QsR0FBSTJELEtBQUs0QyxNQUFPLE9BQU81QyxLQUFLNEMsTUFBTWxHLEtBQ2xDLEdBQUlzRCxLQUFLNkMsS0FBTSxPQUFPN0MsS0FBSzZDLEtBQUtuRyxLQUNoQyxHQUFJc0QsS0FBS2tELGVBQ1AsT0FBT1ksY0FBYzhwQyx1QkFBdUI1dEMsS0FBS2tELGlCQUFpQmtELE1BRXBFLEdBQUlwRyxLQUFLZ1MsVUFBVyxDQUNsQixHQUF1QixRQUFuQmhTLEtBQUtnUyxVQUFxQixPQUFPdmIsS0FBS2dKLEtBQUtDLFNBQVMsYUFDeEQsR0FBdUIsUUFBbkJNLEtBQUtnUyxVQUFxQixPQUFPdmIsS0FBS2dKLEtBQUtDLFNBQVMsZ0JBRzVELE9BQU8sS0FHVCxZQUNFLEdBQUlNLEtBQUszRCxNQUFPLENBQ2QsR0FBSTJELEtBQUs0QyxNQUFPLE9BQU81QyxLQUFLNEMsTUFBTThoQyxNQUNsQyxHQUFJMWtDLEtBQUs2QyxLQUFNLE9BQU83QyxLQUFLNkMsS0FBS25HLEtBQ2hDLEdBQUlzRCxLQUFLa0QsZUFDUCxPQUFPWSxjQUFjOHBDLHVCQUF1QjV0QyxLQUFLa0QsaUJBQWlCaUQsTUFFcEUsR0FBSW5HLEtBQUtnUyxVQUFXLENBQ2xCLEdBQXVCLFFBQW5CaFMsS0FBS2dTLFVBQXFCLE9BQU92YixLQUFLZ0osS0FBS0MsU0FBUyxhQUN4RCxHQUF1QixRQUFuQk0sS0FBS2dTLFVBQXFCLE9BQU92YixLQUFLZ0osS0FBS0MsU0FBUyxhQUc1RCxPQUFPLEtBR1QsZUFDRSxNQUFNaUQsV0FDSjNDLEtBQUs4eEMsY0FBZ0IzeEMsVUFBVXdFLGdCQUFnQnZFLFNBRTNDRCxVQUFVdXRDLGlCQUFpQjF0QyxLQUFLOHhDLGFBQ2hDN3NDLFNBQ0pqRixLQUFLNnhDLGNBQWdCLEVBQ2pCLElBQUk3eEMsS0FBSzZ4QyxnQkFDVDd4QyxLQUFLNnhDLGNBQWNoMEMsV0FDekIsT0FBT3BILEtBQUtnSixLQUFLWSxPQUNmLGlCQUFrQnNDLFdBQWtCLE9BQUwsS0FDNUIzQyxLQUFLNnhDLGNBQXFCLFFBQUwsS0FFeEIsQ0FBRWx2QyxXQUF3QnNDLFNBQW9CdkksS0FBTXNELEtBQUt0RCxPQUk3RCxhQUNFLFFBQUlzRCxLQUFLdEksS0FTWCxtQkFBb0JrSSxNQUNsQixNQUFNNjJCLFdBQWE3MkIsS0FBS2pHLFVBQVU0akIsU0FBUyxlQUN2QzNkLEtBQ0FBLEtBQUtFLGNBQWMsZ0JBQ2pCdUMsTUFBUSxJQUFJbEMsVUFDbEJSLFNBQVMwYixlQUFlb2IsV0FBWXAwQixPQUNwQyxNQUFNMUgsUUFBVWlGLEtBQUsrVixRQUFRLFlBRTdCLE9BREF0VCxNQUFNMFMsVUFBWXBhLFFBQVVBLFFBQVExQixRQUFROGIsVUFBWSxLQUNqRDFTLE1BR1Qsa0JBQW1CekMsS0FBTTBpQixTQUFVLEdBQ2pDLE1BQU15dkIsU0FBVzV4QyxVQUFVbVYsWUFBWTFWLE1BQ2pDeUQsUUFBVXpELEtBQUszRyxRQUFRK0MsUUFDekI0RCxLQUFLM0csUUFBUStDLFFBQ2I0RCxLQUFLM0csUUFBUW9LLFFBQ1h4QyxRQUFVakIsS0FBSzNHLFFBQVE0SCxRQUN2QnErQixPQUFTdC9CLEtBQUszRyxRQUFRaUssZUFDdEJ2QyxPQUFTZixLQUFLM0csUUFBUTBILE9BQ3RCbUMsUUFBVWxELEtBQUszRyxRQUFRNkosUUFDdkJILFdBQWEvQyxLQUFLM0csUUFBUTBKLFdBRWhDLElBQUlxMEIsV0FDSixHQUFJbjJCLFFBQ0ZtMkIsV0FBYSxJQUFJNzJCLFVBQVVrRCxRQUFTeEMsUUFBU0YsT0FBUW1DLFFBQVNILGdCQUN6RCxLQUFJdThCLE9BTUosT0FMTGxJLFdBQWEsSUFBSTcyQixVQUNqQjYyQixXQUFXMzFCLGFBQWV5QixRQUMxQmswQixXQUFXcjBCLFdBQWFBLFdBQ3hCcTBCLFdBQVczNkIsTUFBUWdILFFBQ25CMnpCLFdBQVc5ekIsZUFBaUJnOEIsT0FFMUI2UyxTQUFTelcsT0FDWHRFLFdBQVdrWCxRQUFVNkQsU0FBUzdELFFBQzlCbFgsV0FBV3NFLEtBQU95VyxTQUFTelcsTUFFekJ5VyxTQUFTNXFDLFNBQVE2dkIsV0FBVzd2QixPQUFTNHFDLFNBQVM1cUMsUUFDbEQ2dkIsV0FBVzZaLFNBQVUsUUFDZjdaLFdBQVdsZ0MsT0FDYndyQixTQUFTMFUsV0FBVzF4QixXQUFVLEVBQU0xRixNQUcxQyxZQUNFLE9BQUtJLEtBQUszRCxNQUNIOUIsV0FBVzZCLGdCQUFnQjRELEtBQUsxRCxVQURmLEtBSTFCLFVBQVd5SCxHQUVULEdBREEvRCxLQUFLMUQsU0FBV3lILEVBQ1AsTUFBTEEsRUFBSixDQUtBLEdBQUlBLGFBQWF3QyxNQU9mLE9BTEF2RyxLQUFLK3FCLE9BQVNobkIsRUFDZC9ELEtBQUsrcUIsT0FBT3B1QixNQUFRcUQsS0FBSzNELE1BQU1LLFVBQzNCcUgsRUFBRXZILE9BQVN1SCxFQUFFdkgsTUFBTUMsT0FBU3NILEVBQUV2SCxNQUFNQyxNQUFNakIsR0FDNUN3RSxLQUFLMUQsU0FBVyxHQUFHeUgsRUFBRXZILE1BQU1DLE1BQU1qQixNQUFNdUksRUFBRXZILE1BQU1oQixLQUMxQ3dFLEtBQUsxRCxTQUFXeUgsRUFBRXZJLElBSTNCLEdBQUl1SSxFQUFFL0wsU0FBUyxLQUFmLENBQ0UsTUFBTytELFFBQVNDLFNBQVcrSCxFQUFFOUgsTUFBTSxLQUNuQyxHQUFnQixVQUFaRixRQUNGaUUsS0FBSytxQixPQUFTdDBCLEtBQUt5RixPQUFPQyxPQUFPSCxTQUNqQ2dFLEtBQUsrcUIsT0FBT3B1QixNQUFRcUQsS0FBSytxQixPQUFPcnVCLFNBQzNCLENBQ0wsTUFBTUQsTUFBUWhHLEtBQUtzSCxPQUFPcEgsSUFBSW9GLFNBQzlCLElBQUtVLE1BQU8sT0FDWixNQUFNdUIsVUFBWXZCLE1BQU13QixvQkFBb0IsUUFBU2pDLFNBQ3JELElBQUtnQyxVQUFXLE9BQ2hCLE1BQU14QixNQUFRLElBQUkwQixNQUFNRixXQUN4QmdDLEtBQUsrcUIsT0FBU3Z1QixNQUFNSCxNQUNwQjJELEtBQUsrcUIsT0FBT3B1QixNQUFRSCxNQUFNRSxXQUs5QnNELEtBQUsrcUIsT0FBU3QwQixLQUFLeUYsT0FBT3ZGLElBQUlvTixHQUM5Qi9ELEtBQUszRCxNQUFNTSxNQUFRcUQsS0FBSzNELE1BQU1LLFVBaEM1QnNELEtBQUsrcUIsT0FBU2huQixFQW1DbEIsd0JBQ0UsR0FBSS9ELEtBQUtneUMsa0JBQW1CLE9BQU8sS0FDbkMsR0FBSWh5QyxLQUFLMHhDLGFBQWMsT0FBTyxLQUM5QixHQUFJMXhDLEtBQUtDLGNBQWdCRCxLQUFLMkMsV0FBWSxDQUN4QyxNQUFNc3ZDLE1BQVEsR0FDZCxJQUNFLElBQUkxMUIsTUFBUSxFQUNaQSxNQUFRdmMsS0FBS0MsYUFBZUQsS0FBSzJDLFdBQWEsRUFDOUM0WixRQUVBMDFCLE1BQU1sNkMsS0FBS2lJLEtBQUtpRCxXQUFhLFFBQVUsUUFFekMsTUFBTWl2QyxZQUFjejdDLEtBQUtnSixLQUFLWSxPQUFPLHVCQUF3QixDQUMzRGhELE1BQU8yQyxLQUFLQyxhQUFlRCxLQUFLMkMsV0FBYSxJQUUvQyxNQUFPLENBQ0xtZ0IsU0FBUyxFQUNUcXZCLFNBQVVueUMsS0FBS2lELFdBQWEsV0FBYSxVQUN6Q3UzQixLQUFNMFgsWUFDTkQsT0FFRyxDQUNMLE1BQU1BLE1BQVEsR0FDUmh5QyxhQUFlRCxLQUFLZ0QsVUFBWSxFQUFJaEQsS0FBS0MsYUFDL0MsSUFBSyxJQUFJc2MsTUFBUSxFQUFHQSxNQUFRdmMsS0FBSzJDLFdBQWExQyxhQUFjc2MsUUFDMUQwMUIsTUFBTWw2QyxLQUFLaUksS0FBS2dELFNBQVcsUUFBVSxVQUV2QyxNQUFNb3ZDLFlBQWMzN0MsS0FBS2dKLEtBQUtZLE9BQU8sd0JBQXlCLENBQzVEaEQsTUFBTzJDLEtBQUsyQyxXQUFhMUMsZUFFM0IsTUFBTyxDQUNMNmlCLFNBQVMsRUFDVHF2QixTQUFVbnlDLEtBQUtnRCxTQUFXLFNBQVcsVUFDckN3M0IsS0FBTTRYLFlBQ05ILFFBS04sY0FJRSxZQUhJNXNDLElBQWNyRixLQUFLc04sV0FDckJ0TixLQUFLc04sU0FBNkIsY0FBbEJ0TixLQUFLMUosVUFFaEIwSixLQUFLc04sU0FHZCxZQUFhdkosR0FDWC9ELEtBQUtzTixTQUFXdkosRUFHbEIsd0JBQ0UsUUFDRS9ELEtBQUtxeUMsc0JBQ0xyeUMsS0FBS3N5QyxxQkFDTHR5QyxLQUFLdXlDLGtCQUNMdnlDLEtBQUt3eUMsc0JBSUFyeUMsVUFBVXdFLGdCQUFnQmdDLFVBQVkzRyxLQUFLMkMsV0FHcEQsZUFFRSxPQURLM0MsS0FBS3VOLFlBQVd2TixLQUFLdU4sVUFBWTlXLEtBQUtJLFNBQVNGLElBQUksT0FBUSxhQUN6RHFKLEtBQUt1TixVQUdkLGFBQWN4SixJQUNGLElBQU5BLElBQWEvRCxLQUFLdU4sVUFBWTlXLEtBQUtJLFNBQVNGLElBQUksT0FBUSxhQUM1RHFKLEtBQUt1TixVQUFZeEosRUFHbkIsVUFBV0EsR0FDVC9ELEtBQUt5eUMsT0FBU3p5QyxLQUFLMHlDLGVBQWUzdUMsR0FDbEMvRCxLQUFLYSxRQUFVa0QsRUFHakIsU0FBVUEsR0FDUi9ELEtBQUs0cEMsTUFBUTVwQyxLQUFLMHlDLGVBQWUzdUMsR0FDUixXQUFyQi9ELEtBQUs0cEMsT0FBTzN1QyxLQUNkK0UsS0FBS1csT0FBU29ELEdBRWQvRCxLQUFLNHBDLFdBQVF2a0MsRUFDYnJGLEtBQUtXLFlBQVMwRSxHQUlsQnF0QyxlQUFnQjN1QyxHQUNkLE9BQVMsTUFBTEEsRUFBa0IsS0FDbEJBLGFBQWFrcUMsS0FBYWxxQyxFQUMxQi9ELEtBQUsrcUIsT0FBZS9xQixLQUFLK3FCLE9BQU9ucUIsTUFBTWpLLElBQUlvTixHQUN2Q3ROLEtBQUttSyxNQUFNakssSUFBSW9OLEdBR3hCLFlBQ0UsR0FBSy9ELEtBQUsrcUIsUUFBVy9xQixLQUFLK3FCLFFBQVF2dkIsSUFZM0IsR0FBcUMsV0FBakN3RSxLQUFLK3FCLE9BQU9ybEIsWUFBWWhKLEtBQW1CLENBQ3BELE1BQU1MLE1BQVEsSUFBSXk4QixTQUFTOTRCLEtBQUsrcUIsUUFDaEMvcUIsS0FBSytxQixPQUFTMXVCLFlBWGQsR0FGSTJELEtBQUsxRCxXQUFVMEQsS0FBSytxQixPQUFTeHdCLFdBQVdnQyxnQkFBZ0J5RCxLQUFLMUQsV0FDN0QwRCxLQUFLcUQsVUFBU3JELEtBQUsrcUIsT0FBU3h3QixXQUFXZ0MsZ0JBQWdCeUQsS0FBS3FELFdBQzNEckQsS0FBSytxQixPQUNSLE1BQU8sQ0FDTDRuQixTQUFTLEVBQ1RqMkMsS0FBTXNELEtBQUtvbkIsVUFBWXBuQixLQUFLb25CLGVBQVkvaEIsRUFDeEM3SixRQUFJNkosRUFDSmhILElBQUssd0RBQ0x1MEMsU0FBVSx5REFPaEIsT0FBTzV5QyxLQUFLK3FCLE9BR2QsWUFrQkUsT0FqQksvcUIsS0FBS3l5QyxRQUFVenlDLEtBQUthLFVBQ3ZCYixLQUFLeXlDLE9BQVN6eUMsS0FBSzNELE9BQU91RSxNQUFNakssSUFBSXFKLEtBQUthLFdBRXRDYixLQUFLeXlDLFFBQVV6eUMsS0FBSzZDLE1BQ25CN0MsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLNkosUUFDbEI1QyxLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUs2SixNQUFNcWlCLEtBQUt6cEIsS0FBT3dFLEtBQUs2eUMsZUFDN0M3eUMsS0FBS3l5QyxPQUFTenlDLEtBQUsrcUIsT0FBT25xQixNQUFNakssSUFBSXFKLEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBSzZKLE1BQU1xaUIsS0FBS3pwQixJQUVuRXdFLEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBSzZKLE1BQU1zaUIsV0FBVzFwQixJQUNyQ3dFLEtBQUs2eUMsaUJBRUw3eUMsS0FBS3l5QyxPQUFTenlDLEtBQUsrcUIsT0FBT25xQixNQUFNakssSUFDOUJxSixLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUs2SixNQUFNc2lCLFdBQVcxcEIsTUFLdEN3RSxLQUFLeXlDLE9BR2QsV0FJRSxPQUhLenlDLEtBQUs0cEMsT0FBUzVwQyxLQUFLVyxRQUFVWCxLQUFLM0QsUUFDckMyRCxLQUFLNHBDLE1BQVE1cEMsS0FBSzNELE1BQU11RSxNQUFNakssSUFBSXFKLEtBQUtXLFNBRWxDWCxLQUFLNHBDLE1BR2Qsd0JBQ0UsT0FBT256QyxLQUFLSSxTQUFTRixJQUFJLE9BQVEscUJBR25DLCtCQUNFLE9BQU9GLEtBQUtJLFNBQVNGLElBQUksT0FBUSw0QkFHbkMsOEJBQ0UsT0FBT3FKLEtBQUs4eUMsbUJBQXFCOXlDLEtBQUsreUMseUJBR3hDLDhCQUNFLE9BQVEveUMsS0FBSzh5QyxvQkFBc0I5eUMsS0FBSyt5Qyx5QkFHMUMsWUFDRSxPQUFJL3lDLEtBQUs0QyxNQUFjNUMsS0FBSzRDLE1BQU12RSxJQUM5QjJCLEtBQUs2QyxLQUFhN0MsS0FBSzZDLEtBQUt4RSxTQUFoQyxFQUlGLFdBQ0UsT0FBTzJCLEtBQUtnekMsaUJBQWlCMStCLFVBRy9CLHlCQUNFLE9BQU83ZCxLQUFLSSxTQUFTRixJQUFJLE9BQVEsc0JBR25DcThDLGVBQWdCbDJCLFFBQVUsTUFDeEIsTUFBTS9qQixLQUFPLENBQ1hDLElBQUssQ0FBQyxZQUFhLGFBQWF1MEIsT0FBT3pRLFNBQ3ZDN2pCLFFBQVMsQ0FBRW9KLE1BQU8sU0FDbEJnc0IsS0FBTXJ1QixLQUFLaXpDLE1BQ1AscUNBQXFDanpDLEtBQUtpekMsaUJBQzFDLDhCQUNKejZDLE1BQU93SCxLQUFLK08sU0FHUnBNLFdBQWF4QyxVQUFVdXRDLGlCQUFpQjF0QyxLQUFLOHhDLGFBQzdDNTRDLE1BQVF6QyxLQUFLZ0osS0FBS1ksT0FDdEIsaUJBQWtCTCxLQUFLOHhDLFlBQW1CLE9BQUwsS0FDbEM5eEMsS0FBSzZ4QyxjQUFxQixRQUFMLEtBRXhCLENBQ0VsdkMsV0FDQXNDLFNBQVVqRixLQUFLNnhDLGNBQ2ZuMUMsS0FBTXNELEtBQUt0RCxPQUlUbEQsRUFBSUMsU0FBU0MsY0FBYyxLQU9qQyxPQU5BRixFQUFFTixNQUFRQSxNQUNWTSxFQUFFRyxVQUFVQyxPQUFPYixLQUFLQyxLQUN4QlEsRUFBRVMsVUFBWSxHQUFHbEIsS0FBS1AsTUFBUSxtQ0FBcUMsS0FDakVPLEtBQUtzMUIsT0FDSnJ1QixLQUFLdEQsT0FFRGxELEVBR1QsV0FBWXNKLFFBQVUsS0FBTUgsV0FBYSxNQUNuQ0csVUFBUzlDLEtBQUtxQixhQUFleUIsU0FDN0JILGFBQVkzQyxLQUFLMkMsV0FBYUEsWUFDN0IzQyxLQUFLZzRCLGVBQWVoNEIsS0FBS2lTLFdBR2hDLGVBQWUsV0FDQTlSLFVBQVV3RSxnQkFBZ0J2RSxRQUFPLGFBQy9CLEtBQUksU0FDUixLQUFJLGVBQ0UsS0FBSSxVQUNULEtBQUksU0FDTCxFQUFDLE1BQ0osS0FBSSxpQkFDTyxFQUFDLHNCQUNJLEVBQUMsWUFDWCxLQUFJLFVBQ04sTUFDVixJQUNGLE1BQU1pQyxNQUFRLElBQUlsQyxVQWtCbEIsT0FqQkFrQyxNQUFNTSxXQUFhQSxXQUNmdEIsZUFBY2dCLE1BQU1oQixhQUFlQSxjQUNuQ21ELG1CQUFrQm5DLE1BQU1tQyxpQkFBbUJBLGtCQUMzQ0Msd0JBQ0ZwQyxNQUFNb0Msc0JBQXdCQSx1QkFFNUJrN0IsY0FBYXQ5QixNQUFNczlCLFlBQWNBLGFBQ2pDcmpDLFdBQVUrRixNQUFNaEcsTUFBUUMsVUFDeEI4cUIsWUFBVy9rQixNQUFNK2tCLFVBQVlBLFdBQzVCcGpCLE1BQU1wRyxPQUFPbUYsYUFBWVYsTUFBTVUsU0FBV25GLE9BQU9tRixXQUNsRFYsTUFBTWhHLFFBQVVnRyxNQUFNaEcsTUFBTXMyQyxVQUUxQi92QyxNQUFPUCxNQUFNTyxNQUFRQSxNQUVoQk0sZUFBZ0JiLE1BQU1hLGVBQWlCQSxlQUN2QzhPLFlBQVczUCxNQUFNMlAsVUFBWUEsWUFFakMzUCxNQUdULHlCQUEwQjRELEtBQU1uRCxRQUFVLEtBQU1ILFdBQWEsTUFDdkRHLFVBQVM5QyxLQUFLcUIsYUFBZXlCLFNBQzdCSCxhQUFZM0MsS0FBSzJDLFdBQWFBLFlBQ2xDM0MsS0FBS2tELGVBQWlCK0MsS0FDakJqRyxLQUFLZzRCLGVBQWVoNEIsS0FBS2lTLFdBR2hDLG9CQUFxQml4QixPQUFRcGdDLFFBQVUsS0FBTUgsV0FBYSxNQUNwREcsVUFBUzlDLEtBQUtxQixhQUFleUIsU0FDN0JILGFBQVkzQyxLQUFLMkMsV0FBYUEsWUFDbEMzQyxLQUFLZ1MsVUFBWWt4QixPQUNabGpDLEtBQUtnNEIsZUFBZWg0QixLQUFLaVMsV0FHaEMsZ0JBQWlCaWhDLElBQUtwd0MsUUFBVSxLQUFNSCxXQUFhLE1BQzdDRyxVQUFTOUMsS0FBS3FCLGFBQWV5QixTQUM3QkgsYUFBWTNDLEtBQUsyQyxXQUFhQSxZQUNsQzNDLEtBQUsrQyxTQUFXbXdDLElBQ1hsekMsS0FBS2c0QixlQUFlaDRCLEtBQUtpUyxXQUdoQyxlQUFnQnJYLFFBQVUsSUFDeEJvRixLQUFLdEksS0FDSGtELFFBQVE5RCxZQUNEVixTQUFTVSxLQUFLa0osS0FBS3FCLGFBQWNyQixLQUFLMUosU0FBVTBKLEtBQUsrTyxTQUN6RG5VLFFBQVFnM0IsUUFBUUssWUFBWUMsS0FBSyxDQUFFQyxJQUFLeDZCLE9BQU95NkIsT0FBTzE2QixPQUV2RGtELFFBQVFzWCxnQkFDSjliLFNBQVMwYyxlQUFlOVMsS0FBS3RJLEtBQUtaLE1BRzFDa0osS0FBS2lCLE1BQVEsQ0FDWHpKLEtBQU0sR0FDTkgsS0FBTSxDQUNKZ0csTUFBTzJDLEtBQUt0SSxLQUFLTCxLQUFLQyxPQUV4QkEsTUFBTzBJLEtBQUt0SSxLQUFLSixNQUNqQjY3QyxVQUFXbnpDLEtBQUt0SSxLQUFLSixNQUFRMEksS0FBS3RJLEtBQUtMLEtBQUtDLE1BQzVDOEosV0FBWXBCLEtBQUtxQixhQUNqQkMsTUFBT3JLLEtBQUtDLElBQUk4SSxLQUFLcUIsY0FDckJFLFVBQ0V2QixLQUFLcUIsYUFBZSxFQUNoQjVLLEtBQUtnSixLQUFLWSxPQUFPLDRCQUNqQjVKLEtBQUtnSixLQUFLWSxPQUFPLDBCQUN2QnNDLFdBQVkzQyxLQUFLMkMsWUFHbkIsTUFBTTFLLElBQStCLElBQXpCK0gsS0FBS3RJLEtBQUtMLEtBQUtDLE1BQWMsSUFBTSxHQUN6Q2MsSUFBK0IsSUFBekI0SCxLQUFLdEksS0FBS0wsS0FBS0MsTUFBYyxHQUFLLEVBQzlDLElBQUlxSyxTQUFXM0IsS0FBS3RJLEtBQUtKLE1BQVEwSSxLQUFLdEksS0FBS0wsS0FBS0MsTUFFaEQsSUFBSyxJQUFJMlYsRUFBSSxFQUFHQSxFQUFJak4sS0FBS3RJLEtBQUtGLEtBQUtELFFBQVFZLE9BQVE4VSxJQUFLLENBQ3RELE1BQU12TCxJQUFNLEdBQ1pBLElBQUlyRSxNQUFRMkMsS0FBS3RJLEtBQUtGLEtBQUtELFFBQVEwVixHQUMvQnZMLElBQUlyRSxRQUFVc0UsVUFDaEJBLFNBQVcsSUFDWEQsSUFBSUMsVUFBVyxFQUNYM0IsS0FBS2lCLE1BQU1HLFVBQ2JNLElBQUlFLE9BQVEsRUFDWkYsSUFBSUcsT0FBUSxJQUVaSCxJQUFJRyxPQUFRLEVBQ1pILElBQUlFLE9BQVEsS0FHVkYsSUFBSXJFLFFBQVVwRixJQUFLeUosSUFBSUUsT0FBUSxFQUM5QkYsSUFBSUUsT0FBUSxFQUNiRixJQUFJckUsUUFBVWpGLElBQUtzSixJQUFJRyxPQUFRLEVBQzlCSCxJQUFJRyxPQUFRLEdBR25CN0IsS0FBS2lCLE1BQU16SixLQUFLTyxLQUFLMkosS0FFdkIxQixLQUFLODNCLGVBR1AscUJBa0VFLE9BakVBOTNCLEtBQUs4d0MsVUFBWTl3QyxLQUFLZ3lDLGtCQUVsQmh5QyxLQUFLd3lDLHNCQUNQeHlDLEtBQUsyQyxXQUFheEMsVUFBVXdFLGdCQUFnQnZFLFNBRTFDSixLQUFLdXlDLG1CQUFrQnZ5QyxLQUFLMkMsV0FBYXhDLFVBQVV3RSxnQkFBZ0JyRSxNQUNuRU4sS0FBS3N5QyxzQkFDUHR5QyxLQUFLMkMsV0FBYXhDLFVBQVV3RSxnQkFBZ0JwRSxTQUUxQ1AsS0FBS3F5Qyx1QkFDUHJ5QyxLQUFLMkMsV0FBYXhDLFVBQVV3RSxnQkFBZ0JuRSxVQUc5Q1IsS0FBS296QyxjQUEyQyxJQUEzQnB6QyxLQUFLaUIsTUFBTXpKLEtBQUtXLE9BRXJDNkgsS0FBS3F6QyxTQUFVLEVBQ2ZyekMsS0FBS3N6QyxrQkFBbUIsRUFDeEJ0ekMsS0FBS3V6QyxTQUFVLEVBQ2Z2ekMsS0FBS3dwQyxRQUFTLEVBQ2R4cEMsS0FBS3d6QyxhQUFjLEVBQ2Z4ekMsS0FBSzB4QyxjQUNQMXhDLEtBQUtnYixVQUFXLEVBQ2hCaGIsS0FBS3FrQyxVQUFXLEdBQ08sTUFBZHJrQyxLQUFLM0QsTUFDZDJELEtBQUtxekMsU0FBVSxHQUVYcnpDLEtBQUtrRCxpQkFDUGxELEtBQUtzekMsa0JBQW1CLEVBQ3hCdHpDLEtBQUsrQyxTQUFXL0MsS0FBSzNELE1BQU10RCxLQUFLQSxLQUFLME4sZ0JBQ25DekcsS0FBS2tELGdCQUNMN0YsT0FHQTJDLEtBQUs0QyxRQUNQNUMsS0FBS3V6QyxTQUFVLEVBQ2Z2ekMsS0FBSytDLFNBQVcvQyxLQUFLNEMsTUFBTXZGLE9BR3pCMkMsS0FBS2dTLFlBQ1BoUyxLQUFLd3pDLGFBQWMsRUFDbkJ4ekMsS0FBSytDLFNBQVcvQyxLQUFLM0QsTUFBTXRELEtBQUtBLEtBQUt3USxRQUFRdkosS0FBS2dTLFdBQVczVSxRQUk1RDJDLEtBQUtvakIsV0FBY3BqQixLQUFLMHhDLGVBQ3ZCMXhDLEtBQUtxeEIsZ0JBQWtCcnhCLEtBQUsrQyxXQUM5Qi9DLEtBQUtDLGFBQWVFLFVBQVVGLGFBQWFHLFNBRXpDSixLQUFLcXhCLGdCQUFrQnJ4QixLQUFLcXhDLGdCQUM5QnJ4QyxLQUFLQyxhQUFlRSxVQUFVRixhQUFhSyxNQUV6Q04sS0FBS3F4QixnQkFBa0JyeEIsS0FBS294QyxtQkFDOUJweEMsS0FBS0MsYUFBZUUsVUFBVUYsYUFBYU0sU0FFekNQLEtBQUtxeEIsZUFBaUJyeEIsS0FBSytDLFdBQzdCL0MsS0FBS0MsYUFBZUUsVUFBVUYsYUFBYVMsU0FFakIsSUFBeEJWLEtBQUtxeEIsaUJBQ1ByeEIsS0FBS0MsYUFBZUUsVUFBVUYsYUFBYU8sVUFFekNSLEtBQUsyeEMsaUJBQW1CM3hDLEtBQUtxeEIsaUJBQy9CcnhCLEtBQUtDLGFBQWVFLFVBQVVGLGFBQWFRLFNBSXZDVCxLQUFLQyxjQUNYLEtBQUtFLFVBQVVGLGFBQWFHLFFBQzFCSixLQUFLeXpDLFdBQWFoOUMsS0FBS2dKLEtBQUtZLE9BQU8sdUJBQ25DLE1BQ0YsS0FBS0YsVUFBVUYsYUFBYUssS0FDMUJOLEtBQUt5ekMsV0FBYWg5QyxLQUFLZ0osS0FBS1ksT0FBTyxvQkFDbkMsTUFDRixLQUFLRixVQUFVRixhQUFhTSxRQUMxQlAsS0FBS3l6QyxXQUFhaDlDLEtBQUtnSixLQUFLWSxPQUFPLHVCQUNuQyxNQUNGLEtBQUtGLFVBQVVGLGFBQWFPLFNBQzFCUixLQUFLeXpDLFdBQWFoOUMsS0FBS2dKLEtBQUtZLE9BQU8sd0JBQ25DLE1BQ0YsS0FBS0YsVUFBVUYsYUFBYVEsT0FDMUJULEtBQUt5ekMsV0FBYWg5QyxLQUFLZ0osS0FBS1ksT0FBTyxlQUNuQyxNQUNGLEtBQUtGLFVBQVVGLGFBQWFTLFFBQzFCVixLQUFLeXpDLFdBQWFoOUMsS0FBS2dKLEtBQUtZLE9BQU8sZ0JBOEN2QyxHQXZDSUwsS0FBS2d5QyxrQkFDUGh5QyxLQUFLMHpDLGdCQUFrQixHQUNiMXpDLEtBQUsweEMsZUFDZjF4QyxLQUFLMHpDLGdCQUFrQmo5QyxLQUFLZ0osS0FBS1ksT0FBTyx1QkFBd0IsQ0FDOURxekMsZ0JBQWlCMXpDLEtBQUswdEMsb0JBSUUsSUFBeEIxdEMsS0FBS3F4QixpQkFDUHJ4QixLQUFLQyxhQUFlRSxVQUFVRixhQUFhTyxVQUV4Q1IsS0FBS29qQixXQUFjcGpCLEtBQUs4d0MsV0FBYzl3QyxLQUFLMHhDLGVBQzlDMXhDLEtBQUtvUCxVQUFZcFAsS0FBS3NQLE9BQ3RCdFAsS0FBS2tiLFVBQVlsYixLQUFLd1AsUUFHeEJ4UCxLQUFLZ29CLGdCQUFpQixFQUNsQmhvQixLQUFLZ0QsV0FBVWhELEtBQUtDLGFBQWVFLFVBQVVGLGFBQWFRLFFBRTFEVCxLQUFLNkMsT0FDUDdDLEtBQUt3cEMsUUFBUyxFQUNWeHBDLEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS3MxQyxhQUVwQnp3QyxPQUFPb0MsS0FBS3F4QixpQkFBbUJ6ekIsT0FBT29DLEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS3MxQyxlQUUxRHJ1QyxLQUFLZ29CLGdCQUFpQixFQUN0QmhvQixLQUFLMnpDLGVBQWlCbDlDLEtBQUtnSixLQUFLWSxPQUFPLG1CQUFvQixDQUN6RHMxQixTQUFVMzFCLEtBQUs2QyxLQUFLbkcsYUFFaEJzRCxLQUFLNkMsS0FBSyt3QyxlQUFlNXJDLFNBQVN1bkIsTUFBTThlLGVBS3BEcnVDLEtBQUs0d0MsY0FBYzV3QyxLQUFLNEMsT0FBUTVDLEtBQUs0QyxNQUFNZ3VDLGNBQ2hCLE1BQXZCNXdDLEtBQUtrRCxpQkFBd0JsRCxLQUFLNHdDLGFBQWMsR0FDaEQ1d0MsS0FBS2dELFdBQVVoRCxLQUFLNHdDLGFBQWMsR0FDbEM1d0MsS0FBS2diLFdBQVVoYixLQUFLNHdDLGFBQWMsSUFFakM1d0MsS0FBS3FrQyxVQUFZcmtDLEtBQUszRCxNQUFPLENBQ2hDLEtBQ0cyRCxLQUFLb2pCLFdBQ0xwakIsS0FBS3dQLFFBQ0x4UCxLQUFLZ0QsVUFDTmhELEtBQUsyQyxhQUFleEMsVUFBVXdFLGdCQUFnQm5FLFVBQzdDUixLQUFLZ3lDLHFCQUVGaHlDLEtBQUs0QyxPQUFTNUMsS0FBS2tELGdCQUFnQixDQUNyQyxNQUFNaEIsV0FBYWxDLEtBQUtxeEIsZUFBaUJyeEIsS0FBSzR4QyxnQkFDMUM1eEMsS0FBSzNELE1BQU00aEMsS0FBTy83QixhQUNwQmxDLEtBQUs2ekMsZUFBZ0IsRUFDckI3ekMsS0FBS2tDLFdBQWFBLFdBQ2xCbEMsS0FBS21DLGNBQWdCMUwsS0FBS2dKLEtBQUtZLE9BQU8saUJBQWtCLENBQ3REK0IsZ0JBQWlCRixjQU16QixJQUFLbEMsS0FBS29qQixZQUNScGpCLEtBQUsrQixnQkFBa0IsSUFJcEIvQixLQUFLNndDLFNBQ2EsUUFBbkI3d0MsS0FBS2dTLFdBQ2MsUUFBbkJoUyxLQUFLZ1MsV0FDTCxDQUNBLEdBQ0VoUyxLQUFLZ3lDLG1CQUNMaHlDLEtBQUtxeEIsZUFBaUJyeEIsS0FBS3N4QyxpQkFDM0IsQ0FDQSxNQUFNd0MsVUFBWSxHQUNsQkEsVUFBVWp0QixlQUFpQnB3QixLQUFLZ0osS0FBS0MsU0FDbkMsMEJBRUZvMEMsVUFBVW54QyxXQUFheEMsVUFBVXdFLGdCQUFnQnZFLFFBQ2pEMHpDLFVBQVVDLFlBQWMvekMsS0FBS3F4QixlQUFpQnJ4QixLQUFLc3hDLGlCQUNuRHdDLFVBQVVELGNBQWdCQyxVQUFVQyxhQUFlL3pDLEtBQUszRCxNQUFNNGhDLEtBQzFENlYsVUFBVUMsYUFBZS96QyxLQUFLM0QsTUFBTTRoQyxNQUN0Q2orQixLQUFLK0IsZ0JBQWdCaEssS0FBSys3QyxXQUk5QixHQUNFOXpDLEtBQUsyQyxZQUFjeEMsVUFBVXdFLGdCQUFnQnZFLFNBQzdDSixLQUFLcXhCLGVBQWlCcnhCLEtBQUtxeEMsY0FDM0IsQ0FDQSxNQUFNeUMsVUFBWSxHQUNsQkEsVUFBVWp0QixlQUFpQnB3QixLQUFLZ0osS0FBS0MsU0FBUyx1QkFDOUNvMEMsVUFBVW54QyxXQUFheEMsVUFBVXdFLGdCQUFnQnJFLEtBQ2pEd3pDLFVBQVVDLFlBQWMvekMsS0FBS3F4QixlQUFpQnJ4QixLQUFLcXhDLGNBQ25EeUMsVUFBVUQsY0FBZ0JDLFVBQVVDLGFBQWUvekMsS0FBSzNELE1BQU00aEMsS0FDMUQ2VixVQUFVQyxhQUFlL3pDLEtBQUszRCxNQUFNNGhDLE1BQ3RDaitCLEtBQUsrQixnQkFBZ0JoSyxLQUFLKzdDLFdBSTlCLEdBQ0U5ekMsS0FBSzJDLFlBQWN4QyxVQUFVd0UsZ0JBQWdCckUsTUFDN0NOLEtBQUtxeEIsZUFBaUJyeEIsS0FBS294QyxpQkFDM0IsQ0FDQSxNQUFNMEMsVUFBWSxHQUNsQkEsVUFBVWp0QixlQUFpQnB3QixLQUFLZ0osS0FBS0MsU0FDbkMsMEJBRUZvMEMsVUFBVW54QyxXQUFheEMsVUFBVXdFLGdCQUFnQnBFLFFBQ2pEdXpDLFVBQVVDLFlBQWMvekMsS0FBS3F4QixlQUFpQnJ4QixLQUFLb3hDLGlCQUNuRDBDLFVBQVVELGNBQWdCQyxVQUFVQyxhQUFlL3pDLEtBQUszRCxNQUFNNGhDLEtBQzFENlYsVUFBVUMsYUFBZS96QyxLQUFLM0QsTUFBTTRoQyxNQUN0Q2orQixLQUFLK0IsZ0JBQWdCaEssS0FBSys3QyxZQU1sQzl6QyxLQUFLZzBDLG1CQUFxQmgwQyxLQUFLK0IsZ0JBQWdCNUosT0FBUyxFQUNwRDZILEtBQUtnRCxXQUFVaEQsS0FBS2cwQyxvQkFBcUIsR0FtQi9DLEdBaEJBaDBDLEtBQUtpMEMsbUJBQ0hqMEMsS0FBSzRDLFFBQVU1QyxLQUFLNEMsTUFBTTdKLEtBQUtBLEtBQUtzckIsV0FBV3hOLFdBRy9DN1csS0FBS3dQLFFBQ0x4UCxLQUFLcUIsY0FBZ0IsR0FDckJyQixLQUFLNEMsUUFDSjVDLEtBQUs0QyxNQUFNN0osS0FBS0EsS0FBS3NyQixXQUFXeE4sVUFDaEM3VyxLQUFLb2pCLFdBQ0xwakIsS0FBS2swQyxRQUNMbDBDLEtBQUsrTyxTQUNML08sS0FBSzh3QyxXQUVOOXdDLEtBQUtrNEIsc0JBR0hsNEIsS0FBS21ILE9BQVEsQ0FDZixNQUFNQSxhQUFlZ3RDLFNBQVNuMEMsS0FBS21ILFFBQy9CQSxRQUFVLGVBQWdCQSxjQUN0QkEsT0FBT3FvQixXQUFXeHZCLEtBQUtvMEMsaUJBTW5DdHpDLGVBQ0UsR0FBSXJLLEtBQUtDLFFBQVFDLElBQUksaUJBQWlCQyxPQUFRLENBQzVDLE1BQU1tSyxZQUFjLEdBQ3BCLElBQUssTUFBTUMsYUFBYWhCLEtBQUtpQixNQUFNekosS0FDakN1SixZQUFZaEosS0FBeUIsTUFBcEJpSixVQUFVM0QsTUFBZ0IsRUFBSTJELFVBQVUzRCxNQUFRLElBRW5FMEQsWUFBWWhKLEtBQUtpSSxLQUFLaUIsTUFBTTVKLEtBQUtnRyxPQUVqQyxNQUFNNkQsU0FBVyxDQUNmL0gsUUFBUyxHQUFHNkcsS0FBS2lCLE1BQU16SixLQUFLVyxrQkFDNUJaLFFBQVN3SixZQUNUeEksUUFBUyxLQUNUQyxPQUFPLEdBRVQvQixLQUFLa0MsT0FBT3dJLEtBQUtELFdBSXJCLGVBQ0UsSUFBSWl4QyxTQUFXLEdBZWYsT0FkSW55QyxLQUFLa2IsWUFBV2kzQixTQUFXLFdBQzNCbnlDLEtBQUtvUCxZQUFXK2lDLFNBQVcsV0FDM0JueUMsS0FBS2lELGFBQWVqRCxLQUFLb1AsWUFBVytpQyxTQUFXLG9CQUMvQ255QyxLQUFLZ0QsV0FBYWhELEtBQUtrYixZQUFXaTNCLFNBQVcsa0JBQzdDaHlDLFVBQVVGLGFBQWFHLFVBQVlKLEtBQUtDLGVBQzFDa3lDLFVBQVksb0JBRVZoeUMsVUFBVUYsYUFBYUssT0FBU04sS0FBS0MsZUFDdkNreUMsVUFBWSxpQkFFVmh5QyxVQUFVRixhQUFhTSxVQUFZUCxLQUFLQyxlQUMxQ2t5QyxVQUFZLG9CQUdQQSxTQUdULG1CQUNFLE1BQU1BLFNBQVcsR0FlakIsT0FkSW55QyxLQUFLa2IsV0FBV2kzQixTQUFTcDZDLEtBQUssV0FDOUJpSSxLQUFLb1AsV0FBVytpQyxTQUFTcDZDLEtBQUssV0FDOUJpSSxLQUFLaUQsYUFBZWpELEtBQUtvUCxXQUFXK2lDLFNBQVNwNkMsS0FBSyxVQUFXLFlBQzdEaUksS0FBS2dELFdBQWFoRCxLQUFLa2IsV0FBV2kzQixTQUFTcDZDLEtBQUssVUFBVyxVQUMzRG9JLFVBQVVGLGFBQWFHLFVBQVlKLEtBQUtDLGNBQzFDa3lDLFNBQVNwNkMsS0FBSyxtQkFFWm9JLFVBQVVGLGFBQWFLLE9BQVNOLEtBQUtDLGNBQ3ZDa3lDLFNBQVNwNkMsS0FBSyxnQkFFWm9JLFVBQVVGLGFBQWFNLFVBQVlQLEtBQUtDLGNBQzFDa3lDLFNBQVNwNkMsS0FBSyxtQkFHVG82QyxTQUdULHFCQUNFLE9BQUlueUMsS0FBS2tiLFdBQWFsYixLQUFLcTBDLGNBQXNCLFVBQzdDcjBDLEtBQUtvUCxXQUFhcFAsS0FBS3MwQyxjQUFzQixVQUMxQyxLQUdULG1CQUFvQi9yQixhQUFjcGUsUUFBUyxHQUN6QyxNQUFNcWUsaUJBQW1CeG9CLEtBQUsrQixnQkFBZ0J3bUIsY0FDeEN2RixXQUNKOWlCLFNBQVNzb0IsaUJBQWlCeEYsYUFDMUI5aUIsU0FBU3NvQixpQkFBaUJ1ckIsYUFDNUIsSUFBSy96QyxLQUFLM0QsTUFBTThtQixVQUFVSCxZQU14QixZQUxBMWpCLEdBQUdDLGNBQWNzTixNQUNmcFcsS0FBS2dKLEtBQUtZLE9BQU8sMEJBQTJCLENBQzFDaEUsTUFBTzJELEtBQUszRCxNQUFNSyxRQUt4QnNELEtBQUt1MEMsZUFBa0JyMEMsU0FBU0YsS0FBS3UwQyxnQkFFakNyMEMsU0FBU0YsS0FBS3UwQyxnQkFEZCxFQUVKdjBDLEtBQUt1MEMsZ0JBQWtCcjBDLFNBQVM4aUIsWUFDaEMsTUFBTUMsZ0JBQ0ovaUIsU0FBU3NvQixpQkFBaUJ2RixrQkFDMUIvaUIsU0FBU3NvQixpQkFBaUI3bEIsWUFDNUIzQyxLQUFLQyxhQUFlZ2pCLGdCQUNoQmpqQixLQUFLMkMsWUFBY3NnQixrQkFDckJqakIsS0FBS2tiLFdBQVksRUFDakJsYixLQUFLb1AsV0FBWSxHQUVuQixJQUFLLElBQUltTixNQUFRLEVBQUdBLE1BQVFnTSxhQUFlLEVBQUdoTSxRQUM1Q3ZjLEtBQUsrQixnQkFBZ0J5eUMsUUFFdkIsSUFBSyxNQUFNbDNDLEtBQUswQyxLQUFLK0IsZ0JBQ25CekUsRUFBRXkyQyxZQUFjejJDLEVBQUV5MkMsWUFBYy93QixXQUlsQyxPQUZBaGpCLEtBQUtvakIsV0FBWSxFQUNqQnBqQixLQUFLODNCLGVBQ0QzdEIsYUFBcUJuSyxLQUFLNGhCLHNCQUE5QixFQUdGNnlCLGlCQUNFejBDLEtBQUtnMEMsb0JBQXFCLEVBQzFCaDBDLEtBQUsrQixnQkFBa0IsR0FDdkIvQixLQUFLa0MsV0FBYSxFQUNsQmxDLEtBQUttQyxjQUFnQixLQUNyQm5DLEtBQUs0d0MsYUFBYyxFQUdyQmphLFVBQVczVCxXQUFhLEtBQU03WSxRQUFTLEdBQ3JDLEdBQUk2WSxXQUFZLENBQ2RoakIsS0FBSzNELE1BQU04bUIsVUFBVUgsWUFDckJoakIsS0FBS0MsYUFBZUQsS0FBSzJDLFdBQ3pCLElBQUssTUFBTXJGLEtBQUswQyxLQUFLK0IsZ0JBQ25CekUsRUFBRXkyQyxZQUFjejJDLEVBQUV5MkMsWUFBYy93QixXQUVsQ2hqQixLQUFLb2pCLFdBQVksRUFDakJwakIsS0FBS2tiLFdBQVksRUFDakJsYixLQUFLdTBDLGVBQWtCcjBDLFNBQVNGLEtBQUt1MEMsZ0JBRWpDcjBDLFNBQVNGLEtBQUt1MEMsZ0JBRGQsRUFFSnYwQyxLQUFLdTBDLGdCQUFrQnIwQyxTQUFTOGlCLFlBQ2hDaGpCLEtBQUs4M0IsZUFDRDN0QixRQUFRbkssS0FBSzRoQixzQkFFakI1aEIsS0FBS2swQyxRQUFTLEVBQ2RsMEMsS0FBS3EwQyxlQUFnQixFQUNqQnIwQyxLQUFLOHdDLFVBQ1A5d0MsS0FBSzAwQyxrQkFBa0J2MEMsVUFBVUYsYUFBYUcsUUFBUytKLFFBRXZEbkssS0FBSzAwQyxrQkFBa0IxMEMsS0FBSzJDLFdBQVl3SCxRQUs5Q3d0QixVQUFXeHRCLFFBQVMsR0FDbEJuSyxLQUFLazBDLFFBQVMsRUFDZGwwQyxLQUFLczBDLGVBQWdCLEVBQ2pCdDBDLEtBQUs4d0MsVUFDUDl3QyxLQUFLMDBDLGtCQUFrQnYwQyxVQUFVRixhQUFhUyxRQUFTeUosUUFFdkRuSyxLQUFLMDBDLGtCQUFrQjEwQyxLQUFLMkMsV0FBYSxFQUFHd0gsUUFJaER3cUMsWUFBYUMsS0FBTUMsSUFBSzFxQyxRQUFTLEdBQy9CLElBQUk3UyxNQUFRTCxLQUFLNlMsTUFBTTdTLEtBQUs2OUMsVUFBWUYsS0FBT0MsTUFBUUEsSUFBTSxFQUM3RCxNQUFNRSxVQUFZejlDLE1BQVEsR0FDMUIsSUFBSTA5QyxTQUFXLzlDLEtBQUs2UyxNQUFNeFMsTUFBUSxJQUNsQyxNQUFNRSxLQUFPLEdBRWIsSUFBSXk5QyxVQUFZaCtDLEtBQUtDLElBQUk4SSxLQUFLcUIsZ0JBQWtCN0osS0FBS1csT0FDckQsTUFBUTg4QyxXQUFXLENBQ2pCLElBQUlDLElBQU1qK0MsS0FBSzZTLE1BQXNCLEdBQWhCN1MsS0FBSzY5QyxVQUN0QmgrQyxLQUFhLEdBQU5vK0MsSUFBV0gsVUFDVCxJQUFUaitDLE9BQ0ZBLEtBQU8sSUFDUG8rQyxJQUFNLEtBRUpsMUMsS0FBS20xQyxZQUFjcitDLE1BQVE4OUMsT0FDN0JwOUMsS0FBS08sS0FBS205QyxLQUNOcCtDLEtBQU9RLFFBQU9BLE1BQVFSLE9BRXhCa0osS0FBS29CLFVBQVl0SyxLQUFPKzlDLE1BQzFCcjlDLEtBQUtPLEtBQUttOUMsS0FDTnArQyxLQUFPUSxRQUFPQSxNQUFRUixPQUU1Qm0rQyxVQUFZejlDLEtBQUtXLFNBQVdsQixLQUFLQyxJQUFJOEksS0FBS3FCLGNBSTNCLEtBQWIyekMsVUFBaUMsSUFBZEQsWUFDckJDLFNBQVcsS0FFYng5QyxLQUFLczRCLE9BQ0g3NEIsS0FBSzZTLE1BQU03UyxLQUFLNjlDLFNBQVd0OUMsS0FBS1csT0FBUyxHQUN6QyxFQUNhLEtBQWI2OEMsU0FBa0IsRUFBSUEsVUFHeEJoMUMsS0FBS2lCLE1BQU16SixLQUFPLEdBQ2xCd0ksS0FBS2lCLE1BQU01SixLQUFLZ0csTUFBUTAzQyxVQUN4Qi8wQyxLQUFLcXhCLGVBQWlCLzVCLE1BQ3RCMEksS0FBS2lCLE1BQU0zSixNQUFRQSxNQUNuQjBJLEtBQUtpQixNQUFNa3lDLFVBQVk3N0MsTUFBUXk5QyxVQUUvQixNQUFNOThDLElBQW9CLElBQWQ4OEMsVUFBa0IsSUFBTSxHQUM5QjM4QyxJQUFvQixJQUFkMjhDLFVBQWtCLEdBQUssRUFDbkMsSUFBSXB6QyxTQUFXckssTUFBUXk5QyxVQUV2QixJQUFLLElBQUk5bkMsRUFBSSxFQUFHQSxFQUFJelYsS0FBS1csT0FBUThVLElBQUssQ0FDcEMsTUFBTXZMLElBQU0sR0FDWkEsSUFBSXJFLE1BQVE3RixLQUFLeVYsR0FDYnZMLElBQUlyRSxRQUFVc0UsVUFDaEJBLFNBQVcsSUFDWEQsSUFBSUMsVUFBVyxFQUNYM0IsS0FBS29CLFVBQ1BNLElBQUlFLE9BQVEsRUFDWkYsSUFBSUcsT0FBUSxJQUVaSCxJQUFJRyxPQUFRLEVBQ1pILElBQUlFLE9BQVEsS0FHVkYsSUFBSXJFLFFBQVVwRixJQUFLeUosSUFBSUUsT0FBUSxFQUM5QkYsSUFBSUUsT0FBUSxFQUNiRixJQUFJckUsUUFBVWpGLElBQUtzSixJQUFJRyxPQUFRLEVBQzlCSCxJQUFJRyxPQUFRLEdBR25CN0IsS0FBS2lCLE1BQU16SixLQUFLTyxLQUFLMkosS0FHdkIxQixLQUFLODNCLGVBQ0QzdEIsUUFBUW5LLEtBQUs0aEIsaUJBR25COHlCLGtCQUFtQnowQyxhQUFja0ssUUFBUyxHQUN4QyxJQUFJeXFDLEtBQU1DLElBQ04xMEMsVUFBVUYsYUFBYVEsU0FBV1IsZUFDcEMyMEMsS0FBTyxJQUNQQyxJQUFNNzBDLEtBQUsyeEMsZ0JBQWtCLEdBRTNCeHhDLFVBQVVGLGFBQWFTLFVBQVlULGVBRW5DMjBDLEtBREU1MEMsS0FBS3N4QyxtQkFBcUJ0eEMsS0FBSzJ4QyxnQkFBa0IsRUFDNUMsSUFDSzN4QyxLQUFLMnhDLGdCQUFrQixFQUNyQ2tELElBQU03MEMsS0FBS3N4QyxrQkFFVG54QyxVQUFVRixhQUFhRyxVQUFZSCxlQUNyQzIwQyxLQUFPNTBDLEtBQUtzeEMsaUJBQ1p1RCxJQUFNNzBDLEtBQUtxeEMsZUFFVGx4QyxVQUFVRixhQUFhSyxPQUFTTCxlQUNsQzIwQyxLQUFPNTBDLEtBQUtxeEMsY0FDWndELElBQU03MEMsS0FBS294QyxrQkFFVGp4QyxVQUFVRixhQUFhTSxVQUFZTixlQUNyQzIwQyxLQUFPNTBDLEtBQUtveEMsaUJBQ1p5RCxJQUFNLEdBRUoxMEMsVUFBVUYsYUFBYU8sV0FBYVAsZUFDdEMyMEMsS0FBTyxFQUNQQyxJQUFNLEdBRUpELE9BQVNDLEtBQUtBLE1BQ0wsSUFBVEQsT0FBWUEsS0FBTzUwQyxLQUFLMnhDLGdCQUFrQixHQUM5QzN4QyxLQUFLMjBDLFlBQVlDLEtBQU1DLElBQUsxcUMsUUFHOUJ5dEIscUJBQXNCenRCLFFBQVMsR0FDN0IsSUFBSXlxQyxLQUFNQyxJQUNOMTBDLFVBQVVGLGFBQWFRLFNBQVdULEtBQUtDLGVBQ3pDMjBDLEtBQU81MEMsS0FBSzJ4QyxnQkFBa0IsRUFFNUJrRCxJQURFNzBDLEtBQUtzeEMsbUJBQXFCdHhDLEtBQUsyeEMsZ0JBQWtCLEVBQzdDM3hDLEtBQUtxeEMsY0FFTHJ4QyxLQUFLc3hDLGtCQUdYbnhDLFVBQVVGLGFBQWFTLFVBQVlWLEtBQUtDLGVBQzFDMjBDLEtBQU81MEMsS0FBS3N4QyxpQkFDWnVELElBQU03MEMsS0FBS3F4QyxlQUVUbHhDLFVBQVVGLGFBQWFHLFVBQVlKLEtBQUtDLGVBQzFDMjBDLEtBQU81MEMsS0FBS3F4QyxjQUNad0QsSUFBTTcwQyxLQUFLb3hDLGtCQUVUanhDLFVBQVVGLGFBQWFLLE9BQVNOLEtBQUtDLGVBQ3ZDMjBDLEtBQU81MEMsS0FBS294QyxpQkFDWnlELElBQU03MEMsS0FBS3V4QyxtQkFFVHB4QyxVQUFVRixhQUFhTSxVQUFZUCxLQUFLQyxlQUMxQzIwQyxLQUFPNTBDLEtBQUt1eEMsa0JBQ1pzRCxJQUFNLEdBRUpELE9BQVNDLEtBQUtBLE1BQ2xCNzBDLEtBQUsyMEMsWUFBWUMsS0FBTUMsSUFBSzFxQyxRQUc5QjB0QixxQkFBc0IxdEIsUUFBUyxHQUM3QixJQUFJeXFDLEtBQU1DLElBQ04xMEMsVUFBVUYsYUFBYVMsVUFBWVYsS0FBS0MsZUFDMUMyMEMsS0FBTyxJQUNQQyxJQUFNNzBDLEtBQUsyeEMsZ0JBQWtCLEdBRTNCeHhDLFVBQVVGLGFBQWFHLFVBQVlKLEtBQUtDLGVBQzFDMjBDLEtBQU81MEMsS0FBSzJ4QyxnQkFBa0IsRUFDOUJrRCxJQUFNNzBDLEtBQUtzeEMsa0JBRVRueEMsVUFBVUYsYUFBYUssT0FBU04sS0FBS0MsZUFDdkMyMEMsS0FBTzUwQyxLQUFLc3hDLGlCQUNadUQsSUFBTTcwQyxLQUFLcXhDLGVBRVRseEMsVUFBVUYsYUFBYU0sVUFBWVAsS0FBS0MsZUFDMUMyMEMsS0FBTzUwQyxLQUFLcXhDLGNBQ1p3RCxJQUFNNzBDLEtBQUtveEMsa0JBRVRqeEMsVUFBVUYsYUFBYU8sV0FBYVIsS0FBS0MsZUFDM0MyMEMsS0FBTzUwQyxLQUFLb3hDLGlCQUNaeUQsSUFBTSxHQUVLLElBQVRELE9BQVlBLEtBQU81MEMsS0FBSzJ4QyxnQkFBa0IsR0FDOUMzeEMsS0FBSzIwQyxZQUFZQyxLQUFNQyxJQUFLMXFDLFFBRzlCLDRCQUNFbkssS0FBS28xQyx1QkFBd0IsRUFDekJwMUMsS0FBSzRDLGFBQWE1QyxLQUFLNEMsTUFBTXMxQixzQkFHbkMsZUFBZ0JuMEIsR0FDZC9ELEtBQUs4eEMsWUFBYzV4QyxTQUFTNkQsR0FHOUIsaUJBQ0UsT0FBTy9ELEtBQUs4eEMsWUFHZCxXQUFZL3RDLEdBQ1YvRCxLQUFLcTFDLFFBQVV0eEMsRUFHakIsWUFBYUEsR0FDWC9ELEtBQUtzMUMsU0FBV3Z4QyxFQUdsQixjQUNFLEdBQUsvRCxLQUFLczFDLFNBQ1YsT0FBT3QxQyxLQUFLczFDLFNBR2QsV0FBWXZ4QyxHQUNML0QsS0FBS3M3QixPQUFNdDdCLEtBQUtzN0IsS0FBTzBWLFFBQVFDLE1BQU1DLFNBQVMsS0FDbkRseEMsS0FBS3UxQyxXQUFheHhDLEVBR3BCLGFBQ0UsR0FBSy9ELEtBQUt1MUMsV0FDVixPQUFPdjFDLEtBQUt1MUMsV0FHZCxhQUNFLEdBQUl2MUMsS0FBS3ExQyxRQUFTLE9BQU9yMUMsS0FBS3ExQyxRQUM5QixJQUFJdjZDLE9BQVMsR0E2RGIsT0E1RElrRixLQUFLM0QsT0FBT3RELE9BQ1ZpSCxLQUFLNEMsTUFDUDlILE9BQVNyRSxLQUFLZ0osS0FBS1ksT0FBTyxtQkFBb0IsQ0FDNUMzRCxLQUFNc0QsS0FBSzRDLE1BQU1sRyxLQUNqQlcsTUFBTzJDLEtBQUt3MUMsZUFDWjd5QyxXQUFZM0MsS0FBSzB0QyxtQkFFVjF0QyxLQUFLNkMsS0FDZC9ILE9BQVNyRSxLQUFLZ0osS0FBS1ksT0FBTyx1QkFBd0IsQ0FDaER3QyxLQUFNN0MsS0FBSzZDLEtBQUtuRyxLQUNoQmtHLE1BQU81QyxLQUFLNEMsTUFBTWxHLEtBQ2xCVyxNQUFPMkMsS0FBS3cxQyxlQUNaN3lDLFdBQVkzQyxLQUFLMHRDLG1CQUVWMXRDLEtBQUtrRCxlQUNkcEksT0FBU3JFLEtBQUtnSixLQUFLWSxPQUFPLG1CQUFvQixDQUM1QzNELEtBQU1qRyxLQUFLZ0osS0FBS1ksT0FDZEwsS0FBSzNELE1BQU10RCxLQUFLQSxLQUFLME4sZ0JBQWdCekcsS0FBS2tELGdCQUFnQmtELE9BRTVEL0ksTUFBTzJDLEtBQUt3MUMsZUFDWjd5QyxXQUFZM0MsS0FBSzB0QyxtQkFFVjF0QyxLQUFLZ1MsVUFDZGxYLE9BQVNyRSxLQUFLZ0osS0FBS1ksT0FBTyxtQkFBb0IsQ0FDNUMzRCxLQUFNakcsS0FBS2dKLEtBQUtZLE9BQ2QsUUFBUUwsS0FBSzNELE1BQU10RCxLQUFLQSxLQUFLd1EsUUFBUXZKLEtBQUtnUyxXQUFXNUwsU0FFdkQvSSxNQUFPMkMsS0FBS3cxQyxlQUNaN3lDLFdBQVkzQyxLQUFLMHRDLG1CQUVWMXRDLEtBQUsyL0IsY0FDZDdrQyxPQUFTckUsS0FBS2dKLEtBQUtZLE9BQU8sbUJBQW9CLENBQzVDM0QsS0FBTXNELEtBQUsyL0IsWUFDWHRpQyxNQUFPMkMsS0FBS3cxQyxlQUNaN3lDLFdBQVkzQyxLQUFLMHRDLHFCQUtsQjV5QyxRQUNDa0YsS0FBSytDLFdBRUxqSSxPQURFa0YsS0FBSzIvQixZQUNFbHBDLEtBQUtnSixLQUFLWSxPQUFPLG1CQUFvQixDQUM1QzNELEtBQU1zRCxLQUFLMi9CLFlBQ1h0aUMsTUFBTzJDLEtBQUt3MUMsZUFDWjd5QyxXQUFZM0MsS0FBSzB0QyxtQkFHVmozQyxLQUFLZ0osS0FBS1ksT0FBTyxxQkFBc0IsQ0FDOUNvMUMsU0FBVXoxQyxLQUFLK0MsU0FDZkosV0FBWTNDLEtBQUswdEMsb0JBTXJCMXRDLEtBQUs2d0MsVUFDUC8xQyxPQUFTLEdBQUdyRSxLQUFLZ0osS0FBS1ksT0FBTyxtQkFBbUJ2RixVQUczQ0EsT0FHVCxvQkFDRSxPQUFJa0YsS0FBS2dTLFVBRUx2YixLQUFLZ0osS0FBS1ksT0FDUixpQkFDRUwsS0FBSzJDLGFBQWV4QyxVQUFVd0UsZ0JBQWdCdkUsUUFBVSxHQUFLLFNBQzNESixLQUFLcUIsYUFBb0IsUUFBTCxLQUN4QixDQUNFc0IsV0FBWTNDLEtBQUswdEMsaUJBQ2pCem9DLFNBQVVqRixLQUFLcUIsYUFDZjNFLEtBQU1qRyxLQUFLZ0osS0FBS1ksT0FDZCxRQUFRTCxLQUFLM0QsTUFBTXRELEtBQUtBLEtBQUt3USxRQUFRdkosS0FBS2dTLFdBQVc1TCxXQUd2RCxLQUFLcEcsS0FBSzNELE1BQU10RCxLQUFLQSxLQUFLd1EsUUFBUXZKLEtBQUtnUyxXQUFXM1UsVUFHdEQyQyxLQUFLa0QsZUFFTHpNLEtBQUtnSixLQUFLWSxPQUNSLGlCQUNFTCxLQUFLMkMsYUFBZXhDLFVBQVV3RSxnQkFBZ0J2RSxRQUFVLEdBQUssU0FDM0RKLEtBQUtxQixhQUFvQixRQUFMLEtBQ3hCLENBQ0VzQixXQUFZM0MsS0FBSzB0QyxpQkFDakJ6b0MsU0FBVWpGLEtBQUtxQixhQUNmM0UsS0FBTWpHLEtBQUtnSixLQUFLQyxTQUNkTSxLQUFLM0QsTUFBTXRELEtBQUtBLEtBQUswTixnQkFBZ0J6RyxLQUFLa0QsZ0JBQWdCa0QsU0FJaEUsS0FBS3BHLEtBQUszRCxNQUFNdEQsS0FBS0EsS0FBSzBOLGdCQUFnQnpHLEtBQUtrRCxnQkFBZ0I3RixVQUcvRDJDLEtBQUs0QyxNQUVMbk0sS0FBS2dKLEtBQUtZLE9BQ1IsaUJBQ0VMLEtBQUsyQyxhQUFleEMsVUFBVXdFLGdCQUFnQnZFLFFBQVUsR0FBSyxTQUMzREosS0FBS3FCLGFBQW9CLFFBQUwsS0FDeEIsQ0FDRXNCLFdBQVkzQyxLQUFLMHRDLGlCQUNqQnpvQyxTQUFVakYsS0FBS3FCLGFBQ2YzRSxLQUFNc0QsS0FBSzRDLE1BQU1sRyxPQUVqQixLQUFLc0QsS0FBSzRDLE1BQU12RixVQUdwQjJDLEtBQUsyL0IsWUFFTGxwQyxLQUFLZ0osS0FBS1ksT0FDUixpQkFDRUwsS0FBSzJDLGFBQWV4QyxVQUFVd0UsZ0JBQWdCdkUsUUFBVSxHQUFLLFNBQzNESixLQUFLcUIsYUFBb0IsUUFBTCxLQUN4QixDQUNFc0IsV0FBWTNDLEtBQUswdEMsaUJBQ2pCem9DLFNBQVVqRixLQUFLcUIsYUFDZjNFLEtBQU1zRCxLQUFLMi9CLGNBRVgsS0FBSzMvQixLQUFLdzFDLG1CQUdYLEtBR1QseUJBQTBCNTZDLFFBQVUsSUFFOUJvRixLQUFLcEYsUUFBU29GLEtBQUtwRixRQUFVeXdCLFlBQVlyckIsS0FBS3BGLFFBQVNBLFNBQ3REb0YsS0FBS3BGLFFBQVVBLFFBQ3BCLE1BQU1zSixXQUFhdVEsZUFIRixzREFHMkJ6VSxNQUM1QyxPQUFJa0UsS0FBYXlRLEVBQUVDLFVBQVUxUSxNQUFNLEdBQzVCLEtBR1Qsa0JBQW1CdEosUUFBVSxJQUV2Qm9GLEtBQUtwRixRQUFTb0YsS0FBS3BGLFFBQVV5d0IsWUFBWXJyQixLQUFLcEYsUUFBU0EsU0FDdERvRixLQUFLcEYsUUFBVUEsUUFFcEIsYUFEbUI2WixlQUhGLHNEQUcyQnpVLFlBQzdCcUYsRUFHakIsZ0JBQWlCd3JDLFNBQVUsR0FFekI3d0MsS0FBSzZ3QyxRQUFVQSxRQUNmLE1BRU0zc0MsV0FBYXVRLGVBRkYsK0NBRTJCelUsTUFFdENvTyxZQUFjLEdBQ3BCLElBQUlyVCxRQUNBaUYsS0FBSzNELE9BQ0gyRCxLQUFLM0QsTUFBTStHLFFBQ2JnTCxZQUFZNVIsTUFBUXdELEtBQUt4RCxNQUFNL0MsU0FDdEJ1RyxLQUFLM0QsTUFBTXMyQyxRQUNoQjN5QyxLQUFLM0QsTUFBTUssT0FBTTNCLFFBQVUsQ0FBRTRCLE1BQU9xRCxLQUFLM0QsTUFBTUssT0FFbkQwUixZQUFZL1IsTUFBUTJELEtBQUszRCxNQUUzQnRCLFFBQVV0QyxZQUFZdUMsV0FBV29ULGNBRWpDclQsUUFBVXRDLFlBQVl1QyxhQUd4QixNQUVNMUMsU0FBVyxDQUNmTyxNQUhXbUgsS0FBSzNELE9BQU94RCxLQUFPbUgsS0FBSzNELE1BQU14RCxLQUFPcEMsS0FBS29DLE1BRzFDMkMsR0FDWFQsUUFDQUQsT0FBUWtGLEtBQUtsRixPQUNiVyxRQUFTeUksS0FDVHFyQixNQUFPLENBQ0x0RCxLQUFNLENBQ0poeEIsS0FBTWtGLFVBQVVneEMsWUFRdEIsR0FISW54QyxLQUFLczdCLE9BQU1oakMsU0FBU2kzQixNQUFNdEQsS0FBS3FQLEtBQU90N0IsS0FBS3M3QixNQUMzQ3Q3QixLQUFLa3VDLFVBQVM1MUMsU0FBU2kzQixNQUFNdEQsS0FBS2lpQixRQUFVbHVDLEtBQUtrdUMsU0FFL0IsYUFBbEJsdUMsS0FBSzFKLFNBQ1AsR0FBSUcsS0FBS29DLEtBQUt5UixNQVdaLEdBVkFoUyxTQUFTTyxLQUFPcEMsS0FBS29DLEtBQUsyQyxHQUMxQmxELFNBQVN3QyxPQUFTLElBQUlrRixLQUFLM0QsTUFBTUssU0FBU3BFLFNBQVN3QyxTQUNuRHhDLFNBQVNpM0IsTUFBUSxDQUNmdEQsS0FBTSxDQUNKc0csWUFBWSxTQUdnQixJQUFyQmo2QixTQUFTeUMsVUFDbEJ6QyxTQUFTaTNCLE1BQU10RCxLQUFLeXBCLGdCQUFrQnYzQyxVQUFVN0YsU0FBU3lDLFVBRXZEdEUsS0FBS29DLEtBQUt5UixLQUNaLE9BQVE3VCxLQUFLSSxTQUFTRixJQUFJLE9BQVEsMEJBQ2hDLElBQUssZ0JBQ0kyQixTQUFTeUMsUUFDaEJ6QyxTQUFTQyxRQUFVeUgsS0FBSzNELE1BQU15bEIsT0FDOUJ4cEIsU0FBUzJDLEtBQU9DLE1BQU1DLG1CQUFtQkMsUUFDekMsTUFFRixJQUFLLGtCQUNJOUMsU0FBU3lDLFFBQ2hCekMsU0FBU0MsUUFBVTlCLEtBQUt1ckIsTUFBTXNRLFFBQzlCaDZCLFNBQVMyQyxLQUFPQyxNQUFNQyxtQkFBbUJDLFFBQ3pDLE1BRUYsUUFDRTNDLFlBQVlDLGNBQWNKLFNBQVUwSCxLQUFLMUosZ0JBSTFDbUMsWUFBWUMsY0FBY0osU0FBVTBILEtBQUsxSixVQUc5QyxDQUFDLFNBQVUsYUFBYTBCLFNBQVNnSSxLQUFLMUosWUFDeENnQyxTQUFTQyxRQUFVRSxZQUFZNFYscUJBQXFCLE9BRWhDLGNBQWxCck8sS0FBSzFKLFdBQTBCZ0MsU0FBU0UsT0FBUSxHQUdoRHdILEtBQUt0SSxNQUFNWixPQUFTa0osS0FBS3RJLE1BQU1uQixXQUNqQytCLFNBQVN4QixLQUFPa0osS0FBS3RJLEtBQUtaLEtBQzFCd0IsU0FBUzJDLEtBQU9DLE1BQU1DLG1CQUFtQkUsS0FDekMvQyxTQUFTaEMsU0FBVzBKLEtBQUsrTyxRQUFVLFlBQWMvTyxLQUFLMUosVUFHeERtQyxZQUFZaUQsT0FBT3BELFVBQVVxRCxNQUFLQyxLQUN6QkEsTUFRWCxzQkFBc0IsWUFBZSxFQUFLLFdBQWMsR0FBVSxJQUM1RG04QixhQUFZLzNCLEtBQUsxSixVQUFXLEdBRWhDLE1BQU1nQyxTQUFXLENBQUV3QyxPQUFRa0YsS0FBS2xGLFFBRTVCaTlCLFlBQ0Z6L0IsU0FBU0MsUUFBVSxHQUNuQkQsU0FBU0UsT0FBUSxFQUNqQkMsWUFBWUMsY0FBY0osWUFFMUJBLFNBQVNDLFFBQVUsR0FDbkJELFNBQVNFLE9BQVEsRUFDakJDLFlBQVlDLGNBQWNKLFNBQVU3QixLQUFLSSxTQUFTRixJQUFJLE9BQVEsY0FHNUQyQixTQUFTRSxRQUNYd0gsS0FBSytPLFNBQVUsR0FHakIsTUFDTTdLLFdBQWF1USxlQURGLCtDQUMyQnpVLE1BQzVDLElBQUkyMUMsV0FBYXp4QyxLQUVqQixJQUFLbEUsS0FBSytVLFVBQVcsT0FBT0osRUFBRUMsVUFBVTFRLE1BQU0sR0FHOUMsTUFBTXZKLFFBQVVsRSxLQUFLcWUsU0FBU25lLElBQUlxSixLQUFLK1UsV0FDakM2Z0MsWUFBY2poQyxFQUFFQyxVQUFVamEsUUFBUTVCLEtBQUswQyxTQUFTLEdBQ3RELElBQUttNkMsWUFBWWo4QyxVQUFVNGpCLFNBQVMsZUFBZ0IsQ0FDbEQsTUFBTW5DLFVBQVl6RyxFQUFFQyxVQUFVMVEsTUFBTSxHQUM5QjJ4QyxrQkFBb0JELFlBQVk5MUMsY0FBYyxnQkFDMUIsT0FBdEIrMUMsbUJBQ0ZBLGtCQUFrQnQ2QixZQUFZSCxXQUVoQ3U2QixXQUFhQyxZQUFZdGhDLFVBRzNCaGMsU0FBU21ELFFBQVVrNkMsV0FFZno2QyxNQUFNQyxtQkFBbUJFLE9BQVNWLFFBQVE1QixLQUFLa0MsT0FDN0NOLFFBQVE1QixLQUFLUixTQUFTSixPQUN4QkcsU0FBUzJDLEtBQU9DLE1BQU1DLG1CQUFtQkMsUUFDcEM5QyxTQUFTMkMsS0FBT0MsTUFBTUMsbUJBQW1CaVAsT0FHOUM2dEIsV0FBYWo0QixLQUFLdEksTUFBTVosWUFDcEJWLFNBQVMwYyxlQUFlOVMsS0FBS3RJLEtBQUtaLE1BRzFDLE1BQU04RSxVQUFZakIsUUFBUXdQLE9BQU83UixVQUVqQyxhQURNZ0gsR0FBRzBWLEtBQUtDLGNBQWNyWixLQUFLLEdBQzFCQSxJQUdULDhCQUErQnpCLE9BQzdCLE1BQU15RixLQUFPekYsTUFBTWtpQixjQUFjMUcsUUFBUSxjQUNuQ3RULFlBQWNsQyxVQUFVbVYsWUFBWTFWLE1BQzFDeUMsTUFBTW13QyxxQkFBc0IsRUFDNUJud0MsTUFBTWt3QyxrQkFBbUIsRUFDekJsd0MsTUFBTWl3QyxxQkFBc0IsRUFDNUJqd0MsTUFBTWd3QyxzQkFBdUIsRUFDWSx3QkFBckNsNEMsTUFBTWtpQixjQUFjcGpCLFFBQVF1b0IsT0FDOUJuZixNQUFNbXdDLHFCQUFzQixHQUVXLHFCQUFyQ3I0QyxNQUFNa2lCLGNBQWNwakIsUUFBUXVvQixPQUM5Qm5mLE1BQU1rd0Msa0JBQW1CLEdBRWMsd0JBQXJDcDRDLE1BQU1raUIsY0FBY3BqQixRQUFRdW9CLE9BQzlCbmYsTUFBTWl3QyxxQkFBc0IsR0FFVyx5QkFBckNuNEMsTUFBTWtpQixjQUFjcGpCLFFBQVF1b0IsT0FDOUJuZixNQUFNZ3dDLHNCQUF1QixHQUUvQmh3QyxNQUFNeTFCLGVBQ056MUIsTUFBTXVmLGlCQUlSLGtCQUFtQnVHLFNBQVUsR0FFM0Jub0IsS0FBS21vQixRQUFVQSxVQUFXLEVBRTFCLGFBRG1CMVQsZUFGRix3Q0FFMkJ6VSxNQUk5QyxjQUNFLE9BQU95VSxlQUNMLHNEQUNBelUsTUFJSixrQkFDRSxNQUFNeEcsRUFBSUMsU0FBU0MsY0FBYyxLQVNqQyxPQVJBRixFQUFFRyxVQUFVQyxJQUFJLHFCQUNoQkosRUFBRUcsVUFBVUMsSUFBSSxxQkFDaEJKLEVBQUVHLFVBQVVDLElBQUksZUFDaEJKLEVBQUVHLFVBQVVDLE9BQU9vRyxLQUFLODFDLGNBQ3hCdDhDLEVBQUVOLE1BQVE4RyxLQUFLKzFDLGNBQ2Z2OEMsRUFBRVAsUUFBUW5DLEtBQU9zQyxPQUFPNEcsS0FBS28wQyxnQkFDN0I1NkMsRUFBRVMsVUFBWSwyQ0FBMkMrRixLQUN0RHF4QixnQkFBa0IsT0FDZDczQixFQUdULGtCQUNFLEdBQUl3RyxLQUFLZzRCLFFBQVMsT0FDbEIsTUFBTWdlLE1BQVEsR0FDUngrQyxLQUFPd0ksS0FBS2lCLE1BQU16SixLQUFLaUgsS0FBSW9GLElBQ3hCLENBQ0x6TSxPQUFReU0sRUFBRXhHLE1BQ1ZzRSxTQUFVa0MsRUFBRWxDLFNBQ1ptYixRQUFTLENBQ1AsTUFDQSxNQUNDalosRUFBRWxDLFNBQXlCLEtBQWQsWUFDZGtDLEVBQUVoQyxNQUFRLE1BQVEsS0FDbEJnQyxFQUFFakMsTUFBUSxNQUFRLE1BRWpCMUosUUFBTys5QyxHQUFLQSxJQUNaM3hDLEtBQUssU0FHTmpOLEtBQU8sQ0FDWCxDQUNFRCxPQUFRNEksS0FBS2lCLE1BQU01SixLQUFLZ0csTUFDeEJzRSxVQUFVLEVBQ1ZtYixRQUFTLFlBY2IsT0FWQWs1QixNQUFNaitDLEtBQUssQ0FDVG9CLFFBQVM2RyxLQUFLKzFDLGNBQ2R6K0MsTUFBTzBJLEtBQUtxeEIsZUFDWjRnQixNQUFPanlDLEtBQUtrMkMsa0JBQ1pDLE1BQU9uMkMsS0FBS215QyxTQUNadUIsZ0JBQWlCMXpDLEtBQUswekMsZ0JBQ3RCRCxXQUFZenpDLEtBQUt5ekMsV0FDakIyQyxLQUFNLEdBQ054eUMsTUFBTyxJQUFJcE0sUUFBU0gsUUFFZm9kLGVBQ0wsc0RBQ0EsQ0FBRXVoQyxRQUlOLG1CQUNFLE9BQU8zOEMsS0FBSzRSLE1BQU1qTCxLQUFLbzBDLGdCQUd6QixxQkFDRSxPQUFPLzZDLEtBQUtDLFVBQVUwRyxNQUFNLENBQUNsRSxJQUFLdUIsU0FDaEMsR0FBYyxPQUFWQSxNQUFnQixPQUVwQixNQURnQixDQUFDLFNBQVUsU0FBVSxTQUN6QnJGLFNBQVM4RCxVQUFyQixFQUNPdUIsU0FJWCxnQkFBaUJ0RSxNQUNmLE9BQU9nQixPQUFPMmIsT0FBTyxJQUFJdlYsVUFBYXBILE1BR3hDLHNCQUF1Qnl5QixZQUNyQixJQUFJenlCLEtBQ0osSUFDRUEsS0FBT00sS0FBSzRSLE1BQU11SyxTQUFTZ1csYUFDM0IsTUFBT2p5QixLQUVQLE9BREErRixHQUFHQyxjQUFjc04sTUFBTXRULElBQUlvQixTQUNwQixLQUVULE9BQU93RixVQUFVeVYsU0FBUzdjLE1BRzVCLG1CQUFvQnNKLE1BQU9vRixRQUFTN00sUUFBVSxJQUM1QyxPQUFRNk0sU0FDTixJQUFLLFVBQ0gsR0FBSTdNLFFBQVF1VCxPQUFPeFUsVUFBVTRqQixTQUFTLGNBQWUsQ0FDbkQsTUFBTXlGLFdBQWE5aUIsU0FBU3RGLFFBQVF1VCxPQUFPbFYsUUFBUStwQixZQUNuRDNnQixNQUFNczBCLFVBQVUzVCxXQUFZcG9CLFFBQVF1UCxZQUMvQixDQUNMLE1BQU11c0IsYUFBZXgyQixTQUFTdEYsUUFBUXVULE9BQU9sVixRQUFRc2pCLGFBQy9DbGEsTUFBTXUwQixhQUFhRixhQUFjOTdCLFFBQVF1UCxRQUVqRCxNQUdGLElBQUssYUFDSDlILE1BQU1zMEIsVUFBVSxLQUFNLzdCLFFBQVF1UCxRQUM5QixNQUdGLElBQUssYUFDSDlILE1BQU1zMUIsVUFBVS84QixRQUFRdVAsUUFDeEIsTUFHRixJQUFLLHlCQUNIOUgsTUFBTXUxQixxQkFBcUJoOUIsUUFBUXVQLFFBQ25DLE1BR0YsSUFBSyx5QkFDSDlILE1BQU13MUIscUJBQXFCajlCLFFBQVF1UCxRQUNuQyxNQUdGLElBQUssZUFDSDlILE1BQU0wTSxTQUFVLEVBQ2hCMU0sTUFBTS9MLFVBQVcsRUFDakIrTCxNQUFNeTFCLGVBQ0ZsOUIsUUFBUXVQLFFBQVE5SCxNQUFNdWYsaUJBQzFCLE1BR0YsSUFBSyw2QkFDR3ZmLE1BQU02MUIsc0JBQ1o3MUIsTUFBTXkxQixlQUNGbDlCLFFBQVF1UCxRQUFROUgsTUFBTXVmLGlCQUMxQixNQUdGLElBQUssYUFDR3ZmLE1BQU00UCxXQUNaNVAsTUFBTXd1QyxTQUFVLEVBQ1pqMkMsUUFBUXVQLFFBQVE5SCxNQUFNdWYsa0JBS2hDLGdDQUFpQ3puQixPQUMvQkEsTUFBTXlNLGlCQUNOLE1BQU1wTixFQUFJVyxNQUFNa2lCLGNBRWhCLEdBQUk3aUIsRUFBRUcsVUFBVTRqQixTQUFTLHFCQUN2QixPQUFJL2pCLEVBQUVHLFVBQVU0akIsU0FBUyxZQUNoQnBkLFVBQVUwMUIsc0JBQXNCcjhCLEdBRWhDMkcsVUFBVTIxQixvQkFBb0J0OEIsR0FLM0MsNkJBQThCQSxHQUM1QixJQUFLQSxFQUFFRyxVQUFVNGpCLFNBQVMscUJBQXNCLE9BQ2hELElBQUsvakIsRUFBRUcsVUFBVTRqQixTQUFTLFlBQWEsT0FDdkMsTUFBTTg0QixRQUFVNzhDLEVBQUVzRyxjQUFjLHVCQUVoQyxPQURJdTJDLFNBQVNBLFFBQVExcEMsU0FDZG5ULEVBQUVHLFVBQVVnVCxPQUFPLFlBRzVCLGlDQUFrQ25ULEdBQ2hDLElBQUtBLEVBQUVHLFVBQVU0akIsU0FBUyxxQkFBc0IsT0FDaEQsR0FBSS9qQixFQUFFRyxVQUFVNGpCLFNBQVMsWUFBYSxPQUd0QyxNQUFNbGIsTUFBUXRJLE9BQU8yYixPQUNuQixJQUFJdlYsVUFDSjlHLEtBQUs0UixNQUFNdUssU0FBU2hjLEVBQUVQLFFBQVFuQyxRQUVoQyxHQUFJdUwsTUFBTTIxQixRQUFTLE9BRW5CLE1BQU1zZSxJQUFNNzhDLFNBQVNDLGNBQWMsT0FDbkM0OEMsSUFBSXI4QyxnQkFBa0JvSSxNQUFNazBDLFlBRzVCLE1BQU1GLFFBQVVDLElBQUlFLFNBQVMsR0FDN0JoOUMsRUFBRTJTLFlBQVlrcUMsU0FDZDc4QyxFQUFFRyxVQUFVQyxJQUFJLFlBR2hCLE1BQU02OEMsR0FBS2o5QyxFQUFFazlDLHdCQUNQQyxHQUFLTixRQUFRSyx3QkFDbkJMLFFBQVF2cUMsTUFBTUUsS0FBTyxHQUFHL1UsS0FBS21CLElBQzNCcStDLEdBQUcxeUMsRUFDSDJILE9BQU9rckMsWUFBY0QsR0FBRzdMLE1BQVEsUUFFbEN1TCxRQUFRdnFDLE1BQU1HLElBQU0sR0FBR2hWLEtBQUttQixJQUMxQnErQyxHQUFHSSxFQUFJSixHQUFHMUwsT0FBUyxFQUNuQnIvQixPQUFPb3JDLGFBQWVILEdBQUc1TCxPQUFTLFFBRXBDLE1BQU1nTSxHQUFLQyxpQkFBaUJ4OUMsR0FBR3k5QyxPQUMvQlosUUFBUXZxQyxNQUFNbXJDLE9BQVNyNUMsT0FBT3M1QyxVQUFVSCxJQUFNQSxHQUFLLEVBQUksS0N4MERwRCxNQUFNM3hDLFdBQ1gsb0JBQXFCeEssUUFBVSxJQUN6QkEsUUFBUStILGFBQ1YvSCxRQUFRK0osZ0JBQWtCLEdBQ3RCeEUsVUFBVXdFLGdCQUFnQmdDLFVBQVkvTCxRQUFRK0gsYUFDaEQvSCxRQUFRK0osZ0JBQWdCZ0MsU0FBVSxHQUVoQ3hHLFVBQVV3RSxnQkFBZ0J2RSxVQUFZeEYsUUFBUStILGFBQ2hEL0gsUUFBUStKLGdCQUFnQnZFLFNBQVUsR0FFaENELFVBQVV3RSxnQkFBZ0JyRSxPQUFTMUYsUUFBUStILGFBQzdDL0gsUUFBUStKLGdCQUFnQnJFLE1BQU8sR0FFN0JILFVBQVV3RSxnQkFBZ0JwRSxVQUFZM0YsUUFBUStILGFBQ2hEL0gsUUFBUStKLGdCQUFnQnBFLFNBQVUsSUFLbEMzRixRQUFROEIsT0FBUzlCLFFBQVEra0MsY0FBYS9rQyxRQUFRK2tDLFlBQWMva0MsUUFBUThCLE1BQ3hFLE1BQU15NkMseUJBQ29ELFlBQXhEMWdELEtBQUtJLFNBQVNGLElBQUksT0FBUSwwQkFDdEJ1TixXQUFhdVEsZUFDakIseUNBQ0EsQ0FDRTJpQyxzQkFDRTNnRCxLQUFLSSxTQUFTRixJQUFJLE9BQVEsMkJBQ3pCaUUsUUFBUW8zQix3QkFDWHFsQiwyQkFDRTVnRCxLQUFLSSxTQUFTRixJQUFJLE9BQVEsZ0NBQ3pCaUUsUUFBUW0zQiw2QkFDWHB2QixXQUFZeEMsVUFBVXdFLGdCQUN0Qnd5Qyx5QkFDQXY4QyxVQUdKLE9BQU8sSUFBSTBSLFNBQVFDLFVBQ2pCLElBQUkrUyxTQUFXLEtBQ0gsSUFBSXRELE9BQU8sQ0FDckI5aUIsTUFBTzBCLFFBQVEra0MsWUFDWGxwQyxLQUFLZ0osS0FBS1ksT0FBTyxpQ0FBa0MsQ0FDakQzRCxLQUFNOUIsUUFBUStrQyxjQUVoQmxwQyxLQUFLZ0osS0FBS0MsU0FBUyw2QkFDdkJqRSxRQUFTeUksS0FDVDJZLFFBQVMsQ0FDUC9sQixLQUFNLENBQ0pzUCxNQUFPM1AsS0FBS2dKLEtBQUtDLFNBQVMsaUJBQzFCOGYsU0FBVXRiLE9BQ1JvYixTQUFXLElBQUlHLFNBQVN2YixLQUFLLEdBQUdwRSxjQUFjLHFCQUN2Q3lNLFFBQVErUyxhQUlyQkksUUFBUyxPQUNUOUMsTUFBTyxTQUVMaFMsUUFBTyxPQzNEVixNQUFNMHNDLHNCQUFzQnQ3QixPQUNqQ0Msa0JBQW1CL1gsTUFDakJ3SyxNQUFNdU4sa0JBQWtCL1gsTUFDeEJBLEtBQUs4QixLQUFLLGFBQWFrVyxPQUFNLElBQU1sYyxLQUFLdTNDLGFBQWFyekMsUUFHdkRxekMsYUFBY3J6QyxNQUNaQSxLQUFLOEIsS0FBSyx3QkFBd0J3QyxTQUdwQyxvQkFBcUI1TixRQUFVLElBQzdCLE1BQU1zSixXQUFhdVEsZUFDakIsMkNBQ0E3WixTQUdGLE9BQU8sSUFBSTBSLFNBQVFDLFVBQ2pCLElBQUkrUyxTQUFXLEtBQ0gsSUFBSWc0QixjQUFjLENBQzVCcCtDLE1BQU8wQixRQUFRK2tDLFlBQ1hscEMsS0FBS2dKLEtBQUtZLE9BQU8sbUNBQW9DLENBQ25EM0QsS0FBTTlCLFFBQVEra0MsY0FFaEJscEMsS0FBS2dKLEtBQUtDLFNBQVMsK0JBQ3ZCakUsUUFBU3lJLEtBQ1QyWSxRQUFTLENBQ1AyNkIsU0FBVSxDQUNScHhDLE1BQU8zUCxLQUFLZ0osS0FBS0MsU0FBUyxpQkFDMUI4ZixTQUFVdGIsT0FDUm9iLFNBQVcsSUFBSUcsU0FBU3ZiLEtBQUssR0FBR3BFLGNBQWMsbUJBQ3ZDeU0sUUFBUStTLGFBSXJCSSxRQUFTLFdBQ1Q5QyxNQUFPLFNBRUxoUyxRQUFPLE9DbEJWLE1BQU02c0MsdUJBQXVCQyxXQUNsQyxnQkFDRSxNQUFNMytDLFdBQWEyVixNQUFNdkQsVUFHbkJ3c0MsVUFBWTMzQyxLQUFLM0QsTUFBTXRELEtBQUs0ekIsVUFBUyxHQXNNM0MsR0FyTUE1ekIsS0FBS0EsS0FBTzQrQyxVQUFVNStDLEtBQ3RCQSxLQUFLNitDLFNBQVc1M0MsS0FBSzYzQyxXQUdyQjkrQyxLQUFLcUssUUFBVXBELEtBQUszRCxNQUFNK0csUUFDMUJySyxLQUFLKytDLFlBQWMsR0FDbkIvK0MsS0FBS3VqQixPQUFTLEdBQ2R2akIsS0FBS2cvQyxhQUFlLEdBQ3BCaC9DLEtBQUttckMsUUFBVSxHQUNmbnJDLEtBQUtpL0MsU0FBVyxHQUNoQmovQyxLQUFLay9DLFNBQVcsR0FDaEJsL0MsS0FBS20vQyxXQUFhLEdBRWxCbi9DLEtBQUtvL0MsbUJBQ0ZuNEMsS0FBSzNELE1BQU10RCxLQUFLa3BCLFdBQVd4ckIsS0FBS29DLEtBQUsyQyxNQUNwQ04sTUFBTWduQixtQkFBbUJrMkIsU0FDekJwNEMsS0FBSzNELE1BQU10RCxLQUFLa3BCLFdBQVd2QyxVQUN6QnhrQixNQUFNZ25CLG1CQUFtQmsyQixXQUM1QjNoRCxLQUFLb0MsS0FBS3lSLEtBQ2J2UixLQUFLdVIsS0FBTzdULEtBQUtvQyxLQUFLeVIsS0FDdEJ2UixLQUFLcy9DLFdBQ29ELFdBQXZENWhELEtBQUtJLFNBQVNGLElBQUksT0FBUSwwQkFDMUJGLEtBQUtvQyxLQUFLeVIsTUFDOEMsYUFBdkQ3VCxLQUFLSSxTQUFTRixJQUFJLE9BQVEsMEJBQ3pCRixLQUFLSSxTQUFTRixJQUFJLE9BQVEsdUJBRTJCLGFBQXZERixLQUFLSSxTQUFTRixJQUFJLE9BQVEsMEJBQzFCRixLQUFLSSxTQUFTRixJQUFJLE9BQVEseUJBRTFCb0MsS0FBSyxzQkFBdUIsR0FHekIsQ0FBQyxXQUFXZixTQUFTZ0ksS0FBSzNELE1BQU10RCxLQUFLa0MsUUFDbkNsQyxLQUFLQSxLQUFLME4sa0JBQ2IxTixLQUFLQSxLQUFLME4sZ0JBQWtCLENBQzFCMlAsSUFBSyxDQUNIL1ksTUFBTyxLQUNQOEksTUFBTyxhQUNQQyxNQUFPLGtCQUNQak4sUUFBUyxNQUVYa2QsSUFBSyxDQUNIaFosTUFBTyxLQUNQOEksTUFBTyxhQUNQQyxNQUFPLHNCQUNQak4sUUFBUyxNQUVYbWQsSUFBSyxDQUNIalosTUFBTyxLQUNQOEksTUFBTyxhQUNQQyxNQUFPLGNBQ1BqTixRQUFTLE1BRVhvZCxJQUFLLENBQ0hsWixNQUFPLEtBQ1A4SSxNQUFPLGFBQ1BDLE1BQU8sbUJBQ1BqTixRQUFTLE1BRVhxZCxJQUFLLENBQ0huWixNQUFPLEtBQ1A4SSxNQUFPLGFBQ1BDLE1BQU8sb0JBQ1BqTixRQUFTLE1BRVhzZCxJQUFLLENBQ0hwWixNQUFPLEtBQ1A4SSxNQUFPLGFBQ1BDLE1BQU8sc0JBQ1BqTixRQUFTLE1BRVh1ZCxJQUFLLENBQ0hyWixNQUFPLEtBQ1A4SSxNQUFPLGFBQ1BDLE1BQU8sZUFDUGpOLFFBQVMsTUFFWHdkLElBQUssQ0FDSHRaLE1BQU8sS0FDUDhJLE1BQU8sYUFDUEMsTUFBTyxtQkFDUGpOLFFBQVMsUUFLVkosS0FBS0EsS0FBS3dRLFVBQ2J4USxLQUFLQSxLQUFLd1EsUUFBVSxDQUNsQkksR0FBSSxDQUNGdE0sTUFBTyxLQUNQcEYsSUFBSyxLQUNMa08sTUFBTyxLQUNQQyxNQUFPLGFBQ1B1UixNQUFNLEdBRVIzTixHQUFJLENBQ0YzTSxNQUFPLEtBQ1BwRixJQUFLLEtBQ0xrTyxNQUFPLEtBQ1BDLE1BQU8sZUFDUHVSLE1BQU0sR0FFUmdwQixJQUFLLENBQUV0akMsTUFBTyxLQUFNOEksTUFBTyxNQUFPQyxNQUFPLFFBQ3pDb0QsSUFBSyxDQUNIbk0sTUFBTyxLQUNQcEYsSUFBSyxHQUNMa08sTUFBTyxNQUNQQyxNQUFPLFNBQ1B1UixNQUFNLEdBRVJrVCxJQUFLLENBQ0h4dEIsTUFBTyxLQUNQOEksTUFBTyxNQUNQQyxNQUFPLGdCQUNQdVIsTUFBTSxHQUVSOFcsR0FBSSxDQUNGcHhCLE1BQU8sS0FDUDhJLE1BQU8sS0FDUEMsTUFBTyxlQUNQdVIsTUFBTSxHQUVSOFMsTUFBTyxDQUNMcHRCLE1BQU8sS0FDUDhJLE1BQU8sTUFDUEMsTUFBTyxRQUNQdVIsTUFBTSxHQUVSMFMsTUFBTyxDQUFFaHRCLE1BQU8sS0FBTXNhLE1BQU0sS0FJM0I1ZSxLQUFLQSxLQUFLcVEsU0FDYnJRLEtBQUtBLEtBQUtxUSxPQUFTLENBQ2pCQyxlQUFnQixDQUFFcE8sS0FBTSxVQUFXb0MsT0FBTyxHQUMxQ3NjLFlBQWEsQ0FBRTFlLEtBQU0sVUFBV29DLE9BQU8sR0FDdkN1YyxNQUFPLENBQUUzZSxLQUFNLFVBQVdvQyxPQUFPLEdBQ2pDeWMsS0FBTSxDQUFFN2UsS0FBTSxVQUFXb0MsT0FBTyxHQUNoQ3djLE1BQU8sQ0FBRTVlLEtBQU0sVUFBV29DLE9BQU8sR0FDakNvYyxZQUFhLENBQUV4ZSxLQUFNLFVBQVdvQyxPQUFPLEdBQ3ZDcWMsWUFBYSxDQUFFemUsS0FBTSxVQUFXb0MsT0FBTyxLQUl0Q3RFLEtBQUtBLEtBQUtpa0MsWUFDYmprQyxLQUFLQSxLQUFLaWtDLFVBQVksQ0FDcEJzYixvQkFBcUIsQ0FBRXI5QyxLQUFNLFNBQVVvQyxNQUFPLE1BSTdDdEUsS0FBS0EsS0FBS3dNLFFBQ2J4TSxLQUFLQSxLQUFLd00sTUFBUSxDQUNoQncyQixXQUFZLEdBQ1p3SCxJQUFLLEdBQ0xnVixJQUFLLEdBQ0xDLFVBQVcsR0FDWEMsV0FBWSxHQUNaemMsVUFBVyxHQUNYMGMsYUFBYyxHQUNkQyxXQUFZLEtBSVg1L0MsS0FBS0EsS0FBS3cyQixRQUNieDJCLEtBQUtBLEtBQUt3MkIsTUFBUSxDQUFFaVUsUUFBUSxFQUFNb1YsY0FBYyxJQUc3QzcvQyxLQUFLQSxLQUFLOC9DLFNBQ2I5L0MsS0FBS0EsS0FBSzgvQyxPQUFTLENBQ2pCQyxlQUFnQixLQUNoQno3QixXQUFZLEtBQ1owN0IsTUFBTyxLQUNQQyxjQUFlLE9BSWRqZ0QsS0FBS0EsS0FBS2tnRCxjQUNibGdELEtBQUtBLEtBQUtrZ0QsWUFBYyxDQUN0Qm5kLFNBQVUsS0FDVkMsV0FBWSxLQUNaQyxVQUFXLE9BSVZqakMsS0FBS0EsS0FBS2lrQyxZQUFXamtDLEtBQUtBLEtBQUtpa0MsVUFBWSxJQUMzQ2prQyxLQUFLQSxLQUFLcW9DLHVCQUFzQnJvQyxLQUFLQSxLQUFLcW9DLHFCQUF1QixJQUV0RXJvQyxLQUFLb1gsbUJBQXFCblEsS0FBSzNELE1BQU04VCxtQkFDckNwWCxLQUFLb2EsU0FBV25ULEtBQUszRCxNQUFNOFcsU0FDM0JwYSxLQUFLOGdDLGNBQWdCNzVCLEtBQUszRCxNQUFNdzlCLGNBQ2hDOWdDLEtBQUswWCxPQUFTelEsS0FBSzNELE1BQU1vVSxPQUN6QjFYLEtBQUttZ0QsY0FBZ0J6aUQsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGNBR2pEb0MsS0FBS29nRCxPQUFTbjVDLEtBQUszRCxNQUFNeWQsS0FDekIvZ0IsS0FBS3FnRCxRQUFVcDVDLEtBQUszRCxNQUFNdWQsTUFFdEI3Z0IsS0FBSzZILE1BQU8sQ0FDZCxJQUFLLE1BQU1pQyxRQUFROUosS0FBSzZILE1BQU8sQ0FHN0IsR0FBa0IsVUFBZGlDLEtBQUs1SCxLQUFrQixDQUN6QixHQUFJNEgsS0FBSzlKLEtBQUtzckIsV0FBV3ZOLFFBQVMsQ0FDaEMsR0FBSWpVLEtBQUs5SixLQUFLc3JCLFdBQVdwTixVQUVyQnBVLEtBQUs5SixLQUFLd21CLGlCQUNWOW9CLEtBQUtnSixLQUFLQyxTQUFTLG1DQUNuQixDQUNBLE1BQU0yNUMsYUFBZXI1QyxLQUFLM0QsTUFBTXVFLE1BQU1qSyxJQUFJa00sS0FBSysxQixXQUN6Q3lnQixhQUFhbHZDLE9BQU8sQ0FDeEIsc0JBQXVCMVQsS0FBS2dKLEtBQUtDLFNBQy9CLHFDQUdKbUQsS0FBSzlKLEtBQUt3bUIsZUFBaUI5b0IsS0FBS2dKLEtBQUtDLFNBQ25DLG1DQUlOLEdBQUltRCxLQUFLOUosS0FBS3NyQixXQUFXbk4sU0FFckJyVSxLQUFLOUosS0FBS3dtQixpQkFDVjlvQixLQUFLZ0osS0FBS0MsU0FBUyxrQ0FDbkIsQ0FDQSxNQUFNMjVDLGFBQWVyNUMsS0FBSzNELE1BQU11RSxNQUFNakssSUFBSWtNLEtBQUsrMUIsV0FDekN5Z0IsYUFBYWx2QyxPQUFPLENBQ3hCLHNCQUF1QjFULEtBQUtnSixLQUFLQyxTQUMvQixvQ0FHSm1ELEtBQUs5SixLQUFLd21CLGVBQWlCOW9CLEtBQUtnSixLQUFLQyxTQUNuQyxtQ0FNUixHQUE2QixjQUF6Qk0sS0FBSzNELE1BQU10RCxLQUFLa0MsTUFDbEIsR0FBSStJLE1BQU1wRyxPQUFPaUYsS0FBSzlKLEtBQUtzRSxRQUFTLENBQ2xDLElBQUlBLE1BQVEsS0FDWixNQUFNa2pDLE9BQVMsR0FDZixJQUFLLE1BQU96a0MsSUFBS3VCLFNBQVV0RCxPQUFPQyxRQUNoQzZiLEtBQUsxYyxRQUFRcWdCLFlBRVQxZCxJQUFJbUIsV0FBVyxNQUFRSSxNQUFNSixXQUFXLFdBQzFDc2pDLE9BQU96a0MsSUFBSTZCLFVBQVUsSUFBTTZpQyxZQUN6QnhnQyxLQUNBM0MsTUFBTU0sVUFBVSxLQUl0QixJQUNFTixhQUNRLElBQUl0RyxLQUFLOEwsS0FBSzlKLEtBQUtzRSxNQUFPa2pDLFFBQVExd0IsU0FBUyxDQUMvQzFZLE9BQU8sS0FFVEcsTUFDRixNQUFPaUMsS0FDUDhpQyxRQUFRNzhCLEtBQ04sNEJBQTRCcUQsS0FBSzlKLEtBQUtzRSxtQkFBbUJ3RixLQUFLbkcsUUFFaEVXLE1BQVEsS0FHVixHQUFJQSxNQUFPLENBQ1R3RixLQUFLOUosS0FBS3NFLE1BQVFBLE1BQ2xCLE1BQU1nOEMsYUFBZXI1QyxLQUFLM0QsTUFBTXVFLE1BQU1qSyxJQUFJa00sS0FBSysxQixXQUN6Q3lnQixhQUFhbHZDLE9BQU8sQ0FDeEIsYUFBYzlNLGNBSWYsQ0FDTCxNQUFNdUYsTUFBUTVDLEtBQUszRCxNQUFNdUUsTUFBTWpLLElBQUlrTSxLQUFLKzFCLEtBR3hDLEdBRkEvMUIsS0FBSzlKLEtBQUtzbUIsV0FBYXpjLE1BQU0wMkMsWUFFekJ6MkMsS0FBSzlKLEtBQUtzRSxNQUFPLENBQ25CLE1BQU1BLE1BQVF3RixLQUFLOUosS0FBS3NFLE1BSXhCLElBQUlrOEMsWUFIUTEyQyxLQUFLOUosS0FBSzhZLGFBQWFDLFdBQy9CNVIsU0FBUzJDLEtBQUs5SixLQUFLOFksWUFBWUMsWUFDL0IsR0FDbUI1UixTQUFTMkMsS0FBSzlKLEtBQUtzRSxPQUFTdUYsTUFBTXZGLE1BQ3JEazhDLFlBQWMsSUFBR0EsV0FBYSxZQUM1QnY1QyxLQUFLM0QsTUFBTW05Qyx3QkFBd0IsT0FBUSxDQUMvQyxDQUNFNWdCLElBQUsvMUIsS0FBSysxQixJQUNWLDhCQUErQjJnQixXQUMvQixhQUFjLFFBR2IxMkMsS0FBSzlKLEtBQUs4WSxjQUFhaFAsS0FBSzlKLEtBQUs4WSxZQUFjLElBQ3BEaFAsS0FBSzlKLEtBQUs4WSxZQUFZQyxXQUFheW5DLFdBQ25DMTJDLEtBQUs5SixLQUFLc0UsTUFBUUEsV0FDYndGLEtBQUs5SixLQUFLc0UsTUFBUXVGLE1BQU12RixPQUluQyxJQUFJc2hCLEtBQU81bEIsS0FBSysrQyxZQUFZajFDLEtBQUs1SCxNQUM1QjBqQixPQUNIQSxLQUFPLEdBQ1A1bEIsS0FBSysrQyxZQUFZajFDLEtBQUs1SCxNQUFRMGpCLE1BRWhDQSxLQUFLNW1CLEtBQUs4SyxNQUdaLElBQUssTUFBTTQyQyxZQUFZMWdELEtBQUsrK0MsWUFDMUIvK0MsS0FBSysrQyxZQUFZMkIsVUFBVXZvQixNQUFLLENBQUMxM0IsRUFBR2lzQixLQUNsQyxJQUFJdXFCLElBQ0FDLElBMENKLE9BekNJejJDLEVBQUVULEtBQUtzckIsWUFBY29CLEVBQUUxc0IsS0FBS3NyQixZQUM5QjJyQixJQUNFeDJDLEVBQUVULEtBQUtzckIsV0FBV3ZOLGNBQ2UsSUFBMUJ0ZCxFQUFFVCxLQUFLd21CLGVBQ1YvbEIsRUFBRVQsS0FBS3dtQixlQUNKbTZCLFVBQVUsT0FDVmovQyxRQUFRLG1CQUFvQixJQUM1Qm9CLGNBQ0hyQyxFQUFFa0QsS0FDQ2c5QyxVQUFVLE9BQ1ZqL0MsUUFBUSxtQkFBb0IsSUFDNUJvQixjQUNIckMsRUFBRWtELEtBQ0NnOUMsVUFBVSxPQUNWai9DLFFBQVEsbUJBQW9CLElBQzVCb0IsY0FDVG8wQyxJQUNFeHFCLEVBQUUxc0IsS0FBS3NyQixXQUFXdk4sY0FDZSxJQUExQjJPLEVBQUUxc0IsS0FBS3dtQixlQUNWa0csRUFBRTFzQixLQUFLd21CLGVBQ0ptNkIsVUFBVSxPQUNWai9DLFFBQVEsbUJBQW9CLElBQzVCb0IsY0FDSDRwQixFQUFFL29CLEtBQ0NnOUMsVUFBVSxPQUNWai9DLFFBQVEsbUJBQW9CLElBQzVCb0IsY0FDSDRwQixFQUFFL29CLEtBQ0NnOUMsVUFBVSxPQUNWai9DLFFBQVEsbUJBQW9CLElBQzVCb0IsZ0JBRVRtMEMsSUFBTXgyQyxFQUFFa0QsS0FDTGc5QyxVQUFVLE9BQ1ZqL0MsUUFBUSxtQkFBb0IsSUFDNUJvQixjQUNIbzBDLElBQU14cUIsRUFBRS9vQixLQUNMZzlDLFVBQVUsT0FDVmovQyxRQUFRLG1CQUFvQixJQUM1Qm9CLGVBRUVtMEMsSUFBSS9JLGNBQWNnSixRQUs3QmwzQyxLQUFLdWpCLE9BQVN2akIsS0FBSzZILE1BQ2hCMUksUUFBTzJLLE1BQXNCLFVBQWRBLEtBQUs1SCxPQUNwQmkyQixNQUFLLENBQUMxM0IsRUFBR2lzQixLQUNSLElBQUl1cUIsSUFDQUMsSUFzQ0osT0FyQ0l6MkMsRUFBRVQsS0FBS3NyQixZQUFjb0IsRUFBRTFzQixLQUFLc3JCLFlBQzlCMnJCLElBQU14MkMsRUFBRVQsS0FBS3NyQixXQUFXdk4sUUFDcEJ0ZCxFQUFFVCxLQUFLd21CLGVBQ0ptNkIsVUFBVSxPQUNWai9DLFFBQVEsbUJBQW9CLElBQzVCb0IsY0FDSHJDLEVBQUVrRCxLQUNDZzlDLFVBQVUsT0FDVmovQyxRQUFRLG1CQUFvQixJQUM1Qm9CLGNBQ0hyQyxFQUFFa0QsS0FDQ2c5QyxVQUFVLE9BQ1ZqL0MsUUFBUSxtQkFBb0IsSUFDNUJvQixjQUNQbzBDLElBQU14cUIsRUFBRTFzQixLQUFLc3JCLFdBQVd2TixRQUNwQjJPLEVBQUUxc0IsS0FBS3dtQixlQUNKbTZCLFVBQVUsT0FDVmovQyxRQUFRLG1CQUFvQixJQUM1Qm9CLGNBQ0g0cEIsRUFBRS9vQixLQUNDZzlDLFVBQVUsT0FDVmovQyxRQUFRLG1CQUFvQixJQUM1Qm9CLGNBQ0g0cEIsRUFBRS9vQixLQUNDZzlDLFVBQVUsT0FDVmovQyxRQUFRLG1CQUFvQixJQUM1Qm9CLGdCQUVQbTBDLElBQU14MkMsRUFBRWtELEtBQ0xnOUMsVUFBVSxPQUNWai9DLFFBQVEsbUJBQW9CLElBQzVCb0IsY0FDSG8wQyxJQUFNeHFCLEVBQUUvb0IsS0FDTGc5QyxVQUFVLE9BQ1ZqL0MsUUFBUSxtQkFBb0IsSUFDNUJvQixlQUVEbTBDLElBQU1DLEtBQWEsRUFDbkJELElBQU1DLElBQVksRUFDZixLQUdYbDNDLEtBQUs0Z0QsWUFBYzVnRCxLQUFLdWpCLE9BQU9wa0IsUUFDN0IwSyxRQUNtQyxJQUFqQ0EsTUFBTTdKLEtBQUtzckIsV0FBV3JOLFNBQ2EsSUFBbkNwVSxNQUFNN0osS0FBS3NyQixXQUFXcE4sV0FFMUJsZSxLQUFLNmdELFlBQWM3Z0QsS0FBS3VqQixPQUFPcGtCLFFBQzdCMEssUUFDbUMsSUFBakNBLE1BQU03SixLQUFLc3JCLFdBQVdyTixTQUNZLElBQWxDcFUsTUFBTTdKLEtBQUtzckIsV0FBV25OLFVBRzFCLE1BQU0yaUMsVUFBWTlnRCxLQUFLdWpCLE9BQU9wa0IsUUFDNUIwSyxRQUEwQyxJQUFqQ0EsTUFBTTdKLEtBQUtzckIsV0FBV3JOLFNBRWpDLEdBQUk2aUMsVUFDRixJQUFLLE1BQU1qM0MsU0FBU2kzQyxVQUNsQjlnRCxLQUFLZy9DLGFBQWFuMUMsTUFBTWcyQixLQUFPaDJCLE1BSW5DLE1BQU1zaEMsUUFBVW5yQyxLQUFLKytDLFlBQVkvd0MsT0FFakMsR0FBSW05QixRQUNGLElBQUssTUFBTW45QixVQUFVbTlCLFFBQVMsQ0FXNUIsR0FWQW45QixPQUFPK3lDLG9CQUMyQixJQUFoQy95QyxPQUFPaE8sS0FBS3NyQixXQUFXMU0sT0FDUyxJQUFoQzVRLE9BQU9oTyxLQUFLc3JCLFdBQVczTSxLQUNwQjNRLE9BQU9oTyxLQUFLMDJDLE9BQU0xb0MsT0FBT2hPLEtBQUswMkMsS0FBTyxHQUUxQzFvQyxPQUFPZ3pDLFVBQVcsRUFLZ0IsS0FBOUJoekMsT0FBT2hPLEtBQUs2SixNQUFNcWlCLEtBQUt6cEIsR0FFekJ1TCxPQUFPZ3pDLFVBQVcsTUFDYixDQUdMLEdBQUloaEQsS0FBS2cvQyxhQUFhaHhDLE9BQU9oTyxLQUFLNkosTUFBTXFpQixLQUFLenBCLElBQUssQ0FDaEQsTUFBTW9ILE1BQVE1QyxLQUFLM0QsTUFBTXVFLE1BQU1qSyxJQUFJb1EsT0FBT2hPLEtBQUs2SixNQUFNcWlCLEtBQUt6cEIsSUFDMUR1TCxPQUFPaE8sS0FBSzZKLE1BQU1xaUIsS0FBS3ZvQixLQUNyQjNELEtBQUtnL0MsYUFBYWh4QyxPQUFPaE8sS0FBSzZKLE1BQU1xaUIsS0FBS3pwQixJQUFJa0IsS0FDL0NxSyxPQUFPaE8sS0FBSzZKLE1BQU1xaUIsS0FBSzVuQixNQUFRdUYsTUFBTXZGLFdBRXJDMEosT0FBT2d6QyxVQUFXLEVBR3BCLEdBQXdDLEtBQXBDaHpDLE9BQU9oTyxLQUFLNkosTUFBTXNpQixXQUFXMXBCLElBQzNCekMsS0FBS2cvQyxhQUFhaHhDLE9BQU9oTyxLQUFLNkosTUFBTXNpQixXQUFXMXBCLElBQUssQ0FDdEQsTUFBTW9ILE1BQVE1QyxLQUFLM0QsTUFBTXVFLE1BQU1qSyxJQUM3Qm9RLE9BQU9oTyxLQUFLNkosTUFBTXNpQixXQUFXMXBCLElBRS9CdUwsT0FBT2hPLEtBQUs2SixNQUFNc2lCLFdBQVd4b0IsS0FDM0IzRCxLQUFLZy9DLGFBQWFoeEMsT0FBT2hPLEtBQUs2SixNQUFNc2lCLFdBQVcxcEIsSUFBSWtCLEtBQ3JEcUssT0FBT2hPLEtBQUs2SixNQUFNc2lCLFdBQVc3bkIsTUFBUXVGLE1BQU12RixPQUtqRDBKLE9BQU9oTyxLQUFLaWhELFlBQWMsR0FDMUIsSUFBSyxNQUFPbCtDLElBQUt1QixTQUFVdEQsT0FBT0MsUUFBUTZiLEtBQUtpbkIsa0JBQW1CLENBQ2hFLE1BQU03RyxTQUFXLEdBQ2pCQSxTQUFTejZCLEdBQUtNLElBQ2RtNkIsU0FBU3Y1QixLQUFPVyxNQUNoQjQ0QixTQUFTNTRCLE9BQXdDLElBQWhDMEosT0FBT2hPLEtBQUtzckIsV0FBV3ZvQixLQUN4Q2lMLE9BQU9oTyxLQUFLaWhELFlBQVlqaUQsS0FBS2srQixVQUcvQmw5QixLQUFLbXJDLFFBQVFuOUIsT0FBTzZ4QixLQUFPN3hCLE9BQ3ZCQSxPQUFPaE8sS0FBS3NyQixXQUFXak4sS0FBTXJlLEtBQUtpL0MsU0FBU2pnRCxLQUFLZ1AsUUFDL0NoTyxLQUFLay9DLFNBQVNsZ0QsS0FBS2dQLFFBSTVCLE1BQU12SyxNQUFRd0QsS0FBS3hELE1BTW5CLEdBTEF6RCxLQUFLaUQsUUFBVVEsTUFDWCxHQUFHQSxNQUFNMkssUUFBUTNMLEdBQUtnQixNQUFNMkssT0FBTzNMLEdBQUssV0FBV2dCLE1BQU1oQixLQUN6RCxLQUVKekMsS0FBS2toRCwwQkFBMkIsRUFDNUJsaEQsS0FBS0EsS0FBSzBOLGdCQUNaLElBQUssTUFBTXZELGtCQUFrQm5KLE9BQU9nTSxPQUFPaE4sS0FBS0EsS0FBSzBOLGlCQUM5Q3ZELGVBQWU3RixRQUFPNkYsZUFBZTAwQyxVQUFXLEdBQ3JEMTBDLGVBQWU1QyxLQUFPckosS0FBSzZTLE1BQU01RyxlQUFlN0YsTUFBUSxHQUN4RDZGLGVBQWUzQyxRQUFVdEosS0FBSzZTLE1BQU01RyxlQUFlN0YsTUFBUSxHQUd0RDZGLGVBQWU3RixPQUFVNkYsZUFBZS9KLFFBRzNDK0osZUFBZXNaLFNBQVUsRUFGekJ0WixlQUFlc1osU0FBVSxHQU10QnRaLGVBQWU3RixPQUFTNkYsZUFBZS9KLFVBQzFDK0osZUFBZSsyQywwQkFBMkIsR0FHNUNsaEQsS0FBS2toRCx5QkFDSGxoRCxLQUFLa2hELDBCQUNMLzJDLGVBQWUrMkMseUJBTXZCLEdBQUssQ0FBQyxVQUFXLGFBQWFqaUQsU0FBU2dJLEtBQUszRCxNQUFNdEQsS0FBS2tDLE1BSXJEbEMsS0FBS0EsS0FBS3dRLFFBQVFJLEdBQUdnTyxNQUFPLEVBQzVCNWUsS0FBS0EsS0FBS3dRLFFBQVFTLEdBQUcyTixNQUFPLEVBQzVCNWUsS0FBS0EsS0FBS3dRLFFBQVFDLElBQUltTyxNQUFPLEVBQzdCNWUsS0FBS0EsS0FBS3dRLFFBQVFzaEIsSUFBSWxULE1BQU8sRUFDN0I1ZSxLQUFLQSxLQUFLd1EsUUFBUWtsQixHQUFHOVcsTUFBTyxFQUM1QjVlLEtBQUtBLEtBQUt3USxRQUFRa2hCLE1BQU05UyxNQUFPLE1BVDZCLENBQzVELE1BQU1BLEtBQU8zWCxLQUFLM0QsTUFBTWs5QixxQkFDeEJ4Z0MsS0FBS0EsS0FBT3N5QixZQUFZdHlCLEtBQUtBLEtBQU00ZSxNQStIckMsT0FySEE1ZSxLQUFLQSxLQUFLd1EsUUFBUXNoQixJQUFJeHRCLE1BQVEyQyxLQUFLM0QsTUFBTXd1QixJQUN6Qzl4QixLQUFLQSxLQUFLd1EsUUFBUWtsQixHQUFHcHhCLE1BQVEyQyxLQUFLM0QsTUFBTW95QixHQUN4QzExQixLQUFLQSxLQUFLd1EsUUFBUWtoQixNQUFNcHRCLE1BQVEyQyxLQUFLM0QsTUFBTW91QixXQUVOLElBQTFCenFCLEtBQUszRCxNQUFNNjlDLFlBQThCbDZDLEtBQUszRCxNQUFNd08sVUFDN0Q3SyxLQUFLM0QsTUFBTThOLE9BQ1QsQ0FBRSx5QkFBMEJuSyxLQUFLM0QsTUFBTXd1QixLQUN2QyxDQUFFamdCLFFBQVEsSUFFWjVLLEtBQUszRCxNQUFNOE4sT0FDVCxDQUFFLHVCQUF3Qm5LLEtBQUszRCxNQUFNd3VCLEtBQ3JDLENBQUVqZ0IsUUFBUSxJQUVaNUssS0FBSzNELE1BQU04TixPQUNULENBQUUsd0JBQXlCbkssS0FBSzNELE1BQU1veUIsSUFDdEMsQ0FBRTdqQixRQUFRLElBRVo1SyxLQUFLM0QsTUFBTThOLE9BQ1QsQ0FBRSw2QkFBOEJuSyxLQUFLM0QsTUFBTW91QixPQUMzQyxDQUFFN2YsUUFBUSxJQUVaNUssS0FBSzNELE1BQU04TixPQUNULENBQUUsMkJBQTRCbkssS0FBSzNELE1BQU1vdUIsT0FDekMsQ0FBRTdmLFFBQVEsS0FLVjdSLEtBQUtBLEtBQUt3USxRQUFRUyxHQUFHM00sTUFBUSxJQUFHdEUsS0FBS0EsS0FBS3dRLFFBQVFTLEdBQUczTSxNQUFRLE1BQzdEdEUsS0FBS0EsS0FBS3dRLFFBQVFDLElBQUluTSxNQUFRLElBQUd0RSxLQUFLQSxLQUFLd1EsUUFBUUMsSUFBSW5NLE1BQVEsTUFFL0R0RSxLQUFLQSxLQUFLd1EsUUFBUUksR0FBR2dPLE1BR2tCLE1BQXZDNWUsS0FBS0EsS0FBSzBOLGdCQUFnQjZQLElBQUlqWixPQUNTLE1BQXZDdEUsS0FBS0EsS0FBSzBOLGdCQUFnQjRQLElBQUloWixRQUU5QnRFLEtBQUtBLEtBQUt3USxRQUFRSSxHQUFHMVIsSUFBTStILEtBQUszRCxNQUFNdU4sT0FJdEM3USxLQUFLQSxLQUFLd1EsUUFBUVMsR0FBRzJOLE1BRW9CLE1BQXZDNWUsS0FBS0EsS0FBSzBOLGdCQUFnQmlRLElBQUlyWixRQUNoQ3RFLEtBQUtBLEtBQUt3USxRQUFRUyxHQUFHL1IsSUFBTWhCLEtBQUs2UyxNQUM5Qi9RLEtBQUtBLEtBQUswTixnQkFBZ0JpUSxJQUFJclosTUFBUSxJQUt4Q3RFLEtBQUtBLEtBQUt3USxRQUFRQyxJQUFJbU8sT0FDeEI1ZSxLQUFLQSxLQUFLd1EsUUFBUUMsSUFBSXZSLElBQU0rSCxLQUFLM0QsTUFBTWdULFNBSXZDdFcsS0FBS0EsS0FBS3dRLFFBQVFTLEdBQUczTSxNQUFRdEUsS0FBS0EsS0FBS3dRLFFBQVFTLEdBQUcvUixLQUN0QixNQUE1QmMsS0FBS0EsS0FBS3dRLFFBQVFTLEdBQUcvUixPQUVyQmMsS0FBS0EsS0FBS3dRLFFBQVFTLEdBQUczTSxNQUFRdEUsS0FBS0EsS0FBS3dRLFFBQVFTLEdBQUcvUixNQUdsRGMsS0FBS0EsS0FBS3dRLFFBQVFJLEdBQUd0TSxNQUFRdEUsS0FBS0EsS0FBS3dRLFFBQVFJLEdBQUcxUixLQUN0QixNQUE1QmMsS0FBS0EsS0FBS3dRLFFBQVFJLEdBQUcxUixPQUVyQmMsS0FBS0EsS0FBS3dRLFFBQVFJLEdBQUd0TSxNQUFRdEUsS0FBS0EsS0FBS3dRLFFBQVFJLEdBQUcxUixLQUlwQixNQUE5QmMsS0FBS0EsS0FBS3dRLFFBQVFJLEdBQUd0TSxPQUNPLE1BQTVCdEUsS0FBS0EsS0FBS3dRLFFBQVFJLEdBQUcxUixNQUVyQmMsS0FBS0EsS0FBS3dRLFFBQVFJLEdBQUd0TSxNQUFRdEUsS0FBS0EsS0FBS3dRLFFBQVFJLEdBQUcxUixLQUdwQixNQUE5QmMsS0FBS0EsS0FBS3dRLFFBQVFTLEdBQUczTSxPQUNPLE1BQTVCdEUsS0FBS0EsS0FBS3dRLFFBQVFTLEdBQUcvUixNQUVyQmMsS0FBS0EsS0FBS3dRLFFBQVFTLEdBQUczTSxNQUFRdEUsS0FBS0EsS0FBS3dRLFFBQVFTLEdBQUcvUixLQUcvQyxDQUFDLFdBQVdELFNBQVNnSSxLQUFLM0QsTUFBTXRELEtBQUtrQyxRQUVQLE1BQS9CbEMsS0FBS0EsS0FBS3dRLFFBQVFDLElBQUluTSxPQUNpQixNQUF2Q3RFLEtBQUtBLEtBQUswTixnQkFBZ0JpUSxJQUFJclosUUFFOUJ0RSxLQUFLQSxLQUFLd1EsUUFBUUMsSUFBSW5NLE1BQVF0RSxLQUFLQSxLQUFLME4sZ0JBQWdCaVEsSUFBSXJaLE9BRTFEdEUsS0FBS0EsS0FBS3dRLFFBQVFDLElBQUluTSxNQUFRdEUsS0FBS0EsS0FBS3dRLFFBQVFDLElBQUl2UixNQUN0RGMsS0FBS0EsS0FBS3dRLFFBQVFDLElBQUluTSxNQUFRdEUsS0FBS0EsS0FBS3dRLFFBQVFDLElBQUl2UixLQUdsRGMsS0FBS0EsS0FBS2lrQyxxQkFBcUJ3USxPQUFTejBDLEtBQUtBLEtBQUtpa0MsVUFBVTdrQyxTQUM5RFksS0FBS0EsS0FBS2lrQyxVQUFVLEdBQUdtZCxTQUFVLEVBQ2pDcGhELEtBQUtBLEtBQUtpa0MsVUFBVWprQyxLQUFLQSxLQUFLaWtDLFVBQVU3a0MsT0FBUyxHQUFHaWlELFFBQVMsR0FHL0RyaEQsS0FBS0EsS0FBS3NoRCx3QkFBMEIsR0FDcEN0aEQsS0FBS0EsS0FBS3NoRCx3QkFBd0JoOUMsTUFBUXRFLEtBQUtBLEtBQUt3USxRQUFRQyxJQUFJQyxVQUM1RDFRLEtBQUtBLEtBQUt3USxRQUFRQyxJQUFJQyxVQUN0QixFQUNKMVEsS0FBS0EsS0FBS3NoRCx3QkFBd0JwaUQsSUFBTWhCLEtBQUs2UyxNQUMzQy9RLEtBQUtBLEtBQUt3USxRQUFRQyxJQUFJbk0sTUFBUSxJQUdsQ3RFLEtBQUt1aEQsb0JBQXFCLEVBQzFCdmhELEtBQUt3aEQsb0JBQXFCLEVBQzFCeGhELEtBQUt5aEQscUJBQXNCLEVBQzNCemhELEtBQUswaEQsc0JBQXVCLEVBQzVCMWhELEtBQUsyaEQsdUJBQXdCLEVBQzdCM2hELEtBQUs0aEQsc0JBQXVCLEVBUXJCNWhELEtBSVQsb0JBQXFCSSxTQUNuQixJQUFJbW5DLGNBQWdCbm5DLFFBQ3BCLElBQUssTUFBTzJDLElBQUt1QixTQUFVdEQsT0FBT0MsUUFBUTZiLEtBQUsxYyxRQUFRcWdCLFlBQ3JEOG1CLGNBQWdCQSxjQUFjN2xDLFFBQVFxQixJQUFLdUIsT0FFN0MsT0FBT2lqQyxjQUdULGVBRUUsTUFEQWhoQyxHQUFHQyxjQUFjc04sTUFBTSxpQ0FDakIsSUFBSUgsTUFBTSx5REFLbEJrdUMsZ0JBVUEzK0Isa0JBQW1CL1gsTUFJakIsR0FIQXdLLE1BQU11TixrQkFBa0IvWCxNQUdwQmxFLEtBQUszRCxNQUFNd08sY0FBNEMsSUFBMUI3SyxLQUFLM0QsTUFBTTY5QyxXQUE0QixDQUN0RWgyQyxLQUNHOEIsS0FBSyx5QkFDTDJYLEdBQUcsYUFBYXhqQixPQUFTNkYsS0FBSzY2QyxzQkFBc0IxZ0QsU0FDdkQrSixLQUNHOEIsS0FBSyxvQkFDTDJYLEdBQUcsYUFBYXhqQixPQUFTNkYsS0FBSzg2QyxpQkFBaUIzZ0QsU0FDbEQrSixLQUNHOEIsS0FBSyxjQUNMMlgsR0FBRyxhQUFheGpCLE9BQVM2RixLQUFLKzZDLGdCQUFnQjVnRCxTQUVqRCtKLEtBQ0c4QixLQUFLLHlCQUNMZzFDLFlBQVloN0MsS0FBS2k3QyxlQUFlemlDLEtBQUt4WSxPQUN4Q2tFLEtBQ0c4QixLQUFLLHdCQUNMZzFDLFlBQVloN0MsS0FBS2k3QyxlQUFlemlDLEtBQUt4WSxPQUN4Q2tFLEtBQ0c4QixLQUFLLDZCQUNMZzFDLFlBQVloN0MsS0FBS2k3QyxlQUFlemlDLEtBQUt4WSxPQUN4Q2tFLEtBQ0c4QixLQUFLLHlCQUNMZzFDLFlBQVloN0MsS0FBS2k3QyxlQUFlemlDLEtBQUt4WSxPQUV4Q2tFLEtBQ0c4QixLQUFLLHlCQUNMa1csTUFBTWxjLEtBQUtrN0MseUJBQXlCMWlDLEtBQUt4WSxPQUM1Q2tFLEtBQUs4QixLQUFLLHdCQUF3QmtXLE1BQU1sYyxLQUFLbTdDLGlCQUFpQjNpQyxLQUFLeFksT0FDbkVrRSxLQUFLOEIsS0FBSyxnQkFBZ0JrVyxNQUFNbGMsS0FBS203QyxpQkFBaUIzaUMsS0FBS3hZLE9BQzNEa0UsS0FDRzhCLEtBQUssNkJBQ0xrVyxNQUFNbGMsS0FBS283QyxrQkFBa0I1aUMsS0FBS3hZLE9BQ3JDa0UsS0FBSzhCLEtBQUssU0FBU2tXLE1BQU1sYyxLQUFLcTdDLGVBQWU3aUMsS0FBS3hZLE9BQ2xEa0UsS0FBSzhCLEtBQUssU0FBU2tXLE1BQU1sYyxLQUFLczdDLGVBQWU5aUMsS0FBS3hZLE9BQ2xEa0UsS0FBSzhCLEtBQUssWUFBWWtXLE1BQU1sYyxLQUFLdTdDLGtCQUFrQi9pQyxLQUFLeFksT0FDeERrRSxLQUNHOEIsS0FBSyx3QkFDTGtXLE1BQU1sYyxLQUFLdzdDLDJCQUEyQmhqQyxLQUFLeFksT0FDOUNrRSxLQUNHOEIsS0FBSywyQkFDTGtXLE1BQU1sYyxLQUFLeTdDLDhCQUE4QmpqQyxLQUFLeFksT0FDakRrRSxLQUFLOEIsS0FBSyxrQkFBa0JrVyxNQUFNbGMsS0FBSzhyQixVQUFVdFQsS0FBS3hZLE9BQ3REa0UsS0FBSzhCLEtBQUssZ0JBQWdCa1csTUFBTWxjLEtBQUswN0MsY0FBY2xqQyxLQUFLeFksUUFHcER2SixLQUFLb0MsS0FBS3lSLE1BQVE3VCxLQUFLSSxTQUFTRixJQUFJLE9BQVEsMkJBQzlDdU4sS0FBSzhCLEtBQUssa0JBQWtCa1csTUFBTWxjLEtBQUsyN0MsZ0JBQWdCbmpDLEtBQUt4WSxPQUM1RGtFLEtBQUs4QixLQUFLLG1CQUFtQmtXLE1BQU1sYyxLQUFLNDdDLGdCQUFnQnBqQyxLQUFLeFksT0FDN0RrRSxLQUFLOEIsS0FBSyxhQUFha1csTUFBTWxjLEtBQUs2N0MsS0FBS3JqQyxLQUFLeFksT0FDNUNrRSxLQUFLOEIsS0FBSyxZQUFZa1csTUFBTWxjLEtBQUs4N0MsT0FBT3RqQyxLQUFLeFksUUFHL0NrRSxLQUFLOEIsS0FBSyxnQkFBZ0JrVyxNQUFNbGMsS0FBSys3QyxjQUFjdmpDLEtBQUt4WSxPQUV4RGtFLEtBQUs4QixLQUFLLHFCQUFxQmtXLE9BQU0vaEIsT0FBUzZGLEtBQUtnOEMsWUFBWTdoRCxTQUMvRCtKLEtBQ0c4QixLQUFLLHlCQUNMa1csT0FBTS9oQixPQUFTNkYsS0FBS2k4QyxjQUFjOWhELFNBQ3JDK0osS0FDRzhCLEtBQUssMEJBQ0xrVyxPQUFNL2tCLE1BQUFBLE9BQWU2SSxLQUFLazhDLG1CQUFtQi9oRCxTQUNoRCtKLEtBQUs4QixLQUFLLGtCQUFrQmtXLE9BQU0vaEIsT0FBUzZGLEtBQUttOEMsZ0JBQWdCaGlELFNBQ2hFK0osS0FDRzhCLEtBQUssa0JBQ0wyWCxHQUFHLGVBQWV4akIsT0FBUzZGLEtBQUttOEMsZ0JBQWdCaGlELFNBQ25EK0osS0FBSzhCLEtBQUssYUFBYWtXLE1BQU1sYyxLQUFLbzhDLFVBQVU1akMsS0FBS3hZLE9BQ2pEa0UsS0FBSzhCLEtBQUssY0FBY3EyQyxTQUFTcjhDLEtBQUtzOEMsZ0JBQWdCOWpDLEtBQUt4WSxPQUMzRGtFLEtBQUt5WixHQUFHLFFBQVMsaUJBQWtCM2QsS0FBS3U4QyxnQkFBZ0IvakMsS0FBS3hZLE9BRTdEa0UsS0FBSzhCLEtBQUsscUJBQXFCa1csTUFBTWxjLEtBQUt3OEMsbUJBQW1CaGtDLEtBQUt4WSxPQUNsRWtFLEtBQUs4QixLQUFLLG1CQUFtQmtXLE1BQU1sYyxLQUFLeThDLGlCQUFpQmprQyxLQUFLeFksT0FFOUQsTUFBTTA4QyxZQUFjeDRDLEtBQUs4QixLQUFLLG9CQUM5QixJQUFLLE1BQU0yMkMsY0FBY0QsWUFDdkJDLFdBQVdDLGlCQUFpQixTQUFTemlELE9BQVM2RixLQUFLNjhDLFNBQVMxaUQsUUFBUSxDQUNsRTJpRCxTQUFTLElBTVY5OEMsS0FBS3BGLFFBQVFnOUMsV0FFbEIxekMsS0FBSzhCLEtBQUssZ0JBQWdCa1csT0FBTS9oQixPQUFTNkYsS0FBSys4QyxlQUFlNWlELFNBQzdEK0osS0FBSzhCLEtBQUssZUFBZWtXLE1BQU1sYyxLQUFLZzlDLGFBQWF4a0MsS0FBS3hZLE9BR3REa0UsS0FBSzhCLEtBQUssZ0JBQWdCcTJDLFVBQVNsaUQsT0FBUzZGLEtBQUtpOUMsbUJBQW1COWlELFNBQ3BFK0osS0FBSzhCLEtBQUssY0FBY2tXLE9BQU0vaEIsT0FBUzZGLEtBQUtpOUMsbUJBQW1COWlELFNBRy9EK0osS0FBSzhCLEtBQUssZ0JBQWdCa1csT0FBTS9rQixNQUFBQSxLQUM5QixNQUFNaWxCLEdBQUt6SCxFQUFFdW9DLEdBQUc3Z0MsZUFBZThnQyxRQUFRLFNBQ2pDQyxhQUFlcDlDLEtBQUszRCxNQUFNdUUsTUFBTWpLLElBQUl5bEIsR0FBR3JqQixLQUFLLFVBQVcsQ0FDM0Rza0QsUUFBUSxVQUVKRCxhQUFhNWhCLFNBQ25CcGYsR0FBR2toQyxRQUFRLEtBQUssSUFBTXQ5QyxLQUFLNEssUUFBTyxRQUdwQzFHLEtBQUs4QixLQUFLLGFBQWFrVyxPQUFNZ2hDLEtBQzNCLE9BQVFBLEdBQUc3Z0MsY0FBY3BqQixRQUFRZ0MsTUFDL0IsSUFBSyxPQUNIK0UsS0FBSzNELE1BQU1raEQsZ0JBQWdCTCxJQUMzQixNQUNGLElBQUssT0FDSGw5QyxLQUFLM0QsTUFBTW1oRCxnQkFBZ0JOLElBQzNCLE1BQ0YsSUFBSyxRQUNIbDlDLEtBQUszRCxNQUFNb2hELGlCQUFpQlAsSUFDNUIsTUFDRixJQUFLLFFBQ0hsOUMsS0FBSzNELE1BQU1xaEQsaUJBQWlCUixJQUM1QixNQUNGLElBQUssU0FDSGw5QyxLQUFLM0QsTUFBTXNoRCxrQkFBa0JULFFBS25DaDVDLEtBQUs4QixLQUFLLGVBQWVrVyxNQUFNbGMsS0FBSzQ5QyxhQUFhcGxDLEtBQUt4WSxPQUV0RGtFLEtBQUs4QixLQUFLLG9CQUFvQmtXLE9BQU0sS0FDbENsYyxLQUFLM0QsTUFBTXFpQyxzQkFHYng2QixLQUFLOEIsS0FBSyxtQkFBbUJrVyxPQUFNZ2hDLEtBQ2pDLE1BQU0zZ0MsTUFBUXJjLFNBQ1pnOUMsR0FBRzdnQyxjQUFjMUcsUUFBUSxnQkFBZ0IxYyxRQUFRc2pCLE9BRW5EdmMsS0FBSzNELE1BQU13aEQsaUJBQWlCdGhDLFVBRzlCclksS0FBSzhCLEtBQUssb0JBQW9Ca1csT0FBTWdoQyxLQUNsQyxNQUFNM2dDLE1BQVFyYyxTQUNaZzlDLEdBQUc3Z0MsY0FBYzFHLFFBQVEsZ0JBQWdCMWMsUUFBUXNqQixPQUVuRHZjLEtBQUszRCxNQUFNeWhELGlCQUFpQnZoQyxVQUc5QnJZLEtBQUs4QixLQUFLLHNCQUFzQmtXLE9BQU1naEMsS0FDcEMsTUFBTTNnQyxNQUFRcmMsU0FDWmc5QyxHQUFHN2dDLGNBQWMxRyxRQUFRLGdCQUFnQjFjLFFBQVFzakIsT0FFbkR2YyxLQUFLM0QsTUFBTTBoRCxtQkFBbUJ4aEMsVUFHaENyWSxLQUFLOEIsS0FBSyxxQkFBcUJxMkMsVUFBU2EsS0FDekJsOUMsS0FBSzNELE1BQU11RSxNQUFNakssSUFDNUJ1bUQsR0FBRzdnQyxjQUFjMUcsUUFBUSxTQUFTMWMsUUFBUTBILFFBRXZDaXpDLGVBQWUsbUJBR3RCMXZDLEtBQUs4QixLQUFLLG9DQUFvQ2tXLE9BQU1naEMsS0FDckNsOUMsS0FBSzNELE1BQU11RSxNQUFNakssSUFDNUJ1bUQsR0FBRzdnQyxjQUFjMUcsUUFBUSxTQUFTMWMsUUFBUTBILFFBRXZDaXpDLGVBQWUsaUJBR3RCMXZDLEtBQUs4QixLQUFLLG1DQUFtQ2tXLE9BQU1naEMsS0FDcENsOUMsS0FBSzNELE1BQU11RSxNQUFNakssSUFDNUJ1bUQsR0FBRzdnQyxjQUFjMUcsUUFBUSxTQUFTMWMsUUFBUTBILFFBRXZDaXpDLGVBQWUsZ0JBR3RCMXZDLEtBQUs4QixLQUFLLHVCQUF1QmtXLE9BQU0vaEIsUUFDckM2RixLQUFLM0QsTUFBTTJoRCxrQkFBa0I3akQsTUFBTTJNLGFBR3JDNUMsS0FBSzhCLEtBQUsscUJBQXFCa1csT0FBTS9oQixRQUM5QkEsTUFBTThqRCxRQUEyQixJQUFqQjlqRCxNQUFNOGpELFFBQ3pCaitDLEtBQUszRCxNQUFNNmhELFlBQVkvakQsTUFBTTJNLGFBSWpDNUMsS0FBSzhCLEtBQUssZUFBZTJYLEdBQUcsU0FBU3hqQixPQUFTZzVCLFdBQVdDLFNBQVNqNUIsU0FDbEUrSixLQUNHOEIsS0FBSyxlQUNMMlgsR0FBRyxhQUFheGpCLE9BQVNnNUIsV0FBV0UsZ0JBQWdCbDVCLFNBRXZEK0osS0FBSzhCLEtBQUssaUJBQWlCa1csT0FBTS9rQixNQUFBQSxjQUN6Qjg0QixpQkFBaUJrdUIsU0FBUyxDQUM5QmxqRCxLQUFNZzFCLGlCQUFpQmhCLGNBQWNoMEIsS0FDckMrYixRQUFRLEVBQ1J4VSxPQUFRLE1BQ1IxTCxLQUFNLENBQ0pvTSxlQUFnQixNQUNoQjdHLE1BQU8yRCxLQUFLM0QsTUFBTUMsa0JBSWhCMnpCLGlCQUFpQmt1QixTQUFTLENBQzlCbGpELEtBQU1nMUIsaUJBQWlCaEIsY0FBY2gwQixLQUNyQytiLFFBQVEsRUFDUnhVLE9BQVEsTUFDUjFMLEtBQU0sQ0FDSm9NLGVBQWdCLFNBdUJoQi9JLE1BQU0yTSxVQUFVeEgsR0FBR0MsY0FBY21KLEtBQUsscUJBRzVDeEUsS0FDRzhCLEtBQUssd0JBQ0xvNEMsV0FBV3ArQyxLQUFLcStDLGtCQUFrQjdsQyxLQUFLeFksT0FDdkM4ekIsV0FBV3I5QixLQUFLNm5ELGFBQWFDLGFBQWEvbEMsS0FBS3hZLE9BQ2xEa0UsS0FDRzhCLEtBQUsseUJBQ0xvNEMsV0FBV3ArQyxLQUFLdytDLDJCQUEyQmhtQyxLQUFLeFksT0FDaEQ4ekIsV0FBV3I5QixLQUFLNm5ELGFBQWFDLGFBQWEvbEMsS0FBS3hZLE9BQ2xEa0UsS0FDRzhCLEtBQUssNkJBQ0xvNEMsV0FBV3ArQyxLQUFLeStDLHNCQUFzQmptQyxLQUFLeFksT0FDM0M4ekIsV0FBV3I5QixLQUFLNm5ELGFBQWFDLGFBQWEvbEMsS0FBS3hZLE9BQ2xEa0UsS0FDRzhCLEtBQUssZ0JBQ0xvNEMsV0FBV3ArQyxLQUFLMCtDLGlCQUFpQmxtQyxLQUFLeFksT0FDdEM4ekIsV0FBV3I5QixLQUFLNm5ELGFBQWFDLGFBQWEvbEMsS0FBS3hZLE9BQ2xEa0UsS0FDRzhCLEtBQUssa0NBQ0xvNEMsV0FBV3ArQyxLQUFLMitDLDBCQUEwQm5tQyxLQUFLeFksT0FDL0M4ekIsV0FBV3I5QixLQUFLNm5ELGFBQWFDLGFBQWEvbEMsS0FBS3hZLFFBR3BEcStDLGtCQUFtQmxrRCxPQUNqQixNQUFNeWtELE1BQVExK0MsU0FBU3pKLEtBQUtJLFNBQVNGLElBQUksT0FBUSxpQkFDakQsR0FBSWlvRCxNQUFRLEVBQUcsQ0FDYixNQUFNbDBDLE1BQVExSyxLQUNkdkosS0FBSzZuRCxhQUFhTyxhQUFlMWtELE1BQU1raUIsY0FDdkM1bEIsS0FBSzZuRCxhQUFhUSxhQUFlMTZDLFlBQVcsV0FDMUMsUUFBOEMsSUFBbkMzTixLQUFLNm5ELGFBQWFPLGFBQThCLENBQ3pELE1BQU1oOEMsS0FBT3BNLEtBQUs2bkQsYUFBYU8sYUFBYWxwQyxRQUFRLFNBQ3BELFFBQW9CLElBQVQ5UyxLQUFzQixDQUMvQixNQUFNaEMsUUFBVWdDLEtBQUs1SixRQUFRNEgsUUFDdkIrQixNQUFROEgsTUFBTXJPLE1BQU11RSxNQUFNakssSUFBSWtLLFNBQ3BDLElBQUlrK0MsUUFBVXRvRCxLQUFLZ0osS0FBS1ksT0FBTyxvQkFBcUIsQ0FDbER1QyxNQUFPQSxNQUFNOGhDLE1BQ2J0a0MsUUFBU3dDLE1BQU12RixNQUNmaUQsS0FBTXJKLEtBQUs2UyxNQUFNbEgsTUFBTXZGLE1BQVEsR0FDL0JrRCxRQUFTdEosS0FBSzZTLE1BQU1sSCxNQUFNdkYsTUFBUSxLQUVoQzVHLEtBQUtvQyxLQUFLeVIsT0FDWnkwQyxTQUVFdG9ELEtBQUtnSixLQUFLWSxPQUFPLDBCQUEyQixDQUMxQ3dZLE1BQ0VwaUIsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGtCQUMxQitULE1BQU1yTyxNQUFNMk0sZUFDUnZTLEtBQUtnSixLQUFLWSxPQUFPLGlDQUFrQyxDQUNqRDNELEtBQU1nTyxNQUFNck8sTUFBTUssT0FFcEIsTUFHWmpHLEtBQUs2bkQsYUFBYVUsZUFBZUQsYUFHcENILFFBSVBKLDJCQUE0QnJrRCxPQUMxQixNQUFNeWtELE1BQVExK0MsU0FBU3pKLEtBQUtJLFNBQVNGLElBQUksT0FBUSxpQkFDakQsR0FBSWlvRCxNQUFRLEVBQUcsQ0FDYixNQUFNbDBDLE1BQVExSyxLQUNkdkosS0FBSzZuRCxhQUFhTyxhQUFlMWtELE1BQU1raUIsY0FDdkM1bEIsS0FBSzZuRCxhQUFhUSxhQUFlMTZDLFlBQVcsV0FDMUMsUUFBOEMsSUFBbkMzTixLQUFLNm5ELGFBQWFPLGFBQThCLENBQ3pELE1BQU01NEMsS0FBT3hQLEtBQUs2bkQsYUFBYU8sYUFBYWxwQyxRQUFRLGFBQ3BELFFBQW9CLElBQVQxUCxLQUFzQixDQUMvQixNQUFNZzVDLE9BQVNoNUMsS0FBS2hOLFFBQVFpSyxlQUN0QkEsZUFBaUJ3SCxNQUFNck8sTUFBTW9LLGdCQUFnQnc0QyxRQUNuRCxJQUFJRixRQUFVdG9ELEtBQUtnSixLQUFLWSxPQUFPLG9CQUFxQixDQUNsRHVDLE1BQU9NLGVBQWVrRCxNQUN0QmhHLFFBQVM4QyxlQUFlN0YsTUFDeEJpRCxLQUFNNEMsZUFBZTVDLEtBQ3JCQyxRQUFTMkMsZUFBZTNDLFVBRXRCOUosS0FBS29DLEtBQUt5UixPQUNaeTBDLFNBRUV0b0QsS0FBS2dKLEtBQUtZLE9BQU8sMEJBQTJCLENBQzFDd1ksTUFDRXBpQixLQUFLSSxTQUFTRixJQUFJLE9BQVEsa0JBQzFCK1QsTUFBTXJPLE1BQU0yTSxlQUNSdlMsS0FBS2dKLEtBQUtZLE9BQU8saUNBQWtDLENBQ2pEM0QsS0FBTWdPLE1BQU1yTyxNQUFNSyxPQUVwQixNQUdaakcsS0FBSzZuRCxhQUFhVSxlQUFlRCxhQUdwQ0gsUUFJUEgsc0JBQXVCdGtELE9BQ3JCLE1BQU15a0QsTUFBUTErQyxTQUFTekosS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGlCQUNqRCxHQUFJaW9ELE1BQVEsRUFBRyxDQUNiLE1BQU1sMEMsTUFBUTFLLEtBQ2R2SixLQUFLNm5ELGFBQWFPLGFBQWUxa0QsTUFBTWtpQixjQUN2QzVsQixLQUFLNm5ELGFBQWFRLGFBQWUxNkMsWUFBVyxXQUMxQyxRQUE4QyxJQUFuQzNOLEtBQUs2bkQsYUFBYU8sYUFBOEIsQ0FDekQsTUFBTTNiLE9BQVN6c0MsS0FBSzZuRCxhQUFhTyxhQUFhbHBDLFFBQVEsY0FDdEQsUUFBc0IsSUFBWHV0QixPQUF3QixDQUNqQyxNQUFNZ2MsWUFBY2hjLE9BQU9qcUMsUUFBUWlxQyxPQUNuQyxJQUFJNmIsUUFBVSxHQUNkLE1BQU1uVyxXQUFhbCtCLE1BQU1yTyxNQUFNdEQsS0FBS0EsS0FBS3dRLFFBQVEyMUMsYUFDakQsT0FBUUEsYUFDTixJQUFLLE1BQ0hILFFBQVV0b0QsS0FBS2dKLEtBQUtZLE9BQU8sb0JBQXFCLENBQzlDdUMsTUFBT2dtQyxXQUFXeGlDLE1BQ2xCaEcsUUFBU3dvQyxXQUFXdnJDLE1BQ3BCaUQsS0FBTXJKLEtBQUs2UyxNQUFNOCtCLFdBQVd2ckMsTUFBUSxHQUNwQ2tELFFBQVN0SixLQUFLNlMsTUFBTTgrQixXQUFXdnJDLE1BQVEsS0FFckM1RyxLQUFLb0MsS0FBS3lSLE9BQ1p5MEMsU0FFRXRvRCxLQUFLZ0osS0FBS1ksT0FBTywwQkFBMkIsQ0FDMUN3WSxNQUNFcGlCLEtBQUtJLFNBQVNGLElBQUksT0FBUSxrQkFDMUIrVCxNQUFNck8sTUFBTTJNLGVBQ1J2UyxLQUFLZ0osS0FBS1ksT0FBTyxpQ0FBa0MsQ0FDakQzRCxLQUFNZ08sTUFBTXJPLE1BQU1LLE9BRXBCLE1BR1pqRyxLQUFLNm5ELGFBQWFVLGVBQWVELFNBQ2pDLE1BQ0YsSUFBSyxLQUNIQSxRQUFVdG9ELEtBQUtnSixLQUFLQyxTQUFTLGtCQUM3QmpKLEtBQUs2bkQsYUFBYVUsZUFBZUQsU0FDakMsTUFDRixJQUFLLE1BQ0hBLFFBQVV0b0QsS0FBS2dKLEtBQUtZLE9BQU8sb0JBQXFCLENBQzlDdUMsTUFBTyxTQUNQeEMsUUFBU3dvQyxXQUFXdnJDLE1BQ3BCaUQsS0FBTXJKLEtBQUs2UyxNQUFNOCtCLFdBQVd2ckMsTUFBUSxHQUNwQ2tELFFBQVN0SixLQUFLNlMsTUFBTTgrQixXQUFXdnJDLE1BQVEsS0FFckM1RyxLQUFLb0MsS0FBS3lSLE9BQ1p5MEMsU0FFRXRvRCxLQUFLZ0osS0FBS1ksT0FBTywwQkFBMkIsQ0FDMUN3WSxNQUNFcGlCLEtBQUtnSixLQUFLQyxTQUFTLDZCQUNsQmpKLEtBQUtJLFNBQVNGLElBQUksT0FBUSxrQkFDM0IrVCxNQUFNck8sTUFBTTJNLGVBQ1J2UyxLQUFLZ0osS0FBS1ksT0FBTyxpQ0FBa0MsQ0FDakQzRCxLQUFNZ08sTUFBTXJPLE1BQU1LLE9BRXBCLE9BR1pqRyxLQUFLNm5ELGFBQWFVLGVBQWVELGNBS3hDSCxRQUlQRixpQkFBa0J2a0QsT0FDaEIsTUFBTXlrRCxNQUFRMStDLFNBQVN6SixLQUFLSSxTQUFTRixJQUFJLE9BQVEsaUJBQzdDaW9ELE1BQVEsSUFDVm5vRCxLQUFLNm5ELGFBQWFPLGFBQWUxa0QsTUFBTWtpQixjQUN2QzVsQixLQUFLNm5ELGFBQWFRLGFBQWUxNkMsWUFBVyxXQUMxQyxRQUE4QyxJQUFuQzNOLEtBQUs2bkQsYUFBYU8sYUFBOEIsQ0FDekQsTUFBTUUsUUFBVXRvRCxLQUFLZ0osS0FBS0MsU0FBUywwQkFDbkNqSixLQUFLNm5ELGFBQWFVLGVBQWVELFlBRWxDSCxRQUlQRCwwQkFBMkJ4a0QsT0FDekIsTUFBTXlrRCxNQUFRMStDLFNBQVN6SixLQUFLSSxTQUFTRixJQUFJLE9BQVEsaUJBQ2pELEdBQUlpb0QsTUFBUSxFQUFHLENBQ2IsTUFBTWwwQyxNQUFRMUssS0FDZHZKLEtBQUs2bkQsYUFBYU8sYUFBZTFrRCxNQUFNa2lCLGNBQ3ZDNWxCLEtBQUs2bkQsYUFBYVEsYUFBZTE2QyxZQUFXLFdBQzFDLFFBQThDLElBQW5DM04sS0FBSzZuRCxhQUFhTyxhQUE4QixDQUN6RCxNQUFNaDhDLEtBQU9wTSxLQUFLNm5ELGFBQWFPLGFBQWFscEMsUUFBUSxTQUNwRCxRQUFvQixJQUFUOVMsS0FBc0IsQ0FDL0IsTUFBTWhDLFFBQVVnQyxLQUFLNUosUUFBUTRILFFBQ3ZCK0IsTUFBUThILE1BQU1yTyxNQUFNdUUsTUFBTWpLLElBQUlrSyxTQUM5QmsrQyxRQUFVdG9ELEtBQUtnSixLQUFLWSxPQUFPLDhCQUErQixDQUM5RCtJLE9BQVEzUyxLQUFLZ0osS0FBS0MsU0FDaEJrRCxNQUFNN0osS0FBS0EsS0FBS3cyQixNQUFNd1QsYUFDbEIsMkJBQ0EsZ0NBR1J0c0MsS0FBSzZuRCxhQUFhVSxlQUFlRCxhQUdwQ0gsUUFJUDNCLG1CQUFvQjlpRCxPQUNsQixNQUFNaWlCLEdBQUt6SCxFQUFFeGEsTUFBTWtpQixlQUFlOGdDLFFBQVEsU0FDN0JuOUMsS0FBSzNELE1BQU11RSxNQUFNakssSUFBSXlsQixHQUFHcmpCLEtBQUssV0FDckMyUixNQUFNRSxRQUFPLEdBR3BCLG1CQUFvQnpRLE9BQ2xCLE1BQU1paUIsR0FBS3pILEVBQUV4YSxNQUFNa2lCLGVBQWU4Z0MsUUFBUSxTQUNwQ3Q2QyxLQUFPN0MsS0FBSzNELE1BQU11RSxNQUFNakssSUFBSXlsQixHQUFHcmpCLEtBQUssV0FDMUMsSUFBSTBDLFFBQVUsTUFBUWhGLEtBQUtnSixLQUFLQyxTQUFTLGtDQUN6QyxNQUFNL0UsUUFBVSxDQUNkd2tELFVBQVduL0MsS0FBSzNELE1BQU1iLEdBQ3RCaUIsTUFBTyxLQUNQMmlELFFBQVNwL0MsS0FBSzNELE1BQU1iLEdBQ3BCcUgsS0FBTUEsS0FBS3JILElBRVR3RSxLQUFLeEQsT0FBT0gsUUFDZDFCLFFBQVF3a0QsVUFBWW4vQyxLQUFLeEQsTUFBTWhCLEdBQy9CYixRQUFROEIsTUFBUXVELEtBQUt4RCxNQUFNMkssT0FBTzNMLElBRXBDLE1BQU1VLE9BQVN6RixLQUFLeUYsT0FBT2hFLFFBQU8waEMsSUFDaEMsSUFBSyxDQUFDLFlBQWEsTUFBTyxXQUFZLGFBQWE1aEMsU0FBUzRoQyxFQUFFMytCLE1BQzVELE9BQU8sRUFFVCxHQUFJK0UsS0FBSzNELE1BQU1iLEtBQU9vK0IsRUFBRXArQixHQUN0QixPQUFPLEVBRVQsSUFBSTZqRCxTQUFVLEVBQ2QsSUFBSyxNQUFPeGxELEVBQUdDLEtBQU1DLE9BQU9DLFFBQVE0L0IsRUFBRTdnQyxLQUFLa3BCLFlBQy9CLFlBQU5wb0IsR0FBbUJBLElBQU1wRCxLQUFLb0MsS0FBSzJDLEtBQ3JDNmpELFFBQVVBLFNBQVd2bEQsSUFBTW9CLE1BQU1nbkIsbUJBQW1CbzlCLE1BR3hELE9BQU9ELFdBRVQ1akQsU0FBb0IsNkNBQ3BCLElBQUssTUFBTVksU0FBU0gsT0FDbEJULFFBQ0VBLFFBQVUsa0JBQW9CWSxNQUFNYixHQUFLLEtBQU9hLE1BQU1LLEtBQU8sWUFFakVqQixTQUFvQix1QkFDcEJkLFFBQVF5a0QsY0FBZ0IsSUFBSTl5QyxTQUFRQyxVQUN0QixJQUFJeVAsT0FBTyxDQUNyQjlpQixNQUFPekMsS0FBS2dKLEtBQUtDLFNBQVMsdUNBQzFCakUsUUFDQW9oQixRQUFTLENBQ1AraEIsUUFBUyxDQUNQeDRCLE1BQU8zUCxLQUFLZ0osS0FBS0MsU0FBUyxpQkFDMUI4ZixTQUFVdGIsT0FDUixNQUFNb2IsU0FBVyxJQUFJRyxTQUNuQnZiLEtBQUssR0FBR3BFLGNBQWMsZ0JBRXhCLElBQUssTUFBT3BELEtBQU1XLFNBQVVpaUIsU0FDMUIsR0FBYSxTQUFUNWlCLEtBQ0YsT0FBTzZQLFFBQVFsUCxVQU16QnFpQixRQUFTLFVBQ1Q5QyxNQUFPLFNBRUxoUyxRQUFPLFlBRVBuVSxLQUFLaWlDLFdBQVdDLFlBQVksZ0JBQWlCaCtCLFNBR3JEa2dELHNCQUF1QjFnRCxPQUNyQixNQUFNb2xELElBQU1wbEQsTUFBTWtpQixjQUFjdVksY0FDMUI3N0IsS0FBTyxDQUNYNnlDLFNBQVUsT0FDVkgsU0FBVSxZQUNWcHBDLE1BQU8sUUFDUHBILEtBQU0saUJBQ04rTixlQUFnQmhKLEtBQUszRCxNQUFNMk0sZUFDM0IxTSxTQUFVMEQsS0FBSzNELE1BQU1DLFNBQ3JCSSxLQUFNNmlELElBQUl0bUQsUUFBUWlLLGVBQ2xCbXJCLEtBQU0sTUFHUmwwQixNQUFNNFEsY0FBY0csYUFBYTY5QixRQUFRLGFBQWMxdkMsS0FBS0MsVUFBVVAsT0FHeEUraEQsaUJBQWtCM2dELE9BQ2hCLE1BQU1vbEQsSUFBTXBsRCxNQUFNa2lCLGNBQWN1WSxjQUMxQjc3QixLQUFPLENBQ1g2eUMsU0FBVSxPQUNWSCxTQUFVLFlBQ1ZwcEMsTUFBTyxRQUNQcEgsS0FBTSxZQUNOK04sZUFBZ0JoSixLQUFLM0QsTUFBTTJNLGVBQzNCMU0sU0FBVTBELEtBQUszRCxNQUFNQyxTQUNyQkksS0FBTTZpRCxJQUFJdG1ELFFBQVFpcUMsT0FDbEI3VSxLQUFNLE1BR1JsMEIsTUFBTTRRLGNBQWNHLGFBQWE2OUIsUUFBUSxhQUFjMXZDLEtBQUtDLFVBQVVQLE9BR3hFZ2lELGdCQUFpQjVnRCxPQUNmLE1BQU1vVixPQUFTcFYsTUFBTWtpQixjQUFjdmMsY0FBYyxtQkFDM0N1UCxPQUFTbFYsTUFBTWtpQixjQUFjdmMsY0FBYyxxQkFDM0MvRyxLQUFPLENBQ1g2eUMsU0FBVSxPQUNWSCxTQUFVLFlBQ1ZwcEMsTUFBTyxVQUNQMkcsZUFBZ0JoSixLQUFLM0QsTUFBTTJNLGVBQzNCMU0sU0FBVTBELEtBQUszRCxNQUFNQyxTQUNyQmlULE9BQVFBLE9BQU9tTixVQUNmck4sT0FBUUEsT0FBT3FOLFVBQ2YyUixLQUFNLE1BR1JsMEIsTUFBTTRRLGNBQWNHLGFBQWE2OUIsUUFBUSxhQUFjMXZDLEtBQUtDLFVBQVVQLE9BR3hFLGNBQWVvQixhQUNQdVUsTUFBTTh3QyxRQUFRcmxELE9BR3RCLHNCQUF1QkEsT0FDckJBLE1BQU15TSxpQkFDRnpNLE1BQU1raUIsY0FBY3BqQixRQUFRbVEsYUFDeEJwSixLQUFLM0QsTUFBTW9qRCxhQUFhdGxELE1BQU1raUIsY0FBY3BqQixRQUFRbVEsUUFDakRqUCxNQUFNa2lCLGNBQWNwakIsUUFBUXV0QyxjQUMvQnhtQyxLQUFLM0QsTUFBTXFqRCxhQUFhdmxELE1BQU1raUIsY0FBY3BqQixRQUFRdXRDLFFBSTlELGVBQ00vdkMsS0FBS29DLEtBQUt5UixNQUFNdEssS0FBSzNELE1BQU1pcUMsWUFBWXp3QixLQUFLek0sT0FBTzBRLE1BR3pELGFBQ01yakIsS0FBS29DLEtBQUt5UixNQUFNdEssS0FBSzNELE1BQU1pcUMsWUFBWXp3QixLQUFLek0sT0FBT3dRLE9BR3pELG9CQUFxQnpmLE9BQ25CLE1BQU1naEIsU0FBVyxJQUFJSixhQUNuQi9hLEtBQUszRCxNQUFNK0csUUFBVXBELEtBQUszRCxNQUFNOEcsU0FBV25ELEtBQUszRCxNQUFNYixJQUV4RDJmLFNBQVNPLFdBQVksRUFDckJQLFNBQVM3VixVQUFVbkwsTUFBTTJNLFVBRzNCLHNCQUF1QjNNLE9BQ3JCQSxNQUFNeU0saUJBQ04sTUFBTW9nQyxRQUFVN3NDLE1BQU1raUIsY0FBY3BqQixRQUFRK3RDLFFBQ3RDbjlCLGVBQ0osTUFBUTVTLEtBQUs2UyxNQUFNOUosS0FBSzNELE1BQU10RCxLQUFLQSxLQUFLd1EsUUFBUUMsSUFBSW5NLE1BQVEsR0FDOUQyQyxLQUFLM0QsTUFBTXNqRCxrQkFBa0I5MUMsZ0JBQ3pCbTlCLFNBQVNobkMsS0FBSzNELE1BQU11akQsYUFBYTVZLFNBR3ZDLG9CQUFxQjdzQyxPQUNuQixHQUFJQSxNQUFNa2lCLGNBQWMxRyxRQUFRLGNBQWUsQ0FDN0MsTUFBTXV0QixPQUFTL29DLE1BQU1raUIsY0FBYzFHLFFBQVEsY0FBYzFjLFFBQVFpcUMsT0FDakVsakMsS0FBSzNELE1BQU13akQsaUJBQWlCM2MsU0FJaEMsZ0JBQWlCL29DLE9BQ2YsTUFBTTRNLE9BQVMvRyxLQUFLM0QsTUFBTXVFLE1BQU1qSyxJQUM5QndELE1BQU1raUIsY0FBYzFHLFFBQVEsU0FBUzFjLFFBQVEwSCxRQUUzQ29HLFFBQ0ZBLE9BQU8rNEMsZUFDTDNsRCxNQUFNa2lCLGNBQWNwakIsUUFBUWc5QixTQUM1Qjk3QixNQUFNQyxTQUNKRCxNQUFNRSxTQUNZLEtBQWxCRixNQUFNRyxTQUNZLE1BQWxCSCxNQUFNRyxTQU1kLHlDQUNRMEYsS0FBSzNELE1BQU0wakQsMkJBR25CLHNDQUNFLy9DLEtBQUszRCxNQUFNMmpELDhCQUdiLHFCQUFzQjdsRCxPQUNwQkEsTUFBTXlNLGlCQUNOLE1BQU1xNUMsU0FBV2pnRCxLQUFLM0QsTUFBTW1uQyxPQUM1QnhqQyxLQUFLM0QsTUFBTW1uQyxRQUFVeWMsU0FDckJuM0MsTUFBTUMsS0FBSyx1QkFBd0IsRUFBRWszQyxXQUd2QyxxQkFBc0I5bEQsT0FDcEJBLE1BQU15TSxpQkFDTixNQUFNaWIsU0FBVzFuQixNQUFNa2lCLGNBQWNwakIsUUFBUXVvQixLQUM3Q3hoQixLQUFLM0QsTUFBTTZqRCxnQkFBZ0JyK0IsVUFHN0Isd0JBQXlCMW5CLE9BQ3ZCQSxNQUFNeU0saUJBQ041RyxLQUFLM0QsTUFBTTZqRCxnQkFBZ0Isa0JBRzdCLGVBQWdCL2xELE9BQ2QsSUFBSWtELE1BQVE2QyxTQUFTL0YsTUFBTWtpQixjQUFjaGYsT0FTekMsT0FSSWxELE1BQU1nbUQsT0FBUyxJQUNqQjlpRCxNQUFrQixJQUFWQSxNQUFjLEVBQUlBLE1BQVEsR0FHaENsRCxNQUFNZ21ELE9BQVMsSUFDakI5aUQsT0FBZ0IsR0FHVmxELE1BQU1raUIsY0FBYzNmLE1BQzFCLElBQUssd0JBQ0hzRCxLQUFLM0QsTUFBTXNyQyxNQUFNdHFDLE9BQ2pCLE1BQ0YsSUFBSyx3QkFDSDJDLEtBQUszRCxNQUFNK2pELE1BQU0vaUQsT0FDakIsTUFDRixJQUFLLHlCQUNIMkMsS0FBSzNELE1BQU1rbUMsT0FBT2xsQyxPQUNsQixNQUNGLElBQUsseUJBQ0gyQyxLQUFLM0QsTUFBTTRrQyxRQUFRNWpDLE9BQ25CLE1BQ0YsSUFBSyw2QkFDSDJDLEtBQUszRCxNQUFNc3JDLE1BQU10cUMsUUFLdkJpL0MsZ0JBQWlCbmlELE9BQ2ZBLE1BQU1raUIsY0FBY2drQyxVQUFZbG1ELE1BQU1raUIsY0FBY2drQyxTQUNwRGxtRCxNQUFNa2lCLGNBQWMxaUIsVUFBVTZPLE9BQU8sYUFHdkN1MEMsZUFBZ0I1aUQsT0FDZEEsTUFBTXlNLGlCQUNOLE1BQU13VixHQUFLekgsRUFBRXhhLE1BQU1raUIsZUFBZThnQyxRQUFRLFNBQ3BDdDZDLEtBQU83QyxLQUFLM0QsTUFBTXVFLE1BQU1qSyxJQUFJeWxCLEdBQUdyakIsS0FBSyxZQUNwQ1QsU0FBV3VLLEtBQUtxdEMsWUFBWSxDQUFFb1EsUUFBU3RnRCxLQUFLM0QsTUFBTXdPLFVBR3hELEdBQUl1UixHQUFHbWtDLFNBQVMsWUFBYSxDQUMzQixNQUFNaG1CLFFBQVVuZSxHQUFHbzZCLFNBQVMsaUJBQzVCamMsUUFBUStpQixRQUFRLEtBQUssSUFBTS9pQixRQUFRNXRCLGVBQzlCLENBQ0wsTUFBTTZ6QyxJQUFNN3JDLEVBQUUsb0NBRVJ5N0IsT0FBU3o3QixFQUFFLG1DQUNqQixJQUFLLE1BQU00N0IsS0FBS2o0QyxTQUFTODNDLE9BQ3ZCQSxPQUFPMVksT0FDTCxvREFBb0Q2WSxFQUFFN3pDLDBDQUEwQzZ6QyxFQUFFbHpDLHNCQVN0RyxHQU5BbWpELElBQUk5b0IsT0FBTzBZLFFBRVhvUSxJQUFJOW9CLE9BQ0YvaUIsRUFBRSxpQ0FBaUNyYyxTQUFTb2lDLFlBQVlyOUIsZ0JBR3REd0YsS0FBSzlKLEtBQUtBLEtBQUtzckIsWUFBWXRNLEtBQU0sQ0FDbkMsTUFBTTBvQyxXQUFhOXJDLEVBQ2pCLDZCQUE2QnJjLFNBQVNvaUMsWUFBWTVqQixpQkFFcEQwcEMsSUFBSTlvQixPQUFPK29CLFlBR2IsTUFBTXBRLE1BQVExN0IsRUFBRSx1Q0FDaEIsSUFBSyxNQUFNNDdCLEtBQUtqNEMsU0FBUytyQixXQUN2QmdzQixNQUFNM1ksT0FDSixrQ0FBa0NqaEMsS0FBS2dKLEtBQUtDLFNBQVM2d0MsWUFHekRpUSxJQUFJOW9CLE9BQU8yWSxPQUVYajBCLEdBQUdzYixPQUFPOG9CLElBQUlFLFFBQ2R2dEIsV0FBV3d0QixrQkFBa0JILEtBQzdCQSxJQUFJSSxVQUFVLEtBRWhCeGtDLEdBQUdnQixZQUFZLFlBSWpCcS9CLGlCQUFrQnRpRCxPQUNoQkEsTUFBTXlNLGlCQUtOLE1BQU1pNkMsUUFBVTFtRCxNQUFNa2lCLGNBQWMxRyxRQUFRLFdBQ3RDbXJDLFlBQWMzbUQsTUFBTWtpQixjQUFjcGpCLFFBQVE4bkQsT0FDMUNBLE9BQVNwc0MsRUFBRWtzQyxTQUFTNzZDLEtBQUssV0FBVzg2QyxlQUV0Q0MsT0FBT1IsU0FBUyxZQUNsQlEsT0FBT3pELFFBQVEsS0FFZnlELE9BQU9ILFVBQVUsS0FFbkJHLE9BQU8zakMsWUFBWSxZQUdyQm8vQixtQkFBb0JyaUQsT0FDbEJBLE1BQU15TSxpQkFDTitOLEVBQUV4YSxNQUFNa2lCLGVBQ0wya0MsU0FBUyxNQUNUeDRDLFNBR0wsbUJBQW9Cck8sT0FDbEJBLE1BQU15TSxpQkFDTixNQUFNd1YsR0FBS3pILEVBQUV4YSxNQUFNa2lCLGVBQWU4Z0MsUUFBUSxTQUNwQ3Q2QyxLQUFPN0MsS0FBSzNELE1BQU11RSxNQUFNakssSUFBSXlsQixHQUFHcmpCLEtBQUssWUFFMUMwK0MsZUFBZXdKLFdBQVdwK0MsTUFHNUIsd0JBQXlCRCxPQUN2QkEsTUFBTTdKLEtBQUtBLEtBQUsyaEMsWUFBWXdtQixjQUFnQmptQixXQUFXQyxXQUNyRHQ0QixNQUFNN0osS0FBS0EsS0FBSzJoQyxZQUFZcjlCLE9BR2xCLElBQUkyZSxPQUNkLENBQ0U5aUIsTUFBT3pDLEtBQUtnSixLQUFLQyxTQUFTLDJCQUMxQmpFLFFBQVNtSCxNQUNUaWEsUUFBUyxHQUNURCxNQUFPLFFBRVQsQ0FDRUUsUUFBUyxDQUFDLE9BQVEsUUFBUyxTQUMzQmd1QixNQUFPLElBQ1BDLE9BQVEsSUFDUm9XLFFBQVMsQ0FBQyxxQkFDVjc2QyxTQUFVLG1EQUdWc0UsUUFBTyxHQU9iLGtCQUFtQnpRLE9BQ2pCQSxNQUFNeU0saUJBWVIsb0JBQXFCek0sT0FDbkJBLE1BQU15TSxpQkFDTixNQUFNakcsT0FBU3hHLE1BQU1raUIsY0FBYzFHLFFBQVEsTUFBTTFjLFFBQVEwSCxPQUNuRDBKLFlBQWNsUSxNQUFNMk0sU0FDcEJDLE9BQVMvRyxLQUFLM0QsTUFBTXVFLE1BQU1qSyxJQUFJZ0ssUUFHcEMsSUFBSXJFLFNBWUosR0FOSUEsU0FMQzBELEtBQUt4RCxNQUlKd0QsS0FBSzNELE1BQU0rRyxTQUFXM00sS0FBS3lGLE9BQU9DLE9BQU82RCxLQUFLeEQsTUFBTWhCLElBQzNDLFNBQVN3RSxLQUFLeEQsTUFBTWhCLEtBRXBCLEdBQUd3RSxLQUFLeEQsTUFBTTJLLE9BQU8zTCxNQUFNd0UsS0FBS3hELE1BQU1oQixLQVB6QndFLEtBQUszRCxNQUFNYixHQVduQ3RCLFVBQVVDLFFBQVUxRCxLQUFLb0MsS0FBS3lSLEtBQU0sQ0FDdEMsTUFBTW8rQixTQUFXLENBQ2ZybUMsTUFBTyxPQUNQcEgsS0FBTSxTQUNOeUIsS0FBTXFLLE9BQU9ySyxLQUNic00sZUFBZ0JoSixLQUFLM0QsTUFBTTJNLGVBQzNCMU0sU0FBVTBELEtBQUszRCxNQUFNQyxVQUd2QnFzQyx1QkFBdUJ5WSxhQUFhMVksVUFBVS9zQyxNQUFLMGxELEtBQ2pEQSxJQUFJejJDLFFBQU8sU0FFUixDQUNMLElBQUkwMkMscUJBOEJKLEdBN0JJN3FELEtBQUtvQyxLQUFLMlUsUUFBUTRZLE1BQVEsSUFDNUJrN0IsMkJBQTZCLElBQUloMUMsU0FBUUMsVUFDdkMsTUFBTXhULEtBQU8sQ0FDWEcsTUFBTyxJQUNQdUMsUUFBU2hGLEtBQUtnSixLQUFLWSxPQUFPLHdCQUF5QixDQUNqRDBHLE9BQVFBLE9BQU9ySyxPQUVqQm1nQixRQUFTLENBQ1Awa0MsT0FBUSxDQUNObHpCLEtBQU0sK0JBQ05qb0IsTUFBTzNQLEtBQUtnSixLQUFLQyxTQUFTLGVBQzFCOGYsU0FBVSxJQUNEalQsU0FBUSxJQUduQmkxQyxRQUFTLENBQ1BuekIsS0FBTSwrQkFDTmpvQixNQUFPM1AsS0FBS2dKLEtBQUtDLFNBQVMsZ0JBQzFCOGYsU0FBVSxJQUNEalQsU0FBUSxLQUlyQm1ULFFBQVMsU0FDVDVDLFFBQVMsQ0FBQyxPQUFRLFdBRXBCLElBQUlkLE9BQU9qakIsTUFBTTZSLFFBQU8sT0FHeEJuVSxLQUFLb0MsS0FBSzJVLFFBQVE0WSxLQUFPLEdBQUtrN0IscUJBQXNCLENBQ3RELElBQUt2NkMsT0FBT2hPLEtBQUtBLEtBQUtzckIsV0FBV2pOLEtBQU0sQ0FDakMzZ0IsS0FBS29DLEtBQUsyVSxRQUFRNFksS0FBTyxHQUMzQjltQixHQUFHQyxjQUFjQyxLQUFLL0ksS0FBS2dKLEtBQUtDLFNBQVMsMkJBRzlCLElBQUlzZ0IsbUJBQW1CMWpCLFNBQVVxRSxPQUFRMEosYUFDakQ4NUIsaUJBRVAsR0FBSXA5QixPQUFPaE8sS0FBS0EsS0FBS3NyQixXQUFXak4sS0FBTSxDQUN2QixJQUFJc00sbUJBQW1CcG5CLFNBQVVxRSxPQUFRMEosYUFDakQ4NUIsb0JBTWIsc0JBQXVCaHFDLE9BQ3JCLE1BQU13RyxPQUFTeEcsTUFBTWtpQixjQUFjMUcsUUFBUSxTQUN2Q3hiLE1BQU1raUIsY0FBYzFHLFFBQVEsU0FBUzFjLFFBQVEwSCxPQUM3QyxLQUNKLElBQUtBLE9BQVEsT0FDYixNQUFNb0csT0FBUy9HLEtBQUszRCxNQUFNdUUsTUFBTWpLLElBQUlnSyxRQUNmLElBQWpCeEcsTUFBTW03QixPQUNKbjdCLE1BQU0yTSxlQUFnQkMsT0FBT2lnQixlQUN0QmpnQixPQUFPMDZDLFlBQ1EsSUFBakJ0bkQsTUFBTW03QixTQUNYbjdCLE1BQU0yTSxlQUFnQkMsT0FBTzJvQyxXQUFXLFNBQ2pDM29DLE9BQU9naEIsYUFBYSxJQUluQyxnQkFBaUI1dEIsT0FDZixNQUFNd0csT0FBU3hHLE1BQU1raUIsY0FBYzFHLFFBQVEsU0FDdkN4YixNQUFNa2lCLGNBQWMxRyxRQUFRLFNBQVMxYyxRQUFRMEgsT0FDN0MsS0FDSixJQUFLQSxPQUFRLE9BQ2IsTUFBTW9HLE9BQVMvRyxLQUFLM0QsTUFBTXVFLE1BQU1qSyxJQUFJZ0ssY0FDOUJvRyxPQUFPMDZDLFlBR2YseUJBQTBCdG5ELE9BQ3hCQSxNQUFNeU0saUJBQ04sTUFBTS9GLFFBQVUxRyxNQUFNa2lCLGNBQWNwakIsUUFBUTRILFFBQ3RDd0MsUUFBVWxKLE1BQU1raUIsY0FBYzFHLFFBQVEsUUFBUTFjLFFBQVFvSyxRQUN0REYsU0FBV2hKLE1BQU1raUIsY0FBYzFHLFFBQVEsUUFBUTFjLFFBQVErQyxRQUN2RDJFLE9BQVN4RyxNQUFNa2lCLGNBQWMxRyxRQUFRLE1BQ3ZDeGIsTUFBTWtpQixjQUFjMUcsUUFBUSxNQUFNMWMsUUFBUTBILE9BQzFDLEtBRUUwQixNQUFRLElBQUlsQyxVQUVsQixJQUFLaEcsTUFBTTJNLFNBQVUsQ0FDbkIsTUFBTTNCLFlBQWNDLFdBQVcxSixTQUMzQnlKLFFBQ0Y5QyxNQUFNaEIsYUFBZThELE1BQU14TyxJQUFJLGFBQy9CMEwsTUFBTU0sV0FBYXdDLE1BQU14TyxJQUFJLGNBQzdCMEwsTUFBTW1DLGlCQUFtQjVHLE9BQU91SCxNQUFNeE8sSUFBSSxxQkFDMUMwTCxNQUFNb0Msc0JBQXdCN0csT0FBT3VILE1BQU14TyxJQUFJLDJCQUluRDBMLE1BQU1oRyxNQUFTOEcsVUFBV0UsUUFDMUJoQixNQUFNTyxNQUFRL0IsUUFDZHdCLE1BQU1RLEtBQU9sQyxhQUNQMEIsTUFBTXZMLE9BQ1p1TCxNQUFNaUQsWUFNUixzQkFBdUJuTCxPQUNyQkEsTUFBTXlNLGlCQUNOLE1BQU1qRyxPQUFTeEcsTUFBTWtpQixjQUFjMUcsUUFBUSxXQUFXMWMsUUFBUTBILE9BQ3hEK2xCLE1BQVF2c0IsTUFBTWtpQixjQUFjMUcsUUFBUSxrQkFBa0IxYyxRQUFReXRCLE1BQzlEcUssZUFBaUIsSUFBSXpELFdBQVcsQ0FDcENqakIsWUFBYWxRLE1BQU0yTSxTQUNuQjRmLFFBRUZxSyxlQUFlejBCLFNBQVcwRCxLQUFLM0QsTUFBTThHLFNBQ3JDNHRCLGVBQWVwd0IsT0FBU0EsT0FDeEJvd0IsZUFBZW5QLGlCQUlqQixxQkFBc0J6bkIsT0FHcEIsR0FGQUEsTUFBTXlNLGlCQUVEek0sTUFBTXVuRCxPQXNESixDQUNMLE1BQU0zb0QsS0FBTyxDQUNYa0MsS0FBTXMyQixrQkFBa0J0QyxjQUFjaDBCLEtBQ3RDdUgsT0FBUSxPQUVKMUwsS0FBTyxJQUFJcUosVUFXakIsR0FWQXJKLEtBQUt1RixNQUNIbEMsTUFBTWtpQixjQUFjMUcsUUFBUSxRQUFRMWMsUUFBUStDLFNBQzVDN0IsTUFBTWtpQixjQUFjMUcsUUFBUSxRQUFRMWMsUUFBUW9LLFFBQzlDdk0sS0FBS29NLGVBQ0gvSSxNQUFNa2lCLGNBQWN1WSxjQUFjMzdCLFFBQVFpSyxlQUM1Q3BNLEtBQUtrYixVQUFZN1gsTUFBTWtpQixjQUFjdVksY0FBYzM3QixRQUFRaXFDLE9BQzNEcHNDLEtBQUsrSixRQUFVMUcsTUFBTWtpQixjQUFjMUcsUUFBUSxVQUFVMWMsUUFBUTRILFFBQzdEL0osS0FBS1IsU0FBV0csS0FBS0ksU0FBU0YsSUFBSSxPQUFRLFlBQzFDRyxLQUFLbXBCLFVBQVl4cEIsS0FBS29DLEtBQUsyQyxHQUVQLE9BQWhCMUUsS0FBS29zQyxPQUFpQixPQUUxQm5xQyxLQUFLakMsS0FBT0EsS0FBS3lYLGFBRWpCZ2pCLGtCQUFrQjRzQixTQUFTcGxELFVBMUVWLENBRWpCLE1BQU1BLEtBQU8sQ0FDWGtDLEtBQU1nMUIsaUJBQWlCaEIsY0FBY2gwQixLQUNyQytiLE9BQVE3YyxNQUFNa2lCLGNBQWMxaUIsV0FBVzRqQixTQUFTLFVBQ2hEL2EsT0FBUSxPQUVKMUwsS0FBTyxJQUFJcUosVUFlakIsR0FkQXJKLEtBQUt1RixNQUNIbEMsTUFBTWtpQixjQUFjMUcsUUFBUSxRQUFRMWMsUUFBUStDLFNBQzVDN0IsTUFBTWtpQixjQUFjMUcsUUFBUSxRQUFRMWMsUUFBUW9LLFFBQzlDdk0sS0FBS29NLGVBQ0gvSSxNQUFNa2lCLGNBQWN1WSxjQUFjMzdCLFFBQVFpSyxlQUM1Q3BNLEtBQUtrYixVQUFZN1gsTUFBTWtpQixjQUFjdVksY0FBYzM3QixRQUFRaXFDLE9BQzNEcHNDLEtBQUsrTCxLQUFPMUksTUFBTWtpQixjQUFjMUcsUUFBUSxVQUFVMWMsUUFBUTBILE9BQzFEN0osS0FBSys3QyxlQUFpQjE0QyxNQUFNa2lCLGNBQWMxaUIsVUFBVTRqQixTQUNsRCxvQkFFRnptQixLQUFLK0osUUFBVTFHLE1BQU1raUIsY0FBYzFHLFFBQVEsVUFBVTFjLFFBQVE0SCxRQUM3RC9KLEtBQUtSLFNBQVdHLEtBQUtJLFNBQVNGLElBQUksT0FBUSxZQUMxQ0csS0FBS21wQixVQUFZeHBCLEtBQUtvQyxLQUFLMkMsR0FFUCxPQUFoQjFFLEtBQUtvc0MsT0FBaUIsT0FFMUIsSUFBSy9vQyxNQUFNMk0sU0FBVSxDQUNuQixNQUFNM0IsWUFBY0MsV0FBVzFKLE9BQU8sQ0FDcENxMkIsNkJBQ0U1M0IsTUFBTUMsU0FDTkQsTUFBTUUsU0FDWSxLQUFsQkYsTUFBTUcsU0FDWSxNQUFsQkgsTUFBTUcsUUFDUjAzQix3QkFDRTczQixNQUFNQyxTQUNORCxNQUFNRSxTQUNZLEtBQWxCRixNQUFNRyxTQUNZLE1BQWxCSCxNQUFNRyxVQUVONkssUUFDRnJPLEtBQUt1SyxhQUFlekQsT0FBT3VILE1BQU14TyxJQUFJLGNBQ3JDRyxLQUFLNkwsV0FBYS9FLE9BQU91SCxNQUFNeE8sSUFBSSxlQUNuQ0csS0FBSzBOLGlCQUFtQjVHLE9BQU91SCxNQUFNeE8sSUFBSSxxQkFDekNHLEtBQUsyTixzQkFBd0I3RyxPQUMzQnVILE1BQU14TyxJQUFJLDJCQUtoQkcsS0FBS2trQixVQUFXLFFBRVZsa0IsS0FBS21iLFdBRVhsWixLQUFLakMsS0FBT0EsS0FBS3lYLGFBRWpCMGhCLGlCQUFpQmt1QixTQUFTcGxELE9BOEI5QiwrQkFBZ0NvQixPQUU5QkEsTUFBTXlNLGlCQUVOLE1BQU12RCxRQUFVbEosTUFBTWtpQixjQUFjMUcsUUFBUSxRQUFRMWMsUUFBUW9LLFFBQ3RERixTQUFXaEosTUFBTWtpQixjQUFjMUcsUUFBUSxRQUFRMWMsUUFBUStDLFFBQ3ZEa0gsZUFDSi9JLE1BQU1raUIsY0FBY3VZLGNBQWMzN0IsUUFBUWlLLGVBRTVDLEdBQUloSixVQUFVQyxRQUFVMUQsS0FBS29DLEtBQUt5UixLQUFNLENBQ3RDLE1BQU1vK0IsU0FBVyxDQUNmcm1DLE1BQU8sUUFDUHBILEtBQU0saUJBQ055QixLQUFNd0csZUFDTjhGLGVBQWdCaEosS0FBSzNELE1BQU0yTSxlQUMzQjFNLFNBQVUwRCxLQUFLM0QsTUFBTUMsU0FDckIwdEMsZUFBZ0I3dkMsTUFBTTJNLFVBUXhCLE1BTjhDLGNBQTFDclEsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGNBQzVCK3hDLFNBQVNsd0MsT0FBUSxRQUVuQm13Qyx1QkFBdUJ5WSxhQUFhMVksVUFBVS9zQyxNQUFLMGxELEtBQ2pEQSxJQUFJejJDLFFBQU8sS0FLZixJQUFJakksV0FBWXNDLFNBQVVULGlCQUFrQkMsc0JBQzVDLElBQUt0SyxNQUFNMk0sU0FBVSxDQUNuQixNQUFNM0IsWUFBY0MsV0FBVzFKLE9BQU8sQ0FDcENxMkIsNkJBQ0U1M0IsTUFBTUMsU0FDTkQsTUFBTUUsU0FDWSxLQUFsQkYsTUFBTUcsU0FDWSxNQUFsQkgsTUFBTUcsUUFDUjAzQix3QkFDRTczQixNQUFNQyxTQUNORCxNQUFNRSxTQUNZLEtBQWxCRixNQUFNRyxTQUNZLE1BQWxCSCxNQUFNRyxVQUVONkssUUFDRkYsU0FBV3JILE9BQU91SCxNQUFNeE8sSUFBSSxjQUM1QmdNLFdBQWEvRSxPQUFPdUgsTUFBTXhPLElBQUksZUFDOUI2TixpQkFBbUI1RyxPQUFPdUgsTUFBTXhPLElBQUkscUJBQ3BDOE4sc0JBQXdCN0csT0FBT3VILE1BQU14TyxJQUFJLDJCQUk3QyxNQUFNMEwsTUFBUSxJQUFJbEMsVUFDRCxjQUFiOEUsV0FBMEI1QyxNQUFNaEIsYUFBZTRELGVBQ3pCLElBQWZ0QyxhQUE0Qk4sTUFBTU0sV0FBYUEsWUFDMUROLE1BQU1oRyxNQUFTOEcsVUFBV0UsUUFDMUJoQixNQUFNbUMsaUJBQW1CQSxpQkFDekJuQyxNQUFNb0Msc0JBQXdCQSxzQkFDOUJwQyxNQUFNMjFCLFFBQ0p2aEMsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGtCQUMxQkYsS0FBS29DLEtBQUt5UixNQUNWdEssS0FBSzNELE1BQU0yTSxxQkFDUDNHLE1BQU0rYixtQkFBbUJsYixnQkFDL0JiLE1BQU1pRCxZQUdSLHdCQUF5Qm5MLE9BRXZCQSxNQUFNeU0saUJBRU4sTUFBTXM4QixPQUFTL29DLE1BQU1raUIsY0FBY3VZLGNBQWMzN0IsUUFBUWlxQyxPQUV6RCxHQUFJaHBDLFVBQVVDLFFBQVUxRCxLQUFLb0MsS0FBS3lSLE1BQVEsQ0FBQyxNQUFPLE9BQU90UyxTQUFTa3JDLFFBQVMsQ0FDekUsTUFBTXdGLFNBQVd2dUMsTUFBTXVuRCxPQUNuQixDQUNFci9DLE1BQU8sVUFDUDJHLGVBQWdCaEosS0FBSzNELE1BQU0yTSxlQUMzQjFNLFNBQVUwRCxLQUFLM0QsTUFBTUMsU0FDckIwdEMsZUFBZ0I3dkMsTUFBTTJNLFVBRXhCLENBQ0V6RSxNQUFPLFFBQ1BwSCxLQUFNLFlBQ055QixLQUFNd21DLE9BQ05sNkIsZUFBZ0JoSixLQUFLM0QsTUFBTTJNLGVBQzNCMU0sU0FBVTBELEtBQUszRCxNQUFNQyxTQUNyQjB0QyxlQUFnQjd2QyxNQUFNMk0sVUFRNUIsTUFOOEMsY0FBMUNyUSxLQUFLSSxTQUFTRixJQUFJLE9BQVEsY0FDNUIreEMsU0FBU2x3QyxPQUFRLFFBRW5CbXdDLHVCQUF1QnlZLGFBQWExWSxVQUFVL3NDLE1BQUswbEQsS0FDakRBLElBQUl6MkMsUUFBTyxLQUtmLEdBQWUsT0FBWHM0QixPQUFpQixDQUNuQixJQUNHLGNBQWN5ZSxLQUNieG5ELE1BQU1raUIsY0FBY3VZLGNBQWMzN0IsUUFBUTJvRCxhQUU1QyxDQUNBLE1BQU0vOUMsRUFBSSxJQUFJOU0sS0FDWm9ELE1BQU1raUIsY0FBY3VZLGNBQWMzN0IsUUFBUTJvRCxtQkFFdEMvOUMsRUFBRS9NLEtBQUssQ0FBRUssT0FBTyxJQUNqQjZNLE1BQU1ILEVBQUV2TSxhQUF3QitOLElBQVp4QixFQUFFdk0sT0FDekJ1TSxFQUFFeUIsVUFBVSxDQUNWdkssUUFBU3RDLFlBQVl1QyxhQUNyQkYsT0FBUXJFLEtBQUtnSixLQUFLQyxTQUFTLDBCQUlqQyxPQUdGLEdBQWUsUUFBWHdqQyxTQUNHbGpDLEtBQUszRCxNQUFNdEQsS0FBS0EsS0FBS3dRLFFBQVFvM0IsSUFBSXRqQyxNQUFPLE9BRy9DLE1BQU1nRyxRQUFVbEosTUFBTWtpQixjQUFjMUcsUUFBUSxRQUFRMWMsUUFBUW9LLFFBQ3RERixTQUFXaEosTUFBTWtpQixjQUFjMUcsUUFBUSxRQUFRMWMsUUFBUStDLFFBRTdELElBQUkyRyxXQUFZc0MsU0FBVVQsaUJBQWtCQyxzQkFjeEM4SyxPQUFRRixPQWJaLElBQUtsVixNQUFNMk0sU0FBVSxDQUNuQixNQUFNM0IsWUFBY0MsV0FBVzFKLE9BQU8sQ0FDcENxMkIsOEJBQThCLEVBQzlCQyx5QkFBeUIsSUFFdkI3c0IsUUFDRkYsU0FBV3JILE9BQU91SCxNQUFNeE8sSUFBSSxjQUM1QmdNLFdBQWEvRSxPQUFPdUgsTUFBTXhPLElBQUksZUFDOUI2TixpQkFBbUI1RyxPQUFPdUgsTUFBTXhPLElBQUkscUJBQ3BDOE4sc0JBQXdCN0csT0FBT3VILE1BQU14TyxJQUFJLDJCQUs3QyxHQUFJd0QsTUFBTXVuRCxRQUFxQixRQUFYeGUsT0FBa0IsQ0FDcEMsTUFBTXowQixjQUFnQjZvQyxjQUFjNTdDLE9BQU8sQ0FDekNtbUQsYUFBYSxJQUVYcHpDLFVBQ0ZjLE9BQVNkLFFBQVE5WCxJQUFJLFdBQWEsRUFDbEMwWSxPQUFTWixRQUFROVgsSUFBSSxXQUFhLEVBRTdCcU4sTUFBTXBHLE9BQU8yUixXQUFVQSxPQUFTM1IsT0FBTzJSLFNBQ3ZDdkwsTUFBTXBHLE9BQU95UixXQUFVQSxPQUFTelIsT0FBT3lSLFVBT2hELFFBRm9CLElBQVhFLGFBQTRDLElBQVhGLE9BR3hDYixhQUFhOVMsT0FDWHNFLEtBQUszRCxNQUFNQyxTQUNYLENBQUVpVCxPQUFnQkYsUUFDbEIsQ0FDRVQsWUFBYTNKLFNBQ2I0SixjQUFlbE0sV0FDZjBILFlBQWFsUSxNQUFNMk0sZUFHbEIsQ0FDTCxNQUFNekUsTUFBUSxJQUFJbEMsZUFDTSxJQUFiOEUsV0FBMEI1QyxNQUFNaEIsYUFBZTRELGVBQ2hDLElBQWZ0QyxhQUE0Qk4sTUFBTU0sV0FBYUEsWUFDMUROLE1BQU1tQyxpQkFBbUJBLGlCQUN6Qm5DLE1BQU1vQyxzQkFBd0JBLHNCQUM5QnBDLE1BQU1oRyxNQUFTOEcsVUFBV0UsUUFDMUJoQixNQUFNMjFCLFFBQ0p2aEMsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGtCQUMxQkYsS0FBS29DLEtBQUt5UixNQUNWdEssS0FBSzNELE1BQU0yTSxxQkFDUDNHLE1BQU13aEMsY0FBY1gsUUFDMUI3Z0MsTUFBTWlELGFBU1YsdUJBQXdCbkwsT0FFdEIsR0FBSUEsTUFBTWtpQixjQUFjMWlCLFVBQVU0akIsU0FBUyxlQUFnQixPQUMzRHBqQixNQUFNeU0saUJBQ04sTUFBTS9GLFFBQVUxRyxNQUFNa2lCLGNBQWMxRyxRQUFRLFNBQVMxYyxRQUFRNEgsUUFDdkR3QyxRQUFVbEosTUFBTWtpQixjQUFjMUcsUUFBUSxRQUFRMWMsUUFBUW9LLFFBQ3RERixTQUFXaEosTUFBTWtpQixjQUFjMUcsUUFBUSxRQUFRMWMsUUFBUStDLFFBRTdELEdBQUk5QixVQUFVQyxRQUFVMUQsS0FBS29DLEtBQUt5UixLQUFNLENBQ3RDLE1BQU01TixLQUFPc0QsS0FBSzNELE1BQU11RSxNQUFNakssSUFBSWtLLFVBQVVuRSxLQUM1QyxJQUFLQSxLQUFNLE9BQ1gsTUFBTWdzQyxTQUFXLENBQ2ZybUMsTUFBTyxRQUNQcEgsS0FBTSxRQUNOeUIsS0FDQXNNLGVBQWdCaEosS0FBSzNELE1BQU0yTSxlQUMzQjFNLFNBQVUwRCxLQUFLM0QsTUFBTUMsU0FDckIwdEMsZUFBZ0I3dkMsTUFBTTJNLFVBUXhCLE1BTjhDLGNBQTFDclEsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGNBQzVCK3hDLFNBQVNsd0MsT0FBUSxRQUVuQm13Qyx1QkFBdUJ5WSxhQUFhMVksVUFBVS9zQyxNQUFLMGxELEtBQ2pEQSxJQUFJejJDLFFBQU8sS0FLZixJQUFJakksV0FBWXNDLFNBQVVULGlCQUFrQkMsc0JBQzVDLElBQUt0SyxNQUFNMk0sU0FBVSxDQUNuQixNQUFNM0IsWUFBY0MsV0FBVzFKLE9BQU8sQ0FDcENxMkIsOEJBQThCLEVBQzlCQyx5QkFBeUIsSUFFdkI3c0IsUUFDRkYsU0FBV3JILE9BQU91SCxNQUFNeE8sSUFBSSxjQUM1QmdNLFdBQWEvRSxPQUFPdUgsTUFBTXhPLElBQUksZUFDOUI2TixpQkFBbUI1RyxPQUFPdUgsTUFBTXhPLElBQUkscUJBQ3BDOE4sc0JBQXdCN0csT0FBT3VILE1BQU14TyxJQUFJLDJCQUk3QyxNQUFNMEwsTUFBUSxJQUFJbEMsZUFDTSxJQUFiOEUsV0FBMEI1QyxNQUFNaEIsYUFBZTRELGVBQ2hDLElBQWZ0QyxhQUE0Qk4sTUFBTU0sV0FBYUEsWUFDMUROLE1BQU1oRyxNQUFTOEcsVUFBV0UsUUFDMUJoQixNQUFNTyxNQUFRL0IsUUFDZHdCLE1BQU1tQyxpQkFBbUJBLGlCQUN6Qm5DLE1BQU1vQyxzQkFBd0JBLHNCQUM5QnBDLE1BQU0yMUIsUUFDSnZoQyxLQUFLSSxTQUFTRixJQUFJLE9BQVEsa0JBQzFCRixLQUFLb0MsS0FBS3lSLE1BQ1Z0SyxLQUFLM0QsTUFBTTJNLHFCQUNQM0csTUFBTXZMLE9BQ1p1TCxNQUFNaUQsWUE0QlIsb0JBQXFCbkwsTUFBT21sQixVQUcxQixHQUFJbmxCLE1BQU1raUIsZUFDSmxpQixNQUFNa2lCLGNBQWMxaUIsVUFBVyxDQUNqQyxHQUFJUSxNQUFNa2lCLGNBQWMxaUIsVUFBVTRqQixTQUFTLG9CQUFxQixDQUM5RCxNQUFNMWEsS0FBTzdDLEtBQUszRCxNQUFNdUUsTUFBTWpLLElBQzVCd0QsTUFBTWtpQixjQUFjMUcsUUFBUSxTQUFTMWMsUUFBUTBILFFBRS9DLEdBQUlrQyxLQUFNLENBQ1IsTUFBTXhGLE1BQVFsRCxNQUFNa2lCLGNBQWNoZixNQUM5QjZDLFNBQVMvRixNQUFNa2lCLGNBQWNoZixPQUM3QixLQWFKLEdBWEtsRCxNQUFNa2lCLGNBQWNoZixNQUtsQjJHLE1BQU0zRyxjQUNId0YsS0FBS3NILE9BQU8sQ0FDaEIsQ0FBQ2hRLE1BQU1raUIsY0FBYzNmLE1BQU9XLGNBTjFCd0YsS0FBS3NILE9BQU8sQ0FDaEIsQ0FBQ2hRLE1BQU1raUIsY0FBYzNmLE1BQU8sT0FTNUJqRyxLQUFLZ0osS0FBS0MsU0FBU21XLEtBQUt5RSx5QkFBMkJ6WCxLQUFLbkcsS0FBTSxDQUNoRSxNQUFNb2xELGFBQ0hqL0MsS0FBS3hGLE9BQVMsSUFDZHdGLEtBQUs5SixLQUFLQSxLQUFLOFksYUFBYUMsWUFBYyxJQUUzQ2d3QyxZQUNFbGtELE9BQU9vQyxLQUFLM0QsTUFBTTAvQixXQUFXaGpDLEtBQUtBLEtBQUtpbkMsYUFBYS9uQyxNQUN0RDZwRCxZQUNFbGtELE9BQU9vQyxLQUFLM0QsTUFBTTAvQixXQUFXaGpDLEtBQUtBLEtBQUtpbkMsYUFBYTVuQyxPQUV0RGtILEdBQUdDLGNBQWNDLEtBQ2YvSSxLQUFLZ0osS0FBS1ksT0FBTyx3QkFBeUIsQ0FDeENqSSxJQUFLd0YsT0FDSG9DLEtBQUszRCxNQUFNMC9CLFdBQVdoakMsS0FBS0EsS0FBS2luQyxhQUFhNW5DLEtBRS9DSCxJQUFLMkYsT0FDSG9DLEtBQUszRCxNQUFNMC9CLFdBQVdoakMsS0FBS0EsS0FBS2luQyxhQUFhL25DLFVBUzNELEdBQUlrQyxNQUFNa2lCLGNBQWMxaUIsVUFBVTRqQixTQUFTLG9CQUVSLDJCQUE3QnBqQixNQUFNa2lCLGNBQWMzZixLQUV0QixZQURBc0QsS0FBSzNELE1BQU1rbUMsT0FBT3JpQyxTQUFTL0YsTUFBTWtpQixjQUFjaGYsUUFLbkQsR0FBSWxELE1BQU1raUIsY0FBYzFpQixVQUFVNGpCLFNBQVMsYUFFekMsWUFEQXZkLEtBQUszRCxNQUFNMGxELGVBQWU1bkQsTUFBTWtpQixlQUlsQyxHQUFJbGlCLE1BQU1raUIsY0FBYzFpQixVQUFVNGpCLFNBQVMscUJBQXNCLENBQy9ELE1BQU1oQixNQUFRcmMsU0FDWi9GLE1BQU1raUIsY0FBYzFHLFFBQVEsZ0JBQWdCMWMsUUFBUXNqQixhQUVoRHZjLEtBQUszRCxNQUFNMmxELGVBQWV6bEMsTUFBT3BpQixNQUFNa2lCLGNBQWNoZixPQUc3RCxHQUFJbEQsTUFBTWtpQixjQUFjMWlCLFVBQVU0akIsU0FBUyxxQkFBc0IsQ0FDL0QsTUFBTWhCLE1BQVFyYyxTQUNaL0YsTUFBTWtpQixjQUFjMUcsUUFBUSxnQkFBZ0IxYyxRQUFRc2pCLE9BRXREdmMsS0FBSzNELE1BQU00bEQsZUFBZTFsQyxNQUFPcGlCLE1BQU1raUIsY0FBY2hmLE9BR3ZELEdBQUlsRCxNQUFNa2lCLGNBQWMxaUIsVUFBVTRqQixTQUFTLG1CQUFvQixDQUM3RCxNQUFNM2EsTUFBUTVDLEtBQUszRCxNQUFNdUUsTUFBTWpLLElBQzdCd0QsTUFBTWtpQixjQUFjMUcsUUFBUSxTQUFTMWMsUUFBUTRILFNBRTNDK0IsYUFDSUEsTUFBTW9oQyxZQUFZN3BDLE1BQU1raUIsY0FBY2hmLE9BSWhELEdBQ0VsRCxNQUFNa2lCLGNBQWMxaUIsVUFBVTRqQixTQUFTLGVBQ3ZDcGpCLE1BQU1raUIsY0FBYzFpQixVQUFVNGpCLFNBQVMsYUFDdkMsQ0FDQSxNQUFNMWEsS0FBTzdDLEtBQUszRCxNQUFNdUUsTUFBTWpLLElBQzVCd0QsTUFBTWtpQixjQUFjMUcsUUFBUSxTQUFTMWMsUUFBUTRILFNBRTNDZ0MsWUFDSUEsS0FBS3NILE9BQU8sQ0FBRXpOLEtBQU12QyxNQUFNa2lCLGNBQWNoZixRQUlsRCxHQUFJbEQsTUFBTWtpQixjQUFjMWlCLFVBQVU0akIsU0FBUywyQkFFQSxJQUFyQ3BqQixNQUFNa2lCLGNBQWNoZixNQUFNbEYsT0FBYyxDQUUxQyxNQUFNMEwsRUFBSSxJQUFJOU0sS0FBS29ELE1BQU1raUIsY0FBY2hmLGFBQ2pDd0csRUFBRS9NLEtBQUssQ0FBRUssT0FBTyxLQUNsQjZNLE1BQU1ILEVBQUV2TSxhQUE2QixJQUFadU0sRUFBRXZNLFNBQzdCZ0ksR0FBR0MsY0FBY3NOLE1BQ2ZwVyxLQUFLZ0osS0FBS1ksT0FBTywyQkFBNEIsQ0FDM0NoRCxNQUFPbEQsTUFBTWtpQixjQUFjaGYsU0FHL0JpaUIsU0FBU25sQixNQUFNa2lCLGNBQWMzZixNQUFRakcsS0FBS2dKLEtBQUtZLE9BQzdDLHNCQU1SLEdBQUlsRyxNQUFNa2lCLGNBQWMxaUIsVUFBVTRqQixTQUFTLG9CQUdGLElBQXJDcGpCLE1BQU1raUIsY0FBY2hmLE1BQU1sRixRQUNtQyxPQUE3RGdDLE1BQU1raUIsY0FBYzFHLFFBQVEsY0FBYzFjLFFBQVFpcUMsT0FDbEQsQ0FFQSxNQUFNci9CLEVBQUksSUFBSTlNLEtBQUtvRCxNQUFNa2lCLGNBQWNoZixhQUNqQ3dHLEVBQUUvTSxLQUFLLENBQUVLLE9BQU8sS0FDbEI2TSxNQUFNSCxFQUFFdk0sYUFBc0IrTixJQUFaeEIsRUFBRXZNLFNBQ3RCZ0ksR0FBR0MsY0FBY3NOLE1BQ2ZwVyxLQUFLZ0osS0FBS1ksT0FBTywyQkFBNEIsQ0FDM0NoRCxNQUFPbEQsTUFBTWtpQixjQUFjaGYsU0FHL0JpaUIsU0FBU25sQixNQUFNa2lCLGNBQWMzZixNQUFRakcsS0FBS2dKLEtBQUtZLE9BQzdDLHNCQVNSLEdBQUlsRyxNQUFNa2lCLGNBQWMxaUIsVUFBVTRqQixTQUFTLGdCQUFpQixDQUMxRCxNQUFNeFcsT0FBUy9HLEtBQUszRCxNQUFNdUUsTUFBTWpLLElBQzlCd0QsTUFBTWtpQixjQUFjMUcsUUFBUSxTQUFTMWMsUUFBUTBILFFBRXpDaUMsTUFBUTVDLEtBQUszRCxNQUFNdUUsTUFBTWpLLElBQzdCd0QsTUFBTWtpQixjQUFjemhCLFFBQVFULE1BQU1raUIsY0FBYzZsQyxlQUFlN2tELE9BRWpFLEdBQUkwSixRQUFVbkUsTUFDWixPQUFRekksTUFBTWtpQixjQUFjcGpCLFFBQVEySixPQUNsQyxJQUFLLGFBQ0dtRSxPQUFPb0QsT0FBTyxDQUNsQixxQkFBc0J2SCxNQUFNcEgsR0FDNUIsdUJBQXdCb0gsTUFBTWxHLE9BRWhDLE1BQ0YsSUFBSyxtQkFDR3FLLE9BQU9vRCxPQUFPLENBQ2xCLDJCQUE0QnZILE1BQU1wSCxHQUNsQyw2QkFBOEJvSCxNQUFNbEcsUUFROUMsR0FBSXZDLE1BQU1raUIsY0FBYzFpQixVQUFVNGpCLFNBQVMsZUFBZ0IsQ0FDekQsTUFBTXhXLE9BQVMvRyxLQUFLM0QsTUFBTXVFLE1BQU1qSyxJQUM5QndELE1BQU1raUIsY0FBYzFHLFFBQVEsU0FBUzFjLFFBQVEwSCxRQUUzQ29HLGNBQ0lBLE9BQU9vRCxPQUFPLENBQUV6TixLQUFNdkMsTUFBTWtpQixjQUFjaGYsUUFPcEQsR0FBSWxELE1BQU1raUIsY0FBYzFpQixVQUFVNGpCLFNBQVMsa0JBQW1CLENBQzVELE1BQU14VyxPQUFTL0csS0FBSzNELE1BQU11RSxNQUFNakssSUFDOUJ3RCxNQUFNa2lCLGNBQWMxRyxRQUFRLFNBQVMxYyxRQUFRMEgsUUFFL0MsR0FBSW9HLE9BRUYsR0FBeUMsSUFBckM1TSxNQUFNa2lCLGNBQWNoZixNQUFNbEYsT0FBYyxDQUMxQyxNQUFNMEwsRUFBSSxJQUFJOU0sS0FBS29ELE1BQU1raUIsY0FBY2hmLE9BRXZDLFNBRE13RyxFQUFFL00sS0FBSyxDQUFFSyxPQUFPLElBQ2xCNk0sTUFBTUgsRUFBRXZNLGFBQTZCLElBQVp1TSxFQUFFdk0sTUFDN0JnSSxHQUFHQyxjQUFjc04sTUFDZjFTLE1BQU1raUIsY0FBY2hmLE1BQVEsZ0NBRzlCLE9BQVFsRCxNQUFNa2lCLGNBQWNwakIsUUFBUXl0QixPQUNsQyxJQUFLLGVBQ0czZixPQUFPb0QsT0FBTyxDQUNsQiwyQkFBNEJoUSxNQUFNa2lCLGNBQWNoZixRQUVsRCxNQUNGLElBQUssYUFDRzBKLE9BQU9vRCxPQUFPLENBQ2xCLHlCQUEwQmhRLE1BQU1raUIsY0FBY2hmLFFBRWhELE1BQ0YsSUFBSyxnQkFDRzBKLE9BQU9vRCxPQUFPLENBQ2xCLDRCQUE2QmhRLE1BQU1raUIsY0FBY2hmLGNBTXpELE9BQVFsRCxNQUFNa2lCLGNBQWNwakIsUUFBUXl0QixPQUNsQyxJQUFLLGVBQ0czZixPQUFPb0QsT0FBTyxDQUNsQiwyQkFBNEIsT0FFOUIsTUFDRixJQUFLLGFBQ0dwRCxPQUFPb0QsT0FBTyxDQUNsQix5QkFBMEIsT0FFNUIsTUFDRixJQUFLLGdCQUNHcEQsT0FBT29ELE9BQU8sQ0FDbEIsNEJBQTZCLFNBUzdDLE9BQU9uSyxLQUFLcEQsT0FBT3VOLE9BQU9tVixXQ2pxRXZCLE1BQU02aUMscUJBQXFCMUssZUFLaEMsZ0JBQ0UsTUFBTTErQyxXQUFhMlYsTUFBTXZELFVBcUN6QixPQWxDQXBTLEtBQUtxcEQsY0FBZSxFQUNwQnJwRCxLQUFLc3BELGVBQWlCcmlELEtBQUszRCxNQUFNZ3BCLGFBQWEsdUJBQ2xCaGdCLElBQXhCdE0sS0FBS3NwRCxpQkFBOEJ0cEQsS0FBS3NwRCxnQkFBaUIsR0FFN0R0cEQsS0FBS3VwRCxPQUF5QyxPQUFoQ3ZwRCxLQUFLQSxLQUFLd1EsUUFBUUMsSUFBSW5NLE1BQ3BDdEUsS0FBS3dwRCxNQUF1QyxPQUEvQnhwRCxLQUFLQSxLQUFLd1EsUUFBUVMsR0FBRzNNLE1BQ2xDdEUsS0FBS3lwRCxRQUEwQyxPQUFoQ3pwRCxLQUFLQSxLQUFLd1EsUUFBUW8zQixJQUFJdGpDLE1BRXJDdEUsS0FBSzBwRCxZQUFhLEVBRWxCMXBELEtBQUt1aEQsbUJBQ0h2Z0QsT0FBTzJvRCxVQUFVQyxlQUFlNTVDLEtBQUtoUSxLQUFLKytDLFlBQWEsVUFDdEQvK0MsS0FBS0EsS0FBS3cyQixNQUFNaVUsT0FDbkJ6cUMsS0FBS3doRCxtQkFDSHhnRCxPQUFPMm9ELFVBQVVDLGVBQWU1NUMsS0FBS2hRLEtBQUsrK0MsWUFBYSxVQUN0RC8rQyxLQUFLQSxLQUFLdzJCLE1BQU1pVSxPQUNuQnpxQyxLQUFLeWhELG9CQUNIemdELE9BQU8yb0QsVUFBVUMsZUFBZTU1QyxLQUFLaFEsS0FBSysrQyxZQUFhLFdBQ3RELytDLEtBQUtBLEtBQUt3MkIsTUFBTWlVLE9BQ25CenFDLEtBQUswaEQscUJBQ0gxZ0QsT0FBTzJvRCxVQUFVQyxlQUFlNTVDLEtBQUtoUSxLQUFLKytDLFlBQWEsWUFDdEQvK0MsS0FBS0EsS0FBS3cyQixNQUFNaVUsT0FDbkJ6cUMsS0FBSzJoRCxzQkFDSDNnRCxPQUFPMm9ELFVBQVVDLGVBQWU1NUMsS0FBS2hRLEtBQUsrK0MsWUFBYSxZQUN0RC8rQyxLQUFLQSxLQUFLdzJCLE1BQU1pVSxPQUNuQnpxQyxLQUFLNGhELHNCQUF1QixFQUM1QjVoRCxLQUFLNnBELGFBQ0g3cEQsS0FBS3VoRCxvQkFDTHZoRCxLQUFLd2hELG9CQUNMeGhELEtBQUt5aEQscUJBQ0x6aEQsS0FBSzBoRCxzQkFDTDFoRCxLQUFLMmhELHVCQUNMM2hELEtBQUs0aEQscUJBRUE1aEQsS0FHVGtqQixrQkFBbUIvWCxNQUNqQndLLE1BQU11TixrQkFBa0IvWCxNQUN4QkEsS0FBSzhCLEtBQUssYUFBYWtXLE1BQU1sYyxLQUFLNmlELFlBQVlycUMsS0FBS3hZLE9BQy9DQSxLQUFLM0QsTUFBTXdPLFNBQ2IzRyxLQUNHOEIsS0FBSyxrQ0FDTDg4QyxRQUFPM29ELE9BQVM2RixLQUFLM0QsTUFBTTBtRCx3QkFBd0I1b0QsU0FJMUQsa0JBQW1CQSxPQUVqQixHQURBQSxNQUFNeU0saUJBRUg1RyxLQUFLM0QsTUFBTXRELEtBQUtBLEtBQUsrZCxRQUFRckgsUUFBUSt5QixhQUNyQ3hpQyxLQUFLM0QsTUFBTXRELEtBQUtBLEtBQUsrZCxRQUFRckgsUUFBUWt6QixhQUt4QyxJQUNHeG9DLE1BQU1DLFNBQ0xELE1BQU1FLFNBQ1ksS0FBbEJGLE1BQU1HLFNBQ1ksTUFBbEJILE1BQU1HLFVBQ1I3RCxLQUFLb0MsS0FBS3lSLEtBQ1YsQ0FDQSxJQUFJM0gsV0FBWXNDLFNBQ2hCLElBQUs5SyxNQUFNMk0sU0FBVSxDQUNuQixNQUFNM0IsWUFBY0MsV0FBVzFKLE9BQU8sQ0FDcENzMkIseUJBQXlCLElBRXZCN3NCLFFBQ0ZGLFNBQVdySCxPQUFPdUgsTUFBTXhPLElBQUksY0FDNUJnTSxXQUFhL0UsT0FBT3VILE1BQU14TyxJQUFJLGdCQUdsQyxNQUFNK3hDLFNBQVcsQ0FDZnJtQyxNQUFPLFVBQ1BrTixPQUFRdlAsS0FBSzNELE1BQU10RCxLQUFLQSxLQUFLK2QsUUFBUXJILFFBQVEreUIsWUFDN0NuekIsT0FBUXJQLEtBQUszRCxNQUFNdEQsS0FBS0EsS0FBSytkLFFBQVFySCxRQUFRa3pCLGNBRUQsY0FBMUNsc0MsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGNBQzVCK3hDLFNBQVNsd0MsT0FBUSxRQUVLLElBQWJ5TSxXQUEwQnlqQyxTQUFTempDLFNBQVdBLGVBQy9CLElBQWZ0QyxhQUE0QitsQyxTQUFTL2xDLFdBQWFBLFlBQzdELE1BQU1tbUMsS0FBTzNWLFdBQVdtWixlQUFlNUQsVUFDbkNJLE1BQ0Z2dUMsV0FBV3NyQyxjQUNULEtBQ0FwdkMsS0FBS2dKLEtBQUtZLE9BQU8saUNBQWtDLENBQ2pEZ0MsTUFBT3ltQyxhQUtidDZCLGFBQWF3MEMsYUFBYWhqRCxLQUFLM0QsTUFBTThHLFNBQVVoSixNQUFNMk0sVUFJekQ4ekMsZUFDRTU2QyxLQUFLM0QsTUFBTTRtRCxlQUFlLGtCQUMxQnYwQyxNQUFNa3NDLGVBVVIsNEJBQ0UsT0FBT3Z2QixZQUFZM2MsTUFBTTRjLGVBQWdCLENBQ3ZDeE8sUUFBUyxDQUFDLE9BQVEsUUFBUyxRQUFTLE9BQ3BDMHRCLFNBQVUsQ0FBQyxDQUFFQyxhQUFjLFFBQVNDLGFBQWMsT0FDbERwa0MsU0FBVSwrQ0FDVndrQyxNQUFPLElBQ1BvWSxXQUFXLElBVWYsb0JBQXFCL29ELE1BQU9tbEIsVUFDMUIsS0FBSW5sQixNQUFNa2lCLGVBQ0psaUIsTUFBTWtpQixjQUFjMWlCLFdBQ2xCUSxNQUFNa2lCLGNBQWMxaUIsVUFBVTRqQixTQUFTLHlCQVMvQyxPQUFPN08sTUFBTXkwQyxjQUFjaHBELE1BQU9tbEIsVUFSNUJ0ZixLQUFLM0QsTUFBTSttRCxrQkFDVGpwRCxNQUFNa2lCLGNBQWMzZixLQUNwQnZDLE1BQU1raUIsY0FBY2hmLE9BUzlCLGlCQUFrQm1aLElBQUt0UyxNQUNyQixNQUFNbS9DLEtBQU9uL0MsS0FBSzhCLEtBQUssa0NBQ25CcTlDLEtBQUtsckQsUUFDUGtyRCxLQUFLdFksT0FDSDl6QyxLQUFLZ0IsSUFBSSxLQUFNaU0sS0FBSzZtQyxTQUFXc1ksS0FBS3QzQyxXQUFXRSxJQUFNLEdBQUtvM0MsS0FBS2xyRCxRQUM3RCxNQUtSbXJELFlBQWE5cEQsR0FDWGtWLE1BQU00MEMsWUFBWTlwRCxHQUNsQjJvRCxhQUFhb0IsVUFBVS9wRCxFQUFHd0csS0FBSzBlLFdDdEs1QixNQUFNOGtDLDBCQUEwQnJCLGFBS3JDLGdCQUNFLE1BQU1wcEQsV0FBYTJWLE1BQU12RCxVQUV6QixPQURBcFMsS0FBSzBwRCxZQUFhLEVBQ1gxcEQsS0FPVCw0QkFDRSxPQUFPc3lCLFlBQVkzYyxNQUFNNGMsZUFBZ0IsQ0FDdkN4TyxRQUFTLENBQUMsT0FBUSxRQUFTLFFBQVMsTUFBTyxlQ3BCMUMsTUFBTTJtQyw2QkFBNkJoTSxlQUN4Q2lNLG9CQUNFLEdBQThCLHlCQUExQjFqRCxLQUFLMEYsWUFBWWhKLEtBQWlDLENBQy9Dc0QsS0FBSzJqRCxhQUFZM2pELEtBQUsyakQsWUFBYSxHQUN4QyxJQUFJOW1DLFFBQVVuTyxNQUFNZzFDLG9CQWFwQixPQVpBN21DLFFBQVUsQ0FDUixDQUNFelcsTUFBT3BHLEtBQUsyakQsV0FDUmx0RCxLQUFLZ0osS0FBS0MsU0FBUyxpQkFDbkJqSixLQUFLZ0osS0FBS0MsU0FBUyxrQkFDdkJ5MkMsTUFBTyxrQkFDUDluQixLQUFNcnVCLEtBQUsyakQsV0FDUCx5QkFDQSx5QkFDSkMsUUFBU3pwRCxPQUFTNkYsS0FBSzZqRCxnQkFBZ0IxcEQsU0FFekNvekIsT0FBTzFRLFNBQ0ZBLFFBRVQsT0FBT25PLE1BQU1nMUMsb0JBR2Ysc0JBQXVCdnBELE9BQ3JCNkYsS0FBSzJqRCxZQUFjM2pELEtBQUsyakQsaUJBQ2xCM2pELEtBQUs0YyxRQUNYLE1BQU1oaUIsUUFBVW9GLEtBQUsyakQsV0FDakIsQ0FDRTdtQyxRQUFTLENBQUMsT0FBUSxRQUFTLFlBQWEsY0FDeENpdUIsT0FBUSxJQUNSbVksV0FBVyxFQUNYcFksTUFBTyxLQUVUMlkscUJBQXFCbjRCLHFCQUNuQnRyQixLQUFLNEssUUFBTyxFQUFNaFEsU0FHMUIsZ0JBQ0UsTUFBTTdCLFdBQWEyVixNQUFNdkQsVUFtRXpCLFFBakUyRCxJQUFoRG5MLEtBQUszRCxNQUFNNnlCLFFBQVEsT0FBUSx3QkFDOUJsdkIsS0FBSzNELE1BQU13dkIsUUFBUSxPQUFRLGlCQUFpQixHQUVwRDl5QixLQUFLK3FELG1CQUFxQjlqRCxLQUFLM0QsTUFBTTZ5QixRQUFRLE9BQVEsc0JBRVEsSUFBcERsdkIsS0FBSzNELE1BQU02eUIsUUFBUSxPQUFRLDRCQUU1Qmx2QixLQUFLM0QsTUFBTXd2QixRQUFRLE9BQVEscUJBQXFCLEdBRXhEOXlCLEtBQUtnckQsa0JBQW9CL2pELEtBQUszRCxNQUFNNnlCLFFBQVEsT0FBUSxxQkFDcERuMkIsS0FBS2lyRCxjQUFnQnZ0RCxLQUFLSSxTQUFTRixJQUFJLE9BQVEsaUJBRTNDcUosS0FBSzNELE1BQU0wL0IsWUFDYmhqQyxLQUFLQSxLQUFLd00sTUFBTXcyQixXQUFhLzdCLEtBQUszRCxNQUFNMC9CLFdBQVdyL0IsS0FDbkQzRCxLQUFLQSxLQUFLd00sTUFBTTArQyxlQUFnQixHQUMzQmxyRCxLQUFLQSxLQUFLd00sTUFBTTArQyxlQUFnQixFQUVuQ2prRCxLQUFLM0QsTUFBTTIvQixXQUNiampDLEtBQUtBLEtBQUt3TSxNQUFNeTJCLFVBQVloOEIsS0FBSzNELE1BQU0yL0IsVUFBVXQvQixLQUNqRDNELEtBQUtBLEtBQUt3TSxNQUFNMitDLGNBQWUsR0FDMUJuckQsS0FBS0EsS0FBS3dNLE1BQU0yK0MsY0FBZSxFQUV0Q25yRCxLQUFLb3JELGdCQUFrQm5rRCxLQUFLM0QsTUFBTXltQyxpQkFDbEMvcEMsS0FBS3FyRCxnQkFBa0Jwa0QsS0FBSzNELE1BQU1nb0Qsc0JBQ2xDdHJELEtBQUt1ckQsd0JBQ0gxbUQsT0FBT29DLEtBQUszRCxNQUFNZ29ELHlCQUNsQnptRCxPQUFPb0MsS0FBSzNELE1BQU10RCxLQUFLQSxLQUFLa2dELGFBQWFsZCxZQUMzQ2hqQyxLQUFLd3JELGVBQWlCdmtELEtBQUszRCxNQUFNbW9ELHFCQUNqQ3pyRCxLQUFLMHJELHVCQUNIN21ELE9BQU9vQyxLQUFLM0QsTUFBTW1vRCx3QkFDbEI1bUQsT0FBT29DLEtBQUszRCxNQUFNdEQsS0FBS0EsS0FBS2tnRCxhQUFhamQsV0FDM0NqakMsS0FBSzJyRCxjQUFnQjFrRCxLQUFLM0QsTUFBTXNvRCxvQkFDaEM1ckQsS0FBSzZyRCxzQkFDSGhuRCxPQUFPb0MsS0FBSzNELE1BQU1zb0QsdUJBQ2xCL21ELE9BQU9vQyxLQUFLM0QsTUFBTXRELEtBQUtBLEtBQUtrZ0QsYUFBYW5kLFVBQzNDL2lDLEtBQUs4ckQsZ0JBQWtCam5ELE9BQ3JCb0MsS0FBSzNELE1BQU0wL0IsWUFBWWhqQyxLQUFLQSxLQUFLaW5DLGFBQWEvbkMsS0FFaERjLEtBQUsrckQsZ0JBQWtCbG5ELE9BQ3JCb0MsS0FBSzNELE1BQU0wL0IsWUFBWWhqQyxLQUFLQSxLQUFLaW5DLGFBQWE1bkMsS0FFaERXLEtBQUtnc0Qsb0JBQ0gva0QsS0FBSzNELE1BQU0wakMsbUJBQW1CaG5DLEtBQUtBLEtBQUs4WSxhQUFha3FCLFdBQ25EaGpDLEtBQUs4ckQsaUJBQ1A3a0QsS0FBSzNELE1BQU0wakMsbUJBQW1CaG5DLEtBQUtBLEtBQUs4WSxhQUFha3FCLFdBQ25EaGpDLEtBQUsrckQsZ0JBQ1QvckQsS0FBS2lzRCxnQkFBa0Jqc0QsS0FBSysrQyxZQUFZbU4sUUFBUTlzRCxPQUM1Q1ksS0FBSysrQyxZQUFZbU4sUUFBUTlzRCxPQUN6QixFQUNKWSxLQUFLbXNELGVBQWlCbGxELEtBQUszRCxNQUFNMi9CLFdBQVdqakMsS0FBS0EsS0FBS29zRCxRQUNsRG5sRCxLQUFLM0QsTUFBTTIvQixXQUFXampDLEtBQUtBLEtBQUtvc0QsUUFDaEMsRUFDSnBzRCxLQUFLcXNELG1CQUFxQnJzRCxLQUFLaXNELGdCQUFrQmpzRCxLQUFLbXNELGVBRXREbnNELEtBQUtzc0Qsc0JBQXdCcmxELEtBQUszRCxNQUFNZ3BELHNCQUV4Q3RzRCxLQUFLdXNELGlCQUFtQjd1RCxLQUFLSSxTQUFTRixJQUFJLE9BQVEsc0JBQ2xEb0MsS0FBS3dzRCxrQkFBb0I5dUQsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLHVCQUNuRG9DLEtBQUt5c0QsdUJBQXlCL3VELEtBQUtJLFNBQVNGLElBQzFDLE9BQ0EsMEJBRUZvQyxLQUFLMHNELGNBQWdCMXNELEtBQUt1c0Qsa0JBQW9CdnNELEtBQUt3c0Qsa0JBRW5EeHNELEtBQUs2L0MsYUFBZTU0QyxLQUFLM0QsTUFBTWdwQixhQUFhLGlCQUN2Q3RzQixLQUFLNi9DLGFBQWMsQ0FFdEIsSUFBSThNLE9BQ0E1TSxlQUZKLy9DLEtBQUs4L0MsT0FBUyxHQUdUOS9DLEtBQUtBLEtBQUs4L0MsUUFJYjZNLE9BQVN4bEQsU0FBU25ILEtBQUtBLEtBQUs4L0MsT0FBT3g3QixZQUMvQm5kLFNBQVNuSCxLQUFLQSxLQUFLOC9DLE9BQU94N0IsWUFDMUIsRUFDSnk3QixlQUFpQi8vQyxLQUFLQSxLQUFLOC9DLE9BQU9DLGVBQzlCLy9DLEtBQUtBLEtBQUs4L0MsT0FBT0MsZUFDakIsTUFSSjRNLE9BQVMsRUFDVDVNLGVBQWlCLEtBVW5CLy9DLEtBQUs4L0MsT0FBTzhNLGNBQWdCLEdBQUc3TSxpQkFBaUI5NEMsS0FBSzNELE1BQU1zcEQsY0FDekRELFNBQ0Yzc0QsS0FBSzgvQyxPQUFPK00sT0FBUyxHQUFHOU0saUJBQWlCOTRDLEtBQUszRCxNQUFNdXBELE9BQVNGLFNBQzdEM3NELEtBQUs4L0MsT0FBT2dOLEtBQU8sR0FBRy9NLGlCQUFpQjk0QyxLQUFLM0QsTUFBTXdwRCxLQUFPSCxTQUczRDNzRCxLQUFLK3NELGtCQUFvQnJ2RCxLQUFLSSxTQUFTRixJQUFJLE9BQVEscUJBRW5Eb0MsS0FBSzRxRCxXQUFhM2pELEtBQUsyakQsV0FDdkI1cUQsS0FBS3lrQyxVQUFZLEdBQ2pCLElBQUl1b0IsYUFBZSxHQUNuQixJQUFLLE1BQU1uakQsU0FBUzdKLEtBQUt1akIsUUFDbkJ2akIsS0FBS2dyRCxtQkFBc0JuaEQsTUFBTTdKLEtBQUtzckIsV0FBV3ROLFNBQy9DblUsTUFBTTdKLEtBQUtzckIsV0FBV3ZOLFNBQ3BCaXZDLGVBQWlCbmpELE1BQU03SixLQUFLd21CLGlCQUM5QndtQyxhQUFlbmpELE1BQU03SixLQUFLd21CLGVBQzFCeG1CLEtBQUt5a0MsVUFBVXpsQyxLQUFLLENBQ2xCaXVELGtCQUFrQixFQUNsQnRwRCxLQUFNa0csTUFBTTdKLEtBQUt3bUIsa0JBSXZCeG1CLEtBQUt5a0MsVUFBVXpsQyxLQUFLNkssUUFvQnhCLEdBakJBN0osS0FBS2t0RCxjQUFnQixJQUFJbHRELEtBQUt1akIsUUFBUTRVLE1BQUssQ0FBQzEzQixFQUFHaXNCLElBQ3RDQSxFQUFFMXNCLEtBQUtzRSxNQUFRN0QsRUFBRVQsS0FBS3NFLFFBRS9CdEUsS0FBS210RCxVQUFZLElBQUludEQsS0FBS2t0RCxlQUFlMW9ELE1BQU0sRUFBRyxJQUNsRHhFLEtBQUtrdEQsY0FBZ0JsdEQsS0FBS2t0RCxjQUFjL3RELFFBQ3RDMEssT0FBUzdKLEtBQUtnckQsb0JBQXNCbmhELE1BQU03SixLQUFLc3JCLFdBQVd0TixTQUU1RGhlLEtBQUtvdEQsV0FBYSxJQUFJcHRELEtBQUtrL0MsWUFBYWwvQyxLQUFLaS9DLFVBQzFDOW1CLE1BQUssQ0FBQzEzQixFQUFHaXNCLElBQ0Rqc0IsRUFBRVQsS0FBSzZKLE1BQU1xaUIsTUFBTTVuQixNQUFRb29CLEVBQUUxc0IsS0FBSzZKLE1BQU1xaUIsTUFBTTVuQixRQUV0RCtvRCxVQUNBN29ELE1BQU0sRUFBRyxHQUNaeEUsS0FBS3N0RCxrQkFBb0I1dkQsS0FBS0ksU0FBU0YsSUFDckMsT0FDQSw0QkFFRW9DLEtBQUtzdEQsb0JBQXNCdHRELEtBQUtBLEtBQUt3TSxNQUFNb3pDLFdBQVksQ0FDekQsTUFBTTkvQyxLQUFPbUgsS0FBSzNELE1BQU1pcUQsY0FDcEJ6dEQsT0FDRkUsS0FBS0EsS0FBS3dNLE1BQU1vekMsV0FBYTkvQyxLQUFLNkQsTUE4QnRDLE9BMUJBM0QsS0FBS3d0RCxlQUF3QyxJQUF2Qnh0RCxLQUFLdWpCLE9BQU9ua0IsT0FFbENZLEtBQUt1aEQsbUJBQ0h2Z0QsT0FBTzJvRCxVQUFVQyxlQUFlNTVDLEtBQUtoUSxLQUFLKytDLFlBQWEsVUFDdEQvK0MsS0FBS0EsS0FBS3cyQixNQUFNaVUsT0FDbkJ6cUMsS0FBS3doRCxtQkFDSHhnRCxPQUFPMm9ELFVBQVVDLGVBQWU1NUMsS0FBS2hRLEtBQUsrK0MsWUFBYSxVQUN0RC8rQyxLQUFLQSxLQUFLdzJCLE1BQU1pVSxPQUNuQnpxQyxLQUFLeWhELG9CQUNIemdELE9BQU8yb0QsVUFBVUMsZUFBZTU1QyxLQUFLaFEsS0FBSysrQyxZQUFhLFdBQ3RELytDLEtBQUtBLEtBQUt3MkIsTUFBTWlVLE9BQ25CenFDLEtBQUswaEQscUJBQ0gxZ0QsT0FBTzJvRCxVQUFVQyxlQUFlNTVDLEtBQUtoUSxLQUFLKytDLFlBQWEsWUFDdEQvK0MsS0FBS0EsS0FBS3cyQixNQUFNaVUsT0FDbkJ6cUMsS0FBSzJoRCxzQkFDSDNnRCxPQUFPMm9ELFVBQVVDLGVBQWU1NUMsS0FBS2hRLEtBQUsrK0MsWUFBYSxZQUN0RC8rQyxLQUFLQSxLQUFLdzJCLE1BQU1pVSxPQUVuQnpxQyxLQUFLNnBELGFBQ0g3cEQsS0FBS3VoRCxvQkFDTHZoRCxLQUFLd2hELG9CQUNMeGhELEtBQUt5aEQscUJBQ0x6aEQsS0FBSzBoRCxzQkFDTDFoRCxLQUFLMmhELHVCQUNMM2hELEtBQUs0aEQscUJBRUE1aEQsS0FPVCw0QkFDRSxPQUFPc3lCLFlBQVkzYyxNQUFNNGMsZUFBZ0IsQ0FDdkN4TyxRQUFTLENBQUMsT0FBUSxVQUFXLFFBQVMsYUFDdEN4VyxTQUFVLHFEQUNWd2tDLE1BQU8sSUFDUEMsT0FBUSxJQUNSbVksV0FBVyxFQUNYMVksU0FBVSxDQUFDLENBQUVDLGFBQWMsUUFBU0MsYUFBYyxPQUNsRDhiLEtBQU0sQ0FDSixDQUNFQyxZQUFhLGFBQ2JDLGdCQUFpQixjQUNqQkMsUUFBUyxhQU1qQjFxQyxrQkFBbUIvWCxNQUNqQndLLE1BQU11TixrQkFBa0IvWCxNQUVwQmxFLEtBQUszRCxNQUFNd08sVUFFYjNHLEtBQ0c4QixLQUFLLG9DQUNMa1csT0FBTS9rQixNQUFBQSxPQUFlNkksS0FBSzRtRCxZQUFZenNELFNBQ3pDK0osS0FDRzhCLEtBQUsscUJBQ0xrVyxPQUFNL2tCLGVBQWtCNkksS0FBSzNELE1BQU1nakMsb0JBQ3RDbjdCLEtBQ0c4QixLQUFLLG9CQUNMa1csT0FBTS9rQixlQUFrQjZJLEtBQUszRCxNQUFNc2lDLG1CQUN0Q3o2QixLQUFLOEIsS0FBSyxjQUFja1csT0FBTS9oQixPQUFTNkYsS0FBSzZtRCxlQUFlMXNELFNBQzNEK0osS0FDRzhCLEtBQUssa0NBQ0w4OEMsUUFBTzNvRCxPQUFTNkYsS0FBSzNELE1BQU0wbUQsd0JBQXdCNW9ELFNBQ3REK0osS0FBSzhCLEtBQUsscUJBQXFCa1csT0FBTS9oQixRQUNuQzZGLEtBQUs4bUQsb0JBQW9CM3NELFVBRTNCK0osS0FBSzhCLEtBQUsseUJBQXlCa1csT0FBTS9oQixRQUN2QzZGLEtBQUsrbUQsd0JBQXdCNXNELFdBS25DLDBCQUEyQkEsT0FNekIsYUFMTTZGLEtBQUszRCxNQUFNd3ZCLFFBQ2YsT0FDQSxpQkFDQzdyQixLQUFLM0QsTUFBTTZ5QixRQUFRLE9BQVEsd0JBRWpCbHZCLEtBQUs0SyxRQUFPLEdBRzNCLDhCQUErQnpRLE9BTTdCLGFBTE02RixLQUFLM0QsTUFBTXd2QixRQUNmLE9BQ0EscUJBQ0M3ckIsS0FBSzNELE1BQU02eUIsUUFBUSxPQUFRLDRCQUVqQmx2QixLQUFLNEssUUFBTyxHQUczQixrQkFBbUJ6USxPQUNqQkEsTUFBTXlNLGlCQUNOLE1BQU0vRixRQUFVMUcsTUFBTWtpQixjQUFjMUcsUUFBUSxTQUFTMWMsUUFBUTBILGFBQ3ZEWCxLQUFLM0QsTUFBTTJxRCxhQUFhbm1ELFFBQVMxRyxNQUFNMk0sVUFHL0MrL0MsZUFBZ0Ixc0QsT0FDZEEsTUFBTXlNLGlCQUNOLE1BQU0zTCxLQUFPZCxNQUFNa2lCLGNBQWNwakIsUUFBUWdDLEtBQ25DNEgsS0FBTzdDLEtBQUszRCxNQUFNcEIsTUFDcEI0SCxNQUFNQSxLQUFLNkgsTUFBTUUsUUFBTyxHQUc5QixtQkFBb0JGLE9BQ2xCLEdBQUlqVSxLQUFLSSxTQUFTRixJQUFJLE9BQVEsd0JBQXlCLENBQ3JELEdBQUlGLEtBQUtJLFNBQVNGLElBQUksT0FBUSwyQkFPNUIsR0FOQStULE1BQU03TixRQUFRb3FELElBQ1osa0JBQ0F4d0QsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLDJCQUtrQyxVQUE1REYsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLDhCQUMxQixDQUNBLElBQUl1d0QsV0FBWUMsYUFDaEIsSUFBSyxJQUFJbDZDLEVBQUksRUFBR0EsRUFBSXhULFNBQVMydEQsWUFBWWp2RCxPQUFROFUsSUFDL0MsR0FBSXhULFNBQVMydEQsWUFBWW42QyxHQUFHbzZDLE1BQU1DLFNBQVMsYUFBYyxDQUN2REosV0FBYXp0RCxTQUFTMnRELFlBQVluNkMsR0FDbEMsTUFJSixHQUFJaTZDLFdBQ0YsSUFBSyxJQUFJajZDLEVBQUksRUFBR0EsRUFBSWk2QyxXQUFXSyxNQUFNcHZELE9BQVE4VSxJQUMzQyxHQUN1Qyw0QkFBckNpNkMsV0FBV0ssTUFBTXQ2QyxHQUFHdTZDLGFBQ3BCLENBQ0FMLGFBQWVsNkMsRUFDZixNQUlOLEdBQUlrNkMsYUFBYyxDQUNoQixNQUFNTSxTQUFXUCxXQUFXSyxNQUFNSixjQUFjcjdDLE1BTWhELE9BTEEyN0MsU0FBU0MsZUFBZSxnQkFDeEJELFNBQVNFLFlBQ1AsYUFDQWx4RCxLQUFLSSxTQUFTRixJQUFJLE9BQVEsMkJBRXBCRixLQUFLSSxTQUFTRixJQUFJLE9BQVEsK0JBQ2hDLElBQUssT0FDSDh3RCxTQUFTRSxZQUFZLGtCQUFtQixRQUN4QyxNQUNGLElBQUssVUFDSEYsU0FBU0UsWUFBWSxrQkFBbUIsV0FDeEMsTUFDRixJQUFLLFFBQ0hGLFNBQVNFLFlBQVksa0JBQW1CLFNBQ3hDLE1BQ0YsUUFDRUYsU0FBU0UsWUFBWSxrQkFBbUIsZUFPaEQsU0FEQWx4RCxLQUFLSSxTQUFTRixJQUFJLE9BQVEsMEJBQTBCa0YsZUFHcEQ2TyxNQUFNN04sUUFBUW9xRCxJQUNaLGtCQUNBLHFDQXlESixHQXJESXh3RCxLQUFLSSxTQUFTRixJQUFJLE9BQVEsK0JBQzVCK1QsTUFBTTdOLFFBQVFvcUQsSUFDWixtQkFDQXh3RCxLQUFLSSxTQUFTRixJQUFJLE9BQVEsZ0NBS1AsU0FGckJGLEtBQUtJLFNBQ0ZGLElBQUksT0FBUSwrQkFDWmtGLGVBRUg2TyxNQUFNN04sUUFBUW9xRCxJQUNaLG1CQUNBLHFDQUlBeHdELEtBQUtJLFNBQVNGLElBQUksT0FBUSxxQkFDNUIrVCxNQUFNN04sUUFBUW9xRCxJQUNaLHFCQUNBeHdELEtBQUtJLFNBQVNGLElBQUksT0FBUSxzQkFHcUMsU0FBakVGLEtBQUtJLFNBQVNGLElBQUksT0FBUSxxQkFBcUJrRixlQUUvQzZPLE1BQU03TixRQUFRb3FELElBQ1oscUJBQ0EscUNBSUF4d0QsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLHNCQUM1QitULE1BQU03TixRQUFRb3FELElBQ1osMkJBQ0F4d0QsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLHNCQUcxQkYsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLDJCQUM1QitULE1BQU03TixRQUFRb3FELElBQ1osMEJBQ0F4d0QsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLDJCQUcxQkYsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLDRCQUM1QitULE1BQU03TixRQUFRb3FELElBQ1osaUNBQ0F4d0QsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLDRCQUd6QkYsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLDZCQUM3QitULE1BQU03TixRQUFRb3FELElBQUksaUJBQWtCLFFBQ3BDdjhDLE1BQU03TixRQUFRb3FELElBQUksZ0NBQWlDLFNBR2pEeHdELEtBQUtJLFNBQVNGLElBQUksT0FBUSxtQkFBb0IsQ0FDeEIsSUFBSWl4RCxTQUMxQixrQkFDQW54RCxLQUFLSSxTQUFTRixJQUFJLE9BQVEsb0JBR3pCa3hELE9BQ0Fsc0QsTUFBSyxTQUFVbXNELFlBQ2RydUQsU0FBU3N1RCxNQUFNbnVELElBQUlrdUQsZUFFcEJsN0MsT0FBTSxTQUFVQyxPQUNmdk4sR0FBR0MsY0FBY3NOLE1BQU1BLFVBSTdCLEdBQUlwVyxLQUFLSSxTQUFTRixJQUFJLE9BQVEsdUJBQXdCLENBQ3JCLElBQUlpeEQsU0FDakMsa0JBQ0FueEQsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLHVCQUMxQixDQUFFcXhELE9BQVEsU0FHVEgsT0FDQWxzRCxNQUFLLFNBQVVtc0QsWUFDZHJ1RCxTQUFTc3VELE1BQU1udUQsSUFBSWt1RCxlQUVwQmw3QyxPQUFNLFNBQVVDLE9BQ2Z2TixHQUFHQyxjQUFjc04sTUFBTUEsVUFJN0IsR0FBSXBXLEtBQUtJLFNBQVNGLElBQUksT0FBUSx1QkFBd0IsQ0FDcEQsTUFBTXl2QixLQUFPLEdBQUczdkIsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLDJCQUN0Q3l2QixPQUFTelIsRUFBRSxTQUFTc3lDLElBQUksY0FDMUJ0eUMsRUFBRSxTQUFTc3lDLElBQUksWUFBYTdnQyxTQzVhL0IsTUFBTTZoQyxXQUNYLDJCQUE0Qnp4QyxJQUFLdFMsS0FBTW5MLE1BQ3JDLE1BQU1tdkQsY0FBZ0JudkQsS0FBS292RCxRQUFRcHZELEtBQUtxdkQsYUFBZSxHQUNsREYsZ0JBSUxoa0QsS0FBSzhCLEtBQUssY0FBY3FpRCxNQUFLLENBQUNwN0MsRUFBRzhSLE1BRy9CLE1BQU11cEMsT0FBU3ZwQyxHQUFHb1YsYUFBYSxxQkFDekJvMEIscUJBQXVCeHBDLEdBQUdqZixjQUFjLHVCQUV4QzBvRCxVQUFZTixjQUFjbnZELEtBQUswdkQsV0FBVzl4RCxJQUFJMnhELFFBZXBELEdBYklFLFVBQVV0NUIsUUFBUSxPQUFRLFVBQzVCdmEsRUFBRTR6QyxzQkFBc0JHLFFBQ3RCLHVEQUF1RGp5RCxLQUFLZ0osS0FBS0MsU0FDL0QsK0ZBSUppVixFQUFFNHpDLHNCQUFzQkcsUUFDdEIsZ0RBQWdEanlELEtBQUtnSixLQUFLQyxTQUN4RCw0RkFLNEMsYUFBaERqSixLQUFLSSxTQUFTRixJQUFJLE9BQVEsbUJBQzFCRixLQUFLSSxTQUFTRixJQUFJLE9BQVEsc0JBRTFCLEdBQUk2eEQsVUFBVUcsV0FBWSxDQUN4QixNQUFNQyxnQkFBa0I3cEMsR0FBR2pmLGNBQWMscUJBQ25DK29ELGVBQWlCRCxnQkFBZ0I5b0QsY0FBYyxlQUMvQ2hKLEtBQ0osSUFBTTB4RCxVQUFVRyxXQUFhLElBQU0xeEQsS0FBSzZTLE1BQU0wK0MsVUFBVUcsWUFDMUQsT0FBUTF4RCxLQUFLNlMsTUFBTTArQyxVQUFVRyxhQUMzQixLQUFLeG9ELFVBQVVGLGFBQWFRLE9BQzFCbW9ELGdCQUFnQmp2RCxVQUFVQyxJQUFJLFVBQzlCaXZELGVBQWVuc0MsVUFBWWptQixLQUFLZ0osS0FBS0MsU0FBUyxlQUM5Q21wRCxlQUFlM3ZELE1BQVFwQyxLQUN2QixNQUNGLEtBQUtxSixVQUFVRixhQUFhUyxRQUMxQmtvRCxnQkFBZ0JqdkQsVUFBVUMsSUFBSSxXQUM5Qml2RCxlQUFlbnNDLFVBQVlqbUIsS0FBS2dKLEtBQUtDLFNBQVMsZ0JBQzlDbXBELGVBQWUzdkQsTUFBUXBDLEtBQ3ZCLE1BQ0YsS0FBS3FKLFVBQVVGLGFBQWFHLFFBQzFCd29ELGdCQUFnQmp2RCxVQUFVQyxJQUFJLG1CQUM5Qml2RCxlQUFlbnNDLFVBQVlqbUIsS0FBS2dKLEtBQUtDLFNBQ25DLDhCQUVGbXBELGVBQWUzdkQsTUFBUXBDLEtBQ3ZCLE1BQ0YsS0FBS3FKLFVBQVVGLGFBQWFLLEtBQzFCc29ELGdCQUFnQmp2RCxVQUFVQyxJQUFJLGdCQUM5Qml2RCxlQUFlbnNDLFVBQVlqbUIsS0FBS2dKLEtBQUtDLFNBQ25DLDJCQUVGbXBELGVBQWUzdkQsTUFBUXBDLEtBQ3ZCLE1BQ0YsS0FBS3FKLFVBQVVGLGFBQWFNLFFBQzFCcW9ELGdCQUFnQmp2RCxVQUFVQyxJQUFJLG1CQUM5Qml2RCxlQUFlbnNDLFVBQVlqbUIsS0FBS2dKLEtBQUtDLFNBQ25DLDhCQUVGbXBELGVBQWUzdkQsTUFBUXBDLEtBQ3ZCLE1BQ0YsS0FBS3FKLFVBQVVGLGFBQWFPLFNBQzFCb29ELGdCQUFnQmp2RCxVQUFVQyxJQUFJLFlBQzlCaXZELGVBQWVuc0MsVUFBWWptQixLQUFLZ0osS0FBS0MsU0FDbkMsK0JBRUZtcEQsZUFBZTN2RCxNQUFRcEMsWUFJeEIsR0FBSTB4RCxVQUFVRyxXQUFhLEVBQUcsQ0FDbkMsTUFBTUcsR0FBSy9wQyxHQUFHamYsY0FBYyxlQUFlQSxjQUFjLE1BQ25EZ3ZCLEtBQU8vUCxHQUFHamYsY0FBYyxtQkFDOUJncEQsR0FBR2g5QyxNQUFNaTlDLFdBQWEsTUFDdEJELEdBQUdoOUMsTUFBTWs5QyxXQUFhLHNCQUN0Qmw2QixLQUFLaGpCLE1BQU1pOUMsV0FBYSxNQUN4Qmo2QixLQUFLaGpCLE1BQU1rOUMsV0FBYSxzQkFFeEJqcUMsR0FBR2pULE1BQU1tOUMsTUFBUSxVQUNqQmxxQyxHQUFHalQsTUFBTW85QyxXQUFhLFFBQ3RCbnFDLEdBQUdqVCxNQUFNaTlDLFdBQWEsVUFHMUI3a0QsS0FBSzhCLEtBQUssYUFBYWtXLE9BQU0vaEIsT0FBUzh0RCxXQUFXa0IsYUFBYWh2RCxVQUdoRSwwQkFBMkJBLE9BQ3pCQSxNQUFNeU0saUJBQ056TSxNQUFNa3lDLGtCQUNOLE1BQ01qd0IsR0FETWppQixNQUFNa2lCLGNBQ0gxRyxRQUFRLGNBQ2pCc2dDLFFBQVV4L0MsS0FBS3VnQixPQUFPeXhDLFdBQVc5eEQsSUFBSXlsQixHQUFHbmpCLFFBQVFtd0QsYUFDbERuVCxFQUFFNTVDLE1BQU13TyxVQUNOb3JDLEVBQUUvbUIsUUFBUSxPQUFRLGdCQUNkK21CLEVBQUVwcUIsUUFBUSxPQUFRLFVBQVUsU0FFNUJvcUIsRUFBRXBxQixRQUFRLE9BQVEsVUFBVSxJQUl0QyxNQUFNdzlCLGNBQWdCcFQsRUFBRTU1QyxNQUFNaXRELGlCQUFpQnJULEVBQUUvbUIsUUFBUSxPQUFRLFdBQzdEK21CLEVBQUUvbUIsUUFBUSxPQUFRLFVBQ2hCK21CLEVBQUUwUyxXQUFhVSxTQUFTNXlELEtBQUt1Z0IsT0FBT3V5QyxjQUFjdFQsRUFBRXo2QyxHQUFJNnRELFNBQ3ZENXlELEtBQUt1Z0IsT0FBT3V5QyxjQUFjdFQsRUFBRXo2QyxHQUFJNnRELFVBYXBDbHlELGVBQWVteUQsZUFDcEJFLEtBQ0EsUUFBWSxLQUFJLFlBQWUsRUFBSSxlQUFtQixJQUFPLElBRzdEQSxJQUFxQixpQkFBUkEsSUFBbUIsQ0FBQ0EsS0FBT0EsSUFDeEMsTUFBTUMsVUFBWXpwRCxLQUFLd29ELFVBQVVodEQsR0FHM0JneEIsUUFBVSxHQUNoQixJQUFLLE1BQU8sQ0FBRWh4QixNQUFPZ3VELElBQUl4dkQsVUFBVyxDQUVsQyxNQUFNd3VELFVBQVl4b0QsS0FBS3lvRCxXQUFXOXhELElBQUk2RSxJQUN0QyxJQUFLZ3RELFdBQVczOUMsUUFBUyxPQUFPLEtBR2hDLE1BQU0vVCxXQUFhMHhELFVBQVVuc0QsTUFBTWl0RCxpQkFDL0JkLFVBQVV0NUIsUUFBUSxPQUFRLFdBRTlCMUMsUUFBUXowQixLQUFLLENBQUU2Z0MsSUFBS3A5QixHQUFJbXRELFdBQVk3eEQsT0FFdEMsT0FBSzAxQixRQUFRcjBCLGNBR1A2SCxLQUFLdzVDLHdCQUF3QixZQUFhaHRCLFNBRzVDazlCLGtCQUNJMXBELEtBQUttSyxPQUFPLENBQUV3L0MsS0FBTTNwRCxLQUFLcTdCLE1BQU1nRyxXQUFVdnBDLEdBQUtBLEVBQUUwRCxLQUFPaXVELGNBR3hEenBELE1BVnFCQSxLQ25KdkIsTUFBTTRwRCxRQUNYLDhCQUNFNXBELEtBQUs2cEQsb0JBQXNCbmpELE9BQ3pCalEsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLHdCQUU1QixNQUFNbXpELFdBQWFDLGVBQ2pCdHpELEtBQUs0UCxPQUFPdE4sS0FBS2l4RCxRQUNqQmhxRCxLQUFLNnBELHFCQUVQN3BELEtBQUtpcUQsZUFDSHh6RCxLQUFLSSxTQUFTRixJQUFJLE9BQVEsK0JBQWlDLEdBQzdEcUosS0FBS2txRCxlQUFpQixHQUN0QixJQUFLLE1BQU12aUQsUUFBUWxSLEtBQUttUixPQUVuQixDQUFDLE9BQVEsU0FBUzVQLFNBQVMyUCxLQUFLRSxTQUFTc2lELFVBQzFDLENBQUMsUUFBUyxRQUFRbnlELFNBQVMyUCxLQUFLRSxTQUFTQyxVQUd0Qy9OLE9BQU8yb0QsVUFBVUMsZUFBZTU1QyxLQUMvQi9JLEtBQUtrcUQsZUFDTHZpRCxLQUFLRSxTQUFTc2lELFVBS2Jwd0QsT0FBTzJvRCxVQUFVQyxlQUFlNTVDLEtBQy9CL0ksS0FBS2lxRCxlQUNMdGlELEtBQUtFLFNBQVNzaUQsVUFFaEJ6akQsT0FBTzFHLEtBQUtpcUQsZUFBZXRpRCxLQUFLRSxTQUFTc2lELFlBQ3ZDempELE9BQU9qUSxLQUFLQyxRQUFRQyxJQUFJZ1IsS0FBS0UsU0FBU3NpRCxTQUFTcHhELEtBQUtpeEQsV0FHdERocUQsS0FBS2txRCxlQUFldmlELEtBQUtFLFNBQVNzaUQsU0FBVzF6RCxLQUFLQyxRQUFRQyxJQUN4RGdSLEtBQUtFLFNBQVNzaUQsU0FDZHB4RCxLQUFLaXhELFdBS1hGLFlBQWMvdkQsT0FBT2lELEtBQUtnRCxLQUFLa3FELGdCQUFnQi94RCxPQUFTLEtBQ3REMUIsS0FBS29DLEtBQUt5UixLQUNaLElBQUkwUixPQUFPLENBQ1Q5aUIsTUFBT3pDLEtBQUtnSixLQUFLQyxTQUFTLHNCQUMxQmpFLFFBQVNoRixLQUFLZ0osS0FBS1ksT0FDMkIsSUFBNUN0RyxPQUFPaUQsS0FBS2dELEtBQUtrcUQsZ0JBQWdCL3hELE9BQzdCLHVCQUNBLGtDQUNKLENBQ0U2eEQsUUFBU3Z6RCxLQUFLNFAsT0FBT3ROLEtBQUtpeEQsUUFDMUJ0ekQsUUFDRSxXQUNBcUQsT0FBT2lELEtBQUtnRCxLQUFLa3FELGdCQUNkenJELEtBQUkyckQsS0FBTzN6RCxLQUFLQyxRQUFRQyxJQUFJeXpELEtBQUtyeEQsS0FBSzJELE9BQ3RDNEgsS0FBSyxhQUNSLGVBR051WSxRQUFTLENBQ1AxUyxPQUFRLENBQ04vRCxNQUFPM1AsS0FBS2dKLEtBQUtDLFNBQVMsNkJBQzFCOGYsU0FBVXJvQixTQUFZeXlELFFBQVF6L0MsVUFFaENrZ0QsS0FBTSxDQUNKamtELE1BQU8zUCxLQUFLZ0osS0FBS0MsU0FBUywrQkFHN0JrTCxRQUFPLEdBRVYsSUFBSW9SLE9BQU8sQ0FDVDlpQixNQUFPekMsS0FBS2dKLEtBQUtDLFNBQVMsc0JBQzFCakUsUUFBU2hGLEtBQUtnSixLQUFLWSxPQUFPLDBCQUEyQixDQUNuRDJwRCxRQUFTdnpELEtBQUs0UCxPQUFPdE4sS0FBS2l4RCxVQUU1Qm50QyxRQUFTLENBQ1B5dEMsR0FBSSxDQUNGbGtELE1BQU8zUCxLQUFLZ0osS0FBS0MsU0FBUywrQkFHN0JrTCxRQUFPLElBS2hCLHNCQUVFLElBQUssTUFBTXZPLFNBQVM1RixLQUFLeUYsT0FBT2tNLFNBQzlCLElBQ0UsTUFBTTgxQixXQUFhbCtCLEtBQUt1cUQsaUJBQWlCbHVELE1BQU1zd0IsWUFDMUNxa0IsUUFBUUMsTUFBTXVaLGNBQWN0c0IsY0FDL0I3QixRQUFRb3VCLElBQUksMEJBQTBCcHVELE1BQU1LLGNBQ3RDTCxNQUFNOE4sT0FBTyt6QixXQUFZLENBQUV3c0IsY0FBYyxLQUVqRCxNQUFPbnhELEtBQ1BBLElBQUlvQixRQUFVLDBDQUEwQzBCLE1BQU1LLFNBQVNuRCxJQUFJb0IsVUFDM0UwaEMsUUFBUXh2QixNQUFNdFQsS0FLbEIsSUFBSyxNQUFNc0osUUFBUXBNLEtBQUttSyxNQUFNd0gsU0FDNUIsSUFDRSxNQUFNODFCLFdBQWEwckIsUUFBUWUsZ0JBQWdCOW5ELEtBQUs4cEIsWUFDM0Nxa0IsUUFBUUMsTUFBTXVaLGNBQWN0c0IsY0FDL0I3QixRQUFRb3VCLElBQUkseUJBQXlCNW5ELEtBQUtuRyxjQUNwQ21HLEtBQUtzSCxPQUFPK3pCLFdBQVksQ0FBRXdzQixjQUFjLEtBRWhELE1BQU9ueEQsS0FDUEEsSUFBSW9CLFFBQVUseUNBQXlDa0ksS0FBS25HLFNBQVNuRCxJQUFJb0IsVUFDekUwaEMsUUFBUXh2QixNQUFNdFQsS0FLbEIsSUFBSyxNQUFNcXhELFNBQVNuMEQsS0FBS21rQyxPQUFPeHlCLFNBQzlCLElBQ0UsTUFBTTgxQixXQUFhMHJCLFFBQVFpQixpQkFBaUJELE1BQU1qK0IsWUFDN0Nxa0IsUUFBUUMsTUFBTXVaLGNBQWN0c0IsY0FDL0I3QixRQUFRb3VCLElBQUksMEJBQTBCRyxNQUFNbHVELGNBQ3RDa3VELE1BQU16Z0QsT0FBTyt6QixXQUFZLENBQUV3c0IsY0FBYyxLQUVqRCxNQUFPbnhELEtBQ1BBLElBQUlvQixRQUFVLDBDQUEwQ2l3RCxNQUFNbHVELFNBQVNuRCxJQUFJb0IsVUFDM0UwaEMsUUFBUXh2QixNQUFNdFQsS0FLbEIsSUFBSyxNQUFNMk8sU0FBU3pSLEtBQUswUixPQUFPQyxTQUM5QixJQUNFLE1BQU04MUIsV0FBYTByQixRQUFRa0IsaUJBQWlCNWlELE1BQU15a0IsWUFDN0Nxa0IsUUFBUUMsTUFBTXVaLGNBQWN0c0IsY0FDL0I3QixRQUFRb3VCLElBQUksMEJBQTBCdmlELE1BQU14TCxjQUN0Q3dMLE1BQU1pQyxPQUFPK3pCLFdBQVksQ0FBRXdzQixjQUFjLEtBRWpELE1BQU9ueEQsS0FDUEEsSUFBSW9CLFFBQVUsMENBQTBDdU4sTUFBTXhMLFNBQVNuRCxJQUFJb0IsVUFDM0UwaEMsUUFBUXh2QixNQUFNdFQsS0FLbEIsSUFBSyxNQUFNb08sUUFBUWxSLEtBQUttUixNQUVNLFNBQTFCRCxLQUFLRSxTQUFTc2lELFNBQ2QsQ0FBQyxRQUFTLE9BQVEsUUFBUyxhQUFhbnlELFNBQVMyUCxLQUFLRSxTQUFTQyxlQUV6RDhoRCxRQUFRbUIsc0JBQXNCcGpELE1BSXhDLE1BQU05USxTQUFXdzBCLFlBQVlyckIsS0FBS2lxRCxnQkFBa0IsR0FBSWpxRCxLQUFLa3FELGdCQUM3RHp6RCxLQUFLSSxTQUFTNFIsSUFBSSxPQUFRLDZCQUE4QjVSLFVBQ3hESixLQUFLSSxTQUFTNFIsSUFBSSxPQUFRLHNCQUF1QmhTLEtBQUs0UCxPQUFPdE4sS0FBS2l4RCxTQUdwRSx3QkFBeUIzdEQsT0FDdkIsTUFBTTZoQyxXQUFhLEdBU25CLEdBTkEwckIsUUFBUW9CLDZCQUE2QjN1RCxNQUFPNmhDLFlBQzVDMHJCLFFBQVFxQixxQkFBcUI1dUQsTUFBTzZoQyxZQUNwQzByQixRQUFRc0IseUJBQXlCN3VELE1BQU82aEMsWUFDeEMwckIsUUFBUXVCLHlCQUF5Qjl1RCxNQUFPNmhDLFlBR3BDN2hDLE1BQU11RSxNQUFPLENBQ2YsTUFBTUEsTUFBUXZFLE1BQU11RSxNQUFNa3ZDLFFBQU8sQ0FBQ3NiLElBQUtuK0MsS0FDckMsTUFBTW8rQyxTQUNKcCtDLGFBQWF0VixPQUFPczJDLEtBQUtxZCxjQUFnQnIrQyxFQUFFMGYsV0FBYTFmLEVBQ3BEcytDLFdBQWEzQixRQUFRZSxnQkFBZ0JVLFVBSzNDLE9BSktyYSxRQUFRQyxNQUFNdVosY0FBY2UsY0FDL0JBLFdBQVczeUIsSUFBTXl5QixTQUFTenlCLElBQzFCd3lCLElBQUlyekQsS0FBSzgwQixhQUFhMCtCLGNBRWpCSCxNQUNOLElBQ0N4cUQsTUFBTXpJLE9BQVMsSUFDakIrbEMsV0FBV3Q5QixNQUFRQSxPQUl2QixPQUFPczlCLFdBR1QsbUNBQW9DdjJCLE1BQ2xDLE1BQU1HLE9BQVNILEtBQUtFLFNBQVNDLE9BQzdCLElBQUssQ0FBQyxRQUFTLE9BQVEsUUFBUyxhQUFhOVAsU0FBUzhQLFFBQVMsT0FHL0QsTUFBTTBqRCxVQUFZN2pELEtBQUs2N0IsYUFDakI3N0IsS0FBSzhqRCxVQUFVLENBQUVqb0IsUUFBUSxVQUV6Qjc3QixLQUFLK2pELFVBQ1gsTUFBTUMsZ0JBQWtCaGtELEtBQUtpa0QsZUFHN0IsSUFBSyxNQUFNQyxPQUFPRixVQUFXLENBQzNCLElBQUl6dEIsV0FBYSxHQUNqQixJQUNFLE9BQVFwMkIsUUFDTixJQUFLLFFBQ0hvMkIsV0FBYTByQixRQUFRVyxpQkFBaUJzQixJQUFJbC9CLFlBQzFDLE1BQ0YsSUFBSyxPQUNIdVIsV0FBYTByQixRQUFRZSxnQkFBZ0JrQixJQUFJbC9CLFlBQ3pDLE1BQ0YsSUFBSyxRQUNIdVIsV0FBYTByQixRQUFRa0IsaUJBQWlCZSxJQUFJbC9CLFlBQzFDLE1BQ0YsSUFBSyxZQUNIdVIsV0FBYTByQixRQUFRaUIsaUJBQWlCZ0IsSUFBSWwvQixZQUl6Q3FrQixRQUFRQyxNQUFNdVosY0FBY3RzQixjQUMvQjdCLFFBQVFvdUIsSUFDTixZQUFZM2lELGlCQUFpQitqRCxJQUFJbnZELHNCQUFzQmlMLEtBQUtxbkIsb0JBRXhENjhCLElBQUkxaEQsT0FBTyt6QixhQUVuQixNQUFPM2tDLEtBQ1BBLElBQUlvQixRQUFVLDJDQUEyQ2t4RCxJQUFJbnZELGdCQUFnQmlMLEtBQUtxbkIsZUFBZXoxQixJQUFJb0IsVUFDckcwaEMsUUFBUXh2QixNQUFNdFQsWUFLWm9PLEtBQUs4akQsVUFBVSxDQUFFam9CLE9BQVFnb0IsWUFHakMsdUJBQXdCM29ELE1BQ3RCLE1BQU1xN0IsV0FBYSxHQVVuQixPQVBBMHJCLFFBQVFrQyx1QkFBdUJqcEQsS0FBTXE3QixZQUNyQzByQixRQUFRbUMsb0JBQW9CbHBELEtBQU1xN0IsWUFDbEMwckIsUUFBUW9DLDBCQUEwQm5wRCxLQUFNcTdCLFlBQ3hDMHJCLFFBQVFxQyx3QkFBd0JwcEQsS0FBTXE3QixZQUN0QzByQixRQUFRc0MsMkJBQTJCcnBELEtBQU1xN0IsWUFDekMwckIsUUFBUXVDLDZCQUE2QnRwRCxLQUFNcTdCLFlBRXBDQSxXQUdULHdCQUF5QjBzQixPQUN2QixNQUFNMXNCLFdBQWEsR0FLbkIsT0FGQTByQixRQUFRd0MscUJBQXFCeEIsTUFBTzFzQixZQUU3QkEsV0FHVCx3QkFBeUIwc0IsT0FDdkIsTUFBTTFzQixXQUFhLEdBS25CLE9BRkEwckIsUUFBUXlDLHFCQUFxQnpCLE1BQU8xc0IsWUFFN0JBLFdBR1QsK0JBQWdDcjdCLEtBQU1xN0IsWUE2QnBDLE1BM0JFLENBQ0UsWUFDQSxRQUNBLE9BQ0EsYUFDQSxRQUNBLFFBQ0EsUUFDQSxTQUNBLFNBQ0EsVUFDQWxtQyxTQUFTNkssS0FBSzVILFFBRXFCLGlCQUExQjRILEtBQUs5SixLQUFLMmhDLFlBQ25Cd0QsV0FBVyxvQkFBc0IsQ0FDL0I3Z0MsTUFBT3dGLEtBQUs5SixLQUFLMmhDLFlBQ2pCNHhCLE9BQVEsU0FFZ0MsSUFBMUJ6cEQsS0FBSzlKLEtBQUsyaEMsWUFDMUJ3RCxXQUFXLG9CQUFzQixDQUMvQjdnQyxNQUFPLEdBQ1BpdkQsT0FBUSxTQUV1QyxJQUFqQ3pwRCxLQUFLOUosS0FBSzJoQyxZQUFZNHhCLFNBQ3RDcHVCLFdBQVcsMkJBQTZCLEtBR3JDQSxXQUdULDhCQUErQnI3QixLQUFNcTdCLFlBTW5DLE1BTGtCLFVBQWRyN0IsS0FBSzVILFdBQzBDLElBQXRDNEgsS0FBSzlKLEtBQUs4WSxhQUFhQyxhQUNoQ29zQixXQUFXLCtCQUFpQyxHQUd6Q0EsV0FHVCwyQkFBNEJyN0IsS0FBTXE3QixZQUNoQyxNQUFNcXVCLE1BQVEsSUFBSXJmLE9BQU8sdUNBQ3pCLElBQUkrRixNQUFRdnNDLE9BQU83RCxLQUFLeEUsS0FBSzhGLE1BQU1vb0QsT0FJbkMsR0FIYyxPQUFWdFosUUFDRi9VLFdBQVc3L0IsSUFBTSw2QkFBK0I0MEMsTUFBTSxJQUV0QyxVQUFkcHdDLEtBQUs1SCxLQUNQLElBQUssTUFBT3BCLEVBQUdDLEtBQU1DLE9BQU9DLFFBQVE2SSxLQUFLOUosS0FBSzZILE9BQzVDcXlDLE1BQVF2c0MsT0FBTzVNLEVBQUV1RSxLQUFLOEYsTUFBTW9vRCxPQUNkLE9BQVZ0WixhQUNzQyxJQUE3Qi9VLFdBQVcsZ0JBQ3BCQSxXQUFXLGNBQWdCcjdCLEtBQUs5SixLQUFLNkgsT0FFdkNzOUIsV0FBVyxjQUFjcmtDLEdBQUd3RSxJQUMxQiw2QkFBK0I0MEMsTUFBTSxTQUd0QyxHQUFrQixlQUFkcHdDLEtBQUs1SCxLQUF1QixDQUNyQyxJQUFLLE1BQU9wQixFQUFHQyxLQUFNQyxPQUFPQyxRQUFRNkksS0FBSzlKLEtBQUt1akIsUUFDNUMyMkIsTUFBUXZzQyxPQUFPNU0sRUFBRXVFLEtBQUs4RixNQUFNb29ELE9BQ2QsT0FBVnRaLGFBQ3VDLElBQTlCL1UsV0FBVyxpQkFDcEJBLFdBQVcsZUFBaUJyN0IsS0FBSzlKLEtBQUt1akIsUUFFeEM0aEIsV0FBVyxlQUFlcmtDLEdBQUd3RSxJQUMzQiw2QkFBK0I0MEMsTUFBTSxJQUczQyxJQUFLLE1BQU91WixFQUFHQyxLQUFNMXlELE9BQU9DLFFBQVE2SSxLQUFLOUosS0FBSzBtQyxRQUM1QyxJQUFLLE1BQU81bEMsRUFBR0MsS0FBTUMsT0FBT0MsUUFBUXl5RCxFQUFFbndDLFFBQ3BDMjJCLE1BQVF2c0MsT0FBTzVNLEVBQUV1RSxLQUFLOEYsTUFBTW9vRCxPQUNkLE9BQVZ0WixhQUN1QyxJQUE5Qi9VLFdBQVcsaUJBQ3BCQSxXQUFXLGVBQWlCcjdCLEtBQUs5SixLQUFLMG1DLFFBRXhDdkIsV0FBVyxlQUFlc3VCLEdBQUdsd0MsT0FBT3ppQixHQUFHd0UsSUFDckMsNkJBQStCNDBDLE1BQU0sU0FJeEMsR0FBa0IsU0FBZHB3QyxLQUFLNUgsS0FDZCxJQUFLLE1BQU9wQixFQUFHQyxLQUFNQyxPQUFPQyxRQUFRNkksS0FBSzlKLEtBQUsyekQsUUFDNUN6WixNQUFRdnNDLE9BQU81TSxFQUFFdUUsS0FBSzhGLE1BQU1vb0QsT0FDZCxPQUFWdFosYUFDdUMsSUFBOUIvVSxXQUFXLGlCQUNwQkEsV0FBVyxlQUFpQnI3QixLQUFLOUosS0FBSzJ6RCxRQUV4Q3h1QixXQUFXLGVBQWVya0MsR0FBR3dFLElBQzNCLDZCQUErQjQwQyxNQUFNLFNBR3RDLEdBQWtCLGNBQWRwd0MsS0FBSzVILEtBQ2QsSUFBSyxNQUFPcEIsRUFBR0MsS0FBTUMsT0FBT0MsUUFBUTZJLEtBQUs5SixLQUFLdWpCLFFBQzVDMjJCLE1BQVF2c0MsT0FBTzVNLEVBQUV1RSxLQUFLOEYsTUFBTW9vRCxPQUNkLE9BQVZ0WixhQUN1QyxJQUE5Qi9VLFdBQVcsaUJBQ3BCQSxXQUFXLGVBQWlCcjdCLEtBQUs5SixLQUFLdWpCLFFBRXhDNGhCLFdBQVcsZUFBZXJrQyxHQUFHd0UsSUFDM0IsNkJBQStCNDBDLE1BQU0sSUFJN0MsT0FBTy9VLFdBR1Qsa0NBQW1DcjdCLEtBQU1xN0IsWUFDckIsVUFBZHI3QixLQUFLNUgsV0FBOEMsSUFBbkI0SCxLQUFLOUosS0FBSzR6RCxPQUM1Q3p1QixXQUFXLG9CQUFzQnI3QixLQUFLOUosS0FBSzZ6RCxhQUFlLEdBQzFEMXVCLFdBQVcsd0JBQTBCcjdCLEtBQUs5SixLQUFLNHpELEtBQUtoakQsSUFBTSxFQUMxRHUwQixXQUFXLDBCQUE0QnI3QixLQUFLOUosS0FBSzR6RCxLQUFLM2lELElBQU0sRUFDNURrMEIsV0FBVyxxQkFBdUJyN0IsS0FBSzlKLEtBQUs0ekQsS0FBS25qRCxLQUFPLEVBQ3hEMDBCLFdBQVcsb0JBQXNCcjdCLEtBQUs5SixLQUFLNHpELEtBQUtqMkMsS0FBTyxFQUN2RHduQixXQUFXLHFCQUF1QixHQUVsQ0EsV0FBVyxlQUFpQixLQUM1QkEsV0FBVyxtQ0FBcUMsS0FDaERBLFdBQVcsNEJBQThCLE1BVzdDLGlDQUFrQ3I3QixLQUFNcTdCLFlBMEN0QyxNQXpDa0IsU0FBZHI3QixLQUFLNUgsV0FFMkMsSUFBdkM0SCxLQUFLOUosS0FBSzJoQyxZQUFZbXlCLGVBRS9CM3VCLFdBQVcsZUFBaUJyN0IsS0FBSzlKLEtBQUsrekQsUUFBVSxHQUNoRDV1QixXQUFXLGFBQWVyN0IsS0FBSzlKLEtBQUtnMEQsTUFBUSxHQUM1Qzd1QixXQUFXLGlCQUFtQnI3QixLQUFLOUosS0FBS2kwRCxVQUFZLEdBRXBEOXVCLFdBQVcsbUJBQXFCcjdCLEtBQUs5SixLQUFLMFcsU0FBVyxFQUNyRHl1QixXQUFXLHFCQUF1QnRnQyxPQUFPaUYsS0FBSzlKLEtBQUtrMEQsZUFBaUIsRUFFcEUvdUIsV0FBVyxnQkFBa0JyN0IsS0FBSzlKLEtBQUsyaEMsWUFBWW15QixhQUNuRDN1QixXQUFXLG9CQUFzQnI3QixLQUFLOUosS0FBSzJoQyxZQUFZd3lCLE1BRXZEaHZCLFdBQVcsd0JBQTBCLFVBQ3JDQSxXQUFXLG9CQUFzQixFQUNqQ0EsV0FBVyx3QkFBeUIsRUFDcENBLFdBQVcsb0JBQXNCLEdBRWpDQSxXQUFXLG9DQUNUdGdDLE9BQU9pRixLQUFLOUosS0FBS28wRCxLQUFLdnFCLGNBQWN3cUIsTUFBUSxFQUM5Q2x2QixXQUFXLGtDQUNUdGdDLE9BQU9pRixLQUFLOUosS0FBS28wRCxLQUFLdnFCLGNBQWN5cUIsTUFBUSxFQUM5Q252QixXQUFXLHFCQUF1QnRnQyxPQUFPaUYsS0FBSzlKLEtBQUtvMEQsS0FBS3YwQyxTQUFXLEVBQ25Fc2xCLFdBQVcscUJBQXVCLEdBRWxDQSxXQUFXLGNBQWdCLENBQ3pCb3ZCLFVBQVcxdkQsT0FBT2lGLEtBQUs5SixLQUFLdzBELGlCQUFtQixFQUMvQ0MsU0FBVSxHQUdadHZCLFdBQVcsa0JBQW9CLEtBQy9CQSxXQUFXLHlCQUEyQixLQUN0Q0EsV0FBVyxlQUFpQixLQUM1QkEsV0FBVyxtQ0FBcUMsS0FDaERBLFdBQVcsNEJBQThCLEtBQ3pDQSxXQUFXLHNCQUF3QixLQUNuQ0EsV0FBVyxxQkFBdUIsS0FDbENBLFdBQVcsZ0JBQWtCLE1BRzFCQSxXQUdULG9DQUFxQ3I3QixLQUFNcTdCLFlBQ3ZCLFVBQWRyN0IsS0FBSzVILFdBQ3dCLElBQXBCNEgsS0FBSzlKLEtBQUttMEQsYUFDeUIsSUFBakNycUQsS0FBSzlKLEtBQUsyaEMsWUFBWTR4QixPQUMvQnB1QixXQUFXLDJCQUNUcjdCLEtBQUs5SixLQUFLMmhDLFlBQVk0eEIsT0FBU3pwRCxLQUFLOUosS0FBS20wRCxNQUUzQ2h2QixXQUFXLDJCQUE2QnI3QixLQUFLOUosS0FBS20wRCxNQUVwRGh2QixXQUFXLGdCQUFrQixNQUtuQyw0QkFBNkI3aEMsTUFBTzZoQyxZQUNsQyxNQUFNcXVCLE1BQVEsSUFBSXJmLE9BQU8sdUNBQ3pCLElBQUkrRixNQUFRdnNDLE9BQU9ySyxNQUFNZ0MsS0FBSzhGLE1BQU1vb0QsT0FDdEIsT0FBVnRaLFFBQ0YvVSxXQUFXNy9CLElBQU0sNkJBQStCNDBDLE1BQU0sSUFFeERBLE1BQVF2c0MsT0FBT3JLLE1BQU1HLE1BQU02QixLQUFLOEYsTUFBTW9vRCxPQUN4QixPQUFWdFosUUFDRi9VLFdBQVcsYUFBZSw2QkFBK0IrVSxNQUFNLElBRWpFLElBQUssTUFBT3A1QyxFQUFHQyxLQUFNQyxPQUFPQyxRQUFRcUMsTUFBTXM5QixTQUN4Q3NaLE1BQVF2c0MsT0FBTzVNLEVBQUV1MEIsTUFBTWxxQixNQUFNb29ELE9BQ2YsT0FBVnRaLGFBQ2dDLElBQXZCL1UsV0FBV3ZFLFVBQ3BCdUUsV0FBV3ZFLFFBQVV0OUIsTUFBTXM5QixTQUU3QnVFLFdBQVd2RSxRQUFROS9CLEdBQUd3MEIsS0FBTyw2QkFBK0I0a0IsTUFBTSxJQUd0RSxPQUFPL1UsV0FHVCxnQ0FBaUM3aEMsTUFBTzZoQyxZQVF0QyxNQVBJLENBQUMsWUFBYSxNQUFPLFlBQVlsbUMsU0FBU3FFLE1BQU1wQixZQUNaLElBQTNCb0IsTUFBTXRELEtBQUsyaEMsY0FDcEJ3RCxXQUFXLG9CQUFzQixDQUMvQm91QixPQUFRLEtBSVBwdUIsV0FHVCxnQ0FBaUM3aEMsTUFBTzZoQyxZQVl0QyxNQVhJLENBQUMsT0FBT2xtQyxTQUFTcUUsTUFBTXBCLGFBQ1MsSUFBdkJvQixNQUFNdEQsS0FBSytkLFVBQ3BCb25CLFdBQVcsZ0JBQWtCLENBQzNCc0UsWUFBYSxLQUNiRyxhQUFjLFlBR3dCLElBQS9CdG1DLE1BQU10RCxLQUFLMDBELGtCQUNwQnZ2QixXQUFXLHdCQUEwQixJQUdsQ0EsV0FHVCxvQ0FBcUM3aEMsTUFBTzZoQyxZQUMxQyxHQUFtQixjQUFmN2hDLE1BQU1wQixLQUFzQixDQUM5QixNQUFNNE8sZUFBaUI1UyxLQUFLeTJELEtBQUtyeEQsTUFBTXRELEtBQUt3USxRQUFRQyxJQUFJbk0sTUFBUSxRQUVsQixJQUFyQ2hCLE1BQU10RCxLQUFLd1EsUUFBUUMsSUFBSUMsV0FDTyxPQUFyQ3BOLE1BQU10RCxLQUFLd1EsUUFBUUMsSUFBSUMsWUFFdkJ5MEIsV0FBVyw4QkFBZ0MsUUFHTSxJQUExQzdoQyxNQUFNdEQsS0FBS3dRLFFBQVFDLElBQUlLLGdCQUNZLE9BQTFDeE4sTUFBTXRELEtBQUt3USxRQUFRQyxJQUFJSyxpQkFFdkJxMEIsV0FBVyxtQ0FBcUMsTUFBUXIwQixxQkFHWixJQUFyQ3hOLE1BQU10RCxLQUFLd1EsUUFBUUMsSUFBSUMsV0FDTyxPQUFyQ3BOLE1BQU10RCxLQUFLd1EsUUFBUUMsSUFBSUMsWUFFdkJ5MEIsV0FBVyw4QkFBZ0MsUUFHRyxJQUF2QzdoQyxNQUFNdEQsS0FBS3NoRCx5QkFDcUIsT0FBdkNoK0MsTUFBTXRELEtBQUtzaEQsOEJBQ3lDLElBQTdDaCtDLE1BQU10RCxLQUFLc2hELHdCQUF3Qmg5QyxPQUNHLE9BQTdDaEIsTUFBTXRELEtBQUtzaEQsd0JBQXdCaDlDLFFBRW5DNmdDLFdBQVcsc0NBQXdDLFFBR0wsSUFBdkM3aEMsTUFBTXRELEtBQUtzaEQseUJBQ3FCLE9BQXZDaCtDLE1BQU10RCxLQUFLc2hELDhCQUN1QyxJQUEzQ2grQyxNQUFNdEQsS0FBS3NoRCx3QkFBd0JwaUQsS0FDQyxPQUEzQ29FLE1BQU10RCxLQUFLc2hELHdCQUF3QnBpRCxNQUVuQ2ltQyxXQUFXLG9DQUFzQ3IwQixxQkFHVixJQUFoQ3hOLE1BQU10RCxLQUFLd1EsUUFBUVMsR0FBRzNNLE9BQ0csT0FBaENoQixNQUFNdEQsS0FBS3dRLFFBQVFTLEdBQUczTSxRQUV0QjZnQyxXQUFXLHlCQUEyQnIwQixxQkFHRCxJQUE5QnhOLE1BQU10RCxLQUFLd1EsUUFBUVMsR0FBRy9SLEtBQ0MsT0FBOUJvRSxNQUFNdEQsS0FBS3dRLFFBQVFTLEdBQUcvUixNQUV0QmltQyxXQUFXLHVCQUF5QnIwQixxQkFHUixJQUFyQnhOLE1BQU10RCxLQUFLbTBELE9BQ0csT0FBckI3d0QsTUFBTXRELEtBQUttMEQsUUFFWGh2QixXQUFXLGNBQWdCLElBRy9CLE9BQU9BLFdBR1QsNEJBQTZCMHNCLE1BQU8xc0IsWUFDbEMsTUFBTXF1QixNQUFRLElBQUlyZixPQUFPLHVDQUNuQitGLE1BQVF2c0MsT0FBT2trRCxNQUFNdnNELEtBQUs4RixNQUFNb29ELE9BSXRDLE9BSGMsT0FBVnRaLFFBQ0YvVSxXQUFXNy9CLElBQU0sNkJBQStCNDBDLE1BQU0sSUFFakQvVSxXQUdULDRCQUE2QjBzQixNQUFPMXNCLFlBQ2xDLE1BQU1xdUIsTUFBUSxJQUFJcmYsT0FBTyx1Q0FDekIsSUFBSStGLE1BQVF2c0MsT0FBT2trRCxNQUFNdnNELEtBQUs4RixNQUFNb29ELE9BQ3RCLE9BQVZ0WixRQUNGL1UsV0FBVzcvQixJQUFNLDZCQUErQjQwQyxNQUFNLElBRXhELElBQUssTUFBT3A1QyxFQUFHQyxLQUFNQyxPQUFPQyxRQUFRNHdELE1BQU1yekQsU0FDeEMwN0MsTUFBUXZzQyxPQUFPNU0sRUFBRXVFLEtBQUs4RixNQUFNb29ELE9BQ2QsT0FBVnRaLGFBQ2dDLElBQXZCL1UsV0FBVzNtQyxVQUNwQjJtQyxXQUFXM21DLFFBQVVxekQsTUFBTXJ6RCxTQUU3QjJtQyxXQUFXM21DLFFBQVFzQyxHQUFHd0UsSUFBTSw2QkFBK0I0MEMsTUFBTSxJQUdyRSxPQUFPL1UsWUNoaEJYLE1BQU15dkIsZUFDSiwyREFDQTdwRCxjQUFjaXJDLFlBQ1osK0VBR0UveEMsS0FBTyxDQUNYNHdELEdBQUksQ0FDRmx6QixZQUFhLGVBQ2JtekIsT0FBUSxPQUNSQyxVQUFXLE9BQ1hDLG9CQUFxQixPQUNyQkMsWUFBYSxPQUNiQyxPQUFRLG9CQUNSQyxPQUFRLFdBQ1JDLGVBQWdCLHFDQUNoQkMsZ0JBQWlCLGFBQ2pCQyxjQUFlLDBDQUNmQyxpQkFBa0IsdUJBQ2xCQyxjQUFlLG9CQUNmQyxRQUNFLG9GQUdGQyxNQUNFLDZEQUNGQyxJQUFLLG1DQUNMQyxXQUFZLDRCQUNaQyxTQUFVLG9DQUNWQyxRQUNFLGltQkFFSkMsR0FBSSxDQUNGcDBCLFlBQWEsY0FDYm16QixPQUFRLFFBQ1JDLFVBQVcsbUJBQ1hDLG9CQUFxQixRQUNyQkMsWUFBYSxRQUNiQyxPQUFRLHFDQUNSQyxPQUFRLG9CQUNSQyxlQUFnQixtQ0FDaEJDLGdCQUFpQixhQUNqQkMsY0FBZSwrQ0FDZkMsaUJBQWtCLDBCQUNsQkMsY0FBZSxrQ0FDZkMsUUFDRSx5RUFHRkMsTUFBTyxzQ0FDUEMsSUFBSyx3QkFDTEMsV0FBWSx5Q0FDWkMsU0FDRSxtSUFHRkMsUUFDRSx1bkJBRUpFLEdBQUksQ0FDRnIwQixZQUFhLGVBQ2JtekIsT0FBUSxVQUNSQyxVQUFXLFVBQ1hDLG9CQUFxQixVQUNyQkMsWUFBYSxLQUNiQyxPQUFRLCtCQUNSQyxPQUFRLHVDQUNSQyxlQUFnQiwyQkFDaEJDLGdCQUFpQixjQUNqQkMsY0FBZSwrQ0FDZkMsaUJBQWtCLHVDQUNsQkMsY0FBZSwrQkFDZkMsUUFDRSx3RUFHRkMsTUFDRSxvRkFHRkMsSUFBSyw2QkFDTEMsV0FBWSwwQ0FDWkMsU0FBVSxvQ0FDVkMsUUFDRSwrbkJBRUosUUFBUyxDQUNQbjBCLFlBQWEsMEJBQ2JtekIsT0FBUSxPQUNSQyxVQUFXLE9BQ1hDLG9CQUFxQixPQUNyQkMsWUFBYSxPQUNiQyxPQUFRLHlCQUVSQyxPQUFRLFdBQ1JDLGVBQ0Usa0RBQ0ZDLGdCQUFpQixhQUNqQkMsY0FDRSxtREFDRkMsaUJBQWtCLDBCQUNsQkMsY0FBZSw0QkFDZkMsUUFDRSw0UUFHRkMsTUFDRSw4RUFHRkMsSUFBSyx1Q0FDTEMsV0FBWSwrQkFDWkMsU0FBVSwrQ0FDVkMsUUFDRSxtWkFJQUcsYUFBZSxDQUNuQnBCLEdBQUksQ0FDRnJxQixJQUFLLCtDQUNMeEgsV0FDRSwwREFDRjNsQixJQUFLLG1EQUNMQyxJQUFLLG1EQUNMQyxJQUFLLG1EQUNMRyxJQUFLLG1EQUNMQyxJQUFLLG1EQUNMSCxJQUFLLG1EQUNMQyxJQUFLLG1EQUNMRyxJQUFLLG1EQUNMbk4sSUFDRSw4REFDRkcsR0FDRSxnRUFDRkssR0FDRSxrRUFHRnlrQixHQUNFLGdCQUNBenhCLEtBQUs0d0QsR0FBR0ssT0FDUixnREFDQWp4RCxLQUFLNHdELEdBQUdDLE9BQ1IsYUFDRnBqQyxNQUFPLDBEQUNQSixNQUNFLHVDQUdBcnRCLEtBQUs0d0QsR0FBR0UsVUFDUixrQkFDRmpqQyxJQUFLLGtEQUNMOFYsSUFBSyxvREFDTDhzQixnQkFDRSwyRUFHQXp3RCxLQUFLNHdELEdBQUdHLG9CQUNSLHVCQUNGdCtDLFFBQ0UsNERBR0F6UyxLQUFLNHdELEdBQUdJLFlBQ1IseUNBQ0ZqbkQsT0FDRSx3QkFDQTRtRCxlQURBLDJKQUtBM3dELEtBQUs0d0QsR0FBR0ssT0FDUixJQUNBanhELEtBQUs0d0QsR0FBR00sT0FDUiw0Q0FDRmUsWUFDRSx1RkFJRnJzRCxNQUNFLHFCQUNBK3FELGVBREEsbUhBS0Z1QixpQkFBa0IsNkNBQ2xCeHlELEtBQU0sbUJBQXFCaXhELGVBQWlCLGVBQzVDd0IsU0FDRSxJQUNBbnlELEtBQUs0d0QsR0FBR08sZUFDUixJQUNBbnhELEtBQUs0d0QsR0FBR1MsY0FDUixJQUNBcnhELEtBQUs0d0QsR0FBR1UsaUJBQ1IsSUFDQXR4RCxLQUFLNHdELEdBQUdXLGNBQ1IsS0FFSk8sR0FBSSxDQUNGdnJCLElBQUssc0NBQ0x4SCxXQUNFLDBEQUNGM2xCLElBQUssbURBQ0xDLElBQUssbURBQ0xDLElBQUssbURBQ0xHLElBQUssbURBQ0xDLElBQUssbURBQ0xILElBQUssbURBQ0xDLElBQUssbURBQ0xHLElBQUssbURBQ0xuTixJQUNFLHFFQUdGRyxHQUNFLG1FQUdGSyxHQUNFLHFFQUdGeWtCLEdBQ0UsZ0JBQ0F6eEIsS0FBSzh4RCxHQUFHYixPQUNSLGdEQUNBanhELEtBQUs4eEQsR0FBR2pCLE9BQ1IsYUFDRnBqQyxNQUNFLDREQUNGSixNQUNFLG1EQUdBcnRCLEtBQUs4eEQsR0FBR2hCLFVBQ1Isa0JBQ0ZqakMsSUFDRSwyRUFHRjhWLElBQUssc0RBQ0w4c0IsZ0JBQ0Usa0VBR0F6d0QsS0FBSzh4RCxHQUFHZixvQkFDUix1QkFDRnQrQyxRQUNFLDJFQUdBelMsS0FBSzh4RCxHQUFHZCxZQUNSLHlDQUNGam5ELE9BQ0Usd0JBQ0E0bUQsZUFEQSx1S0FLQTN3RCxLQUFLOHhELEdBQUdiLE9BQ1IsSUFDQWp4RCxLQUFLOHhELEdBQUdaLE9BQ1IsNENBQ0ZlLFlBQ0UsMkZBR0Zyc0QsTUFDRSxxQkFDQStxRCxlQURBLG1IQUtGdUIsaUJBQ0UsNERBQ0Z4eUQsS0FBTSxtQkFBcUJpeEQsZUFBaUIsZUFDNUN3QixTQUNFLElBQ0FueUQsS0FBSzh4RCxHQUFHWCxlQUNSLElBQ0FueEQsS0FBSzh4RCxHQUFHVCxjQUNSLElBQ0FyeEQsS0FBSzh4RCxHQUFHUixpQkFDUixJQUNBdHhELEtBQUs4eEQsR0FBR1AsY0FDUixLQUVKUSxHQUFJLENBQ0Z4ckIsSUFBSywwQ0FDTHhILFdBQ0UseURBQ0YzbEIsSUFBSyxtREFDTEMsSUFBSyxtREFDTEMsSUFBSyxtREFDTEcsSUFBSyxtREFDTEMsSUFBSyxtREFDTEgsSUFBSyxtREFDTEMsSUFBSyxtREFDTEcsSUFBSyxtREFDTG5OLElBQ0UsK0RBQ0ZHLEdBQ0UsK0VBR0ZLLEdBQ0Usb0ZBR0Z5a0IsR0FDRSxnQkFDQXp4QixLQUFLK3hELEdBQUdkLE9BQ1IsZ0RBQ0FqeEQsS0FBSyt4RCxHQUFHbEIsT0FDUixhQUNGcGpDLE1BQ0UsZ0VBQ0ZKLE1BQ0UsMENBR0FydEIsS0FBSyt4RCxHQUFHakIsVUFDUixrQkFDRmpqQyxJQUFLLHdEQUNMOFYsSUFBSyxzREFDTDhzQixnQkFDRSxpRUFHQXp3RCxLQUFLK3hELEdBQUdoQixvQkFDUix1QkFDRnQrQyxRQUNFLHlFQUdBelMsS0FBSyt4RCxHQUFHZixZQUNSLHlDQUNGam5ELE9BQ0Usd0JBQ0E0bUQsZUFEQSx5SkFLQTN3RCxLQUFLK3hELEdBQUdkLE9BQ1IsSUFDQWp4RCxLQUFLK3hELEdBQUdiLE9BQ1IsNENBQ0ZlLFlBQ0UsMEZBR0Zyc0QsTUFDRSxxQkFDQStxRCxlQURBLG1IQUtGdUIsaUJBQ0UsbURBQ0Z4eUQsS0FBTSxtQkFBcUJpeEQsZUFBaUIsZUFDNUN3QixTQUNFLElBQ0FueUQsS0FBSyt4RCxHQUFHWixlQUNSLElBQ0FueEQsS0FBSyt4RCxHQUFHVixjQUNSLElBQ0FyeEQsS0FBSyt4RCxHQUFHVCxpQkFDUixJQUNBdHhELEtBQUsreEQsR0FBR1IsY0FDUixLQUVKLFFBQVMsQ0FDUGhyQixJQUFLLGtEQUVMeEgsV0FDRSwwREFDRjNsQixJQUFLLHNEQUNMQyxJQUFLLHNEQUNMQyxJQUFLLHNEQUNMRyxJQUFLLHNEQUNMQyxJQUFLLHNEQUNMSCxJQUFLLHNEQUNMQyxJQUFLLHNEQUNMRyxJQUFLLHNEQUNMbk4sSUFDRSxpRUFHRkcsR0FDRSxtRUFHRkssR0FDRSxrRUFHRnlrQixHQUNFLGdCQUNBenhCLEtBQUssU0FBU2l4RCxPQUNkLGdEQUNBanhELEtBQUssU0FBUzZ3RCxPQUNkLGFBQ0ZwakMsTUFDRSw2REFDRkosTUFDRSwwQ0FHQXJ0QixLQUFLLFNBQVM4d0QsVUFDZCxrQkFDRmpqQyxJQUFLLGtEQUNMOFYsSUFBSyx1REFDTDhzQixnQkFDRSxxRkFHQXp3RCxLQUFLLFNBQVMrd0Qsb0JBQ2QsdUJBQ0Z0K0MsUUFDRSxvRkFHQXpTLEtBQUssU0FBU2d4RCxZQUNkLHlDQUNGam5ELE9BQ0Usd0JBQ0E0bUQsZUFEQSxrS0FLQTN3RCxLQUFLLFNBQVNpeEQsT0FDZCxJQUNBanhELEtBQUssU0FBU2t4RCxPQUNkLDRDQUNGZSxZQUNFLDhGQUdGcnNELE1BQ0UscUJBQ0ErcUQsZUFEQSxtSEFLRnVCLGlCQUFrQixxQ0FDbEJ4eUQsS0FBTSxtQkFBcUJpeEQsZUFBaUIsZUFDNUN3QixTQUNFLElBQ0FueUQsS0FBSyxTQUFTbXhELGVBQ2QsSUFDQW54RCxLQUFLLFNBQVNxeEQsY0FDZCxJQUNBcnhELEtBQUssU0FBU3N4RCxpQkFDZCxJQUNBdHhELEtBQUssU0FBU3V4RCxjQUNkLE1BSUMsTUFBTWEsd0JBQ1gscUJBQXNCQyxLQUFPLE1BTzNCLE9BTktBLE9BQ0hBLEtBQU81NEQsS0FBS2dKLEtBQUs0dkQsV0FFZSxJQUF2QkwsYUFBYUssUUFDdEJBLEtBQU8sTUFFRkEsS0FHVCxzQkFBdUJBLE1BQ3JCLElBQUlSLFFBQVU3eEQsS0FBSzR3RCxHQUFHaUIsUUFJdEIsWUFIMEIsSUFBZjd4RCxLQUFLcXlELFFBQ2RSLFFBQVU3eEQsS0FBS3F5RCxNQUFNUixTQUVoQkEsUUFHVCx5QkFDRSxNQUFNUyxPQUFTLEdBQ2YsSUFBSyxNQUFNeHpELE9BQU9rQixLQUNoQnN5RCxPQUFPeHpELEtBQU9rQixLQUFLbEIsS0FBSzQrQixZQUUxQixPQUFPNDBCLE9BR1QsZUFBZ0JELE1BQ2QsT0FBT3J5RCxLQUFLcXlELE9BQVNyeUQsS0FBSzR3RCxHQUc1Qiw2QkFBOEJ5QixNQUM1QixPQUFPTCxhQUFhSyxPQUFTTCxhQUFhcEIsSUM1aEJ2QyxNQUFNMkIsa0JBQ1g3cEQsY0FDRTFGLEtBQUt1Z0MsT0FBUyxHQUNkdmdDLEtBQUt3dkQsY0FBZ0IsR0FHdkIsc0JBQ0UsTUFBTyxJQUdULHNCQUNFLE1BQU8sSUFTVEMsU0FBVUMsTUFBT0MsVUFBWSxNQUMzQixNQUFnQyxXQUE1QkQsTUFBTWhxRCxhQUFhaEosS0FDZGd6RCxNQUVGLElBQUl4aUIsT0FBT3dpQixNQUFPQyxXQVEzQkMsWUFBYXR5RCxHQUNYLE9BQU9BLEVBQ0o3QyxRQUFRLFdBQVksS0FDcEJBLFFBQVEsT0FBUSxJQUNoQkEsUUFBUSxnQkFBaUIsSUFROUJvMUQsT0FBUXZ5RCxHQUNOLE9BQXdCLElBQXBCQSxFQUFFNHhDLE9BQU8vMkMsUUFTSSxLQU5qQm1GLEVBQUlBLEVBQ0Q0eEMsT0FDQWp6QyxNQUFNLE1BQ053QyxLQUFJOE0sTUFBUUEsS0FBSzJqQyxPQUFPejBDLFFBQVEsWUFBYSxNQUM3Q3ZDLFFBQU9xVCxNQUFRQSxPQUNmakgsS0FBSyxZQUNGbk0sT0FSRyxHQVdGLE1BQVFtRixFQUFJLE9BY3JCK0UsTUFDRXl0RCxVQUNBLGdCQUNtQixFQUFJLFVBQ1YsRUFBSSxLQUNSUCxrQkFBa0JRLFNBQVEsTUFDMUIsRUFBSyxlQUNJLEdBQ2QsSUFFSixJQUFJVCxRQUFTLEVBQ1RVLFFBQVMsRUFNYixRQUxvQyxJQUF6Qmh3RCxLQUFLdXNELE1BQU11RCxVQUNwQkUsT0FBU2h3RCxLQUFLeXZELFNBQVN6dkQsS0FBS3VzRCxNQUFNdUQsZ0JBQ00sSUFBeEI5dkQsS0FBS2hELEtBQUs4eUQsWUFDMUJFLE9BQVNod0QsS0FBS3l2RCxTQUFTenZELEtBQUtoRCxLQUFLOHlELGFBRXBCLElBQVhFLE9BQWtCLEVBQ1AsSUFBVHprRCxPQUNGQSxLQUFPdkwsS0FBS3VMLE1BRWQsTUFBTWxKLE1BQVEydEQsT0FBT3ZyQixLQUFLbDVCLE1BQzFCLElBQUlsTyxNQUFRLEtBQ1osR0FDWSxPQUFWZ0YsU0FDbUIsSUFBbEI0dEQsb0JBQ2dELEtBQXZDNXRELE1BQU1vOUIsUUFBVSxJQUFJd3dCLGdCQUM5QixDQUtBLEdBSkFYLE9BQVNqdEQsTUFBTW85QixRQUFVLEdBQ3JCeXdCLGlCQUNGbHdELEtBQUt1TCxLQUFPdkwsS0FBS3VMLEtBQUs5USxRQUFRNEgsTUFBTSxHQUFHNnNDLE9BQVEsTUFBTUEsUUFFbkRpaEIsU0FDRixJQUFLLE1BQU1yMEQsT0FBTy9CLE9BQU9pRCxLQUFLcUYsTUFBTW85QixRQUNsQyxPQUFReGtDLE1BQ04sS0FBS3MwRCxrQkFBa0JRLFNBQ3JCL3ZELEtBQUt1Z0MsT0FBT3prQyxLQUFPNEssT0FBT3JFLE1BQU1vOUIsT0FBTzNqQyxNQUFNckIsUUFBUSxLQUFNLEtBQzNELE1BQ0YsS0FBSzgwRCxrQkFBa0JhLFNBQ3JCL3lELE1BQVFPLE9BQU95RSxNQUFNbzlCLE9BQU8zakMsTUFDdkJrSSxNQUFNM0csU0FDVDJDLEtBQUt1Z0MsT0FBT3prQyxLQUFPOEIsT0FBT3lFLE1BQU1vOUIsT0FBTzNqQyxPQU1qRHd6RCxPQUFPLFdBQWFqdEQsTUFBTSxHQUMxQml0RCxPQUFPLFVBQVlqdEQsTUFBTWthLE9BRzdCLE9BQU8reUMsT0FRVGUsY0FBZTlrRCxNQUNiLEdBQTJCLElBQXZCQSxLQUFLMmpDLE9BQU8vMkMsT0FDZCxPQUtGLElBQUk0TyxPQUNBNlQsTUFDQTAxQyxRQUxBMzRELE9BQU84dEMsTUFBTThxQixjQUNmbDBCLFFBQVFvdUIsSUFBSSxjQUFlbC9DLE1BSzdCLElBQUlpbEQsYUFBYyxFQUNkQyxTQUFXLEdBQ2YsR0FHRSxHQUZBQSxXQUNBbGxELEtBQU9BLEtBQUsyakMsT0FFVHQwQixNQUFRNWEsS0FBS3FDLE1BQU0sY0FBZSxDQUFFOHRELFVBQVUsRUFBTzVrRCxPQUV0REEsS0FBT0EsS0FBSzlRLFFBQVFtZ0IsTUFBTSxXQUFZLFdBQ0osSUFBdkI1YSxLQUFLdWdDLE9BQU9qa0IsU0FDckJ0YyxLQUFLdWdDLE9BQU9qa0IsT0FBUyxJQUV2QnRjLEtBQUt1Z0MsT0FBT2prQixPQUFPdmtCLEtBQUssQ0FDdEIyRSxLQUFNc0QsS0FBSzR2RCxZQUFZaDFDLE1BQU1sZSxNQUM3QlcsTUFBT08sT0FBT2dkLE1BQU04MUMsWUFDcEIzNEQsTUFBTSxTQUVILEdBQ0pnUCxPQUFTL0csS0FBS3FDLE1BQU0sU0FBVSxDQUM3Qjh0RCxVQUFVLEVBQ1Y1a0QsS0FDQTBrRCxlQUErQixJQUFoQk8sYUFBd0IsZUFFekMsQ0FDQWpsRCxLQUFPQSxLQUFLOVEsUUFBUXNNLE9BQU8sV0FBWSxNQUN2QyxNQUFNckssS0FBT3NELEtBQUs0dkQsWUFBWTdvRCxPQUFPckssTUFBUSxJQUM3QyxJQUFJaUgsT0FBUzNELEtBQUs0dkQsWUFBWTdvRCxPQUFPcEQsUUFBVSxJQUMvQyxNQUFNZ3RELFlBQ0ozd0QsS0FBS3FDLE1BQU0sVUFBVyxDQUNwQmtKLEtBQU03TyxLQUNOd3pELGdCQUFnQixFQUNoQkMsVUFBVSxLQUVabndELEtBQUtxQyxNQUFNLFFBQVMsQ0FDbEJrSixLQUFNN08sS0FDTnd6RCxnQkFBZ0IsRUFDaEJDLFVBQVUsS0FFWm53RCxLQUFLcUMsTUFBTSxNQUFPLENBQ2hCa0osS0FBTTdPLEtBQ053ekQsZ0JBQWdCLEVBQ2hCQyxVQUFVLEtBRVpud0QsS0FBS3FDLE1BQU0sYUFBYyxDQUN2QmtKLEtBQU03TyxLQUNOd3pELGdCQUFnQixFQUNoQkMsVUFBVSxLQUVabndELEtBQUtxQyxNQUFNLFdBQVksQ0FDckJrSixLQUFNN08sS0FDTnd6RCxnQkFBZ0IsRUFDaEJDLFVBQVUsS0FXZCxJQUFJemYsTUFKRjhmLFlBSHNCLE9BQXRCenBELE9BQU8ycEQsaUJBQ3NCLElBQXRCM3BELE9BQU8ycEQsWUFFQTl5RCxPQUFPbUosT0FBTzJwRCxZQUs5QixJQUFJOTRDLE1BQU8sRUFDUEMsTUFBTyxFQUNYLEdBQ0U2NEIsTUFBUTF3QyxLQUFLeXZELFNBQ1gsaUJBQ0V6dkQsS0FBS2hELEtBQUtreEQsT0FDVixTQUNBbHVELEtBQUtoRCxLQUFLaXhELE9BQ1YsZUFDQWp1RCxLQUFLdWdDLE9BQU85UixHQUFHaDBCLFFBQVEsUUFBUyxJQUNoQyxNQUNGZ3FDLEtBQUs5Z0MsUUFDSCtzQyxPQUNGOTRCLE1BQU8sRUFDUGpVLE9BQVNBLE9BQU9sSixRQUFRaTJDLE1BQU0sR0FBSSxNQUVsQ0EsTUFBUTF3QyxLQUFLeXZELFNBQ1gsaUJBQ0V6dkQsS0FBS2hELEtBQUtpeEQsT0FDVixrQkFDQWp1RCxLQUFLdWdDLE9BQU85UixHQUFHaDBCLFFBQVEsUUFBUyxJQUNoQyxNQUNGZ3FDLEtBQUs5Z0MsUUFDSCtzQyxRQUNGNzRCLE1BQU8sRUFDUGxVLE9BQVNBLE9BQU9sSixRQUFRaTJDLE1BQU0sR0FBSSxZQUcvQkEsT0FDVCxNQUFNa2dCLFFBQVVqdEQsT0FBTzFILE1BQU0sS0FDdkI0MEQsVUFBK0IsSUFBbkJELFFBQVF6NEQsT0FDcEJZLEtBQU8sQ0FDWDJELEtBQ0F6QixLQUFNLFNBQ05sQyxLQUFNLENBQ0o2SixNQUFPLENBQ0xwSCxHQUFJZzFELGFBRU5uc0MsV0FBWSxHQUNacUMsTUFBTyxDQUNMQyxPQUFRLENBQ050cEIsTUFBT3d6RCxVQUFZLEdBQUssRUFDeEJsdEQsT0FBUWl0RCxRQUFRLElBRWxCaHFDLEtBQU0sQ0FDSnZwQixNQUFPd3pELFVBQVksR0FBSyxFQUN4Qmx0RCxPQUFRa3RELFVBQVlELFFBQVEsR0FBSyxJQUVuQ3J3RCxRQUFTLENBQ1BsRCxNQUFPd3pELFVBQVksR0FBSyxFQUN4Qmx0RCxPQUFRa3RELFVBQVlELFFBQVEsR0FBSyxPQU16QzczRCxLQUFLQSxLQUFLc3JCLFdBQVc5TSxRQUFVczVDLFVBQy9COTNELEtBQUtBLEtBQUtzckIsV0FBV2pOLEtBQU91NUMsVUFBWUUsVUFDeEM5M0QsS0FBS0EsS0FBS3NyQixXQUFXbE4sT0FBU3BlLEtBQUtBLEtBQUtzckIsV0FBV2pOLEtBQ25EcmUsS0FBS0EsS0FBS3NyQixXQUFXek0sS0FBT0EsS0FDNUI3ZSxLQUFLQSxLQUFLc3JCLFdBQVd4TSxLQUFPQSxVQUNPLElBQXhCN1gsS0FBS3VnQyxPQUFPdXdCLFVBQ3JCOXdELEtBQUt1Z0MsT0FBT3V3QixRQUFVLElBRXhCOXdELEtBQUt1Z0MsT0FBT3V3QixRQUFRLzRELEtBQUtnQixXQUNmdTNELFFBQVUva0QsS0FBS3BILE1BQU0sWUFDL0JvSCxLQUFPQSxLQUFLOVEsUUFBUTYxRCxRQUFRLEdBQUksT0FDdEJBLFFBQVUva0QsS0FBS3BILE1BQU0sZUFDL0JvSCxLQUFPLFVBRUZrbEQsU0FBVyxJQUFRMXBELFFBQVk2VCxPQUFXclAsT0FDbEMsSUFBYmtsRCxXQUNGbnhELEdBQUdDLGNBQWNDLEtBQ2YsaUdBRUY2OEIsUUFBUW9KLE1BQU0sc0JBQXVCbDZCLE9BU3pDd2xELGNBQWV4bEQsS0FBTXpQLElBQU0sVUFDekIsR0FBMkIsSUFBdkJ5UCxLQUFLMmpDLE9BQU8vMkMsT0FDZCxPQUVGLE1BQU02NEQsT0FBU3psRCxLQUFLdFAsTUFBTSxXQUkxQixJQUFJMkcsTUFIQW91RCxPQUFPNzRELE9BQVMsSUFDbEJvVCxLQUFPeWxELE9BQU8sSUFHaEIsSUFBSVAsU0FBVyxHQUNmLEdBQ0VBLFdBQ0FsbEQsS0FBT0EsS0FBSzJqQyxPQUNadHNDLE1BQVE1QyxLQUFLcUMsTUFBTSxRQUFTLENBQUU4dEQsVUFBVSxFQUFPNWtELE9BQzNDM0ksUUFDRjJJLEtBQU9BLEtBQUs5USxRQUFRbUksTUFBTSxXQUFZLFdBQ04sSUFBckI1QyxLQUFLdWdDLE9BQU96a0MsT0FDckJrRSxLQUFLdWdDLE9BQU96a0MsS0FBTyxJQUVyQmtFLEtBQUt1Z0MsT0FBT3prQyxLQUFLL0QsS0FBSyxDQUNwQjJFLEtBQU1zRCxLQUFLNHZELFlBQVlodEQsTUFBTWxHLE1BQzdCVyxNQUFPTyxPQUFPZ0YsTUFBTTh0RCxxQkFHakJELFNBQVcsR0FBSzd0RCxPQUNSLElBQWI2dEQsV0FDRm54RCxHQUFHQyxjQUFjQyxLQUNmLGdHQUVGNjhCLFFBQVFvSixNQUFNLHFCQUFzQmw2QixPQVN4QzBsRCxjQUFlMWxELE1BQ2IsR0FBMkIsSUFBdkJBLEtBQUsyakMsT0FBTy8yQyxPQUNkLE9BRUYsTUFBTTY0RCxPQUFTemxELEtBQUt0UCxNQUFNLFdBQ3RCKzBELE9BQU83NEQsT0FBUyxJQUNsQm9ULEtBQU95bEQsT0FBTyxJQUVoQixNQUFNRSxVQUFZM2xELEtBQUs5USxRQUFRLGFBQWMsS0FBS3dCLE1BQU0saUJBQ3hEK0QsS0FBS3VMLEtBQU92TCxLQUFLdUwsS0FBSzlRLFFBQVE4USxLQUFLMmpDLE9BQVEsTUFDM0MsSUFBSyxNQUFNaWlCLFNBQVNELGVBQ2dCLElBQXZCbHhELEtBQUt1Z0MsT0FBT21zQixTQUNyQjFzRCxLQUFLdWdDLE9BQU9tc0IsT0FBUyxJQUV2QjFzRCxLQUFLdWdDLE9BQU9tc0IsT0FBTzMwRCxLQUFLaUksS0FBSzR2RCxZQUFZdUIsUUFTN0MscUJBQXNCNWxELE1BRXBCdkwsS0FBS3VMLEtBQU83RSxPQUFPNkUsTUFDaEIyakMsT0FDQXowQyxRQUFRLHdCQUF5QixLQUNqQ0EsUUFBUSxVQUFXLEtBQ25CQSxRQUFRLGtDQUFtQyxJQUU5QyxJQTJESTIyRCxPQTNEQWg1RCxJQUFNNEgsS0FBS3VMLEtBQUtwVCxPQUVoQmtLLE1BQVFyQyxLQUFLcUMsTUFBTSxNQUFPLENBQUVwSCxLQUFNczBELGtCQUFrQmEsV0FDdEQsVUF5REYsR0F2REtwc0QsTUFBTTNCLFNBQ1RqSyxJQUFNbkIsS0FBS21CLElBQUlBLElBQUtpSyxRQUd0QkEsTUFBUXJDLEtBQUtxQyxNQUFNLE1BQU8sQ0FBRXBILEtBQU1zMEQsa0JBQWtCYSxXQUFZLFVBQzNEcHNELE1BQU0zQixTQUNUakssSUFBTW5CLEtBQUttQixJQUFJQSxJQUFLaUssUUFHdEJBLE1BQVFyQyxLQUFLcUMsTUFBTSxNQUFPLENBQUVwSCxLQUFNczBELGtCQUFrQmEsV0FBWSxVQUMzRHBzRCxNQUFNM0IsU0FDVGpLLElBQU1uQixLQUFLbUIsSUFBSUEsSUFBS2lLLFFBR3RCQSxNQUFRckMsS0FBS3FDLE1BQU0sTUFBTyxDQUFFcEgsS0FBTXMwRCxrQkFBa0JhLFdBQVksVUFDM0Rwc0QsTUFBTTNCLFNBQ1RqSyxJQUFNbkIsS0FBS21CLElBQUlBLElBQUtpSyxRQUd0QkEsTUFBUXJDLEtBQUtxQyxNQUFNLE1BQU8sQ0FBRXBILEtBQU1zMEQsa0JBQWtCYSxXQUFZLFVBQzNEcHNELE1BQU0zQixTQUNUakssSUFBTW5CLEtBQUttQixJQUFJQSxJQUFLaUssUUFHdEJBLE1BQVFyQyxLQUFLcUMsTUFBTSxNQUFPLENBQUVwSCxLQUFNczBELGtCQUFrQmEsV0FBWSxVQUMzRHBzRCxNQUFNM0IsU0FDVGpLLElBQU1uQixLQUFLbUIsSUFBSUEsSUFBS2lLLFFBR3RCQSxNQUFRckMsS0FBS3FDLE1BQU0sTUFBTyxDQUFFcEgsS0FBTXMwRCxrQkFBa0JhLFdBQVksVUFDM0Rwc0QsTUFBTTNCLFNBQ1RqSyxJQUFNbkIsS0FBS21CLElBQUlBLElBQUtpSyxRQUd0QkEsTUFBUXJDLEtBQUtxQyxNQUFNLE1BQU8sQ0FBRXBILEtBQU1zMEQsa0JBQWtCYSxXQUFZLFVBQzNEcHNELE1BQU0zQixTQUNUakssSUFBTW5CLEtBQUttQixJQUFJQSxJQUFLaUssUUFHdEJBLE1BQVFyQyxLQUFLcUMsTUFBTSxNQUFPLENBQUVwSCxLQUFNczBELGtCQUFrQmEsV0FBWSxVQUMzRHBzRCxNQUFNM0IsU0FDVGpLLElBQU1uQixLQUFLbUIsSUFBSUEsSUFBS2lLLFFBR3RCQSxNQUFRckMsS0FBS3FDLE1BQU0sS0FBTSxDQUFFcEgsS0FBTXMwRCxrQkFBa0JhLFdBQVksVUFDMURwc0QsTUFBTTNCLFNBQ1RqSyxJQUFNbkIsS0FBS21CLElBQUlBLElBQUtpSyxRQUd0QkEsTUFBUXJDLEtBQUtxQyxNQUFNLEtBQU0sQ0FBRXBILEtBQU1zMEQsa0JBQWtCYSxXQUFZLFVBQzFEcHNELE1BQU0zQixTQUNUakssSUFBTW5CLEtBQUttQixJQUFJQSxJQUFLaUssUUFJbEJqSyxJQUFNLEdBa0JSLEdBakJBZzVELE9BQVNweEQsS0FBS3VMLEtBQUs4bEQsT0FBTyxFQUFHajVELEtBRTdCaUssTUFBUXJDLEtBQUtxQyxNQUFNLE9BQVEsQ0FBRWtKLEtBQU02bEQsVUFDckIsSUFBVi91RCxNQUVGckMsS0FBS3VnQyxPQUFPN2pDLEtBQU9qRyxLQUFLZ0osS0FBS0MsU0FBUyxpQ0FHdEMweEQsT0FBU0EsT0FBTzMyRCxRQUFRNEgsTUFBTSxXQUFZLE1BRzVDQSxNQUFRckMsS0FBS3FDLE1BQU0sTUFBTyxDQUFFa0osS0FBTTZsRCxVQUNwQixJQUFWL3VELFFBRUYrdUQsT0FBU0EsT0FBTzMyRCxRQUFRNEgsTUFBTSxXQUFZLFFBR3ZDckMsS0FBS3FDLE1BQU0sYUFBYyxDQUFFa0osS0FBTTZsRCxVQUErQixLQUFsQkEsT0FBT2xpQixPQUFlLENBRXZFLElBQUluVCxXQUFhcTFCLE9BQ2JBLE9BQU8zekQsUUFBUSxNQUFRLElBRXpCcytCLFdBQWFxMUIsT0FBT0MsT0FBTyxFQUFHRCxPQUFPM3pELFFBQVEsS0FBTyxJQUV0RHVDLEtBQUt1Z0MsT0FBT3hFLFdBQWFBLFdBQ3RCdGhDLFFBQVEsYUFBYyxLQUN0QnkwQyxPQUNBejBDLFFBQVEsS0FBTSxJQUNqQnVGLEtBQUt1TCxLQUFPdkwsS0FBS3VMLEtBQUs5USxRQUFRc2hDLFdBQVdtVCxPQUFRLFlBSW5EbHZDLEtBQUt1Z0MsT0FBTzdqQyxLQUFPakcsS0FBS2dKLEtBQUtDLFNBQVMsaUNBR3hDLFFBQ29DLElBQTNCTSxLQUFLdWdDLE9BQU94RSxpQkFDUSxJQUFwQi83QixLQUFLdWdDLE9BQU9nRCxJQUNuQixDQUNBLE1BQU0rdEIsY0FBZ0J0eEQsS0FBS3VnQyxPQUFPeEUsV0FBVzUzQixNQUMzQyxtQ0FFRW10RCxnQkFDRnR4RCxLQUFLdWdDLE9BQU9nRCxJQUFNK3RCLGNBQWM3eEIsT0FBTzhELElBQ3ZDdmpDLEtBQUt1Z0MsT0FBT3hFLFdBQWF1MUIsY0FBYzd4QixPQUFPMUQsV0FBV21ULFFBSzFEbHZDLEtBQUtxQyxNQUFNLFFBQ1pyQyxLQUFLcUMsTUFBTSxTQUFVLENBQ25CNnRELGdCQUFnQixFQUNoQkMsVUFBVSxFQUNWNWtELEtBQU12TCxLQUFLdWdDLE9BQU85UixPQUdwQnp1QixLQUFLdWdDLE9BQU85UixHQUFLLEtBR25CenVCLEtBQUtxQyxNQUFNLFNBR1JyQyxLQUFLcUMsTUFBTSxXQUNackMsS0FBS3FDLE1BQU0sWUFBYSxDQUN0QjZ0RCxnQkFBZ0IsRUFDaEJDLFVBQVUsRUFDVjVrRCxLQUFNdkwsS0FBS3VnQyxPQUFPbFcsVUFHcEJycUIsS0FBS3VnQyxPQUFPbFcsTUFBUSxLQUd0QnJxQixLQUFLcUMsTUFBTSxNQUFPLENBQUVwSCxLQUFNczBELGtCQUFrQmEsV0FFNUNwd0QsS0FBS3FDLE1BQU0sTUFBTyxDQUFFcEgsS0FBTXMwRCxrQkFBa0JhLFdBRTVDcHdELEtBQUtxQyxNQUFNLFdBR1RyQyxLQUFLcUMsTUFBTSxvQkFDWHJDLEtBQUtxQyxNQUFNLHNCQUF1QixDQUNoQzZ0RCxnQkFBZ0IsRUFDaEJDLFVBQVUsRUFDVjVrRCxLQUFNdkwsS0FBS3VnQyxPQUFPa3RCLG9CQUdwQnp0RCxLQUFLdWdDLE9BQU9rdEIsZ0JBQWtCLEtBR2hDenRELEtBQUt1TCxLQUFPLEtBQU92TCxLQUFLdUwsS0FDeEIsSUFBSTRqRCxTQUFXbnZELEtBQUt5dkQsU0FBUyxJQUFNenZELEtBQUtoRCxLQUFLbXhELGVBQWlCLElBQUssS0FDakMsT0FBOUJudUQsS0FBS3VMLEtBQUtwSCxNQUFNZ3JELFlBRWxCQSxTQUFXbnZELEtBQUtxQyxNQUFNLG1CQUFvQixDQUN4Qzh0RCxVQUFVLEVBQ1ZELGdCQUFnQixJQUVkZixXQUVGbnZELEtBQUt1TCxLQUFPLENBQ1Z2TCxLQUFLdUwsS0FBS2hPLE1BQU0sRUFBRzR4RCxTQUFTLFdBQzVCbnZELEtBQUtoRCxLQUFLb3hELGdCQUNWcHVELEtBQUt1TCxLQUFLaE8sTUFBTTR4RCxTQUFTLFlBQ3pCN3FELEtBQUssTUFJWCxNQUFNaXRELGVBQWlCdnhELEtBQUt5dkQsU0FBU3p2RCxLQUFLdXNELE1BQU00QyxTQUFVLEtBRTFELEdBREFBLFNBQVdudkQsS0FBS3VMLEtBQUt0UCxNQUFNczFELGdCQUNWLE9BQWJwQyxTQUNGLElBQUssSUFBSWxpRCxFQUFJLEVBQUd1a0QsR0FBS3JDLFNBQVNoM0QsT0FBUThVLEVBQUl1a0QsR0FBSXZrRCxJQUlwQyxPQUZOa2lELFNBQVNsaUQsR0FBRzlJLE1BQ1ZuRSxLQUFLeXZELFNBQVMsSUFBTXp2RCxLQUFLaEQsS0FBS214RCxlQUFpQixJQUFLLFlBRTNCLElBQXBCZ0IsU0FBU2xpRCxFQUFJLElBR3BCak4sS0FBS3VMLE1BQVEsS0FBT3ZMLEtBQUt1TCxLQUFPLE1BQzdCOVEsUUFBUTAwRCxTQUFTbGlELEdBQUksTUFDckJpaUMsT0FDSGx2QyxLQUFLcXdELGNBQWNsQixTQUFTbGlELEVBQUksSUFDaENBLEtBSU0sT0FGTmtpRCxTQUFTbGlELEdBQUc5SSxNQUNWbkUsS0FBS3l2RCxTQUFTLElBQU16dkQsS0FBS2hELEtBQUtxeEQsY0FBZ0IsSUFBSyxZQUUxQixJQUFwQmMsU0FBU2xpRCxFQUFJLElBR3BCak4sS0FBS3VMLE1BQVEsS0FBT3ZMLEtBQUt1TCxLQUFPLE1BQzdCOVEsUUFBUTAwRCxTQUFTbGlELEdBQUksTUFDckJpaUMsT0FDSGx2QyxLQUFLK3dELGNBQWM1QixTQUFTbGlELEVBQUksSUFDaENBLEtBSU0sT0FGTmtpRCxTQUFTbGlELEdBQUc5SSxNQUNWbkUsS0FBS3l2RCxTQUFTLElBQU16dkQsS0FBS2hELEtBQUtzeEQsaUJBQW1CLElBQUssWUFFN0IsSUFBcEJhLFNBQVNsaUQsRUFBSSxJQUdwQmpOLEtBQUt1TCxNQUFRLEtBQU92TCxLQUFLdUwsS0FBTyxNQUM3QjlRLFFBQVEwMEQsU0FBU2xpRCxHQUFJLE1BQ3JCaWlDLE9BQ0hsdkMsS0FBSyt3RCxjQUFjNUIsU0FBU2xpRCxFQUFJLEdBQUksYUFDcENBLEtBSU0sT0FGTmtpRCxTQUFTbGlELEdBQUc5SSxNQUNWbkUsS0FBS3l2RCxTQUFTLElBQU16dkQsS0FBS2hELEtBQUt1eEQsY0FBZ0IsSUFBSyxZQUUxQixJQUFwQlksU0FBU2xpRCxFQUFJLEtBR3BCak4sS0FBS3VMLE1BQVEsS0FBT3ZMLEtBQUt1TCxLQUFPLE1BQzdCOVEsUUFBUTAwRCxTQUFTbGlELEdBQUksTUFDckJpaUMsT0FDSGx2QyxLQUFLaXhELGNBQWM5QixTQUFTbGlELEVBQUksSUFDaENBLEtBTU4sT0FEQWpOLEtBQUt1Z0MsT0FBT2t4QixRQUFVenhELEtBQUs2dkQsT0FBTzd2RCxLQUFLdUwsTUFDaEN2TCxLQUFLdWdDLE9BR2RteEIsa0JBQW1CNTFELElBQUs2MUQsWUFBYXR2RCxNQUFPNjdCLFlBQzFDLE1BQU03Z0MsTUFBUXBHLEtBQUtnQixJQUFJLEVBQUcyRixPQUFPK3pELGNBVWpDLE9BVEl0MEQsUUFBVU8sT0FBT3lFLFNBQ25CNjdCLFdBQVcsZ0JBQWdCcGlDLGFBQWMsRUFDekNvaUMsV0FBVyxnQkFBZ0JwaUMsYUFBZXVCLE1BQzlCLFVBQVJ2QixJQUNGb2lDLFdBQVcsZ0JBQWdCcGlDLGVBQWlCdUIsTUFFNUM2Z0MsV0FBVyxnQkFBZ0JwaUMsV0FBYXVCLE9BR3JDNmdDLFdBU1QsbUJBQW9CMHpCLGNBQWU5bUQsWUFDakMsTUFBTSttRCwrQkFBaUM3eEQsS0FBSzh4RCwwQ0FDekIsUUFBZmhuRCxhQUNGQSxXQUFhLFlBRWYsTUFBTTZzQyxVQUFZLENBQ2hCajdDLEtBQU1rMUQsY0FBY2wxRCxLQUNwQnpCLEtBQU02UCxXQUNOTyxPQUFRd21ELHlCQUF5QnIyRCxHQUNqQ3pDLEtBQU02NEQsY0FBY3YxRCxPQUVoQjAxRCxVQUFZeHJELE1BQU03SyxPQUFPaThDLGlCQUN6Qm9hLElBQUk1MkIsd0JBQXdCLE9BQVF5MkIsY0FBY2h4RCxNQUFPLENBQzdEKzZCLGFBQWEsSUFFZixNQUFNdUMsV0FBYSxHQUNuQixJQUFJN2dDLE1BQVEsT0FDeUMsSUFBMUN1MEQsY0FBY3YxRCxNQUFNa04sUUFBUUksSUFBSXRNLE9BQ3pDMkMsS0FBSzB4RCxrQkFDSCxLQUNBRSxjQUFjdjFELE1BQU1rTixRQUFRSSxHQUFHdE0sTUFDL0IwMEQsSUFBSW5vRCxNQUNKczBCLGlCQUdpRCxJQUExQzB6QixjQUFjdjFELE1BQU1rTixRQUFRUyxJQUFJM00sT0FDekMyQyxLQUFLMHhELGtCQUNILEtBQ0FFLGNBQWN2MUQsTUFBTWtOLFFBQVFTLEdBQUczTSxNQUMvQjAwRCxJQUFJOW5ELE1BQ0ppMEIsaUJBR2tELElBQTNDMHpCLGNBQWN2MUQsTUFBTWtOLFFBQVFzaEIsS0FBS3h0QixPQUMxQzJDLEtBQUsweEQsa0JBQ0gsTUFDQUUsY0FBY3YxRCxNQUFNa04sUUFBUXNoQixJQUFJeHRCLE1BQ2hDMDBELElBQUlsbkMsSUFDSnFULGlCQUdvRCxJQUE3QzB6QixjQUFjdjFELE1BQU1rTixRQUFRa2hCLE9BQU9wdEIsT0FDNUMyQyxLQUFLMHhELGtCQUNILFFBQ0FFLGNBQWN2MUQsTUFBTWtOLFFBQVFraEIsTUFBTXB0QixNQUNsQzAwRCxJQUFJdG5DLE1BQ0p5VCxpQkFHaUQsSUFBMUMwekIsY0FBY3YxRCxNQUFNa04sUUFBUWtsQixJQUFJcHhCLFFBQ3pDQSxNQUFRcUosT0FBT2tyRCxjQUFjdjFELE1BQU1rTixRQUFRa2xCLEdBQUdweEIsT0FBTzVDLFFBQVEsU0FBVSxJQUNuRTRDLFFBQVVxSixPQUFPcXJELElBQUl0akMsTUFDdkJ5UCxXQUFXLHlCQUEwQixFQUNyQ0EsV0FBVyx5QkFBMkI3Z0MsUUFHdEN0RCxPQUFPaUQsS0FBS2toQyxZQUFZL2xDLE9BQVMsSUFDL0JSLE9BQU84dEMsTUFBTThxQixjQUNmbDBCLFFBQVFvSixNQUFNLGNBQWV2SCxrQkFFekI2ekIsSUFBSTVuRCxPQUFPK3pCLGFBRW5CLE1BQU04ekIsZUFBaUIsR0FDdkIsSUFBSUMsZ0JBQWtCLEtBQ3RCLElBQUssTUFBTUMsUUFBUWx5RCxLQUFLbXlELGFBQWMsRUFDcEIsSUFBWkQsS0FBSyxLQUNQRCxnQkFBa0JGLElBQUlueEQsTUFBTTFJLFFBQzFCK1UsR0FDRUEsRUFBRXZRLE9BQVN3MUQsS0FBSyxHQUFHeDFELE1BQ1IsVUFBWHVRLEVBQUVoUyxNQUNGMkMsT0FBT3FQLEVBQUVsVSxLQUFLQSxLQUFLc0UsU0FBV08sT0FBT3MwRCxLQUFLLEdBQUduNUQsS0FBS3NFLFVBR3hELE1BQU0wSixPQUFTZ3JELElBQUlueEQsTUFBTTFJLFFBQ3ZCK1UsR0FDRUEsRUFBRXZRLE9BQVN3MUQsS0FBSyxHQUFHeDFELE1BQ1IsV0FBWHVRLEVBQUVoUyxNQUNGZ1MsRUFBRWxVLEtBQUtBLEtBQUsydEIsTUFBTUMsT0FBT2hqQixTQUFXdXVELEtBQUssR0FBR241RCxLQUFLMnRCLE1BQU1DLE9BQU9oakIsU0FFOURzdUQsZ0JBQWdCLElBQU1sckQsT0FBTyxJQUMvQmlyRCxlQUFlajZELEtBQUssQ0FDbEI2Z0MsSUFBSzd4QixPQUFPLEdBQUd2TCxHQUNmLHFCQUFzQnkyRCxnQkFBZ0IsR0FBR3oyRCxHQUN6Qyx1QkFBd0J5MkQsZ0JBQWdCLEdBQUd2MUQsT0FVakQsT0FOSXMxRCxlQUFlNzVELE9BQVMsSUFDdEJSLE9BQU84dEMsTUFBTThxQixjQUNmbDBCLFFBQVFvSixNQUFNLGtCQUFtQnVzQixzQkFFN0JELElBQUl2WSx3QkFBd0IsT0FBUXdZLGlCQUVyQ0QsSUFPVCxnREFDRSxJQUFJSyxXQUFhMzdELEtBQUtnSixLQUFLQyxTQUFTLGlDQUNqQixrQ0FBZjB5RCxhQUNGQSxXQUFhLHVCQUVmLElBQUlQLHlCQUEyQnA3RCxLQUFLNlUsUUFBUXRGLE1BQzFDZzVCLE9BQVNBLE1BQU1qbUMsS0FBSzJELE9BQVMwMUQsWUFBa0MsVUFBcEJwekIsTUFBTWptQyxLQUFLa0MsT0FnQnhELE9BYkU0MkQsTUFBQUEsMkJBSUFBLCtCQUFpQ1EsT0FBTzMyRCxPQUFPLENBQzdDZ0IsS0FBTTAxRCxXQUNObjNELEtBQU0sUUFDTmtNLE9BQVEsT0FFVjdILEdBQUdDLGNBQWNtSixLQUNmalMsS0FBS2dKLEtBQUtDLFNBQVMsMENBR2hCbXlELHlCQVFUbGEsVUFBVzJhLElBQ1QsTUFBTXY1RCxLQUFPLENBQ1gwTixnQkFBaUIsR0FDakI4QyxRQUFTLEdBQ1RoRSxNQUFPLEdBQ1B1UixRQUFTLEdBQ1Q0akIsWUFBYSxDQUNYNHhCLE9BQVEsSUFFVi84QixNQUFPLENBQ0xpVSxRQUFRLEVBQ1I2ZSxnQkFBZ0IsSUFHcEIsSUFBSyxNQUFNdm1ELE1BQU8sQ0FDaEIsTUFDQSxNQUNBLE1BQ0EsTUFDQSxNQUNBLE1BQ0EsTUFDQSxZQUV1QixJQUFadzJELEdBQUd4MkQsT0FDWi9DLEtBQUswTixnQkFBZ0IzSyxLQUFPLENBQzFCdUIsTUFBT08sT0FBTzAwRCxHQUFHeDJELFFBSXZCLElBQUssTUFBTUEsTUFBTyxDQUFDLE1BQU8sTUFBTyxRQUFTLFFBQVMsTUFBTyxLQUFNLFdBQ3ZDLElBQVp3MkQsR0FBR3gyRCxPQUNaL0MsS0FBS3dRLFFBQVF6TixLQUFPLENBQ2xCdUIsTUFBT08sT0FBTzAwRCxHQUFHeDJELGFBSUYsSUFBVncyRCxHQUFHN2pDLEtBQ1oxMUIsS0FBS3dRLFFBQVFrbEIsR0FBSyxDQUNoQnB4QixNQUFPaTFELEdBQUc3akMsS0FHZCxJQUFLLE1BQU0zeUIsTUFBTyxDQUFDLE1BQU8sbUJBQ0QsSUFBWncyRCxHQUFHeDJELE9BQ1ovQyxLQUFLd00sTUFBTXpKLEtBQU93MkQsR0FBR3gyRCxNQUd6QixRQUEwQixJQUFmdzJELEdBQUc3aUQsUUFBeUIsQ0FDckMsTUFBT0QsT0FBUUYsUUFBVWdqRCxHQUFHN2lELFFBQVF4VCxNQUFNLEtBQzFDbEQsS0FBSytkLFFBQVFySCxRQUFVLENBQ3JCK3lCLFlBQWFoekIsT0FDYm16QixhQUFjcnpCLFFBVWxCLFlBUGtDLElBQXZCZ2pELEdBQUc3RSxrQkFDWjEwRCxLQUFLK2QsUUFBUTIyQyxnQkFBa0I3dkQsT0FBTzAwRCxHQUFHN0Usa0JBRTNDMTBELEtBQUsyaEMsWUFBWTR4QixPQUFTZ0csR0FBR2IsUUFDekI5NUQsT0FBTzh0QyxNQUFNOHFCLGNBQ2ZsMEIsUUFBUW9KLE1BQU0sYUFBYzFzQyxNQUV2QkEsS0FVVCxnQkFBaUJrQyxLQUFNeUIsTUFBTSxPQUFXLE1BQVMsSUFDL0NBLEtBQU9BLEtBQUtiLGNBQ1osSUFBSTAyRCxTQUFXLEtBQ2YsSUFBSyxJQUFJL0YsRUFBSSxFQUFHZ0csR0FBS3h5RCxLQUFLd3ZELGNBQWNyM0QsT0FBUXEwRCxFQUFJZ0csR0FBSWhHLElBQ3RELE9BQVF4c0QsS0FBS3d2RCxjQUFjNkIsT0FBTzdFLEVBQUcsSUFDbkMsSUFBSyxJQU9ILEdBTkErRixTQUFXOTdELEtBQUttSyxNQUFNb0YsTUFDcEJuRCxNQUNFQSxLQUFLOUosS0FBS2tDLE9BQVNBLE1BQ25CNEgsS0FBSzlKLEtBQUsyRCxLQUFLYixnQkFBa0JhLE9BQ3JCLE9BQVhzYSxRQUFtQm5VLEtBQUs5SixLQUFLc3JCLFdBQVdyTixTQUFXQSxVQUVwRHU3QyxTQUNGLE9BQU9BLFNBRVQsTUFDRixJQUFLLElBQ0wsSUFBSyxJQUNMLElBQUssSUFDSCxJQUFLLE1BQU01cUQsUUFBUWxSLEtBQUttUixNQUN0QixHQUMyQixTQUF6QkQsS0FBS0UsU0FBU0MsU0FDYyxNQUExQjlILEtBQUt3dkQsY0FBY2hELElBQ08sVUFBMUI3a0QsS0FBS0UsU0FBU3NpRCxTQUNhLE1BQTFCbnFELEtBQUt3dkQsY0FBY2hELElBQ1EsU0FBMUI3a0QsS0FBS0UsU0FBU3NpRCxTQUNXLE1BQTFCbnFELEtBQUt3dkQsY0FBY2hELEtBQ2pCLENBQUMsUUFBUyxRQUFReDBELFNBQVMyUCxLQUFLRSxTQUFTc2lELFVBQzlDLENBUUEsR0FOQW9JLGdCQUR3QjVxRCxLQUFLaWtELGdCQUNSNWxELE1BQ25CbkQsTUFDRUEsS0FBSzlKLEtBQUtrQyxPQUFTQSxNQUNuQjRILEtBQUs5SixLQUFLMkQsS0FBS2IsZ0JBQWtCYSxPQUNyQixPQUFYc2EsUUFBbUJuVSxLQUFLOUosS0FBS3NyQixXQUFXck4sU0FBV0EsVUFFcER1N0MsU0FDRixPQUFPQSxXQWNyQixnQkFBaUJELElBQ2YsTUFBTTF4RCxNQUFRLEdBR2QsR0FGQVosS0FBS215RCxhQUFlLFFBRU0sSUFBZkcsR0FBR3hCLFFBQ1osSUFBSyxNQUFNNTBCLFVBQVVvMkIsR0FBR3hCLFFBQVMsQ0FDL0IsSUFBSWx1RCxPQUFRLEdBQ21CLElBQTNCczVCLE9BQU9uakMsTUFBTTZKLE9BQU9wSCxLQUN0Qm9ILFlBQWM1QyxLQUFLeXlELFlBQVl2MkIsUUFDL0J0N0IsTUFBTTdJLEtBQUs2SyxRQUViczVCLE9BQU9uakMsS0FBSzZKLE1BQU1wSCxHQUFLLEtBQ3ZCb0YsTUFBTTdJLEtBQUtta0MsUUFDWGw4QixLQUFLbXlELGFBQWFwNkQsS0FBSyxDQUFDNkssTUFBT3M1QixTQUluQyxRQUF5QixJQUFkbzJCLEdBQUdoMkMsT0FDWixJQUFLLE1BQU0xWixTQUFTMHZELEdBQUdoMkMsT0FBUSxDQUM3QixNQUFNaTJDLGVBQWlCdnlELEtBQUsweUQsVUFBVSxRQUFTOXZELE1BQU1sRyxNQUNyRCxRQUF3QixJQUFiNjFELFNBQTBCLENBQ25DLE1BQU1JLE9BQVNKLFNBQVM1bEMsV0FDeEJnbUMsT0FBTzU1RCxLQUFLc21CLEtBQU96YyxNQUFNdkYsV0FDQyxJQUFmdUYsTUFBTTdLLE9BQ2Y0NkQsT0FBTzU1RCxLQUFLc3JCLFdBQVd0c0IsS0FBTzZLLE1BQU03SyxNQUV0QzZJLE1BQU03SSxLQUFLb0csVUFBVXcwRCxhQUNoQixDQUNMLE1BQU0vM0QsUUFBVSxRQUNVLElBQWZnSSxNQUFNN0ssT0FDZjZDLFFBQVE3QyxLQUFPNkssTUFBTTdLLE1BRXZCNkksTUFBTTdJLEtBQUsrZ0MsU0FBUzRDLFdBQVc5NEIsTUFBTWxHLEtBQU1rRyxNQUFNdkYsTUFBT3pDLFdBSzlELFFBQTRCLElBQWpCMDNELEdBQUdNLFVBQ1osSUFBSyxNQUFNaHdELFNBQVMwdkQsR0FBR00sVUFBVyxDQUNoQyxNQUFNTCxlQUFpQnZ5RCxLQUFLMHlELFVBQVUsUUFBUzl2RCxNQUFNbEcsTUFDckQsUUFBd0IsSUFBYjYxRCxTQUEwQixDQUNuQyxNQUFNSSxPQUFTSixTQUFTNWxDLFdBQ3hCZ21DLE9BQU81NUQsS0FBS3NtQixLQUFPemMsTUFBTXZGLE1BQ3pCdUQsTUFBTTdJLEtBQUtvRyxVQUFVdzBELGNBRXJCL3hELE1BQU03SSxLQUNKK2dDLFNBQVM0QyxXQUFXOTRCLE1BQU1sRyxLQUFNa0csTUFBTXZGLE1BQU8sQ0FDM0NnQixJQUFLMkosU0FBUzZxRCxhQUNkdHpDLGVBQWdCLGNBTzFCLFFBQXlCLElBQWQreUMsR0FBRzVGLE9BQ1osSUFBSyxNQUFNaHdELFFBQVE0MUQsR0FBRzVGLE9BQVEsQ0FDNUIsTUFBTTZGLGVBQWlCdnlELEtBQUsweUQsVUFBVSxRQUFTaDJELE1BQy9DLFFBQXdCLElBQWI2MUQsU0FBMEIsQ0FDbkMsTUFBTUksT0FBU0osU0FBUzVsQyxXQUN4Qi9yQixNQUFNN0ksS0FBS29HLFVBQVV3MEQsY0FFckIveEQsTUFBTTdJLEtBQUsrZ0MsU0FBUzZELFdBQVdqZ0MsT0FJckMsT0FBT2tFLE1BUVRreUQscUJBQXNCbDNCLFVBQ3BCLE1BQU8sQ0FDTHJjLGVBQWdCOW9CLEtBQUtnSixLQUFLQyxTQUN4Qms4QixTQUNJLGlDQUNBLG1DQUVOdlgsV0FBWSxDQUNWdk4sU0FBUyxFQUNURyxVQUFXMmtCLFNBQ1gxa0IsUUFBUzBrQixTQUNUNWtCLFFBQVEsSUFRZCxrQkFBbUJqUSxRQUNqQixJQUFJbkUsTUFBUSxLQWlDWixHQWhDSTVDLEtBQUt5dkQsU0FBUyxXQUFXaHJCLEtBQUsxOUIsT0FBT3JLLE9BQ3ZDa0csWUFBYzVDLEtBQUsweUQsVUFBVSxRQUFTLFVBQVcsQ0FBRTE3QyxRQUFRLElBQ3ZEcmYsT0FBTzh0QyxNQUFNOHFCLGNBQ2ZsMEIsUUFBUW9KLE1BQU0sR0FBRzErQixPQUFPckssNEJBQTRCa0csVUFFN0M1QyxLQUFLeXZELFNBQVMsU0FBU2hyQixLQUFLMTlCLE9BQU9ySyxPQUM1Q2tHLFlBQWM1QyxLQUFLMHlELFVBQVUsUUFBUyxnQkFBaUIsQ0FBRTE3QyxRQUFRLElBQzVEcFUsUUFDSEEsWUFBYzVDLEtBQUsweUQsVUFBVSxRQUFTLFFBQVMsQ0FBRTE3QyxRQUFRLElBQ3BEcFUsUUFDSEEsWUFBYzVDLEtBQUsweUQsVUFBVSxRQUFTLFVBQVcsQ0FBRTE3QyxRQUFRLE1BRzNEcmYsT0FBTzh0QyxNQUFNOHFCLGNBQ2ZsMEIsUUFBUW9KLE1BQU0sR0FBRzErQixPQUFPckssMEJBQTBCa0csVUFFM0M1QyxLQUFLeXZELFNBQVMsT0FBT2hyQixLQUFLMTlCLE9BQU9ySyxPQUMxQ2tHLFlBQWM1QyxLQUFLMHlELFVBQVUsUUFBUyxpQkFBa0IsQ0FBRTE3QyxRQUFRLElBQzlEcmYsT0FBTzh0QyxNQUFNOHFCLGNBQ2ZsMEIsUUFBUW9KLE1BQU0sR0FBRzErQixPQUFPckssbUNBQW1Da0csVUFFcEQ1QyxLQUFLeXZELFNBQVMsY0FBY2hyQixLQUFLMTlCLE9BQU9ySyxPQUNqRGtHLFlBQWM1QyxLQUFLMHlELFVBQVUsUUFBUyxjQUFlLENBQUUxN0MsUUFBUSxJQUMzRHJmLE9BQU84dEMsTUFBTThxQixjQUNmbDBCLFFBQVFvSixNQUFNLEdBQUcxK0IsT0FBT3JLLGdDQUFnQ2tHLFVBRWpENUMsS0FBS3l2RCxTQUFTLFlBQVlockIsS0FBSzE5QixPQUFPckssUUFDL0NrRyxZQUFjNUMsS0FBSzB5RCxVQUFVLFFBQVMsU0FBVSxDQUFFMTdDLFFBQVEsSUFDdERyZixPQUFPOHRDLE1BQU04cUIsY0FDZmwwQixRQUFRb0osTUFBTSxHQUFHMStCLE9BQU9ySywyQkFBMkJrRyxVQUduREEsTUFBQUEsTUFBZ0QsQ0FNbEQsT0FMbUJBLE1BQU1td0QsTUFBTSxDQUM3Qmg2RCxLQUFNLENBQ0pzRSxNQUFPMEosT0FBT2hPLE1BQU02SixPQUFPcEgsTUFLakMsTUFBTXczRCxTQUFXLENBQ2Z0MkQsS0FBTXFLLE9BQU9ySyxLQUNiekIsS0FBTSxRQUNObEMsS0FBTWlILEtBQUs4eUQscUJBQXFCL3JELE9BQU9oTyxNQUFNc3JCLFlBQVlqTixPQVUzRCxPQVJBNDdDLFNBQVNqNkQsS0FBS3NtQixLQUFPdFksT0FBT2hPLE1BQU02SixPQUFPcEgsR0FDekN3M0QsU0FBU2o2RCxLQUFLc0UsTUFBUTBKLE9BQU9oTyxNQUFNNkosT0FBT3BILEdBQ3RDN0QsT0FBTzh0QyxNQUFNOHFCLGNBQ2ZsMEIsUUFBUW9KLE1BQ04sOEJBQThCMStCLE9BQU9ySywyQkFDckNzMkQsVUFHR0EsU0FPVEMsZ0JBQWlCbEIsS0FDZixJQUFJbUIsdUJBQXdCLEVBQzVCLElBQUssTUFBTXAzRCxNQUFPLENBQ2hCLE1BQ0EsTUFDQSxNQUNBLE1BQ0EsTUFDQSxNQUNBLE1BQ0EsWUFFd0IsSUFBYmkyRCxJQUFJajJELE1BQXdCaTJELElBQUlqMkQsS0FBTyxLQUNoRG8zRCx1QkFBd0IsR0FNNUIsT0FISXY3RCxPQUFPOHRDLE1BQU04cUIsY0FDZmwwQixRQUFRb0osTUFBTSxtQkFBb0J5dEIsdUJBRTdCQSxzQkFTVCxrQkFBbUJDLFFBQ2J4N0QsT0FBTzh0QyxNQUFNOHFCLGNBQ2ZsMEIsUUFBUW9KLE1BQU0sZUFBZ0IwdEIsUUFFaEMsTUFBTTlELEtBQU9ELHdCQUF3QmdFLGNBQWNELE9BQU85RCxNQUMxRHJ2RCxLQUFLaEQsS0FBT295RCx3QkFBd0JpRSxRQUFRaEUsTUFDNUNydkQsS0FBS3VzRCxNQUFRNkMsd0JBQXdCa0Usc0JBQXNCakUsTUFDM0RydkQsS0FBS3d2RCxjQUFnQjJELE9BQU9JLE9BQ3hCNTdELE9BQU84dEMsTUFBTThxQixjQUNmbDBCLFFBQVFvSixNQUFNLHVCQUF3QjRwQixLQUFNcnZELEtBQUtoRCxLQUFNZ0QsS0FBS3VzRCxPQUU5RCxJQUFJL2hELGdCQUFrQnhLLEtBQUt3ekQsZUFBZUwsT0FBTzVuRCxNQUM3QzVULE9BQU84dEMsTUFBTThxQixjQUNmbDBCLFFBQVFvSixNQUFNLGtCQUFtQmo3QixZQUdQLGNBQXpCMm9ELE9BQU9NLGVBQ056ekQsS0FBS2l6RCxnQkFBZ0J6b0QsWUFDRSxnQkFBekIyb0QsT0FBT00saUJBRVBqcEQsZ0JBQWtCeEssS0FBSzB6RCxVQUFVbHBELFlBRW5DLE1BQU1vbkQsY0FBZ0IsQ0FDcEJsMUQsS0FBTThOLFVBQVU5TixLQUNoQkwsTUFBTzJELEtBQUsyM0MsVUFBVW50QyxXQUN0QjVKLFlBQWFaLEtBQUsyekQsVUFBVW5wRCxZQUc5QixRQUErQixJQUFwQjJvRCxPQUFPUyxXQUFnRCxJQUFwQlQsT0FBT1MsU0FDbkQsT0FBT2hDLGNBR1QsYUFEa0I1eEQsS0FBSzZ6RCxhQUFhakMsY0FBZXVCLE9BQU9yckQsUUFTNUQsZ0JBQWlCdEMsVUFDWDdOLE9BQU84dEMsTUFBTThxQixjQUNmbDBCLFFBQVFvSixNQUFNLGlCQUFrQmpnQyxVQUVsQyxJQUFLLE1BQU0xSixNQUFPLENBQUMsTUFBTyxNQUFPLE1BQU8sTUFBTyxNQUFPLE1BQU8sWUFDOUIsSUFBbEIwSixTQUFTMUosT0FDbEIwSixTQUFTMUosTUFBUSxHQXVCckIsWUFwQjRCLElBQWpCMEosU0FBU21SLE1BQ2RuUixTQUFTbVIsS0FBTyxHQUNsQm5SLFNBQVNtUixLQUFPLEVBQ1BuUixTQUFTbVIsS0FBTyxHQUN6Qm5SLFNBQVNtUixJQUFNblIsU0FBU21SLElBQU0sR0FBSyxHQUduQ25SLFNBQVNtUixJQUFNLFNBR1EsSUFBaEJuUixTQUFTaXBCLEtBQ0UsU0FBaEJqcEIsU0FBU2lwQixHQUNYanBCLFNBQVNpcEIsSUFBTSxFQUNVLFNBQWhCanBCLFNBQVNpcEIsS0FDbEJqcEIsU0FBU2lwQixJQUFNLElBR2Y5MkIsT0FBTzh0QyxNQUFNOHFCLGNBQ2ZsMEIsUUFBUW9KLE1BQU0sY0FBZWpnQyxVQUV4QkEsVUN2bENKLE1BQU1zdUQsZ0NBQWdDOTNDLE9BQzNDQyxrQkFBbUIvWCxNQUNqQndLLE1BQU11TixrQkFBa0IvWCxNQUN4QkEsS0FDRzhCLEtBQUssZ0JBQWtCdlAsS0FBS2dKLEtBQUs0dkQsS0FBTyxLQUN4Q3pxQixLQUFLLFdBQVksWUFDcEIxZ0MsS0FDRzhCLEtBQUssb0JBQ0wyWCxHQUFHLFVBQVUsU0FBVWljLEdBQ3RCamxCLEVBQUUsOEJBQThCNVgsS0FDOUIsY0FDQXF5RCx3QkFBd0IyRSxlQUFlcC9DLEVBQUUzVSxNQUFNa3pDLFdBR2xEOGdCLFFBQVEsVUFDWDl2RCxLQUFLOEIsS0FBSyw4QkFBOEIyWCxHQUFHLFNBQVMsU0FBVWljLEdBQzVELE1BQU1xNkIsc0JBQXdCdC9DLEVBQUUzVSxNQUM3Qmt6QyxNQUNBL3VDLE1BQU0sa0NBQ0hpZSxPQUFTek4sRUFBRSxlQUNicy9DLHNCQUNGN3hDLE9BQ0dsZSxLQUFLek4sS0FBS2dKLEtBQUtDLFNBQVMsb0NBQ3hCdzBELFNBQVMsU0FFWjl4QyxPQUNHbGUsS0FBS3pOLEtBQUtnSixLQUFLQyxTQUFTLDJCQUN4Qm0wQixZQUFZLFlBVXJCLHlCQUNFLE1BQU1zL0IsT0FBUyxHQUNmQSxPQUFPcnJELE9BQVM2TSxFQUFFLG9CQUNmdStCLE1BQ0FoRSxPQUNIaWtCLE9BQU9NLGNBQWdCOStDLEVBQUUsbUJBQ3RCdStCLE1BQ0FoRSxPQUNDdjNDLE9BQU84dEMsTUFBTThxQixjQUNmbDBCLFFBQVFvSixNQUFNLGVBQWdCMHRCLE9BQU9yckQsUUFFdkNxckQsT0FBTzlELEtBQU9ELHdCQUF3QmdFLGNBQ3BDeitDLEVBQUUsb0JBQ0N1K0IsTUFDQWhFLFFBRUxpa0IsT0FBT0ksT0FBUzUrQyxFQUFFLFdBQ2Z1K0IsTUFDQWhFLE9BQ0gsSUFBSTNqQyxLQUFPb0osRUFBRSw4QkFDVnUrQixNQUNBaEUsT0FRSCxPQVBJdjNDLE9BQU84dEMsTUFBTThxQixjQUNmbDBCLFFBQVFvSixNQUFNLGdCQUFpQixLQUFPbDZCLEtBQU8sTUFFckIsTUFBdEJBLEtBQUtBLEtBQUtwVCxVQUNab1QsTUFBUSxLQUVWNG5ELE9BQU81bkQsS0FBT0EsS0FDUDRuRCxPQU9ULHlCQUEwQmp2RCxNQUNwQnZNLE9BQU84dEMsTUFBTThxQixjQUNmbDBCLFFBQVFvSixNQUFNLE9BQVF2aEMsTUFFeEIsTUFBTWl2RCxhQUFlVyx3QkFBd0JLLFlBQ3ZDOTNELE1BQVEsSUFBSWt6RCxrQkFDWjZFLG1CQUFxQi8zRCxNQUFNZzRELFlBQVlsQixRQUV6Q3g3RCxPQUFPOHRDLE1BQU04cUIsY0FDZmwwQixRQUFRb0osTUFBTSxnQkFBaUIydUIsY0FFakM5MEQsR0FBR0MsY0FBY21KLEtBQ2YsV0FDRTByRCxhQUFhcjdELE1BQU1rQyxNQUFNUCxjQUN6QixLQUNBMDVELGFBQWFyN0QsTUFBTTJELFlBRWpCMDNELGFBQWExcEQsTUFBTUUsUUFBTyxHQUtsQzBwRCxPQUFRaC9CLFFBSVUsS0FGZDNnQixFQUFFLDhCQUNDdStCLE1BQ0FoRSxRQUNGNVosT0FBTzlWLFVBRVI5USxNQUFNNGxELE9BQU9oL0IsUUFRakIsb0JBQXFCdjhCLEtBQU8sSUFDMUJBLEtBQUs2NUQsVUFBWXhELHdCQUF3Qm1GLGtCQUN6Q3g3RCxLQUFLaTBELFNBQVdvQyx3QkFBd0JnRSxjQUFjLE1BQ3RELE1BQU1sdkQsV0FBYXVRLGVBQ2pCLGtEQUNBMWIsTUFFRixPQUFPLElBQUl1VCxTQUFRQyxVQUNMLElBQUl1bkQsd0JBQ2QsQ0FDRTU2RCxNQUFPSCxLQUFLRyxNQUNadUMsUUFBU3lJLEtBQ1RuTCxLQUNBOGpCLFFBQVMsQ0FDUDIzQyxPQUFRLENBQ05ubUMsS0FBTSxxQ0FDTmpvQixNQUFPM1AsS0FBS2dKLEtBQUtDLFNBQVMsZUFDMUI4ZixTQUFVczBDLHdCQUF3QlcsYUFFcENDLEdBQUksQ0FDRnJtQyxLQUFNLCtCQUNOam9CLE1BQU8zUCxLQUFLZ0osS0FBS0MsU0FBUyxrQkFJaEMsQ0FDRW9kLFFBQVMsQ0FBQyxPQUFRLFNBQVUsa0JBQzVCZ3VCLE1BQU8sTUFHUGxnQyxRQUFPLE9BS2pCOUIsTUFBTTZyRCxLQUFLLFNBQVMsS0FDZGwrRCxLQUFLQyxRQUFRQyxJQUFJLHdCQUF3QkMsU0FDM0M4VSxPQUFPNmpELGtCQUFvQkEsc0JDbEovQixNQUFNcUYsc0JBQXNCQyxnQkFDMUJudkQsY0FDRWdKLFFBQ0ExTyxLQUFLODBELFFBQVUsR0FHakIsMEJBQ0UsT0FBTzlqQixRQUFRQyxNQUFNNWxCLFlBQVkzYyxNQUFNcW1ELGFBQWMsQ0FDbkRyNEQsS0FBTSxXQUNOdTZDLE9BQVEsS0FJWiwwQkFDRSxNQUFPLFFBR1QsaUJBQ0UsTUFBTyxJQUlKLE1BQU0rZCxTQUNYLGtCQUFtQkMsVUFDakJyMkQsT0FBT3MyRCxZQUFjLElBQUlOLGNBQ3pCLE1BQU10cUQsS0FBTzdULEtBQUtvQyxLQUFLeVIsS0FDdkIycUQsU0FBU2w5RCxLQUFLLENBQ1oyRSxLQUFNLFdBQ054RCxNQUFPLGVBQ1BpOEQsTUFBTyxjQUNQOW1DLEtBQU0sc0NBQ05neEIsUUFBUy8wQyxLQUNUOHFELE1BQU8sQ0FDTCxDQUNFNXNELFFBQVEsRUFDUjZsQixLQUFNLHlCQUNOM3hCLEtBQU0sV0FDTjlGLE9BQVFILEtBQUtJLFNBQVNGLElBQUksT0FBUSxzQkFDbEN1QyxNQUFPLGdCQUNQbThELFFBQVNsK0QsTUFBQUEsY0FBc0IyTSxjQUFjd3hELGVBQWU5c0QsU0FFOUQsQ0FDRUEsUUFBUSxFQUNSNmxCLEtBQU0sbUJBQ04zeEIsS0FBTSxhQUNOOUYsT0FBUUgsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLHVCQUNsQ3VDLE1BQU8sd0JBQ1BtOEQsUUFBU2wrRCxNQUFBQSxjQUNEMk0sY0FBY3l4RCxtQkFBbUIvc0QsU0FFM0MsQ0FDRThzQixRQUFRLEVBQ1JqSCxLQUFNLG1CQUNOM3hCLEtBQU0sZUFDTnhELE1BQU8scUJBQ1BtOEQsUUFBU2wrRCxlQUNEMjhELHdCQUF3QnA0RCxPQUFPLENBQ25DeEMsTUFBT3pDLEtBQUtnSixLQUFLQyxTQUFTLHlCQUdoQyxDQUNFOEksUUFBUSxFQUNSNmxCLEtBQU0scUJBQ044bkIsTUFBTyxZQUNQejVDLEtBQU0sV0FDTjlGLE9BQVFILEtBQUtJLFNBQVNGLElBQUksT0FBUSxhQUNsQ3VDLE1BQU8sZ0JBQ1BtOEQsUUFBU2wrRCxNQUFBQSxjQUFzQjJNLGNBQWMweEQsYUFBYWh0RCxTQUU1RCxDQUNFOHNCLFFBQVEsRUFDUmpILEtBQU0saUNBQ04zeEIsS0FBTSxXQUNOeEQsTUFBTyxnQkFDUG04RCxRQUFTNXhDLFNBQVNneUMsaUJBRXBCLENBQ0VuZ0MsUUFBUSxFQUNSakgsS0FBTSxjQUNOM3hCLEtBQU0sWUFDTnhELE1BQU8saUJBQ1BtOEQsUUFBU2wrRCxlQUFrQjJNLGNBQWM0eEQsZ0JBTWpELHNCQUF1QmwvQyxJQUFLdFMsS0FBTW5MLE1BQ2hDLE1BQU11UixLQUFPN1QsS0FBS29DLEtBQUt5UixLQUNqQnFyRCxXQUFhenhELEtBQUs4QixLQUFLLDhCQUE4Qm1CLFNBQzNEd3VELFdBQVd6QixTQUFTLGFBQ2hCNXBELE1BQ0ZxckQsV0FBV0MsTUFDVCwrREFDRW4vRCxLQUFLZ0osS0FBS0MsU0FBUyxtQkFDbkIsc0NBR05pMkQsV0FBV0MsTUFDVCw2REFDRW4vRCxLQUFLZ0osS0FBS0MsU0FBUyxpQkFDbkIsa0RBRUp3RSxLQUNHOEIsS0FBSyw2QkFDTGtXLE9BQU0vaEIsT0FBUzJKLGNBQWN1RCxTQUFTbE4sU0FDekMrSixLQUNHOEIsS0FBSywrQkFDTGtXLE9BQU0vaEIsT0FBU3d1Qyx1QkFBdUJqdEMsT0FBT3ZCLFVDN0c3QyxNQUFNMDdELFdBQ1gsa0NBQ0UsTUFBTyxDQUFDLFFBR1YsNkJBQThCajNELE9BQVFpRSxNQUNwQyxHQUNFQSxLQUFLK29DLFVBQ0xpcUIsV0FBV0MscUJBQXFCOTlELFNBQVM2SyxLQUFLK29DLFVBQzlDLENBQ0EsTUFBTW1xQixTQUFXbjNELE9BQU9uQyxNQUFNMUQsS0FBS2tHLEtBQzdCOEUsRUFBSWxCLEtBQUtrQixFQUFJZ3lELFNBQVcsRUFDeEJsZixFQUFJaDBDLEtBQUtnMEMsRUFBSWtmLFNBQVcsRUFDeEJockIsT0FBU2dyQixTQUNUanJCLE1BQVFpckIsU0FDZCxJQUFJQyxpQkFBbUJwM0QsT0FBT3pDLE9BQU84NUQsV0FBVy85RCxRQUFPa0YsTUFDckQsTUFBTTY0QyxFQUFJNzRDLElBQUlvQixPQUNkLE9BQ0VaLE9BQU9zNEQsUUFBUWpnQixFQUFFbHlDLEVBQUdBLEVBQUdBLEVBQUkrbUMsUUFDM0JsdEMsT0FBT3M0RCxRQUFRamdCLEVBQUVZLEVBQUdBLEVBQUdBLEVBQUk5TCxXQUkvQixPQURLaXJCLGlCQUFpQjc5RCxTQUFRNjlELGlCQUFtQnAzRCxPQUFPekMsT0FBT29PLFlBQ3ZEMUgsS0FBSytvQyxVQUNYLElBQUssT0FDSCxDQUNFLE1BQU05QyxXQUFhVixTQUFTeHlCLFNBQVMvUyxNQUNoQ2ltQyxLQUFLQSxNQUNSeHBDLEdBQUdDLGNBQWNzTixNQUFNLGdCQUd6QixNQUFNay9CLE9BQVMsR0FLZixHQUpBQSxPQUFPaHhDLFFBQVUsQ0FDZjRCLE1BQU9sRyxLQUFLb0MsS0FBSzZELE1BR2RzNUQsaUJBQWlCNzlELE9BZ0JwQixJQUFLLE1BQU1MLEtBQUtrK0QsaUJBQ1ZsK0QsRUFBRXVFLE1BQU0yTSxpQkFDVitpQyxPQUFPeHpDLFFBQVVULEVBQUV1RSxNQUFNeWxCLE9BQ3pCdm5CLFdBQVdzckMsY0FDVCxLQUNBcHZDLEtBQUtnSixLQUFLWSxPQUFPLG1DQUFvQyxDQUNuRDNELEtBQU01RSxFQUFFdUUsTUFBTUssS0FDZDJGLE1BQU95bUMsS0FBS0EsT0FFZGlELGFBekJzQixDQUM1QixNQUFNb3FCLGVBQWlCMS9ELEtBQUt1ckIsTUFBTXNRLFFBQVFwNkIsUUFDeENtdkMsS0FBT0EsRUFBRTc4QixZQUVYLElBQUssTUFBTTY4QixLQUFLOHVCLGVBQ2RwcUIsT0FBT3h6QyxRQUFVLENBQUM4dUMsR0FDbEI5c0MsV0FBV3NyQyxjQUNULEtBQ0FwdkMsS0FBS2dKLEtBQUtZLE9BQU8sbUNBQW9DLENBQ25EM0QsS0FBTTJxQyxFQUFFNzhCLFVBQVU5TixLQUNsQjJGLE1BQU95bUMsS0FBS0EsT0FFZGlELGFDbkRYLE1BQU1xcUIsZ0NBQWdDQyxvQkFDM0NwNkMsa0JBQW1CL1gsTUFDakJ3SyxNQUFNdU4sa0JBQWtCL1gsTUFDeEIsSUFBSW95RCxZQUFhLEVBQ2pCLEdBQXVCLE9BQW5CNy9ELEtBQUtnSixLQUFLNHZELEtBQ1ppSCxZQUFhLE9BQ1IsUUFBMkIsSUFBaEI3L0QsS0FBSzgvRCxPQUNyQixJQUFLLE1BQU16OEQsS0FBS0MsT0FBT2dNLE9BQU90UCxLQUFLOC9ELE9BQU83L0QsU0FDcENvRCxFQUFFdTFELE9BQVM1NEQsS0FBS2dKLEtBQUs0dkQsT0FDdkJpSCxZQUFhLEdBSWRBLGFBQ0hweUQsS0FDRzhCLEtBQUssMkJBQ0wweEIsT0FDQyw0Q0FDRWpoQyxLQUFLZ0osS0FBS0MsU0FBUyw0QkFDbkIsS0FDQWpKLEtBQUtnSixLQUFLQyxTQUFTLDRCQUNuQixRQUVOd0UsS0FBSzhCLEtBQUssMkJBQTJCa1csT0FBTSxLQUN6QyxNQUFNdmhCLFFBQ0osTUFDQWxFLEtBQUtnSixLQUFLQyxTQUFTLDhCQURuQixVQUlBakosS0FBS2dKLEtBQUtDLFNBQVMsb0NBSm5CLFVBT0FqSixLQUFLZ0osS0FBS0MsU0FBUyx5Q0FQbkIsVUFVQWpKLEtBQUtnSixLQUFLQyxTQUFTLHdDQVZuQixVQWFBakosS0FBS2dKLEtBQUtDLFNBQVMsb0NBQ25CLE9BQ0YsSUFBSXNjLE9BQ0YsQ0FDRTlpQixNQUFPekMsS0FBS2dKLEtBQUtDLFNBQVMsNEJBQzFCakUsUUFBU2QsUUFDVGtpQixRQUFTLEdBQ1Q2QyxRQUFTLFNBRVgsSUFDQTlVLFFBQU8sUUMvQ1YsTUFBTTRyRCwyQkFBMkJDLGVBQ3RDeDZDLGtCQUFtQi9YLE1BQ2pCd0ssTUFBTXVOLGtCQUFrQi9YLE1BQ3hCQSxLQUNHOEIsS0FBSywyQkFDTDB4QixPQUNDLDJCQUNFamhDLEtBQUtnSixLQUFLQyxTQUFTLHNCQUNuQixRQUVOd0UsS0FBSzhCLEtBQUssaUJBQWlCa1csT0FBTSxLQUMvQjQzQyx3QkFBd0JwNEQsT0FBTyxDQUM3QnhDLE1BQU96QyxLQUFLZ0osS0FBS0MsU0FBUyw0QkNUM0IsTUFBTWczRCxrQkFBa0IxdUQsU0FDN0J0QyxZQUFhM00sS0FBTW0xQyxjQUNPLElBQWJuMUMsS0FBS3NGLE1BQ2R0RixLQUFLc0YsSUFBTSxnREFFYnFRLE1BQU0zVixLQUFNbTFDLFNBQ1psdUMsS0FBS2t1QyxRQUFVQSxRQUdqQixhQUNFLElBQUtsdUMsS0FBSzh1QyxRQUVSLE9BQU94dkMsR0FBR0MsY0FBY3NOLE1BQU1wVyxLQUFLZ0osS0FBS0MsU0FBUyxrQkFFbkQsTUFBTWkzRCxNQUFRMzJELEtBQUtqSCxLQUFLQSxLQUFLNDlELE1BQ3ZCQyxPQUFTLEdBQ2YsSUFBSyxNQUFPOTZELElBQUt1QixTQUFVdEQsT0FBT0MsUUFBUTI4RCxPQUNuQ3Q1RCxPQUEyQixJQUFsQk8sT0FBT1AsUUFDckJ1NUQsT0FBTzcrRCxXQUFXaUksS0FBSzYyRCxjQUFjLzZELElBQUt1QixRQUU1QyxNQUNNcTlCLFlBQWMxNkIsS0FBS2pILEtBQUtBLEtBQUsyaEMsWUFBWXI5QixNQUN6QzZHLFdBQWF1USxlQUZGLCtDQUUyQixDQUFFaW1CLFlBQWFrOEIsU0FDM0QsYUFBYW4rRCxZQUFZaUQsT0FBTyxDQUM5QjdDLEtBQU1wQyxLQUFLb0MsS0FBSzJDLEdBQ2hCVCxRQUFTdEMsWUFBWXVDLFdBQVcsQ0FBRXFCLE1BQU8yRCxLQUFLM0QsUUFDOUN2QixPQUFRa0YsS0FBS3RELEtBQ2JqQixRQUFTeUksT0FJYixvQkFBcUJoQixlQUFnQjdGLE9BQ25DLElBQUl5bUMsbUJBQ0FkLEtBRUZBLEtBREVsL0IsY0FBY2lrQyxVQUFVMXFDLGNBQ1osSUFBSXRHLEtBQUtzRyxPQUFPdkcsS0FBSyxDQUFFSyxPQUFPLEtBQVNHLE1BRTlDNEksU0FBUzdDLE9BRWxCLE1BQU1zNkMsVUFBWTMzQyxLQUFLM0QsTUFBTXRELEtBQUtBLEtBQ2xDLE9BQVFtSyxnQkFDTixJQUFLLFlBQ0g0Z0MsbUJBQXFCcnRDLEtBQUtnSixLQUFLQyxTQUFTLGtCQUN4Q00sS0FBSzNELE1BQU02dEIsV0FBVzhZLE1BQ3RCLE1BQ0YsSUFBSyxTQUNIYyxtQkFBcUJydEMsS0FBS2dKLEtBQUtDLFNBQVMscUJBQ3hDTSxLQUFLODJELGdCQUFnQjl6QixNQUNyQixNQUNGLElBQUssY0FDSGMsbUJBQXFCcnRDLEtBQUtnSixLQUFLQyxTQUFTLG9CQUN4Q00sS0FBSzNELE1BQU04TixPQUFPLENBQ2hCLHdCQUF5Qnd0QyxVQUFVcHVDLFFBQVFTLEdBQUczTSxNQUFRMmxDLE9BRXhELE1BQ0YsSUFBSyxRQUNIYyxtQkFBcUJydEMsS0FBS2dKLEtBQUtDLFNBQVMsZ0JBQ3hDTSxLQUFLM0QsTUFBTThOLE9BQU8sQ0FDaEIsaUNBQ0V3dEMsVUFBVWx4QyxnQkFBZ0JpUSxJQUFJclosTUFBUTJsQyxPQUc5QyxNQUFPLENBQUVjLG1CQUFvQmQsTUFJL0Isc0JBQXVCM2xDLE9BQ3JCLE1BQU1pSixTQUFXa0ksYUFBYWxJLFNBQzlCLElBQUlwQyxXQUFhdVEsZUFBZW5PLFNBQVUsSUFDMUMsTUFBTTNMLGNBQWdCbEMsWUFBWWlELE9BQU8sQ0FDdkM3QyxLQUFNcEMsS0FBS29DLEtBQUsyQyxHQUNoQlQsUUFBU3RDLFlBQVl1QyxXQUFXLENBQUVxQixNQUFPMkQsS0FBSzNELFFBQzlDdkIsT0FBUXJFLEtBQUtnSixLQUFLWSxPQUFPLG9CQUFxQixDQUM1Qzh3RCxNQUFPbnhELEtBQUt0RCxPQUVkakIsUUFBU3lJLE9BRUx0RSxXQUFhakYsUUFBUW84RCxVQUMzQixRQUEyQixJQUFoQm4zRCxLQUFLekgsUUFBMEMsSUFBaEJ5SCxLQUFLekgsT0FBYyxDQUMzRCxNQUFNNitELFdBQWEzNUQsTUFDbkI2RyxLQUFPdEUsS0FBS29HLEtBQUssY0FBYyxHQUMvQjlCLEtBQUtqTCxRQUFRMkQsT0FBU3hELE9BQ3BCQyxLQUFLQyxVQUFVLENBQ2JnRCxTQUFVMEQsS0FBSzNELE1BQU1iLEdBQ3JCNk8sYUFBYSxFQUNib0UsUUFBUyxDQUNQYyxPQUFReW5ELFdBQ1IzbkQsT0FBUTJuRCxlQUlkLE1BQU1DLFlBQWN6b0QsYUFBYThHLFlBQVlwUixZQUN2Qyt5RCxZQUFZQyxzQkFDWkQsWUFBWTErQixjQUNsQjArQixZQUFZcjFDLGtCQUloQnpYLE9BQVFwUixLQUFNbTFDLFNBQ1osUUFDaUMsSUFBeEJsdUMsS0FBS2t1QyxRQUFRL21DLGFBQ1csSUFBeEJuSCxLQUFLa3VDLFFBQVFpcEIsT0FDcEIsQ0FDQSxJQUFJdDBELEtBQ0F1MEQsS0FDd0IsT0FBeEJwM0QsS0FBS2t1QyxRQUFRL21DLFFBQ2Z0RSxLQUFPcE0sS0FBS21LLE1BQU1qSyxJQUFJcUosS0FBS2t1QyxRQUFRaXBCLFFBQ25DQyxLQUFPdjBELEtBQUs4cEIsWUFFWnlxQyxLQUFPcDNELEtBQUtrdUMsUUFBUS9tQyxPQUFPdkcsTUFBTWpLLElBQUlxSixLQUFLa3VDLFFBQVFpcEIsUUFBUXhxQyxXQUU1RCxJQUFLLElBQUkxZixFQUFJLEVBQUd1a0QsR0FBSzRGLEtBQUtyK0QsS0FBSzJ6RCxPQUFPdjBELE9BQVE4VSxFQUFJdWtELEdBQUl2a0QsSUFDaERtcUQsS0FBS3IrRCxLQUFLMnpELE9BQU96L0MsR0FBRzJyQixNQUFRNTRCLEtBQUt4RSxLQUNuQzQ3RCxLQUFLcitELEtBQUsyekQsT0FBT3ovQyxHQUFLb2UsWUFBWStyQyxLQUFLcitELEtBQUsyekQsT0FBT3ovQyxHQUFJbFUsT0FHL0IsT0FBeEJpSCxLQUFLa3VDLFFBQVEvbUMsT0FDZnRFLEtBQUtzSCxPQUFPLENBQ1YsY0FBZWl0RCxLQUFLcitELEtBQUsyekQsU0FHM0Ixc0QsS0FBS2t1QyxRQUFRL21DLE9BQU9xeUMsd0JBQXdCLE9BQVEsQ0FBQzRkLFlBR3ZEMW9ELE1BQU12RSxPQUFPcFIsS0FBTW0xQyxVQzNIbEIsTUFBTW1wQixpQkFBaUJydkQsU0FDNUJ0QyxZQUFhM00sS0FBTW0xQyxjQUNPLElBQWJuMUMsS0FBS3NGLE1BQ2R0RixLQUFLc0YsSUFBTSw2Q0FFYnFRLE1BQU0zVixLQUFNbTFDLFNBSWQseUJBQTBCdnJDLFlBQ3hCLE9BQVFBLFlBQ04sSUFBSyxPQUNILE9BQU94QyxVQUFVd0UsZ0JBQWdCckUsS0FDbkMsSUFBSyxVQUNILE9BQU9ILFVBQVV3RSxnQkFBZ0JwRSxRQUNuQyxJQUFLLFdBQ0gsT0FBT0osVUFBVXdFLGdCQUFnQm5FLFNBQ25DLElBQUssYUFDSCxPQUFPTCxVQUFVd0UsZ0JBQWdCc2lCLFdBQ25DLFFBQ0UsT0FBTzltQixVQUFVd0UsZ0JBQWdCdkUsU0FTdkMsZ0JBQWlCc3NELFFBQ2YsTUFBTTE5QixXQUFhaHZCLEtBQUtqSCxLQUFLQSxLQUFLMnpELE9BQzlCdnVELFVBQVU2QixLQUFLakgsS0FBS0EsS0FBSzJ6RCxRQUN6QixHQUNKLElBQUssTUFBTXlFLFNBQVN6RSxPQUNsQjE5QixXQUFXajNCLEtBQUtvNUQsT0FFbEIsYUFBYW54RCxLQUFLbUssT0FBTyxDQUFFLGNBQWU2a0IsYUFHNUMsa0JBQW1CelMsT0FDakIsTUFBTXhqQixLQUFPaUgsS0FBS2pILEtBQUtBLEtBQUsyekQsT0FBT253QyxPQUM3QnBWLE9BQVNuSCxLQUFLM0QsTUFBUTJELEtBQUszRCxNQUFRLEtBQ25DODBELE1BQVEsSUFBSXVGLFVBQVUzOUQsS0FBTSxDQUFFb08sT0FBUWd3RCxPQUFRbjNELEtBQUt4RSxLQUN6RCxhQUFhMjFELE1BQU16bUQsTUFBTUUsUUFBTyxHQU9sQyw4QkFFRSxNQUFNakksV0FBYTAwRCxTQUFTdHlELGtCQUMxQi9FLEtBQUtqSCxLQUFLQSxLQUFLNEwsaUJBRVhxb0QsU0FBV2h0RCxLQUFLakgsS0FBS0EsS0FBS2kwRCxTQUMxQnBxRCxNQUFRNUMsS0FBSzNELE9BQU80L0IsZ0JBQWdCK3dCLFVBQzFDLEdBQUtwcUQsTUFHRSxJQUFxQixJQUFqQkEsTUFBTXpLLE9BS2YsT0FBT21ILEdBQUdDLGNBQWNzTixNQUN0QnBXLEtBQUtnSixLQUFLWSxPQUFPLHVCQUF3QixDQUFFaEUsTUFBTzJELEtBQUszRCxNQUFNSyxRQUUxRCxDQUNMLE1BQU0yRixNQUFRLElBQUlsQyxVQVlsQixPQVhBa0MsTUFBTWhHLE1BQVEyRCxLQUFLM0QsTUFDbkJnRyxNQUFNTyxNQUFRQSxNQUFNLEdBQUdwSCxHQUN2QjZHLE1BQU1NLFdBQWFBLFdBQ25CTixNQUFNOEUsT0FBU25ILEtBQUtzN0IsS0FDcEJqNUIsTUFBTTZyQyxRQUFVLGtCQUNoQjdyQyxNQUFNdkgsT0FBU3JFLEtBQUtnSixLQUFLWSxPQUFPLG1CQUFvQixDQUNsRCsyRCxLQUFNcDNELEtBQUt0RCxLQUNYc3dELFNBQ0FycUQsV0FBWTNDLEtBQUtqSCxLQUFLQSxLQUFLNEwsd0JBRXZCdEMsTUFBTXZMLGFBQ0N1TCxNQUFNaUQsYUF0Qm5CLE9BQU9oRyxHQUFHQyxjQUFjc04sTUFBTXBXLEtBQUtnSixLQUFLQyxTQUFTLGtCQWdDckQscUJBQXNCNDNELEtBQU1qNkQsT0FDMUIsSUFBSzJDLEtBQUs4dUMsU0FBb0IsVUFBVHdvQixLQUVuQixPQUFPaDRELEdBQUdDLGNBQWNzTixNQUFNcFcsS0FBS2dKLEtBQUtDLFNBQVMsa0JBRW5ELElBQUtNLEtBQUtqSCxLQUFLQSxLQUFLdytELGdCQUEyQixVQUFURCxLQUVwQyxPQUFPaDRELEdBQUdDLGNBQWNzTixNQUN0QnBXLEtBQUtnSixLQUFLWSxPQUFPLDRCQUE2QixDQUM1Q2hFLE1BQU8yRCxLQUFLM0QsTUFBTUssS0FDbEIwNkQsS0FBTXAzRCxLQUFLdEQsUUFJakIsSUFBS3NELEtBQUtqSCxLQUFLQSxLQUFLa0MsS0FBSzBkLFFBQW1CLFVBQVQyK0MsS0FDakMsT0FBT2g0RCxHQUFHQyxjQUFjc04sTUFBTXBXLEtBQUtnSixLQUFLQyxTQUFTLHVCQUVuRCxNQUFNNHRELFVBQVl0dEQsS0FBS2pILEtBQUtBLEtBQUt5K0QsTUFBTWxLLFVBQ3ZDLElBQUltSyxVQUFZejNELEtBQUtqSCxLQUFLQSxLQUFLMCtELFVBQzNCakssU0FBV3h0RCxLQUFLakgsS0FBS0EsS0FBS3krRCxNQUFNaEssU0FDcEMsR0FBSXhwRCxNQUFNd3BELFVBRVIsYUFBYXh0RCxLQUFLbUssT0FBTyxDQUN2QixzQkFBdUIsSUFHM0IsR0FBSTlNLE9BQVNtd0QsU0FBV253RCxNQVN0QixhQUpNMkMsS0FBS21LLE9BQU8sQ0FDaEIsbUJBQW9Cc3RELFVBQ3BCLHNCQUF1QnA2RCxjQUVaMkMsS0FBSzAzRCxvQkFFcEIsR0FBYSxhQUFUSixNQUF1QjlKLFNBQVdGLFVBQVcsQ0FFL0MsSUFBdUMsVUFBNUJ0dEQsS0FBSzIzRCxrQkFBOEIsT0FJOUMsU0FITTMzRCxLQUFLbUssT0FBTyxDQUNoQix3QkFBeUJxakQsV0FFdkJBLFdBQWFGLFVBR2YsYUFETXR0RCxLQUFLbUssT0FBTyxDQUFFLG1CQUFvQnN0RCxrQkFDM0J6M0QsS0FBSzQzRCxzQkFFZixHQUFhLGFBQVROLE1BQXVCOUosU0FBVyxFQUUzQyxhQUFheHRELEtBQUttSyxPQUFPLENBQ3ZCLHdCQUF5QnFqRCxXQUsvQix3QkFDRSxNQUFNcUssaUJBQW1CNzNELEtBQUszRCxPQUFPdW1DLGNBQy9CcXFCLGFBQWVqdEQsS0FBS2pILEtBQUtBLEtBQUtrMEQsYUFDcEMsR0FBSWp0RCxLQUFLakgsS0FBS0EsS0FBS3crRCxlQUNqQixPQUFJTSxrQkFBb0I1SyxxQkFDaEJqdEQsS0FBS21LLE9BQU8sQ0FDaEIsc0JBQXVCbkssS0FBS2pILEtBQUtBLEtBQUt5K0QsTUFBTWxLLFlBRXZDaHVELEdBQUdDLGNBQWNDLEtBQ3RCL0ksS0FBS2dKLEtBQUtZLE9BQU8saUNBQWtDLENBQ2pEaEUsTUFBTzJELEtBQUszRCxNQUFNSyxLQUNsQjA2RCxLQUFNcDNELEtBQUt0RCxTQU9yQix1QkFDRSxJQUFLc0QsS0FBS2pILEtBQUtBLEtBQUtrQyxLQUFLMGQsT0FBUSxPQUNqQyxJQUF1QyxVQUE1QjNZLEtBQUsyM0Qsa0JBQThCLE9BQzlDLE1BQU1FLGlCQUFtQjczRCxLQUFLM0QsTUFBTXVtQyxjQUM5QmsxQixhQUFlLEdBQ2Y3SyxhQUFlanRELEtBQUtqSCxLQUFLQSxLQUFLazBELGFBQ3BDLElBQUk4SyxZQUFjLzNELEtBQUtqSCxLQUFLQSxLQUFLaS9ELE1BQU1wMUIsY0FBY3ExQixNQUNyRCxHQUFJSixpQkFBbUJFLFlBQWM5SyxhQUNuQyxJQUFLLElBQUkxd0MsTUFBUSxFQUFHQSxPQUFTdzdDLFlBQWF4N0MsUUFDcENzN0MsaUJBQW1CRSxZQUFjeDdDLE9BQVMwd0MsZUFDNUM4SyxhQUFleDdDLE9Bb0JyQixPQVpBdTdDLGFBQWEvL0QsS0FDWCxDQUNFMkUsS0FBTWpHLEtBQUtnSixLQUFLQyxTQUFTLDBCQUN6Qnl0RCxLQUFNanRELFNBQVM2M0QsY0FFakIsQ0FDRXI3RCxLQUFNc0QsS0FBS2pILEtBQUtBLEtBQUtpMEQsU0FDckJHLEtBQU0sc0JBR0pudEQsS0FBS2s0RCxzQkFBc0JKLG9CQUMzQjkzRCxLQUFLbTRELHVCQUNFbjRELEtBQUttSyxPQUFPLENBQ3ZCLHFCQUFzQm5LLEtBQUtqSCxLQUFLQSxLQUFLcS9ELGNBUXpDLDRCQUVFLEdBQUlwNEQsS0FBS2pILEtBQUtBLEtBQUt3K0QsZUFBZ0IsT0FDbkMsTUFBTU8sYUFBZSxHQUNmbi9DLE9BQVMsQ0FDYnEvQyxNQUFPaDRELEtBQUtqSCxLQUFLQSxLQUFLaS9ELE1BQU1wMUIsY0FBYytqQixRQUMxQzFyRCxLQUFNK0UsS0FBS2pILEtBQUtBLEtBQUtrQyxLQUFLMGQsUUFFdEJDLE9BQVMsQ0FDYm8vQyxNQUFPaDRELEtBQUtqSCxLQUFLQSxLQUFLaS9ELE1BQU1wL0MsT0FDNUIzZCxLQUFNK0UsS0FBS2pILEtBQUtBLEtBQUtrQyxLQUFLMmQsUUFFdEJDLFlBQ0c3WSxLQUFLakgsS0FBS0EsS0FBS2kvRCxNQUFNSyxPQUR4QngvQyxXQUVFN1ksS0FBS2pILEtBQUtBLEtBQUtrQyxLQUFLNGQsTUFjNUIsR0FaSUYsT0FBTzFkLE1BQVEwZCxPQUFPcS9DLE9BQ3hCRixhQUFhLy9ELEtBQUssQ0FDaEIyRSxLQUFNakcsS0FBS2dKLEtBQUtDLFNBQVMsMEJBQ3pCeXRELEtBQU1qdEQsU0FBU3lZLE9BQU9xL0MsU0FHdEJwL0MsT0FBTzNkLE1BQVEyZCxPQUFPby9DLE9BQ3hCRixhQUFhLy9ELEtBQUssQ0FDaEIyRSxLQUFNakcsS0FBS2dKLEtBQUtDLFNBQVMsZUFDekJ5dEQsS0FBTWp0RCxTQUFTMFksT0FBT28vQyxTQUd0Qm4vQyxXQUNGLElBQUssTUFBTWpXLFNBQVNpVyxZQUFhLENBQy9CLE1BQU15L0MsUUFBVTExRCxNQUFNbEcsS0FBS3lILE1BQU0sbUJBRTdCbTBELFVBQ0YxMUQsTUFBTTJjLGVBQWlCKzRDLFFBQVEsR0FDL0IxMUQsTUFBTWxHLEtBQU80N0QsUUFBUSxJQUVILGdCQUFoQjExRCxNQUFNdkYsUUFDUnVGLE1BQU12RixhQUNFLElBQUl0RyxLQUFLNkwsTUFBTXZGLE9BQU92RyxLQUFLLENBQUVLLE9BQU8sS0FDMUNHLE9BRUFzTCxNQUFNdkYsT0FDUnk2RCxhQUFhLy9ELEtBQUssQ0FDaEIyRSxLQUFNa0csTUFBTWxHLEtBQ1p5d0QsS0FBTXZxRCxNQUFNdkYsTUFDWmtpQixlQUFnQjNjLE1BQU0yYyxpQkFVOUIsYUFMTXZmLEtBQUtrNEQsc0JBQXNCSixlQUM1Qm4vQyxPQUFPMWQsTUFBUTJkLE9BQU8zZCxPQUFTK0UsS0FBS2pILEtBQUtBLEtBQUtpK0Qsa0JBQzNDaDNELEtBQUttNEQsdUJBR0FuNEQsS0FBS21LLE9BQU8sQ0FBRSx1QkFBdUIsSUFHcEQsMkJBQ0UsT0FBTzdLLEdBQUdDLGNBQWNDLEtBQ3RCLDRHQVNKLDRCQUE2QnM0RCxjQUMzQixHQUE0QixJQUF4QkEsYUFBYTMvRCxPQUFqQixDQUNBLElBQUssTUFBTThnRCxlQUFlNmUsYUFBYyxDQUV0QyxJQUFLN2UsWUFBWWtVLEtBQU0sU0FDdkIsSUFBSXZxRCxZQUFjNUMsS0FBSzNELE1BQU00L0IsZ0JBQWdCZ2QsWUFBWXY4QyxNQUt6RCxHQUFxQixJQUFqQmtHLE1BQU16SyxPQUFjLENBQ3RCLE1BQU1vZ0Usb0JBQXNCOWhFLEtBQUttSyxNQUFNb0YsTUFDckNuRCxNQUNxQixVQUFuQkEsS0FBSzlKLEtBQUtrQyxNQUFvQjRILEtBQUs5SixLQUFLMkQsT0FBU3U4QyxZQUFZdjhDLE9BRTdENjdELGNBQ0YzMUQsWUFBYzVDLEtBQUszRCxNQUFNOCtCLHdCQUF3QixPQUFRLENBQ3ZEaDlCLFVBQVVvNkQsa0JBR1ozMUQsWUFBYzVDLEtBQUszRCxNQUFNdWdDLFlBQVlxYyxZQUFZdjhDLEtBQU0sR0FDbkR1OEMsWUFBWTE1QixzQkFDUjNjLE1BQU0sR0FBR3VILE9BQU8sQ0FDcEIsMkJBQTJCLEVBQzNCLHNCQUF1Qjh1QyxZQUFZMTVCLGtCQU0zQyxHQURBM2MsTUFBUUEsTUFBTSxHQUNXLGdCQUFyQnEyQyxZQUFZa1UsV0FFUnZxRCxNQUFNczFCLDBCQUNQLENBS0wsR0FBSXQxQixNQUFNdkYsTUFBUTQ3QyxZQUFZa1UsS0FBTyxHQUNuQyxJQUFLLElBQUk1d0MsTUFBUSxFQUFHQSxPQUFTMDhCLFlBQVlrVSxLQUFNNXdDLFFBQ3pDM1osTUFBTXZGLE1BQVE0N0MsWUFBWWtVLEtBQU81d0MsT0FBUyxLQUM1QzA4QixZQUFZa1UsTUFBUTV3QyxZQUNkM1osTUFBTStpQyxtQkFBbUJzVCxZQUFZa1UsYUFLM0N2cUQsTUFBTStpQyxtQkFBbUJzVCxZQUFZa1UsT0FHL0MsT0FBT250RCxLQUFLdzRELHNCQUFzQlYsZUFRcEMsc0JBRUUsYUFETTkzRCxLQUFLbUssT0FBTyxDQUFFLHNCQUF1QixVQUM5Qm5LLEtBQUttSyxPQUFPLENBQ3ZCLHVCQUF5RCxFQUFqQ25LLEtBQUtqSCxLQUFLQSxLQUFLeStELE1BQU1sSyxZQUtqRCx1QkFDRSxNQUFNandELE1BQVEyQyxLQUFLakgsS0FBS0EsS0FBS2krRCxXQUM3QixJQUFLMzVELE9BQW1CLEtBQVZBLE1BQWMsT0FDNUIsTUFBTWlKLFNBQVdrSSxhQUFhbEksU0FDOUIsSUFBSXBDLFdBQWF1USxlQUFlbk8sU0FBVSxJQUMxQyxNQUFNM0wsY0FBZ0JsQyxZQUFZaUQsT0FBTyxDQUN2QzdDLEtBQU1wQyxLQUFLb0MsS0FBSzJDLEdBQ2hCVCxRQUFTdEMsWUFBWXVDLFdBQVcsQ0FBRXFCLE1BQU8yRCxLQUFLM0QsUUFDOUN2QixPQUFRckUsS0FBS2dKLEtBQUtZLE9BQU8seUJBQTBCLENBQ2pEKzJELEtBQU1wM0QsS0FBS3RELE9BRWJqQixRQUFTeUksT0FFTHRFLFdBQWFqRixRQUFRbzhELFVBQzNCLFFBQTJCLElBQWhCbjNELEtBQUt6SCxRQUEwQyxJQUFoQnlILEtBQUt6SCxPQUFjLENBQzNELE1BQU02K0Qsa0JBQW9CLElBQUlqZ0UsS0FBS3NHLE9BQU92RyxLQUFLLENBQUVLLE9BQU8sS0FBU0csTUFDakU0TSxLQUFPdEUsS0FBS29HLEtBQUssY0FBYyxHQUMvQjlCLEtBQUtqTCxRQUFRMkQsT0FBU3hELE9BQ3BCQyxLQUFLQyxVQUFVLENBQ2JnRCxTQUFVMEQsS0FBSzNELE1BQU1iLEdBQ3JCNk8sYUFBYSxFQUNib0UsUUFBUyxDQUNQYyxPQUFReW5ELFdBQ1IzbkQsT0FBUTJuRCxlQUlkLE1BQU1DLFlBQWN6b0QsYUFBYThHLFlBQVlwUixZQUN2Qyt5RCxZQUFZQyxzQkFDWkQsWUFBWTErQixjQUNsQjArQixZQUFZcjFDLGtCQVNoQiw0QkFBNkJrMkMsY0FFM0IsSUFBSyxNQUFNN2UsZUFBZTZlLGFBQ3BCN2UsWUFBWTE1QixpQkFDZDA1QixZQUFZdjhDLEtBQU8sR0FBR3U4QyxZQUFZMTVCLG1CQUFtQjA1QixZQUFZdjhDLFNBRTFDLGdCQUFyQnU4QyxZQUFZa1UsS0FDZGxVLFlBQVlrVSxLQUFPMTJELEtBQUtnSixLQUFLQyxTQUFTLDZCQUV0Q3U1QyxZQUFZa1UsS0FBTyxJQUFJbFUsWUFBWWtVLFFBQVExMkQsS0FBS2dKLEtBQUtDLFNBQ25ELGlCQUlOLE1BQ013RSxXQUFhdVEsZUFERixxREFDMkIsQ0FBRXFqRCxlQUM5QyxhQUFhci9ELFlBQVlpRCxPQUFPLENBQzlCN0MsS0FBTXBDLEtBQUtvQyxLQUFLMkMsR0FDaEJULFFBQVN0QyxZQUFZdUMsV0FBVyxDQUFFcUIsTUFBTzJELEtBQUszRCxRQUM5Q3ZCLE9BQVFyRSxLQUFLZ0osS0FBS1ksT0FBTyx1QkFBd0IsQ0FBRSsyRCxLQUFNcDNELEtBQUt0RCxPQUM5RGpCLFFBQVN5SSxPQUliLDJCQUE0QjFJLElBQzFCLElBQUt3RSxLQUFLOHVDLFFBRVIsT0FBT3h2QyxHQUFHQyxjQUFjc04sTUFBTXBXLEtBQUtnSixLQUFLQyxTQUFTLGtCQUVuRCxJQUFLTSxLQUFLakgsS0FBS0EsS0FBS3crRCxlQUVsQixPQUFPajRELEdBQUdDLGNBQWNzTixNQUN0QnBXLEtBQUtnSixLQUFLWSxPQUFPLDRCQUE2QixDQUM1Q2hFLE1BQU8yRCxLQUFLM0QsTUFBTUssS0FDbEIwNkQsS0FBTXAzRCxLQUFLdEQsUUFJakIsTUFBTXkwRCxNQUFRbnhELEtBQUtqSCxLQUFLQSxLQUFLMnpELE9BQU8xbUQsTUFBS21yRCxPQUNoQ0EsTUFBTXY0QixNQUFRcDlCLEtBRXZCLEdBQUkyMUQsTUFBTyxDQUNULE1BQU05dUQsTUFBUSxJQUFJbEMsVUFDbEJrQyxNQUFNaEcsTUFBUTJELEtBQUszRCxNQUNuQmdHLE1BQU1NLFdBQWF4QyxVQUFVd0UsZ0JBQWdCckUsS0FDN0MrQixNQUFNOEUsT0FBU25ILEtBQUtzN0IsS0FDcEJqNUIsTUFBTXZILE9BQVNyRSxLQUFLZ0osS0FBS1ksT0FBTyx5QkFBMEIsQ0FDeEQrMkQsS0FBTXAzRCxLQUFLdEQsS0FDWHkwRCxNQUFPQSxNQUFNejBELE9BRWYyRixNQUFNNnJDLFFBQVUsdUJBQ1Y3ckMsTUFBTStiLG1CQUFtQixhQUN6Qi9iLE1BQU1pRCxhQUtoQixpQkFBa0J4TyxNQUNoQixNQUFNdUwsTUFBUWxDLFVBQVVzNEQsZUFBZTNoRSxNQUV2QyxHQUFJdUwsTUFBTW1OLE9BQVEsQ0FDaEIsR0FBc0Isb0JBQWxCbk4sTUFBTTZyQyxRQUNSLGFBQWFsdUMsS0FBSzA0RCxzQkFDYixHQUFzQixtQkFBbEJyMkQsTUFBTTZyQyxRQUNmLGFBQWFsdUMsS0FBSzI0RCx1QkMvYm5CLE1BQU1DLHVCQUF1QkMsU0FDbENuekQsWUFBYW96RCxVQUNYcHFELE1BQU1vcUQsVUFDTjk0RCxLQUFLa2xDLE1BQVEsR0FHZixZQUNFLE1BQU01dEMsTUFBUW9YLE1BQU1wWCxNQUNwQixPQUFpQixLQUFWQSxNQUFlLEVBQVksR0FBUkEsTUFLNUIsMEJBQ0UsTUFBTyxLQ0xKLE1BQU15aEUsMkJBQTJCQyxVQUt0Qy84QyxrQkFBbUIvWCxNQUNqQndLLE1BQU11TixrQkFBa0IvWCxNQUVuQmxFLEtBQUtwRixRQUFRZzlDLFdBRWxCMXpDLEtBQ0c4QixLQUFLLHVCQUNMa1csT0FBTS9oQixPQUFTNkYsS0FBSys4QyxlQUFlNWlELE1BQU8sWUFDN0MrSixLQUNHOEIsS0FBSyxnQkFDTGtXLE9BQU0vaEIsT0FBUzZGLEtBQUtpNUQsY0FBYzkrRCxNQUFPLGFBRzlDLGNBQWVBLE1BQU9jLEtBQU8sUUFBU2krRCxlQUFpQixVQUNyRC8rRCxNQUFNeU0saUJBQ056TSxNQUFNa3lDLGtCQUVOLE1BQU1yaEMsZUFBaUJsSCxjQUFjcTFELHFCQUFxQmgvRCxNQUFPLFFBRTNENjBCLFdBQWFodkIsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLbWdFLGdCQUNuQy82RCxVQUFVNkIsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLbWdFLGlCQUM5QixHQUNKLElBQUssTUFBTXIyRCxRQUFRbUksU0FDWm5JLE1BQVNBLEtBQUs5SixNQUNkLENBQUNrQyxNQUFNakQsU0FBUzZLLEtBQUs5SixLQUFLa0MsU0FHMUIrTSxTQUFTQyxVQUFVcEYsT0FDbEJtc0IsV0FBV2hwQixNQUFLK1ksSUFBTUEsR0FBR3JpQixPQUFTbUcsS0FBSzlKLEtBQUsyRCxRQUtsRHN5QixXQUFXajNCLEtBQUtvRyxVQUFVMEUsS0FBSzlKLGNBRTNCaUgsS0FBSzZDLEtBQUtzSCxPQUFPLENBQUUsQ0FBQyxRQUFRK3VELGtCQUFtQmxxQyxhQUd2RCt0QixlQUFnQjVpRCxNQUFPKytELGVBQWlCLFNBQ3RDLytELE1BQU15TSxpQkFDTixNQUFNd1YsR0FBS3pILEVBQUV4YSxNQUFNa2lCLGVBQWU4Z0MsUUFBUSxTQUlwQzdrRCxTQUhPMEgsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLbWdFLGdCQUFnQmx6RCxNQUFLMUksR0FDN0NBLEVBQUVzN0IsTUFBUXhjLEdBQUdyakIsS0FBSyxhQUVMQSxLQUFLMmhDLFlBRzNCLEdBQUl0ZSxHQUFHbWtDLFNBQVMsWUFBYSxDQUMzQixNQUFNaG1CLFFBQVVuZSxHQUFHbzZCLFNBQVMsaUJBQzVCamMsUUFBUStpQixRQUFRLEtBQUssSUFBTS9pQixRQUFRNXRCLGVBQzlCLENBQ0wsTUFBTTZ6QyxJQUFNN3JDLEVBQUUsNkJBQTZCcmMsU0FBUytFLGVBQzlDZ3pDLE1BQVExN0IsRUFBRSx1Q0FFaEI2ckMsSUFBSTlvQixPQUFPMlksT0FDWGowQixHQUFHc2IsT0FBTzhvQixJQUFJRSxRQUNkRixJQUFJSSxVQUFVLEtBRWhCeGtDLEdBQUdnQixZQUFZLFlBR2pCLG9CQUFxQmpqQixNQUFPKytELGVBQWlCLFNBQzNDLE1BQU1FLFVBQVl6a0QsRUFBRXhhLE1BQU1raUIsZUFDdkI4Z0MsUUFBUSxTQUNScGtELEtBQUssV0FDSnFnRSxpQkFBaUJwNUQsS0FBS3E1RCxXQUFXRCxVQUFXRixnQkFHbEQsaUJBQWtCdjRELE9BQVF1NEQsZUFBaUIsU0FDekMsTUFBTUUsVUFBWXA1RCxLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUttZ0UsZ0JBQWdCNzNCLFdBQVUvakMsR0FDdkRBLEVBQUVzN0IsTUFBUWo0QixTQUVuQixHQUFJeTRELFdBQWEsRUFBRyxDQUNsQixNQUFNcHFDLFdBQWFodkIsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLbWdFLGdCQUNuQy82RCxVQUFVNkIsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLbWdFLGlCQUM5QixHQUNKbHFDLFdBQVdjLE9BQU9zcEMsVUFBVyxTQUN2QnA1RCxLQUFLNkMsS0FBS3NILE9BQU8sQ0FBRSxDQUFDLFFBQVErdUQsa0JBQW1CbHFDLGNBSXpELDRCQUNFLE9BQU8zRCxZQUFZM2MsTUFBTTRjLGVBQWdCLENBQ3ZDeE8sUUFBUyxDQUFDLE9BQVEsUUFBUyxjQUMzQmd1QixNQUFPLElBQ1BDLE9BQVEsSUFDUlAsU0FBVSxDQUFDLENBQUVDLGFBQWMsVUFDM0IwVyxRQUFTLENBQUMsb0JBQ1ZxRixLQUFNLENBQ0osQ0FDRUMsWUFBYSxvQkFDYkMsZ0JBQWlCLGNBQ2pCQyxRQUFTLGtCQU1qQixlQUNFLE1BQU8sOENBR1QyUyxhQUFjbi9ELE9BQ1osTUFBTWlpQixHQUFLamlCLE1BQU1raUIsY0FBYzFHLFFBQVEsU0FLakM0akQsU0FBVyxDQUFFdCtELEtBQU0sT0FBUWxDLEtBSm5CaUgsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLdWpCLE9BQU90VyxNQUFLMUksR0FDckNBLEVBQUVzN0IsTUFBUXhjLEdBQUduakIsUUFBUTBILFVBSTlCeEcsTUFBTStRLGFBQWE2OUIsUUFBUSxhQUFjMXZDLEtBQUtDLFVBQVVpZ0UsV0FHMURwdUQsVUFDRSxNQUFNcFMsS0FBTzJWLE1BQU12RCxVQUdia2dELFNBQVd0eUQsS0FBS0EsS0FDdEJBLEtBQUtBLEtBQU9zeUQsU0FBU3R5RCxLQUdyQkEsS0FBSysxQyxRQUFVOXVDLEtBQUs2QyxLQUFLaXNDLFFBRXpCLE1BQU03UCxvQkFBc0IsR0FDNUIsSUFBSyxNQUFPbmpDLElBQUs2RixZQUFhNUgsT0FBT0MsUUFDbkNqQixLQUFLQSxLQUFLa21DLHFCQUVWLEdBQUl0OUIsU0FBVSxDQUNaLE1BQU02M0QsV0FBYS9pRSxLQUFLZ0osS0FBS0MsU0FBUyxVQUFVNUQsSUFBSXBCLGlCQUNwRHVrQyxvQkFBb0JsbkMsS0FBS3loRSxZQUk3QnpnRSxLQUFLd3RELGVBQTZDLElBQTVCeHRELEtBQUtBLEtBQUt1akIsT0FBT25rQixPQUN2QyxJQUFLLE1BQU15SyxTQUFTN0osS0FBS0EsS0FBS3VqQixPQUcxQjFaLE1BQU03SixLQUFLd21CLGlCQUNWM2MsTUFBTWxHLEtBQUsxRSxTQUFTNEssTUFBTTdKLEtBQUt3bUIsZ0JBRWhDM2MsTUFBTSs4QixZQUFjLEdBQUcvOEIsTUFBTTdKLEtBQUt3bUIsbUJBQW1CM2MsTUFBTWxHLFFBQ3REa0csTUFBTSs4QixZQUFjLzhCLE1BQU1sRyxLQUduQzNELEtBQUtBLEtBQUt1akIsT0FBTzRVLE1BQUssQ0FBQzEzQixFQUFHaXNCLElBQ2pCanNCLEVBQUVtbUMsWUFBWXNILGNBQWN4aEIsRUFBRWthLGVBR3ZDNW1DLEtBQUswZ0UsMEJBQTRCLEdBQ2pDLE1BQU1DLFNBQVcsSUFBSWpqRSxLQUFLZ0osS0FBS0MsU0FBUyxjQW1CeEMsT0FsQkl1L0Isb0JBQW9COW1DLFNBQ3RCWSxLQUFLMGdFLDJCQUE2Qng2QixvQkFBb0IzNkIsS0FBS28xRCxXQUc3RDNnRSxLQUFLNGdFLGVBQWlCLEdBRXRCNWdFLEtBQUs0Z0UsZUFBZTVoRSxLQUNsQixHQUFHdEIsS0FBS2dKLEtBQUtDLFNBQVMsd0JBQXdCM0csS0FBS0EsS0FBS29zRCxXQUUxRHBzRCxLQUFLNGdFLGVBQWU1aEUsS0FDbEIsR0FBR3RCLEtBQUtnSixLQUFLQyxTQUFTLHdCQUF3QjNHLEtBQUtBLEtBQUs4cEMsZUFPMUQ5cEMsS0FBSzZnRSxTQUFXbmpFLEtBQUtvQyxLQUFLeVIsS0FDbkJ2UixLQUdUb3FELGNBQWVocEQsTUFBT21sQixVQUlwQixHQUZLQSxTQUFTdm1CLE9BQU11bUIsU0FBV3VOLGFBQWF2TixXQUV4Q0EsU0FBU3ZtQixLQUFLMG1DLE9BQVEsQ0FDeEJuZ0IsU0FBU3ZtQixLQUFLMG1DLE9BQVMxbEMsT0FBT2dNLE9BQU91WixTQUFTdm1CLE1BQU0wbUMsUUFBVSxJQUM5RCxJQUFLLElBQUlsakIsTUFBUSxFQUFHQSxNQUFRdmMsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLMG1DLE9BQU90bkMsT0FBUW9rQixRQUM3RCtDLFNBQVN2bUIsS0FBSzBtQyxPQUFPbGpCLE9BQU9ELE9BQVNuZSxVQUNuQzZCLEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBSzBtQyxPQUFPbGpCLE9BQU9ELFFBS3hDNU4sTUFBTXkwQyxjQUFjaHBELE1BQU9tbEIsV0NwTXhCLE1BQU11NkMsc0JBQXNCYixVQUNqQyw0QkFDRSxPQUFPM3RDLFlBQVkzYyxNQUFNNGMsZUFBZ0IsQ0FDdkNobEIsU0FBVSw4Q0FDVndXLFFBQVMsQ0FBQyxPQUFRLE9BQVEsUUFDMUJndUIsTUFBTyxJQUNQQyxPQUFRLE9BQ1JtWSxXQUFXLEVBQ1gxWSxTQUFVLENBQUMsQ0FBRUMsYUFBYyxVQUFXQyxhQUFjLE9BQ3BEeVcsUUFBUyxDQUFDLFNBQ1ZxRixLQUFNLENBQ0osQ0FDRUMsWUFBYSxjQUNiQyxnQkFBaUIsUUFDakJDLFFBQVMsa0JBTWpCLGdCQUNFLE1BQU01dEQsS0FBTzJWLE1BQU12RCxVQUNia2dELFNBQVd0eUQsS0FBS0EsS0FZdEIsT0FYQUEsS0FBS0EsS0FBT3N5RCxTQUFTdHlELEtBQ3JCQSxLQUFLdytELGVBQWlCdjNELEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS3crRCxlQUMxQ3grRCxLQUFLNmdFLFNBQVduakUsS0FBS29DLEtBQUt5UixLQUMxQnZSLEtBQUsrMUMsUUFBVTl1QyxLQUFLNkMsS0FBS2lzQyxRQUN6Qi8xQyxLQUFLK2dFLGNBQWdCOTVELEtBQUs4NUQsY0FDMUIvZ0UsS0FBS2doRSxXQUFvRCxVQUFqQy81RCxLQUFLNkMsS0FBSzgwRCxrQkFDbEM1K0QsS0FBS2loRSxlQUNIaDZELEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS3krRCxNQUFNaEssV0FBYXh0RCxLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUt5K0QsTUFBTWxLLFVBRW5FdjBELEtBQUtraEUsZUFBNkMsSUFBNUJsaEUsS0FBS0EsS0FBSzJ6RCxPQUFPdjBELE9BRWhDWSxLQUdULG9CQUNFLElBQUkwK0IsT0FBUyxFQUNiLE1BQU1pMUIsT0FBUzFzRCxLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUsyekQsT0FDbkMsSUFBSyxNQUFNeUUsU0FBU3pFLE9BQ2R5RSxNQUFNcDRELEtBQUttaEUsU0FBU3ppQyxTQUUxQixNQUFPLEdBQUdBLFlBQVlpMUIsT0FBT3YwRCxTQUcvQjhqQixrQkFBbUIvWCxNQUNqQndLLE1BQU11TixrQkFBa0IvWCxNQUN4QkEsS0FBSzhCLEtBQUssNEJBQTRCa1csT0FBTS9oQixRQUMxQ0EsTUFBTXlNLGlCQUNONUcsS0FBSzZDLEtBQUtzM0QsMkJBRVpqMkQsS0FBSzhCLEtBQUssaUJBQWlCa1csT0FBTS9oQixPQUFTNkYsS0FBS282RCxVQUFVamdFLFNBQ3pEK0osS0FBSzhCLEtBQUssZUFBZWtXLE9BQU0vaEIsT0FBUzZGLEtBQUtxNkQsZUFBZWxnRSxTQUM1RCtKLEtBQUs4QixLQUFLLGVBQWVrVyxPQUFNL2hCLE9BQVM2RixLQUFLcTZELGVBQWVsZ0UsU0FDNUQrSixLQUFLOEIsS0FBSyxnQkFBZ0JrVyxPQUFNL2hCLFFBQzlCLE1BQU1xQixHQUFLbVosRUFBRXhhLE1BQU1raUIsZUFDaEI4Z0MsUUFBUSxNQUNScGtELEtBQUssTUFDUmlILEtBQUs2QyxLQUFLeTNELHFCQUFxQjkrRCxPQUVqQzBJLEtBQUs4QixLQUFLLGlDQUFpQzg4QyxRQUFPM29ELFFBQ2hELE1BQU1rRCxNQUFRNkMsU0FBUy9GLE1BQU1raUIsY0FBY2hmLE9BQzNDMkMsS0FBSzZDLEtBQUswM0QsZUFBZSxRQUFTbDlELFVBRXBDNkcsS0FBSzhCLEtBQUssc0JBQXNCa1csT0FBTSxLQUNwQ2xjLEtBQUs2QyxLQUFLMDNELGVBQWUsZUFFM0JyMkQsS0FBSzhCLEtBQUssc0JBQXNCa1csT0FBTSxLQUNwQ2xjLEtBQUs2QyxLQUFLMDNELGVBQWUsZUFFM0JyMkQsS0FBSzhCLEtBQUssb0JBQW9Ca1csT0FBTS9oQixRQUNsQzZGLEtBQUt3NkQsa0JBQWtCcmdFLE1BQU8sVUFFaEMrSixLQUFLOEIsS0FBSyx1QkFBdUI4OEMsUUFBTzNvRCxRQUN0QzZGLEtBQUt3NkQsa0JBQWtCcmdFLE1BQU8sYUFFaEMrSixLQUFLOEIsS0FBSyxvQkFBb0JrVyxPQUFNLEtBQ2xDbGMsS0FBSzZDLEtBQUs0M0QsbUJBRVp2MkQsS0FBSzhCLEtBQUssdUJBQXVCa1csT0FBTS9oQixRQUNyQzZGLEtBQUt3NkQsa0JBQWtCcmdFLE1BQU8sYUFFaEMrSixLQUFLOEIsS0FBSyxXQUFXa1csT0FBTS9oQixPQUFTNkYsS0FBSzA2RCxXQUFXdmdFLFNBR3RELHFCQUFzQkEsT0FDcEJBLE1BQU15TSxpQkFDTixNQUVNMlYsTUFGVTVILEVBQUV4YSxNQUFNa2lCLGVBRUY4Z0MsUUFBUSxNQUFNcGtELEtBQUssU0FDekMsYUFBYWlILEtBQUs2QyxLQUFLODNELFlBQVlwK0MsT0FRckMsZ0JBQWlCcGlCLE9BQ2YsSUFBSzFELEtBQUtvQyxLQUFLeVIsS0FBTSxPQUNyQm5RLE1BQU15TSxpQkFDTixNQUVNMlYsTUFGVTVILEVBQUV4YSxNQUFNa2lCLGVBRUY4Z0MsUUFBUSxNQUFNcGtELEtBQUssU0FFbkMyekQsT0FBUzFzRCxLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUsyekQsT0FDL0J2dUQsVUFBVTZCLEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBSzJ6RCxRQUM5QixHQUVKLE9BRElud0MsT0FBUyxHQUFHbXdDLE9BQU81OEIsT0FBT3ZULE1BQU8sU0FDeEJ2YyxLQUFLNkMsS0FBS3NILE9BQU8sQ0FBRSxjQUFldWlELFNBU2pELGNBQWV2eUQsTUFBT2MsS0FBTyxTQUMzQmQsTUFBTXlNLGlCQUVOek0sTUFBTWt5QyxrQkFFTixNQUFNcmhDLGVBQWlCbEgsY0FBY3ExRCxxQkFBcUJoL0QsTUFBTyxRQUUzRHV5RCxPQUFTLEdBQ2YsSUFBSyxNQUFNN3BELFFBQVFtSSxTQUNabkksTUFBUyxDQUFDLFFBQVMsU0FBUzdLLFNBQVM2SyxLQUFLOUosS0FBS2tDLFFBQzdCLFVBQW5CNEgsS0FBSzlKLEtBQUtrQyxLQUNaeXhELE9BQU8zMEQsS0FBSzhLLEtBQUs5SixNQUNXLFVBQW5COEosS0FBSzlKLEtBQUtrQyxNQUFvQitFLEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS2tDLEtBQUs0ZCxPQUNoRTdZLEtBQUt3NkQsa0JBQWtCLEtBQU0sTUFBTyxDQUFFOTlELEtBQU1tRyxLQUFLbkcsY0FHL0NzRCxLQUFLNkMsS0FBSyszRCxVQUFVbE8sUUFTNUJnTyxXQUFZdmdFLE9BQ1ZBLE1BQU15TSxpQkFFTnpNLE1BQU1reUMsa0JBRU4sT0FEcUIxM0IsRUFBRXhhLE1BQU1raUIsZUFDVHcrQyxPQUFPN0csUUFBUSxTQVVyQyx3QkFBeUI3NUQsTUFBT205RCxLQUFNMThELFFBQVUsSUFFOUMsSUFBSTJoQixNQUFRLEtBQ1IxZixRQUFVLEtBQ1YxQyxRQUNGQSxNQUFNeU0saUJBQ04vSixRQUFVOFgsRUFBRXhhLE1BQU1raUIsZUFFbEJFLE1BQVExZixRQUFRc2dELFFBQVEsTUFBTXBrRCxLQUFLLFVBR3JDLE1BQU11akIsT0FBU3RjLEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS2kvRCxNQUFNSyxPQUNyQ2w2RCxVQUFVNkIsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLaS9ELE1BQU1LLFFBQ3BDLEdBQ0osT0FBUWYsTUFDTixJQUFLLE1BRUhoN0MsT0FBT3ZrQixLQUFLLENBRVYyRSxLQUFNOUIsUUFBUThCLE1BQVFqRyxLQUFLZ0osS0FBS0MsU0FBUyxxQkFFekNyQyxNQUFPLGdCQUVULE1BQ0YsSUFBSyxTQUVIaWYsT0FBT0MsT0FBUyxDQUNkN2YsS0FBTUcsUUFBUXdzQyxHQUFHLFNBQVd4c0MsUUFBUXEyQyxNQUFRNTJCLE9BQU9DLE9BQU83ZixLQUMxRFcsTUFBT1IsUUFBUXdzQyxHQUFHLFVBQVl4c0MsUUFBUXEyQyxNQUFRNTJCLE9BQU9DLE9BQU9sZixPQUU5RCxNQUNGLElBQUssU0FFQ2tmLE9BQVMsR0FBR0QsT0FBT3dULE9BQU92VCxNQUFPLEdBRXpDLGFBQWF2YyxLQUFLNkMsS0FBS3NILE9BQU8sQ0FBRSxvQkFBcUJtUyxVQ2xNbEQsTUFBTXcrQywyQkFBMkJyWCxxQkFLdEMsNEJBQ0UsT0FBT3A0QixZQUFZM2MsTUFBTTRjLGVBQWdCLENBQ3ZDeE8sUUFBUyxDQUFDLE9BQVEsUUFBUyxRQUFTLGFBQ3BDeFcsU0FBVSxxREFDVndrQyxNQUFPLElBQ1BDLE9BQVEsT0NYUCxNQUFNZ3dCLDJCQUEyQnJqQixXQUt0Qyw0QkFDRSxPQUFPcnNCLFlBQVkzYyxNQUFNNGMsZUFBZ0IsQ0FDdkN4TyxRQUFTLENBQUMsT0FBUSxRQUFTLFFBQVMsV0FDcEN4VyxTQUFVLG1EQUNWd2tDLE1BQU8sSUFDUEMsT0FBUSxJQUNSUCxTQUFVLENBQUMsQ0FBRUMsYUFBYyxRQUFTQyxhQUFjLE9BQ2xEOGIsS0FBTSxDQUNKLENBQ0VDLFlBQWEsYUFDYkMsZ0JBQWlCLGNBQ2pCQyxRQUFTLFlBTWpCLG9CQUFxQnhzRCxNQUFPcEIsTUFDMUIsSUFBS2lILEtBQUszRCxNQUFNd08sUUFBUyxNQUFPLEdBQ2hDLEdBQTBCLFNBQXRCOVIsS0FBS3FTLGFBQXlCLE1BQU8sR0FDekMsTUFBTUMsT0FBUzVVLEtBQUs2VSxRQUFRM1UsSUFBSW9DLEtBQUt5QyxJQUNyQyxJQUFLNlAsT0FBUSxNQUFPLEdBQ3BCLE1BQU16SyxNQUFReUssT0FBT2pELFNBQ2xCbFEsUUFBTzJLLE1BQVEsQ0FBQyxPQUFRLE9BQVEsUUFBUyxVQUFVN0ssU0FBUzZLLEtBQUs1SCxRQUNqRXdELEtBQUlvRSxNQUFRQSxLQUFLcUUsV0FDaEJ0RyxNQUFNekksT0FBUyxTQUNYNkgsS0FBSzNELE1BQU04K0Isd0JBQXdCLE9BQVF2NkIsT0FJckRnNkMsZ0JBRUEsZ0JBQ0UsTUFBTTdoRCxXQUFhMlYsTUFBTXZELFVBQ25CNnZELFVBQVlqaUUsS0FBS0EsS0FLdkIsR0FKQWlpRSxVQUFVcEIsU0FBV25qRSxLQUFLb0MsS0FBS3lSLEtBQy9CMHdELFVBQVVwakIsU0FBVzUzQyxLQUFLNjNDLFdBRTFCbWpCLFVBQVVsakIsWUFBYyxHQUNwQi8rQyxLQUFLNkgsTUFBTyxDQUNkLElBQUssTUFBTWlDLFFBQVE5SixLQUFLNkgsTUFFbkI3RyxPQUFPMm9ELFVBQVVDLGVBQWU1NUMsS0FDL0JpeUQsVUFBVWxqQixZQUNWajFDLEtBQUs1SCxRQUdQKy9ELFVBQVVsakIsWUFBWWoxQyxLQUFLNUgsTUFBUSxJQUVyQysvRCxVQUFVbGpCLFlBQVlqMUMsS0FBSzVILE1BQU1sRCxLQUFLOEssTUFFeEMsSUFBSyxNQUFNNDJDLFlBQVl1aEIsVUFBVWxqQixZQUMvQmtqQixVQUFVbGpCLFlBQVkyQixVQUFVdm9CLE1BQUssQ0FBQzEzQixFQUFHaXNCLElBQ2hDanNCLEVBQUVrRCxLQUFLdXFDLGNBQWN4aEIsRUFBRS9vQixRQWlDcEMsT0E1QkFzK0QsVUFBVUMsWUFDK0MsV0FBdkR4a0UsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLDBCQUMxQkYsS0FBS29DLEtBQUt5UixLQUVaMHdELFVBQVUxZ0IsbUJBQ1J2Z0QsT0FBTzJvRCxVQUFVQyxlQUFlNTVDLEtBQUtpeUQsVUFBVWxqQixZQUFhLFVBQzNEa2pCLFVBQVVqaUUsS0FBS3cyQixNQUFNaVUsT0FDeEJ3M0IsVUFBVXpnQixtQkFDUnhnRCxPQUFPMm9ELFVBQVVDLGVBQWU1NUMsS0FBS2l5RCxVQUFVbGpCLFlBQWEsVUFDM0RrakIsVUFBVWppRSxLQUFLdzJCLE1BQU1pVSxPQUN4QnczQixVQUFVeGdCLG9CQUNSemdELE9BQU8yb0QsVUFBVUMsZUFBZTU1QyxLQUFLaXlELFVBQVVsakIsWUFBYSxXQUMzRGtqQixVQUFVamlFLEtBQUt3MkIsTUFBTWlVLE9BQ3hCdzNCLFVBQVV2Z0IscUJBQ1IxZ0QsT0FBTzJvRCxVQUFVQyxlQUFlNTVDLEtBQUtpeUQsVUFBVWxqQixZQUFhLFlBQzNEa2pCLFVBQVVqaUUsS0FBS3cyQixNQUFNaVUsT0FDeEJ3M0IsVUFBVXJnQixxQkFDUjVnRCxPQUFPMm9ELFVBQVVDLGVBQWU1NUMsS0FBS2l5RCxVQUFVbGpCLFlBQWEsWUFDM0RrakIsVUFBVWppRSxLQUFLdzJCLE1BQU1pVSxPQUV4QnczQixVQUFVcFksYUFDUm9ZLFVBQVUxZ0Isb0JBQ1YwZ0IsVUFBVXpnQixvQkFDVnlnQixVQUFVeGdCLHFCQUNWd2dCLFVBQVV2Z0Isc0JBQ1Z1Z0IsVUFBVXRnQix1QkFDVnNnQixVQUFVcmdCLHFCQUVMcWdCLFVBR1QvK0Msa0JBQW1CL1gsTUFDakJ3SyxNQUFNdU4sa0JBQWtCL1gsTUFFeEJBLEtBQUs4QixLQUFLLGNBQWNrVyxPQUFNZ2hDLEtBQzVCLE1BQU05Z0MsR0FBS3pILEVBQUV1b0MsR0FBRzdnQyxlQUFlOGdDLFFBQVEsU0FDMUJuOUMsS0FBSzNELE1BQU11RSxNQUFNakssSUFBSXlsQixHQUFHcmpCLEtBQUssV0FDckMyUixNQUFNRSxRQUFPLE1BR3BCMUcsS0FBSzhCLEtBQUsscUJBQXFCa1csTUFBTWxjLEtBQUt3OEMsbUJBQW1CaGtDLEtBQUt4WSxPQUVsRWtFLEtBQUs4QixLQUFLLGVBQWVrVyxNQUFNbGMsS0FBSzQ5QyxhQUFhcGxDLEtBQUt4WSxPQUN0RGtFLEtBQUs4QixLQUFLLGdCQUFnQmtXLE1BQU1sYyxLQUFLKzhDLGVBQWV2a0MsS0FBS3hZLE9BRXpEa0UsS0FBSzhCLEtBQUssZ0JBQWdCa1csT0FBTS9rQixNQUFBQSxLQUM5QixNQUFNaWxCLEdBQUt6SCxFQUFFdW9DLEdBQUc3Z0MsZUFBZThnQyxRQUFRLFNBQ2pDQyxhQUFlcDlDLEtBQUszRCxNQUFNdUUsTUFBTWpLLElBQUl5bEIsR0FBR3JqQixLQUFLLFVBQVcsQ0FDM0Rza0QsUUFBUSxVQUVKRCxhQUFhNWhCLFNBQ25CcGYsR0FBR2toQyxRQUFRLEtBQUssSUFBTXQ5QyxLQUFLNEssUUFBTyxRQUdwQzFHLEtBQUs4QixLQUFLLGFBQWFrVyxPQUFNZ2hDLEtBQzNCLE9BQVFBLEdBQUc3Z0MsY0FBY3BqQixRQUFRZ0MsTUFDL0IsSUFBSyxPQUNIK0UsS0FBSzNELE1BQU1raEQsZ0JBQWdCTCxJQUMzQixNQUNGLElBQUssT0FDSGw5QyxLQUFLM0QsTUFBTW1oRCxnQkFBZ0JOLElBQzNCLE1BQ0YsSUFBSyxRQUNIbDlDLEtBQUszRCxNQUFNb2hELGlCQUFpQlAsSUFDNUIsTUFDRixJQUFLLFFBQ0hsOUMsS0FBSzNELE1BQU1xaEQsaUJBQWlCUixJQUM1QixNQUNGLElBQUssU0FDSGw5QyxLQUFLM0QsTUFBTXNoRCxrQkFBa0JULFFBS25DaDVDLEtBQUs4QixLQUFLLFNBQVNrVyxNQUFNbGMsS0FBS3E3QyxlQUFlN2lDLEtBQUt4WSxPQUdwRCxxQkFBc0I3RixPQUNwQkEsTUFBTXlNLGlCQUNOLE1BQU1xNUMsU0FBV2pnRCxLQUFLM0QsTUFBTW1uQyxPQUM1QnhqQyxLQUFLM0QsTUFBTW1uQyxRQUFVeWMsU0FHdkIsbUJBQW9COWxELE9BQ2xCLE1BQU1paUIsR0FBS3pILEVBQUV4YSxNQUFNa2lCLGVBQWU4Z0MsUUFBUSxTQUNwQ3Q2QyxLQUFPN0MsS0FBSzNELE1BQU11RSxNQUFNakssSUFBSXlsQixHQUFHcmpCLEtBQUssV0FDMUMsSUFBSTBDLFFBQVUsTUFBUWhGLEtBQUtnSixLQUFLQyxTQUFTLGtDQUN6QyxNQUFNL0UsUUFBVSxDQUNkd2tELFVBQVduL0MsS0FBSzNELE1BQU1iLEdBQ3RCaUIsTUFBTyxLQUNQMmlELFFBQVNwL0MsS0FBSzNELE1BQU1iLEdBQ3BCcUgsS0FBTUEsS0FBS3JILElBRVR3RSxLQUFLeEQsT0FBT0gsUUFDZDFCLFFBQVF3a0QsVUFBWW4vQyxLQUFLeEQsTUFBTWhCLEdBQy9CYixRQUFROEIsTUFBUXVELEtBQUt4RCxNQUFNMkssT0FBTzNMLElBRXBDLE1BQU1VLE9BQVN6RixLQUFLeUYsT0FBT2hFLFFBQU8waEMsSUFDaEMsSUFBSyxDQUFDLFlBQWEsTUFBTyxXQUFZLGFBQWE1aEMsU0FBUzRoQyxFQUFFMytCLE1BQzVELE9BQU8sRUFFVCxHQUFJK0UsS0FBSzNELE1BQU1iLEtBQU9vK0IsRUFBRXArQixHQUN0QixPQUFPLEVBRVQsSUFBSTZqRCxTQUFVLEVBQ2QsSUFBSyxNQUFPeGxELEVBQUdDLEtBQU1DLE9BQU9DLFFBQVE0L0IsRUFBRTdnQyxLQUFLa3BCLFlBQy9CLFlBQU5wb0IsR0FBbUJBLElBQU1wRCxLQUFLb0MsS0FBSzJDLEtBQ3JDNmpELFFBQVVBLFNBQVd2bEQsSUFBTW9CLE1BQU1nbkIsbUJBQW1CbzlCLE1BR3hELE9BQU9ELFdBRVQ1akQsU0FBb0IsNkNBQ3BCLElBQUssTUFBTVksU0FBU0gsT0FDbEJULFFBQ0VBLFFBQVUsa0JBQW9CWSxNQUFNYixHQUFLLEtBQU9hLE1BQU1LLEtBQU8sWUFFakVqQixTQUFvQiw2QkFDZHVnQixPQUFPb0csT0FBTyxDQUNsQmxwQixNQUFPekMsS0FBS2dKLEtBQUtDLFNBQVMsdUNBQzFCakUsUUFDQStqQixTQUFVdGIsT0FDUixNQUFNb2IsU0FBVyxJQUFJRyxTQUFTdmIsS0FBSyxHQUFHcEUsY0FBYyxnQkFDcEQsSUFBSyxNQUFPcEQsS0FBTVcsU0FBVWlpQixTQUNiLFNBQVQ1aUIsT0FDRi9CLFFBQVF5a0QsUUFBVS9oRCxnQkFLcEI1RyxLQUFLaWlDLFdBQVdDLFlBQVksZ0JBQWlCaCtCLFNBR3JEb2lELGVBQWdCNWlELE9BQ2RBLE1BQU15TSxpQkFDTixNQUFNd1YsR0FBS3pILEVBQUV4YSxNQUFNa2lCLGVBQWU4Z0MsUUFBUSxTQUNwQ3Q2QyxLQUFPN0MsS0FBSzNELE1BQU11RSxNQUFNakssSUFBSXlsQixHQUFHcmpCLEtBQUssWUFDcENULFNBQVd1SyxLQUFLcXRDLFlBQVksQ0FBRW9RLFFBQVN0Z0QsS0FBSzNELE1BQU13TyxVQUd4RCxHQUFJdVIsR0FBR21rQyxTQUFTLFlBQWEsQ0FDM0IsTUFBTWhtQixRQUFVbmUsR0FBR282QixTQUFTLGlCQUM1QmpjLFFBQVEraUIsUUFBUSxLQUFLLElBQU0vaUIsUUFBUTV0QixlQUM5QixDQUNMLE1BQU02ekMsSUFBTTdyQyxFQUFFLG9DQUVSeTdCLE9BQVN6N0IsRUFBRSxtQ0FDakIsSUFBSyxNQUFNNDdCLEtBQUtqNEMsU0FBUzgzQyxPQUN2QkEsT0FBTzFZLE9BQ0wsb0RBQW9ENlksRUFBRTd6QywwQ0FBMEM2ekMsRUFBRWx6QyxzQkFTdEcsR0FOQW1qRCxJQUFJOW9CLE9BQU8wWSxRQUVYb1EsSUFBSTlvQixPQUNGL2lCLEVBQUUsaUNBQWlDcmMsU0FBU29pQyxZQUFZcjlCLGdCQUd0RHdGLEtBQUs5SixLQUFLQSxLQUFLc3JCLFlBQVl0TSxLQUFNLENBQ25DLE1BQU0wb0MsV0FBYTlyQyxFQUNqQiw2QkFBNkJyYyxTQUFTb2lDLFlBQVk1akIsaUJBRXBEMHBDLElBQUk5b0IsT0FBTytvQixZQUdiLE1BQU1wUSxNQUFRMTdCLEVBQUUsdUNBQ2hCLElBQUssTUFBTTQ3QixLQUFLajRDLFNBQVMrckIsV0FDdkJnc0IsTUFBTTNZLE9BQ0osa0NBQWtDamhDLEtBQUtnSixLQUFLQyxTQUFTNndDLFlBR3pEaVEsSUFBSTlvQixPQUFPMlksT0FFWGowQixHQUFHc2IsT0FBTzhvQixJQUFJRSxRQUNkdnRCLFdBQVd3dEIsa0JBQWtCSCxLQUM3QkEsSUFBSUksVUFBVSxLQUVoQnhrQyxHQUFHZ0IsWUFBWSxZQUlqQm8vQixtQkFBb0JyaUQsT0FDbEJBLE1BQU15TSxpQkFDTitOLEVBQUV4YSxNQUFNa2lCLGVBQ0wya0MsU0FBUyxNQUNUa2EsWUFBWSxNQ25QWixNQUFNQyx1QkFBdUJuQyxVQUtsQyxtQkFDRSxNQUFPLENBQ0xvQyxRQUFTLFdBUWIsNEJBZUUsT0FkZ0IvdkMsWUFBWTNjLE1BQU00YyxlQUFnQixDQUNoRHhPLFFBQVMsQ0FBQyxPQUFRLFVBQVcsT0FBUSxTQUNyQ2d1QixNQUFPLElBQ1BDLE9BQVEsSUFDUm1ZLFdBQVcsRUFDWHNELEtBQU0sQ0FDSixDQUNFQyxZQUFhLGFBQ2JDLGdCQUFpQixjQUNqQkMsUUFBUyxtQkFjakIsZUFDRSxNQUFPLDBDQUdULGtCQUNFLE1BQU8saUJBVVR4N0MsUUFBU3ZRLFFBQVUsSUFDakIwRSxHQUFHQyxjQUFjQyxLQUNmL0ksS0FBS2dKLEtBQUtDLFNBQVMscUNBRXJCLE1BQU0zRyxLQUFPMlYsTUFBTXZELFFBQVF2USxTQUV2Qm9GLEtBQUtvN0QsVUFBU3A3RCxLQUFLcTdELE1BQU0sR0FBR3prRSxPQUFTLFNBR3pDLE1BQU15MEQsU0FBV3R5RCxLQUFLQSxLQXlEdEIsT0F4REFBLEtBQUtBLEtBQU9zeUQsU0FBU3R5RCxLQUdyQkEsS0FBS3VpRSxhQUFldDdELEtBQUtzN0QsYUFDekJ2aUUsS0FBS3dpRSxNQUFRdjdELEtBQUt1N0QsTUFDbEJ4aUUsS0FBS3lpRSxRQUFVeDdELEtBQUt3N0QsUUFJcEJ6aUUsS0FBSzBpRSxZQUFjMWlFLEtBQUt3aUUsTUFBTXBqRSxPQUMxQlksS0FBS3dpRSxNQUFNenJCLFFBQU8sQ0FBQytxQixLQUFNN3RELFVBQ3ZCNnRELEtBQUthLFlBQWMxdUQsUUFBUTB1RCxZQUFjYixLQUFPN3RELFVBQ2hEMHVELGFBQ0QsRUFFTDNpRSxLQUFLNGlFLFlBQWM1aUUsS0FBS3dpRSxNQUFNcGpFLE9BQzFCWSxLQUFLd2lFLE1BQU16ckIsUUFBTyxDQUFDK3FCLEtBQU03dEQsVUFDdkI2dEQsS0FBS2EsWUFBYzF1RCxRQUFRMHVELFlBQWNiLEtBQU83dEQsVUFDaEQwdUQsYUFDRCxFQUVMM2lFLEtBQUs2aUUsY0FBZ0I3aUUsS0FBS3lpRSxRQUFRcmpFLE9BQzlCWSxLQUFLeWlFLFFBQVExckIsUUFBTyxDQUFDK3FCLEtBQU03dEQsVUFDekI2dEQsS0FBS2EsWUFBYzF1RCxRQUFRMHVELFlBQWNiLEtBQU83dEQsVUFDaEQwdUQsYUFDRCxFQUVMM2lFLEtBQUs4aUUsY0FBZ0I5aUUsS0FBS3lpRSxRQUFRcmpFLE9BQzlCWSxLQUFLeWlFLFFBQVExckIsUUFBTyxDQUFDK3FCLEtBQU03dEQsVUFDekI2dEQsS0FBS2EsWUFBYzF1RCxRQUFRMHVELFlBQWNiLEtBQU83dEQsVUFDaEQwdUQsYUFDRCxFQUVMM2lFLEtBQUt5aUUsUUFBUU0sU0FBUXZyQixJQUNmQSxFQUFFbXJCLFlBQWMzaUUsS0FBSzBpRSxZQUFhbHJCLEVBQUV3ckIsVUFDbkN4ckIsRUFBRXlyQixpQkFDUHpyQixFQUFFMHJCLFFBQVUxckIsRUFBRW1yQixhQUFlM2lFLEtBQUs4aUUsY0FDbEN0ckIsRUFBRTJyQixRQUFVM3JCLEVBQUVtckIsYUFBZTNpRSxLQUFLNmlFLGlCQUdwQzdpRSxLQUFLd2lFLE1BQU1PLFNBQVF2ckIsSUFDYkEsRUFBRW1yQixZQUFjM2lFLEtBQUs4aUUsY0FBZXRyQixFQUFFN3JDLFVBQ3JDNnJDLEVBQUV5ckIsaUJBQ1B6ckIsRUFBRTByQixRQUFVMXJCLEVBQUVtckIsYUFBZTNpRSxLQUFLNGlFLFlBQ2xDcHJCLEVBQUUyckIsUUFBVTNyQixFQUFFbXJCLGFBQWUzaUUsS0FBSzBpRSxlQUdwQzFpRSxLQUFLb2pFLFVBQVluOEQsS0FBS204RCxVQUN0QnBqRSxLQUFLcWpFLGdCQUFrQnA4RCxLQUFLbzhELGdCQUM1QnJqRSxLQUFLc2pFLGVBQWlCcjhELEtBQUtxOEQsZUFDM0J0akUsS0FBS3VqRSxpQkFBbUJ0OEQsS0FBS3M4RCxpQkFDN0J2akUsS0FBS3dqRSxhQUFldjhELEtBQUt1OEQsYUFDekJ4akUsS0FBS3FpRSxRQUFVcDdELEtBQUtvN0QsUUFDcEJyaUUsS0FBS3lqRSxxQkFBdUJ4OEQsS0FBS3k4RCw0QkFFakMxakUsS0FBSzZnRSxTQUFXbmpFLEtBQUtvQyxLQUFLeVIsS0FDbkJ2UixLQUdULG1CQUNFLE1BQU0yakUsTUFBUSxHQU1kLE9BTEExOEQsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLdWlFLGFBQWFRLFNBQVF2ckIsSUFDdkNtc0IsTUFBTTNrRSxLQUFLLElBQUk0a0UsYUFBYXBzQixJQUM1QkEsRUFBRWgwQixNQUFRbWdELE1BQU12a0UsT0FBUyxLQUUzQnVrRSxNQUFNeHJDLE1BQUssQ0FBQzEzQixFQUFHaXNCLElBQU1qc0IsRUFBRWtpRSxZQUFjajJDLEVBQUVpMkMsY0FDaENnQixNQUlULGtDQUNFLE1BQU0vOUMsS0FBTyxHQWlDYixPQWhDQW1hLFNBQVMrUCw4QkFBOEJpekIsU0FBUTdsQixHQUM3Q3QzQixLQUFLNW1CLEtBQ0gsR0FBR3RCLEtBQUtnSixLQUFLQyxTQUFTLDRCQUE0QnUyQyxFQUFFeGMsZ0JBR3hEOWEsS0FBSzVtQixLQUNILEdBQUd0QixLQUFLZ0osS0FBS0MsU0FBUyxzQkFBc0JqSixLQUFLZ0osS0FBS0MsU0FDcEQsaUJBR0ppZixLQUFLNW1CLEtBQ0gsR0FBR3RCLEtBQUtnSixLQUFLQyxTQUFTLHNCQUFzQmpKLEtBQUtnSixLQUFLQyxTQUNwRCxnQkFJSmpKLEtBQUt3MUIsS0FBS3VSLFdBQVdzK0IsU0FBUXgrRCxJQUV4QnFoQixLQUFLM21CLFNBQVNzRixFQUFFcy9ELFdBQ2hCdC9ELEVBQUVzL0QsU0FDQS9nRSxjQUNBN0QsU0FBUyxJQUFJdkIsS0FBS2dKLEtBQUtDLFNBQVMsdUJBQXVCN0QsZ0JBRTFEOGlCLEtBQUs1bUIsS0FBS3VGLEVBQUVzL0QsYUFFaEI1OEQsS0FBS3M3RCxhQUFhUSxTQUFRdnJCLElBQ3BCQSxFQUFFbDBDLE9BQ0prMEMsRUFBRWwwQyxNQUFNaWdCLE9BQU93L0MsU0FBUXgrRCxJQUNoQnFoQixLQUFLM21CLFNBQVNzRixFQUFFcy9ELFdBQVdqK0MsS0FBSzVtQixLQUFLdUYsRUFBRXMvRCxnQkFJM0NqK0MsS0FBS3VTLEtBQUsyckMsS0FBS0MsV0FBV0MsU0FHbkMsWUFDRSxPQUNFLzhELEtBQUtzN0QsYUFDRnBqRSxRQUFPcTRDLElBQU1BLEVBQUV5c0IsVUFBWXpzQixFQUFFMHNCLFVBQzdCL3JDLE1BQUssQ0FBQzEzQixFQUFHaXNCLElBQU1qc0IsRUFBRWtpRSxZQUFjajJDLEVBQUVpMkMsZUFBZ0IsR0FJeEQsY0FDRSxPQUNFMTdELEtBQUtzN0QsYUFDRnBqRSxRQUFPcTRDLEdBQUtBLEVBQUV5c0IsVUFBWXpzQixFQUFFMHNCLFVBQzVCL3JDLE1BQUssQ0FBQzEzQixFQUFHaXNCLElBQU1qc0IsRUFBRWtpRSxZQUFjajJDLEVBQUVpMkMsZUFBZ0IsR0FJeER3QixXQUFZditDLE1BQ1YsT0FBS0EsTUFBTXhtQixPQUNKd21CLEtBQUtteEIsUUFBTyxDQUFDK3FCLEtBQU03dEQsVUFDeEI2dEQsS0FBS2EsWUFBYzF1RCxRQUFRMHVELFlBQWNiLEtBQU83dEQsVUFDaEQwdUQsYUFIeUIsRUFNN0J5QixXQUFZeCtDLE1BQ1YsT0FBS0EsTUFBTXhtQixPQUNKd21CLEtBQUtteEIsUUFBTyxDQUFDK3FCLEtBQU03dEQsVUFDeEI2dEQsS0FBS2EsWUFBYzF1RCxRQUFRMHVELFlBQWNiLEtBQU83dEQsVUFDaEQwdUQsYUFIeUIsRUFNN0IwQixpQkFBa0JqQixXQUNoQixHQUFLQSxXQUFXaGtFLE9BQWhCLENBQ0Fna0UsVUFBVSxHQUFHa0IsT0FBUSxFQUVyQixJQUFLLElBQUk5Z0QsTUFBUSxFQUFHQSxNQUFRNC9DLFVBQVVoa0UsT0FBUW9rQixRQUFTLENBQ3JELE1BQU1PLFFBQVUsR0FDVndnRCxTQUFXbkIsVUFBVTUvQyxPQUN0QitnRCxTQUFTNWdFLE1BQU1vZ0IsUUFBUS9rQixLQUFLLFNBQzdCdWxFLFNBQVMxbUUsUUFBUWttQixRQUFRL2tCLEtBQUssVUFDOUJ1bEUsU0FBU0MsT0FBU3Y5RCxLQUFLbzdELFNBQVN0K0MsUUFBUS9rQixLQUFLLFFBQ2pEdWxFLFNBQVM1eEMsV0FBYTVPLFFBQVF4WSxLQUFLLEtBR2pDNjNELFVBQVVoa0UsT0FBUyxJQUFHZ2tFLFVBQVVBLFVBQVVoa0UsT0FBUyxHQUFHcWxFLE1BQU8sR0FFakVyQixVQUFVTCxTQUFRMkIsSUFDaEIsR0FBSUEsRUFBRW5DLGNBQWdCbUMsRUFBRW5DLGFBQWFuakUsT0FBUSxDQUczQyxJQUFLLElBQUk4VSxFQUFJLEVBQUdBLEVBQUl3d0QsRUFBRW5DLGFBQWFuakUsT0FBUThVLElBQUssQ0FDOUMsTUFBTXNuQixLQUFPa3BDLEVBQUVuQyxhQUFhcnVELEdBRzVCLElBQUlzakMsRUFDZ0IsaUJBQVRoYyxNQUFxQkEsZ0JBQWdCN3RCLE9BQzlDNnBDLEVBQUl2d0MsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLdWlFLGFBQWF0MUQsTUFBS3VxQyxHQUFLaGMsTUFBUWdjLEVBQUVqVixPQUN2QixnQkFBekIvRyxLQUFLN3VCLFlBQVloSixNQUMxQjZ6QyxPQUFJbHJDLEVBQ0ovRixHQUFHQyxjQUFjQyxLQUFLLHVDQUNqQit3QyxPQUFJbHJDLEVBRVBBLE1BQWFrckMsRUFDZmt0QixFQUFFbkMsYUFBYXJ1RCxHQUFLLElBQUkwdkQsYUFBYXBzQixHQUdyQ2xVLFFBQVF4dkIsTUFDTiw0REFJTjR3RCxFQUFFbkMsYUFBYXBxQyxLQUFLd3NDLHVCQUsxQixnQkFDRSxNQUFNdkIsVUFBWW44RCxLQUFLbzdELFFBQ25CcDdELEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS29qRSxVQUFVeDlDLEtBQzVCeGdCLFVBQVU2QixLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUtvakUsVUFBVXg5QyxNQUN4QyxHQUNGM2UsS0FBSzI5RCxVQUVULE9BREEzOUQsS0FBS285RCxpQkFBaUJqQixXQUNmQSxVQUdULGdCQUNFLElBQ0duOEQsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLb2pFLFVBQVV4OUMsTUFDL0IsSUFBTTNlLEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS29qRSxVQUFVeDlDLEtBQUt4bUIsT0FFekMsT0FFRixNQUFNZ2tFLFVBQVksR0FFWm9CLEtBQU92OUQsS0FBSzQ5RCxhQUNsQixJQUFJQyxvQkFBcUJDLGVBQWdCQyxnQkFpQnpDLEdBaEJzQkYsb0JBQWxCLEdBQUtOLEtBQUtwbEUsUUFDTDZILEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS2lsRSxlQUFpQlQsS0FBS3BsRSxPQURQLEVBR2pCb2xFLEtBQUtwbEUsT0FBUzZILEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS2lsRSxjQUVqQkYsZUFBeEM5OUQsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLaWxFLGVBQWlCLEdBQ2hDaCtELEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS2lsRSxlQUFpQlQsS0FBS3BsRSxPQURVLEVBR3ZDNkgsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLaWxFLGNBQWdCVCxLQUFLcGxFLE9BRzdENGxFLGdCQURFLEdBQUtGLG9CQUNXNzlELEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS29qRSxVQUFVeDlDLEtBQUt4bUIsT0FHbkQ2SCxLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUtvakUsVUFBVXg5QyxLQUFLeG1CLE9BQVMwbEUsb0JBRTVDLEdBQUtOLEtBQUtwbEUsUUFDUjZILEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS2lsRSxjQUFnQixFQUN0QyxJQUNFLElBQUl6aEQsTUFBUSxFQUNaQSxNQUFRdGxCLEtBQUtDLElBQUk4SSxLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUtpbEUsZUFDckN6aEQsUUFFQWdoRCxLQUFLeGxFLEtBQUssQ0FDUnVqQyxLQUFNdDdCLEtBQUtpK0Qsa0JBQ1hWLE1BQU0sRUFDTmpDLGFBQWMsS0FNdEIsTUFBTTRDLGVBQWlCLy9ELFVBQVU2QixLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUtvakUsV0FDckQsSUFBSyxJQUFJNS9DLE1BQVEsRUFBR0EsTUFBUXdoRCxnQkFBaUJ4aEQsUUFBUyxDQUNwRCxJQUFJK2dELFNBQVcsR0FDZixNQUFNaEMsYUFBZSxHQUVuQi8rQyxPQUFTc2hELHFCQUNUdGhELE1BQVFzaEQsb0JBQXNCSyxlQUFldi9DLEtBQUt4bUIsU0FFbERtbEUsU0FBV24vRCxVQUFVKy9ELGVBQWV2L0MsS0FBS3BDLE1BQVFzaEQsc0JBQ2pEUCxTQUFTQyxNQUFPLEVBQ2hCRCxTQUFTaEMsY0FBY1EsU0FBUXZyQixJQUN6QixNQUFRQSxHQUFHK3FCLGFBQWF2akUsS0FBS3c0QyxPQUdqQ2gwQixPQUFTdWhELGdCQUFrQnZoRCxNQUFRdWhELGVBQWlCUCxLQUFLcGxFLFNBQzNEa3pCLFlBQVlpeUMsU0FBVUMsS0FBS2hoRCxNQUFRdWhELGdCQUFpQixDQUNsRHhrQyxXQUFXLElBR2Jpa0MsS0FBS2hoRCxNQUFRdWhELGdCQUFnQnhDLGNBQWNRLFNBQVF2ckIsSUFDN0MsTUFBUUEsR0FBRytxQixhQUFhdmpFLEtBQUt3NEMsTUFHbkMrc0IsU0FBU2hDLGFBQWVBLGNBRTFCZ0MsU0FBU0QsT0FBUSxFQUNqQkMsU0FBU2EsS0FBTSxFQUNmaEMsVUFBVXBrRSxLQUFLdWxFLFVBR2pCLE9BQU9uQixVQUdULHFCQUNFLEdBQUtuOEQsS0FBS204RCxVQUNWLE9BQU9uOEQsS0FBS204RCxVQUFVbjJELE1BQUt5M0QsR0FBS0EsRUFBRTdtRSxTQUdwQyx1QkFDRSxJQUFLb0osS0FBS204RCxVQUFXLE9BQ3JCLE1BQU1pQyxZQUFjcCtELEtBQUttOEQsVUFBVTk2QixXQUFVbzhCLEdBQUtBLEVBQUU3bUUsU0FDcEQsT0FBSyxHQUFLd25FLGFBQ04sR0FBS0EsWUFDRnArRCxLQUFLbThELFVBQVVpQyxZQUFjLFFBRnBDLEVBS0YsbUJBQ0UsSUFBS3ArRCxLQUFLbThELFVBQVcsT0FDckIsTUFBTWlDLFlBQWNwK0QsS0FBS204RCxVQUFVOTZCLFdBQVVvOEIsR0FBS0EsRUFBRTdtRSxTQUNwRCxPQUFLLEdBQUt3bkUsYUFDTkEsYUFBZXArRCxLQUFLbThELFVBQVVoa0UsT0FBUyxFQUNwQzZILEtBQUttOEQsVUFBVWlDLFlBQWMsUUFGcEMsRUFLRixzQkFDRSxPQUFPcCtELEtBQUtzN0QsYUFBYStDLE9BQU16a0MsR0FBS0EsRUFBRTBrQyxjQUd4Qyx1QkFDRSxPQUFPdCtELEtBQUtzN0QsYUFBYStDLE9BQU05dEIsR0FBS0EsRUFBRWd1QixZQUFZN2dELFNBR3BELGNBQ0UsT0FBTzFkLEtBQUs2QyxLQUFLcXNCLFFBQVEsT0FBUWlzQyxlQUFlNXJDLE1BQU02ckMsU0FHeEQsc0JBQ0UsR0FBS3A3RCxLQUFLdytELGtCQUlWLEdBQUl4K0QsS0FBS284RCxnQkFBaUIsQ0FJeEIsTUFBTWQsYUFBZXQ3RCxLQUFLczdELGFBQ3BCbUQsT0FBU3orRCxLQUFLazlELFdBQVc1QixjQUMvQkEsYUFBYVEsU0FBUXZyQixJQUNuQkEsRUFBRXgzQyxLQUFLMmxFLGVBQXNCbnVCLEVBQUVtckIsWUFBYytDLE9BQXJCLFdBRXBCeitELEtBQUsyK0QsbUJBQW1CckQsb0JBQ3hCdDdELEtBQUs0K0Qsb0JBQW9CNStELEtBQUttOEQsaUJBQzlCbjhELEtBQUs2QyxLQUFLZ3BCLFFBQVEsT0FBUXN2QyxlQUFlNXJDLE1BQU02ckMsU0FBUyxTQWQ5RDk3RCxHQUFHQyxjQUFjQyxLQUFLLHNCQWtCMUIsbUJBRUUsTUFBTSs3RCxNQUFRdjdELEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBSzhsRSxlQUM5QjcrRCxLQUFLdTdELE1BQ0x2N0QsS0FBS3U3RCxPQUFPcmpFLFFBQU9xNEMsSUFBTUEsRUFBRXgzQyxLQUFLMkwsVUFFOUI4MkQsUUFBVXg3RCxLQUFLdzdELFFBYWZzRCxNQUFRLEdBRVJsRCxjQUFnQjU3RCxLQUFLazlELFdBQVcxQixTQUNoQ0ssY0FBZ0I3N0QsS0FBS205RCxXQUFXM0IsU0FDaENDLFlBQWN6N0QsS0FBS2s5RCxXQUFXM0IsT0FDOUJJLFlBQWMzN0QsS0FBS205RCxXQUFXNUIsT0FFcEMsSUFBSyxHQUFLSyxnQkFBa0IsR0FBS0MsY0FBZSxDQUU5QyxJQUFLLElBQUloeEMsSUFBTSt3QyxjQUFlL3dDLEtBQU9neEMsY0FBZWh4QyxNQUFPLENBRXpELE1BQU15eUMsU0FBVyxDQUNmaGlDLEtBQU10N0IsS0FBS2krRCxrQkFDWFYsTUFBTSxFQUNOakMsYUFBYyxJQUVpQkUsUUFDOUJ0akUsUUFBT3E0QyxHQUFLMWxCLEtBQU8wbEIsRUFBRW1yQixjQUNyQnhxQyxNQUFLLENBQUMxM0IsRUFBR2lzQixJQUFNanNCLEVBQUUrYyxJQUFNa1AsRUFBRWxQLE1BQ0h1bEQsU0FBUXZyQixHQUMvQitzQixTQUFTaEMsYUFBYXZqRSxLQUFLdzRDLEVBQUVqVixRQUUvQndqQyxNQUFNL21FLEtBQUt1bEUsVUFJYixJQUFLLElBQUkvZ0QsTUFBUSxFQUFHQSxNQUFRdmMsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLZ21FLGNBQWV4aUQsUUFDN0R1aUQsTUFBTS9tRSxLQUFLLENBQ1R1akMsS0FBTXQ3QixLQUFLaStELGtCQUNYVixNQUFNLEVBQ05qQyxhQUFjLEtBS3BCLElBQUssR0FBS0csY0FBZ0IsR0FBS0UsWUFFN0IsSUFBSyxJQUFJOXdDLElBQU00d0MsWUFBYTV3QyxLQUFPOHdDLFlBQWE5d0MsTUFBTyxDQUVyRCxNQUFNeXlDLFNBQVcsQ0FDZmhpQyxLQUFNdDdCLEtBQUtpK0Qsa0JBQ1hWLE1BQU0sRUFDTmpDLGFBQWMsSUFFaUJDLE1BQzlCcmpFLFFBQU9xNEMsR0FBSzFsQixLQUFPMGxCLEVBQUVtckIsY0FDckJ4cUMsTUFBSyxDQUFDMTNCLEVBQUdpc0IsSUFBTWpzQixFQUFFK2MsSUFBTWtQLEVBQUVsUCxNQUNIdWxELFNBQVF2ckIsR0FDL0Irc0IsU0FBU2hDLGFBQWF2akUsS0FBS3c0QyxFQUFFalYsUUFFL0J3akMsTUFBTS9tRSxLQUFLdWxFLFVBSWYsT0FBT3dCLE1BR1RiLGtCQUNFLElBQ0kzaUMsS0FEQTBqQyxRQUFTLEVBRWIsTUFBUUEsUUFDTjFqQyxLQUFPMFYsUUFBUUMsTUFBTUMsU0FBUyxJQUM5Qjh0QixPQUNFLElBQ0VoL0QsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLdWlFLGFBQWFwakUsUUFBT3E0QyxHQUFLQSxFQUFFalYsTUFBUUEsT0FBTW5qQyxRQUMvRCxJQUNFNkgsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLb2pFLFVBQVV4OUMsS0FBS3ptQixRQUFPcTRDLEdBQUtBLEVBQUVqVixNQUFRQSxPQUFNbmpDLE9BR3JFLE9BQU9takMsS0FJVHJmLGtCQUFtQi9YLE1BQ2pCd0ssTUFBTXVOLGtCQUFrQi9YLE1BSXhCQSxLQUFLeVosR0FBRyxXQUFZLGNBQWU4RixTQUFTeVAsYUFBYTFhLEtBQUt4WSxPQUU5RGtFLEtBQ0c4QixLQUFLLGdCQUNMMlgsR0FBRyxhQUFheGpCLE9BQVM2RixLQUFLaS9ELHdCQUF3QjlrRSxTQUN6RCtKLEtBQ0c4QixLQUFLLGdCQUNMMlgsR0FBRyxZQUFZeGpCLE9BQVM2RixLQUFLaS9ELHdCQUF3QjlrRSxTQUN4RCtKLEtBQ0c4QixLQUFLLGdCQUNMMlgsR0FBRyxhQUFheGpCLE9BQVM2RixLQUFLay9ELHdCQUF3Qi9rRSxTQUN6RCtKLEtBQ0c4QixLQUFLLGdCQUNMMlgsR0FBRyxRQUFReGpCLE9BQVM2RixLQUFLay9ELHdCQUF3Qi9rRSxTQUVwRCtKLEtBQUs4QixLQUFLLFdBQVdrVyxNQUFNbGMsS0FBS20vRCxjQUFjM21ELEtBQUt4WSxPQUNuRGtFLEtBQUs4QixLQUFLLHVCQUF1QmtXLE1BQU1sYyxLQUFLby9ELHFCQUFxQjVtRCxLQUFLeFksT0FDdEVrRSxLQUFLOEIsS0FBSyxlQUFla1csTUFBTWxjLEtBQUtxL0QsYUFBYTdtRCxLQUFLeFksT0FDdERrRSxLQUFLOEIsS0FBSyxrQkFBa0JrVyxNQUFNbGMsS0FBS3MvRCxnQkFBZ0I5bUQsS0FBS3hZLE9BRTVEa0UsS0FDRzhCLEtBQUssb0JBQ0wyWCxHQUFHLGFBQWF4akIsT0FBUzZGLEtBQUtpL0Qsd0JBQXdCOWtFLFNBQ3pEK0osS0FDRzhCLEtBQUssb0JBQ0wyWCxHQUFHLFlBQVl4akIsT0FBUzZGLEtBQUtpL0Qsd0JBQXdCOWtFLFNBQ3hEK0osS0FDRzhCLEtBQUssb0JBQ0wyWCxHQUFHLGFBQWF4akIsT0FBUzZGLEtBQUtrL0Qsd0JBQXdCL2tFLFNBQ3pEK0osS0FDRzhCLEtBQUssb0JBQ0wyWCxHQUFHLFFBQVF4akIsT0FBUzZGLEtBQUtrL0Qsd0JBQXdCL2tFLFNBRXBEK0osS0FBSzhCLEtBQUssYUFBYWtXLE1BQU1sYyxLQUFLdS9ELGtCQUFrQi9tRCxLQUFLeFksT0FFekRrRSxLQUFLOEIsS0FBSyxxQkFBcUJrVyxNQUFNbGMsS0FBS3cvRCxtQkFBbUJobkQsS0FBS3hZLE9BRWxFa0UsS0FBSzhCLEtBQUssV0FBV2tXLE1BQU1sYyxLQUFLeS9ELGVBQWVqbkQsS0FBS3hZLE9BRXBEa0UsS0FBSzhCLEtBQUssbUJBQW1Ca1csTUFBTWxjLEtBQUswL0QsaUJBQWlCbG5ELEtBQUt4WSxPQUU5RGtFLEtBQUs4QixLQUFLLGtCQUFrQmtXLE1BQU1sYyxLQUFLMi9ELHFCQUFxQm5uRCxLQUFLeFksT0FDakVrRSxLQUFLOEIsS0FBSyxvQkFBb0JrVyxNQUFNbGMsS0FBSzQvRCx1QkFBdUJwbkQsS0FBS3hZLE9BQ3JFa0UsS0FBSzhCLEtBQUssV0FBV2tXLE1BQU1sYyxLQUFLOHJCLFVBQVV0VCxLQUFLeFksT0FFbkIsSUFBSTYvRCxTQUFTLENBQ3ZDbjFCLGFBQWMsZUFDZG8xQixVQUFXLENBQUVDLEtBQU0vL0QsS0FBS2dnRSxtQkFBbUJ4bkQsS0FBS3hZLFNBRTlCd1ksS0FBS3RVLEtBQUssSUFROUIsR0FOK0IsSUFBSTI3RCxTQUFTLENBQzFDbjFCLGFBQWMsbUJBQ2RvMUIsVUFBVyxDQUFFQyxLQUFNLy9ELEtBQUt1L0Qsa0JBQWtCL21ELEtBQUt4WSxTQUUxQndZLEtBQUt0VSxLQUFLLElBRTdCbEUsS0FBS283RCxRQUFTLENBQ2tCLElBQUl5RSxTQUFTLENBQzdDcDFCLGFBQWMscUJBQ2RDLGFBQWMsa0JBQ2R1MUIsWUFBYSxDQUNYQyxVQUFXbGdFLEtBQUttZ0UsOEJBQThCM25ELEtBQUt4WSxNQUNuRCsvRCxLQUFNLy9ELEtBQUtvZ0UsNkJBQTZCNW5ELEtBQUt4WSxPQUUvQzgvRCxVQUFXLENBQ1RJLFVBQVdsZ0UsS0FBS3FnRSw2QkFBNkI3bkQsS0FBS3hZLE1BQ2xEKy9ELEtBQU0vL0QsS0FBS3NnRSw0QkFBNEI5bkQsS0FBS3hZLE1BQzVDdWdFLFNBQVV2Z0UsS0FBS3dnRSxhQUFhaG9ELEtBQUt4WSxTQUdYd1ksS0FBS3RVLEtBQUssSUFFcENBLEtBQ0c4QixLQUFLLG1CQUNMMlgsR0FBRyxhQUFheGpCLE9BQVM2RixLQUFLeWdFLGFBQWF0bUUsVUFTbER1bUUsZUFBZ0J4aUMsV0FBYSxJQUczQixJQUFJbmxDLEtBRE8sSUFBSTJ6QixpQkFBaUIxc0IsS0FBS3lzQixLQUFNLENBQUVrMEMsUUFBUzNnRSxLQUFLMmdFLFVBQzdDaDBDLFdBWWQsR0FYZ0I1ekIsS0FBWm1sQyxXQUFtQjdTLFlBQVl0eUIsS0FBTW1sQyxZQUM3QnJSLGFBQWE5ekIsTUFJdkJpSCxLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUtvakUsV0FBV3g5QyxNQUFNeG1CLFFBQ3JDWSxLQUFLQSxLQUFLaWxFLGNBQWdCaCtELEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS29qRSxVQUFVeDlDLEtBQUt4bUIsU0FFN0RZLEtBQUtBLEtBQUtpbEUsY0FBZ0JoK0QsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLb2pFLFVBQVV4OUMsS0FBS3htQixRQUczRFksS0FBS0EsS0FBS3VpRSxhQUFjLENBQzFCLE1BQU1BLGFBQWVuOUQsVUFBVTZCLEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS3VpRSxjQUVuRCxJQUFLLE1BQU96aEUsRUFBR0MsS0FBTUMsT0FBT0MsUUFBUWpCLEtBQUtBLEtBQUt1aUUsY0FBZSxDQUMzRCxNQUFNLytDLE1BQVErK0MsYUFBYWo2QixXQUFVa1AsR0FBS0EsRUFBRWpWLE1BQVF6aEMsSUFDcEQsSUFBSyxHQUFLMGlCLE1BQU9qZCxHQUFHQyxjQUFjc04sTUFBTSxtQ0FDbkMsQ0FDSCxNQUFNK3pELFNBQVd0RixhQUFhLytDLE9BQ3hCc2tELFFBQVVDLE1BQU1obkUsR0FDdEJ1eEIsWUFBWXUxQyxTQUFVQyxTQUN0QnZGLGFBQWEvK0MsT0FBU3FrRCxVQUkxQjduRSxLQUFLQSxLQUFLdWlFLGFBQWVBLGFBRzNCLEdBQUl2aUUsS0FBS29qRSxVQUFXLENBQ2xCLE1BQU1BLFVBQVloK0QsVUFBVTZCLEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS29qRSxVQUFVeDlDLE1BRTFELElBQUssTUFBTzdpQixJQUFLdUIsU0FBVXRELE9BQU9DLFFBQVFqQixLQUFLb2pFLFdBQVksQ0FDekQsTUFBTTRFLGNBQWdCNUUsVUFBVTk2QixXQUFVbzhCLEdBQUtBLEVBQUVuaUMsTUFBUXgvQixNQUN6RCxJQUFLLEdBQUtpbEUsY0FDUnpoRSxHQUFHQyxjQUFjc04sTUFBTSxpQ0FDcEIsQ0FDSCxNQUFNbTBELGlCQUFtQjdFLFVBQVU0RSxlQUM3QkYsUUFBVUMsTUFBTXpqRSxPQUN0Qmd1QixZQUFZMjFDLGlCQUFrQkgsU0FDOUIxRSxVQUFVNEUsZUFBaUJDLHlCQUl4QmpvRSxLQUFLb2pFLFVBQ1pwakUsS0FBS0EsS0FBS29qRSxVQUFZLENBQUV4OUMsS0FBTXc5QyxXQU1oQyxPQUFPOEUsY0FBY2xvRSxNQVF2QixvQkFBcUJvQixNQUFPbWxCLFVBQzFCLE1BQU1uUixPQUFTaFUsTUFBTWtpQixjQUVyQixHQUQrQyxTQUE5QmxPLFFBQVFsVixTQUFTczFDLFNBQ3BCLENBQ1osTUFBTyxDQUFFdHpDLEtBQU1xZ0MsS0FBTTRsQyxRQUFTbm9FLE1BQVFvVixPQUFPelIsS0FBS1QsTUFBTSxLQUNsRHNnQixNQUFRdmMsS0FBS21oRSxxQkFBcUI3bEMsTUFDeEMsR0FDVyxpQkFBVHJnQyxPQUNDK0ksTUFBTXVZLFFBQ0ssZ0JBQVoya0QsU0FFYSxTQUFUbm9FLEtBQWlCLENBRW5CLE1BQU11aUUsYUFBZXQ3RCxLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUt1aUUsYUFDckNuOUQsVUFBVTZCLEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS3VpRSxjQUM5QixHQU9KLE9BTklBLGFBQWEvK0MsT0FBT2dpRCxtQkFDZmpELGFBQWEvK0MsT0FBT2dpRCxXQUFXL2lFLFVBQy9COC9ELGFBQWEvK0MsT0FBT2dpRCxXQUFXdGpFLE1BQ2pDcWdFLGFBQWEvK0MsT0FBT2dpRCxXQUFhLEdBQ3hDakQsYUFBYS8rQyxPQUFPZ2lELFdBQVc3aEUsS0FBT3lSLE9BQU85USxpQkFDdkMyQyxLQUFLNkMsS0FBS3NILE9BQU8sQ0FBRSxvQkFBcUJteEQsZ0JBS3BENXNELE1BQU15MEMsY0FBY2hwRCxNQUFPbWxCLFVBRzdCLGlCQUE4QjlJLElBQUt0UyxLQUFNbkwsTUFDdkMsTUFBTStsRSxNQUFRNTZELEtBQUs4QixLQUFLLFVBQ3hCLElBQUs4NEQsTUFBTTNtRSxPQUFRLE9BQ25CLE1BQU0wRSxRQUFVOFgsRUFBRW1xRCxPQUFPOTRELEtBQUssV0FDOUIsSUFBS25KLFFBQVExRSxPQUFRLE9BRXJCLE1BQU1pcEUsaUJBQW1Ccm9FLEtBQUtBLEtBQUtzb0Usb0JBSW5DLElBQUlDLDBCQUZnQnprRSxRQUFRLEdBQUcwa0UsV0FDZHpDLE1BQU0sR0FBRzBDLFlBQytCLEVBQ3JERiwwQkFBNEIsSUFBR0EsMEJBQTRCLEdBRS9ELE1BQU1HLGFBQWUzQyxNQUFNLElBRXRCLEdBQUtzQyxrQkFDUkssYUFBYUMsU0FBUyxDQUNwQnoxRCxJQUFLLEVBQ0xELEtBQU1vMUQsaUJBQ05PLFNBQVUsWUFJZEYsYUFBYUMsU0FBUyxDQUNwQnoxRCxJQUFLLEVBQ0xELEtBQU1zMUQsMEJBQ05LLFNBQVUsV0FNZCxlQUFnQm5yRCxJQUFLdFMsTUFDbkJzUyxJQUFJM1QsS0FBS3NILE9BQU8sQ0FBRSw0QkFBNkIsSUFpQ2pEZzNELHFCQUFzQjdsQyxNQUNwQixPQUFPdDdCLEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS3VpRSxhQUFhajZCLFdBQVVrUCxHQUFLQSxFQUFFalYsTUFBUUEsT0FHbkVzbUMsa0JBQW1CdG1DLE1BQ2pCLE9BQU90N0IsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLb2pFLFVBQVV4OUMsS0FBSzBpQixXQUFVa1AsR0FBS0EsRUFBRWpWLE1BQVFBLE9BR3JFK0YsVUFBVzFpQixLQUFNMmMsTUFDZixPQUFPM2MsS0FBSzBpQixXQUFVa1AsR0FBS0EsRUFBRWpWLE1BQVFBLE9BR3ZDLDBCQUEyQjNjLE1BRXpCLE1BQU1rakQsWUFBYzFqRSxVQUFVd2dCLE1BQzlCa2pELFlBQVkvRixTQUFRMkIsSUFNbEIsVUFKT0EsRUFBRS94QyxrQkFDRit4QyxFQUFFSixhQUNGSSxFQUFFRCxZQUNGQyxFQUFFVSxJQUNMVixFQUFFbkMsY0FBZ0JtQyxFQUFFbkMsYUFBYW5qRSxPQUNuQyxJQUFLLElBQUk4VSxFQUFJLEVBQUdBLEVBQUl3d0QsRUFBRW5DLGFBQWFuakUsT0FBUThVLElBQ3JDd3dELEVBQUVuQyxhQUFhcnVELEdBQUdsVSxNQUFNdWlDLE9BQzFCbWlDLEVBQUVuQyxhQUFhcnVELEdBQUt3d0QsRUFBRW5DLGFBQWFydUQsR0FBR2xVLEtBQUt1aUMsZUFJN0N0N0IsS0FBSzZDLEtBQUtzSCxPQUFPLENBQUUsc0JBQXVCMDNELGNBR2xELHlCQUEwQmxqRCxNQUN4QixNQUFNbWpELGlCQUFtQjloRSxLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUt1aUUsYUFDekNuOUQsVUFBVTZCLEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS3VpRSxjQUM5QixHQUNKMzhDLEtBQUttOUMsU0FBUXZyQixJQUNYLElBQUl4M0MsS0FFRkEsS0FEd0IsZ0JBQXRCdzNDLEVBQUU3cUMsWUFBWWhKLEtBQ1Q2ekMsRUFBRXgzQyxLQUNHdzNDLEVBQ2QsTUFBTWgwQixNQUFRdmMsS0FBS3FoQyxVQUFVeWdDLGlCQUFrQi9vRSxLQUFLdWlDLE9BQy9DLElBQU0vZSxPQUNUdWxELGlCQUFpQi9wRSxLQUFLZ0IsTUFDdEJ1RyxHQUFHQyxjQUFjQyxLQUFLLDZCQUV0QnNpRSxpQkFBaUJ2bEQsT0FBU3hqQixjQUd4QmlILEtBQUs2QyxLQUFLc0gsT0FBTyxDQUFFLG9CQUFxQjIzRCxtQkFJaEQsZ0JBQWlCM25FLE9BQ2YsTUFBTWdVLE9BQVNoVSxNQUFNa2lCLGNBS2Y3VCxPQUFTMkYsT0FBT2dtQixhQUFhLFVBQzdCcDdCLEtBQU84ekIsYUFBYSxDQUN4QixDQUFDcmtCLFNBQVUyRixPQUFPeFUsVUFBVTRqQixTQUFTLGlCQUV2QyxHQUFJeGtCLEtBQUtvakUsVUFBVyxDQUNsQixNQUFNQSxVQUFZaCtELFVBQVU2QixLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUtvakUsVUFBVXg5QyxNQUMxRCxJQUFLLE1BQU83aUIsSUFBS3VCLFNBQVV0RCxPQUFPQyxRQUFRakIsS0FBS29qRSxXQUFZLENBQ3pELE1BQU00RSxjQUFnQjVFLFVBQVU5NkIsV0FBVW84QixHQUFLQSxFQUFFbmlDLE1BQVF4L0IsTUFDekQsSUFBSyxHQUFLaWxFLGNBQ1J6aEUsR0FBR0MsY0FBY3NOLE1BQU0saUNBQ3BCLENBQ0gsTUFBTW0wRCxpQkFBbUI3RSxVQUFVNEUsZUFDN0JGLFFBQVVDLE1BQU16akUsT0FDdEJndUIsWUFBWTIxQyxpQkFBa0JILFNBQzlCMUUsVUFBVTRFLGVBQWlCQyx3QkFHekJoaEUsS0FBSzQrRCxvQkFBb0J6QyxZQUluQyw2QkFBOEJoaUUsT0FDNUIsTUFFTW1oQyxLQUZTbmhDLE1BQU1raUIsY0FDVTFHLFFBQVEsc0JBQ1YxYyxRQUFRcWlDLEtBQy9CNmdDLFVBQVloK0QsVUFBVTZCLEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS29qRSxVQUFVeDlDLE1BQ3BEb2lELGNBQWdCL2dFLEtBQUtxaEMsVUFBVTg2QixVQUFXN2dDLE1BQ2hENmdDLFVBQVU0RSxlQUFlZ0IsVUFBWTVGLFVBQVU0RSxlQUFlZ0IsU0FDekQ1RixVQUFVNEUsZUFBZWlCLGtCQUM1QjdGLFVBQVU0RSxlQUFlaUIsZ0JBQWtCLENBQ3pDQyxTQUFTLFVBR1BqaUUsS0FBSzQrRCxvQkFBb0J6QyxXQUdqQywyQkFBNEJoaUUsT0FDMUIsTUFBTWdVLE9BQVNoVSxNQUFNa2lCLGNBRWZpZixLQURrQm50QixPQUFPd0gsUUFBUSxzQkFDVjFjLFFBQVFxaUMsS0FDL0I2Z0MsVUFBWWgrRCxVQUFVNkIsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLb2pFLFVBQVV4OUMsTUFDcERvaUQsY0FBZ0IvZ0UsS0FBS3FoQyxVQUFVODZCLFVBQVc3Z0MsTUFDM0M2Z0MsVUFBVTRFLGVBQWVpQixrQkFDNUI3RixVQUFVNEUsZUFBZWlCLGdCQUFrQixJQUN6Qzd6RCxPQUFPeFUsVUFBVTRqQixTQUFTLFlBQzVCNCtDLFVBQVU0RSxlQUFlaUIsZ0JBQWdCQyxTQUFXOUYsVUFDbEQ0RSxlQUNBaUIsZ0JBQWdCQyxRQUNsQjlGLFVBQVU0RSxlQUFlaUIsZ0JBQWdCRSxRQUFVL0YsVUFDakQ0RSxlQUNBaUIsZ0JBQWdCQyxTQUNUOXpELE9BQU94VSxVQUFVNGpCLFNBQVMsWUFDbkM0K0MsVUFBVTRFLGVBQWVpQixnQkFBZ0JFLFFBQVUvRixVQUNqRDRFLGVBQ0FpQixnQkFBZ0JFLE9BQ2xCL0YsVUFBVTRFLGVBQWVpQixnQkFBZ0JDLFNBQVc5RixVQUNsRDRFLGVBQ0FpQixnQkFBZ0JFLGNBRWRsaUUsS0FBSzQrRCxvQkFBb0J6QyxXQUdqQyx1QkFBd0JoaUUsT0FDdEIsTUFBTWdVLE9BQVNoVSxNQUFNa2lCLGNBQ2Z5aUQsTUFBUTN3RCxPQUFPd0gsUUFBUSxnQkFDdkIzVixLQUFLNkMsS0FBS3NILE9BQU8sQ0FBRSwyQkFBNEIyMEQsTUFBTXFELGFBQzNELE1BQU12ckUsT0FBU3VYLE9BQU94VSxVQUFVNGpCLFNBQVMsVUFDbkM0K0MsVUFBWWgrRCxVQUFVNkIsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLb2pFLFVBQVV4OUMsTUFDMUR3OUMsVUFBVUwsU0FBUTJCLEdBQU1BLEVBQUU3bUUsUUFBUyxJQUNuQyxNQUNNMGtDLEtBRGtCbnRCLE9BQU93SCxRQUFRLG1CQUNWMWMsUUFBUXFpQyxLQUMvQnlsQyxjQUFnQi9nRSxLQUFLcWhDLFVBQVU4NkIsVUFBVzdnQyxPQUMzQyxHQUFLeWxDLGdCQUNIbnFFLFNBQVF1bEUsVUFBVTRFLGVBQWVucUUsUUFBUyxTQUN6Q29KLEtBQUs0K0Qsb0JBQW9CekMsWUFJbkMscUJBQXNCaGlFLE9BQ3BCLE1BQ01xSSxPQURTckksTUFBTWtpQixjQUNDcGpCLFNBQVN1SixPQUMvQixHQUFLQSxPQUNMLE9BQVFBLFFBQ04sSUFBSyxPQUNILElBQ0d3QixNQUFNaEUsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLb2pFLFVBQVU3a0UsUUFDckMwSSxLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUtvakUsVUFBVTdrRSxNQUFRLEVBQ3RDLENBQ0EsTUFBTTZrRSxVQUFZM3VCLE1BQU00MEIsTUFDdEIsS0FDQTUwQixNQUFNeHRDLEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS29qRSxVQUFVN2tFLFFBQ3BDbUgsS0FBSSxXQUNKLE1BQU8sQ0FBRTY4QixLQUFNMFYsUUFBUUMsTUFBTUMsU0FBUyxRQUV4Q2lyQixVQUFVLEdBQUd6L0QsS0FBTyxRQUNoQnkvRCxVQUFVaGtFLE9BQVMsSUFBR2drRSxVQUFVQSxVQUFVaGtFLE9BQVMsR0FBR3VFLEtBQU8sYUFDM0RzRCxLQUFLNCtELG9CQUFvQnpDLFdBR2pDLE1BQ0YsSUFBSyxRQUNIbmdELE9BQU80aUIsUUFBUSxDQUNiMWxDLE1BQU8sR0FBR3pDLEtBQUtnSixLQUFLQyxTQUFTLDRCQUM3QmpFLFFBQVMsTUFBTWhGLEtBQUtnSixLQUFLQyxTQUFTLG9DQUNsQ20vQixJQUFLMW5DLGdCQUNHNkksS0FBSzQrRCxvQkFBb0IsVUFDekI1K0QsS0FBSzZDLEtBQUt3cUIsVUFBVSxPQUFROHRDLGVBQWU1ckMsTUFBTTZyQyxZQUczRCxNQUVGLElBQUssWUFDSHAvQyxPQUFPNGlCLFFBQVEsQ0FDYjFsQyxNQUFPLEdBQUd6QyxLQUFLZ0osS0FBS0MsU0FBUywyQkFDN0JqRSxRQUFTLE1BQU1oRixLQUFLZ0osS0FBS0MsU0FBUyxtQ0FDbENtL0IsSUFBSyxJQUFNNytCLEtBQUtxaUUsa0JBRWxCLE1BRUYsSUFBSyxVQUNIcm1ELE9BQU80aUIsUUFBUSxDQUNiMWxDLE1BQU8sR0FBR3pDLEtBQUtnSixLQUFLQyxTQUFTLDhCQUM3QmpFLFFBQVMsTUFBTWhGLEtBQUtnSixLQUFLQyxTQUN2QixzQ0FFRm0vQixJQUFLMW5DLFVBQ0gsTUFBTWdsRSxVQUFZbjhELEtBQUttOEQsVUFBVWprRSxRQUFPdWxFLElBQU1BLEVBQUVGLE9BQ2hELElBQUssSUFBSXR3RCxFQUFJLEVBQUdBLEVBQUlrdkQsVUFBVWhrRSxPQUFROFUsSUFDaENrdkQsVUFBVWx2RCxHQUFHcXVELGVBQWNhLFVBQVVsdkQsR0FBR3F1RCxhQUFlLFVBRXZEdDdELEtBQUs0K0Qsb0JBQW9CekMsaUJBQ3pCbjhELEtBQUs2QyxLQUFLd3FCLFVBQVUsT0FBUTh0QyxlQUFlNXJDLE1BQU02ckMsYUFVakUrRSw4QkFBK0JtQyxVQUM3QixRQUFJN3JFLEtBQUtvQyxLQUFLeVIsS0FJaEI4MUQsNkJBQThCa0MsVUFDNUIsUUFBSTdyRSxLQUFLb0MsS0FBS3lSLEtBSWhCLG1DQUFvQ2k0RCxXQUNsQyxNQUNNaEosU0FBVyxDQUFFaitCLEtBREppbkMsVUFBVWxtRCxjQUNPcGpCLFFBQVFxaUMsTUFDeENpbkMsVUFBVXIzRCxhQUFhNjlCLFFBQVEsYUFBYzF2QyxLQUFLQyxVQUFVaWdFLFdBRzlELGtDQUFtQ2dKLFdBQ2pDampFLEdBQUdDLGNBQWNtSixLQUFLLFdBQ3RCMUksS0FBS3lnRSxhQUFhOEIsV0FFbEIsTUFDTUMsYUFEU0QsVUFBVWxtRCxjQUNHcGpCLFFBQVFxaUMsS0FDOUI5UCxXQUFhKzJDLFVBQVVyM0QsYUFBYUMsUUFBUSxjQUM1Q3BTLEtBQU9NLEtBQUs0UixNQUFNdWdCLFlBQ3hCbHNCLEdBQUdDLGNBQWNtSixLQUNmLHNCQUFzQjNQLEtBQUt1aUMsc0JBQXNCa25DLHNCQUU3Q3hpRSxLQUFLeWlFLGdCQUFnQjFwRSxLQUFLdWlDLEtBQU1rbkMsY0FHeENFLFlBQWFILFdBQ1h2aUUsS0FBS3dnRSxhQUFhK0IsV0FHcEIvQixhQUFjK0IsV0FDR0EsVUFBVWxtRCxjQUNsQjFpQixVQUFVQyxJQUFJLGFBR3ZCNm1FLGFBQWM4QixXQUNHQSxVQUFVbG1ELGNBQ2xCMWlCLFdBQVdnVCxPQUFPLGFBRzNCLHlCQUEwQnhTLE9BQ3hCLE1BQ01taEMsS0FEU25oQyxNQUFNa2lCLGNBQ0RwakIsU0FBU3FpQyxLQUN2QjlQLFdBQWFyeEIsTUFBTStRLGFBQWFDLFFBQVEsY0FDeENwUyxLQUFPTSxLQUFLNFIsTUFBTXVnQixrQkFDbEJ4ckIsS0FBSzJpRSxpQkFBaUI1cEUsS0FBTXVpQyxNQUdwQyx3QkFBeUJuaEMsT0FDdkIsSUFBSXBCLEtBQU8sR0FDWCxHQUFJb0IsTUFBTStRLGFBQWMsQ0FDdEIsTUFBTXNnQixXQUFhcnhCLE1BQU0rUSxhQUFhQyxRQUFRLGNBQzlDcFMsS0FBT00sS0FBSzRSLE1BQU11Z0Isa0JBRWR4ckIsS0FBSzRpRSxlQUFlN3BFLE1BRzVCLHlCQUEwQm9CLE9BQ3hCLE1BRU1taEMsS0FGU25oQyxNQUFNa2lCLGNBQ2ExRyxRQUFRLGdCQUNWMWMsUUFBUXFpQyxLQUNsQy9lLE1BQVF2YyxLQUFLbWhFLHFCQUFxQjdsQyxNQUNsQ2dnQyxhQUFldDdELEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS3VpRSxhQUNyQ245RCxVQUFVNkIsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLdWlFLGNBQzlCLEdBRUV1SCxZQUFjLElBQUlsRyxhQUFhckIsYUFBYS8rQyxRQUNsRCxHQUFJc21ELFlBQVl0RSxXQUFXdUUsT0FBUSxDQUNqQyxNQUFNaHNFLEtBQU8sSUFBSXFKLFVBQ2pCckosS0FBS3FRLE9BQVNuSCxLQUFLNkMsS0FBS3k0QixLQUN4QnVuQyxZQUFZOXBFLEtBQUsya0IsUUFBUyxFQUMxQm1sRCxZQUFZOXBFLEtBQUtncUUsU0FBV2pzRSxLQUFLd2tDLEtBQ2pDeGtDLEtBQUt1RixNQUFRd21FLFlBQVl4bUUsTUFBTUMsVUFDMUJuQyxNQUFNMk0sVUFBWSs3RCxZQUFZeG1FLE1BQU0ybUUsU0FDdkNsc0UsS0FBS2toQyxTQUFVLEVBQ2ZsaEMsS0FBS21zRSxZQUFjLGFBQ25CbnNFLEtBQUtvc0UsaUJBQW1CLCtDQUd0QkwsWUFBWXRFLFdBQVc0RSx3QkFDbkJyc0UsS0FBS3NuQixtQkFBbUJ5a0QsWUFBWXRFLFdBQVc2RSxJQUFJdG5FLFdBQ25EaEYsS0FBS3dPLFlBQ1h1OUQsWUFBWTlwRSxLQUFLd2xFLFdBQVc4RSxlQUFpQnZzRSxLQUFLczlDLGdCQUN6Q3l1QixZQUFZdEUsV0FBV2hyQixTQUNoQ3o4QyxLQUFLOEwsTUFBUWlnRSxZQUFZdEUsV0FBVzZFLFVBQzlCdHNFLEtBQUtBLGFBQ0xBLEtBQUt3TyxZQUNYdTlELFlBQVk5cEUsS0FBS3dsRSxXQUFXOEUsZUFBaUJ2c0UsS0FBS3M5QyxnQkFDekN5dUIsWUFBWXRFLFdBQVcvcUIsb0JBQzFCMThDLEtBQUsrc0MsY0FBY2cvQixZQUFZdEUsV0FBVzZFLElBQUl0bkUsV0FDOUNoRixLQUFLd08sWUFDWHU5RCxZQUFZOXBFLEtBQUt3bEUsV0FBVzhFLGVBQWlCdnNFLEtBQUtzOUMscUJBRS9DLEdBQUl5dUIsWUFBWXRFLFdBQVc3NEIsTUFBTyxDQUN2QyxNQUFNNDlCLFNBQVcsQ0FDZnZnRSxTQUFVOC9ELFlBQVl0RSxXQUFXNzRCLE1BQ2pDL0YsWUFBYWtqQyxZQUFZdEUsV0FBVzdoRSxLQUNwQzBxQixVQUFXeTdDLFlBQVlubUUsS0FBT21tRSxZQUFZbm1FLFVBQU8ySSxHQUUvQ3c5RCxZQUFZVSxXQUFVRCxTQUFTam5FLE1BQVF3bUUsWUFBWXhtRSxNQUFNQyxVQUM3RCxNQUFNeEYsS0FBT3FKLFVBQVV6RSxPQUFPNG5FLFVBQzlCeHNFLEtBQUtxUSxPQUFTbkgsS0FBSzZDLEtBQUt5NEIsV0FDbEJ4a0MsS0FBS0EsYUFDTEEsS0FBS3dPLFlBQ1h1OUQsWUFBWTlwRSxLQUFLd2xFLFdBQVc4RSxlQUFpQnZzRSxLQUFLczlDLGVBQ2xEeXVCLFlBQVk5cEUsS0FBSzJrQixRQUFTLEVBQzFCbWxELFlBQVk5cEUsS0FBS2dxRSxTQUFXanNFLEtBQUt3a0MsV0FHN0J0N0IsS0FBSzZDLEtBQUtzSCxPQUFPLENBQUUsb0JBQXFCbXhELGVBR2hEMkQsd0JBQXlCOWtFLE9BQ1JBLE1BQU1raUIsY0FDZDFpQixVQUFVQyxJQUFJLGFBR3ZCc2xFLHdCQUF5Qi9rRSxPQUNSQSxNQUFNa2lCLGNBQ2QxaUIsVUFBVWdULE9BQU8sYUFHMUIsb0JBQXFCeFMsT0FJbkIsTUFFTW1oQyxLQUZTbmhDLE1BQU1raUIsY0FDTTFHLFFBQVEsZ0JBQ1YxYyxRQUFRcWlDLEtBQzNCL2UsTUFBUXZjLEtBQUttaEUscUJBQXFCN2xDLE1BQ2xDZ2dDLGFBQWV0N0QsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLdWlFLGFBQ3JDbjlELFVBQVU2QixLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUt1aUUsY0FDOUIsR0FDSkEsYUFBYS8rQyxPQUFPaW5ELFFBQVVsSSxhQUFhLytDLE9BQU9pbkQsYUFDNUN4akUsS0FBSzZDLEtBQUtzSCxPQUFPLENBQUUsb0JBQXFCbXhELGVBR2hELHNCQUF1Qm5oRSxPQUNyQixNQUVNbWhDLEtBRlNuaEMsTUFBTWtpQixjQUNDMUcsUUFBUSxXQUNWMWMsUUFBUXFpQyxLQUN0Qi9lLE1BQVF2YyxLQUFLbWhFLHFCQUFxQjdsQyxNQUNsQ2dnQyxhQUFldDdELEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS3VpRSxhQUNyQ245RCxVQUFVNkIsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLdWlFLGNBQzlCLFVBQ2dCQSxhQUFhLytDLE9BQ2RqZ0IsZUFDYjBELEtBQUs2QyxLQUFLc0gsT0FBTyxDQUFFLG9CQUFxQm14RCxlQUdoRCwyQkFBNEJuaEUsT0FDMUIsTUFFTW1oQyxLQUZTbmhDLE1BQU1raUIsY0FDTTFHLFFBQVEsZ0JBQ1YxYyxRQUFRcWlDLEtBQzNCL2UsTUFBUXZjLEtBQUttaEUscUJBQXFCN2xDLE1BQ2xDZ2dDLGFBQWV0N0QsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLdWlFLGFBQ3JDbjlELFVBQVU2QixLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUt1aUUsY0FDOUIsR0FDSkEsYUFBYXhyQyxPQUFPdlQsTUFBTyxTQUNyQnZjLEtBQUs2QyxLQUFLc0gsT0FBTyxDQUFFLG9CQUFxQm14RCxlQUdoRCxtQkFBb0JuaEUsT0FDbEIsTUFFTW1oQyxLQUZTbmhDLE1BQU1raUIsY0FDTTFHLFFBQVEsZ0JBQ1YxYyxRQUFRcWlDLEtBQzNCL2UsTUFBUXZjLEtBQUttaEUscUJBQXFCN2xDLE1BQ2xDZ2dDLGFBQWV0N0QsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLdWlFLGFBQ3JDbjlELFVBQVU2QixLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUt1aUUsY0FDOUIsVUFDR0EsYUFBYS8rQyxPQUFPZ2lELFdBQVc4RSxxQkFDaENyakUsS0FBSzZDLEtBQUtzSCxPQUFPLENBQUUsb0JBQXFCbXhELGVBR2hELHVCQUF3QnZpRSxLQUFNdWlDLE1BQzVCLE1BQU1oL0IsU0FDSnZELEtBQUtnRCxTQUFXaEQsS0FBS2lELFFBQ2pCLEdBQUdqRCxLQUFLZ0QsV0FBV2hELEtBQUtpRCxVQUNWLFVBQWRqRCxLQUFLa0MsS0FDTGxDLEtBQUt5QyxHQUNMekMsS0FBS3NLLFNBQVd0SyxLQUFLdUQsU0FDckJ1bUUsWUFBYyxHQUNkeG1FLE1BQVE5QixXQUFXZ0MsZ0JBQWdCRCxVQU16QyxPQUxJRCxRQUNzQixZQUFwQkEsTUFBTXRELEtBQUtrQyxLQUFvQjRuRSxZQUFZWSxXQUFhbm5FLFNBQ3ZEdW1FLFlBQVl2bUUsU0FBV0EsVUFHdEJ2RCxLQUFLa0MsTUFBTVksZUFDakIsSUFBSyxRQUNILE1BQ0YsSUFBSyxPQUNIZ25FLFlBQVl0RSxXQUFhLENBQ3ZCL2lFLEdBQUl6QyxLQUFLQSxNQUFNNi9CLEtBQU83L0IsS0FBS3lDLEdBQzNCUCxLQUFNLFFBRVIsTUFDRixJQUFLLGlCQUNING5FLFlBQVl0RSxXQUFhLENBQ3ZCL2lFLEdBQUl6QyxLQUFLMkQsS0FDVHpCLEtBQU0sa0JBRVIsTUFDRixJQUFLLFlBQ0g0bkUsWUFBWXRFLFdBQWEsQ0FDdkIvaUUsR0FBSXpDLEtBQUsyRCxLQUNUekIsS0FBTSxhQWFaLE1BQU1xZ0UsYUFBZXQ3RCxLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUt1aUUsYUFDckNuOUQsVUFBVTZCLEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS3VpRSxjQUM5QixHQUVFb0ksZUFBaUJwSSxhQURUdDdELEtBQUttaEUscUJBQXFCN2xDLE9BRXBDb29DLGVBQWU3NEMsWUFBWTY0QyxlQUFlNzRDLElBQzlDUSxZQUFZcTRDLGVBQWdCYixtQkFDdEI3aUUsS0FBSzZDLEtBQUtzSCxPQUFPLENBQUUsb0JBQXFCbXhELGVBR2hELHFCQUFzQnZpRSxNQUNwQixNQUFNdUQsU0FDSnZELEtBQUtnRCxTQUFXaEQsS0FBS2lELFFBQ2pCLEdBQUdqRCxLQUFLZ0QsV0FBV2hELEtBQUtpRCxVQUN4QmpELEtBQUtzSyxTQUFXdEssS0FBS3VELFVBQVl2RCxLQUFLeUMsR0FDdENxbkUsWUFBYyxHQUNkeG1FLE1BQVE5QixXQUFXZ0MsZ0JBQWdCRCxVQVl6QyxPQVhJRCxRQUNzQixZQUFwQkEsTUFBTXRELEtBQUtrQyxLQUFvQjRuRSxZQUFZWSxXQUFhbm5FLFNBQ3ZEdW1FLFlBQVl2bUUsU0FBV0EsVUFTdEJ2RCxLQUFLa0MsTUFBTVksZUFDakIsSUFBSyxRQUNILE1BQ0YsSUFBSyxPQUNILEdBQUk5QyxLQUFLeUMsR0FBSSxDQUVYLEdBQXlCLFVBRFovRSxLQUFLbUssTUFBTWpLLElBQUlvQyxLQUFLeUMsS0FDdkJ6QyxNQUFNa0MsS0FBa0IsT0FHcEM0bkUsWUFBWXRFLFdBQWEsQ0FDdkIvaUUsR0FBSXpDLEtBQUtBLE1BQU02L0IsS0FBTzcvQixLQUFLeUMsR0FDM0JQLEtBQU0sUUFFUixNQUNGLElBQUssaUJBQ0g0bkUsWUFBWXRFLFdBQWEsQ0FDdkIvaUUsR0FBSXpDLEtBQUsyRCxLQUNUekIsS0FBTSxrQkFFUixNQUNGLElBQUssWUFDSDRuRSxZQUFZdEUsV0FBYSxDQUN2Qi9pRSxHQUFJekMsS0FBSzJELEtBQ1R6QixLQUFNLGFBY1A0bkUsWUFBWXRFLGFBQ1Z2K0QsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLNHFFLFNBT3ZCZCxZQUFZdEUsV0FBYSxDQUN2QnRqRSxLQUFNLE9BQ055QixLQUFNakcsS0FBS2dKLEtBQUtDLFNBQVMsNEJBUjNCbWpFLFlBQVl0RSxXQUFhLENBQ3ZCL2lFLEdBQUksTUFDSlAsS0FBTSxpQkFDTnlCLEtBQU1qRyxLQUFLZ0osS0FBS0MsU0FBUyx5QkFTL0IsTUFBTTQ3RCxhQUFldDdELEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS3VpRSxhQUNyQ245RCxVQUFVNkIsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLdWlFLGNBQzlCLEdBRUosSUFBSTBELFFBQVMsRUFDYixNQUFRQSxRQUNONkQsWUFBWXZuQyxLQUFPMFYsUUFBUUMsTUFBTUMsU0FBUyxJQUMxQzh0QixPQUFTLElBQU0xRCxhQUFhcGpFLFFBQU9xNEMsR0FBS0EsRUFBRWpWLE1BQVF1bkMsWUFBWXZuQyxPQUFNbmpDLE9BR3RFbWpFLGFBQWF2akUsS0FBSzhxRSxtQkFDWjdpRSxLQUFLNkMsS0FBS3NILE9BQU8sQ0FBRSxvQkFBcUJteEQsZUFHaEQsaUJBQWtCNXNDLFlBQ2hCLEdBQUlqNEIsS0FBS29DLEtBQUt5UixLQUFNLENBQ2xCLE1BQU14VCxLQUFPcUosVUFBVXM0RCxlQUFlL3BDLFlBQ2hDNHNDLGFBQWV0N0QsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLdWlFLGFBQ3JDbjlELFVBQVU2QixLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUt1aUUsY0FDOUIsR0FDRS8rQyxNQUFRKytDLGFBQWFqNkIsV0FBVWtQLEdBQUtBLEVBQUV3eUIsV0FBYWpzRSxLQUFLd2tDLE9BQzFEL2UsT0FBUyxJQUNYKytDLGFBQWEvK0MsT0FBT2dpRCxXQUFXOEUsZUFBaUJ2c0UsS0FBS3M5QyxxQkFDL0NwMEMsS0FBSzZDLEtBQUtzSCxPQUFPLENBQUUsb0JBQXFCbXhELG9CQUUzQyxDQUNMLE1BQU12aUUsS0FBTyxDQUNYQSxLQUFNMjFCLFdBQ056ekIsS0FBTSxTQUNOMm9FLE9BQVEsYUFDUi9nRSxLQUFNN0MsS0FBSzZDLEtBQUt5NEIsTUFFbEI3a0MsS0FBS2tTLE9BQU9DLEtBQUssY0FBZTdQLE9BSXBDLHNCQUF1QjhxRSxnQkFBaUJyQixjQUN0QyxNQUFNckcsVUFBWWgrRCxVQUFVNkIsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLb2pFLFVBQVV4OUMsTUFHcERtbEQsWUFBYzNILFVBQVVuMkQsTUFBS3kzRCxHQUFLK0UsY0FBZ0IvRSxFQUFFbmlDLE9BQzFELElBQUt3b0MsWUFJSCxZQUhBem5DLFFBQVF4dkIsTUFDTixrQkFBa0JnM0QsNkJBQTZCckIsd0JBTW5ELE1BQU1oN0QsT0FBUzIwRCxVQUFVbjJELE1BQUt5M0QsR0FDNUJBLEVBQUVuQyxjQUFjdGpFLFNBQVM2ckUsbUJBUTNCLElBQUtyOEQsT0FFSCxZQURBNjBCLFFBQVF4dkIsTUFBTSxrQkFBa0JnM0QsZ0NBSTdCQyxZQUFZeEksZUFBY3dJLFlBQVl4SSxhQUFlLElBQzFEd0ksWUFBWXhJLGFBQWF2akUsS0FBSzhyRSxpQkFHOUIsTUFBTUUsb0JBQXNCdjhELE9BQU84ekQsYUFBYXBqRSxRQUM5Q3E0QyxHQUFLc3pCLGlCQUFtQnR6QixJQUUxQi9vQyxPQUFPOHpELGFBQWV5SSwwQkFFaEIvakUsS0FBSzQrRCxvQkFBb0J6QyxZQUk1QixTQUFTdUIsaUJBQWtCbGtFLEVBQUdpc0IsR0FFbkMsT0FBSUEsRUFBRSs5QyxTQUFXaHFFLEVBQUVncUUsT0FBZSxFQUM5QmhxRSxFQUFFZ3FFLFNBQVcvOUMsRUFBRSs5QyxRQUFnQixFQUU1QmhxRSxFQUFFK2MsSUFBTWtQLEVBQUVsUCxJQUdaLFNBQVN1cUQsTUFBTzFqRSxLQUNyQixJQUFLLE1BQU1zeEMsWUFBWXR4QyxJQUFLLENBQzFCLE1BQU00bUUsR0FBS0MsUUFBUTdtRSxJQUFJc3hDLFdBQ1osV0FBUHMxQixLQUNGNW1FLElBQUlzeEMsVUFBWW95QixNQUFNMWpFLElBQUlzeEMsYUFHakIsV0FBUHMxQixJQUFvQmpxRSxPQUFPQyxRQUFRb0QsSUFBSXN4QyxXQUFXdjJDLFVBRXBDLFdBQVA2ckUsSUFBb0I1bUUsSUFBSXN4QyxVQUFVdjJDLFFBRTNCLFdBQVA2ckUsSUFBb0JoZ0UsTUFBTXBHLE9BQU9SLElBQUlzeEMsY0FDOUN0eEMsSUFBSXN4QyxVQUFZOXdDLE9BQU9SLElBQUlzeEMsWUFKM0J0eEMsSUFBSXN4QyxVQUFZLEtBT3BCLE9BQU90eEMsSUFHRixNQUFNdS9ELGFBQ1hqM0QsWUFBYTNNLEtBQU8sSUFDbEJpSCxLQUFLakgsS0FBT0EsS0FHZCxZQUlFLE9BSEtpSCxLQUFLK3FCLFNBQ1IvcUIsS0FBSytxQixPQUFTeHdCLFdBQVdnQyxnQkFBZ0J5RCxLQUFLakgsS0FBS3VELFdBRTlDMEQsS0FBSytxQixPQUdkLGNBQ0UsT0FBTy9xQixLQUFLdWpFLFVBQVl2akUsS0FBS2trRSxXQUcvQixVQUNFLE9BQUlsa0UsS0FBS2trRSxXQUFtQmxrRSxLQUFLbWtFLFFBQVE3bkUsU0FDckMwRCxLQUFLdWpFLFNBQWlCdmpFLEtBQUszRCxNQUFNQyxjQUFyQyxFQUlGLFdBQ0UsT0FBSzBELEtBQUtva0UsUUFHTnBrRSxLQUFLa2tFLFdBQW1CbGtFLEtBQUtta0UsUUFBUTlsRSxJQUNyQzJCLEtBQUt1akUsU0FBaUJ2akUsS0FBSzNELE1BQU1nQyxTQUFyQyxFQUhTLHdEQU9YLGFBSUUsT0FISzJCLEtBQUtxa0UsVUFDUnJrRSxLQUFLcWtFLFFBQVU5cEUsV0FBV2dDLGdCQUFnQnlELEtBQUtqSCxLQUFLdUQsV0FFL0MwRCxLQUFLcWtFLFFBR2QsY0FJRSxPQUhJcmtFLEtBQUtqSCxLQUFLMHFFLGFBQ1p6akUsS0FBS3NrRSxTQUFXL3BFLFdBQVdnQyxnQkFBZ0J5RCxLQUFLakgsS0FBSzBxRSxhQUVoRHpqRSxLQUFLc2tFLFNBR2QsZUFDRSxRQUFTdGtFLEtBQUszRCxNQUdoQixpQkFDRSxRQUFTMkQsS0FBS21rRSxRQUdoQixXQUNFLE9BQUlua0UsS0FBS2trRSxXQUFtQmxrRSxLQUFLbWtFLFFBQVF6bkUsS0FDckNzRCxLQUFLdWpFLFNBQWlCdmpFLEtBQUszRCxNQUFNSyxLQUM5QnNELEtBQUtqSCxLQUFLMkQsV0FBUTJJLEVBRzNCLFVBY0UsT0FiS3JGLEtBQUtqSCxLQUFLOHhCLE1BQ1Q3cUIsS0FBS2trRSxXQUFZbGtFLEtBQUtqSCxLQUFLOHhCLElBQU03cUIsS0FBS21rRSxRQUFRdDVDLElBQ3pDN3FCLEtBQUt1akUsV0FBVXZqRSxLQUFLakgsS0FBSzh4QixJQUFNN3FCLEtBQUszRCxNQUFNd3VCLE1BR2pEN3FCLEtBQUtqSCxLQUFLOHhCLE1BQ1A3bUIsTUFBTXBHLE9BQU9vQyxLQUFLakgsS0FBSzh4QixPQUUxQjdxQixLQUFLakgsS0FBS3VsRSxhQUFjLEVBQ3hCdCtELEtBQUtqSCxLQUFLOHhCLFNBQU14bEIsR0FIaUJyRixLQUFLakgsS0FBS3VsRSxhQUFjLEdBT3REdCtELEtBQUtqSCxLQUFLOHhCLElBR25CLFdBQ0UsT0FBTzdxQixLQUFLakgsS0FBS3VpQyxLQUduQixVQWlCRSxPQWhCS3Q3QixLQUFLakgsS0FBS3dkLE1BQ1R2VyxLQUFLa2tFLFlBQWNsa0UsS0FBS3VrRSxVQUMxQnZrRSxLQUFLakgsS0FBS3dkLElBQU12VyxLQUFLd2tFLE9BQU8vOUQsZ0JBQWdCOFAsSUFBSWxaLE1BQ3ZDMkMsS0FBS3VqRSxXQUNkdmpFLEtBQUtqSCxLQUFLd2QsSUFBTXZXLEtBQUszRCxNQUFNb0ssZ0JBQWdCOFAsSUFBSWxaLFFBSS9DMkMsS0FBS2pILEtBQUt3ZCxNQUNQdlMsTUFBTXBHLE9BQU9vQyxLQUFLakgsS0FBS3dkLE9BRTFCdlcsS0FBS2pILEtBQUswckUsYUFBYyxFQUN4QnprRSxLQUFLakgsS0FBS3dkLElBQU0sR0FIaUJ2VyxLQUFLakgsS0FBSzByRSxhQUFjLEdBT3REemtFLEtBQUtqSCxLQUFLd2QsSUFHbkIsZUFDRSxRQUFTdlcsS0FBS2pILEtBQUt5cUUsT0FHckIsY0FDRSxPQUFPeGpFLEtBQUt5a0UsYUFBZXprRSxLQUFLcytELFlBR2xDLGtCQUNFLE9BQVF0NkQsTUFBTXBHLE9BQU9vQyxLQUFLakgsS0FBS3dkLE1BR2pDLGtCQUNFLE9BQVF2UyxNQUFNcEcsT0FBT29DLEtBQUtqSCxLQUFLOHhCLE1BR2pDLGdCQUNFLE9BQU83cUIsS0FBS2trRSxZQUFjbGtFLEtBQUt1akUsU0FHakMsb0JBQ0UsR0FBSXZqRSxLQUFLakgsS0FBS3dsRSxZQUFZOEUsZUFBZ0IsQ0FDeEMsTUFBTXZzRSxLQUFPcUosVUFBVXM0RCxlQUFlejRELEtBQUtqSCxLQUFLd2xFLFdBQVc4RSxnQkFDM0QsR0FBSXZzRSxPQUNHQSxLQUFLa2hDLFFBQVMsQ0FDakIsR0FBSWxoQyxLQUFLbUosY0FBZ0JFLFVBQVVGLGFBQWFNLFFBQVMsT0FBTyxFQUMzRCxHQUFJekosS0FBS3dZLE9BQVEsT0FBUSxHQUlwQyxPQUFPLEVBR1Qsa0JBQ0UsUUFBd0IsSUFBYnRQLEtBQUs2cUIsTUFDWjdtQixNQUFNcEcsT0FBT29DLEtBQUs2cUIsTUFDdEIsT0FBT2p0QixPQUFPb0MsS0FBSzZxQixLQUFPN3FCLEtBQUswa0UsY0FHakMsdUJBQ0UsT0FBTzFrRSxLQUFLMmtFLGFBQWUza0UsS0FBSzRrRSxZQUdsQyxrQkFDRSxPQUFJNWtFLEtBQUtqSCxLQUFLMnJFLGNBQWdCLEVBSWhDLGtCQUNFLE9BQUkxa0UsS0FBS2pILEtBQUsyckUsY0FBZ0IsRUFvQmhDM0ksVUFDRS83RCxLQUFLakgsS0FBSzhyRSxVQUFXLEVBR3ZCN0ksaUJBQ0VoOEQsS0FBS2pILEtBQUs4ckUsVUFBVyxFQUNyQjdrRSxLQUFLakgsS0FBSzJMLFNBQVUsRUFHdEJBLFVBQ0UxRSxLQUFLakgsS0FBSzJMLFNBQVUsRUFHdEIsWUFBYVgsR0FDWC9ELEtBQUtqSCxLQUFLbWpFLFFBQVVuNEQsRUFHdEIsWUFBYUEsR0FDWC9ELEtBQUtqSCxLQUFLa2pFLFFBQVVsNEQsRUFHdEIsbUJBQW9CQSxHQUNsQi9ELEtBQUtqSCxLQUFLMmxFLGVBQWlCMzZELEVBRzdCLGVBQ0UsTUFBTTJuQixXQUFhLEdBT25CLE9BTkkxckIsS0FBS2c5RCxTQUFVdHhDLFdBQVczekIsS0FBSyxVQUM5QjJ6QixXQUFXM3pCLEtBQUssUUFDakJpSSxLQUFLakgsS0FBSzhyRSxVQUFVbjVDLFdBQVczekIsS0FBSyxXQUFZLFlBQ2hEaUksS0FBS2pILEtBQUsyTCxTQUFTZ25CLFdBQVczekIsS0FBSyxXQUNuQ2lJLEtBQUtqSCxLQUFLa2pFLFNBQVN2d0MsV0FBVzN6QixLQUFLLFdBQ25DaUksS0FBS2pILEtBQUttakUsU0FBU3h3QyxXQUFXM3pCLEtBQUssV0FDaEMyekIsV0FBV3BuQixLQUFLLEtBR3pCLGlCQUNFLE1BQU1qQyxNQUFRLEdBeUJkLEdBeEJJckMsS0FBS2pILEtBQUt3bEUsWUFBWTdoRSxPQUFNMkYsTUFBTTNGLEtBQU9zRCxLQUFLakgsS0FBS3dsRSxXQUFXN2hFLE1BQzlEc0QsS0FBS2pILEtBQUt3bEUsWUFBWTc0QixRQUFPcmpDLE1BQU1xakMsTUFBUTFsQyxLQUFLakgsS0FBS3dsRSxXQUFXNzRCLE9BQ3BFcmpDLE1BQU1xcEIsV0FBYSxHQUNmMXJCLEtBQUtqSCxLQUFLd2xFLFlBQVk4RSxpQkFDeEJoaEUsTUFBTXZMLEtBQU9xSixVQUFVczRELGVBQWV6NEQsS0FBS2pILEtBQUt3bEUsV0FBVzhFLGdCQUN2RGhoRSxNQUFNdkwsT0FDSHVMLE1BQU12TCxLQUFLa2hDLFVBQVczMUIsTUFBTXZMLEtBQUtndUUsVUFDcEN6aUUsTUFBTXFiLFFBQVMsRUFDZnJiLE1BQU0waUUsV0FBYTFpRSxNQUFNdkwsS0FBS3VkLFlBQVlDLFVBQzFDalMsTUFBTXFwQixZQUFjLFNBQ2ZycEIsTUFBTXZMLEtBQUtraEMsVUFDVjMxQixNQUFNdkwsS0FBS21KLGNBQWdCRSxVQUFVRixhQUFhTSxRQUNwRDhCLE1BQU0yaUUsWUFBYyxVQUNYM2lFLE1BQU12TCxLQUFLd1ksU0FBUWpOLE1BQU0yaUUsWUFBYyxjQUVoRDNpRSxNQUFNdkwsS0FBS21KLGNBQWdCRSxVQUFVRixhQUFhTSxTQUNsRDhCLE1BQU12TCxLQUFLd1ksVUFFWGpOLE1BQU00aUUsYUFBYyxPQU0xQmpsRSxLQUFLdWpFLFNBQVUsQ0FDakJsaEUsTUFBTXpILFFBQVUsR0FDaEIsSUFBSyxNQUFNcTdDLElBQUssQ0FBQyxPQUFRLENBQ3ZCLE1BQU1pdkIsZUFBaUJsbEUsS0FBSzNELE1BQU0yaEMsa0JBQWtCaVksR0FDaERpdkIsZ0JBQWdCN25FLE9BQU9nRixNQUFNekgsUUFBUTdDLEtBQUttdEUsZUFBZTkrRCxPQUcvRCxJQUFLLE1BQU05SSxLQUFLMEMsS0FBSzNELE1BQU04b0UsWUFDekI5aUUsTUFBTXpILFFBQVE3QyxLQUFLdUYsRUFBRVosTUFHdkIsSUFBSyxNQUFNWSxLQUFLMEMsS0FBSzNELE1BQU0rb0UsWUFDekIvaUUsTUFBTXpILFFBQVE3QyxLQUFLdUYsRUFBRVosTUFJdkIsR0FGQTJGLE1BQU1nakUsYUFBZWhqRSxNQUFNekgsUUFBUXpDLE9BRS9CNkgsS0FBS2pILEtBQUt3bEUsWUFBWS9pRSxHQUFJLENBQzVCLElBQUlxSCxLQUFPN0MsS0FBSzNELE1BQU0ySixLQUFLaEcsS0FBS2pILEtBQUt3bEUsV0FBVy9pRSxJQUNoRCxJQUFLcUgsS0FBTSxDQUNULE1BQU15aUUsU0FBVzd1RSxLQUFLbUssTUFBTWpLLElBQUlxSixLQUFLakgsS0FBS3dsRSxXQUFXL2lFLElBQ2pEOHBFLFdBQVV6aUUsS0FBTzdDLEtBQUszRCxNQUFNMkosS0FBS3MvRCxTQUFTNW9FLE9BRzVDbUcsT0FDZ0IsU0FBZEEsS0FBSzVILE1BQTZDLFVBQTFCNEgsS0FBS3hGLE1BQU10RSxNQUFNa0MsT0FDM0NvSCxNQUFNK2dFLElBQU12Z0UsS0FBS3hGLE1BQ2pCZ0YsTUFBTTNGLEtBQU9tRyxLQUFLeEYsTUFBTVgsS0FDeEIyRixNQUFNcEgsS0FBTyxRQUNib0gsTUFBTWt4QyxTQUFVLEVBQ2hCbHhDLE1BQU15Z0UsUUFBUyxFQUNmemdFLE1BQU1xakMsTUFBUTdpQyxLQUFLeEYsTUFBTUEsT0FFVCxtQkFBZHdGLEtBQUs1SCxPQUNQb0gsTUFBTStnRSxJQUFNdmdFLEtBQUt4RixNQUNqQmdGLE1BQU0zRixLQUFPbUcsS0FBS3hGLE1BQU0rSSxNQUN4Qi9ELE1BQU1wSCxLQUFPLGlCQUNib0gsTUFBTThnRSxrQkFBbUIsRUFDekI5Z0UsTUFBTXlnRSxRQUFTLEVBQ2Z6Z0UsTUFBTXFqQyxNQUFRN2lDLEtBQUt4RixNQUFNQSxPQUVULGNBQWR3RixLQUFLNUgsT0FDUG9ILE1BQU0rZ0UsSUFBTXZnRSxLQUFLeEYsTUFDakJnRixNQUFNM0YsS0FBT21HLEtBQUt4RixNQUFNK0ksTUFDeEIvRCxNQUFNcEgsS0FBTyxZQUNib0gsTUFBTW14QyxhQUFjLEVBQ3BCbnhDLE1BQU15Z0UsUUFBUyxFQUNmemdFLE1BQU1xakMsTUFBUTdpQyxLQUFLeEYsTUFBTUEsYUFHeEIsR0FBSTJDLEtBQUtqSCxLQUFLd2xFLFlBQVk3aEUsS0FBTSxDQUNyQyxNQUFNbUcsS0FBTzdDLEtBQUszRCxNQUFNMkosS0FBS2hHLEtBQUtqSCxLQUFLd2xFLFdBQVc3aEUsTUFDOUNtRyxPQUNnQixTQUFkQSxLQUFLNUgsTUFBNkMsVUFBMUI0SCxLQUFLeEYsTUFBTXRFLE1BQU1rQyxPQUMzQ29ILE1BQU0rZ0UsSUFBTXZnRSxLQUFLeEYsTUFDakJnRixNQUFNM0YsS0FBT21HLEtBQUt4RixNQUFNWCxLQUN4QjJGLE1BQU1wSCxLQUFPLFFBQ2JvSCxNQUFNa3hDLFNBQVUsRUFDaEJseEMsTUFBTXlnRSxRQUFTLEVBQ2Z6Z0UsTUFBTXFqQyxNQUFRN2lDLEtBQUt4RixNQUFNQSxPQUVULG1CQUFkd0YsS0FBSzVILE9BQ1BvSCxNQUFNK2dFLElBQU12Z0UsS0FBS3hGLE1BQ2pCZ0YsTUFBTTNGLEtBQU9tRyxLQUFLeEYsTUFBTStJLE1BQ3hCL0QsTUFBTXBILEtBQU8saUJBQ2JvSCxNQUFNOGdFLGtCQUFtQixFQUN6QjlnRSxNQUFNeWdFLFFBQVMsRUFDZnpnRSxNQUFNcWpDLE1BQVE3aUMsS0FBS3hGLE1BQU1BLE9BRVQsY0FBZHdGLEtBQUs1SCxPQUNQb0gsTUFBTStnRSxJQUFNdmdFLEtBQUt4RixNQUNqQmdGLE1BQU0zRixLQUFPbUcsS0FBS3hGLE1BQU0rSSxNQUN4Qi9ELE1BQU1wSCxLQUFPLFlBQ2JvSCxNQUFNbXhDLGFBQWMsRUFDcEJueEMsTUFBTXlnRSxRQUFTLEVBQ2Z6Z0UsTUFBTXFqQyxNQUFRN2lDLEtBQUt4RixNQUFNQSxjQUkxQixHQUFJMkMsS0FBS2pILEtBQUt3bEUsWUFBWS9pRSxHQUFJLENBQ25DLE1BQU1xSCxLQUFPcE0sS0FBS21LLE1BQU1qSyxJQUFJcUosS0FBS2pILEtBQUt3bEUsV0FBVy9pRSxJQUM3Q3FILE1BQ3NCLFVBQXBCQSxLQUFLOUosTUFBTWtDLE9BQ2JvSCxNQUFNK2dFLElBQU12Z0UsS0FDWlIsTUFBTTNGLEtBQU9tRyxLQUFLbkcsS0FDbEIyRixNQUFNcEgsS0FBTyxRQUNib0gsTUFBTWt4QyxTQUFVLEVBQ2hCbHhDLE1BQU15Z0UsUUFBUyxFQUNmemdFLE1BQU1xakMsTUFBUTdpQyxLQUFLd2MsTUFRekIsT0FIS2hkLE1BQU1xYixRQUFXcmIsTUFBTXFqQyxRQUFPcmpDLE1BQU1xcEIsWUFBYyxZQUN2RHJwQixNQUFNNDZELFFBQVU1NkQsTUFBTXFiLFNBQVcxWixNQUFNM0IsTUFBTXFqQyxPQUV0Q3JqQyxPQ3BuREosTUFBTWtqRSx3QkFBd0J2TSxVQUNuQ3R6RCxlQUFnQndQLE1BQ2R4RyxTQUFTd0csTUFDVGxWLEtBQUt3bEUsVUFBWSxRQU9uQiw0QkFDRSxPQUFPbjZDLFlBQVkzYyxNQUFNNGMsZUFBZ0IsQ0FDdkN4TyxRQUFTLENBQUMsT0FBUSxVQUFXLFFBQzdCZ3VCLE1BQU8sSUFDUEMsT0FBUSxJQUNSb1csUUFBUyxDQUFDLG9CQUNWcUYsS0FBTSxDQUNKLENBQ0VDLFlBQWEsb0JBQ2JDLGdCQUFpQixjQUNqQkMsUUFBUyxrQkFTakIsZUFDRSxNQUFPLGlEQVdUeDdDLFFBQVN2USxRQUFVLElBRWpCLE1BQU03QixLQUFPMlYsTUFBTXZELFFBQVF2USxTQUdyQnl3RCxTQUFXdHlELEtBQUtBLEtBTXRCLEdBTEFBLEtBQUtBLEtBQU9zeUQsU0FBU3R5RCxLQUdyQkEsS0FBSzBzRSxTQUErQixPQUFwQnpsRSxLQUFLNkMsS0FBS3hHLE1BRUUsVUFBeEIyRCxLQUFLNkMsS0FBSzlKLEtBQUtrQyxLQUFrQixDQUNuQ2xDLEtBQUtpaEQsWUFBYyxHQUNuQixJQUFLLE1BQU9sK0MsSUFBS3VCLFNBQVV0RCxPQUFPQyxRQUFRNmIsS0FBS3k1QixpQkFBa0IsQ0FDL0QsTUFBTXJaLFNBQVcsR0FDakJBLFNBQVN6NkIsR0FBS00sSUFDZG02QixTQUFTdjVCLEtBQU9XLE1BQ2hCNDRCLFNBQVN5dkMsV0FBb0QsSUFBeEMxbEUsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLc3JCLFdBQVd2b0IsS0FDcEQvQyxLQUFLaWhELFlBQVlqaUQsS0FBS2srQixVQUd4Qmw5QixLQUFLNHNFLE1BQVEsR0FDYixJQUFLLE1BQU83cEUsSUFBS3VCLFNBQVV0RCxPQUFPQyxRQUFRNmIsS0FBSyt2RCxNQUFPLENBQ3BELE1BQU1DLElBQU0sR0FDWkEsSUFBSXJxRSxHQUFLTSxJQUNUK3BFLElBQUlucEUsS0FBT1csTUFDWHdvRSxJQUFJSCxXQUE4QyxJQUFsQzFsRSxLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUs2c0UsS0FBSzlwRSxLQUN6Qy9DLEtBQUs0c0UsTUFBTTV0RSxLQUFLOHRFLEtBR2xCOXNFLEtBQUsrc0UsY0FBZ0I5bEUsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLc3JCLFdBQVd2TixRQUNwRC9kLEtBQUtndEUsZUFDRi9sRSxLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUtzckIsV0FBV25OLFVBQy9CbFgsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLc3JCLFdBQVdwTixTQUlwQyxPQURBbGUsS0FBSzZnRSxTQUFXbmpFLEtBQUtvQyxLQUFLeVIsS0FDbkJ2UixLQVNUa2pCLGtCQUFtQi9YLE1BQ2pCd0ssTUFBTXVOLGtCQUFrQi9YLE1BRW5CbEUsS0FBS3BGLFFBQVFnOUMsVUFFbEIxekMsS0FBSzhCLEtBQUssa0JBQWtCa1csTUFBTWxjLEtBQUtnbUUsZUFBZXh0RCxLQUFLeFksT0FLN0QscUJBQXNCN0YsT0FDcEJBLE1BQU15TSxpQkFDTixNQUFNMG5DLFdBQWFuMEMsTUFBTWtpQixjQUFjMUcsUUFBUSxrQkFBa0IxYyxRQUM5RGc5QixlQUNHajJCLEtBQUs2QyxLQUFLaTlDLGVBQ2R4UixXQUNBbjBDLE1BQU1DLFNBQ0pELE1BQU1FLFNBQ1ksS0FBbEJGLE1BQU1HLFNBQ1ksTUFBbEJILE1BQU1HLFVDMUdQLE1BQU0yckUsc0JBQXNCVixnQkFLakMsNEJBQ0UsT0FBT2w2QyxZQUFZM2MsTUFBTTRjLGVBQWdCLENBQ3ZDd2YsTUFBTyxJQUNQQyxPQUFRLE9DTFAsTUFBTW03Qiw0QkFBNEJsTixVQUt2Qy84QyxrQkFBbUIvWCxNQUdqQixHQUZBd0ssTUFBTXVOLGtCQUFrQi9YLE9BRW5CbEUsS0FBS3BGLFFBQVFnOUMsU0FBVSxPQUU1QjF6QyxLQUNHOEIsS0FBSyx1QkFDTGtXLE9BQU0vaEIsT0FBUzZGLEtBQUsrOEMsZUFBZTVpRCxNQUFPLFlBQzdDK0osS0FDRzhCLEtBQUssZ0JBQ0xrVyxPQUFNL2hCLE9BQVM2RixLQUFLaTVELGNBQWM5K0QsTUFBTyxZQUU1QytKLEtBQUs4QixLQUFLLHNCQUFzQmtXLE1BQU1sYyxLQUFLbW1FLG1CQUFtQjN0RCxLQUFLeFksT0FDbkVrRSxLQUFLOEIsS0FBSyxrQkFBa0JrVyxNQUFNbGMsS0FBS29tRSxnQkFBZ0I1dEQsS0FBS3hZLE9BRTNDLElBQUk2L0QsU0FBUyxDQUM1Qm4xQixhQUFjLGFBQ2RvMUIsVUFBVyxDQUFFQyxLQUFNLy9ELEtBQUt3L0MsUUFBUWhuQyxLQUFLeFksU0FFOUJ3WSxLQUFLdFUsS0FBSyxJQUdyQixjQUFlL0osTUFBT2MsS0FBTyxRQUFTaStELGVBQWlCLFVBQ3JELytELE1BQU15TSxpQkFDTnpNLE1BQU1reUMsa0JBRU4sTUFBTWc2QixjQUFnQmxzRSxPQUFPa2lCLGVBQWUxaUIsV0FBVzRqQixTQUNyRCxtQkFFSStvRCxHQUFLbnNFLE9BQU9raUIsZUFBZTFHLFFBQVEsTUFDbkM0RyxNQUFRK3BELElBQUlydEUsU0FBUyt5QyxNQUVyQmhoQyxlQUFpQmxILGNBQWNxMUQscUJBQXFCaC9ELE1BQU8sUUFFM0Q2MEIsV0FBYWh2QixLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUttZ0UsZ0JBQ25DLzZELFVBQVU2QixLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUttZ0UsaUJBQzlCLEdBQ0V6NUIsT0FBU3ovQixLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUswbUMsT0FDL0J0aEMsVUFBVTZCLEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBSzBtQyxRQUM5QixHQUVKLElBQUssTUFBTTU4QixRQUFRbUksU0FDakIsR0FBS25JLE1BQVNBLEtBQUs5SixNQUNkLENBQUNrQyxNQUFNakQsU0FBUzZLLEtBQUs5SixLQUFLa0MsTUFJL0IsR0FBSW9yRSxjQUFlLENBQ2pCLElBQUtyK0QsU0FBU0MsVUFBVXBGLE1BQU8sQ0FFN0IsR0FBSW1zQixXQUFXaHBCLE1BQUsrWSxJQUFNQSxHQUFHcmlCLE9BQVNtRyxLQUFLOUosS0FBSzJELE9BQzlDLFNBRUYsR0FBSStpQyxPQUFPbGpCLE9BQU9ELE9BQU90VyxNQUFLK1ksSUFBTUEsR0FBR3JpQixPQUFTbUcsS0FBS25HLE9BQ25ELFNBSUoraUMsT0FBT2xqQixPQUFPRCxPQUFTbWpCLE9BQU9sakIsT0FBT0QsT0FBT2lSLE9BQU8sQ0FBQzFxQixLQUFLOUosV0FDcEQsQ0FDTCxJQUFLaVAsU0FBU0MsVUFBVXBGLE1BQU8sQ0FFN0IsR0FBSW1zQixXQUFXaHBCLE1BQUsrWSxJQUFNQSxHQUFHcmlCLE9BQVNtRyxLQUFLOUosS0FBSzJELE9BQzlDLFNBR0YsSUFBSyxJQUFJdVEsRUFBSSxFQUFHQSxFQUFJd3lCLE9BQU90bkMsT0FBUThVLElBQUssQ0FFdEMsTUFBTXNQLE1BQVFrakIsT0FBT3h5QixHQUFHcVAsT0FBTytrQixXQUM3QnRpQixJQUFNQSxHQUFHcmlCLE9BQVNtRyxLQUFLOUosS0FBSzJELFFBRWYsSUFBWDZmLE9BQ0ZrakIsT0FBT3h5QixHQUFHcVAsT0FBT3dULE9BQU92VCxNQUFPLElBSXJDeVMsV0FBV2ozQixLQUFLb0csVUFBVTBFLEtBQUs5SixhQUc3QmlILEtBQUs2QyxLQUFLc0gsT0FBTyxDQUFFLGNBQWVzMUIsZUFDbEN6L0IsS0FBSzZDLEtBQUtzSCxPQUFPLENBQUUsQ0FBQyxRQUFRK3VELGtCQUFtQmxxQyxhQUd2RCxzQkFBdUI3MEIsT0FDckJBLE1BQU15TSxpQkFDTixNQUFNcE4sRUFBSVcsTUFBTWtpQixjQUdoQixHQUFJN2lCLEVBQUVHLFVBQVU0akIsU0FBUyxhQUFjLE9BQy9CdmQsS0FBSzZkLFVBQVUxakIsT0FDckIsTUFBTXNsQyxPQUFTei9CLEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBSzBtQyxhQUM3QnovQixLQUFLNkMsS0FBS3NILE9BQU8sQ0FDckIsY0FBZXMxQixPQUFPbFMsT0FBTyxDQUFDLENBQUUzeUIsUUFBUyxFQUFHMGhCLE9BQVEsUUFJeEQsR0FBSTlpQixFQUFFRyxVQUFVNGpCLFNBQVMsZ0JBQWlCLE9BQ2xDdmQsS0FBSzZkLFVBQVUxakIsT0FDckIsTUFBTXNsQyxPQUFTdGhDLFVBQVU2QixLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUswbUMsUUFDdkM2bUMsR0FBSzlzRSxFQUFFbWMsUUFBUSxvQkFDckI4cEIsT0FBTzNQLE9BQU9seUIsT0FBTzBvRSxHQUFHcnRFLFFBQVEreUMsT0FBUSxTQUNsQ2hzQyxLQUFLNkMsS0FBS3NILE9BQU8sQ0FBRSxjQUFlczFCLFVBSTVDc2QsZUFBZ0I1aUQsTUFBTysrRCxlQUFpQixTQUN0Qy8rRCxNQUFNeU0saUJBQ04sTUFBTXdWLEdBQUt6SCxFQUFFeGEsTUFBTWtpQixlQUFlOGdDLFFBQVEsU0FJcEM3a0QsU0FITzBILEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS21nRSxnQkFBZ0JsekQsTUFBSzFJLEdBQzdDQSxFQUFFczdCLE1BQVF4YyxHQUFHcmpCLEtBQUssYUFFTEEsS0FBSzJoQyxZQUczQixHQUFJdGUsR0FBR21rQyxTQUFTLFlBQWEsQ0FDM0IsTUFBTWhtQixRQUFVbmUsR0FBR282QixTQUFTLGlCQUM1QmpjLFFBQVEraUIsUUFBUSxLQUFLLElBQU0vaUIsUUFBUTV0QixlQUM5QixDQUNMLE1BQU02ekMsSUFBTTdyQyxFQUFFLDZCQUE2QnJjLFNBQVMrRSxlQUM5Q2d6QyxNQUFRMTdCLEVBQUUsdUNBRWhCNnJDLElBQUk5b0IsT0FBTzJZLE9BQ1hqMEIsR0FBR3NiLE9BQU84b0IsSUFBSUUsUUFDZEYsSUFBSUksVUFBVSxLQUVoQnhrQyxHQUFHZ0IsWUFBWSxZQUdqQixvQkFBcUJqakIsTUFBTysrRCxlQUFpQixTQUMzQyxNQUFNRSxVQUFZemtELEVBQUV4YSxNQUFNa2lCLGVBQ3ZCOGdDLFFBQVEsU0FDUnBrRCxLQUFLLFdBQ0pxZ0UsaUJBQWlCcDVELEtBQUtxNUQsV0FBV0QsVUFBV0YsZ0JBR2xELHlCQUEwQi8rRCxPQUN4QixNQUNNaWlCLEdBRElqaUIsTUFBTWtpQixjQUNIMUcsUUFBUSxTQUNmMndELEdBQUtscUQsR0FBR3pHLFFBQVEsb0JBQ2hCOHBCLE9BQVN0aEMsVUFBVTZCLEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBSzBtQyxRQUM3Q0EsT0FBTzdoQyxPQUFPMG9FLEdBQUdydEUsUUFBUSt5QyxRQUFRMXZCLE9BQU93VCxPQUN0Q2x5QixPQUFPd2UsR0FBR25qQixRQUFRbWdFLFdBQ2xCLFNBRUlwNUQsS0FBSzZDLEtBQUtzSCxPQUFPLENBQUUsY0FBZXMxQixTQUcxQyxpQkFBa0I5K0IsT0FBUXU0RCxlQUFpQixTQUN6QyxNQUFNRSxVQUFZcDVELEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS21nRSxnQkFBZ0I3M0IsV0FBVS9qQyxHQUN2REEsRUFBRXM3QixNQUFRajRCLFNBRW5CLEdBQUl5NEQsV0FBYSxFQUFHLENBQ2xCLE1BQU1wcUMsV0FBYWh2QixLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUttZ0UsZ0JBQ25DLzZELFVBQVU2QixLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUttZ0UsaUJBQzlCLEdBQ0pscUMsV0FBV2MsT0FBT3NwQyxVQUFXLFNBQ3ZCcDVELEtBQUs2QyxLQUFLc0gsT0FBTyxDQUFFLENBQUMsUUFBUSt1RCxrQkFBbUJscUMsY0FJekQsNEJBQ0UsT0FBTzNELFlBQVkzYyxNQUFNNGMsZUFBZ0IsQ0FDdkN4TyxRQUFTLENBQUMsT0FBUSxRQUFTLGNBQzNCZ3VCLE1BQU8sSUFDUEMsT0FBUSxJQUNSUCxTQUFVLENBQUMsQ0FBRUMsYUFBYyxVQUMzQjBXLFFBQVMsQ0FBQyxvQkFDVnFGLEtBQU0sQ0FDSixDQUNFQyxZQUFhLG9CQUNiQyxnQkFBaUIsY0FDakJDLFFBQVMsa0JBTWpCLGVBQ0UsTUFBTywrQ0FHVDJTLGFBQWNuL0QsT0FDWixNQUFNaWlCLEdBQUtqaUIsTUFBTWtpQixjQUFjMUcsUUFBUSxTQUtqQzRqRCxTQUFXLENBQUV0K0QsS0FBTSxPQUFRbEMsS0FKbkJpSCxLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUt1akIsT0FBT3RXLE1BQUsxSSxHQUNyQ0EsRUFBRXM3QixNQUFReGMsR0FBR25qQixRQUFRMEgsVUFJOUJ4RyxNQUFNK1EsYUFBYTY5QixRQUFRLGFBQWMxdkMsS0FBS0MsVUFBVWlnRSxXQUcxRHB1RCxVQUNFLE1BQU1wUyxLQUFPMlYsTUFBTXZELFVBR2JrZ0QsU0FBV3R5RCxLQUFLQSxLQUN0QkEsS0FBS0EsS0FBT3N5RCxTQUFTdHlELEtBR3JCQSxLQUFLKzFDLFFBQVU5dUMsS0FBSzZDLEtBQUtpc0MsUUFFekIsTUFBTXkzQixVQUFZLEdBQ1pDLFVBQVksR0FDbEIsSUFBSyxNQUFPMXFFLElBQUsycUUsU0FBVTFzRSxPQUFPQyxRQUNoQ2pCLEtBQUtBLEtBQUt3bUMsdUJBRVYsR0FBSWtuQyxNQUFNcHBELFdBQVksQ0FDcEIsTUFBTXFwRCxVQUFZandFLEtBQUtnSixLQUFLQyxTQUFTLFVBQVU1RCxJQUFJcEIsaUJBQy9DK3JFLE1BQU05a0UsVUFBWThrRSxNQUFNdHBELFVBQzFCb3BELFVBQVV4dUUsS0FBSyxHQUFHMnVFLGFBQWFELE1BQU1wcEQsY0FFbkNvcEQsTUFBTTlrRSxXQUFhOGtFLE1BQU10cEQsVUFDM0JxcEQsVUFBVXp1RSxLQUFLLEdBQUcydUUsYUFBYUQsTUFBTXBwRCxjQUszQ3RrQixLQUFLd3RELGVBQTZDLElBQTVCeHRELEtBQUtBLEtBQUt1akIsT0FBT25rQixPQUN2QyxJQUFLLE1BQU15SyxTQUFTN0osS0FBS0EsS0FBS3VqQixPQUcxQjFaLE1BQU03SixLQUFLd21CLGlCQUNWM2MsTUFBTWxHLEtBQUsxRSxTQUFTNEssTUFBTTdKLEtBQUt3bUIsZ0JBRWhDM2MsTUFBTSs4QixZQUFjLEdBQUcvOEIsTUFBTTdKLEtBQUt3bUIsbUJBQW1CM2MsTUFBTWxHLFFBQ3REa0csTUFBTSs4QixZQUFjLzhCLE1BQU1sRyxLQUduQzNELEtBQUtBLEtBQUt1akIsT0FBTzRVLE1BQUssQ0FBQzEzQixFQUFHaXNCLElBQ2pCanNCLEVBQUVtbUMsWUFBWXNILGNBQWN4aEIsRUFBRWthLGVBR3ZDLElBQUssSUFBSXBqQixNQUFRLEVBQUdBLE1BQVF4akIsS0FBS0EsS0FBSzBtQyxPQUFPdG5DLE9BQVFva0IsUUFBUyxDQUM1RHhqQixLQUFLQSxLQUFLMG1DLE9BQU9sakIsT0FBT29xRCxRQUNvQixJQUExQzV0RSxLQUFLQSxLQUFLMG1DLE9BQU9sakIsT0FBT0QsT0FBT25rQixPQUNqQyxJQUFLLE1BQU15SyxTQUFTN0osS0FBS0EsS0FBSzBtQyxPQUFPbGpCLE9BQU9ELE9BR3hDMVosTUFBTTdKLEtBQUt3bUIsaUJBQ1YzYyxNQUFNbEcsS0FBSzFFLFNBQVM0SyxNQUFNN0osS0FBS3dtQixnQkFFaEMzYyxNQUFNKzhCLFlBQWMsR0FBRy84QixNQUFNN0osS0FBS3dtQixtQkFBbUIzYyxNQUFNbEcsUUFDdERrRyxNQUFNKzhCLFlBQWMvOEIsTUFBTWxHLEtBR25DM0QsS0FBS0EsS0FBSzBtQyxPQUFPbGpCLE9BQU9ELE9BQU80VSxNQUFLLENBQUMxM0IsRUFBR2lzQixJQUMvQmpzQixFQUFFbW1DLFlBQVlzSCxjQUFjeGhCLEVBQUVrYSxlQUl6QzVtQyxLQUFLNnRFLHVCQUF5QixHQUM5QixNQUFNbE4sU0FBVyxJQUFJampFLEtBQUtnSixLQUFLQyxTQUFTLGNBQ3BDOG1FLFVBQVVydUUsU0FBUVksS0FBSzZ0RSx3QkFBMEJKLFVBQVVsaUUsS0FBSyxRQUNoRWlpRSxVQUFVcHVFLFFBQVVxdUUsVUFBVXJ1RSxTQUNoQ1ksS0FBSzZ0RSx3QkFBMEIsT0FBT0wsVUFBVWppRSxLQUFLbzFELGNBRW5ENk0sVUFBVXB1RSxTQUFXcXVFLFVBQVVydUUsU0FDakNZLEtBQUs2dEUsd0JBQTBCTCxVQUFVamlFLEtBQUtvMUQsV0FHaEQzZ0UsS0FBSzRnRSxlQUFpQixHQUV0QixJQUFLLE1BQU83OUQsSUFBS3VCLFNBQVV0RCxPQUFPQyxRQUFRakIsS0FBS0EsS0FBS2tDLE1BQzlDb0MsT0FDRnRFLEtBQUs0Z0UsZUFBZTVoRSxLQUNsQjhkLEtBQUtneEQscUJBQXFCL3FFLEtBQU8rWixLQUFLZ3hELHFCQUFxQi9xRSxLQUFPLE1BTXhFLE9BREEvQyxLQUFLNmdFLFNBQVduakUsS0FBS29DLEtBQUt5UixLQUNuQnZSLEtBR1RvcUQsY0FBZWhwRCxNQUFPbWxCLFVBSXBCLEdBRktBLFNBQVN2bUIsT0FBTXVtQixTQUFXdU4sYUFBYXZOLFdBRXhDQSxTQUFTdm1CLEtBQUswbUMsT0FBUSxDQUN4Qm5nQixTQUFTdm1CLEtBQUswbUMsT0FBUzFsQyxPQUFPZ00sT0FBT3VaLFNBQVN2bUIsTUFBTTBtQyxRQUFVLElBQzlELElBQUssSUFBSWxqQixNQUFRLEVBQUdBLE1BQVF2YyxLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUswbUMsT0FBT3RuQyxPQUFRb2tCLFFBQzdEK0MsU0FBU3ZtQixLQUFLMG1DLE9BQU9sakIsT0FBT0QsT0FBU25lLFVBQ25DNkIsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLMG1DLE9BQU9sakIsT0FBT0QsUUFLeEM1TixNQUFNeTBDLGNBQWNocEQsTUFBT21sQixXQ25TeEIsTUFBTXduRCx1QkFBdUI5TixVQUtsQy84QyxrQkFBbUIvWCxNQUNqQndLLE1BQU11TixrQkFBa0IvWCxNQUVuQmxFLEtBQUtwRixRQUFRZzlDLFdBRWxCMXpDLEtBQ0c4QixLQUFLLHVCQUNMa1csT0FBTS9oQixPQUFTNkYsS0FBSys4QyxlQUFlNWlELE1BQU8sV0FDN0MrSixLQUFLOEIsS0FBSyxnQkFBZ0JrVyxPQUFNL2hCLE9BQVM2RixLQUFLaTVELGNBQWM5K0QsTUFBTyxXQUNuRStKLEtBQUs4QixLQUFLLFlBQVlrVyxPQUFNL2tCLGVBQWtCNkksS0FBSyttRSxjQUNuRDdpRSxLQUFLOEIsS0FBSyxtQkFBbUJrVyxNQUFNbGMsS0FBS2duRSxpQkFBaUJ4dUQsS0FBS3hZLFFBWWhFLGNBQWU3RixNQUFPKytELGVBQWlCLFNBQ3JDLytELE1BQU15TSxpQkFDTnpNLE1BQU1reUMsa0JBRU4sTUFBTXJoQyxlQUFpQmxILGNBQWNxMUQscUJBQXFCaC9ELE1BQU8sUUFFM0Q2MEIsV0FBYWh2QixLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUttZ0UsZ0JBQ25DLzZELFVBQVU2QixLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUttZ0UsaUJBQzlCLEdBQ0osSUFBSyxNQUFNcjJELFFBQVFtSSxTQUNabkksTUFBU0EsS0FBSzlKLE1BRWhCLENBQUMsT0FBUSxTQUFVLFFBQVMsT0FBUSxTQUFTZixTQUFTNkssS0FBSzlKLEtBQUtrQyxTQUs5RCtNLFNBQVNDLFVBQVVwRixPQUNsQm1zQixXQUFXaHBCLE1BQUsrWSxJQUFNQSxHQUFHcmlCLE9BQVNtRyxLQUFLOUosS0FBSzJELFFBS2xEc3lCLFdBQVdqM0IsS0FBS29HLFVBQVUwRSxLQUFLOUosY0FFM0JpSCxLQUFLNkMsS0FBS3NILE9BQU8sQ0FBRSxDQUFDLFFBQVErdUQsa0JBQW1CbHFDLGFBR3ZELHVCQUF3QjcwQixPQUN0QixNQUNNcW1ELElBRElybUQsTUFBTWtpQixjQUNGMUcsUUFBUSxTQUNoQm9uQixJQUFNNStCLFVBQVU2QixLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUswbEMsYUFDMUMxQixJQUFJak4sT0FBT2x5QixPQUFPNGlELElBQUl2bkQsUUFBUXNqQixPQUFRLFNBQ2hDdmMsS0FBSzZDLEtBQUtzSCxPQUFPLENBQUUsbUJBQW9CNHlCLE1BRy9DLGtCQUNFLE1BQU1BLElBQU0vOEIsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLMGxDLFlBQzVCdGdDLFVBQVU2QixLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUswbEMsYUFDOUIsR0FDSjFCLElBQUlobEMsS0FBSyxZQUNIaUksS0FBSzZDLEtBQUtzSCxPQUFPLENBQUUsbUJBQW9CNHlCLE1BRy9DZ2dCLGVBQWdCNWlELE1BQU8rK0QsZUFBaUIsU0FDdEMvK0QsTUFBTXlNLGlCQUNOLE1BQU13VixHQUFLekgsRUFBRXhhLE1BQU1raUIsZUFBZThnQyxRQUFRLFNBSXBDN2tELFNBSE8wSCxLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUttZ0UsZ0JBQWdCbHpELE1BQUsxSSxHQUM3Q0EsRUFBRXM3QixNQUFReGMsR0FBR3JqQixLQUFLLGFBRUxBLEtBQUsyaEMsWUFHM0IsR0FBSXRlLEdBQUdta0MsU0FBUyxZQUFhLENBQzNCLE1BQU1obUIsUUFBVW5lLEdBQUdvNkIsU0FBUyxpQkFDNUJqYyxRQUFRK2lCLFFBQVEsS0FBSyxJQUFNL2lCLFFBQVE1dEIsZUFDOUIsQ0FDTCxNQUFNNnpDLElBQU03ckMsRUFBRSw2QkFBNkJyYyxTQUFTK0UsZUFDOUNnekMsTUFBUTE3QixFQUFFLHVDQUVoQjZyQyxJQUFJOW9CLE9BQU8yWSxPQUNYajBCLEdBQUdzYixPQUFPOG9CLElBQUlFLFFBQ2RGLElBQUlJLFVBQVUsS0FFaEJ4a0MsR0FBR2dCLFlBQVksWUFHakIsb0JBQXFCampCLE1BQU8rK0QsZUFBaUIsU0FDM0MsTUFBTUUsVUFBWXprRCxFQUFFeGEsTUFBTWtpQixlQUN2QjhnQyxRQUFRLFNBQ1Jwa0QsS0FBSyxXQUNKcWdFLGlCQUFpQnA1RCxLQUFLcTVELFdBQVdELFVBQVdGLGdCQUdsRCtOLFFBQVN0bUUsT0FBUXU0RCxlQUFpQixTQUNoQyxPQUFPbDVELEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS21nRSxnQkFBZ0JsekQsTUFBSzFJLEdBQ3ZDQSxFQUFFczdCLE1BQVFqNEIsU0FJckIsaUJBQWtCQSxPQUFRdTRELGVBQWlCLFNBQ3pDLE1BQU1FLFVBQVlwNUQsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLbWdFLGdCQUFnQjczQixXQUFVL2pDLEdBQ3ZEQSxFQUFFczdCLE1BQVFqNEIsU0FFbkIsR0FBSXk0RCxXQUFhLEVBQUcsQ0FDbEIsTUFBTXBxQyxXQUFhaHZCLEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS21nRSxnQkFDbkMvNkQsVUFBVTZCLEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS21nRSxpQkFDOUIsR0FDSmxxQyxXQUFXYyxPQUFPc3BDLFVBQVcsU0FDdkJwNUQsS0FBSzZDLEtBQUtzSCxPQUFPLENBQUUsQ0FBQyxRQUFRK3VELGtCQUFtQmxxQyxjQUl6RCw0QkFDRSxPQUFPM0QsWUFBWTNjLE1BQU00YyxlQUFnQixDQUN2Q3hPLFFBQVMsQ0FBQyxPQUFRLFFBQVMsU0FDM0JndUIsTUFBTyxJQUNQQyxPQUFRLElBQ1JQLFNBQVUsQ0FBQyxDQUFFQyxhQUFjLFVBQzNCMFcsUUFBUyxDQUFDLG9CQUNWcUYsS0FBTSxDQUNKLENBQ0VDLFlBQWEsb0JBQ2JDLGdCQUFpQixjQUNqQkMsUUFBUyxrQkFNakIsZUFDRSxNQUFPLDBDQUdUMlMsYUFBY24vRCxPQUNaLE1BQU1paUIsR0FBS2ppQixNQUFNa2lCLGNBQWMxRyxRQUFRLFNBS2pDNGpELFNBQVcsQ0FBRXQrRCxLQUFNLE9BQVFsQyxLQUpuQmlILEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBSzZILE1BQU1vRixNQUFLMUksR0FDcENBLEVBQUVzN0IsTUFBUXhjLEdBQUduakIsUUFBUTBILFVBSTlCeEcsTUFBTStRLGFBQWE2OUIsUUFBUSxhQUFjMXZDLEtBQUtDLFVBQVVpZ0UsV0FHMURwdUQsVUFDRSxNQUFNcFMsS0FBTzJWLE1BQU12RCxVQUVuQnBTLEtBQUsrMUMsUUFBVTl1QyxLQUFLNkMsS0FBS2lzQyxRQUd6QixNQUFNdWMsU0FBV3R5RCxLQUFLQSxLQUN0QkEsS0FBS0EsS0FBT3N5RCxTQUFTdHlELEtBTXJCQSxLQUFLdWpCLE9BQVN2akIsS0FBS0EsS0FBSzZILE1BQU0xSSxRQUFPaW1DLElBQWtCLFVBQVpBLEdBQUdsakMsT0FDOUNsQyxLQUFLbXVFLFdBQWFudUUsS0FBS0EsS0FBSzZILE1BQU0xSSxRQUFPaW1DLElBQWtCLFVBQVpBLEdBQUdsakMsT0FFbERsQyxLQUFLd3RELGVBQXdDLElBQXZCeHRELEtBQUt1akIsT0FBT25rQixPQUNsQ1ksS0FBS291RSxlQUE0QyxJQUEzQnB1RSxLQUFLbXVFLFdBQVcvdUUsT0FDdEMsSUFBSyxNQUFNeUssU0FBUzdKLEtBQUt1akIsT0FFckIxWixNQUFNN0osS0FBS3dtQixpQkFDVjNjLE1BQU1sRyxLQUFLMUUsU0FBUzRLLE1BQU03SixLQUFLd21CLGdCQUVoQzNjLE1BQU0rOEIsWUFBYyxHQUFHLzhCLE1BQU03SixLQUFLd21CLG1CQUFtQjNjLE1BQU1sRyxRQUN0RGtHLE1BQU0rOEIsWUFBYy84QixNQUFNbEcsS0FHbkMzRCxLQUFLdWpCLE9BQU80VSxNQUFLLENBQUMxM0IsRUFBR2lzQixJQUNaanNCLEVBQUVtbUMsWUFBWXNILGNBQWN4aEIsRUFBRWthLGVBR3ZDNW1DLEtBQUs2c0UsS0FBTyxHQUNaN3NFLEtBQUs0Z0UsZUFBaUIsR0FFdEIsSUFBSyxNQUFPNzlELElBQUt1QixTQUFVdEQsT0FBT0MsUUFBUTZiLEtBQUsrdkQsTUFDeEM3c0UsS0FBS0EsS0FBSzZzRSxLQUFLOXBFLE9BQ2xCL0MsS0FBS0EsS0FBSzZzRSxLQUFLOXBFLEtBQU8sR0FDdEIvQyxLQUFLQSxLQUFLNnNFLEtBQUs5cEUsS0FBSzZGLFVBQVcsR0FFakM1SSxLQUFLQSxLQUFLNnNFLEtBQUs5cEUsS0FBS1ksS0FBT2pHLEtBQUtnSixLQUFLQyxTQUFTckMsT0FDOUN0RSxLQUFLQSxLQUFLNnNFLEtBQUs5cEUsS0FBS3NyRSxhQUFlL3BFLE1BR3JDLElBQUssTUFBTTJoQyxTQUFTamxDLE9BQU9DLFFBQVFqQixLQUFLQSxLQUFLNnNFLE1BQ3ZDNW1DLE1BQU0sR0FBR3I5QixVQUFVNUksS0FBSzRnRSxlQUFlNWhFLEtBQUtpbkMsTUFBTSxHQUFHdGlDLE1BTTNELE9BSEEzRCxLQUFLK3NELGtCQUFvQnJ2RCxLQUFLSSxTQUFTRixJQUFJLE9BQVEscUJBRW5Eb0MsS0FBSzZnRSxTQUFXbmpFLEtBQUtvQyxLQUFLeVIsS0FDbkJ2UixLQUdUb3FELGNBQWVocEQsTUFBT21sQixVQUVmQSxTQUFTdm1CLE9BQU11bUIsU0FBV3VOLGFBQWF2TixXQUV4Q0EsU0FBU3ZtQixLQUFLMGxDLGNBQ2hCbmYsU0FBU3ZtQixLQUFLMGxDLFlBQWMxa0MsT0FBT2dNLE9BQ2pDdVosU0FBU3ZtQixNQUFNMGxDLGFBQWUsS0FPQSx3Q0FBOUJ0a0MsTUFBTWtpQixlQUFlM2YsT0FDdkI0aUIsU0FBU3ZtQixLQUFLME4sZ0JBQWdCN0MsTUFBTWtiLFNBQVcza0IsTUFBTWtpQixjQUFjZ3JELFNBR25DLHVDQUE5Qmx0RSxNQUFNa2lCLGVBQWUzZixPQUN2QjRpQixTQUFTdm1CLEtBQUswTixnQkFBZ0JtWSxPQUFPRSxTQUFXM2tCLE1BQU1raUIsY0FDbkRnckQsU0FHTDM0RCxNQUFNeTBDLGNBQWNocEQsTUFBT21sQixXQ3RPeEIsTUFBTWdvRCx1QkFBdUJ0TyxVQUNsQ3R6RCxlQUFnQndQLE1BQ2R4RyxTQUFTd0csTUFDVGxWLEtBQUt3bEUsVUFBWSxRQU9uQiw0QkFDRSxPQUFPbjZDLFlBQVkzYyxNQUFNNGMsZUFBZ0IsQ0FDdkN4TyxRQUFTLENBQUMsT0FBUSxRQUFTLFFBQzNCZ3VCLE1BQU8sSUFDUEMsT0FBUSxJQUNSb1csUUFBUyxDQUFDLG9CQUNWcUYsS0FBTSxDQUNKLENBQ0VDLFlBQWEsb0JBQ2JDLGdCQUFpQixjQUNqQkMsUUFBUyxrQkFTakIsZUFDRSxNQUFPLGdDQUFnQzNtRCxLQUFLNkMsS0FBSzlKLEtBQUtrQyxrQkFXeERrUSxVQUVFLE1BQU1wUyxLQUFPMlYsTUFBTXZELFVBR2JrZ0QsU0FBV3R5RCxLQUFLQSxLQU10QixHQUxBQSxLQUFLQSxLQUFPc3lELFNBQVN0eUQsS0FHckJBLEtBQUswc0UsU0FBK0IsT0FBcEJ6bEUsS0FBSzZDLEtBQUt4RyxNQUVFLFVBQXhCMkQsS0FBSzZDLEtBQUs5SixLQUFLa0MsS0FBa0IsQ0FDbkNsQyxLQUFLaWhELFlBQWMsR0FDbkIsSUFBSyxNQUFPbCtDLElBQUt1QixTQUFVdEQsT0FBT0MsUUFBUTZiLEtBQUt5NUIsaUJBQWtCLENBQy9ELE1BQU1yWixTQUFXLEdBQ2pCQSxTQUFTejZCLEdBQUtNLElBQ2RtNkIsU0FBU3Y1QixLQUFPVyxNQUNoQjQ0QixTQUFTeXZDLFdBQW9ELElBQXhDMWxFLEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS3NyQixXQUFXdm9CLEtBQ3BEL0MsS0FBS2loRCxZQUFZamlELEtBQUtrK0IsVUFHeEJsOUIsS0FBSzRzRSxNQUFRLEdBQ2IsSUFBSyxNQUFPN3BFLElBQUt1QixTQUFVdEQsT0FBT0MsUUFBUTZiLEtBQUsrdkQsTUFBTyxDQUNwRCxNQUFNQyxJQUFNLEdBQ1pBLElBQUlycUUsR0FBS00sSUFDVCtwRSxJQUFJbnBFLEtBQU9XLE1BQ1h3b0UsSUFBSUgsV0FBOEMsSUFBbEMxbEUsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLNnNFLEtBQUs5cEUsS0FDekMvQyxLQUFLNHNFLE1BQU01dEUsS0FBSzh0RSxLQUdsQjlzRSxLQUFLK3NFLGNBQWdCOWxFLEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS3NyQixXQUFXdk4sUUFDcEQvZCxLQUFLZ3RFLGVBQ0YvbEUsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLc3JCLFdBQVduTixVQUMvQmxYLEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBS3NyQixXQUFXcE4sU0FJcEMsT0FEQWxlLEtBQUs2Z0UsU0FBV25qRSxLQUFLb0MsS0FBS3lSLEtBQ25CdlIsS0FTVGtqQixrQkFBbUIvWCxNQUNqQndLLE1BQU11TixrQkFBa0IvWCxNQUVuQmxFLEtBQUtwRixRQUFRZzlDLFVBRWxCMXpDLEtBQUs4QixLQUFLLGtCQUFrQmtXLE1BQU1sYyxLQUFLZ21FLGVBQWV4dEQsS0FBS3hZLE9BSzdELHFCQUFzQjdGLE9BQ3BCQSxNQUFNeU0saUJBQ04sTUFBTTBuQyxXQUFhbjBDLE1BQU1raUIsY0FBYzFHLFFBQVEsa0JBQWtCMWMsUUFDOURnOUIsZUFDR2oyQixLQUFLNkMsS0FBS2k5QyxlQUNkeFIsV0FDQW4wQyxNQUFNQyxTQUNKRCxNQUFNRSxTQUNZLEtBQWxCRixNQUFNRyxTQUNZLE1BQWxCSCxNQUFNRyxVQy9HUCxNQUFNaXRFLHVCQUF1QnZPLFVBQ2xDLDRCQUNFLE9BQU8zdEMsWUFBWTNjLE1BQU00YyxlQUFnQixDQUN2Q2hsQixTQUFVLCtDQUNWd1csUUFBUyxDQUFDLE9BQVEsT0FBUSxTQUMxQmd1QixNQUFPLElBQ1BDLE9BQVEsT0FDUm1ZLFdBQVcsRUFDWC9CLFFBQVMsQ0FBQyxTQUNWcUYsS0FBTSxDQUNKLENBQ0VDLFlBQWEsY0FDYkMsZ0JBQWlCLFFBQ2pCQyxRQUFTLGtCQU1qQixnQkFDRSxNQUFNNXRELEtBQU8yVixNQUFNdkQsVUFDYmtnRCxTQUFXdHlELEtBQUtBLEtBR3RCLE9BRkFBLEtBQUtBLEtBQU9zeUQsU0FBU3R5RCxLQUNyQkEsS0FBSzZnRSxTQUFXbmpFLEtBQUtvQyxLQUFLeVIsS0FDbkJ2UixLQUdUa2pCLGtCQUFtQi9YLE1BQ2pCd0ssTUFBTXVOLGtCQUFrQi9YLE1BQ3hCQSxLQUFLOEIsS0FBSyxXQUFXa1csT0FBTS9oQixPQUFTNkYsS0FBSzA2RCxXQUFXdmdFLFNBQ3BEK0osS0FBSzhCLEtBQUssZUFBZWtXLE9BQU0vaEIsUUFDN0JBLE1BQU15TSxpQkFDTjVHLEtBQUs2QyxLQUFLMmtFLFVBVWQ5TSxXQUFZdmdFLE9BQ1ZBLE1BQU15TSxpQkFFTnpNLE1BQU1reUMsa0JBRU4sT0FEcUIxM0IsRUFBRXhhLE1BQU1raUIsZUFDVHcrQyxPQUFPN0csUUFBUSxVQ3pDaEMsTUFBTXlULHdCQUF3QnpPLFVBSW5DLDRCQUNFLE9BQU8zdEMsWUFBWTNjLE1BQU00YyxlQUFnQixDQUN2Q3hPLFFBQVMsQ0FBQyxPQUFRLFFBQVMsVUFDM0JndUIsTUFBTyxJQUNQQyxPQUFRLElBQ1JvVyxRQUFTLENBQUMsb0JBQ1ZxRixLQUFNLENBQ0osQ0FDRUMsWUFBYSxvQkFDYkMsZ0JBQWlCLGNBQ2pCQyxRQUFTLGtCQVNqQixlQUNFLE1BQU8sMkNBTVR4N0MsVUFFRSxNQUFNcFMsS0FBTzJWLE1BQU12RCxVQUdia2dELFNBQVd0eUQsS0FBS0EsS0FDdEJBLEtBQUtBLEtBQU9zeUQsU0FBU3R5RCxLQUdyQkEsS0FBSzRnRSxlQUFpQixHQUV0QixJQUFLLE1BQU83OUQsSUFBS3VCLFNBQVV0RCxPQUFPQyxRQUFRakIsS0FBS0EsS0FBS2tDLE1BQzlDb0MsT0FDRnRFLEtBQUs0Z0UsZUFBZTVoRSxLQUNsQjhkLEtBQUs2eEQsV0FBVzVyRSxLQUFPK1osS0FBSzZ4RCxXQUFXNXJFLEtBQU8sTUFNcEQsT0FEQS9DLEtBQUs2Z0UsU0FBV25qRSxLQUFLb0MsS0FBS3lSLEtBQ25CdlIsTUNsREosTUFBTTR1RSx3QkFBd0IzTyxVQUluQyw0QkFDRSxPQUFPM3RDLFlBQVkzYyxNQUFNNGMsZUFBZ0IsQ0FDdkN4TyxRQUFTLENBQUMsT0FBUSxRQUFTLFVBQzNCZ3VCLE1BQU8sSUFDUEMsT0FBUSxJQUNSb1csUUFBUyxDQUFDLG9CQUNWcUYsS0FBTSxDQUNKLENBQ0VDLFlBQWEsb0JBQ2JDLGdCQUFpQixjQUNqQkMsUUFBUyxrQkFTakIsZUFDRSxNQUFPLDJDQU1UeDdDLFVBRUUsTUFBTXBTLEtBQU8yVixNQUFNdkQsVUFHYmtnRCxTQUFXdHlELEtBQUtBLEtBQ3RCQSxLQUFLQSxLQUFPc3lELFNBQVN0eUQsS0FHckJBLEtBQUs0Z0UsZUFBaUIsR0FFdEIsSUFBSyxNQUFPNzlELElBQUt1QixTQUFVdEQsT0FBT0MsUUFBUWpCLEtBQUtBLEtBQUtrQyxNQUM5Q29DLE9BQ0Z0RSxLQUFLNGdFLGVBQWU1aEUsS0FDbEI4ZCxLQUFLK3hELFdBQVc5ckUsS0FBTytaLEtBQUsreEQsV0FBVzlyRSxLQUFPLE1BTXBELE9BREEvQyxLQUFLNmdFLFNBQVduakUsS0FBS29DLEtBQUt5UixLQUNuQnZSLE1DdERKLE1BQU04dUUseUJBQXlCcHdCLGVBQ3BDLDRCQUNFLE9BQU9wc0IsWUFBWTNjLE1BQU00YyxlQUFnQixDQUN2Q3hPLFFBQVMsQ0FBQyxPQUFRLFVBQVcsUUFBUyxPQUFRLFdBQzlDZ3VCLE1BQU8sSUFDUEMsT0FBUSxJQUNSbVksV0FBVyxFQUNYNThDLFNBQVUsNkNBQ1Zra0MsU0FBVSxDQUFDLENBQUVDLGFBQWMsU0FBVUMsYUFBYyxjQUNuRDhiLEtBQU0sQ0FDSixDQUNFQyxZQUFhLGFBQ2JDLGdCQUFpQixjQUNqQkMsUUFBUyxrQkFNakIsZ0JBQ0VybkQsR0FBR0MsY0FBY0MsS0FDZi9JLEtBQUtnSixLQUFLQyxTQUFTLHFDQUVyQixNQUFNM0csV0FBYTJWLE1BQU12RCxVQUV6QnBTLEtBQUtzckIsV0FBYSxHQUNkcmtCLEtBQUszRCxNQUFNdEQsS0FBS0EsS0FBS3NyQixXQUFXeWpELE9BQ2xDL3VFLEtBQUtzckIsV0FBV3RzQixLQUFLdEIsS0FBS2dKLEtBQUtDLFNBQVMsc0JBRTFDM0csS0FBS3NELE1BQVEyRCxLQUFLM0QsTUFFbEIsTUFBTTByRSxTQUFXL25FLEtBQUszRCxNQUFNNnlCLFFBQVEsT0FBUSxZQVU1QyxPQVQ0Qm4yQixLQUFLZ3ZFLGNBQTdCMWlFLElBQWMwaUUsVUFDR0EsU0FDakJodkUsS0FBS2d2RSxTQUNQaHZFLEtBQUs2QixRQUFRbXdDLE9BQVMsSUFDakJoeUMsS0FBSzZCLFFBQVFtd0MsT0FBUyxPQUt0Qmh5QyxLQUdUa2pCLGtCQUFtQi9YLE1BQ2pCd0ssTUFBTXVOLGtCQUFrQi9YLE1BQ3hCQSxLQUFLOEIsS0FBSyxjQUFja1csT0FBTS9rQixlQUFrQjZJLEtBQUtnb0UsZ0JBQ3JEOWpFLEtBQ0c4QixLQUFLLGlCQUNMa1csT0FBTS9rQixNQUFBQSxhQUFxQjZJLEtBQUtpb0UsZUFBZTl0RSxTQUNsRCtKLEtBQUs4QixLQUFLLGtCQUFrQmtXLE1BQU1sYyxLQUFLa29FLGdCQUFnQjF2RCxLQUFLeFksT0FROUQsd0JBQ0UsTUFBTStuRSxTQUFXL25FLEtBQUszRCxNQUFNNnlCLFFBQVEsT0FBUSxZQUN4QzY0QyxVQUNGL25FLEtBQUttb0UsUUFBVW5vRSxLQUFLK0wsU0FBU2cvQixPQUM3Qi9xQyxLQUFLK0wsU0FBU2cvQixPQUFTLFFBRXZCL3FDLEtBQUsrTCxTQUFTZy9CLE9BQVMvcUMsS0FBS21vRSxTQUFXLFVBRW5Dbm9FLEtBQUszRCxNQUFNd3ZCLFFBQVEsT0FBUSxZQUFhazhDLFVBR2hELG9CQUNFLE1BQU01TCxVQUFZaCtELFVBQ2hCNkIsS0FBSzNELE1BQU10RCxLQUFLQSxLQUFLd1EsUUFBUThnQixNQUFNOHhDLFdBQWEsSUFFbERBLFVBQVVwa0UsS0FBSyxDQUFFMkUsS0FBTSxLQUFNVyxNQUFPLGFBQzlCMkMsS0FBSzNELE1BQU04TixPQUFPLENBQUUsK0JBQWdDZ3lELFlBRzVELHFCQUFzQmhpRSxPQUNwQixNQUVNb2lCLE1BRlNwaUIsTUFBTWtpQixjQUNHMUcsUUFBUSxVQUNUMWMsUUFBUXNqQixNQUN6QjQvQyxVQUFZaCtELFVBQ2hCNkIsS0FBSzNELE1BQU10RCxLQUFLQSxLQUFLd1EsUUFBUThnQixNQUFNOHhDLFdBQWEsTUFFN0NBLFlBQ0xBLFVBQVVyc0MsT0FBT3ZULE1BQU8sU0FDbEJ2YyxLQUFLM0QsTUFBTThOLE9BQU8sQ0FBRSwrQkFBZ0NneUQsYUFHNUR2aEIsZUFDRWxzQyxNQUFNa3NDLGVBU1I4bEIsZUFBZ0J4aUMsV0FBYSxJQUczQixJQUFJbmxDLEtBRE8sSUFBSTJ6QixpQkFBaUIxc0IsS0FBS3lzQixLQUFNLENBQUVrMEMsUUFBUzNnRSxLQUFLMmdFLFVBQzdDaDBDLFdBS2QsR0FKZ0I1ekIsS0FBWm1sQyxXQUFtQjdTLFlBQVl0eUIsS0FBTW1sQyxZQUM3QnJSLGFBQWE5ekIsTUFHckJBLEtBQUtBLEtBQUt3USxRQUFROGdCLE9BQU8rOUMsVUFBVyxDQUN0QyxNQUFNLzlDLE1BQVF0eEIsS0FBS0EsTUFBTXdRLFFBQVE4Z0IsTUFDN0JBLFFBQ0ZBLE1BQU04eEMsVUFBWXBpRSxPQUFPZ00sT0FDdkJza0IsT0FBTzh4QyxXQUFhbjhELEtBQUszRCxNQUFNdEQsS0FBS0EsS0FBS3dRLFFBQVE4Z0IsTUFBTTh4QyxXQUFhLEtBTTFFLE9BQU84RSxjQUFjbG9FLE9DakhsQixNQUFNc3ZFLHdCQUF3QnJQLFVBSW5DLDRCQUNFLE9BQU8zdEMsWUFBWTNjLE1BQU00YyxlQUFnQixDQUN2Q3hPLFFBQVMsQ0FBQyxPQUFRLFFBQVMsUUFDM0JndUIsTUFBTyxJQUNQQyxPQUFRLElBQ1J5YixLQUFNLENBQ0osQ0FDRUMsWUFBYSxjQUNiQyxnQkFBaUIsY0FDakJDLFFBQVMsYUFTakIsZUFFRSxNQUFPLGlEQU9UeDdDLFVBQ0UsTUFBTXBTLEtBQU8yVixNQUFNdkQsVUFDbkJwUyxLQUFLdXZFLE9BQVMsQ0FBQyxTQUFVLFNBQVUsV0FFbkMsTUFBTWpkLFNBQVd0eUQsS0FBS0EsS0FDdEJBLEtBQUtBLEtBQU9zeUQsU0FBU3R5RCxLQUdyQkEsS0FBSzBzRSxTQUE4QixNQUFuQnpsRSxLQUFLNkMsS0FBS3hHLE1BQ3RCdEQsS0FBSzBzRSxXQUFVMXNFLEtBQUt1RCxTQUFXMEQsS0FBSzZDLEtBQUt4RyxNQUFNQyxVQUVuRHZELEtBQUt3dkUsWUFBYyxHQUNmeHZFLEtBQUswc0UsV0FDUDFzRSxLQUFLeXZFLGNBQWdCeG9FLEtBQUszRCxNQUFNbXNFLGNBQ2hDenZFLEtBQUswdkUsZUFBaUJ6b0UsS0FBSzNELE1BQU1vc0UsZUFDakMxdkUsS0FBS3d2RSxZQUFjdm9FLEtBQUs2QyxLQUFLeEcsTUFBTXVFLE1BQU0xSSxRQUFPMkssUUFDNUIsVUFBZEEsS0FBSzVILE9BQ0g0SCxLQUFLOUosS0FBS0EsS0FBS3NyQixXQUFXck4sVUFPbENqZSxLQUFLd3ZFLFlBQVlyM0MsTUFBSyxDQUFDMTNCLEVBQUdpc0IsS0FDeEIsSUFBSXVxQixJQUNBQyxJQVlKLE9BWEl6MkMsRUFBRVQsS0FBS3NyQixZQUFjb0IsRUFBRTFzQixLQUFLc3JCLFlBQzlCMnJCLElBQU14MkMsRUFBRVQsS0FBS3NyQixXQUFXdk4sUUFDcEJ0ZCxFQUFFVCxLQUFLd21CLGVBQWUxakIsY0FBZ0JyQyxFQUFFa0QsS0FBS2IsY0FDN0NyQyxFQUFFa0QsS0FBS2IsY0FDWG8wQyxJQUFNeHFCLEVBQUUxc0IsS0FBS3NyQixXQUFXdk4sUUFDcEIyTyxFQUFFMXNCLEtBQUt3bUIsZUFBZTFqQixjQUFnQjRwQixFQUFFL29CLEtBQUtiLGNBQzdDNHBCLEVBQUUvb0IsS0FBS2IsZ0JBRVhtMEMsSUFBTXgyQyxFQUFFa0QsS0FBS2IsY0FDYm8wQyxJQUFNeHFCLEVBQUUvb0IsS0FBS2IsZUFFUm0wQyxJQUFJL0ksY0FBY2dKLFNBSTdCbDNDLEtBQUtpaEQsWUFBYyxHQUNuQixJQUFLLE1BQU9sK0MsSUFBS3VCLFNBQVV0RCxPQUFPQyxRQUFRNmIsS0FBS2luQixrQkFBbUIsQ0FDaEUsTUFBTTdHLFNBQVcsR0FDakJBLFNBQVN6NkIsR0FBS00sSUFDZG02QixTQUFTdjVCLEtBQU9XLE1BQ2hCNDRCLFNBQVN5dkMsV0FBb0QsSUFBeEMxbEUsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLc3JCLFdBQVd2b0IsS0FDcEQvQyxLQUFLaWhELFlBQVlqaUQsS0FBS2srQixVQUduQmoyQixLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUsydkUsUUFBTzFvRSxLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUsydkUsTUFBUSxJQUU1RDN2RSxLQUFLNHNFLE1BQVEsR0FDYixJQUFLLE1BQU83cEUsSUFBS3VCLFNBQVV0RCxPQUFPQyxRQUFRNmIsS0FBSyt2RCxNQUFPLENBQ3BELE1BQU1DLElBQU0sR0FDUDdsRSxLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUsydkUsTUFBTTVzRSxPQUFNa0UsS0FBSzZDLEtBQUs5SixLQUFLQSxLQUFLMnZFLE1BQU01c0UsS0FBTyxHQUN0RStwRSxJQUFJNkMsTUFBUTFvRSxLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUsydkUsTUFBTTVzRSxLQUN0QytwRSxJQUFJcnFFLEdBQUtNLElBQ1QrcEUsSUFBSW5wRSxLQUFPVyxNQUNYd29FLElBQUlILFdBQThDLElBQWxDMWxFLEtBQUs2QyxLQUFLOUosS0FBS0EsS0FBSzZzRSxLQUFLOXBFLEtBQ3pDL0MsS0FBSzRzRSxNQUFNNXRFLEtBQUs4dEUsS0FRbEIsT0FOQTlzRSxLQUFLK2dELG9CQUNxQyxJQUF4Qzk1QyxLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUtzckIsV0FBVzFNLE9BQ1MsSUFBeEMzWCxLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUtzckIsV0FBVzNNLE9BQ1csSUFBMUMxWCxLQUFLNkMsS0FBSzlKLEtBQUtBLEtBQUtzckIsV0FBVy9NLE9BRWpDdmUsS0FBSzZnRSxTQUFXbmpFLEtBQUtvQyxLQUFLeVIsS0FDbkJ2UixLQVNUa2pCLGtCQUFtQi9YLE1BQ2pCd0ssTUFBTXVOLGtCQUFrQi9YLE1BR25CbEUsS0FBS3BGLFFBQVFnOUMsV0FDbEIxekMsS0FBSzhCLEtBQUssa0JBQWtCa1csTUFBTWxjLEtBQUtnbUUsZUFBZXh0RCxLQUFLeFksT0FDM0RrRSxLQUFLOEIsS0FBSyxvQkFBb0JrVyxNQUFNbGMsS0FBSzJvRSxpQkFBaUJud0QsS0FBS3hZLFFBT2pFLHFCQUFzQjdGLE9BQ3BCQSxNQUFNeU0saUJBQ04sTUFBTTBuQyxXQUFhbjBDLE1BQU1raUIsY0FBYzFHLFFBQVEsa0JBQWtCMWMsUUFDOURnOUIsU0FFRzJ5QyxZQURNenVFLE1BQU1raUIsY0FBY3VZLGNBQWMzN0IsUUFBUXdQLElBQzVCLElBQU02bEMsV0FDMUJ1NkIsZ0JBQWtCN29FLEtBQUt5c0IsS0FBS3E4QyxTQUFTQyxVQUFVSCxhQUVqREMsZ0JBQWdCeEIsUUFBU3dCLGdCQUFnQnhCLFNBQVUsRUFDbER3QixnQkFBZ0J4QixTQUFVLEVBRS9CbHRFLE1BQU1nVSxPQUFPeFUsVUFBVTZPLE9BQU8scUJBQ3hCeEksS0FBSzZkLFVBQVUxakIsT0FHdkIsdUJBQXdCQSxPQUN0QkEsTUFBTXlNLGlCQUNOLE1BQU1xdkIsU0FBVzk3QixNQUFNa2lCLGNBQWMxRyxRQUFRLG9CQUFvQjFjLFFBQzlEZzlCLFNBQ0c1VCxTQUFXbG9CLE1BQU1raUIsY0FBYzFHLFFBQVEsV0FBVzFjLFFBQVEwSCxPQUMxRHJFLFNBQVduQyxNQUFNa2lCLGNBQWMxRyxRQUFRLFdBQVcxYyxRQUFRcUQsU0FDaEUsSUFBSXlLLE9BQVMsS0FDYixHQUFJekssU0FBVSxDQUVaeUssT0FEYyt4QixTQUFTdjhCLGdCQUFnQkQsVUFDeEJzRSxNQUFNakssSUFBSTByQixlQUV6QnRiLE9BQVN0USxLQUFLbUssTUFBTWpLLElBQUkwckIsZ0JBRXBCdGIsT0FBTys0QyxlQUFlN3BCLFdDdkp6QixTQUFTK3lDLFNBQ2RsZ0UsTUFBTTZyRCxLQUFLLFFBQVF4OUQsVUNBbkJRLE9BQU80TyxNQUFNK2tELGNBQWdCeHlCLFNBQzdCbmhDLE9BQU80TyxNQUFNNG5DLGdCQUFrQixHQUMvQngyQyxPQUFPczJDLEtBQUtxZCxjQUFnQnRqRCxTQUM1QnJRLE9BQU9zMkMsS0FBS0UsZ0JBQWtCLENBQzVCaXBCLEtBQU1DLFNBQ05sRyxNQUFPdUYsV0NOK0J2L0QsaUJBMEJqQzh4RSxjQXhCZSxDQUNwQix3REFDQSxzREFDQSx5REFDQSxzREFDQSxpRUFFQSwyREFDQSxpRUFDQSw0REFDQSwyREFDQSw0REFDQSxvRUFDQSxnRUFDQSxrREFDQSxrREFDQSx3REFDQSx1REFFQSxpREFDQSxvREZuQkFDLEdHUEcsV0F5WUwsR0FyWUF6eUUsS0FBS0ksU0FBU3N5RSxTQUFTLE9BQVEsWUFBYSxDQUMxQ3pzRSxLQUFNLHFCQUNOODlCLEtBQU0seUJBQ040dUMsTUFBTyxRQUNQOTVDLFFBQVEsRUFDUjVQLFNBQVMsRUFDVHprQixLQUFNMFQsVUFFUmxZLEtBQUtJLFNBQVNzeUUsU0FBUyxPQUFRLHlCQUEwQixDQUN2RHpzRSxLQUFNLGtDQUNOODlCLEtBQU0sc0NBQ040dUMsTUFBTyxRQUNQOTVDLFFBQVEsRUFDUjVQLFNBQVMsRUFDVHprQixLQUFNMFQsVUFFUmxZLEtBQUtJLFNBQVNzeUUsU0FBUyxPQUFRLHdCQUF5QixDQUN0RHpzRSxLQUFNLGlDQUNOODlCLEtBQU0scUNBQ040dUMsTUFBTyxRQUNQOTVDLFFBQVEsRUFDUjVQLFNBQVMsRUFDVHprQixLQUFNMFQsVUFPUmxZLEtBQUtJLFNBQVNzeUUsU0FBUyxPQUFRLGlCQUFrQixDQUMvQ3pzRSxLQUFNLDBCQUNOODlCLEtBQU0sOEJBQ040dUMsTUFBTyxRQUNQOTVDLFFBQVEsRUFDUjVQLFFBQVMsUUFDVHprQixLQUFNeUwsT0FDTnNrQyxRQUFTLENBQ1AveEIsTUFBTywrQkFDUGtFLFNBQVUsbUNBRVprc0QsU0FBVUMsTUFBUUMsc0JBQXNCRCxRQUcxQzd5RSxLQUFLSSxTQUFTc3lFLFNBQVMsT0FBUSxtQkFBb0IsQ0FDakR6c0UsS0FBTSw0QkFDTjg5QixLQUFNLGdDQUNONHVDLE1BQU8sUUFDUDk1QyxRQUFRLEVBQ1I1UCxTQUFTLEVBQ1R6a0IsS0FBTTBULFVBR1JsWSxLQUFLSSxTQUFTc3lFLFNBQVMsT0FBUSxvQkFBcUIsQ0FDbER6c0UsS0FBTSw2QkFDTjg5QixLQUFNLGlDQUNONHVDLE1BQU8sUUFDUDk1QyxRQUFRLEVBQ1I1UCxTQUFTLEVBQ1R6a0IsS0FBTTBULFVBT1JsWSxLQUFLSSxTQUFTc3lFLFNBQVMsT0FBUSxnQkFBaUIsQ0FDOUN6c0UsS0FBTSx5QkFDTjg5QixLQUFNLDZCQUNONHVDLE1BQU8sUUFDUDk1QyxRQUFRLEVBQ1I1UCxTQUFTLEVBQ1R6a0IsS0FBTTBULFVBR1JsWSxLQUFLSSxTQUFTc3lFLFNBQVMsT0FBUSx3QkFBeUIsQ0FDdER6c0UsS0FBTSxpQ0FDTjg5QixLQUFNLHFDQUNONHVDLE1BQU8sUUFDUDk1QyxRQUFRLEVBQ1I1UCxTQUFTLEVBQ1R6a0IsS0FBTTBULFVBR1JsWSxLQUFLSSxTQUFTc3lFLFNBQVMsT0FBUSw2QkFBOEIsQ0FDM0R6c0UsS0FBTSxzQ0FDTjg5QixLQUFNLDBDQUNONHVDLE1BQU8sUUFDUDk1QyxRQUFRLEVBQ1I1UCxTQUFTLEVBQ1R6a0IsS0FBTTBULFVBRVJsWSxLQUFLSSxTQUFTc3lFLFNBQVMsT0FBUSx5QkFBMEIsQ0FDdkR6c0UsS0FBTSw2QkFDTjg5QixLQUFNLGlDQUNONHVDLE1BQU8sUUFDUDk1QyxRQUFRLEVBQ1I1UCxRQUFTLFVBQ1R6a0IsS0FBTXlMLE9BQ05za0MsUUFBUyxDQUNQNXFDLFFBQVMsa0NBQ1R1RyxRQUFTLHFDQUdibFEsS0FBS0ksU0FBU3N5RSxTQUFTLE9BQVEsd0JBQXlCLENBQ3REenNFLEtBQU0saUNBQ044OUIsS0FBTSxxQ0FDTjR1QyxNQUFPLFFBQ1A5NUMsUUFBUSxFQUNSNVAsUUFBUyxXQUNUemtCLEtBQU15TCxPQUNOc2tDLFFBQVMsQ0FDUHcrQixPQUFRLHVCQUNSMW5ELE9BQVEsNEJBQ1IybkQsU0FBVSw4QkFRZGh6RSxLQUFLSSxTQUFTc3lFLFNBQVMsT0FBUSxxQkFBc0IsQ0FDbkR6c0UsS0FBTSw4QkFDTjg5QixLQUFNLGtDQUNONHVDLE1BQU8sUUFDUDk1QyxRQUFRLEVBQ1I1UCxTQUFTLEVBQ1R6a0IsS0FBTTBULFVBRVJsWSxLQUFLSSxTQUFTc3lFLFNBQVMsT0FBUSwyQkFBNEIsQ0FDekR6c0UsS0FBTSxvQ0FDTjBzRSxNQUFPLFNBQ1A5NUMsUUFBUSxFQUNSNVAsU0FBUyxFQUNUemtCLEtBQU0wVCxVQUVSbFksS0FBS0ksU0FBU3N5RSxTQUFTLE9BQVEsb0JBQXFCLENBQ2xEenNFLEtBQU0sNkJBQ04wc0UsTUFBTyxTQUNQOTVDLFFBQVEsRUFDUjVQLFNBQVMsRUFDVHprQixLQUFNMFQsVUFHUmxZLEtBQUtJLFNBQVNzeUUsU0FBUyxPQUFRLFdBQVksQ0FDekN6c0UsS0FBTSxvQkFDTjg5QixLQUFNLHdCQUNONHVDLE1BQU8sUUFDUDk1QyxRQUFRLEVBQ1I1UCxTQUFTLEVBQ1R6a0IsS0FBTTBULFVBTVJsWSxLQUFLSSxTQUFTc3lFLFNBQVMsT0FBUSxvQkFBcUIsQ0FDbER6c0UsS0FBTSw2QkFDTjg5QixLQUFNLGlDQUNONHVDLE1BQU8sUUFDUDk1QyxRQUFRLEVBQ1JyMEIsS0FBTTBULFFBQ04rUSxTQUFTLElBRVhqcEIsS0FBS0ksU0FBU3N5RSxTQUFTLE9BQVEsYUFBYyxDQUMzQ3pzRSxLQUFNLDhCQUNOODlCLEtBQU0sa0NBQ040dUMsTUFBTyxRQUNQOTVDLFFBQVEsRUFDUjVQLFNBQVMsRUFDVHprQixLQUFNMFQsVUFFUmxZLEtBQUtJLFNBQVNzeUUsU0FBUyxPQUFRLG9CQUFxQixDQUNsRHpzRSxLQUFNLDBCQUNOODlCLEtBQU0sOEJBQ040dUMsTUFBTyxRQUNQOTVDLFFBQVEsRUFDUjVQLFNBQVMsRUFDVHprQixLQUFNMFQsVUFNUmxZLEtBQUtJLFNBQVNzeUUsU0FBUyxPQUFRLHNCQUF1QixDQUNwRHpzRSxLQUFNLCtCQUNOODlCLEtBQU0sbUNBQ040dUMsTUFBTyxRQUNQOTVDLFFBQVEsRUFDUjVQLFNBQVMsRUFDVHprQixLQUFNMFQsVUFFSmxZLEtBQUtJLFNBQVNGLElBQUksT0FBUSx5QkFDNUJGLEtBQUtJLFNBQVNzeUUsU0FBUyxPQUFRLGdCQUFpQixDQUM5Q3pzRSxLQUFNLHlCQUNOODlCLEtBQU0sNkJBQ040dUMsTUFBTyxRQUNQOTVDLFFBQVEsRUFDUjVQLFFBQVMsMENBQ1R6a0IsS0FBTXlMLFNBRVJqUSxLQUFLSSxTQUFTc3lFLFNBQVMsT0FBUSxlQUFnQixDQUM3Q3pzRSxLQUFNLHdCQUNOODlCLEtBQU0sNEJBQ040dUMsTUFBTyxRQUNQOTVDLFFBQVEsRUFDUjVQLFFBQVMscUNBQ1R6a0IsS0FBTXlMLFVBT1ZqUSxLQUFLSSxTQUFTc3lFLFNBQVMsT0FBUSwyQkFBNEIsQ0FDekR6c0UsS0FBTSxvQ0FDTjBzRSxNQUFPLFFBQ1A5NUMsUUFBUSxFQUNSNVAsU0FBUyxFQUNUemtCLEtBQU0wVCxVQUVSbFksS0FBS0ksU0FBU3N5RSxTQUFTLE9BQVEsZUFBZ0IsQ0FDN0N6c0UsS0FBTSxvQkFDTjBzRSxNQUFPLFFBQ1A5NUMsUUFBUSxFQUNSNVAsUUFBUyxJQUNUemtCLEtBQU0yQyxTQUVSbkgsS0FBS0ksU0FBU3N5RSxTQUFTLE9BQVEsZ0JBQWlCLENBQzlDenNFLEtBQU0seUJBQ04wc0UsTUFBTyxRQUNQOTVDLFFBQVEsRUFDUjVQLFNBQVMsRUFDVHprQixLQUFNMFQsVUFHUmxZLEtBQUtJLFNBQVNzeUUsU0FBUyxPQUFRLHdCQUF5QixDQUN0RHpzRSxLQUFNLGlDQUNOMHNFLE1BQU8sUUFDUDk1QyxRQUFRLEVBQ1I1UCxRQUFTLFNBQ1R6a0IsS0FBTXlMLE9BQ05za0MsUUFBUyxDQUNQMCtCLE9BQVEsMEJBQ1JDLFNBQVUsNEJBQ1ZDLE1BQU8sNEJBSVhuekUsS0FBS0ksU0FBU3N5RSxTQUFTLE9BQVEsdUJBQXdCLENBQ3JEenNFLEtBQU0sZ0NBQ044OUIsS0FBTSxvQ0FDTjR1QyxNQUFPLFFBQ1A5NUMsUUFBUSxFQUNSNVAsU0FBUyxFQUNUemtCLEtBQU0wVCxVQUVSbFksS0FBS0ksU0FBU3N5RSxTQUFTLE9BQVEsb0JBQXFCLENBQ2xEenNFLEtBQU0sNkJBQ044OUIsS0FBTSxpQ0FDTjR1QyxNQUFPLFFBQ1A5NUMsUUFBUSxFQUNSNVAsU0FBUyxFQUNUemtCLEtBQU0wVCxVQUVSbFksS0FBS0ksU0FBU3N5RSxTQUFTLE9BQVEsdUJBQXdCLENBQ3JEenNFLEtBQU0sZ0NBQ044OUIsS0FBTSxvQ0FDTjR1QyxNQUFPLFFBQ1A5NUMsUUFBUSxFQUNSNVAsU0FBUyxFQUNUemtCLEtBQU0wVCxVQUVKbFksS0FBS0ksU0FBU0YsSUFBSSxPQUFRLDBCQUM1QkYsS0FBS0ksU0FBU3N5RSxTQUFTLE9BQVEseUJBQTBCLENBQ3ZEenNFLEtBQU0sa0NBQ044OUIsS0FBTSxzQ0FDTjR1QyxNQUFPLFFBQ1A5NUMsUUFBUSxFQUNSNVAsUUFBUyxrREFDVHprQixLQUFNeUwsU0FFUmpRLEtBQUtJLFNBQVNzeUUsU0FBUyxPQUFRLDZCQUE4QixDQUMzRHpzRSxLQUFNLHNDQUNOMHNFLE1BQU8sUUFDUDk1QyxRQUFRLEVBQ1I1UCxRQUFTLFFBQ1R6a0IsS0FBTXlMLE9BQ05za0MsUUFBUyxDQUNQenRDLE1BQU8sMkJBQ1BvYSxLQUFNLDBCQUNOa3lELFFBQVMsNkJBQ1RsbUQsTUFBTyw4QkFHWGx0QixLQUFLSSxTQUFTc3lFLFNBQVMsT0FBUSw4QkFBK0IsQ0FDNUR6c0UsS0FBTSx1Q0FDTjg5QixLQUFNLDJDQUNONHVDLE1BQU8sUUFDUDk1QyxRQUFRLEVBQ1I1UCxRQUFTLDBDQUNUemtCLEtBQU15TCxTQUVSalEsS0FBS0ksU0FBU3N5RSxTQUFTLE9BQVEsb0JBQXFCLENBQ2xEenNFLEtBQU0sNkJBQ044OUIsS0FBTSxpQ0FDTjR1QyxNQUFPLFFBQ1A5NUMsUUFBUSxFQUNSNVAsUUFBUyx3Q0FDVHprQixLQUFNeUwsU0FFUmpRLEtBQUtJLFNBQVNzeUUsU0FBUyxPQUFRLG9CQUFxQixDQUNsRHpzRSxLQUFNLDZCQUNOODlCLEtBQU0saUNBQ040dUMsTUFBTyxRQUNQOTVDLFFBQVEsRUFDUjVQLFFBQVMsbUJBQ1R6a0IsS0FBTXlMLFNBRVJqUSxLQUFLSSxTQUFTc3lFLFNBQVMsT0FBUSx5QkFBMEIsQ0FDdkR6c0UsS0FBTSxrQ0FDTjg5QixLQUFNLHNDQUNONHVDLE1BQU8sUUFDUDk1QyxRQUFRLEVBQ1I1UCxRQUFTLG9CQUNUemtCLEtBQU15TCxTQUVSalEsS0FBS0ksU0FBU3N5RSxTQUFTLE9BQVEsMEJBQTJCLENBQ3hEenNFLEtBQU0sbUNBQ044OUIsS0FBTSx1Q0FDTjR1QyxNQUFPLFFBQ1A5NUMsUUFBUSxFQUNSNVAsUUFBUyxvQkFDVHprQixLQUFNeUwsU0FFUmpRLEtBQUtJLFNBQVNzeUUsU0FBUyxPQUFRLDBCQUEyQixDQUN4RHpzRSxLQUFNLG1DQUNOODlCLEtBQU0sdUNBQ040dUMsTUFBTyxRQUNQOTVDLFFBQVEsRUFDUjVQLFNBQVMsRUFDVHprQixLQUFNMFQsVUFFUmxZLEtBQUtJLFNBQVNzeUUsU0FBUyxPQUFRLGtCQUFtQixDQUNoRHpzRSxLQUFNLDJCQUNOMHNFLE1BQU8sUUFDUDk1QyxRQUFRLEVBQ1I1UCxRQUFTLEdBQ1R6a0IsS0FBTXlMLFNBRVJqUSxLQUFLSSxTQUFTc3lFLFNBQVMsT0FBUSxzQkFBdUIsQ0FDcER6c0UsS0FBTSwrQkFDTjBzRSxNQUFPLFFBQ1A5NUMsUUFBUSxFQUNSNVAsUUFBUyxHQUNUemtCLEtBQU15TCxTQUVSalEsS0FBS0ksU0FBU3N5RSxTQUFTLE9BQVEsc0JBQXVCLENBQ3BEenNFLEtBQU0sK0JBQ04wc0UsTUFBTyxRQUNQOTVDLFFBQVEsRUFDUjVQLFFBQVMsR0FDVHprQixLQUFNMkMsVUFPVm5ILEtBQUtJLFNBQVNzeUUsU0FBUyxPQUFRLHVCQUF3QixDQUNyRHpzRSxLQUFNLGdDQUNOODlCLEtBQU0sb0NBQ040dUMsTUFBTyxRQUNQOTVDLFFBQVEsRUFDUjVQLFNBQVMsRUFDVHprQixLQUFNMFQsVUFFUmxZLEtBQUtJLFNBQVNzeUUsU0FBUyxPQUFRLGdCQUFpQixDQUM5Q3pzRSxLQUFNLHlCQUNOODlCLEtBQU0sNkJBQ040dUMsTUFBTyxRQUNQOTVDLFFBQVEsRUFDUjVQLFNBQVMsRUFDVHprQixLQUFNMFQsVUFNSmxZLEtBQUtDLFFBQVFDLElBQUksaUJBQWlCQyxPQUFRLENBQzVDSCxLQUFLSSxTQUFTc3lFLFNBQVMsT0FBUSxhQUFjLENBQzNDenNFLEtBQU0sc0JBQ044OUIsS0FBTSwwQkFDTjR1QyxNQUFPLFFBQ1A5NUMsUUFBUSxFQUNSNVAsU0FBUyxFQUNUemtCLEtBQU0wVCxVQUVSLE1BQU9xN0MsU0FBV3Z6RCxLQUFLQyxRQUFRQyxJQUFJLGlCQUFpQm9DLEtBQUtpeEQsUUFBUS90RCxNQUFNLE1BQ2xFK0gsTUFBTXBHLE9BQU9vc0QsV0FBYXBzRCxPQUFPb3NELFVBQVksSUFDaER2ekQsS0FBS0ksU0FBU3N5RSxTQUFTLE9BQVEsY0FBZSxDQUM1Q3pzRSxLQUFNLHVCQUNOODlCLEtBQU0sMkJBQ040dUMsTUFBTyxTQUNQOTVDLFFBQVEsRUFDUjVQLFFBQVMsU0FDVHprQixLQUFNeUwsU0FFUmpRLEtBQUtJLFNBQVNzeUUsU0FBUyxPQUFRLGdCQUFpQixDQUM5Q3pzRSxLQUFNLHlCQUNOODlCLEtBQU0sNkJBQ040dUMsTUFBTyxTQUNQOTVDLFFBQVEsRUFDUjVQLFFBQVMsWUFDVHprQixLQUFNeUwsVUEyRVosU0FBUzZpRSxzQkFBdUJELE1BQzlCLElBQUlRLFNBQVcsRUFDZixPQUFRUixNQUNOLElBQUssV0FDSFEsU0FBVyxFQUNYLE1BQ0YsSUFBSyxRQUNIQSxTQUFXLEVBR2ZueUUsT0FBT295RSxPQUFPcGhCLFdBQWEsQ0FDekJ4dkQsUUFBUyxLQUNUMndFLFVBL0VKcnpFLEtBQUtJLFNBQVNzeUUsU0FBUyxPQUFRLFlBQWEsQ0FDMUN6c0UsS0FBTSxxQkFDTjg5QixLQUFNLHlCQUNONHVDLE1BQU8sUUFDUDk1QyxRQUFRLEVBQ1JyMEIsS0FBTTBULFFBQ04rUSxTQUFTLElBRVhqcEIsS0FBS0ksU0FBU3N5RSxTQUFTLE9BQVEsdUJBQXdCLENBQ3JEenNFLEtBQU0sb0NBQ044OUIsS0FBTSx3Q0FDTjR1QyxNQUFPLFFBQ1A5NUMsUUFBUSxFQUNScjBCLEtBQU0wVCxRQUNOK1EsU0FBUyxJQUtYanBCLEtBQUtJLFNBQVNzeUUsU0FBUyxPQUFRLHFCQUFzQixDQUNuRHpzRSxLQUFNLHFCQUNOMHNFLE1BQU8sUUFDUDk1QyxRQUFRLEVBQ1JyMEIsS0FBTTBULFFBQ04rUSxTQUFTLElBR1hqcEIsS0FBS0ksU0FBU3N5RSxTQUFTLE9BQVEscUJBQXNCLENBQ25EenNFLEtBQU0sOEJBQ044OUIsS0FBTSw4QkFDTjR1QyxNQUFPLFFBQ1A5NUMsUUFBUSxFQUNSNVAsU0FBUyxFQUNUemtCLEtBQU0wVCxVQUVSbFksS0FBS0ksU0FBU3N5RSxTQUFTLE9BQVEsc0JBQXVCLENBQ3BEenNFLEtBQU0sd0JBQ04wc0UsTUFBTyxRQUNQOTVDLFFBQVEsRUFDUnIwQixLQUFNMFQsUUFDTitRLFNBQVMsSUFFWGpwQixLQUFLSSxTQUFTc3lFLFNBQVMsT0FBUSxzQkFBdUIsQ0FDcER6c0UsS0FBTSx3QkFDTjBzRSxNQUFPLFFBQ1A5NUMsUUFBUSxFQUNScjBCLEtBQU15TCxPQUNOZ1osUUFBU2pwQixLQUFLNFAsT0FBT3ROLEtBQUtpeEQsVUFFNUJ2ekQsS0FBS0ksU0FBU3N5RSxTQUFTLE9BQVEsNkJBQThCLENBQzNEQyxNQUFPLFFBQ1A5NUMsUUFBUSxFQUNSNVAsUUFBUyxLQUVYanBCLEtBQUtJLFNBQVNzeUUsU0FBUyxPQUFRLFlBQWEsQ0FDMUN6c0UsS0FBTSxpQkFDTjBzRSxNQUFPLFFBQ1A5NUMsUUFBUSxFQUNScjBCLEtBQU0wVCxRQUNOK1EsU0FBUyxJQUdYL25CLE9BQU9veUUsT0FBT3BoQixXQUFhLENBQ3pCeHZELFFBQVMsNkJBQ1Qyd0UsU0FBVSxHQUVabnlFLE9BQU84dEMsTUFBTXVrQyxRQUFVdnpFLEtBQUtJLFNBQVNGLElBQUksT0FBUSxhQWdCakQ0eUUsc0JBQXNCOXlFLEtBQUtJLFNBQVNGLElBQUksT0FBUSxtQkFFaERnQixPQUFPQyxLQUFLQyxNQUFNQyxFQUFJOGdFLGVIdGZwQnFSLEdJV0ZDLE9BQU9DLGdCQUFnQixPQUFRenlCLFlBQy9Cd3lCLE9BQU9FLGNBQWMsT0FBUWpvQixhQUFjLENBQ3pDa29CLE1BQU8sQ0FBQyxPQUNSQyxhQUFhLElBRWZKLE9BQU9FLGNBQWMsT0FBUXZDLGlCQUFrQixDQUM3Q3dDLE1BQU8sQ0FBQyxXQUNSQyxhQUFhLElBRWZKLE9BQU9FLGNBQWMsT0FBUTVtQixrQkFBbUIsQ0FDOUM2bUIsTUFBTyxDQUFDLFlBQ1JDLGFBQWEsSUFFZkosT0FBT0UsY0FBYyxPQUFRclAsbUJBQW9CLENBQy9Dc1AsTUFBTyxDQUFDLGFBQ1JDLGFBQWEsSUFFZkosT0FBT0UsY0FBYyxPQUFRdFAsbUJBQW9CLENBQUV1UCxNQUFPLENBQUMsZUFDM0RILE9BQU9FLGNBQWMsT0FBUTNtQixxQkFBc0IsQ0FDakQ0bUIsTUFBTyxDQUFDLGFBQ1JDLGFBQWEsSUFFZkMsTUFBTUosZ0JBQWdCLE9BQVFuUixXQUM5QnVSLE1BQU1ILGNBQWMsT0FBUTlDLGVBQWdCLENBQzFDK0MsTUFBTyxDQUFDLFNBQ1JDLGFBQWEsSUFFZkMsTUFBTUgsY0FBYyxPQUFRL0IsZ0JBQWlCLENBQzNDZ0MsTUFBTyxDQUFDLFVBQ1JDLGFBQWEsSUFFZkMsTUFBTUgsY0FBYyxPQUFRdlEsY0FBZSxDQUN6Q3dRLE1BQU8sQ0FBQyxRQUNSQyxhQUFhLElBRWZDLE1BQU1ILGNBQWMsT0FBUTdDLGVBQWdCLENBQzFDOEMsTUFBTyxDQUFDLFNBQ1JDLGFBQWEsSUFFZkMsTUFBTUgsY0FBYyxPQUFRekMsZ0JBQWlCLENBQzNDMEMsTUFBTyxDQUFDLFVBQ1JDLGFBQWEsSUFFZkMsTUFBTUgsY0FBYyxPQUFRM0MsZ0JBQWlCLENBQzNDNEMsTUFBTyxDQUFDLFVBQ1JDLGFBQWEsSUFFZkMsTUFBTUgsY0FBYyxPQUFRbEUsb0JBQXFCLENBQy9DbUUsTUFBTyxDQUFDLGNBQ1JDLGFBQWEsSUFFZkMsTUFBTUgsY0FBYyxPQUFRclIsbUJBQW9CLENBQzlDc1IsTUFBTyxDQUFDLGFBQ1JDLGFBQWEsSUFFZkMsTUFBTUgsY0FBYyxPQUFRdEQsZUFBZ0IsQ0FDMUN1RCxNQUFPLENBQUMsU0FDUkMsYUFBYSxJQUVmQyxNQUFNSCxjQUFjLE9BQVFqUCxlQUFnQixDQUMxQ2tQLE1BQU8sQ0FBQyxTQUNSQyxhQUFhLElBRWZDLE1BQU1ILGNBQWMsT0FBUW5FLGNBQWUsQ0FBRW9FLE1BQU8sQ0FBQyxVQUNyREUsTUFBTUgsY0FBYyxPQUFRN0UsZ0JBQWlCLENBQzNDOEUsTUFBTyxDQUFDLFFBQ1JDLGFBQWEsSUNwRmZFLFdBQVdDLGVBQWUsZ0JBQWdCLFNBQVVudUUsVUFFbEQsT0FEWS9CLFdBQVcwVCxtQkFBbUIzUixXQUVuQywyQ0NOSixNQUFNZ2lELGFBQ1g1NEMsY0FDRTFGLEtBQUs2K0MsYUFBZSxLQUNwQjcrQyxLQUFLOCtDLGFBQWUsS0FHdEJFLGVBQWdCRCxTQUNkLFFBQWlDLElBQXRCLytDLEtBQUs2K0MsYUFBOEIsQ0FDNUMsTUFBTTZyQixPQUFTMXFFLEtBQUs2K0MsYUFBYW5JLHdCQUNqQyxJQUFLMXlDLE1BQU0wbUUsT0FBTzErRCxNQUFRLE1BQVFoSSxNQUFNMG1FLE9BQU96K0QsS0FBTyxJQUFLLENBQ3pELElBQUlELEtBQU8wK0QsT0FBTzErRCxLQUNkQyxJQUFNeStELE9BQU96K0QsSUFDakIsTUFBTTArRCxXQUFhaDJELEVBQUUzVSxLQUFLNitDLGNBQWMrckIsY0FDeENqMkQsRUFBRSxRQUFRK2lCLE9BQU8sMEJBQTRCcW5CLFFBQVUsVUFDdkQsTUFBTXpJLElBQU0zaEMsRUFBRSxpQkFDUmsyRCxVQUFZdjBCLElBQUlzMEIsY0FDaEJFLFNBQVd4MEIsSUFBSXkwQixhQUNqQnIvRCxPQUFPb3JDLFlBQTJCLElBQWI2ekIsV0FBbUJFLFVBQVk1K0QsSUFDdERBLEtBQVk0K0QsVUFFWjUrRCxLQUF5QixJQUFiMCtELFdBRVZqL0QsT0FBT2tyQyxXQUFhazBCLFNBQVc5K0QsT0FDakNBLEtBQU9OLE9BQU9rckMsV0FBYWswQixVQUU3QngwQixJQUFJMlEsSUFBSSxDQUNOajdDLEtBQU1BLEtBQU8sS0FDYkMsSUFBS0EsSUFBTSxTQU1uQnN5QyxhQUFjcGtELE9BQ1IxRCxLQUFLNm5ELGFBQWFPLGVBQWlCMWtELE1BQU1raUIsZ0JBQzNDMnVELGFBQWF2MEUsS0FBSzZuRCxhQUFhUSxjQUMvQnJvRCxLQUFLNm5ELGFBQWFPLGFBQWUsS0FDakNscUMsRUFBRSxpQkFBaUJoSSxXQzlCbEIsTUFBTXMrRCxVQUFZLENBQ3ZCakMsU0FDRSxTQ0pGbGdFLE1BQU02ckQsS0FBSyxTQUFTeDlELFVBQ2xCa2xDLFFBQVFvdUIsSUFBSSx1Q0FDUmgwRCxLQUFLSSxTQUFTRixJQUFJLE9BQVEsdUJBQXlCRixLQUFLb0MsS0FBS3lSLEtBSWpFN1QsS0FBSzZuRCxhQUFlLElBQUlBLGdCQ1QxQngxQyxNQUFNNlUsR0FBRyxvQkFBb0J4bUIsTUFBTzRCLEtBQU1tTCxLQUFNdEosZUNBaERrTyxNQUFNNlUsR0FBRyxxQkFBcUIsU0NEOUI3VSxNQUFNNlUsR0FBRyxnQkFBZ0IsQ0FBQ3V0RCxPQUFRaG5FLFFBQ2hDLE1BQU11b0IsS0FBT3ZvQixLQUFLOEIsS0FBSyxRQUN2QixHQUFJeW1CLEtBQUs0YyxHQUFHLG1CQUFvRCxJQUEvQjVjLEtBQUt6bUIsS0FBSyxVQUFVN04sT0FBYyxDQUNqRSxNQUFNZ3pFLHNCQUF3QjErQyxLQUFLem1CLEtBQUssaUJBQ2xDb2xFLGlCQUFtQixHQUNuQkMsbUJBQXFCNTBFLEtBQUtJLFNBQVNGLElBQ3ZDLE9BQ0Esd0JBRUZ3MEUsc0JBQXNCMzBCLFdBQVc2UixNQUFLLENBQUNtRSxFQUFHOGUsZ0JBQ3hDLE1BQU14dkUsSUFBTXd2RSxhQUFhQyxhQUFhQyxhQUNsQy8wRSxLQUFLZ0osS0FBS2dzRSxJQUFJLGlCQUFpQjN2RSxTQUNqQ3d2RSxhQUFhQyxZQUFjOTBFLEtBQUtnSixLQUFLQyxTQUFTLGlCQUFpQjVELFNBRy9EdXZFLGtCQUNDLENBQUMsUUFBUyxZQUFhLFdBQVdyekUsU0FBU3N6RSxhQUFhanVFLFFBRXpEK3RFLGlCQUFpQnJ6RSxLQUFLdXpFLGlCQUcxQkgsc0JBQXNCTyxRQUN0QlAsc0JBQXNCenpDLE9BQ3BCMHpDLGlCQUFpQmw2QyxNQUFLLENBQUNtc0MsTUFBT3NPLFNBQzVCdE8sTUFBTTNnRCxVQUFVdXFCLGNBQWMwa0MsT0FBT2p2RCxjQUdMLFVBQWhDeXVELHNCQUFzQmo0QixNQUN4Qmk0QixzQkFBc0JqNEIsSUFBSSxhQUNlLFNBQWhDaTRCLHNCQUFzQmo0QixPQUMvQmk0QixzQkFBc0JqNEIsSUFBSSxZQzdCaENwcUMsTUFBTTZVLEdBQUcsbUJBQW1CeG1CLE1BQU80QixLQUFNbUwsS0FBTXRKLGVDQS9Da08sTUFBTTZVLEdBQUcsZUFBZXhtQixNQUFPNEIsS0FBTW1MLEtBQU10SixXQUNyQ25FLEtBQUtJLFNBQVNGLElBQUksT0FBUSx5QkFDcUMsU0FBN0RGLEtBQUtJLFNBQVNGLElBQUksT0FBUSxpQkFBaUJrRixlQUM3Q3FJLEtBQUs4QixLQUFLLE9BQU8yRyxTQUUrQixJQUE5Q2xXLEtBQUtJLFNBQVNGLElBQUksT0FBUSxrQkFDNUJ1TixLQUFLOEIsS0FBSyxPQUFPNCtCLEtBQUssTUFBT251QyxLQUFLSSxTQUFTRixJQUFJLE9BQVEsa0JBR3JELElBQU1GLEtBQUtJLFNBQVNGLElBQUksT0FBUSxpQkFDbEN1TixLQUFLOEIsS0FBSyxNQUFNOUIsS0FBS3pOLEtBQUtJLFNBQVNGLElBQUksT0FBUSx1QkNKdkRRLGVBQWV5MEUsa0JBQW1CN3lFLE1BQ2hDLE1BQU04eUUsWUFBYyxJQUFJL3JELGdCQUN0Qi9tQixLQUFLbVYsVUFDTG5WLEtBQUtnYyxVQUNMaGMsS0FBS3NSLGFBRVB3aEUsWUFBWWxyRCxhQUFlNW5CLEtBQUt1RCxTQUVoQyxhQURzQnV2RSxZQUFZMW5DLGlCQUlwQ2h0QyxlQUFlMjBFLGNBQWUveUUsTUFDNUIsSUFDRSxJQUFJc0QsTUFFRkEsTUFERXRELEtBQUswRCxNQUNDaEcsS0FBS3NILE9BQU9wSCxJQUFJb0MsS0FBSzBELE9BQU9OLE9BQU94RixJQUFJb0MsS0FBS29tRCxXQUFXOWlELE1BRXZENUYsS0FBS3lGLE9BQU92RixJQUFJb0MsS0FBS29tRCxXQUUvQixNQUFNdDhDLEtBQU94RyxNQUFNdUUsTUFBTWpLLElBQUlvQyxLQUFLOEosWUFDWnBNLEtBQUt5RixPQUN4QnZGLElBQUlvQyxLQUFLcW1ELFNBQ1Rqa0Isd0JBQXdCLE9BQVEsQ0FBQ3Q0QixLQUFLcUUsWUFFdkM3SyxNQUFNMHZFLHdCQUF3QixPQUFRLENBQUNscEUsS0FBS3JILEtBRTlDLE1BQU9vK0IsR0FFUCxPQURBdDZCLEdBQUdDLGNBQWNzTixNQUFNK3NCLElBQ2hCLEVBRVQsT0FBTyxFQythVCxTQUFTb3lDLGFBQWM3eEUsT0FDckIsT0FBT0EsTUFBTTJNLFNBOWJmZ0MsTUFBTTZVLEdBQUcsd0JBQXdCLENBQUNuSCxJQUFLdFMsS0FBTXRKLFdBQzNDLE1BQU1xeEUsVUFBWXQzRCxFQUFFNkIsSUFBSWlXLE1BQU16bUIsS0FBSyx5QkFDbkNpbUUsVUFDR2ptRSxLQUFLLGdDQUNMMlAsUUFBUSxrQkFDUnUyRCxPQUNDLDhCQUNFejFFLEtBQUtnSixLQUFLQyxTQUFTLHVCQUNuQixTQUVOdXNFLFVBQ0dqbUUsS0FBSyxzQ0FDTDJQLFFBQVEsa0JBQ1J1MkQsT0FDQyw4QkFDRXoxRSxLQUFLZ0osS0FBS0MsU0FBUyw0QkFDbkIsU0FFTnVzRSxVQUNHam1FLEtBQUssb0NBQ0wyUCxRQUFRLGtCQUNSdTJELE9BQ0MsOEJBQ0V6MUUsS0FBS2dKLEtBQUtDLFNBQVMsc0JBQ25CLFNBRU51c0UsVUFDR2ptRSxLQUFLLHlDQUNMMlAsUUFBUSxrQkFDUnUyRCxPQUNDLDhCQUNFejFFLEtBQUtnSixLQUFLQyxTQUFTLDJCQUNuQixTQUVOdXNFLFVBQ0dqbUUsS0FBSyx3Q0FDTDJQLFFBQVEsa0JBQ1J1MkQsT0FDQyw4QkFDRXoxRSxLQUFLZ0osS0FBS0MsU0FBUyx1QkFDbkIsU0FFTnVzRSxVQUNHam1FLEtBQUssMENBQ0wyUCxRQUFRLGtCQUNSdTJELE9BQ0MsOEJBQ0V6MUUsS0FBS2dKLEtBQUtDLFNBQVMsNkJBQ25CLFNBRU51c0UsVUFDR2ptRSxLQUFLLCtDQUNMMlAsUUFBUSxrQkFDUnUyRCxPQUNDLDhCQUNFejFFLEtBQUtnSixLQUFLQyxTQUFTLHVCQUNuQixTQUVOdXNFLFVBQ0dqbUUsS0FBSywyQ0FDTDJQLFFBQVEsa0JBQ1J1MkQsT0FDQyw4QkFDRXoxRSxLQUFLZ0osS0FBS0MsU0FBUyx3QkFDbkIsU0FFTnVzRSxVQUNHam1FLEtBQUssaUNBQ0wyUCxRQUFRLGtCQUNSdTJELE9BQ0MsOEJBQ0V6MUUsS0FBS2dKLEtBQUtDLFNBQVMsNEJBQ25CLFNBRU51c0UsVUFDR2ptRSxLQUFLLGdDQUNMMlAsUUFBUSxrQkFDUnUyRCxPQUNDLDhCQUNFejFFLEtBQUtnSixLQUFLQyxTQUFTLGdDQUNuQixTQUVOdXNFLFVBQ0dqbUUsS0FBSyxpREFDTDJQLFFBQVEsa0JBQ1J1MkQsT0FDQyw4QkFDRXoxRSxLQUFLZ0osS0FBS0MsU0FBUywyQkFDbkIsWUFJUm9KLE1BQU02ckQsS0FBSyxtQkFBbUJoOEQsU0FDNUJBLE9BQU93ekUsY0FDTCxDQUNFbHhFLEtBQU0sS0FDTm0xQyxPQUFRLENBQUMsS0FBTSxLQUFNLEtBQU0sS0FBTSxLQUFNLEtBQU0sS0FBTSxLQUFNLEtBQU0sTUFDL0RnOEIsVUFBVyxJQUNYL2xFLE9BQVEsWUFFVixTQUlKeUMsTUFBTTZyRCxLQUFLLFFBQVF4OUQsaUJBQ2pCVixLQUFLdzFCLEtBQU8sQ0FDVjlqQixPQUFRLENBQ050QixXQUFZL0MsY0FBY3VvRSxnQkFDMUJqbEUsWUFBYXRELGNBQWN3b0UsaUJBQzNCanFFLE1BQU95QixjQUFjeW9FLFlBRXZCcmdELE1BQU8sQ0FDTG9CLGFBR0p5OEMsT0FBT3JuQixVQUFVNEcsZUFBaUJBLGtCQUdwQ3hnRCxNQUFNNlUsR0FBRyx1QkFBdUIsQ0FBQ25ILElBQUt0UyxLQUFNbkwsT0FDMUNrdkQsV0FBV3VrQixvQkFBb0JoMkQsSUFBS3RTLEtBQU1uTCxRQ3ZJMUMrUCxNQUFNNlUsR0FBRyxlQUFlLENBQUN6WixLQUFNekksV0FFN0IsR0FBSUEsUUFBUTBJLE1BQU0sZ0JBQWlCLENBRWpDLE1BQU1zb0UsU0FBV2h4RSxRQUFRMEksTUFBTSxVQWdDL0IsT0EvQklzb0UsU0FDRixJQUFJMTFFLEtBQUssU0FBU0QsS0FBSyxDQUFFSyxPQUFPLElBQVF3RSxNQUFLa0ksSUFDM0MsTUFBTXZHLEVBQUl1RyxFQUFFek0sT0FDTnMxRSxJQUFNRCxTQUNUaHVFLEtBQUk0SixJQUNILElBQUlxa0UsSUFBTSxHQWNWLE9BYllBLElBQVJwdkUsR0FBSyxFQUFTN0csS0FBS2dKLEtBQUtDLFNBQVMsd0JBQzVCcEMsR0FBSyxJQUFXN0csS0FBS2dKLEtBQUtDLFNBQVMsZUFDbkNwQyxHQUFLK0ssRUFBSSxFQUNWNVIsS0FBS2dKLEtBQUtDLFNBQVMsdUJBQ2hCcEMsR0FBSytLLEVBQUksRUFDWjVSLEtBQUtnSixLQUFLQyxTQUFTLG9CQUNoQnBDLEdBQUsrSyxFQUFTNVIsS0FBS2dKLEtBQUtDLFNBQVMsdUJBQ25DcEMsR0FBSyxJQUNSK0ssRUFBSSxHQUFVNVIsS0FBS2dKLEtBQUtDLFNBQVMsZUFFMUJqSixLQUFLZ0osS0FBS0MsU0FBUyxnQkFFaENndEUsS0FBTyxJQUFNajJFLEtBQUtnSixLQUFLQyxTQUFTLGNBQWdCLElBQU0ySSxFQUMvQ3FrRSxPQUVScG9FLEtBQUssT0FDUlQsRUFBRXlCLFVBQVUsQ0FDVnZLLFFBQVN0QyxZQUFZdUMsYUFDckJGLE9BQVE0eEUsU0FJWnB0RSxHQUFHQyxjQUFjc04sTUFBTSwrQkFHbEIsTUR1R2JvK0QsVUFBVWpDLFNBRVZsZ0UsTUFBTTZyRCxLQUFLLG1CRG5KSixXQUNMbCtELEtBQUtpaUMsV0FBYWkwQyxVQUFVQyxlQUFlLFFBQzNDbjJFLEtBQUtpaUMsV0FBV3l3QyxTQUFTLG9CQUFxQnlDLG1CQUM5Q24xRSxLQUFLaWlDLFdBQVd5d0MsU0FBUyxnQkFBaUIyQyxrQkNrSjVDaGpFLE1BQU02ckQsS0FBSyxTQUFTLFdBRWxCLE1BQU1rWSxXQUFhLENBQ2pCLGtCQUNBLFdBQ0EsYUFDQSx1QkFDQSxjQUdGLElBQUssTUFBTXJnQixLQUFLcWdCLFdBQVksQ0FDMUIsTUFBTXpFLFVBQVlydUUsT0FBT0MsUUFBUTZiLEtBQUsyMkMsSUFBSS90RCxLQUFJbTdCLEdBQ3JDLENBQUNBLEVBQUUsR0FBSW5qQyxLQUFLZ0osS0FBS0MsU0FBU2s2QixFQUFFLE9BRXJDL2pCLEtBQUsyMkMsR0FBSzRiLFVBQVV0NEIsUUFBTyxDQUFDMXlDLElBQUt3OEIsS0FDL0J4OEIsSUFBSXc4QixFQUFFLElBQU1BLEVBQUUsR0FDUHg4QixNQUNOLElBR0wsSUFBSTB2RSxZQUFjbjFFLE9BQU9vMUUsY0FBYzFyQyxXQUFVdnBDLEdBQWMsU0FBVEEsRUFBRTBELE1BQ25DLElBQWpCc3hFLGNBQ0ZuMUUsT0FBT28xRSxjQUFjRCxhQUFheitDLEtBQ2hDLDJDQUVKeStDLFlBQWNuMUUsT0FBT28xRSxjQUFjMXJDLFdBQVV2cEMsR0FBYyxnQkFBVEEsRUFBRTBELE1BQy9CLElBQWpCc3hFLGNBQ0ZuMUUsT0FBT28xRSxjQUFjRCxhQUFheitDLEtBQ2hDLG1EQUVKMTJCLE9BQU9vMUUsY0FBY0MsUUFDbkIsQ0FDRXh4RSxHQUFJLGdCQUNKNEssTUFBTyx5QkFDUGlvQixLQUFNLGdEQUVSLENBQ0U3eUIsR0FBSSxXQUNKNEssTUFBTyxvQkFDUGlvQixLQUFNLGlEQUVSLENBQ0U3eUIsR0FBSSxpQkFDSjRLLE1BQU8saUJBQ1Bpb0IsS0FBTSwyQ0FFUixDQUNFN3lCLEdBQUksUUFDSjRLLE1BQU8sUUFDUGlvQixLQUFNLGlEQUtadmxCLE1BQU02VSxHQUFHLGNBQWN4bUIsTUFBT21RLElBQUt2TyxLQUFNd08sT0FDdkN6RCxjQUFjbXBFLFlBQVkzbEUsSUFBS3ZPLEtBQU13TyxRQUd2Q3VCLE1BQU02VSxHQUFHLGlCQUFpQixDQUFDbkgsSUFBS3RTLEtBQU1uTCxPQUNwQzBxQixTQUFTeXBELGNBQWMxMkQsSUFBS3RTLEtBQU1uTCxRQUVwQytQLE1BQU02VSxHQUFHLHFCQUFxQixDQUFDbkgsSUFBS3RTLEtBQU1uTCxPQUN4QzBxQixTQUFTMHBELGtCQUFrQjMyRCxJQUFLdFMsS0FBTW5MLFFBRXhDK1AsTUFBTTZVLEdBQUcscUJBQXFCLENBQUM5SSxZQUFhdmMsU0FBVTgwRSxLQUFNcnlFLFVBQzFEMG9CLFNBQVM0cEQsb0JBQW9CeDRELFlBQWF2YyxTQUFVODBFLEtBQU1yeUUsV0FHNUQrTixNQUFNNlUsR0FBRyxTQUFTeG1CLFVBdUNoQixTQUFTbTJFLHNCQUF1QjFpQixNQUFPcHZELElBQ2xCL0UsS0FBS3cxQixLQUFLMk8sT0FBT2d3QixPQUF6QixTQUFQcHZELEdBQXlDLEtBQ2QvRSxLQUFLbWtDLE9BQU9qa0MsSUFBSTZFLFVBeEMzQ291RCxRQUFRMmpCLGlCQWdORDU0RCxFQUFFLFFBQ1ZnSixHQUFHLFFBQVMsc0JBQXVCeGQsVUFBVXF0RSxvQkFDbEQvekUsU0FBU21qRCxpQkFBaUIsWUFBYW92QixjQVF2Q3lCLFFBQVFDLGNBQWM5ekUsSUFBSSxzQkFBc0IsU0FBVXd5QyxRQUN4REEsT0FBT3p1QixHQUFHLFFBQVF4akIsT0FBU2c1QixXQUFXdzZDLGFBQWF4ekUsTUFBT2l5QyxhQUs1RHowQyxPQUFPaTJFLFFBQVFDLFFBQVUsc0JBQXNCbDJFLE9BQU9pMkUsUUFBUUMsVUF0TjlEcDNFLEtBQUt3MUIsS0FBS3VSLGdCQUFrQi9tQyxLQUFLbVIsTUFBTWpSLElBQUksZ0JBQWdCaTFELGdCQUUzRG4xRCxLQUFLa1MsT0FBT2dWLEdBQUcsZUFBZXhtQixNQUFBQSxPQUc1QixHQUZrQixlQUFkNEIsS0FBS2tDLE1BQXVCNkksY0FBYytFLG1CQUUxQ3BTLEtBQUtvQyxLQUFLeVIsT0FDUjJsQixpQkFBaUJoQixjQUFjaDBCLE9BQVNsQyxLQUFLa0MsTUFDL0NnMUIsaUJBQWlCa3VCLFNBQVNwbEQsTUFHeEJ3NEIsa0JBQWtCdEMsY0FBY2gwQixPQUFTbEMsS0FBS2tDLE1BQ2hEczJCLGtCQUFrQjRzQixTQUFTcGxELE1BR1gsV0FBZEEsS0FBS2tDLE1BQW1CLFFBQ1BrNUMsU0FBU3A3QyxLQUFLOEosT0FDNUI5SixLQUFLNnFFLFFBQVE3cUUsS0FBS0EsVUFxQjdCLE1BQU0rMEUsWUFBYyxDQUFFQyxLQUFNLDRCQUM1QixJQUFLLE1BQU1qMkUsS0FBS3JCLEtBQUtta0MsT0FDbkJrekMsWUFBWWgyRSxFQUFFaUIsS0FBSzYvQixLQUFPOWdDLEVBQUVpQixLQUFLMkQsS0FHbkNqRyxLQUFLSSxTQUFTc3lFLFNBQVMsT0FBUSw0QkFBNkIsQ0FDMUR6c0UsS0FBTSxxQ0FDTjBzRSxNQUFPLFFBQ1A5NUMsUUFBUSxFQUNSNVAsUUFBUyxPQUNUemtCLEtBQU15TCxPQUNOc2tDLFFBQVM4aUMsWUFDVHpFLFNBQVU3dEUsSUFBTTh4RSxzQkFBc0Isd0JBQXlCOXhFLE1BR2pFL0UsS0FBS0ksU0FBU3N5RSxTQUFTLE9BQVEsNkJBQThCLENBQzNEenNFLEtBQU0sc0NBQ04wc0UsTUFBTyxRQUNQOTVDLFFBQVEsRUFDUjVQLFFBQVMsT0FDVHprQixLQUFNeUwsT0FDTnNrQyxRQUFTOGlDLFlBQ1R6RSxTQUFVN3RFLElBQU04eEUsc0JBQXNCLHlCQUEwQjl4RSxNQTJDbEUvRSxLQUFLdzFCLEtBQUsyTyxPQUFTLENBQ2pCb3pDLHNCQUM2RCxTQUEzRHYzRSxLQUFLSSxTQUFTRixJQUFJLE9BQVEsNkJBQ3RCLEtBQ0FGLEtBQUtta0MsT0FBT2prQyxJQUNWRixLQUFLSSxTQUFTRixJQUFJLE9BQVEsOEJBRWxDczNFLHVCQUM4RCxTQUE1RHgzRSxLQUFLSSxTQUFTRixJQUFJLE9BQVEsOEJBQ3RCLEtBQ0FGLEtBQUtta0MsT0FBT2prQyxJQUNWRixLQUFLSSxTQUFTRixJQUFJLE9BQVEsbUNBV3RDbVMsTUFBTTZVLEdBQ0osd0JBQ1csQ0FBQ25ILElBQUt0UyxLQUFNbkwsT0FDVm9pRSxlQUFlK1MsVUFBVTEzRCxJQUFLdFMsS0FBTW5MLFFBR25EK1AsTUFBTTZVLEdBQUcsdUJBQXVCLENBQUNuSCxJQUFLdFMsT0FDcENpM0QsZUFBZWdULFFBQVEzM0QsSUFBS3RTLFFBSTlCNEUsTUFBTTZVLEdBQUcsbUJBQW1CeXdELGdCQUFrQkEsZUFBZXh6QixpQkFDN0Q5eEMsTUFBTTZVLEdBQUcsMkJBQTJCLENBQUNuSCxJQUFLdFMsS0FBTW5MLE9BQzlDeXFELGtCQUFrQkQsVUFBVS9zQyxJQUFLdFMsS0FBTW5MLFFBRXpDK1AsTUFBTTZVLEdBQUcsc0JBQXNCLENBQUNuSCxJQUFLdFMsS0FBTW5MLE9BQ3pDb3BELGFBQWFvQixVQUFVL3NDLElBQUt0UyxLQUFNbkwsUUFLcEMrUCxNQUFNNlUsR0FBRyxjQUFlN1osY0FBY3VxRSxnQkFLdEN2bEUsTUFBTTZVLEdBQUcsMEJBQTBCLFNBd0JuQzdVLE1BQU02VSxHQUFHLGtCQUFtQndWLFdBQVdtN0MsbUJBQ3ZDeGxFLE1BQU02VSxHQUFHLHFCQUFzQndWLFdBQVdtN0MsbUJBQzFDeGxFLE1BQU02VSxHQUFHLG1CQUFvQndWLFdBQVdtN0MsbUJBSXhDeGxFLE1BQU02VSxHQUFHLHFCQUFxQixDQUFDbkgsSUFBS3RTLEtBQU1uTCxRQUN4QzBxQixTQUFTOHFELHNCQUFzQi8zRCxJQUFLdFMsS0FBTW5MLE1BQzFDbzZCLFdBQVdxN0MsYUFBYWg0RCxJQUFLdFMsS0FBTW5MLFNBSXJDK1AsTUFBTTZVLEdBQUcsbUJBQW9COGxDLHFCQUFxQjluQixhQUNsRDd5QixNQUFNNlUsR0FBRyxrQkFBbUI4bEMscUJBQXFCOW5CLGFBR2pEN3lCLE1BQU02VSxHQUFHLHlCQUEwQnEzQyxTQUFTeVosWUFDNUMzbEUsTUFBTTZVLEdBQUcsc0JBQXVCcTNDLFNBQVMwWixnQkFFekM1bEUsTUFBTTZVLEdBQUcsaUJBQWtCazRDLFdBQVc4WSxpQkFFdEM3bEUsTUFBTTZVLEdBQUcsc0JFemFGLFNBQTZCdGhCLE1BQU9xTyxNQUFPM1IsTUFDaEQsR0FBa0IsU0FBZEEsS0FBS2tDLE1BQW1CbEMsS0FBS3NLLFFBQVMsQ0FDeEMsR0FBSWhILE1BQU10RCxLQUFLNi9CLE1BQVE3L0IsS0FBS3NLLFFBQzFCLE9BRUYsSUFBSTg3QyxVQUFZLEtBTWhCLE9BSkVBLFVBREVwbUQsS0FBS2dELFNBQVdoRCxLQUFLaUQsUUFDWHZGLEtBQUtzSCxPQUFPcEgsSUFBSW9DLEtBQUtnRCxTQUFTSSxPQUFPeEYsSUFBSW9DLEtBQUtpRCxTQUFTSyxNQUV2RDVGLEtBQUt5RixPQUFPdkYsSUFBSW9DLEtBQUtzSyxTQUUzQmhILE1BQU10RCxLQUFLa0MsTUFDakIsSUFBSyxZQUNMLElBQUssTUFDTCxJQUFLLFdBQ0gsSUFBSyxDQUFDLFNBQVNqRCxTQUFTZSxLQUFLQSxLQUFLa0MsTUFDaEMsT0FFRixNQUNGLElBQUssVUFDSCxPQUNGLElBQUssWUFDSCxJQUFLLENBQUMsT0FBUSxPQUFRLFFBQVMsVUFBVWpELFNBQVNlLEtBQUtBLEtBQUtrQyxNQUMxRCxPQUdGa2tELFdBQ0ZBLFVBQVU0c0Isd0JBQXdCLE9BQVEsQ0FBQ2h6RSxLQUFLQSxLQUFLNi9CLFVGOGIzRGpoQyxPQUFPMkgsR0FBRzQ2QyxXQUFha2Msd0JBQ3ZCeitELE9BQU8ySCxHQUFHcEQsT0FBU3M2RCxvQiIsInNvdXJjZXMiOlsid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9kaWNlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2hlbHBlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvdXRpbGl0aWVzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NhcmQtYWN0b3IuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jb25maWcuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY29uY2hlY2suanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvc2tpbGwtc2VsZWN0aW9uLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9wb2ludC1zZWxlY3Rpb24tZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NoYXItc2VsZWN0aW9uLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jaGFyLXJvbGwtZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL3NraWxsLXNwZWMtc2VsZWN0LWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jb21iYXQvbWVsZWUtcmVzb2x1dGlvbi5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jb21iYXQvbWVsZWUtdGFyZ2V0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L3JhbmdlY29tYmF0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2ludGVyYWN0aXZlLWNoYXQtY2FyZC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jYXJkcy9kYW1hZ2UuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY2FyZHMvcm9sbC1jYXJkLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NhcmRzL29wcG9zZWQtcm9sbC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jYXJkcy9jb21iaW5lZC1yb2xsLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NvbWJhdC9tZWxlZS1pbml0aWF0b3IuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9ycy9hY3Rvci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9za2lsbC12YWx1ZS1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvbGluay5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9saW5rLWNyZWF0aW9uLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9wYXJzZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL2l0ZW0uanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoZWNrLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL3JvbGwtZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL3NhbmRhdGEtZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvc2hlZXRzL2Jhc2UuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9ycy9zaGVldHMvbnBjLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvc2hlZXRzL2NyZWF0dXJlLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvc2hlZXRzL2NoYXJhY3Rlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY29tYmF0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS91cGRhdGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2FjdG9yLWltcG9ydGVyLXJlZ2V4cC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9hY3Rvci1pbXBvcnRlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9hY3Rvci1pbXBvcnRlci1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL21lbnUuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvY2FudmFzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jb21wZW5kaXVtLWRpcmVjdG9yeS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3ItZGlyZWN0b3J5LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zcGVsbC9kYXRhLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9ib29rL2RhdGEuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvZGVjYWRlci1kaWUuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy9hcmNoZXR5cGUuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL2Jvb2svc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9ycy9zaGVldHMvY2hhcmFjdGVyLXYxLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvc2hlZXRzL2NvbnRhaW5lci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL2NoYXNlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvaXRlbS1zaGVldFYyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvaXRlbS1zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL29jY3VwYXRpb24uanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy9zZXR1cC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL3NraWxsLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zcGVsbC9zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL3N0YXR1cy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL3RhbGVudC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3JzL3NoZWV0cy92ZWhpY2xlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvd2VhcG9uLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9pbml0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL2NvbmZpZ3VyZS1kb2N1bWVudHMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvbG9hZC10ZW1wbGF0ZXMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvcmVnaXN0ZXItc2V0dGluZ3MuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvcmVnaXN0ZXItc2hlZXRzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL2hhbmRsZWJhcnMtaGVscGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL3Rvb2x0aXBzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvcmVhZHkuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlbmRlci1hY3Rvci1zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvcmVuZGVyLWNoYXQtbWVzc2FnZS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvcmVuZGVyLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvcmVuZGVyLWl0ZW0tc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlbmRlci1wYXVzZS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3Mvc29ja2V0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jb2M3LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9kaWNlYm90LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9kcm9wLWFjdG9yLXNoZWV0LWRhdGEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIENoYXRNZXNzYWdlLCBDT05GSUcsIGdhbWUsIFJvbGwgKi9cblxuZXhwb3J0IGNsYXNzIENvQzdEaWNlIHtcbiAgc3RhdGljIGFzeW5jIHJvbGwgKG1vZGlmID0gMCwgcm9sbE1vZGUgPSBudWxsLCBoaWRlRGljZSA9IGZhbHNlKSB7XG4gICAgbGV0IGFsdGVybmF0aXZlRGljZSA9ICcnXG4gICAgaWYgKGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpPy5hY3RpdmUpIHtcbiAgICAgIGlmIChtb2RpZiA8IDApIHtcbiAgICAgICAgYWx0ZXJuYXRpdmVEaWNlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndGVuRGllUGVuYWx0eScpXG4gICAgICB9IGVsc2UgaWYgKG1vZGlmID4gMCkge1xuICAgICAgICBhbHRlcm5hdGl2ZURpY2UgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0ZW5EaWVCb251cycpXG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHJvbGwgPSBhd2FpdCBuZXcgUm9sbChcbiAgICAgICcxZHQnICtcbiAgICAgICAgKFxuICAgICAgICAgICcrMWR0JyArIChhbHRlcm5hdGl2ZURpY2UgIT09ICcnID8gJ1snICsgYWx0ZXJuYXRpdmVEaWNlICsgJ10nIDogJycpXG4gICAgICAgICkucmVwZWF0KE1hdGguYWJzKG1vZGlmKSkgK1xuICAgICAgICAnKzFkMTAnXG4gICAgKS5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICB1bml0OiB7XG4gICAgICAgIHRvdGFsOiAwLFxuICAgICAgICByZXN1bHRzOiBbXVxuICAgICAgfSxcbiAgICAgIHRlbnM6IHtcbiAgICAgICAgdG90YWw6IDAsXG4gICAgICAgIHJlc3VsdHM6IFtdXG4gICAgICB9LFxuICAgICAgdG90YWw6IDAsXG4gICAgICByb2xsOiByb2xsXG4gICAgfVxuICAgIGlmIChyb2xsTW9kZSkgcmVzdWx0LnJvbGxNb2RlID0gcm9sbE1vZGVcbiAgICBpZiAoaGlkZURpY2UpIHJlc3VsdC5oaWRlRGljZSA9IGhpZGVEaWNlXG4gICAgZm9yIChjb25zdCBkIG9mIHJvbGwuZGljZSkge1xuICAgICAgaWYgKGQgaW5zdGFuY2VvZiBDT05GSUcuRGljZS50ZXJtcy50KSB7XG4gICAgICAgIHJlc3VsdC50ZW5zLnJlc3VsdHMucHVzaChkLnRvdGFsKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LnVuaXQudG90YWwgPSBkLnRvdGFsID09PSAxMCA/IDAgOiBkLnRvdGFsXG4gICAgICAgIHJlc3VsdC51bml0LnJlc3VsdHMucHVzaChyZXN1bHQudW5pdC50b3RhbClcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG1vZGlmIDwgMCkge1xuICAgICAgcmVzdWx0LnRlbnMudG90YWwgPVxuICAgICAgICByZXN1bHQudW5pdC50b3RhbCA9PT0gMCAmJiByZXN1bHQudGVucy5yZXN1bHRzLmluY2x1ZGVzKDApXG4gICAgICAgICAgPyAxMDBcbiAgICAgICAgICA6IE1hdGgubWF4KC4uLnJlc3VsdC50ZW5zLnJlc3VsdHMpXG4gICAgfSBlbHNlIGlmIChyZXN1bHQudW5pdC50b3RhbCA9PT0gMCkge1xuICAgICAgY29uc3QgZGljZSA9IHJlc3VsdC50ZW5zLnJlc3VsdHMuZmlsdGVyKHQgPT4gdCA+IDApXG4gICAgICByZXN1bHQudGVucy50b3RhbCA9IGRpY2UubGVuZ3RoID09PSAwID8gMTAwIDogTWF0aC5taW4oLi4uZGljZSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0LnRlbnMudG90YWwgPSBNYXRoLm1pbiguLi5yZXN1bHQudGVucy5yZXN1bHRzKVxuICAgIH1cbiAgICByZXN1bHQudG90YWwgPSByZXN1bHQudW5pdC50b3RhbCArIHJlc3VsdC50ZW5zLnRvdGFsXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHNob3dSb2xsRGljZTNkIChyb2xsKSB7XG4gICAgaWYgKGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpPy5hY3RpdmUpIHtcbiAgICAgIGNvbnN0IHN5bmNEaWNlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3luY0RpY2UzZCcpXG5cbiAgICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgICB3aGlzcGVyOiBudWxsLFxuICAgICAgICBibGluZDogZmFsc2VcbiAgICAgIH1cbiAgICAgIENoYXRNZXNzYWdlLmFwcGx5Um9sbE1vZGUoY2hhdERhdGEsIGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJykpXG5cbiAgICAgIGF3YWl0IGdhbWUuZGljZTNkLnNob3dGb3JSb2xsKFxuICAgICAgICByb2xsLFxuICAgICAgICBnYW1lLnVzZXIsXG4gICAgICAgIHN5bmNEaWNlLFxuICAgICAgICBjaGF0RGF0YS53aGlzcGVyLFxuICAgICAgICBjaGF0RGF0YS5ibGluZFxuICAgICAgKVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsIGNhbnZhcywgQ2hhdE1lc3NhZ2UsIENPTlNULCBkdXBsaWNhdGUsIGdhbWUsIFJheSwgVG9rZW4sIHVpICovXG5cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuXG4vKipcbiAqIFJldHVybiA8YT4gZWxlbWVudCBvZiBhIHJvbGwgaW5zdGFuY2UuIGZvdW5kcnkuanMgcmVmOlRleHRFZGl0b3IuX2NyZWF0ZUlubGluZVJvbGxcbiAqIEBwYXJhbSB7Um9sbH0gcm9sbCAgICAgIFRoZSByb2xsIG9iamVjdFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSW5saW5lUm9sbCAocm9sbCkge1xuICBjb25zdCBkYXRhID0ge1xuICAgIGNsczogWydpbmxpbmUtcm9sbCddLFxuICAgIGRhdGFzZXQ6IHt9XG4gIH1cblxuICB0cnkge1xuICAgIGRhdGEuY2xzLnB1c2goJ2lubGluZS1yZXN1bHQnKVxuICAgIGRhdGEucmVzdWx0ID0gcm9sbC50b3RhbFxuICAgIGRhdGEudGl0bGUgPSByb2xsLmZvcm11bGFcbiAgICBkYXRhLmRhdGFzZXQucm9sbCA9IGVzY2FwZShKU09OLnN0cmluZ2lmeShyb2xsKSlcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIC8vIENvbnN0cnVjdCBhbmQgcmV0dXJuIHRoZSBmb3JtZWQgbGluayBlbGVtZW50XG4gIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcbiAgYS5jbGFzc0xpc3QuYWRkKC4uLmRhdGEuY2xzKVxuICBhLnRpdGxlID0gZGF0YS50aXRsZVxuICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmRhdGFzZXQpKSB7XG4gICAgYS5kYXRhc2V0W2tdID0gdlxuICB9XG4gIGEuaW5uZXJIVE1MID0gYDxpIGNsYXNzPVwiZmFzIGZhLWRpY2UtZDIwXCI+PC9pPiAke2RhdGEucmVzdWx0fWBcbiAgcmV0dXJuIGFcbn1cblxuLyoqXG4gKiBGdW5jdGlvbiB1c2VkIGZvciBKU09OLnN0cmluZ2lmeSByZXBsYWNlci5cbiAqIEV4Y2x1ZGUgYW55IGtleSBzdGFydGluZyB3aXRoIF9cbiAqIEBwYXJhbSB7Kn0ga2V5ICAgICBUaGUgb2JqZWN0J3MgcHJvcGVydHkgS2V5XG4gKiBAcGFyYW0geyp9IHZhbHVlICAgVGhlIGFzc29jaWF0ZWQgdmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4Y2x1ZGVfIChrZXksIHZhbHVlKSB7XG4gIC8vIGNvbnZlcnQgUmVnRXhwIHRvIHN0cmluZ1xuICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ18nKSkge1xuICAgIHJldHVybiB1bmRlZmluZWQgLy8gcmVtb3ZlIGZyb20gcmVzdWx0XG4gIH1cbiAgcmV0dXJuIHZhbHVlIC8vIHJldHVybiBhcyBpc1xufVxuXG4vKipcbiAqIEZ1bmN0aW9uIHVzZWQgZm9yIEpTT04uc3RyaW5naWZ5IHJlcGxhY2VyLlxuICogRXhjbHVkZSBhbnkga2V5IHN0YXJ0aW5nIHdpdGggX19cbiAqIEBwYXJhbSB7Kn0ga2V5ICAgICBUaGUgb2JqZWN0J3MgcHJvcGVydHkgS2V5XG4gKiBAcGFyYW0geyp9IHZhbHVlICAgVGhlIGFzc29jaWF0ZWQgdmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4Y2x1ZGVfXyAoa2V5LCB2YWx1ZSkge1xuICAvLyBjb252ZXJ0IFJlZ0V4cCB0byBzdHJpbmdcbiAgaWYgKGtleS5zdGFydHNXaXRoKCdfXycpKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZCAvLyByZW1vdmUgZnJvbSByZXN1bHRcbiAgfVxuICByZXR1cm4gdmFsdWUgLy8gcmV0dXJuIGFzIGlzXG59XG5cbi8qKlxuICogUmV0dXJuIHRydWUgaXMgQ1RSTCBrZXkgaXMgcHJlc3NlZFxuICogVXNlZCBmb3IgTUFDIGNvbXBhdC5cbiAqIEBwYXJhbSB7Uy5FdmVudH0gZXZlbnRcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0N0cmxLZXkgKGV2ZW50KSB7XG4gIHJldHVybiAoXG4gICAgZXZlbnQubWV0YUtleSB8fFxuICAgIGV2ZW50LmN0cmxLZXkgfHxcbiAgICBldmVudC5rZXlDb2RlID09PSA5MSB8fFxuICAgIGV2ZW50LmtleUNvZGUgPT09IDIyNFxuICApXG59XG5cbmV4cG9ydCBjbGFzcyBjaGF0SGVscGVyIHtcbiAgc3RhdGljIGh5cGhlblRvQ2FtZWxDYXNlIChzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLy0oW2Etel0pL2csIGZ1bmN0aW9uIChzdHJpbmcpIHtcbiAgICAgIHJldHVybiBzdHJpbmdbMV0udG9VcHBlckNhc2UoKVxuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlTWVzc2FnZSAodGl0bGUsIG1lc3NhZ2UsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IG1lc3NhZ2VEYXRhID0ge31cbiAgICBtZXNzYWdlRGF0YS5mbGF2b3IgPSB0aXRsZVxuICAgIG1lc3NhZ2VEYXRhLnNwZWFrZXIgPSBvcHRpb25zLnNwZWFrZXIgfHwgQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpXG4gICAgaWYgKG9wdGlvbnMud2hpc3Blcikge1xuICAgICAgbWVzc2FnZURhdGEudHlwZSA9IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5XSElTUEVSXG4gICAgICBtZXNzYWdlRGF0YS53aGlzcGVyID0gb3B0aW9ucy53aGlzcGVyXG4gICAgfVxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5yb2xsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgbWVzc2FnZURhdGEucm9sbCA9IG9wdGlvbnMucm9sbFxuICAgICAgbWVzc2FnZURhdGEudHlwZSA9IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5ST0xMXG4gICAgICBtZXNzYWdlRGF0YS5yb2xsTW9kZSA9IENPTlNULkRJQ0VfUk9MTF9NT0RFUy5TRUxGXG4gICAgfVxuICAgIG1lc3NhZ2VEYXRhLnVzZXIgPSBnYW1lLnVzZXIuaWRcbiAgICBtZXNzYWdlRGF0YS5jb250ZW50ID0gbWVzc2FnZVxuXG4gICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKG1lc3NhZ2VEYXRhKS50aGVuKG1zZyA9PiB7XG4gICAgICByZXR1cm4gbXNnXG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBjYW1lbENhc2VUb0h5cGhlbiAoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8oW0EtWl0pL2csIGZ1bmN0aW9uIChzdHJpbmcpIHtcbiAgICAgIHJldHVybiAnLScgKyBzdHJpbmcudG9Mb3dlckNhc2UoKVxuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgZ2V0QWN0b3JGcm9tS2V5IChrZXkpIHtcbiAgICBpZiAoIWtleSkgcmV0dXJuIG51bGxcbiAgICAvLyBDYXNlIDEgLSBhIHN5bnRoZXRpYyBhY3RvciBmcm9tIGEgVG9rZW5cbiAgICBpZiAoa2V5LmluY2x1ZGVzKCcuJykpIHtcbiAgICAgIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgY29uc3QgW3NjZW5lSWQsIHRva2VuSWRdID0ga2V5LnNwbGl0KCcuJylcbiAgICAgIGlmIChzY2VuZUlkID09PSAnVE9LRU4nKSB7XG4gICAgICAgIHJldHVybiBnYW1lLmFjdG9ycy50b2tlbnNbdG9rZW5JZF0gLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB9XG4gICAgICBjb25zdCB0b2tlbiA9IGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KGtleSlcbiAgICAgIHJldHVybiB0b2tlbj8uYWN0b3JcbiAgICB9XG5cbiAgICAvLyBDYXNlIDIgLSB1c2UgQWN0b3IgSUQgZGlyZWN0b3J5XG4gICAgcmV0dXJuIGdhbWUuYWN0b3JzLmdldChrZXkpIHx8IG51bGxcbiAgfVxuXG4gIHN0YXRpYyBnZXRTcGVha2VyRnJvbUtleSAoYWN0b3JLZXkpIHtcbiAgICBjb25zdCBzcGVha2VyID0ge31cbiAgICBjb25zdCBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KGFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICBpZiAoYWN0b3JLZXkuaW5jbHVkZXMoJy4nKSkge1xuICAgICAgY29uc3QgW3NjZW5lSWQsIHRva2VuSWRdID0gYWN0b3JLZXkuc3BsaXQoJy4nKSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIHNwZWFrZXIudG9rZW4gPSB0b2tlbklkXG4gICAgICBzcGVha2VyLnNjZW5lID0gc2NlbmVJZFxuICAgICAgaWYgKGFjdG9yLnRva2VuPy5uYW1lKSBzcGVha2VyLmFsaWFzID0gYWN0b3IudG9rZW4ubmFtZVxuICAgICAgc3BlYWtlci5hY3RvciA9IGFjdG9yLmlkXG4gICAgfSBlbHNlIHtcbiAgICAgIHNwZWFrZXIuYWN0b3IgPSBhY3RvcktleVxuICAgICAgc3BlYWtlci5hbGlhcyA9IGFjdG9yLm5hbWVcbiAgICB9XG4gICAgcmV0dXJuIHNwZWFrZXJcbiAgfVxuXG4gIHN0YXRpYyBhdHRhY2hPYmplY3RUb0VsZW1lbnQgKG9iamVjdCwgZWxlbWVudCwgb2JqZWN0TmFtZSA9ICcnKSB7XG4gICAgZm9yIChjb25zdCBwcm9wIG9mIE9iamVjdC5rZXlzKG9iamVjdCkpIHtcbiAgICAgIGlmICghcHJvcC5zdGFydHNXaXRoKCdfJykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvYmplY3RbcHJvcF0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgY2hhdEhlbHBlci5hdHRhY2hPYmplY3RUb0VsZW1lbnQoXG4gICAgICAgICAgICBvYmplY3RbcHJvcF0sXG4gICAgICAgICAgICBlbGVtZW50LFxuICAgICAgICAgICAgYCR7b2JqZWN0TmFtZX06JHtwcm9wfTpgXG4gICAgICAgICAgKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVsZW1lbnQuZGF0YXNldFtgJHtvYmplY3ROYW1lfSR7cHJvcH1gXSA9IG9iamVjdFtwcm9wXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldE9iamVjdEZyb21FbGVtZW50IChvYmplY3QsIGVsZW1lbnQpIHtcbiAgICBmdW5jdGlvbiBkZXNlcmlhbGl6ZSAob2JqLCBrZXksIHZhbHVlKSB7XG4gICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJzonKSkge1xuICAgICAgICBjb25zdCBzID0ga2V5LnNsaWNlKDEpXG4gICAgICAgIGNvbnN0IG9ialByb3AgPSBzLnNsaWNlKHMuaW5kZXhPZignOicpICsgMSlcbiAgICAgICAgY29uc3Qgb2JqTmFtZSA9IHMuc3Vic3RyaW5nKDAsIHMuaW5kZXhPZignOicpKVxuICAgICAgICBpZiAodHlwZW9mIG9ialtvYmpOYW1lXSA9PT0gJ3VuZGVmaW5lZCcpIG9ialtvYmpOYW1lXSA9IHt9XG4gICAgICAgIGRlc2VyaWFsaXplKG9ialtvYmpOYW1lXSwgb2JqUHJvcCwgdmFsdWUpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodmFsdWUgPT09ICd0cnVlJykgb2JqW2tleV0gPSB0cnVlXG4gICAgICAgIGVsc2UgaWYgKHZhbHVlID09PSAnZmFsc2UnKSBvYmpba2V5XSA9IGZhbHNlXG4gICAgICAgIGVsc2UgaWYgKE51bWJlcih2YWx1ZSkudG9TdHJpbmcoKSA9PT0gdmFsdWUpIG9ialtrZXldID0gTnVtYmVyKHZhbHVlKVxuICAgICAgICBlbHNlIG9ialtrZXldID0gdmFsdWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWVsZW1lbnQgfHwgIW9iamVjdCkgcmV0dXJuXG4gICAgZm9yIChjb25zdCBwcm9wIG9mIE9iamVjdC5rZXlzKGVsZW1lbnQuZGF0YXNldCkpIHtcbiAgICAgIGlmIChwcm9wID09PSAndGVtcGxhdGUnKSByZXR1cm5cbiAgICAgIGRlc2VyaWFsaXplKG9iamVjdCwgcHJvcCwgZWxlbWVudC5kYXRhc2V0W3Byb3BdKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRUb2tlbkZyb21LZXkgKGtleSkge1xuICAgIGlmICgha2V5KSByZXR1cm4gbnVsbFxuICAgIGlmIChrZXkuaW5jbHVkZXMoJy4nKSkge1xuICAgICAgY29uc3QgW3NjZW5lSWQsIHRva2VuSWRdID0ga2V5LnNwbGl0KCcuJylcbiAgICAgIGlmIChzY2VuZUlkID09PSAnVE9LRU4nKSB7XG4gICAgICAgIGNvbnN0IHRva2VuRG9jID0gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdPy50b2tlblxuICAgICAgICByZXR1cm4gdG9rZW5Eb2Mub2JqZWN0IC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgICAgaWYgKCFzY2VuZSkgcmV0dXJuIG51bGxcbiAgICAgICAgY29uc3QgdG9rZW5EYXRhID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxuICAgICAgICBpZiAoIXRva2VuRGF0YSkgcmV0dXJuIG51bGxcbiAgICAgICAgY29uc3QgdG9rZW4gPSBuZXcgVG9rZW4odG9rZW5EYXRhKVxuICAgICAgICBpZiAoIXRva2VuLnNjZW5lKSB0b2tlbi5zY2VuZSA9IGR1cGxpY2F0ZShzY2VuZS5kYXRhKVxuICAgICAgICByZXR1cm4gdG9rZW5cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoa2V5KVxuICAgICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JUb2tlbihhY3RvcilcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0QWN0b3JUb2tlbiAoYWN0b3IpIHtcbiAgICBpZiAoIWFjdG9yKSByZXR1cm4gbnVsbFxuICAgIC8qKiAqIE1PRElGIDAuOC54ICoqKi9cbiAgICByZXR1cm4gYWN0b3IudG9rZW4gfHwgeyBkYXRhOiBhY3Rvci5kYXRhLnRva2VuIH1cbiAgICAvKioqKioqKioqKioqKioqKioqKi9cbiAgICAvLyAvLyBDYXNlIDAgLSBBY3RvciBpcyBhIHRva2VuIChzeW50aGV0aWMgYWN0b3IpLCByZXR1cm4gdGhhdCB0b2tlbi5cbiAgICAvLyBpZihhY3Rvci5pc1Rva2VuKSByZXR1cm4gYWN0b3IudG9rZW47XG4gICAgLy8gZWxzZXtcbiAgICAvLyAgLy8gQ2FzZSAxIC0gQWN0b3IgaXMgbm90IGEgdG9rZW4sIGZpbmQgaWYgYSB0b2tlbiBleGlzdCBmb3IgdGhhdCBhY3Rvci5cbiAgICAvLyAgY29uc3QgYWN0b3JUb2tlbnMgPSBhY3Rvci5nZXRBY3RpdmVUb2tlbnMoKTtcbiAgICAvLyAgaWYoIGFjdG9yVG9rZW5zLmxlbmd0aCl7XG4gICAgLy8gICAgLy8gQ2FzZSAxLjEgLSBJZiBoZSBoYXMgb25seSBvbmUgVG9rZW4gcmV0dXJuIGl0LlxuICAgIC8vICAgIGlmKCAxID09PSBhY3RvclRva2Vucy5sZW5ndGgpIHJldHVybiBhY3RvclRva2Vuc1swXTtcblxuICAgIC8vICAgIC8vIENhc2UgMS4yIC0gQWN0b3IgaGFzIG11bHRpcGxlIHRva2VucywgZmluZCBpZiBvbmUgb2YgdGhlbSBpcyB0aGUgY29udHJvbGxlZCB0b2tlbi5cbiAgICAvLyAgICBjb25zdCBjb250cm9sbGVkVG9rZW5zID0gYWN0b3JUb2tlbnMuZmlsdGVyKCB0ID0+IHQuX2NvbnRyb2xsZWQpO1xuICAgIC8vICAgIGlmKCBjb250cm9sbGVkVG9rZW5zLmxlbmd0aCl7XG4gICAgLy8gICAgICAvLyBSZXR1cm4gdGhlIDFzdCBjb250cm9sbGVkIHRva2VuLCByaXNlIGEgd2FybmluZyBpZiBoZSBoYXMgbXVsdGlwbGUgY29udHJvbGxlZCB0b2tlbnMuXG4gICAgLy8gICAgICBpZiggdmVyYm9zZSAmJiBjb250cm9sbGVkVG9rZW5zLmxlbmd0aCA+IDEpIHVpLm5vdGlmaWNhdGlvbnMud2FybiggYEFjdG9yICR7YWN0b3IubmFtZX0gaGFzICR7Y29udHJvbGxlZFRva2Vucy5sZW5ndGh9IGNvbnRyb2xsZWQgdG9rZW5zLiBVc2luZyB0aGUgZmlyc3QgZm91bmRgKTtcbiAgICAvLyAgICAgIHJldHVybiBjb250cm9sbGVkVG9rZW5zWzBdO1xuICAgIC8vICAgIH1cblxuICAgIC8vICAgIC8vIENhc2UgMS4zIGFjdG9yIGRvZXNuJ3QgaGF2ZSBhbnkgYWN0aXZlIHRva2VuLiBSZXR1cm4gdGhlIGZpcnN0IHZhbGlkIHRva2VuIGZvciB0aGF0IGFjdG9yIGFuZCByYWlzZSBhIHdhcm5pbmcuXG4gICAgLy8gICAgaWYoIHZlcmJvc2UpIHVpLm5vdGlmaWNhdGlvbnMud2FybiggYEFjdG9yICR7YWN0b3IubmFtZX0gZG9lc24ndCBoYXZlIGFueSBjb250cm9sbGVkIHRva2VuLiBVc2luZyBmaXJzdCB0b2tlbiBmb3VuZC5gKTtcbiAgICAvLyAgICByZXR1cm4gYWN0b3JUb2tlbnNbMF07XG4gICAgLy8gIH1cblxuICAgIC8vICBpZiggdmVyYm9zZSkgdWkubm90aWZpY2F0aW9ucy5lcnJvciggYENvdWxkIG5vdCBmaW4gYW55IHRva2VuIGZvciAke2FjdG9yLm5hbWV9LmApO1xuICAgIC8vICByZXR1cm4gbnVsbDtcbiAgICAvLyB9XG4gIH1cblxuICBzdGF0aWMgZ2V0QWN0b3JJbWdGcm9tS2V5IChhY3RvcktleSkge1xuICAgIGlmICghYWN0b3JLZXkpIHJldHVybiBudWxsXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3VzZVRva2VuJykpIHtcbiAgICAgIC8vIFRyeSB0byBmaW5kIGEgdG9rZW4uXG4gICAgICBjb25zdCB0b2tlbiA9IGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KGFjdG9yS2V5KVxuICAgICAgaWYgKHRva2VuICYmIHRva2VuLmRhdGEuaW1nLmluZGV4T2YoJyonKSA9PT0gLTEpIHJldHVybiB0b2tlbi5kYXRhLmltZ1xuICAgIH1cbiAgICBjb25zdCBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KGFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndXNlVG9rZW4nKSkge1xuICAgICAgLy8gaWYgbm8gdG9rZW4gZm91bmQgZm9yIHRoYXQgYWN0b3IgcmV0dXJuIHRoZSBwcm90b3R5cGUgdG9rZW4gaW1hZ2UuXG4gICAgICBpZiAoYWN0b3IuZGF0YS50b2tlbiAmJiBhY3Rvci5kYXRhLnRva2VuLmltZy5pbmRleE9mKCcqJykgPT09IC0xKVxuICAgICAgICByZXR1cm4gYWN0b3IuZGF0YS50b2tlbi5pbWdcbiAgICB9XG4gICAgcmV0dXJuIGFjdG9yLmRhdGEuaW1nXG4gIH1cblxuICBzdGF0aWMgZ2V0RGlzdGFuY2UgKHN0YXJ0VG9rZW4sIGVuZFRva2VuKSB7XG4gICAgLy8gc3RhcnRUb2tlbi51cGRhdGVTb3VyY2UoKTtcbiAgICAvLyBjYW52YXMuc2lnaHQuaW5pdGlhbGl6ZVRva2VucygpO1xuICAgIGlmIChcbiAgICAgIHR5cGVvZiBlbmRUb2tlbi5jZW50ZXIgPT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgZW5kVG9rZW4uZGF0YS5kb2N1bWVudD8uaWQgIT09ICd1bmRlZmluZWQnXG4gICAgKSB7XG4gICAgICBpZiAoc3RhcnRUb2tlbi5zY2VuZT8uaWQgfHwgZmFsc2UpIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc3RhcnRUb2tlbi5zY2VuZS5pZClcbiAgICAgICAgaWYgKHR5cGVvZiBzY2VuZT8udG9rZW5zICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IHRva2VucyA9IHNjZW5lPy50b2tlbnNcbiAgICAgICAgICAgIC5maWx0ZXIodG9rZW4gPT4gdG9rZW4uYWN0b3IuaWQgPT09IGVuZFRva2VuLmRhdGEuZG9jdW1lbnQuaWQpXG4gICAgICAgICAgICAubWFwKHRva2VuID0+IHRva2VuLm9iamVjdClcbiAgICAgICAgICBpZiAodG9rZW5zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgZW5kVG9rZW4gPSB0b2tlbnNbMF1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IGRpc3RhbmNlID0ge1xuICAgICAgZ3JpZFVuaXQ6IDAsXG4gICAgICB2YWx1ZTogMCxcbiAgICAgIHVuaXQ6IGNhbnZhcy5zY2VuZS5kYXRhLmdyaWRVbml0c1xuICAgIH1cbiAgICBpZiAoXG4gICAgICB0eXBlb2Ygc3RhcnRUb2tlbiAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiBzdGFydFRva2VuLmNlbnRlciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiBlbmRUb2tlbiAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiBlbmRUb2tlbi5jZW50ZXIgIT09ICd1bmRlZmluZWQnXG4gICAgKSB7XG4gICAgICBjb25zdCByYXkgPSBuZXcgUmF5KHN0YXJ0VG9rZW4uY2VudGVyLCBlbmRUb2tlbi5jZW50ZXIpXG4gICAgICBjb25zdCBzZWdtZW50ID0gW3sgcmF5IH1dXG4gICAgICBkaXN0YW5jZSA9IHtcbiAgICAgICAgZ3JpZFVuaXQ6IHJheS5kaXN0YW5jZSAvIGNhbnZhcy5zY2VuZS5kYXRhLmdyaWQsXG4gICAgICAgIC8vIHZhbHVlOiAocmF5LmRpc3RhbmNlL2NhbnZhcy5zY2VuZS5kYXRhLmdyaWQpKmNhbnZhcy5zY2VuZS5kYXRhLmdyaWREaXN0YW5jZSxcbiAgICAgICAgdmFsdWU6IGNhbnZhcy5ncmlkLm1lYXN1cmVEaXN0YW5jZXMoc2VnbWVudCwge1xuICAgICAgICAgIGdyaWRTcGFjZXM6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2dyaWRTcGFjZXMnKVxuICAgICAgICB9KVswXSxcbiAgICAgICAgdW5pdDogY2FudmFzLnNjZW5lLmRhdGEuZ3JpZFVuaXRzXG4gICAgICB9XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzdGFuY2VFbGV2YXRpb24nKSkge1xuICAgICAgICBjb25zdCBlbGV2YXRpb24gPSBNYXRoLmFicyhcbiAgICAgICAgICAoc3RhcnRUb2tlbi5kYXRhLmVsZXZhdGlvbiB8fCAwKSAtIChlbmRUb2tlbi5kYXRhLmVsZXZhdGlvbiB8fCAwKVxuICAgICAgICApXG4gICAgICAgIGRpc3RhbmNlLnZhbHVlID0gTWF0aC5zcXJ0KFxuICAgICAgICAgIGRpc3RhbmNlLnZhbHVlICogZGlzdGFuY2UudmFsdWUgKyBlbGV2YXRpb24gKiBlbGV2YXRpb25cbiAgICAgICAgKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NZXNzYWdlRGlzdGFuY2VDYWxjdWxhdGlvbkZhaWx1cmUnKVxuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gZGlzdGFuY2VcbiAgfVxuXG4gIHN0YXRpYyB0b1lhcmRzIChkaXN0YW5jZSkge1xuICAgIHN3aXRjaCAoZGlzdGFuY2UudW5pdCkge1xuICAgICAgY2FzZSAnZnQnOlxuICAgICAgICByZXR1cm4gZGlzdGFuY2UudmFsdWUgLyAzXG5cbiAgICAgIGNhc2UgJ3lkJzpcbiAgICAgICAgcmV0dXJuIGRpc3RhbmNlLnZhbHVlXG5cbiAgICAgIGNhc2UgJ20nOlxuICAgICAgICByZXR1cm4gZGlzdGFuY2UudmFsdWVcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGRpc3RhbmNlLnZhbHVlXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb0M3Um9sbCB7XG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCkge1xuICAgIGNvbnN0IHJvbGxEaXYgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5kaWNlLXJvbGwnKVxuICAgIGlmICghcm9sbERpdikgcmV0dXJuIG51bGxcblxuICAgIGNvbnN0IHJvbGwgPSBuZXcgQ29DN1JvbGwoKVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQocm9sbCwgcm9sbERpdilcblxuICAgIHJldHVybiByb2xsXG4gIH1cblxuICBnZXQgcmVzdWx0VHlwZSAoKSB7XG4gICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBwYXJzZUludCh0aGlzLnN1Y2Nlc3NMZXZlbClcbiAgICBzd2l0Y2ggKHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhcjpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUmVndWxhclN1Y2Nlc3MnKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQ6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkhhcmRTdWNjZXNzJylcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FeHRyZW1lU3VjY2VzcycpXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWw6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNyaXRpY2FsU3VjY2VzcycpXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZnVtYmxlOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5GdW1ibGUnKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmU6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkZhaWx1cmUnKVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgaWYgKHRoaXMuYWN0b3JLZXkpIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGl0ZW0gKCkge1xuICAgIGlmICh0aGlzLml0ZW1JZCAmJiB0aGlzLmFjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy5pdGVtSWQpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBza2lsbCAoKSB7XG4gICAgaWYgKHRoaXMuc2tpbGxJZCAmJiB0aGlzLmFjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy5za2lsbElkKVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBzaG93RGljZVJvbGwgKCkge1xuICAgIGlmIChnYW1lLm1vZHVsZXMuZ2V0KCdkaWNlLXNvLW5pY2UnKT8uYWN0aXZlKSB7XG4gICAgICBjb25zdCBkaWNlUmVzdWx0cyA9IFtdXG4gICAgICBmb3IgKGNvbnN0IGRpZVJlc3VsdCBvZiB0aGlzLmRpY2VzLnRlbnMpIHtcbiAgICAgICAgZGljZVJlc3VsdHMucHVzaChkaWVSZXN1bHQudmFsdWUgPT09IDEwMCA/IDAgOiBkaWVSZXN1bHQudmFsdWUgLyAxMClcbiAgICAgIH1cbiAgICAgIGRpY2VSZXN1bHRzLnB1c2godGhpcy5kaWNlcy51bml0LnZhbHVlKVxuXG4gICAgICBjb25zdCBkaWNlRGF0YSA9IHtcbiAgICAgICAgZm9ybXVsYTogYCR7dGhpcy5kaWNlcy50ZW5zLmxlbmd0aH1kMTAwKzFkMTBgLFxuICAgICAgICByZXN1bHRzOiBkaWNlUmVzdWx0cyxcbiAgICAgICAgd2hpc3BlcjogbnVsbCxcbiAgICAgICAgYmxpbmQ6IGZhbHNlXG4gICAgICB9XG4gICAgICBnYW1lLmRpY2UzZC5zaG93KGRpY2VEYXRhKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tRWxlbWVudCAoZWxlbWVudCwgb2JqZWN0ID0gbnVsbCkge1xuICAgIGlmICghZWxlbWVudCkgcmV0dXJuXG4gICAgY29uc3Qgcm9sbCA9IG9iamVjdCB8fCBuZXcgQ29DN1JvbGwoKVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQocm9sbCwgZWxlbWVudClcbiAgICByb2xsLmRpY2VzID0ge1xuICAgICAgdGVuczogW10sXG4gICAgICB1bml0OiB7fVxuICAgIH1cbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KFxuICAgICAgcm9sbC5kaWNlcyxcbiAgICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmRpY2UtcmVzdWx0JylcbiAgICApXG4gICAgcm9sbC5kaWNlcy5oYXNCb251cyA9IHJvbGwuZGljZU1vZGlmaWVyICE9PSAwXG4gICAgcm9sbC5kaWNlcy5ib251cyA9IE1hdGguYWJzKHJvbGwuZGljZU1vZGlmaWVyKVxuICAgIHJvbGwuZGljZXMuYm9udXNUeXBlID1cbiAgICAgIHJvbGwuZGljZU1vZGlmaWVyIDwgMFxuICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGljZU1vZGlmaWVyUGVuYWx0eScpXG4gICAgICAgIDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EaWNlTW9kaWZpZXJCb251cycpXG4gICAgY29uc3QgdGVuRGljZSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnRlbi1kaWNlJylcbiAgICBpZiAodGVuRGljZSkge1xuICAgICAgZm9yIChjb25zdCBkIG9mIHRlbkRpY2UucXVlcnlTZWxlY3RvckFsbCgnbGknKSkge1xuICAgICAgICBjb25zdCBkaWUgPSB7XG4gICAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgICAgIGlzTWF4OiBmYWxzZSxcbiAgICAgICAgICBpc01pbjogZmFsc2UsXG4gICAgICAgICAgdmFsdWU6IC0xXG4gICAgICAgIH1cbiAgICAgICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChkaWUsIGQpXG4gICAgICAgIHJvbGwuZGljZXMudGVucy5wdXNoKGRpZSlcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgdW5pdERpZSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnVuaXQtZGllJylcbiAgICAgID8gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdC1kaWUnKS5xdWVyeVNlbGVjdG9yKCdsaScpXG4gICAgICA6IG51bGxcbiAgICByb2xsLmRpY2VzLnVuaXQudmFsdWUgPSB1bml0RGllID8gcGFyc2VJbnQodW5pdERpZS5kYXRhc2V0LnZhbHVlKSA6IG51bGxcblxuICAgIHJvbGwuaW5jcmVhc2VTdWNjZXNzID0gW11cbiAgICBjb25zdCBpbmNyZWFzZVN1Y2Nlc3MgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbmNyZWFzZS1zdWNjZXNzJylcbiAgICBpZiAoaW5jcmVhc2VTdWNjZXNzICYmIGluY3JlYXNlU3VjY2Vzcy5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24nKSkge1xuICAgICAgZm9yIChjb25zdCBpc2wgb2YgaW5jcmVhc2VTdWNjZXNzLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbicpKSB7XG4gICAgICAgIGNvbnN0IG5ld1N1Y2Nlc0xldmVsID0ge31cbiAgICAgICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChuZXdTdWNjZXNMZXZlbCwgaXNsKVxuICAgICAgICByb2xsLmluY3JlYXNlU3VjY2Vzcy5wdXNoKG5ld1N1Y2Nlc0xldmVsKVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChyb2xsLmx1Y2tOZWVkZWQpIHtcbiAgICAgIHJvbGwubHVja05lZWRlZFR4dCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU3BlbmRMdWNrJywge1xuICAgICAgICBsdWNrTmVlZGVkVmFsdWU6IHJvbGwubHVja05lZWRlZFxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKCFvYmplY3QpIHJldHVybiByb2xsXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbUNoZWNrIChjaGVjaykge1xuICAgIGNvbnN0IHJvbGwgPSBuZXcgQ29DN1JvbGwoKVxuXG4gICAgcm9sbC5yb2xsVHlwZSA9IGNoZWNrLnJvbGxUeXBlXG4gICAgcm9sbC5zaWRlID0gY2hlY2suc2lkZVxuICAgIHJvbGwuYWN0aW9uID0gY2hlY2suYWN0aW9uXG4gICAgcm9sbC5yZWZNZXNzYWdlSWQgPSBjaGVjay5yZWZNZXNzYWdlSWRcbiAgICByb2xsLnJlZmVyZW5jZU1lc3NhZ2VJZCA9IGNoZWNrLnJlZmVyZW5jZU1lc3NhZ2VJZFxuXG4gICAgcm9sbC5zdWNjZXNzTGV2ZWwgPSBjaGVjay5zdWNjZXNzTGV2ZWxcbiAgICByb2xsLmRpZmZpY3VsdHkgPSBjaGVjay5kaWZmaWN1bHR5XG4gICAgcm9sbC5za2lsbElkID0gY2hlY2suc2tpbGwgPyBjaGVjay5za2lsbC5pZCA6IG51bGxcbiAgICByb2xsLml0ZW1JZCA9IGNoZWNrLml0ZW0gPyBjaGVjay5pdGVtLmlkIDogbnVsbFxuICAgIHJvbGwuZGljZU1vZCA9IGNoZWNrLmRpY2VNb2RpZmllclxuICAgIHJvbGwudmFsdWUgPSBwYXJzZUludChjaGVjay5yYXdWYWx1ZSlcbiAgICByb2xsLmZ1bWJsZSA9IGNoZWNrLmlzRnVtYmxlXG4gICAgcm9sbC5jcml0aWNhbCA9IGNoZWNrLmlzQ3JpdGljYWxcbiAgICByb2xsLmNoYXJhY3RlcmlzdGljID0gY2hlY2suY2hhcmFjdGVyaXN0aWMgPyBjaGVjay5jaGFyYWN0ZXJpc3RpYyA6IG51bGxcbiAgICByb2xsLnJlc3VsdCA9IGNoZWNrLmRpY2UudG90YWxcblxuICAgIHJvbGwuYWN0b3JLZXkgPSBjaGVjay5hY3Rvci50b2tlbktleSAvLyBSRUZBQ1RPUklORyAoMilcblxuICAgIGlmIChjaGVjay5hY3Rvci5pc1Rva2VuKSB7XG4gICAgICByb2xsLnRva2VuSWQgPSBjaGVjay5hY3Rvci50b2tlbktleSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIHJvbGwuYWN0b3JJZCA9IG51bGxcbiAgICB9IGVsc2Uge1xuICAgICAgcm9sbC50b2tlbktleSA9IG51bGxcbiAgICAgIHJvbGwuYWN0b3JJZCA9IGNoZWNrLmFjdG9yLnRva2VuS2V5IC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIH1cblxuICAgIHJldHVybiByb2xsXG4gIH1cblxuICBzdGF0aWMgYXR0YWNoQ2hlY2tUb0VsZW1lbnQgKGh0bWxFbGVtZW50LCBjaGVjaykge1xuICAgIGNvbnN0IHJvbGwgPSBDb0M3Um9sbC5nZXRGcm9tQ2hlY2soY2hlY2spXG4gICAgcm9sbC5hdHRhY2hUb0VsZW1lbnQoaHRtbEVsZW1lbnQpXG5cbiAgICByZXR1cm4gcm9sbFxuICB9XG5cbiAgYXR0YWNoVG9FbGVtZW50IChodG1sRWxlbWVudCkge1xuICAgIGNoYXRIZWxwZXIuYXR0YWNoT2JqZWN0VG9FbGVtZW50KHRoaXMsIGh0bWxFbGVtZW50KVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb0M3RGFtYWdlIHtcbiAgc3RhdGljIGdldE1haW5EaWUgKGRhbWFnZVN0cmluZykge1xuICAgIGlmIChkYW1hZ2VTdHJpbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZDIwJykpIHJldHVybiAnZDIwJ1xuICAgIGlmIChkYW1hZ2VTdHJpbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZDEyJykpIHJldHVybiAnZDEyJ1xuICAgIGlmIChkYW1hZ2VTdHJpbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZDEwJykpIHJldHVybiAnZDEwJ1xuICAgIGlmIChkYW1hZ2VTdHJpbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZDgnKSkgcmV0dXJuICdkOCdcbiAgICBpZiAoZGFtYWdlU3RyaW5nLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2Q0JykpIHJldHVybiAnZDQnXG4gICAgcmV0dXJuICdkNidcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tRWxlbWVudCAoZWxlbWVudCwgb2JqZWN0ID0gbnVsbCkge1xuICAgIGlmICghZWxlbWVudCkgcmV0dXJuXG4gICAgY29uc3QgZGFtYWdlID0gb2JqZWN0IHx8IHt9XG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChkYW1hZ2UsIGVsZW1lbnQpXG4gICAgY29uc3Qgcm9sbHMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXJvbGxzJykucXVlcnlTZWxlY3RvckFsbCgnbGknKVxuICAgIGRhbWFnZS5yb2xscyA9IFtdXG4gICAgZm9yIChjb25zdCByIG9mIHJvbGxzKSB7XG4gICAgICBjb25zdCByb2xsID0ge31cbiAgICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQocm9sbCwgcilcbiAgICAgIGRhbWFnZS5yb2xscy5wdXNoKHJvbGwpXG4gICAgfVxuXG4gICAgaWYgKCFvYmplY3QpIHJldHVybiBkYW1hZ2VcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGNhbnZhcywgQ2hhdE1lc3NhZ2UsIENPTlNULCBnYW1lLCBnZXREb2N1bWVudENsYXNzLCBIb29rcywgTWFjcm8sIFJvbGwsIHVpICovXG5cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4vaXRlbXMvaXRlbS5qcydcbmltcG9ydCB7IFJvbGxEaWFsb2cgfSBmcm9tICcuL2FwcHMvcm9sbC1kaWFsb2cuanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi9jaGF0L2hlbHBlci5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdVdGlsaXRpZXMge1xuICAvLyBzdGF0aWMgdGVzdChldmVudCl7XG4gIC8vICAgaWYoIGV2ZW50LnNoaWZ0S2V5KSB1aS5ub3RpZmljYXRpb25zLmluZm8oJ0hlbGxvIGZyb20gU0hJRlQgdXRpbGl0aWVzJyk7XG4gIC8vICAgZWxzZSB1aS5ub3RpZmljYXRpb25zLmluZm8oJ0hlbGxvIGZyb20gdXRpbGl0aWVzJyk7XG4gIC8vICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKTtcbiAgLy8gICBsZXQgYWN0b3I7XG4gIC8vICAgaWYgKHNwZWFrZXIudG9rZW4pIGFjdG9yID0gZ2FtZS5hY3RvcnMudG9rZW5zW3NwZWFrZXIudG9rZW5dO1xuICAvLyAgIGlmICghYWN0b3IpIGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHNwZWFrZXIuYWN0b3IpO1xuXG4gIC8vICBhY3Rvci5pbmZsaWN0TWFqb3JXb3VuZCgpO1xuICAvLyB9XG5cbiAgc3RhdGljIGlzRm9ybXVsYSAoeCkge1xuICAgIGlmICh0eXBlb2YgeCAhPT0gJ3N0cmluZycpIHJldHVybiBmYWxzZVxuICAgIGlmICghaXNOYU4oTnVtYmVyKHgpKSkgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIFJvbGwudmFsaWRhdGUoeClcbiAgfVxuXG4gIHN0YXRpYyBQYXJzZUNoYXRFbnRyeSAoaHRtbCwgY29udGVudCkge1xuICAgIGNvbnN0IHJlZ1ggPSAvKFxcUyspL2dcbiAgICBjb25zdCB0ZXJtcyA9IGNvbnRlbnQubWF0Y2gocmVnWClcbiAgICBpZiAoXG4gICAgICB0ZXJtc1swXT8udG9Mb3dlckNhc2UoKS5tYXRjaCgvXlxcL3Iob2xsKT8kLykgJiZcbiAgICAgIHRlcm1zWzFdPy50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoJzFkJScpXG4gICAgKSB7XG4gICAgICAvLyBEZWxheSBjYWxsaW5nIGZ1bmN0aW9uIHRvIHByZXZlbnQgY2hhdG1lc3NhZ2Uga2V5IGRvd24gdHJpZ2dlcmluZyBkZWZhdWx0XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgQ29DN1V0aWxpdGllcy5fRXhlY0NvbW1hbmQoY29udGVudClcbiAgICAgIH0sIDIwMClcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfRXhlY0NvbW1hbmQgKGNvbnRlbnQpIHtcbiAgICBjb25zdCBvcHRpb25zID0gY29udGVudFxuICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgIC5zcGxpdCgnICcpXG4gICAgICA/LmpvaW4oJycpXG4gICAgICA/LnJlcGxhY2UoL1xcL3Iob2xsKT8xZCUvLCAnJylcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIGlmIChvcHRpb25zLmxlbmd0aCkge1xuICAgICAgbGV0IGVzY2FwZWQgPSBvcHRpb25zXG4gICAgICBsZXQgdGhyZXNob2xkXG4gICAgICBsZXQgZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgbGV0IGRpY2VNb2RpZmllciA9IDBcbiAgICAgIGxldCBhc2sgPSBmYWxzZVxuICAgICAgbGV0IGZsYXREaWNlTW9kaWZpZXJcbiAgICAgIGxldCBmbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICAgIGNvbnN0IHRocmVzaG9sZFN0ciA9IGVzY2FwZWQubWF0Y2goL1teKF0rKD89XFwpKS8pXG4gICAgICBpZiAodGhyZXNob2xkU3RyICYmIHRocmVzaG9sZFN0ci5sZW5ndGgpIHtcbiAgICAgICAgdGhyZXNob2xkID0gTnVtYmVyKHRocmVzaG9sZFN0clswXSlcbiAgICAgICAgZm9yIChjb25zdCBtYXRjaCBvZiB0aHJlc2hvbGRTdHIpIHtcbiAgICAgICAgICBlc2NhcGVkID0gZXNjYXBlZC5yZXBsYWNlKGAoJHttYXRjaH0pYCwgJycpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGRpZmZpY3VsdHlTdHIgPSBlc2NhcGVkLm1hdGNoKC9bXltdKyg/PVxcXSkvKVxuICAgICAgaWYgKGRpZmZpY3VsdHlTdHIgJiYgZGlmZmljdWx0eVN0ci5sZW5ndGgpIHtcbiAgICAgICAgZGlmZmljdWx0eSA9IENvQzdVdGlsaXRpZXMuY29udmVydERpZmZpY3VsdHkoZGlmZmljdWx0eVN0clswXSlcbiAgICAgICAgZm9yIChjb25zdCBtYXRjaCBvZiBkaWZmaWN1bHR5U3RyKSB7XG4gICAgICAgICAgZXNjYXBlZCA9IGVzY2FwZWQucmVwbGFjZShgWyR7bWF0Y2h9XWAsICcnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZXNjYXBlZC5pbmNsdWRlcygnPycpKSB7XG4gICAgICAgIGFzayA9IHRydWVcbiAgICAgICAgZXNjYXBlZCA9IGVzY2FwZWQucmVwbGFjZSgnPycsICcnKVxuICAgICAgfVxuICAgICAgaWYgKCFpc05hTihOdW1iZXIoZXNjYXBlZCkpKSBkaWNlTW9kaWZpZXIgPSBOdW1iZXIoZXNjYXBlZClcblxuICAgICAgaWYgKGFzaykge1xuICAgICAgICBjb25zdCBkaWFsb2dPcHRpb25zID0ge1xuICAgICAgICAgIHRocmVzaG9sZDogdGhyZXNob2xkLFxuICAgICAgICAgIG1vZGlmaWVyOiBkaWNlTW9kaWZpZXIsXG4gICAgICAgICAgZGlmZmljdWx0eTogZGlmZmljdWx0eSxcbiAgICAgICAgICBhc2tWYWx1ZTogdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVzYWdlID0gYXdhaXQgUm9sbERpYWxvZy5jcmVhdGUoZGlhbG9nT3B0aW9ucylcbiAgICAgICAgaWYgKHVzYWdlKSB7XG4gICAgICAgICAgZGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnYm9udXNEaWNlJykpXG4gICAgICAgICAgZGlmZmljdWx0eSA9IE51bWJlcih1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKSlcbiAgICAgICAgICB0aHJlc2hvbGQgPSBOdW1iZXIodXNhZ2UuZ2V0KCd0aHJlc2hvbGQnKSkgfHwgdGhyZXNob2xkXG4gICAgICAgICAgZmxhdERpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXREaWNlTW9kaWZpZXInKSlcbiAgICAgICAgICBmbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0VGhyZXNob2xkTW9kaWZpZXInKSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kaWZpZXIgfHwgMFxuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IGRpZmZpY3VsdHkgfHwgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgICBjaGVjay5yYXdWYWx1ZSA9IHRocmVzaG9sZFxuICAgICAgY2hlY2suZmxhdERpY2VNb2RpZmllciA9IGZsYXREaWNlTW9kaWZpZXJcbiAgICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IGZsYXRUaHJlc2hvbGRNb2RpZmllclxuICAgICAgaWYgKHRocmVzaG9sZCkgY2hlY2sucmF3VmFsdWUgPSAhaXNOYU4odGhyZXNob2xkKSA/IHRocmVzaG9sZCA6IHVuZGVmaW5lZFxuICAgIH1cbiAgICBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpXG4gICAgaWYgKHNwZWFrZXIudG9rZW4gJiYgc3BlYWtlci5zY2VuZSkge1xuICAgICAgY29uc3QgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShcbiAgICAgICAgYCR7c3BlYWtlci5zY2VuZX0uJHtzcGVha2VyLnRva2VufWBcbiAgICAgICkgLy8gUkVGQUNUT1JJTkcgKDIpICsrKyB3aHkgc3BlYWtlci5zY2VuZS5cbiAgICAgIGlmIChhY3RvcikgY2hlY2suYWN0b3IgPSBhY3RvclxuICAgIH0gZWxzZSBpZiAoc3BlYWtlci5hY3Rvcikge1xuICAgICAgY29uc3QgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoc3BlYWtlci5hY3RvcilcbiAgICAgIGlmIChhY3RvcikgY2hlY2suYWN0b3IgPSBhY3RvclxuICAgIH1cbiAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICBjaGVjay50b01lc3NhZ2UoKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHRlc3QgKCkge1xuICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mb3MoJ0RvIHNvbWUgc3R1ZmYnKVxuICB9XG5cbiAgc3RhdGljIGdldENyZWF0dXJlU2FuRGF0YSAoY3JlYXR1cmUpIHtcbiAgICBsZXQgY3JlYXR1cmVEYXRhXG4gICAgbGV0IGFjdG9yXG4gICAgaWYgKGNyZWF0dXJlLmNvbnN0cnVjdG9yLm5hbWUgPT09ICdDb0NBY3RvcicpIHtcbiAgICAgIGFjdG9yID0gY3JlYXR1cmVcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGNyZWF0dXJlID09PSAnc3RyaW5nJykge1xuICAgICAgYWN0b3IgPSBDb0M3VXRpbGl0aWVzLmdldEFjdG9yRnJvbVN0cmluZyhjcmVhdHVyZSlcbiAgICB9XG5cbiAgICBpZiAoYWN0b3IpIHtcbiAgICAgIGlmIChhY3Rvci5pc1Rva2VuKSB7XG4gICAgICAgIGNvbnN0IHNwZWNpZSA9IGdhbWUuYWN0b3JzLmdldChhY3Rvci5pZClcbiAgICAgICAgLy8gVGhlIHRva2VuIGhhcyBhIGRpZmZlcmVudCBtYXhpbXVtIHNhbiBsb3NzLlxuICAgICAgICAvLyBXZSBhc3N1bWUgaXQncyBhIHNwZWNpYWwgcmVwcmVzYW50YW50IG9mIGhpcyBzcGVjaWUuXG4gICAgICAgIC8vIFRoZSBzYW4gbG9zcyBmb3IgZW5jb3V0ZXJlZCBjcmVhdHVyZSB3aWxsIGNvdW50ZWQgZm9yIHRoYXQgdG9rZW4gaW4gcGFydGljdWxhclxuICAgICAgICAvLyBhbmQgZm9yIHRoZSBhbGwgc3BlY2llXG4gICAgICAgIGlmIChzcGVjaWUgJiYgc3BlY2llLnNhbkxvc3NNYXggIT09IGFjdG9yLnNhbkxvc3NNYXgpIHtcbiAgICAgICAgICBjcmVhdHVyZURhdGEgPSB7XG4gICAgICAgICAgICBpZDogYWN0b3IudG9rZW4uaWQsXG4gICAgICAgICAgICBuYW1lOiBhY3Rvci5uYW1lLFxuICAgICAgICAgICAgc2FuTG9zc01heDogYWN0b3Iuc2FuTG9zc01heCxcbiAgICAgICAgICAgIHNwZWNpZToge1xuICAgICAgICAgICAgICBpZDogc3BlY2llLmlkLFxuICAgICAgICAgICAgICBuYW1lOiBzcGVjaWUubmFtZSxcbiAgICAgICAgICAgICAgc2FuTG9zc01heDogc3BlY2llLnNhbkxvc3NNYXhcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSWYgdGhleSBpbmR1Y2UgdGhlIHNhbWUgU0FOIGxvb3MgY3JlZGl0IGV2ZXJ5dGhpbmcgdG8gdGhlIHNwZWNpZS5cbiAgICAgICAgICAvLyBJZiB0aGUgYWN0b3IgZG9lbid0IGV4aXN0IGluIGFjdG9yIGRpcmVjdG9yeSB1c2UgdGhlIHRva2VuIGRhdGEgaW5zdGVhZC5cbiAgICAgICAgICBjcmVhdHVyZURhdGEgPSB7XG4gICAgICAgICAgICBpZDogc3BlY2llID8gc3BlY2llLmlkIDogYWN0b3IuaWQsXG4gICAgICAgICAgICBuYW1lOiBzcGVjaWUgPyBzcGVjaWUubmFtZSA6IGFjdG9yLm5hbWUsXG4gICAgICAgICAgICBzYW5Mb3NzTWF4OiBzcGVjaWUgPyBzcGVjaWUuc2FuTG9zc01heCA6IGFjdG9yLnNhbkxvc3NNYXhcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNyZWF0dXJlRGF0YSA9IHtcbiAgICAgICAgICBpZDogYWN0b3IuaWQsXG4gICAgICAgICAgbmFtZTogYWN0b3IubmFtZSxcbiAgICAgICAgICBzYW5Mb3NzTWF4OiBhY3Rvci5zYW5Mb3NzTWF4XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBjcmVhdHVyZURhdGFcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBjcmVhdHVyZSA9PT0gJ29iamVjdCcpIHJldHVybiBjcmVhdHVyZVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBzdGF0aWMgZ2V0QWN0b3JGcm9tU3RyaW5nIChhY3RvclN0cmluZykge1xuICAgIGxldCBhY3RvclxuXG4gICAgLy8gVG9rZW4gaXMgYmV0dGVyIHRoYW4gYWN0b3IuXG4gICAgLy8gQ2FzZSAxIDogdHJ5aW5nIHdpdGggSUQuXG4gICAgLy8gQ2FzZSAxLjEgOiB0b2tlbiBmb3VuZC5cbiAgICBpZiAoZ2FtZS5hY3RvcnMudG9rZW5zW2FjdG9yU3RyaW5nXSkgcmV0dXJuIGdhbWUuYWN0b3JzLnRva2Vuc1thY3RvclN0cmluZ11cbiAgICAvLyBDYXNlIDEuMiA6IGFjdG9yIGZvdW5kLlxuICAgIGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KGFjdG9yU3RyaW5nKVxuICAgIGlmIChhY3RvcikgcmV0dXJuIGFjdG9yXG5cbiAgICAvLyBDYXNlIDIgOiB0cnlpbmcgd2l0aCBuYW1lXG4gICAgLy8gQ2FzZSAyLjEgOiB0b2tlbiBmb3VuZC5cbiAgICBhY3RvciA9IE9iamVjdC52YWx1ZXMoZ2FtZS5hY3RvcnMudG9rZW5zKS5maW5kKHQgPT4ge1xuICAgICAgaWYgKHQubmFtZS50b0xvd2VyQ2FzZSgpID09PSBhY3RvclN0cmluZy50b0xvd2VyQ2FzZSgpKSByZXR1cm4gdHJ1ZVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfSlcbiAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAvLyBDYXNlIDIuMiA6IGFjdG9yIGZvdW5kLlxuICAgICAgYWN0b3IgPSBnYW1lLmFjdG9ycy5maW5kKGEgPT4ge1xuICAgICAgICBpZiAoYS5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IGFjdG9yU3RyaW5nLnRvTG93ZXJDYXNlKCkpIHJldHVybiB0cnVlXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKGFjdG9yKSByZXR1cm4gYWN0b3JcblxuICAgIC8vIC8vIENhc2UgMyBzdHJpbmcgbWF5YmUgYW4gYWN0b3JLZXlcbiAgICAvLyBpZiAoY3JlYXR1cmUuaW5jbHVkZXMoJy4nKSkge1xuICAgIC8vICAgY29uc3QgWywgYWN0b3JJZF0gPSBrZXkuc3BsaXQoJy4nKVxuICAgIC8vICAgcmV0dXJuIENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JGcm9tU3RyaW5nKGFjdG9ySWQpXG4gICAgLy8gfVxuXG4gICAgLy8gTm8gam95XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHN0YXRpYyBnZXRDaGFyYWN0ZXJpc3RpY05hbWVzIChjaGFyKSB7XG4gICAgY29uc3QgY2hhcktleSA9IGNoYXIudG9Mb3dlckNhc2UoKVxuXG4gICAgc3dpdGNoIChjaGFyS2V5KSB7XG4gICAgICBjYXNlICdzdHInOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5TVFInKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuU3RyZW5ndGgnKVxuICAgICAgICB9XG4gICAgICBjYXNlICdjb24nOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5DT04nKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuQ29uc3RpdHV0aW9uJylcbiAgICAgICAgfVxuICAgICAgY2FzZSAnc2l6JzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzaG9ydDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuU0laJyksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLlNpemUnKVxuICAgICAgICB9XG4gICAgICBjYXNlICdkZXgnOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5ERVgnKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuRGV4dGVyaXR5JylcbiAgICAgICAgfVxuICAgICAgY2FzZSAnYXBwJzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzaG9ydDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuQVBQJyksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkFwcGVhcmFuY2UnKVxuICAgICAgICB9XG4gICAgICBjYXNlICdpbnQnOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5JTlQnKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuSW50ZWxsaWdlbmNlJylcbiAgICAgICAgfVxuICAgICAgY2FzZSAncG93JzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzaG9ydDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuUE9XJyksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLlBvd2VyJylcbiAgICAgICAgfVxuICAgICAgY2FzZSAnZWR1JzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzaG9ydDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuRURVJyksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkVkdWNhdGlvbicpXG4gICAgICAgIH1cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgZm9yIChjb25zdCBbLCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoXG4gICAgICAgICAgZ2FtZS5zeXN0ZW0udGVtcGxhdGUuQWN0b3IudGVtcGxhdGVzLmNoYXJhY3RlcmlzdGljcy5jaGFyYWN0ZXJpc3RpY3NcbiAgICAgICAgKSkge1xuICAgICAgICAgIGlmIChjaGFyS2V5ID09PSBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUuc2hvcnQpLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUuc2hvcnQpLFxuICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLmxhYmVsKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBjb252ZXJ0RGlmZmljdWx0eSAoZGlmZmljdWx0eSkge1xuICAgIGlmIChTdHJpbmcoZGlmZmljdWx0eSkgPT09ICcwJykgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIGlmICh0eXBlb2YgZGlmZmljdWx0eSAhPT0gJ3N0cmluZycpIHJldHVybiBkaWZmaWN1bHR5XG4gICAgaWYgKCFpc05hTihOdW1iZXIoZGlmZmljdWx0eSkpKSByZXR1cm4gTnVtYmVyKGRpZmZpY3VsdHkpXG5cbiAgICBzd2l0Y2ggKGRpZmZpY3VsdHkpIHtcbiAgICAgIGNhc2UgJz8nOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duXG4gICAgICBjYXNlICcrJzpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZFxuICAgICAgY2FzZSAnKysnOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lXG4gICAgICBjYXNlICcrKysnOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbFxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBza2lsbENoZWNrTWFjcm8gKHNraWxsLCBldmVudCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICBsZXQgYWN0b3JcbiAgICBpZiAoc3BlYWtlci50b2tlbikgYWN0b3IgPSBnYW1lLmFjdG9ycy50b2tlbnNbc3BlYWtlci50b2tlbl1cbiAgICBpZiAoIWFjdG9yKSBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKSAvLyBObyBuZWVkIHRvIGZpbGwgYWN0b3IgdG9rZW5cblxuICAgIGlmICghYWN0b3IpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk5vQWN0b3JBdmFpbGFibGUnKSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGFjdG9yLnNraWxsQ2hlY2soc2tpbGwsIGV2ZW50LnNoaWZ0S2V5LCBvcHRpb25zKVxuICB9XG5cbiAgc3RhdGljIHdlYXBvbkNoZWNrTWFjcm8gKHdlYXBvbiwgZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgIGxldCBhY3RvclxuICAgIGlmIChzcGVha2VyLnRva2VuKSBhY3RvciA9IGdhbWUuYWN0b3JzLnRva2Vuc1tzcGVha2VyLnRva2VuXVxuICAgIGlmICghYWN0b3IpIHtcbiAgICAgIGlmIChzcGVha2VyLnNjZW5lICYmIHNwZWFrZXIudG9rZW4pIHtcbiAgICAgICAgLy8gQ3JlYXRlIGEgc3ludGhldGljIGFjdG9yIGxpbmtlZCB3aXRoIHRoZSBhY3RpdmUgdG9rZW4uXG4gICAgICAgIGNvbnN0IGJhc2VBY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKVxuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzcGVha2VyLnNjZW5lKVxuICAgICAgICBjb25zdCB0b2tlbiA9IHNjZW5lLnRva2Vucy5nZXQoc3BlYWtlci50b2tlbilcblxuICAgICAgICBjb25zdCBBY3RvckNsYXNzID0gZ2V0RG9jdW1lbnRDbGFzcygnQWN0b3InKVxuICAgICAgICBjb25zdCB0b2tlbkFjdG9yID0gbmV3IEFjdG9yQ2xhc3MoYmFzZUFjdG9yLnRvSlNPTigpLCB7XG4gICAgICAgICAgcGFyZW50OiB0b2tlblxuICAgICAgICB9KVxuICAgICAgICBhY3RvciA9IHRva2VuQWN0b3JcbiAgICAgIH0gZWxzZSBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKVxuICAgIH1cblxuICAgIGlmICghYWN0b3IpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk5vQWN0b3JBdmFpbGFibGUnKSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGFjdG9yLndlYXBvbkNoZWNrKHdlYXBvbiwgZXZlbnQuc2hpZnRLZXkpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY2hlY2tNYWNybyAodGhyZXNob2xkID0gdW5kZWZpbmVkLCBldmVudCA9IG51bGwpIHtcbiAgICBhd2FpdCBDb0M3VXRpbGl0aWVzLnJvbGxEaWNlKGV2ZW50LCB7IHRocmVzaG9sZDogdGhyZXNob2xkIH0pXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlTWFjcm8gKGJhciwgZGF0YSwgc2xvdCkge1xuICAgIGlmIChkYXRhLnR5cGUgIT09ICdJdGVtJykgcmV0dXJuXG5cbiAgICBsZXQgaXRlbVxuICAgIGxldCBvcmlnaW5cbiAgICBsZXQgcGFja05hbWUgPSBudWxsXG5cbiAgICBpZiAoZGF0YS5wYWNrKSB7XG4gICAgICBjb25zdCBwYWNrID0gZ2FtZS5wYWNrcy5nZXQoZGF0YS5wYWNrKVxuICAgICAgaWYgKHBhY2subWV0YWRhdGEuZW50aXR5ICE9PSAnSXRlbScpIHJldHVyblxuICAgICAgcGFja05hbWUgPSBkYXRhLnBhY2tcbiAgICAgIGl0ZW0gPSBhd2FpdCBwYWNrLmdldERvY3VtZW50KGRhdGEuaWQpXG4gICAgICBvcmlnaW4gPSAncGFjaydcbiAgICB9IGVsc2UgaWYgKGRhdGEuZGF0YSkge1xuICAgICAgaXRlbSA9IGRhdGEuZGF0YVxuICAgICAgb3JpZ2luID0gJ2FjdG9yJ1xuICAgIH0gZWxzZSB7XG4gICAgICBpdGVtID0gZ2FtZS5pdGVtcy5nZXQoZGF0YS5pZClcbiAgICAgIG9yaWdpbiA9ICdnYW1lJ1xuICAgIH1cblxuICAgIGlmICghaXRlbSkge1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5NYWNyb05vSXRlbUZvdW5kJylcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKCEoaXRlbS50eXBlID09PSAnd2VhcG9uJykgJiYgIShpdGVtLnR5cGUgPT09ICdza2lsbCcpKSB7XG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk1hY3JvSW5jb3JyZWN0VHlwZScpXG4gICAgICApXG4gICAgfVxuXG4gICAgbGV0IGNvbW1hbmRcblxuICAgIGlmIChpdGVtLnR5cGUgPT09ICd3ZWFwb24nKSB7XG4gICAgICBjb21tYW5kID0gYGdhbWUuQ29DNy5tYWNyb3Mud2VhcG9uQ2hlY2soe25hbWU6JyR7aXRlbS5uYW1lfScsIGlkOicke2l0ZW0uaWR9Jywgb3JpZ2luOicke29yaWdpbn0nLCBwYWNrOiAnJHtwYWNrTmFtZX0nfSwgZXZlbnQpO2BcbiAgICB9XG5cbiAgICBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICBpZiAoQ29DN0l0ZW0uaXNBbnlTcGVjKGl0ZW0pKSB7XG4gICAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5Ob0dsb2JhbFNwZWMnKVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBjb21tYW5kID0gYGdhbWUuQ29DNy5tYWNyb3Muc2tpbGxDaGVjayh7bmFtZTonJHtpdGVtLm5hbWV9JywgaWQ6JyR7aXRlbS5pZH0nLCBvcmlnaW46JyR7b3JpZ2lufScsIHBhY2s6ICcke3BhY2tOYW1lfSd9LCBldmVudCk7YFxuICAgIH1cblxuICAgIC8vIENyZWF0ZSB0aGUgbWFjcm8gY29tbWFuZFxuICAgIGxldCBtYWNybyA9IGdhbWUubWFjcm9zLmNvbnRlbnRzLmZpbmQoXG4gICAgICBtID0+IG0ubmFtZSA9PT0gaXRlbS5uYW1lICYmIG0uY29tbWFuZCA9PT0gY29tbWFuZFxuICAgIClcbiAgICBpZiAoIW1hY3JvKSB7XG4gICAgICBtYWNybyA9IGF3YWl0IE1hY3JvLmNyZWF0ZSh7XG4gICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgdHlwZTogJ3NjcmlwdCcsXG4gICAgICAgIGltZzogaXRlbS5pbWcsXG4gICAgICAgIGNvbW1hbmQ6IGNvbW1hbmRcbiAgICAgIH0pXG4gICAgfVxuICAgIGdhbWUudXNlci5hc3NpZ25Ib3RiYXJNYWNybyhtYWNybywgc2xvdClcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB0b2dnbGVEZXZQaGFzZSAodG9nZ2xlKSB7XG4gICAgYXdhaXQgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnZGV2ZWxvcG1lbnRFbmFibGVkJywgdG9nZ2xlKVxuICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgIHRvZ2dsZVxuICAgICAgICA/IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5EZXZQaGFzZUVuYWJsZWQnKVxuICAgICAgICA6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5EZXZQaGFzZURpc2FibGVkJylcbiAgICApXG4gICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCB7XG4gICAgICB0eXBlOiAndXBkYXRlQ2hhcidcbiAgICB9KVxuICAgIENvQzdVdGlsaXRpZXMudXBkYXRlQ2hhclNoZWV0cygpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdG9nZ2xlQ2hhckNyZWF0aW9uICh0b2dnbGUpIHtcbiAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJywgdG9nZ2xlKVxuICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgIHRvZ2dsZVxuICAgICAgICA/IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DaGFyQ3JlYXRpb25FbmFibGVkJylcbiAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hhckNyZWF0aW9uRGlzYWJsZWQnKVxuICAgIClcbiAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIHtcbiAgICAgIHR5cGU6ICd1cGRhdGVDaGFyJ1xuICAgIH0pXG4gICAgQ29DN1V0aWxpdGllcy51cGRhdGVDaGFyU2hlZXRzKClcbiAgICBIb29rcy5jYWxsKCd0b2dnbGVDaGFyQ3JlYXRpb24nLCB0b2dnbGUpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgc3RhcnRSZXN0ICgpIHtcbiAgICBjb25zdCBhY3RvcnMgPSBnYW1lLmFjdG9ycy5maWx0ZXIoYWN0b3IgPT4gYWN0b3IuaGFzUGxheWVyT3duZXIpXG4gICAgbGV0IGNoYXRDb250ZW50ID0gYDxpPiR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LmRyZWFtaW5nJyl9Li4uPC9pPjxicj5gXG4gICAgZm9yIChjb25zdCBhY3RvciBvZiBhY3RvcnMpIHtcbiAgICAgIGlmIChbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnXS5pbmNsdWRlcyhhY3Rvci50eXBlKSkge1xuICAgICAgICBsZXQgcXVpY2tIZWFsZXIgPSBmYWxzZVxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYWN0b3IuZGF0YS5pdGVtcykge1xuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICd0YWxlbnQnKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5uYW1lID09PSBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucXVpY2tIZWFsZXInKX1gKSB7XG4gICAgICAgICAgICAgIHF1aWNrSGVhbGVyID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpc0NyaXRpY2FsV291bmRzID0gYWN0b3IuZGF0YS5kYXRhLnN0YXR1cy5jcml0aWNhbFdvdW5kcy52YWx1ZVxuICAgICAgICBjb25zdCBkYWlseVNhbml0eUxvc3MgPSBhY3Rvci5kYXRhLmRhdGEuYXR0cmlicy5zYW4uZGFpbHlMb3NzXG4gICAgICAgIGNvbnN0IGhwVmFsdWUgPSBhY3Rvci5kYXRhLmRhdGEuYXR0cmlicy5ocC52YWx1ZVxuICAgICAgICBjb25zdCBocE1heCA9IGFjdG9yLmRhdGEuZGF0YS5hdHRyaWJzLmhwLm1heFxuICAgICAgICBjb25zdCBvbmVGaWZ0aFNhbml0eSA9XG4gICAgICAgICAgJyAvICcgKyBNYXRoLmZsb29yKGFjdG9yLmRhdGEuZGF0YS5hdHRyaWJzLnNhbi52YWx1ZSAvIDUpXG4gICAgICAgIGNvbnN0IG1wVmFsdWUgPSBhY3Rvci5kYXRhLmRhdGEuYXR0cmlicy5tcC52YWx1ZVxuICAgICAgICBjb25zdCBtcE1heCA9IGFjdG9yLmRhdGEuZGF0YS5hdHRyaWJzLm1wLm1heFxuICAgICAgICBjaGF0Q29udGVudCA9IGNoYXRDb250ZW50ICsgYDxicj48Yj4ke2FjdG9yLm5hbWV9LiA8L2I+YFxuICAgICAgICBpZiAoaXNDcml0aWNhbFdvdW5kcyA9PT0gZmFsc2UgJiYgaHBWYWx1ZSA8IGhwTWF4KSB7XG4gICAgICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlcycpICYmIHF1aWNrSGVhbGVyID09PSB0cnVlKSB7XG4gICAgICAgICAgICBjaGF0Q29udGVudCA9XG4gICAgICAgICAgICAgIGNoYXRDb250ZW50ICtcbiAgICAgICAgICAgICAgYDxiIHN0eWxlPVwiY29sb3I6ZGFya29saXZlZ3JlZW5cIj4ke2dhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgJ0NvQzcucHVscEhlYWx0aFJlY292ZXJlZCcsXG4gICAgICAgICAgICAgICAgeyBudW1iZXI6IDMgfVxuICAgICAgICAgICAgICApfS4gPC9iPmBcbiAgICAgICAgICAgIGFjdG9yLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICdkYXRhLmF0dHJpYnMuaHAudmFsdWUnOiBhY3Rvci5kYXRhLmRhdGEuYXR0cmlicy5ocC52YWx1ZSArIDNcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZXMnKSkge1xuICAgICAgICAgICAgY2hhdENvbnRlbnQgPVxuICAgICAgICAgICAgICBjaGF0Q29udGVudCArXG4gICAgICAgICAgICAgIGA8YiBzdHlsZT1cImNvbG9yOmRhcmtvbGl2ZWdyZWVuXCI+JHtnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICdDb0M3LnB1bHBIZWFsdGhSZWNvdmVyZWQnLFxuICAgICAgICAgICAgICAgIHsgbnVtYmVyOiAyIH1cbiAgICAgICAgICAgICAgKX0uIDwvYj5gXG4gICAgICAgICAgICBhY3Rvci51cGRhdGUoe1xuICAgICAgICAgICAgICAnZGF0YS5hdHRyaWJzLmhwLnZhbHVlJzogYWN0b3IuZGF0YS5kYXRhLmF0dHJpYnMuaHAudmFsdWUgKyAyXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGF0Q29udGVudCA9XG4gICAgICAgICAgICAgIGNoYXRDb250ZW50ICtcbiAgICAgICAgICAgICAgYDxiIHN0eWxlPVwiY29sb3I6ZGFya29saXZlZ3JlZW5cIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAnQ29DNy5oZWFsdGhSZWNvdmVyZWQnXG4gICAgICAgICAgICAgICl9LiA8L2I+YFxuICAgICAgICAgICAgYWN0b3IudXBkYXRlKHtcbiAgICAgICAgICAgICAgJ2RhdGEuYXR0cmlicy5ocC52YWx1ZSc6IGFjdG9yLmRhdGEuZGF0YS5hdHRyaWJzLmhwLnZhbHVlICsgMVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoaXNDcml0aWNhbFdvdW5kcyA9PT0gdHJ1ZSAmJiBocFZhbHVlIDwgaHBNYXgpIHtcbiAgICAgICAgICBjaGF0Q29udGVudCA9XG4gICAgICAgICAgICBjaGF0Q29udGVudCArXG4gICAgICAgICAgICBgPGIgc3R5bGU9XCJjb2xvcjpkYXJrcmVkXCI+JHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICdDb0M3Lmhhc0NyaXRpY2FsV291bmRzJ1xuICAgICAgICAgICAgKX0uIDwvYj5gXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhaWx5U2FuaXR5TG9zcyA+IDApIHtcbiAgICAgICAgICBjaGF0Q29udGVudCA9XG4gICAgICAgICAgICBjaGF0Q29udGVudCArXG4gICAgICAgICAgICBgPGIgc3R5bGU9XCJjb2xvcjpkYXJrb2xpdmVncmVlblwiPiR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAnQ29DNy5kYWlseVNhbkxvc3NSZXN0YXJ0ZWQnXG4gICAgICAgICAgICApfS48L2I+YFxuICAgICAgICAgIGFjdG9yLnVwZGF0ZSh7XG4gICAgICAgICAgICAnZGF0YS5hdHRyaWJzLnNhbi5kYWlseUxvc3MnOiAwLFxuICAgICAgICAgICAgJ2RhdGEuYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHknOiBvbmVGaWZ0aFNhbml0eVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1wVmFsdWUgPCBtcE1heCkge1xuICAgICAgICAgIGNoYXRDb250ZW50ID1cbiAgICAgICAgICAgIGNoYXRDb250ZW50ICtcbiAgICAgICAgICAgIGA8YiBzdHlsZT1cImNvbG9yOmRhcmtvbGl2ZWdyZWVuXCI+JHtnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAnQ29DNy5tYWdpY1BvaW50c1JlY292ZXJlZCdcbiAgICAgICAgICAgICl9OiA3LjwvYj5gXG4gICAgICAgICAgYWN0b3IudXBkYXRlKHtcbiAgICAgICAgICAgICdkYXRhLmF0dHJpYnMubXAudmFsdWUnOiBhY3Rvci5kYXRhLmRhdGEuYXR0cmlicy5tcC52YWx1ZSArIDdcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgc3BlYWtlcjogQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpLFxuICAgICAgY29udGVudDogY2hhdENvbnRlbnQsXG4gICAgICB0eXBlOiBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuT1RIRVJcbiAgICB9XG4gICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHRvZ2dsZVhQR2FpbiAodG9nZ2xlKSB7XG4gICAgYXdhaXQgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAneHBFbmFibGVkJywgdG9nZ2xlKVxuICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgIHRvZ2dsZVxuICAgICAgICA/IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5YUEdhaW5FbmFibGVkJylcbiAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuWFBHYWluRGlzYWJsZWQnKVxuICAgIClcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyByb2xsRGljZSAoZXZlbnQsIG9wdGlvbnMgPSB7fSkge1xuICAgIG9wdGlvbnMuYXNrVmFsdWUgPSAhb3B0aW9ucy50aHJlc2hvbGRcbiAgICBsZXQgZGljZU1vZGlmaWVyLCBkaWZmaWN1bHR5LCBmbGF0RGljZU1vZGlmaWVyLCBmbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICBsZXQgdGhyZXNob2xkID0gb3B0aW9ucy50aHJlc2hvbGRcblxuICAgIGlmICh1bmRlZmluZWQgIT09IG9wdGlvbnMubW9kaWZpZXIpIGRpY2VNb2RpZmllciA9IE51bWJlcihvcHRpb25zLm1vZGlmaWVyKVxuICAgIGlmICh1bmRlZmluZWQgIT09IG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgZGlmZmljdWx0eSA9IENvQzdVdGlsaXRpZXMuY29udmVydERpZmZpY3VsdHkob3B0aW9ucy5kaWZmaWN1bHR5KVxuICAgIH1cblxuICAgIGlmICghZXZlbnQ/LnNoaWZ0S2V5ICYmICFvcHRpb25zLmZhc3RGb3J3YXJkKSB7XG4gICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKG9wdGlvbnMpXG4gICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgZGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnYm9udXNEaWNlJykpXG4gICAgICAgIGRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICAgIHRocmVzaG9sZCA9IE51bWJlcih1c2FnZS5nZXQoJ3RocmVzaG9sZCcpKVxuICAgICAgICBmbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxuICAgICAgICBmbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0VGhyZXNob2xkTW9kaWZpZXInKSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBhY3RvcnMgPSBbXVxuXG4gICAgaWYgKGdhbWUudXNlci5pc0dNICYmIGNhbnZhcy50b2tlbnMuY29udHJvbGxlZC5sZW5ndGgpIHtcbiAgICAgIGZvciAoY29uc3QgdG9rZW4gb2YgY2FudmFzLnRva2Vucy5jb250cm9sbGVkKSB7XG4gICAgICAgIGFjdG9ycy5wdXNoKHRva2VuLmFjdG9yLnRva2VuS2V5KVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZ2FtZS51c2VyLmNoYXJhY3Rlcikge1xuICAgICAgYWN0b3JzLnB1c2goZ2FtZS51c2VyLmNoYXJhY3Rlci50b2tlbktleSlcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHRrIG9mIGFjdG9ycykge1xuICAgICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IGRpY2VNb2RpZmllciB8fCAwXG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgIGNoZWNrLnJhd1ZhbHVlID0gdGhyZXNob2xkXG4gICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gZmxhdERpY2VNb2RpZmllclxuICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgICBjaGVjay5hY3RvciA9IHRrXG4gICAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgfVxuXG4gICAgaWYgKCFhY3RvcnMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gZGljZU1vZGlmaWVyIHx8IDBcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5IHx8IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgY2hlY2sucmF3VmFsdWUgPSB0aHJlc2hvbGRcbiAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBmbGF0RGljZU1vZGlmaWVyXG4gICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBmbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgICAgY2hlY2sudG9NZXNzYWdlKClcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgdXBkYXRlQ2hhclNoZWV0cyAoKSB7XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBmb3IgKGNvbnN0IGEgb2YgZ2FtZS5hY3RvcnMuY29udGVudHMpIHtcbiAgICAgICAgaWYgKGE/LmRhdGE/LnR5cGUgPT09ICdjaGFyYWN0ZXInICYmIGE/LnNoZWV0ICYmIGE/LnNoZWV0Py5yZW5kZXJlZCkge1xuICAgICAgICAgIGEudXBkYXRlKHsgJ2RhdGEuZmxhZ3MubG9ja2VkJzogdHJ1ZSB9KVxuICAgICAgICAgIGEucmVuZGVyKGZhbHNlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAoY29uc3QgYSBvZiBnYW1lLmFjdG9ycy5jb250ZW50cykge1xuICAgICAgICBpZiAoYS5pc093bmVyKSB7XG4gICAgICAgICAgYS51cGRhdGUoeyAnZGF0YS5mbGFncy5sb2NrZWQnOiB0cnVlIH0pXG4gICAgICAgICAgYS5yZW5kZXIoZmFsc2UpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIGZyb20gX29uRHJvcCB0byBnZXQgdGhlIGRyb3BwZWQgZW50aXR5VHlwZSBvciBlbnRpdHlUeXBlIGZyb20gYSBmb2xkZXJcbiAgICogQHBhcmFtIHtqUXVlcnl9IGV2ZW50IEBzZWUgYWN0aXZhdGVMaXN0ZW5lcnNcbiAgICogQHJldHVybnMgW2l0ZW1zXSBhcnJheSBvZiBpdGVtc1xuICAgKi9cbiAgc3RhdGljIGFzeW5jIGdldERhdGFGcm9tRHJvcEV2ZW50IChldmVudCwgZW50aXR5VHlwZSA9ICdJdGVtJykge1xuICAgIGlmIChldmVudC5vcmlnaW5hbEV2ZW50KSByZXR1cm4gW11cbiAgICB0cnkge1xuICAgICAgY29uc3QgZGF0YUxpc3QgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJykpXG4gICAgICBpZiAoZGF0YUxpc3QudHlwZSA9PT0gJ0ZvbGRlcicgJiYgZGF0YUxpc3QuZG9jdW1lbnROYW1lID09PSBlbnRpdHlUeXBlKSB7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGdhbWUuZm9sZGVycy5nZXQoZGF0YUxpc3QuaWQpXG4gICAgICAgIGlmICghZm9sZGVyKSByZXR1cm4gW11cbiAgICAgICAgcmV0dXJuIGZvbGRlci5jb250ZW50c1xuICAgICAgfSBlbHNlIGlmIChkYXRhTGlzdC50eXBlID09PSBlbnRpdHlUeXBlKSB7XG4gICAgICAgIGlmIChkYXRhTGlzdC5wYWNrKSB7XG4gICAgICAgICAgY29uc3QgcGFjayA9IGdhbWUucGFja3MuZ2V0KGRhdGFMaXN0LnBhY2spXG4gICAgICAgICAgaWYgKHBhY2subWV0YWRhdGEuZW50aXR5ICE9PSBlbnRpdHlUeXBlKSByZXR1cm4gW11cbiAgICAgICAgICByZXR1cm4gW2F3YWl0IHBhY2suZ2V0RG9jdW1lbnQoZGF0YUxpc3QuaWQpXVxuICAgICAgICB9IGVsc2UgaWYgKGRhdGFMaXN0LmRhdGEpIHtcbiAgICAgICAgICByZXR1cm4gW2RhdGFMaXN0XVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBbZ2FtZS5pdGVtcy5nZXQoZGF0YUxpc3QuaWQpXVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gW11cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjb3B5VG9DbGlwYm9hcmQgKHRleHQpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKG5hdmlnYXRvci5jbGlwYm9hcmQgJiYgd2luZG93LmlzU2VjdXJlQ29udGV4dCkge1xuICAgICAgICByZXR1cm4gbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGV4dClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHRleHRBcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKVxuICAgICAgICB0ZXh0QXJlYS52YWx1ZSA9IHRleHRcbiAgICAgICAgdGV4dEFyZWEuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnXG4gICAgICAgIHRleHRBcmVhLnN0eWxlLmxlZnQgPSAnLTk5OXB4J1xuICAgICAgICB0ZXh0QXJlYS5zdHlsZS50b3AgPSAnLTk5OXB4J1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRleHRBcmVhKVxuICAgICAgICB0ZXh0QXJlYS5mb2N1cygpXG4gICAgICAgIHRleHRBcmVhLnNlbGVjdCgpXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NvcHknKVxuICAgICAgICAgICAgPyByZXNvbHZlKClcbiAgICAgICAgICAgIDogcmVqZWN0KFxuICAgICAgICAgICAgICAgIG5ldyBFcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVW5hYmxlVG9Db3B5VG9DbGlwYm9hcmQnKSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgIHRleHRBcmVhLnJlbW92ZSgpXG4gICAgICAgIH0pLmNhdGNoKGVyciA9PiB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVycikpXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5VbmFibGVUb0NvcHlUb0NsaXBib2FyZCcpKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBxdW90ZVJlZ0V4cCAoc3RyaW5nKSB7XG4gICAgLy8gaHR0cHM6Ly9iaXRidWNrZXQub3JnL2NnZ2FlcnRuZXIvanMtaGFja3MvcmF3L21hc3Rlci9xdW90ZS5qc1xuICAgIGNvbnN0IGxlbiA9IHN0cmluZy5sZW5ndGhcbiAgICBsZXQgcVN0cmluZyA9ICcnXG5cbiAgICBmb3IgKGxldCBjdXJyZW50LCBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICBjdXJyZW50ID0gc3RyaW5nLmNoYXJBdChpKVxuXG4gICAgICBpZiAoY3VycmVudCA+PSAnICcgJiYgY3VycmVudCA8PSAnficpIHtcbiAgICAgICAgaWYgKGN1cnJlbnQgPT09ICdcXFxcJyB8fCBjdXJyZW50ID09PSBcIidcIikge1xuICAgICAgICAgIHFTdHJpbmcgKz0gJ1xcXFwnXG4gICAgICAgIH1cblxuICAgICAgICBxU3RyaW5nICs9IGN1cnJlbnQucmVwbGFjZSgvWy1bXFxdL3t9KCkqKz8uXFxcXF4kfF0vZywgJ1xcXFwkJicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzd2l0Y2ggKGN1cnJlbnQpIHtcbiAgICAgICAgICBjYXNlICdcXGInOlxuICAgICAgICAgICAgcVN0cmluZyArPSAnXFxcXGInXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAnXFxmJzpcbiAgICAgICAgICAgIHFTdHJpbmcgKz0gJ1xcXFxmJ1xuICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgIGNhc2UgJ1xcbic6XG4gICAgICAgICAgICBxU3RyaW5nICs9ICdcXFxcbidcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBjYXNlICdcXHInOlxuICAgICAgICAgICAgcVN0cmluZyArPSAnXFxcXHInXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAnXFx0JzpcbiAgICAgICAgICAgIHFTdHJpbmcgKz0gJ1xcXFx0J1xuICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgIGNhc2UgJ1xcdic6XG4gICAgICAgICAgICBxU3RyaW5nICs9ICdcXFxcdidcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcVN0cmluZyArPSAnXFxcXHUnXG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KVxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDQ7IC0taiA+PSBjdXJyZW50Lmxlbmd0aDsgcVN0cmluZyArPSAnMCcpO1xuICAgICAgICAgICAgcVN0cmluZyArPSBjdXJyZW50XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcVN0cmluZ1xuICB9XG59XG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIGdhbWUgKi9cblxuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4vaGVscGVyLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ2hhdENhcmRBY3RvciB7XG4gIGNvbnN0cnVjdG9yIChhY3RvcktleSA9IG51bGwsIGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICB0aGlzLmFjdG9yS2V5ID0gYWN0b3JLZXlcbiAgICB0aGlzLmZhc3RGb3J3YXJkID0gZmFzdEZvcndhcmRcbiAgfVxuXG4gIGdldCBkaXNwbGF5QWN0b3JPbkNhcmQgKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNwbGF5QWN0b3JPbkNhcmQnKVxuICB9XG5cbiAgZ2V0IGlzQmxpbmQgKCkge1xuICAgIGlmICghdGhpcy5yb2xsTW9kZSkgcmV0dXJuIG51bGxcbiAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9pc0JsaW5kKSB7XG4gICAgICB0aGlzLl9pc0JsaW5kID0gdGhpcy5yb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCdcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2lzQmxpbmRcbiAgfVxuXG4gIHNldCBpc0JsaW5kICh4KSB7XG4gICAgdGhpcy5faXNCbGluZCA9IHhcbiAgfVxuXG4gIGdldCByb2xsTW9kZSAoKSB7XG4gICAgaWYgKCF0aGlzLl9yb2xsTW9kZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgcmV0dXJuIHRoaXMuX3JvbGxNb2RlXG4gIH1cblxuICBzZXQgcm9sbE1vZGUgKHgpIHtcbiAgICB0aGlzLl9yb2xsTW9kZSA9IHhcbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgaWYgKCF0aGlzLmFjdG9yS2V5KSByZXR1cm4gbnVsbFxuICAgIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgfVxuXG4gIGdldCB0b2tlbiAoKSB7XG4gICAgaWYgKCF0aGlzLmFjdG9yKSByZXR1cm4gbnVsbFxuICAgIHJldHVybiBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICB9XG5cbiAgZ2V0IGl0ZW0gKCkge1xuICAgIGlmICghdGhpcy5pdGVtSWQpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMuaXRlbUlkKVxuICB9XG5cbiAgZ2V0IHdlYXBvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbVxuICB9XG5cbiAgZ2V0IHRhcmdldGVkVG9rZW5zICgpIHtcbiAgICByZXR1cm4gWy4uLmdhbWUudXNlci50YXJnZXRzXVxuICB9XG5cbiAgZ2V0IHRhcmdldCAoKSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0VG9rZW4pIHJldHVybiB0aGlzLnRhcmdldFRva2VuXG4gICAgcmV0dXJuIHRoaXMudGFyZ2V0QWN0b3JcbiAgfVxuXG4gIC8qKlxuICAgKiBJZiBhIHRhcmdldEtleSB3YXMgcHJvdmlkZWQgdHJ5IHRvIGZpbmQgYSB0b2tlbiB3aXRoIHRoYXQga2V5IGFuZCB1c2UgaXQuXG4gICAqIElmIG5vdCB0YXJnZXRLZXkgcHJvdmlkZWQgcmV0dXJuIHRoZSBmaXJzdCB0YXJnZXQuXG4gICAqL1xuICBnZXQgdGFyZ2V0VG9rZW4gKCkge1xuICAgIGlmICghdGhpcy5fdGFyZ2V0VG9rZW4pIHtcbiAgICAgIGlmICh0aGlzLl90YXJnZXRLZXkpIHtcbiAgICAgICAgdGhpcy5fdGFyZ2V0VG9rZW4gPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLl90YXJnZXRLZXkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl90YXJnZXRUb2tlbiA9IHRoaXMudGFyZ2V0ZWRUb2tlbnMucG9wKClcbiAgICAgICAgaWYgKHRoaXMuX3RhcmdldFRva2VuKSB7XG4gICAgICAgICAgdGhpcy5fdGFyZ2V0S2V5ID0gYCR7dGhpcy5fdGFyZ2V0VG9rZW4uc2NlbmUuaWR9LiR7dGhpcy5fdGFyZ2V0VG9rZW4uaWR9YFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgICAgIHRoaXMuX3RhcmdldFRva2VuID0gbnVsbFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl90YXJnZXRUb2tlblxuICB9XG5cbiAgZ2V0IHRhcmdldEFjdG9yICgpIHtcbiAgICBpZiAoIXRoaXMuX3RhcmdldEFjdG9yKSB7XG4gICAgICBpZiAodGhpcy50YXJnZXRUb2tlbikgdGhpcy5fdGFyZ2V0QWN0b3IgPSB0aGlzLnRhcmdldFRva2VuLmFjdG9yXG4gICAgICBlbHNlIHRoaXMuX3RhcmdldEFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5fdGFyZ2V0S2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldEFjdG9yXG4gIH1cblxuICBnZXQgdGFyZ2V0S2V5ICgpIHtcbiAgICBpZiAoIXRoaXMudGFyZ2V0VG9rZW4gJiYgIXRoaXMudGFyZ2V0QWN0b3IpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldEtleVxuICB9XG5cbiAgZ2V0IGhhc1RhcmdldCAoKSB7XG4gICAgaWYgKCF0aGlzLnRhcmdldFRva2VuICYmICF0aGlzLnRhcmdldEFjdG9yKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgc2V0IHRhcmdldEtleSAoeCkge1xuICAgIHRoaXMuX3RhcmdldEtleSA9IHhcbiAgfVxuXG4gIGdldCBza2lsbHMgKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLmdldFdlYXBvblNraWxscyh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCB0YXJnZXRJbWcgKCkge1xuICAgIGNvbnN0IGltZyA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JJbWdGcm9tS2V5KHRoaXMudGFyZ2V0S2V5KVxuICAgIGlmIChpbWcpIHJldHVybiBpbWdcbiAgICByZXR1cm4gJy4uL2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi1ibGFjay5zdmcnXG4gIH1cblxuICBnZXQgbmFtZSAoKSB7XG4gICAgaWYgKHRoaXMudG9rZW4pIHJldHVybiB0aGlzLnRva2VuLm5hbWVcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5uYW1lXG4gIH1cblxuICBnZXQgdGFyZ2V0TmFtZSAoKSB7XG4gICAgaWYgKCF0aGlzLnRhcmdldCkgcmV0dXJuICdkdW1teSdcbiAgICByZXR1cm4gdGhpcy50YXJnZXQubmFtZVxuICB9XG5cbiAgZ2V0IGFjdG9ySW1nICgpIHtcbiAgICBjb25zdCBpbWcgPSBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICAgIGlmIChpbWcpIHJldHVybiBpbWdcbiAgICByZXR1cm4gJy4uL2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi1ibGFjay5zdmcnXG4gIH1cblxuICBhc3luYyBzYXkgKG1lc3NhZ2UsIGZsYXZvciA9IG51bGwpIHtcbiAgICBjb25zdCBzcGVha2VyRGF0YSA9IHt9XG4gICAgbGV0IHNwZWFrZXJcbiAgICBpZiAodGhpcy5hY3Rvcikge1xuICAgICAgaWYgKHRoaXMudG9rZW4pIHNwZWFrZXJEYXRhLnRva2VuID0gdGhpcy50b2tlblxuICAgICAgZWxzZSBzcGVha2VyRGF0YS5hY3RvciA9IHRoaXMuYWN0b3JcbiAgICAgIHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHNwZWFrZXJEYXRhKVxuICAgIH0gZWxzZSB7XG4gICAgICBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpXG4gICAgfVxuXG4gICAgY29uc3QgdXNlciA9IHRoaXMuYWN0b3IudXNlciA/IHRoaXMuYWN0b3IudXNlciA6IGdhbWUudXNlclxuXG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICB1c2VyOiB1c2VyLmlkLFxuICAgICAgc3BlYWtlcjogc3BlYWtlcixcbiAgICAgIGZsYXZvcjogZmxhdm9yLFxuICAgICAgY29udGVudDogbWVzc2FnZVxuICAgIH1cblxuICAgIGlmIChcbiAgICAgIFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJykpXG4gICAgKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJykgLy8gQ2hhbmdlIGZvciB1c2VyXG4gICAgfVxuICAgIGlmICh0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJykgY2hhdERhdGEuYmxpbmQgPSB0cnVlXG5cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpLnRoZW4obXNnID0+IHtcbiAgICAgIHJldHVybiBtc2dcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIFJvbGwsIHVpICovXG5cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuLi8uLi9kaWNlLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IENoYXRDYXJkQWN0b3IgfSBmcm9tICcuLi9jYXJkLWFjdG9yLmpzJ1xuaW1wb3J0IHsgY3JlYXRlSW5saW5lUm9sbCwgY2hhdEhlbHBlciB9IGZyb20gJy4uL2hlbHBlci5qcydcblxuZnVuY3Rpb24gcmVwbGFjZXIgKGtleSwgdmFsdWUpIHtcbiAgaWYgKGtleS5zdGFydHNXaXRoKCdfXycpKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZCAvLyByZW1vdmUgZnJvbSByZXN1bHRcbiAgfVxuXG4gIGNvbnN0IGV4Y2x1ZGUgPSBbJ19hY3RvcicsICdfY3JlYXR1cmUnXVxuICBpZiAoZXhjbHVkZS5pbmNsdWRlcyhrZXkpKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgY29uc3QgY2hlY2tzID0gWydzYW5DaGVjaycsICdpbnRDaGVjayddXG4gIGlmIChjaGVja3MuaW5jbHVkZXMoa2V5KSkge1xuICAgIHJldHVybiB2YWx1ZS5KU09OUm9sbERhdGFcbiAgfVxuXG4gIHJldHVybiB2YWx1ZSAvLyByZXR1cm4gYXMgaXNcbn1cbmV4cG9ydCBjbGFzcyBTYW5DaGVja0NhcmQgZXh0ZW5kcyBDaGF0Q2FyZEFjdG9yIHtcbiAgY29uc3RydWN0b3IgKGFjdG9yS2V5ID0gbnVsbCwgc2FuRGF0YSA9IHt9LCBvcHRpb25zID0ge30pIHtcbiAgICBzdXBlcihcbiAgICAgIGFjdG9yS2V5LFxuICAgICAgdHlwZW9mIG9wdGlvbnMuZmFzdEZvcndhcmQgIT09ICd1bmRlZmluZWQnXG4gICAgICAgID8gQm9vbGVhbihvcHRpb25zLmZhc3RGb3J3YXJkKVxuICAgICAgICA6IGZhbHNlXG4gICAgKVxuICAgIHRoaXMuc2FuRGF0YSA9IHNhbkRhdGFcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zXG4gICAgaWYgKHNhbkRhdGEubW9kaWZpZXIgJiYgIWlzTmFOKE51bWJlcihzYW5EYXRhLm1vZGlmaWVyKSkpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5zYW5Nb2RpZmllciA9IE51bWJlcihzYW5EYXRhLm1vZGlmaWVyKVxuICAgIH1cbiAgICBpZiAoc2FuRGF0YS5kaWZmaWN1bHR5ICYmICFpc05hTihOdW1iZXIoc2FuRGF0YS5kaWZmaWN1bHR5KSkpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5zYW5EaWZmaWN1bHR5ID0gTnVtYmVyKHNhbkRhdGEuZGlmZmljdWx0eSlcbiAgICB9XG4gICAgLy8gdGhpcy5vcHRpb25zLm9iaj17dGVzdDoxLHRlc3QyOjJ9O1xuICAgIHRoaXMuc3RhdGUgPSB7fVxuICB9XG5cbiAgZ2V0IGlzQmxpbmQgKCkge1xuICAgIHJldHVybiB0eXBlb2YgdGhpcy5vcHRpb25zLmlzQmxpbmQgIT09ICd1bmRlZmluZWQnXG4gICAgICA/IEJvb2xlYW4odGhpcy5vcHRpb25zLmlzQmxpbmQpXG4gICAgICA6IHN1cGVyLmlzQmxpbmRcbiAgfVxuXG4gIGdldCBkaWZmaWN1bHR5ICgpIHtcbiAgICByZXR1cm4gdHlwZW9mIHRoaXMub3B0aW9ucy5kaWZmaWN1bHR5ICE9PSAndW5kZWZpbmVkJ1xuICAgICAgPyB0aGlzLm9wdGlvbnMuZGlmZmljdWx0eVxuICAgICAgOiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgfVxuXG4gIGdldCBtb2RpZmllciAoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB0aGlzLm9wdGlvbnMubW9kaWZpZXIgIT09ICd1bmRlZmluZWQnXG4gICAgICA/IHRoaXMub3B0aW9ucy5tb2RpZmllclxuICAgICAgOiAwXG4gIH1cblxuICBnZXQgY3JlYXR1cmUgKCkge1xuICAgIC8vIFRPRE8gOiBjaGVjayBjb25zdHJ1Y3RvclxuICAgIGlmIChcbiAgICAgIHRoaXMuc2FuRGF0YS5jcmVhdHVyZUtleSAmJlxuICAgICAgKCF0aGlzLl9fY3JlYXR1cmUgfHwgdGhpcy5fX2NyZWF0dXJlLmNvbnN0cnVjdG9yLm5hbWUgPT09ICdPYmplY3QnKVxuICAgICkge1xuICAgICAgdGhpcy5fX2NyZWF0dXJlID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5zYW5EYXRhLmNyZWF0dXJlS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX19jcmVhdHVyZVxuICB9XG5cbiAgZ2V0IGludm9sdW50YXJ5QWN0aW9uICgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLnN0YXRlLnNhblJvbGxlZCAmJlxuICAgICAgKHRoaXMuc2FuQ2hlY2suaXNGYWlsdXJlIHx8IHRoaXMuc2FuQ2hlY2suaXNGdW1ibGUpXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBzYW5Mb3NzRm9ybXVsYSAoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUuc2FuUm9sbGVkKSB7XG4gICAgICBpZiAodGhpcy5zYW5EYXRhLnNhbk1heCAmJiB0aGlzLnNhbkNoZWNrLmZhaWxlZCkge1xuICAgICAgICByZXR1cm4gIWlzTmFOKE51bWJlcih0aGlzLnNhbkRhdGEuc2FuTWF4KSlcbiAgICAgICAgICA/IE51bWJlcih0aGlzLnNhbkRhdGEuc2FuTWF4KVxuICAgICAgICAgIDogdGhpcy5zYW5EYXRhLnNhbk1heFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc2FuRGF0YS5zYW5NaW4gJiYgdGhpcy5zYW5DaGVjay5wYXNzZWQpIHtcbiAgICAgICAgcmV0dXJuICFpc05hTihOdW1iZXIodGhpcy5zYW5EYXRhLnNhbk1pbikpXG4gICAgICAgICAgPyBOdW1iZXIodGhpcy5zYW5EYXRhLnNhbk1pbilcbiAgICAgICAgICA6IHRoaXMuc2FuRGF0YS5zYW5NaW5cbiAgICAgIH1cblxuICAgICAgY29uc3QgZm9ybXVsYSA9IHRoaXMuY3JlYXR1cmU/LnNhbkxvc3ModGhpcy5zYW5DaGVjay5wYXNzZWQpIHx8IDBcbiAgICAgIGlmIChmb3JtdWxhKSB7XG4gICAgICAgIGlmICghaXNOYU4oTnVtYmVyKGZvcm11bGEpKSkgcmV0dXJuIE51bWJlcihmb3JtdWxhKVxuICAgICAgICByZXR1cm4gZm9ybXVsYVxuICAgICAgfVxuICAgICAgcmV0dXJuIDBcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBzYW5Mb3N0VG9UaGlzQ3JlYXR1cmUgKCkge1xuICAgIGlmICh0aGlzLmNyZWF0dXJlKSByZXR1cm4gdGhpcy5hY3Rvci5zYW5Mb3N0VG9DcmVhdHVyZSh0aGlzLmNyZWF0dXJlKVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBtYXhTYW5Mb3NzVG9UaGlzQ3JlYXR1cmUgKCkge1xuICAgIGlmICh0aGlzLmNyZWF0dXJlKSB7XG4gICAgICByZXR1cm4gdGhpcy5hY3Rvci5tYXhQb3NzaWJsZVNhbkxvc3NUb0NyZWF0dXJlKHRoaXMuY3JlYXR1cmUpXG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBtYXhTYW5Mb3NzICgpIHtcbiAgICBpZiAodGhpcy5jcmVhdHVyZSkgcmV0dXJuIHRoaXMubWF4U2FuTG9zc1RvVGhpc0NyZWF0dXJlXG4gICAgaWYgKHRoaXMuc2FuRGF0YS5zYW5NYXgpIHtcbiAgICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuc2FuRGF0YS5zYW5NYXgpKSkge1xuICAgICAgICByZXR1cm4gTnVtYmVyKHRoaXMuc2FuRGF0YS5zYW5NYXgpXG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IFJvbGwodGhpcy5zYW5EYXRhLnNhbk1heCkuZXZhbHVhdGUoeyBtYXhpbWl6ZTogdHJ1ZSB9KS50b3RhbFxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGNyZWF0dXJlRW5jb3VudGVyZWQgKCkge1xuICAgIGlmICh0aGlzLmNyZWF0dXJlKSByZXR1cm4gdGhpcy5hY3Rvci5jcmVhdHVyZUVuY291bnRlcmVkKHRoaXMuY3JlYXR1cmUpXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGNyZWF0dXJlU3BlY2llRW5jb3VudGVyZWQgKCkge1xuICAgIGlmICh0aGlzLmNyZWF0dXJlKSB7XG4gICAgICByZXR1cm4gdGhpcy5hY3Rvci5jcmVhdHVyZVNwZWNpZUVuY291bnRlcmVkKHRoaXMuY3JlYXR1cmUpXG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBmaXJzdEVuY291bnRlciAoKSB7XG4gICAgcmV0dXJuICF0aGlzLmFjdG9yLm15dGhvc0luc2FuaXR5RXhwZXJpZW5jZWRcbiAgfVxuXG4gIGdldCBjcmVhdHVyZUhhc1NwZWNpZSAoKSB7XG4gICAgY29uc3QgY3JlYXR1cmVTYW5EYXRhID0gQ29DN1V0aWxpdGllcy5nZXRDcmVhdHVyZVNhbkRhdGEodGhpcy5jcmVhdHVyZSlcbiAgICBpZiAoY3JlYXR1cmVTYW5EYXRhLnNwZWNpZSkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBpc0FjdG9yTG9vc2luZ1NhbiAoKSB7XG4gICAgLy8gTm8gc2FuIGxvc3MgZHVyaW5nIGJvdXQgb2YgbWFkLlxuICAgIGlmICh0aGlzLmFjdG9yLmlzSW5BQm91dE9mTWFkbmVzcykge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgLy8gVGhlIHNhbiBsb3NzIGlzIGEgMFxuICAgIGlmICh0aGlzLnNhbkxvc3NGb3JtdWxhID09PSAwKSByZXR1cm4gZmFsc2VcblxuICAgIGlmICh0aGlzLmNyZWF0dXJlKSB7XG4gICAgICAvLyBDcmVhdHVyZSBoYXMgbm8gc2FuIGxvc3MgKHdoYXQgYXJlIHdlIGRvaW5nIGhlcmUgPz8/KVxuICAgICAgaWYgKCF0aGlzLmNyZWF0dXJlLnNhbkxvc3NNYXgpIHJldHVybiBmYWxzZVxuXG4gICAgICAvLyBBY3RvciBhbHJlYWR5IGVuY291bnRlcmVkIHRoYXQgY3JlYXR1cmUgYW5kIGxvc3QgYWxyZWFkeSBtb3JlIG9yIGVxdWFsIHRoYW4gbWF4IGNyZWF0dXJlIFNBTiBsb3NzLlxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLmFjdG9yLnNhbkxvc3RUb0NyZWF0dXJlKHRoaXMuY3JlYXR1cmUpID49IHRoaXMuY3JlYXR1cmUuc2FuTG9zc01heFxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuc3RhdGUuaW1tdW5lVG9DcmVhdHVyZSA9IHRydWVcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG5cbiAgICAgIC8vIE1heCBwb3NzaWJsZSBhY3RvciBsb29zIHRvIHRoaXMgY3JlYXR1cmUgaXMgMFxuICAgICAgaWYgKHRoaXMuYWN0b3IubWF4UG9zc2libGVTYW5Mb3NzVG9DcmVhdHVyZSh0aGlzLmNyZWF0dXJlKSA9PT0gMCkge1xuICAgICAgICB0aGlzLnN0YXRlLmltbXVuZVRvQ3JlYXR1cmUgPSB0cnVlXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBnZXQgYm91dER1cmF0aW9uVGV4dCAoKSB7XG4gICAgaWYgKHRoaXMuYm91dER1cmF0aW9uKSB7XG4gICAgICBpZiAodGhpcy5ib3V0UmVhbFRpbWUpIHJldHVybiBgJHt0aGlzLmJvdXREdXJhdGlvbn0gcm91bmRzYFxuICAgICAgaWYgKHRoaXMuYm91dFN1bW1hcnkpIHJldHVybiBgJHt0aGlzLmJvdXREdXJhdGlvbn0gaG91cnNgXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgYWxyZWFkeUluc2FuZVRleHQgKCkge1xuICAgIGlmICh0aGlzLmFjdG9yLnNhbml0eS51bmRlcmx5aW5nLmluZGVmaW50aWUpIHtcbiAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWxyZWFkeVVuZGVybHlpbmdJbnNhbml0eScpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BbHJlYWR5VW5kZXJseWluZ0luc2FuaXR5JykgK1xuICAgICAgICBgICgke3RoaXMuYWN0b3Iuc2FuaXR5LnVuZGVybHlpbmcuZHVyYXRpb25UZXh0fSlgXG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgZ2V0IHlvdUdhaW5DdGh1bGh1TXl0aG9zU3RyaW5nICgpIHtcbiAgICBpZiAodGhpcy5teXRob3NHYWluKSB7XG4gICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Zb3VHYWluZWRDdGh1bGh1TXl0aG9zJywge1xuICAgICAgICB2YWx1ZTogdGhpcy5teXRob3NHYWluXG4gICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgYXN5bmMgYWR2YW5jZVN0YXRlIChzdGF0ZSkge1xuICAgIHN3aXRjaCAoc3RhdGUpIHtcbiAgICAgIGNhc2UgJ2tlZXBDcmVhdHVyZVNhbkRhdGEnOiB7XG4gICAgICAgIHRoaXMuc3RhdGUua2VlcENyZWF0dXJlU2FuRGF0YSA9IHRydWVcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2ludm9sdW50YXJ5QWN0aW9uUGVyZm9ybWVkJzoge1xuICAgICAgICB0aGlzLnN0YXRlW3N0YXRlXSA9IHRydWVcbiAgICAgICAgaWYgKCF0aGlzLmlzQWN0b3JMb29zaW5nU2FuKSB0aGlzLnN0YXRlLmZpbmlzaCA9IHRydWVcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ3Nhbkxvc3NBcHBsaWVkJzoge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcGx5U2FuTG9zcygpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdlbnRlckJvdXRPZk1hZG5lc3NSZWFsVGltZSc6IHtcbiAgICAgICAgdGhpcy5ib3V0RHVyYXRpb24gPSAoYXdhaXQgbmV3IFJvbGwoJzFEMTAnKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpLnRvdGFsXG4gICAgICAgIHRoaXMuYm91dFJlYWxUaW1lID0gdHJ1ZVxuICAgICAgICB0aGlzLmJvdXRTdW1tYXJ5ID0gZmFsc2VcbiAgICAgICAgdGhpcy5ib3V0UmVzdWx0ID0gYXdhaXQgdGhpcy5hY3Rvci5lbnRlckJvdXRPZk1hZG5lc3MoXG4gICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICB0aGlzLmJvdXREdXJhdGlvblxuICAgICAgICApXG4gICAgICAgIHRoaXMuc3RhdGUuYm91dE9mTWFkbmVzc1Jlc29sdmVkID0gdHJ1ZVxuICAgICAgICB0aGlzLnN0YXRlLmJvdXRPZk1hZG5lc3NPdmVyID0gZmFsc2VcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2VudGVyQm91dE9mTWFkbmVzc1N1bW1hcnknOiB7XG4gICAgICAgIHRoaXMuYm91dER1cmF0aW9uID0gKGF3YWl0IG5ldyBSb2xsKCcxRDEwJykucm9sbCh7IGFzeW5jOiB0cnVlIH0pKS50b3RhbFxuICAgICAgICB0aGlzLmJvdXRSZWFsVGltZSA9IGZhbHNlXG4gICAgICAgIHRoaXMuYm91dFN1bW1hcnkgPSB0cnVlXG4gICAgICAgIHRoaXMuYm91dFJlc3VsdCA9IGF3YWl0IHRoaXMuYWN0b3IuZW50ZXJCb3V0T2ZNYWRuZXNzKFxuICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgIHRoaXMuYm91dER1cmF0aW9uXG4gICAgICAgIClcbiAgICAgICAgdGhpcy5zdGF0ZS5ib3V0T2ZNYWRuZXNzUmVzb2x2ZWQgPSB0cnVlXG4gICAgICAgIGF3YWl0IHRoaXMudHJpZ2dlckluc2FuaXR5KClcbiAgICAgICAgLy8gaWYoIHRoaXMuc3RhdGUuaW5kZWZpbml0ZWx5SW5zYW5lKSB0aGlzLmFjdG9yLlxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnYm91dE9mTWFkbmVzc092ZXInOiB7XG4gICAgICAgIGF3YWl0IHRoaXMuYWN0b3IuZXhpdEJvdXRPZk1hZG5lc3MoKVxuICAgICAgICBhd2FpdCB0aGlzLnRyaWdnZXJJbnNhbml0eSgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ25vTXl0aG9zR2FpbmVkJzoge1xuICAgICAgICB0aGlzLnN0YXRlLmN0aHVsaHVNeXRob3NBd2FyZGVkID0gdHJ1ZVxuICAgICAgICB0aGlzLm15dGhvc0dhaW4gPSAwXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2N0aHVsaHVNeXRob3NBd2FyZGVkJzoge1xuICAgICAgICBsZXQgYW1vdW50R2FpbmVkID0gMVxuICAgICAgICBpZiAoIXRoaXMuYWN0b3IubXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZCkge1xuICAgICAgICAgIGFtb3VudEdhaW5lZCA9IDVcbiAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLmV4cGVyaWVuY2VGaXJzdE15dGhvc0luc2FuaXR5KClcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXRlLmN0aHVsaHVNeXRob3NBd2FyZGVkID0gdHJ1ZVxuICAgICAgICBjb25zdCBjdGh1bGh1TXl0aG9zU2tpbGwgPSB0aGlzLmFjdG9yLmN0aHVsaHVNeXRob3NTa2lsbFxuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9XG4gICAgICAgICAgY3RodWxodU15dGhvc1NraWxsLmRhdGEuZGF0YS5hZGp1c3RtZW50cy5leHBlcmllbmNlIHx8IDBcbiAgICAgICAgaWYgKGN0aHVsaHVNeXRob3NTa2lsbCkge1xuICAgICAgICAgIGF3YWl0IGN0aHVsaHVNeXRob3NTa2lsbC51cGRhdGUoe1xuICAgICAgICAgICAgJ2RhdGEuYWRqdXN0bWVudHMuZXhwZXJpZW5jZSc6IG9sZFZhbHVlICsgYW1vdW50R2FpbmVkXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm15dGhvc0dhaW4gPSBhbW91bnRHYWluZWRcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBieXBhc3NSb2xsU2FuICgpIHtcbiAgICB0aGlzLmlzQnlwYXNzZWQgPSB0cnVlXG4gICAgdGhpcy5zYW5DaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIHRoaXMuc2FuQ2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yS2V5XG4gICAgdGhpcy5zYW5DaGVjay5hdHRyaWJ1dGUgPSAnc2FuJ1xuICAgIHRoaXMuc2FuQ2hlY2suZGlmZmljdWx0eSA9XG4gICAgICB0aGlzLm9wdGlvbnMuc2FuRGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB0aGlzLnNhbkNoZWNrLmRpY2VNb2RpZmllciA9IHRoaXMub3B0aW9ucy5zYW5Nb2RpZmllciB8fCAwXG4gICAgYXdhaXQgdGhpcy5zYW5DaGVjay5fcGVyZm9ybSh7IGZvcmNlRFNOOiB0cnVlIH0pXG4gICAgdGhpcy5zdGF0ZS5zYW5Sb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5zdGF0ZS5pbnZvbHVudGFyeUFjdGlvblBlcmZvcm1lZCA9IHRoaXMuc2FuQ2hlY2sucGFzc2VkXG4gICAgdGhpcy5zdGF0ZS5zYW5Mb3NzUm9sbGVkID0gdHJ1ZVxuICAgIHRoaXMuc3RhdGUuaWdub3JlU2FuQ2hlY2sgPSB0cnVlXG4gICAgdGhpcy5zYW5Mb3NzID0gdGhpcy5zYW5Mb3NzRm9ybXVsYVxuICB9XG5cbiAgYXN5bmMgcm9sbFNhbiAoKSB7XG4gICAgdGhpcy5zYW5DaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIHRoaXMuc2FuQ2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yS2V5XG4gICAgdGhpcy5zYW5DaGVjay5hdHRyaWJ1dGUgPSAnc2FuJ1xuICAgIHRoaXMuc2FuQ2hlY2suZGlmZmljdWx0eSA9XG4gICAgICB0aGlzLm9wdGlvbnMuc2FuRGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB0aGlzLnNhbkNoZWNrLmRpY2VNb2RpZmllciA9IHRoaXMub3B0aW9ucy5zYW5Nb2RpZmllciB8fCAwXG4gICAgYXdhaXQgdGhpcy5zYW5DaGVjay5fcGVyZm9ybSh7IGZvcmNlRFNOOiB0cnVlIH0pXG4gICAgdGhpcy5zdGF0ZS5zYW5Sb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5zdGF0ZS5pbnZvbHVudGFyeUFjdGlvblBlcmZvcm1lZCA9IHRoaXMuc2FuQ2hlY2sucGFzc2VkXG4gICAgaWYgKCF0aGlzLmlzQWN0b3JMb29zaW5nU2FuKSB7XG4gICAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IHRydWVcbiAgICAgIGlmICh0aGlzLmFjdG9yLmlzSW5BQm91dE9mTWFkbmVzcykge1xuICAgICAgICB0aGlzLnN0YXRlLmltbXVuZUFscmVhZHlJbkJvdXQgPSB0cnVlXG4gICAgICAgIGlmICghdGhpcy5zYW5DaGVjay5wYXNzZWQpIHRoaXMuc3RhdGUuZmluaXNoID0gZmFsc2VcbiAgICAgIH1cbiAgICAgIHRoaXMuc3RhdGUuc2FuTG9zc1JvbGxlZCA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUuc2FuTG9zc0FwcGxpZWQgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLmludFJvbGxlZCA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHkgPSBmYWxzZVxuICAgICAgdGhpcy5zYW5Mb3NzID0gMFxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMuc2FuTG9zc0Zvcm11bGEgPT09ICdudW1iZXInKSB7XG4gICAgICB0aGlzLnN0YXRlLnNhbkxvc3NSb2xsZWQgPSB0cnVlXG4gICAgICBpZiAodGhpcy5jcmVhdHVyZSkge1xuICAgICAgICB0aGlzLnNhbkxvc3MgPSBNYXRoLm1pbihcbiAgICAgICAgICB0aGlzLnNhbkxvc3NGb3JtdWxhLFxuICAgICAgICAgIHRoaXMubWF4U2FuTG9zc1RvVGhpc0NyZWF0dXJlXG4gICAgICAgIClcbiAgICAgICAgaWYgKHRoaXMuc2FuTG9zc0Zvcm11bGEgPiB0aGlzLm1heFNhbkxvc3NUb1RoaXNDcmVhdHVyZSkge1xuICAgICAgICAgIHRoaXMuc3RhdGUubGltaXRlZExvc3NUb0NyZWF0dXJlID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgdGhpcy5zYW5Mb3NzID0gdGhpcy5zYW5Mb3NzRm9ybXVsYVxuICAgIH0gZWxzZSBpZiAodGhpcy5zYW5DaGVjay5pc0Z1bWJsZSkge1xuICAgICAgdGhpcy5zdGF0ZS5zYW5Mb3NzUm9sbGVkID0gdHJ1ZVxuICAgICAgdGhpcy5zYW5Mb3NzID0gdGhpcy5tYXhTYW5Mb3NzXG4gICAgfSBlbHNlIGlmICh0aGlzLmNyZWF0dXJlKSB7XG4gICAgICBjb25zdCBtaW4gPSBuZXcgUm9sbCh0aGlzLnNhbkxvc3NGb3JtdWxhKS5ldmFsdWF0ZSh7XG4gICAgICAgIG1pbmltaXplOiB0cnVlXG4gICAgICB9KS50b3RhbFxuICAgICAgaWYgKG1pbiA+PSB0aGlzLm1heFNhbkxvc3NUb1RoaXNDcmVhdHVyZSkge1xuICAgICAgICB0aGlzLnN0YXRlLnNhbkxvc3NSb2xsZWQgPSB0cnVlXG4gICAgICAgIHRoaXMuc2FuTG9zcyA9IHRoaXMubWF4U2FuTG9zc1RvVGhpc0NyZWF0dXJlXG4gICAgICAgIHRoaXMuc3RhdGUubGltaXRlZExvc3NUb0NyZWF0dXJlID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJvbGxTYW5Mb3NzICgpIHtcbiAgICBpZiAodGhpcy5jcmVhdHVyZSkge1xuICAgICAgLy8gdGhpcy5zYW5Mb3NzUm9sbCA9IG5ldyBSb2xsKGB7JHt0aGlzLnNhbkxvc3NGb3JtdWxhfSwke3RoaXMubWF4U2FuTG9zc1RvVGhpc0NyZWF0dXJlfX1rbGApO1xuICAgICAgdGhpcy5zYW5Mb3NzUm9sbCA9IG5ldyBSb2xsKGAke3RoaXMuc2FuTG9zc0Zvcm11bGF9YClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zYW5Mb3NzUm9sbCA9IG5ldyBSb2xsKGAke3RoaXMuc2FuTG9zc0Zvcm11bGF9YClcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnNhbkxvc3NSb2xsLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuXG4gICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2QodGhpcy5zYW5Mb3NzUm9sbClcblxuICAgIGlmICh0aGlzLmNyZWF0dXJlKSB7XG4gICAgICAvLyBXaWxsIG5ldmVyIGhhcHBlblxuICAgICAgaWYgKHRoaXMuc2FuTG9zc1JvbGwudG90YWwgPiB0aGlzLm1heFNhbkxvc3NUb1RoaXNDcmVhdHVyZSkge1xuICAgICAgICB0aGlzLnN0YXRlLmxpbWl0ZWRMb3NzVG9DcmVhdHVyZSA9IHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnNhbkxvc3MgPSB0aGlzLmNyZWF0dXJlXG4gICAgICA/IE1hdGgubWluKHRoaXMuc2FuTG9zc1JvbGwudG90YWwsIHRoaXMubWF4U2FuTG9zc1RvVGhpc0NyZWF0dXJlKVxuICAgICAgOiB0aGlzLnNhbkxvc3NSb2xsLnRvdGFsXG4gICAgdGhpcy5zdGF0ZS5zYW5Mb3NzUm9sbGVkID0gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgYXBwbHlTYW5Mb3NzICgpIHtcbiAgICBpZiAodGhpcy5jcmVhdHVyZSkge1xuICAgICAgYXdhaXQgdGhpcy5hY3Rvci5sb29zZVNhblRvQ3JlYXR1cmUodGhpcy5zYW5Mb3NzLCB0aGlzLmNyZWF0dXJlKVxuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCB0aGlzLmFjdG9yLmxvb3NlU2FuKHRoaXMuc2FuTG9zcylcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zYW5Mb3NzID4gMCkgdGhpcy5zdGF0ZS5hY3Rvckxvc3RTYW4gPSB0cnVlXG4gICAgdGhpcy5zdGF0ZS5zYW5Mb3NzQXBwbGllZCA9IHRydWVcbiAgICBpZiAodGhpcy5hY3Rvci5zYW4gPD0gMCkge1xuICAgICAgdGhpcy5zdGF0ZS5pbnRSb2xsZWQgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLmJvdXRPZk1hZG5lc3NPdmVyID0gdHJ1ZVxuXG4gICAgICB0aGlzLnN0YXRlLmluc2FuaXR5ID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5wZXJtYW5lbnRseUluc2FuZSA9IHRydWVcblxuICAgICAgdGhpcy5zdGF0ZS5maW5pc2ggPSB0cnVlXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAodGhpcy5zYW5Mb3NzIDwgNSkge1xuICAgICAgdGhpcy5zdGF0ZS5pbnRSb2xsZWQgPSB0cnVlXG4gICAgICBpZiAodGhpcy5hY3Rvci5pc0luc2FuZSkge1xuICAgICAgICB0aGlzLnN0YXRlLmluc2FuaXR5ID0gdHJ1ZVxuICAgICAgICB0aGlzLnN0YXRlLnNoYWtlbiA9IHRydWVcbiAgICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eVRhYmxlUm9sbGVkID0gZmFsc2VcbiAgICAgICAgdGhpcy5zdGF0ZS5maW5pc2ggPSBmYWxzZVxuICAgICAgICB0aGlzLnN0YXRlLmludFJvbGxlZCA9IHRydWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHkgPSBmYWxzZVxuICAgICAgICB0aGlzLnN0YXRlLnNoYWtlbiA9IHRydWVcbiAgICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eVRhYmxlUm9sbGVkID0gdHJ1ZVxuICAgICAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IHRydWVcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdGF0ZS5pbnRSb2xsZWQgPSBmYWxzZVxuICAgIH1cblxuICAgIGxldCBvbmVGaWZ0aFNhbml0eSA9IHRoaXMuYWN0b3IuZGF0YS5kYXRhLmF0dHJpYnMuc2FuLm9uZUZpZnRoU2FuaXR5XG4gICAgb25lRmlmdGhTYW5pdHkgPSBwYXJzZUludChvbmVGaWZ0aFNhbml0eS5yZXBsYWNlKC9cXEQvZywgJycpKVxuICAgIGlmICh0aGlzLmFjdG9yLmRhaWx5U2FuTG9zcyA+PSBvbmVGaWZ0aFNhbml0eSkge1xuICAgICAgLy8gdGhpcy5hY3Rvci5zYW4vNVxuICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS50ZW1wb3JhcnlJbnNhbmUgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS5pbmRlZmluaXRlbHlJbnNhbmUgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLmluc2FuaXR5VGFibGVSb2xsZWQgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS5tZW1vcnlSZXByZXNzZWQgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS5maW5pc2ggPSBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJvbGxJbnQgKCkge1xuICAgIHRoaXMuaW50Q2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICB0aGlzLmludENoZWNrLmFjdG9yID0gdGhpcy5hY3RvcktleVxuICAgIHRoaXMuaW50Q2hlY2suY2hhcmFjdGVyaXN0aWMgPSAnaW50J1xuICAgIHRoaXMuaW50Q2hlY2suZGlmZmljdWx0eSA9XG4gICAgICB0aGlzLm9wdGlvbnMuaW50RGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB0aGlzLmludENoZWNrLmRpY2VNb2RpZmllciA9IHRoaXMub3B0aW9ucy5pbnRNb2RpZmllciB8fCAwXG4gICAgYXdhaXQgdGhpcy5pbnRDaGVjay5fcGVyZm9ybSh7IGZvcmNlRFNOOiB0cnVlIH0pXG4gICAgdGhpcy5zdGF0ZS5pbnRSb2xsZWQgPSB0cnVlXG4gICAgaWYgKHRoaXMuaW50Q2hlY2sucGFzc2VkIHx8IHRoaXMuc3RhdGUuYWxyZWFkeUluc2FuZSkge1xuICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUudGVtcG9yYXJ5SW5zYW5lID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5pbmRlZmluaXRlbHlJbnNhbmUgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS5tZW1vcnlSZXByZXNzZWQgPSBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0YXRlLmluc2FuaXR5ID0gZmFsc2VcbiAgICAgIHRoaXMuc3RhdGUudGVtcG9yYXJ5SW5zYW5lID0gZmFsc2VcbiAgICAgIHRoaXMuc3RhdGUuaW5kZWZpbml0ZWx5SW5zYW5lID0gZmFsc2VcbiAgICAgIHRoaXMuc3RhdGUubWVtb3J5UmVwcmVzc2VkID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5maW5pc2ggPSB0cnVlXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdHJpZ2dlckluc2FuaXR5ICgpIHtcbiAgICB0aGlzLnN0YXRlLmJvdXRPZk1hZG5lc3NPdmVyID0gdHJ1ZVxuICAgIGlmICh0aGlzLnN0YXRlLmluZGVmaW5pdGVseUluc2FuZSkgYXdhaXQgdGhpcy5hY3Rvci5lbnRlckluc2FuaXR5KHRydWUpXG4gICAgaWYgKHRoaXMuc3RhdGUudGVtcG9yYXJ5SW5zYW5lKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuYWN0b3Iuc2FuaXR5LnVuZGVybHlpbmcuYWN0aXZlICYmXG4gICAgICAgIHRoaXMuYWN0b3Iuc2FuaXR5LnVuZGVybHlpbmcuaW5kZWZpbnRpZVxuICAgICAgKSB7XG4gICAgICAgIC8vIEFscmVhZHkgaW5kZWZpbml0ZSBpbnNhbml0eVxuICAgICAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IHRydWVcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICB0aGlzLmluc2FuaXR5RHVyYXRpb25Sb2xsID0gYXdhaXQgbmV3IFJvbGwoJzFEMTAnKS5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgIHRoaXMuaW5zYW5pdHlEdXJhdGlvbiA9IHRoaXMuaW5zYW5pdHlEdXJhdGlvblJvbGwudG90YWxcbiAgICAgIGlmICh0aGlzLmFjdG9yLnNhbml0eS51bmRlcmx5aW5nLmR1cmF0aW9uKSB7XG4gICAgICAgIHRoaXMuaW5zYW5pdHlEdXJhdGlvbiArPSB0aGlzLmFjdG9yLnNhbml0eS51bmRlcmx5aW5nLmR1cmF0aW9uXG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLmFjdG9yLmVudGVySW5zYW5pdHkoZmFsc2UsIHRoaXMuaW5zYW5pdHlEdXJhdGlvbilcbiAgICB9XG4gICAgdGhpcy5zdGF0ZS5maW5pc2ggPSB0cnVlXG4gIH1cblxuICBhc3luYyByZXNldENyZWF0dXJlU2FuRGF0YSAoKSB7XG4gICAgYXdhaXQgdGhpcy5hY3Rvci5yZXNldENyZWF0dXJlKHRoaXMuY3JlYXR1cmUpXG4gICAgaWYgKCF0aGlzLmNyZWF0dXJlRW5jb3VudGVyZWQgJiYgIXRoaXMuY3JlYXR1cmVTcGVjaWVFbmNvdW50ZXJlZCkge1xuICAgICAgdGhpcy5zdGF0ZS5rZWVwQ3JlYXR1cmVTYW5EYXRhID0gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlc2V0U3BlY2llU2FuRGF0YSAoKSB7XG4gICAgYXdhaXQgdGhpcy5hY3Rvci5yZXNldFNwZWNpZSh0aGlzLmNyZWF0dXJlKVxuICAgIGlmICghdGhpcy5jcmVhdHVyZUVuY291bnRlcmVkICYmICF0aGlzLmNyZWF0dXJlU3BlY2llRW5jb3VudGVyZWQpIHtcbiAgICAgIHRoaXMuc3RhdGUua2VlcENyZWF0dXJlU2FuRGF0YSA9IHRydWVcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgLy8gQXR0YWNoZSB0aGUgc2FuQ2hlY2sgcmVzdWx0IHRvIHRoZSBtZXNzYWdlLlxuICAgIGlmICh0aGlzLnN0YXRlLnNhblJvbGxlZCkge1xuICAgICAgdGhpcy5fX2lubGluZVNhbkNoZWNrID0gdGhpcy5zYW5DaGVjay5pbmxpbmVDaGVjay5vdXRlckhUTUxcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zYW5Mb3NzUm9sbCkge1xuICAgICAgY29uc3QgYSA9IGNyZWF0ZUlubGluZVJvbGwodGhpcy5zYW5Mb3NzUm9sbClcbiAgICAgIHRoaXMuX19pbmxpbmVTYW5Mb3NzUm9sbCA9IGEub3V0ZXJIVE1MXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdGUuaW50Um9sbGVkICYmIHRoaXMuaW50Q2hlY2spIHtcbiAgICAgIHRoaXMuX19pbmxpbmVJbnRDaGVjayA9IHRoaXMuaW50Q2hlY2suaW5saW5lQ2hlY2sub3V0ZXJIVE1MXG4gICAgfVxuXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFNhbkNoZWNrQ2FyZC50ZW1wbGF0ZSwgdGhpcylcbiAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkLnBhcnNlSFRNTChodG1sKVswXVxuXG4gICAgLy8gQXR0YWNoIHRoZSBzYW5DaGVja0NhcmQgb2JqZWN0IHRvIHRoZSBtZXNzYWdlLlxuICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZShKU09OLnN0cmluZ2lmeSh0aGlzLCByZXBsYWNlcikpXG5cbiAgICAvLyBVcGRhdGUgdGhlIG1lc3NhZ2UuXG4gICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IGNoYXRNZXNzYWdlLnVwZGF0ZSh7XG4gICAgICBjb250ZW50OiBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MXG4gICAgfSlcbiAgICBhd2FpdCB1aS5jaGF0LnVwZGF0ZU1lc3NhZ2UobXNnLCBmYWxzZSlcbiAgICByZXR1cm4gbXNnXG4gIH1cblxuICBzdGF0aWMgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jYXJkcy9zYW4tY2hlY2suaHRtbCdcbiAgfVxuXG4gIHN0YXRpYyBjaGVja1RhcmdldHMgKGNyZWF0dXJlS2V5LCBmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgY29uc3QgdGFyZ2V0cyA9IFsuLi5nYW1lLnVzZXIudGFyZ2V0c11cbiAgICBpZiAodGFyZ2V0cy5sZW5ndGgpIHtcbiAgICAgIGZvciAoY29uc3QgdCBvZiB0YXJnZXRzKSB7XG4gICAgICAgIC8vIFRPRE8gOiA/IE1ha2UgYXN5bmMgY2FsbCB0byBjcmVhdGUgP1xuICAgICAgICBpZiAodC5hY3Rvci5pc1Rva2VuKSB7XG4gICAgICAgICAgU2FuQ2hlY2tDYXJkLmNyZWF0ZShcbiAgICAgICAgICAgIHQuYWN0b3IudG9rZW5LZXksXG4gICAgICAgICAgICB7IGNyZWF0dXJlS2V5OiBjcmVhdHVyZUtleSB9LFxuICAgICAgICAgICAgeyBmYXN0Rm9yd2FyZDogZmFzdEZvcndhcmQgfVxuICAgICAgICAgIClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBTYW5DaGVja0NhcmQuY3JlYXRlKFxuICAgICAgICAgICAgdC5hY3Rvci5pZCxcbiAgICAgICAgICAgIHsgY3JlYXR1cmVLZXk6IGNyZWF0dXJlS2V5IH0sXG4gICAgICAgICAgICB7IGZhc3RGb3J3YXJkOiBmYXN0Rm9yd2FyZCB9XG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoLi4uYXJncykge1xuICAgIGNvbnN0IGNoYXRDYXJkID0gbmV3IFNhbkNoZWNrQ2FyZCguLi5hcmdzKVxuXG4gICAgaWYgKGNoYXRDYXJkLmFjdG9yLmlzSW5zYW5lKSB7XG4gICAgICBjaGF0Q2FyZC5zdGF0ZS5hbHJlYWR5SW5zYW5lID0gdHJ1ZVxuICAgIH1cblxuICAgIGlmIChjaGF0Q2FyZC5hY3Rvci5zYW4gPD0gMCkge1xuICAgICAgY2hhdENhcmQuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxuICAgICAgY2hhdENhcmQuc3RhdGUuYm91dE9mTWFkbmVzc092ZXIgPSB0cnVlXG5cbiAgICAgIGNoYXRDYXJkLnN0YXRlLmluc2FuaXR5ID0gdHJ1ZVxuICAgICAgY2hhdENhcmQuc3RhdGUucGVybWFuZW50bHlJbnNhbmUgPSB0cnVlXG5cbiAgICAgIGNoYXRDYXJkLnN0YXRlLmZpbmlzaCA9IHRydWVcbiAgICB9XG5cbiAgICBpZiAoIWNoYXRDYXJkLmNyZWF0dXJlRW5jb3VudGVyZWQgJiYgIWNoYXRDYXJkLmNyZWF0dXJlU3BlY2llRW5jb3VudGVyZWQpIHtcbiAgICAgIGNoYXRDYXJkLnN0YXRlLmtlZXBDcmVhdHVyZVNhbkRhdGEgPSB0cnVlXG4gICAgfVxuXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFNhbkNoZWNrQ2FyZC50ZW1wbGF0ZSwgY2hhdENhcmQpXG4gICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gJC5wYXJzZUhUTUwoaHRtbClbMF1cblxuICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZShKU09OLnN0cmluZ2lmeShjaGF0Q2FyZCwgcmVwbGFjZXIpKVxuICAgIGF3YWl0IGNoYXRDYXJkLnNheShodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MKVxuICB9XG5cbiAgc3RhdGljIGdldEZyb21NZXNzYWdlSWQgKG1lc3NhZ2VJZCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgY29uc3QgaHRtbE1lc3NhZ2UgPSAkLnBhcnNlSFRNTChtZXNzYWdlLmRhdGEuY29udGVudClbMF1cblxuICAgIGNvbnN0IGh0bWxDYXJkID0gaHRtbE1lc3NhZ2UucXVlcnlTZWxlY3RvcignLmNoYXQtY2FyZCcpXG5cbiAgICByZXR1cm4gU2FuQ2hlY2tDYXJkLmdldEZyb21DYXJkKGh0bWxDYXJkKVxuICB9XG5cbiAgc3RhdGljIGdldEZyb21DYXJkIChjYXJkKSB7XG4gICAgY29uc3Qgc2FuQ2hlY2tDYXJkRGF0YSA9IEpTT04ucGFyc2UodW5lc2NhcGUoY2FyZC5kYXRhc2V0Lm9iamVjdCkpXG5cbiAgICBjb25zdCBzYW5DaGVja0NhcmQgPSBuZXcgU2FuQ2hlY2tDYXJkKClcbiAgICBPYmplY3QuYXNzaWduKHNhbkNoZWNrQ2FyZCwgc2FuQ2hlY2tDYXJkRGF0YSlcbiAgICBpZiAoIXNhbkNoZWNrQ2FyZC5tZXNzYWdlSWQpIHtcbiAgICAgIHNhbkNoZWNrQ2FyZC5tZXNzYWdlSWQgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykuZGF0YXNldC5tZXNzYWdlSWRcbiAgICB9XG5cbiAgICBpZiAoc2FuQ2hlY2tDYXJkLnNhbkNoZWNrPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ09iamVjdCcpIHtcbiAgICAgIHNhbkNoZWNrQ2FyZC5zYW5DaGVjayA9IE9iamVjdC5hc3NpZ24oXG4gICAgICAgIG5ldyBDb0M3Q2hlY2soKSxcbiAgICAgICAgc2FuQ2hlY2tDYXJkLnNhbkNoZWNrXG4gICAgICApXG4gICAgfVxuXG4gICAgaWYgKHNhbkNoZWNrQ2FyZC5pbnRDaGVjaz8uY29uc3RydWN0b3I/Lm5hbWUgPT09ICdPYmplY3QnKSB7XG4gICAgICBzYW5DaGVja0NhcmQuaW50Q2hlY2sgPSBPYmplY3QuYXNzaWduKFxuICAgICAgICBuZXcgQ29DN0NoZWNrKCksXG4gICAgICAgIHNhbkNoZWNrQ2FyZC5pbnRDaGVja1xuICAgICAgKVxuICAgIH1cblxuICAgIGlmIChzYW5DaGVja0NhcmQuc2FuTG9zc1JvbGw/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnT2JqZWN0Jykge1xuICAgICAgc2FuQ2hlY2tDYXJkLnNhbkxvc3NSb2xsID0gUm9sbC5mcm9tRGF0YShzYW5DaGVja0NhcmQuc2FuTG9zc1JvbGwpXG4gICAgfVxuXG4gICAgLy8gc2FuQ2hlY2tDYXJkLnNhbkNoZWNrPy50b01lc3NhZ2UoKTtcblxuICAgIHJldHVybiBzYW5DaGVja0NhcmRcbiAgfVxufVxuIiwiLy8gTmFtZXNwYWNlIENPQzcgQ29uZmlndXJhdGlvbiBWYWx1ZXNcbmV4cG9ydCBjb25zdCBDT0M3ID0ge31cblxuLy8gQ3VzdG9tIGNoYXRNZXNzYWdlXG4vLyBDT05GSUcuQ2hhdE1lc3NhZ2UudGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NoYXQtbWVzc2FnZS5odG1sJztcblxuLyoqXG4gKiBUaGUgc2V0IG9mIEVyYXMgdXNlZCB3aXRoaW4gdGhlIHN5c3RlbVxuICogQHR5cGUge09iamVjdH1cbiAqL1xuQ09DNy5lcmFzID0ge1xuICBudmN0OiAnQ29DNy5FcmFOdmN0JyxcbiAgZHJrYTogJ0NvQzcuRXJhRHJrYScsXG4gIGRkdHM6ICdDb0M3LkVyYURkdHMnLFxuICBnbGl0OiAnQ29DNy5FcmFHbGl0JyxcbiAgMTkyMDogJ0NvQzcuRXJhMTkyMCcsXG4gIHB1bHA6ICdDb0M3LkVyYVB1bHAnLFxuICBtZHJuOiAnQ29DNy5FcmFNZHJuJ1xufVxuXG5DT0M3LmNoYXJhY3RlcmlzdGljcyA9IHtcbiAgc3RyOiAnQ29DNy5DaGFyYWNTdHInLFxuICBjb246ICdDb0M3LkNoYXJhY0NvbicsXG4gIHNpejogJ0NvQzcuQ2hhcmFjU2l6JyxcbiAgZGV4OiAnQ29DNy5DaGFyYWNEZXgnLFxuICBhcHA6ICdDb0M3LkNoYXJhY0FwcCcsXG4gIGludDogJ0NvQzcuQ2hhcmFjSW50JyxcbiAgcG93OiAnQ29DNy5DaGFyYWNQb3cnLFxuICBlZHU6ICdDb0M3LkNoYXJhY0VkdSdcbn1cblxuLyoqXG4gKiBUaGUgc2V0IG9mIFNraWxscyBhdHRyaWJ1dGVzIHVzZWQgd2l0aGluIHRoZSBzeXN0ZW1cbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cbkNPQzcuc2tpbGxQcm9wZXJ0aWVzID0ge1xuICBub2FkanVzdG1lbnRzOiAnQ29DNy5Ta2lsbE5vQWRqdXN0bWVudHMnLFxuICBub3hwZ2FpbjogJ0NvQzcuU2tpbGxOb1hwR2FpbicsXG4gIHNwZWNpYWw6ICdDb0M3LlNraWxsU3BlY2lhbCcsXG4gIHJhcml0eTogJ0NvQzcuU2tpbGxSYXJpdHknLFxuICBwdXNoOiAnQ29DNy5Ta2lsbFB1c2gnLFxuICBjb21iYXQ6ICdDb0M3LlNraWxsQ29tYmF0JyxcbiAgZmlnaHRpbmc6ICdDb0M3LlNraWxsRmlnaHRpbmcnLFxuICBmaXJlYXJtOiAnQ29DNy5Ta2lsbEZpcmVhcm0nXG59XG5cbkNPQzcud2VhcG9uUHJvcGVydGllcyA9IHtcbiAgbWVsZWU6ICdDb0M3LldlYXBvbi5Qcm9wZXJ0eS5NZWxlZScsXG4gIHJuZ2Q6ICdDb0M3LldlYXBvblJuZ2QnLFxuICBtbnZyOiAnQ29DNy5XZWFwb25Qcm9wZXJ5TWFuZXV2ZXInLFxuICB0aHJvd246ICdDb0M3LldlYXBvbi5Qcm9wZXJ0eS5UaHJvd24nLFxuICBzaG90Z3VuOiAnQ29DNy5XZWFwb24uUHJvcGVydHkuU2hvdGd1bicsXG4gIGRicmw6ICdDb0M3LldlYXBvbkRicmwnLFxuICBpbXBsOiAnQ29DNy5XZWFwb25JbXBsJyxcbiAgYnJzdDogJ0NvQzcuV2VhcG9uQnJzdCcsXG4gIGF1dG86ICdDb0M3LldlYXBvbkF1dG8nLFxuICBhaGRiOiAnQ29DNy5XZWFwb25BaGRiJyxcbiAgYWRkYjogJ0NvQzcuV2VhcG9uQWRkYicsXG4gIHNsbnQ6ICdDb0M3LldlYXBvblNsbnQnLFxuICBzcGNsOiAnQ29DNy5XZWFwb25TcGNsJyxcbiAgbW9udDogJ0NvQzcuV2VhcG9uTW9udCcsXG4gIGJsc3Q6ICdDb0M3LldlYXBvbkJsc3QnLFxuICBzdHVuOiAnQ29DNy5XZWFwb25TdHVuJyxcbiAgcmFyZTogJ0NvQzcuV2VhcG9uUmFyZScsXG4gIGJ1cm46ICdDb0M3LldlYXBvbi5Qcm9wZXJ0eS5CdXJuJ1xufVxuXG5DT0M3LnNwZWxsUHJvcGVydGllcyA9IHtcbiAgY2FsbDogJ0NvQzcuQ2FsbFNwZWxsJyxcbiAgZGlzbWlzczogJ0NvQzcuRGlzbWlzc1NwZWxsJyxcbiAgY29udGFjdDogJ0NvQzcuQ29udGFjdFNwZWxsJyxcbiAgc3VtbW9uOiAnQ29DNy5TdW1tb25TcGVsbCcsXG4gIGJpbmQ6ICdDb0M3LkJpbmRTcGVsbCcsXG4gIGVuY2hhbnRtZW50OiAnQ29DNy5FbmNoYW50bWVudFNwZWxsJyxcbiAgZ2F0ZTogJ0NvQzcuR2F0ZVNwZWxsJyxcbiAgY29tYmF0OiAnQ29DNy5Db21iYXRTcGVsbCdcbn1cblxuQ09DNy5ib29rVHlwZSA9IHtcbiAgbXl0aG9zOiAnQ29DNy5NeXRob3NCb29rJyxcbiAgb2NjdWx0OiAnQ29DNy5PY2N1bHRCb29rJyxcbiAgb3RoZXI6ICdDb0M3Lk90aGVyJ1xufVxuXG5DT0M3LnRhbGVudFR5cGUgPSB7XG4gIHBoeXNpY2FsOiAnQ29DNy5QaHlzaWNhbFRhbGVudCcsXG4gIG1lbnRhbDogJ0NvQzcuTWVudGFsVGFsZW50JyxcbiAgY29tYmF0OiAnQ29DNy5Db21iYXRUYWxlbnQnLFxuICBtaXNjZWxsYW5lb3VzOiAnQ29DNy5NaXNjZWxsYW5lb3VzVGFsZW50JyxcbiAgYmFzaWM6ICdDb0M3LkJhc2ljVGFsZW50JyxcbiAgaW5zYW5lOiAnQ29DNy5JbnNhbmVUYWxlbnQnLFxuICBvdGhlcjogJ0NvQzcuT3RoZXJUYWxlbnQnXG59XG5cbkNPQzcuc3RhdHVzVHlwZSA9IHtcbiAgbWFuaWE6ICdDb0M3Lk1hbmlhJyxcbiAgcGhvYmlhOiAnQ29DNy5QaG9iaWEnXG59XG5cbkNPQzcub2NjdXBhdGlvblByb3BlcnRpZXMgPSB7XG4gIGNsYXNzaWM6ICdDb0M3LkNsYXNzaWMnLFxuICBsb3ZlY3JhZnRpYW46ICdDb0M3LkxvdmVjcmFmdGlhbicsXG4gIG1vZGVybjogJ0NvQzcuTW9kZXJuJyxcbiAgcHVscDogJ0NvQzcuUHVscCdcbn1cblxuQ09DNy5mb3JtdWxhID0ge31cblxuQ09DNy5mb3JtdWxhLmFjdG9yID0ge1xuICAnQFNUUic6ICd0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3Muc3RyLnZhbHVlJyxcbiAgJ0BDT04nOiAndGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmNvbi52YWx1ZScsXG4gICdAU0laJzogJ3RoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUnLFxuICAnQERFWCc6ICd0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlJyxcbiAgJ0BBUFAnOiAndGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmFwcC52YWx1ZScsXG4gICdASU5UJzogJ3RoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5pbnQudmFsdWUnLFxuICAnQFBPVyc6ICd0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlJyxcbiAgJ0BFRFUnOiAndGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmVkdS52YWx1ZSdcbn1cblxuQ09DNy5mb3JtdWxhLmFjdG9yc2hlZXQgPSB7XG4gICdAU1RSJzogJ3RoaXMuYWN0b3IuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5zdHIudmFsdWUnLFxuICAnQENPTic6ICd0aGlzLmFjdG9yLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MuY29uLnZhbHVlJyxcbiAgJ0BTSVonOiAndGhpcy5hY3Rvci5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZScsXG4gICdAREVYJzogJ3RoaXMuYWN0b3IuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUnLFxuICAnQEFQUCc6ICd0aGlzLmFjdG9yLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MuYXBwLnZhbHVlJyxcbiAgJ0BJTlQnOiAndGhpcy5hY3Rvci5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmludC52YWx1ZScsXG4gICdAUE9XJzogJ3RoaXMuYWN0b3IuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWUnLFxuICAnQEVEVSc6ICd0aGlzLmFjdG9yLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MuZWR1LnZhbHVlJ1xufVxuXG5DT0M3LnN0YXR1cyA9IHtcbiAgdGVtcG9JbnNhbmU6ICd0ZW1wb0luc2FuZScsXG4gIGluZGVmSW5zYW5lOiAnaW5kZWZJbnNhbmUnLFxuICB1bmNvbnNjaW91czogJ3VuY29uc2Npb3VzJyxcbiAgY3JpdGljYWxXb3VuZHM6ICdjcml0aWNhbFdvdW5kcycsXG4gIGR5aW5nOiAnZHlpbmcnLFxuICBwcm9uZTogJ3Byb25lJyxcbiAgZGVhZDogJ2RlYWQnXG59XG5cbkNPQzcubmV3Qm9va05hbWUgPSAnQ29DNy5OZXdCb29rTmFtZSdcbkNPQzcubmV3U2tpbGxOYW1lID0gJ0NvQzcuTmV3U2tpbGxOYW1lJ1xuQ09DNy5uZXdTcGVsbE5hbWUgPSAnQ29DNy5OZXdTcGVsbE5hbWUnXG5DT0M3Lm5ld0l0ZW1OYW1lID0gJ0NvQzcuTmV3SXRlbU5hbWUnXG5DT0M3Lm5ld1dlYXBvbk5hbWUgPSAnQ29DNy5OZXdXZWFwb25OYW1lJ1xuXG5DT0M3LmNyZWF0dXJlRmlnaHRpbmdTa2lsbCA9ICdDb0M3LmNyZWF0dXJlRmlnaHRpbmdTa2lsbCdcblxuQ09DNy5kb2RnZVNraWxsTmFtZSA9ICdDb0M3LkRvZGdlU2tpbGxOYW1lJ1xuQ09DNy5jcmVkaXRSYXRpbmdTa2lsbE5hbWUgPSAnQ29DNy5DcmVkaXRSYXRpbmdTa2lsbE5hbWUnXG5DT0M3LkN0aHVsaHVNeXRob3NOYW1lID0gJ0NvQzcuQ3RodWxodU15dGhvc05hbWUnXG5DT0M3LmZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lID0gJ0NvQzcuRmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUnXG5DT0M3LmZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUgPSAnQ29DNy5GaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lJ1xuXG5DT0M3LmNvbWJhdENhcmRzID0ge1xuICBmaWdodEJhY2s6ICdDb0M3LkZpZ2h0QmFjaycsXG4gIGRvZGdlOiAnQ29DNy5Eb2RnZScsXG4gIG1hbmV1dmVyOiAnQ29DNy5NYW5ldXZlcicsXG4gIG5vUmVzcG9uc2U6ICdDb0M3Lk5vUmVzcG9uc2UnXG59XG5cbi8vIENPQzcuZG9kZ2UgPSB7XG4vLyAgJ25hbWUnOiBDT0M3LmRvZGdlU2tpbGxOYW1lLFxuLy8gICd0eXBlJzogJ3NraWxsJyxcbi8vICAnYmFzZSc6ICcxLzIqQERFWCcsXG4vLyAgJ3ZhbHVlJzogLTEsXG4vLyAgJ2RhdGEnOiB7XG4vLyAgICAnc3BlY2lhbGl6YXRpb24nOiBDT0M3LmZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lIH0sXG4vLyAgJ3Byb3BlcnRpZXMnOiB7XG4vLyAgICAnc3BlY2lhbCc6IHRydWUsXG4vLyAgICAncmFyaXR5JzogZmFsc2UsXG4vLyAgICAncHVzaCc6IGZhbHNlLFxuLy8gICAgJ2NvbWJhdCc6IHRydWUsXG4vLyAgICAnZmlnaHRpbmcnOiB0cnVlLFxuLy8gICAgJ2ZpcmVhcm0nOiBmYWxzZVxuLy8gIH0sXG4vLyAgJ2ZsYWdzJzogeyAnd3BuZXhjbCc6IHRydWV9XG4vLyB9O1xuXG4vLyBDT0M3LlBjU2tpbGxzID0ge1xuLy8gICdkb2RnZScgOiBDT0M3LmRvZGdlLFxuLy8gICd0aHJvdycgOiB7fVxuLy8gfTtcbiIsIi8qIGdsb2JhbCAkLCBDaGF0TWVzc2FnZSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIHVpICovXG5cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgQ29DN1JvbGwgfSBmcm9tICcuL2hlbHBlci5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDb25DaGVjayB7XG4gIGNvbnN0cnVjdG9yIChhY3RvcklkID0gbnVsbCwgZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcikge1xuICAgIHRoaXMuY2hlY2sgPSBuZXcgQ29DN0NoZWNrKGFjdG9ySWQpXG4gICAgdGhpcy5jaGVjay5jaGFyYWN0ZXJpc3RpYyA9ICdjb24nXG4gICAgdGhpcy5jaGVjay5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgIHRoaXMuY2hlY2suZGVueVB1c2ggPSB0cnVlXG4gICAgdGhpcy5hY3RvcklkID0gYWN0b3JJZFxuICB9XG5cbiAgZ2V0IGlzQmxpbmQgKCkge1xuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX2lzQmxpbmQpIHtcbiAgICAgIHRoaXMuX2lzQmxpbmQgPSB0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJ1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5faXNCbGluZFxuICB9XG5cbiAgc2V0IGlzQmxpbmQgKHgpIHtcbiAgICB0aGlzLl9pc0JsaW5kID0geFxuICB9XG5cbiAgZ2V0IHJvbGxNb2RlICgpIHtcbiAgICBpZiAoIXRoaXMuX3JvbGxNb2RlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICByZXR1cm4gdGhpcy5fcm9sbE1vZGVcbiAgfVxuXG4gIHNldCByb2xsTW9kZSAoeCkge1xuICAgIGlmICh4ID09PSBmYWxzZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgdGhpcy5fcm9sbE1vZGUgPSB4XG4gIH1cblxuICBnZXQgYWN0b3IgKCkge1xuICAgIGlmICh0aGlzLmFjdG9ySWQpIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9ySWQpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBzZXQgYWN0b3JJZCAoeCkge1xuICAgIHRoaXMuX2FjdG9ySWQgPSB4XG4gICAgdGhpcy5jaGVjay5hY3RvciA9IHhcbiAgfVxuXG4gIGdldCBhY3RvcklkICgpIHtcbiAgICBpZiAodGhpcy5fYWN0b3JJZCkgcmV0dXJuIHRoaXMuX2FjdG9ySWRcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHRva2VuS2V5ICgpIHtcbiAgICBpZiAodGhpcy5hY3Rvci5pc1Rva2VuKSByZXR1cm4gdGhpcy5hY3Rvci50b2tlbktleVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgaXNTdWNjZXNzICgpIHtcbiAgICBpZiAodGhpcy5jaGVjaykgcmV0dXJuIHRoaXMuY2hlY2suaXNTdWNjZXNzXG4gICAgZWxzZSByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBpc1JvbGxlZCAoKSB7XG4gICAgaWYgKHRoaXMuY2hlY2sgJiYgdGhpcy5jaGVjay5kaWNlcyAmJiB0aGlzLmNoZWNrLmRpY2VzLnRvdGFsKSByZXR1cm4gdHJ1ZVxuICAgIGVsc2UgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbUNhcmQgKGNhcmQpIHtcbiAgICBjb25zdCBjb25DaGVjayA9IG5ldyBDb0M3Q29uQ2hlY2soKVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQoY29uQ2hlY2ssIGNhcmQpXG4gICAgY29uc3QgaHRtbENoZWNrID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcucm9sbC1yZXN1bHQnKVxuICAgIENvQzdSb2xsLmdldEZyb21FbGVtZW50KGh0bWxDaGVjaywgY29uQ2hlY2suY2hlY2spXG4gICAgY29uQ2hlY2subWVzc2FnZUlkID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgcmV0dXJuIGNvbkNoZWNrXG4gIH1cblxuICBhc3luYyBnZXRDaGVja0VsZW1lbnQgKCkge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xsLXJlc3VsdC5odG1sJ1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGhpcy5jaGVjaylcbiAgICBjb25zdCBodG1sRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG4gICAgaWYgKGh0bWxFbGVtZW50KSB7XG4gICAgICBodG1sRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdjaGF0LWNhcmQnLCAnaXRlbS1jYXJkJywgJ3JvbGwtY2FyZCcpXG4gICAgICByZXR1cm4gaHRtbEVsZW1lbnRcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIHRvTWVzc2FnZSAoZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jb24tY2hlY2suaHRtbCdcblxuICAgIGlmIChmYXN0Rm9yd2FyZCkge1xuICAgICAgYXdhaXQgdGhpcy5yb2xsQ29uKClcbiAgICB9XG5cbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMpXG4gICAgY29uc3QgaHRtbEVsZW1lbnQgPSAkLnBhcnNlSFRNTChodG1sKVswXVxuXG4gICAgaWYgKGZhc3RGb3J3YXJkKSB7XG4gICAgICBjb25zdCBjaGVjayA9IGh0bWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yb2xsLXJlc3VsdCcpXG4gICAgICBjaGVjay5yZXBsYWNlV2l0aChhd2FpdCB0aGlzLmdldENoZWNrRWxlbWVudCgpKVxuICAgIH1cblxuICAgIGNvbnN0IHNwZWFrZXJEYXRhID0ge31cbiAgICBsZXQgc3BlYWtlclxuICAgIGlmICh0aGlzLmFjdG9yKSB7XG4gICAgICBpZiAodGhpcy50b2tlbikgc3BlYWtlckRhdGEudG9rZW4gPSB0aGlzLnRva2VuXG4gICAgICBlbHNlIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpcy5hY3RvclxuICAgICAgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoc3BlYWtlckRhdGEpXG4gICAgfSBlbHNlIHtcbiAgICAgIHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyID0gdGhpcy5hY3Rvci51c2VyID8gdGhpcy5hY3Rvci51c2VyIDogZ2FtZS51c2VyXG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IHVzZXIuaWQsXG4gICAgICBzcGVha2VyOiBzcGVha2VyLFxuICAgICAgZmxhdm9yOiB0aGlzLmZsYXZvcixcbiAgICAgIGNvbnRlbnQ6IGh0bWxFbGVtZW50Lm91dGVySFRNTFxuICAgIH1cblxuICAgIGlmIChcbiAgICAgIFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJykpXG4gICAgKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJykgLy8gQ2hhbmdlIGZvciB1c2VyXG4gICAgfVxuICAgIGlmICh0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJykgY2hhdERhdGEuYmxpbmQgPSB0cnVlXG5cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpLnRoZW4obXNnID0+IHtcbiAgICAgIHJldHVybiBtc2dcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgcm9sbENvbiAoKSB7XG4gICAgdGhpcy5jaGVjay5oaWRlRGljZVJlc3VsdCA9IHRydWVcbiAgICBhd2FpdCB0aGlzLmNoZWNrLl9wZXJmb3JtKClcbiAgICBpZiAoIXRoaXMuaXNTdWNjZXNzICYmICF0aGlzLmlzQmxpbmQpIHtcbiAgICAgIGlmICh0aGlzLnN0YXlBbGl2ZSkgYXdhaXQgdGhpcy5hY3Rvci5mYWxsRGVhZCgpXG4gICAgICBlbHNlIGF3YWl0IHRoaXMuYWN0b3IuZmFsbFVuY29uc2Npb3VzKClcbiAgICB9XG4gICAgdGhpcy5hcHBsaWVkID0gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKCkge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jb24tY2hlY2suaHRtbCdcblxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGhpcylcbiAgICBjb25zdCBodG1sRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG5cbiAgICBjb25zdCBjaGVjayA9IGh0bWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yb2xsLXJlc3VsdCcpXG4gICAgY2hlY2sucmVwbGFjZVdpdGgoYXdhaXQgdGhpcy5nZXRDaGVja0VsZW1lbnQoKSlcblxuICAgIGlmICghdGhpcy5pc0JsaW5kICYmIHRoaXMuaXNSb2xsZWQgJiYgIXRoaXMuaXNTdWNjZXNzKSB7XG4gICAgICBpZiAodGhpcy5zdGF5QWxpdmUpIGF3YWl0IHRoaXMuYWN0b3IuZmFsbERlYWQoKVxuICAgICAgZWxzZSBhd2FpdCB0aGlzLmFjdG9yLmZhbGxVbmNvbnNjaW91cygpXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLm1lc3NhZ2VJZCkgcmV0dXJuXG4gICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IGNoYXRNZXNzYWdlLnVwZGF0ZSh7IGNvbnRlbnQ6IGh0bWxFbGVtZW50Lm91dGVySFRNTCB9KVxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgIHJldHVybiBtc2dcbiAgfVxufVxuIiwiLyogZ2xvYmFsIERpYWxvZywgcmVuZGVyVGVtcGxhdGUgKi9cblxuZXhwb3J0IGNsYXNzIFNraWxsU2VsZWN0RGlhbG9nIGV4dGVuZHMgRGlhbG9nIHtcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5zZWxlY3Qtc2tpbGwnKVxuICAgICAgLmNsaWNrKGFzeW5jIGV2ZW50ID0+IHRoaXMuX29uU2VsZWN0U2tpbGxDbGlja2VkKGV2ZW50KSlcbiAgfVxuXG4gIGFzeW5jIF9vblNlbGVjdFNraWxsQ2xpY2tlZCAoZXZlbnQpIHtcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIC8vIGNvbnN0IGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KCB0aGlzLmRhdGEuZGF0YS5hY3RvcklkKTtcbiAgICAvLyBhd2FpdCBhY3Rvci5hZGRTa2lsbCggdGhpcy5kYXRhLmRhdGEuc2tpbGxzW051bWJlcihsaS5kYXRhc2V0LmluZGV4KV0sIHRoaXMuZGF0YS5kYXRhLnR5cGUpO1xuICAgIHRoaXMuZGF0YS5kYXRhLnNraWxsc1tOdW1iZXIobGkuZGF0YXNldC5pbmRleCldLnNlbGVjdGVkID0gdHJ1ZVxuICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgIGlmICghdGhpcy5kYXRhLmRhdGEuYWRkZWQpIHRoaXMuZGF0YS5kYXRhLmFkZGVkID0gMFxuICAgIHRoaXMuZGF0YS5kYXRhLmFkZGVkKytcbiAgICBjb25zdCBmb3JtID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuc2tpbGwtc2VsZWN0b3InKVxuICAgIGNvbnN0IGRpdkNvdW50ID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcuY291bnQnKVxuICAgIGRpdkNvdW50LmlubmVyVGV4dCA9IHRoaXMuZGF0YS5kYXRhLmFkZGVkXG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLmFkZGVkID49IHRoaXMuZGF0YS5kYXRhLm9wdGlvbnNDb3VudCkge1xuICAgICAgdGhpcy5jbG9zZSgpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoZGF0YSkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvc2tpbGwtc2VsZWN0Lmh0bWwnLFxuICAgICAgZGF0YVxuICAgICkgLy8gUmVuZGVyIHRlbXBsYXRlIGJ1ZyBhdmVjIGNlcnRhaW5lcyBkYXRhXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgY29uc3QgZGxnID0gbmV3IFNraWxsU2VsZWN0RGlhbG9nKFxuICAgICAgICB7XG4gICAgICAgICAgdGl0bGU6IGRhdGEudGl0bGUsXG4gICAgICAgICAgY29udGVudDogaHRtbCxcbiAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgIGJ1dHRvbnM6IHt9LFxuICAgICAgICAgIGNsb3NlOiAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWRhdGEuYWRkZWQgPj0gZGF0YS5vcHRpb25zQ291bnQpIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBkYXRhLnNraWxscy5maWx0ZXIoc2tpbGwgPT4gc2tpbGwuc2VsZWN0ZWQpXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShzZWxlY3RlZClcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHsgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdza2lsbC1zZWxlY3QnXSB9XG4gICAgICApXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIERpYWxvZywgcmVuZGVyVGVtcGxhdGUgKi9cblxuZXhwb3J0IGNsYXNzIFBvaW50U2VsZWN0RGlhbG9nIGV4dGVuZHMgRGlhbG9nIHtcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5pdGVtLW5hbWUnKVxuICAgICAgLmNsaWNrKGFzeW5jIGV2ZW50ID0+IHRoaXMuX29uU2VsZWN0Q2hhcmFjdGVyaXN0aWMoZXZlbnQpKVxuICAgIGh0bWwuZmluZCgnYnV0dG9uJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25CdXR0b25DbGlja2VkKGV2ZW50KSlcbiAgfVxuXG4gIGFzeW5jIF9vblNlbGVjdENoYXJhY3RlcmlzdGljIChldmVudCkge1xuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgaXRlbUxpc3QgPSBsaS5jbG9zZXN0KCcuaXRlbS1saXN0JylcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbUxpc3QucXVlcnlTZWxlY3RvckFsbCgnLnNlbGVjdGFibGUnKSkge1xuICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpXG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3NbaXRlbS5kYXRhc2V0LmtleV0uc2VsZWN0ZWQgPSBmYWxzZVxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzW2l0ZW0uZGF0YXNldC5rZXldLm9wdGlvbmFsID0gZmFsc2VcbiAgICB9XG4gICAgJChsaSkudG9nZ2xlQ2xhc3MoJ3NlbGVjdGVkJylcbiAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3NbbGkuZGF0YXNldC5rZXldLnNlbGVjdGVkID0gdHJ1ZVxuICAgIGNvbnN0IHRvdGFsUG9pbnRzID0gbGlcbiAgICAgIC5jbG9zZXN0KCcjc2tpbGwtc2VsZWN0aW9uLWZvcm0nKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5wb2ludHMnKVxuICAgIHRvdGFsUG9pbnRzLmlubmVyVGV4dCA9XG4gICAgICB0aGlzLmRhdGEuZGF0YS50b3RhbCArXG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3NbbGkuZGF0YXNldC5rZXldLm11bHRpcGxpZXIgKlxuICAgICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3NbbGkuZGF0YXNldC5rZXldLnZhbHVlXG4gICAgY29uc3QgYnV0dG9uID0gbGlcbiAgICAgIC5jbG9zZXN0KCcjc2tpbGwtc2VsZWN0aW9uLWZvcm0nKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbi52YWxpZGF0ZScpXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2luYWN0aXZlJylcbiAgICB0aGlzLmRhdGEuZGF0YS5yZXNvbHZlZCA9IHRydWVcbiAgICAvLyBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmdldCggdGhpcy5kYXRhLmRhdGEuYWN0b3JJZCk7XG4gICAgLy8gYXdhaXQgYWN0b3IuYWRkU2tpbGwoIHRoaXMuZGF0YS5kYXRhLnNraWxsc1tOdW1iZXIobGkuZGF0YXNldC5pbmRleCldLCB0aGlzLmRhdGEuZGF0YS50eXBlKTtcbiAgICAvLyBldmVudC5jdXJyZW50VGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgLy8gaWYoICF0aGlzLmRhdGEuZGF0YS5hZGRlZCkgdGhpcy5kYXRhLmRhdGEuYWRkZWQgPSAwO1xuICAgIC8vIHRoaXMuZGF0YS5kYXRhLmFkZGVkKys7XG4gICAgLy8gY29uc3QgZm9ybSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnBvaW50LXNlbGVjdG9yJyk7XG4gICAgLy8gY29uc3QgZGl2Q291bnQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJy5jb3VudCcpO1xuICAgIC8vIGRpdkNvdW50LmlubmVyVGV4dCA9IHRoaXMuZGF0YS5kYXRhLmFkZGVkO1xuICAgIC8vIGlmKCB0aGlzLmRhdGEuZGF0YS5hZGRlZCA+PSB0aGlzLmRhdGEuZGF0YS5vcHRpb25zKSB0aGlzLmNsb3NlKCk7XG4gICAgLy8gcmV0dXJuIGV2ZW50O1xuICB9XG5cbiAgYXN5bmMgX29uQnV0dG9uQ2xpY2tlZCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbmFjdGl2ZScpKSByZXR1cm5cbiAgICBzdXBlci5jbG9zZSgpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChkYXRhKSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9wb2ludC1zZWxlY3QuaHRtbCcsXG4gICAgICBkYXRhXG4gICAgKVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBQb2ludFNlbGVjdERpYWxvZyhcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxuICAgICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICBidXR0b25zOiB7fSxcbiAgICAgICAgICBjbG9zZTogKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGRhdGEucmVzb2x2ZWQpIHJldHVybiByZXNvbHZlKGRhdGEpXG4gICAgICAgICAgICBlbHNlIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgeyBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJywgJ2NoYXItc2VsZWN0J10gfVxuICAgICAgKVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBEaWFsb2csIHJlbmRlclRlbXBsYXRlICovXG5cbmV4cG9ydCBjbGFzcyBDaGFyYWNTZWxlY3REaWFsb2cgZXh0ZW5kcyBEaWFsb2cge1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLml0ZW0tbmFtZScpXG4gICAgICAuY2xpY2soYXN5bmMgZXZlbnQgPT4gdGhpcy5fb25TZWxlY3RDaGFyYWN0ZXJpc3RpYyhldmVudCkpXG4gIH1cblxuICBhc3luYyBfb25TZWxlY3RDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIHRoaXMuZGF0YS5kYXRhLnNlbGVjdGVkID0gbGkuZGF0YXNldC5rZXlcbiAgICB0aGlzLmNsb3NlKClcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKGRhdGEpIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2NoYXItc2VsZWN0Lmh0bWwnLFxuICAgICAgZGF0YVxuICAgIClcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBjb25zdCBkbGcgPSBuZXcgQ2hhcmFjU2VsZWN0RGlhbG9nKFxuICAgICAgICB7XG4gICAgICAgICAgdGl0bGU6IGRhdGEudGl0bGUsXG4gICAgICAgICAgY29udGVudDogaHRtbCxcbiAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgIGJ1dHRvbnM6IHt9LFxuICAgICAgICAgIGNsb3NlOiAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoZGF0YS5zZWxlY3RlZCkgcmV0dXJuIHJlc29sdmUoZGF0YS5zZWxlY3RlZClcbiAgICAgICAgICAgIGVsc2UgcmV0dXJuIHJlc29sdmUoZmFsc2UpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7IGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnLCAnY2hhci1zZWxlY3QnXSB9XG4gICAgICApXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIERpYWxvZywgcmVuZGVyVGVtcGxhdGUsIFJvbGwgKi9cblxuZXhwb3J0IGNsYXNzIENoYXJhY1JvbGxEaWFsb2cgZXh0ZW5kcyBEaWFsb2cge1xuICBjb25zdHJ1Y3RvciAoZGF0YSwgb3B0aW9ucykge1xuICAgIHN1cGVyKGRhdGEsIG9wdGlvbnMpXG5cbiAgICB0aGlzLnJvbGxlZCA9IGRhdGEucm9sbGVkIHx8IHt9XG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5vbignY2hhbmdlJywgJ2lucHV0JywgdGhpcy5fb25DaGFuZ2VJbnB1dC5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ3N1Ym1pdCcsICdmb3JtJywgdGhpcy5fb25TdWJtaXQuYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucm9sbC1jaGFyYWN0ZXJpc3RpYycsXG4gICAgICB0aGlzLl9vblJvbGxDaGFyYWN0ZXJpc3RpYy5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5pbmNyZWFzZS1jaGFyYWN0ZXJpc3RpYycsXG4gICAgICB0aGlzLl9vbkluY3JlYXNlQ2hhcmFjdGVyaXN0aWMuYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcuZGVjcmVhc2UtY2hhcmFjdGVyaXN0aWMnLFxuICAgICAgdGhpcy5fb25EZWNyZWFzZUNoYXJhY3RlcmlzdGljLmJpbmQodGhpcylcbiAgICApXG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLnJlc2V0LWNoYXJhY3RlcmlzdGljJyxcbiAgICAgIHRoaXMuX29uUmVzZXRDaGFyYWN0ZXJpc3RpYy5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oJ2NsaWNrJywgJ2J1dHRvbicsIHRoaXMuX29uQnV0dG9uLmJpbmQodGhpcykpXG4gIH1cblxuICBhc3luYyBfb25Sb2xsQ2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgY2hhcmFjS2V5ID0gbGkuZGF0YXNldC5rZXlcbiAgICBhd2FpdCB0aGlzLnJvbGxDaGFyYWN0ZXJpc3RpYyhjaGFyYWNLZXkpXG4gIH1cblxuICBhc3luYyBfb25JbmNyZWFzZUNoYXJhY3RlcmlzdGljIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGNoYXJhY0tleSA9IGxpLmRhdGFzZXQua2V5XG4gICAgdGhpcy5pbmNyZWFzZUNoYXJhY3RlcmlzdGljKGNoYXJhY0tleSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRlY3JlYXNlQ2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgY2hhcmFjS2V5ID0gbGkuZGF0YXNldC5rZXlcbiAgICB0aGlzLmRlY3JlYXNlQ2hhcmFjdGVyaXN0aWMoY2hhcmFjS2V5KVxuICB9XG5cbiAgYXN5bmMgX29uUmVzZXRDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBjaGFyYWNLZXkgPSBsaS5kYXRhc2V0LmtleVxuICAgIHRoaXMucmVzZXRDaGFyYWN0ZXJpc3RpYyhjaGFyYWNLZXkpXG4gIH1cblxuICBhc3luYyBfb25CdXR0b24gKGV2ZW50KSB7XG4gICAgY29uc3QgYWN0aW9uID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvblxuICAgIGlmIChhY3Rpb24gPT09ICdyb2xsJykge1xuICAgICAgZm9yIChjb25zdCBjaGFyIG9mIFtcbiAgICAgICAgJ3N0cicsXG4gICAgICAgICdjb24nLFxuICAgICAgICAnc2l6JyxcbiAgICAgICAgJ2RleCcsXG4gICAgICAgICdhcHAnLFxuICAgICAgICAnaW50JyxcbiAgICAgICAgJ3BvdycsXG4gICAgICAgICdlZHUnLFxuICAgICAgICAnbHVjaydcbiAgICAgIF0pIHtcbiAgICAgICAgYXdhaXQgdGhpcy5yb2xsQ2hhcmFjdGVyaXN0aWMoY2hhcilcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKFxuICAgICAgYWN0aW9uID09PSAndmFsaWRhdGUnICYmXG4gICAgICAhZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2luYWN0aXZlJylcbiAgICApIHtcbiAgICAgIHRoaXMuY2hlY2tUb3RhbCgpXG4gICAgICB0aGlzLmNsb3NlKClcbiAgICB9XG4gIH1cblxuICBhc3luYyByb2xsQ2hhcmFjdGVyaXN0aWMgKGtleSkge1xuICAgIGNvbnN0IGxpID0gdGhpcy5fZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKGBsaS5pdGVtW2RhdGEta2V5PSR7a2V5fV1gKVxuICAgIGNvbnN0IGlucHV0ID0gbGk/LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JylcbiAgICBjb25zdCBmb3JtdWxhID0gdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnJvbGxzW2tleV1cbiAgICBpZiAoaW5wdXQgJiYgZm9ybXVsYSkge1xuICAgICAgaWYgKGlzTmFOKE51bWJlcihmb3JtdWxhKSkpIHtcbiAgICAgICAgY29uc3Qgcm9sbCA9IG5ldyBSb2xsKGZvcm11bGEpXG4gICAgICAgIGF3YWl0IHJvbGwuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICByb2xsLnRvTWVzc2FnZSh7XG4gICAgICAgICAgZmxhdm9yOiBgUm9sbGluZyBjaGFyYWN0ZXJpc2l0aWMgJHt0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MubGlzdFtrZXldLmxhYmVsfTogJHtmb3JtdWxhfWBcbiAgICAgICAgfSlcbiAgICAgICAgaW5wdXQudmFsdWUgPSByb2xsLnRvdGFsXG4gICAgICB9IGVsc2UgaW5wdXQudmFsdWUgPSBOdW1iZXIoZm9ybXVsYSlcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNba2V5XSA9IE51bWJlcihpbnB1dC52YWx1ZSlcbiAgICAgIGlmICghdGhpcy5yb2xsZWQpIHRoaXMucm9sbGVkID0ge31cbiAgICAgIHRoaXMucm9sbGVkW2tleV0gPSB0cnVlXG4gICAgfVxuICAgIHRoaXMuY2hlY2tUb3RhbCgpXG4gIH1cblxuICBhc3luYyBpbmNyZWFzZUNoYXJhY3RlcmlzdGljIChrZXkpIHtcbiAgICBjb25zdCBsaSA9IHRoaXMuX2VsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcihgbGkuaXRlbVtkYXRhLWtleT0ke2tleX1dYClcbiAgICBjb25zdCBpbnB1dCA9IGxpPy5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpXG4gICAgaWYgKGlucHV0KSB7XG4gICAgICBpbnB1dC52YWx1ZSA9IE51bWJlcihpbnB1dC52YWx1ZSkgKyAxXG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzW2tleV0gPSBOdW1iZXIoaW5wdXQudmFsdWUpXG4gICAgfVxuICAgIHRoaXMuY2hlY2tUb3RhbCgpXG4gIH1cblxuICBhc3luYyBkZWNyZWFzZUNoYXJhY3RlcmlzdGljIChrZXkpIHtcbiAgICBjb25zdCBsaSA9IHRoaXMuX2VsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcihgbGkuaXRlbVtkYXRhLWtleT0ke2tleX1dYClcbiAgICBjb25zdCBpbnB1dCA9IGxpPy5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpXG4gICAgaWYgKGlucHV0ICYmIE51bWJlcihpbnB1dC52YWx1ZSkgPiAwKSB7XG4gICAgICBpbnB1dC52YWx1ZSA9IE51bWJlcihpbnB1dC52YWx1ZSkgLSAxXG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzW2tleV0gPSBOdW1iZXIoaW5wdXQudmFsdWUpXG4gICAgfVxuICAgIHRoaXMuY2hlY2tUb3RhbCgpXG4gIH1cblxuICBhc3luYyByZXNldENoYXJhY3RlcmlzdGljIChrZXkpIHtcbiAgICBjb25zdCBsaSA9IHRoaXMuX2VsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcihgbGkuaXRlbVtkYXRhLWtleT0ke2tleX1dYClcbiAgICBjb25zdCBpbnB1dCA9IGxpPy5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpXG4gICAgaWYgKGlucHV0KSB7XG4gICAgICBpbnB1dC52YWx1ZSA9IG51bGxcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNba2V5XSA9IDBcbiAgICB9XG4gICAgdGhpcy5jaGVja1RvdGFsKClcbiAgfVxuXG4gIGFzeW5jIF9vbkNoYW5nZUlucHV0IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBpbnB1dCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCB2YWx1ZSA9IE51bWJlcihpbnB1dC52YWx1ZSlcbiAgICBpZiAoIWlzTmFOKHZhbHVlKSkge1xuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1tpbnB1dC5uYW1lXSA9IHZhbHVlXG4gICAgfVxuXG4gICAgdGhpcy5jaGVja1RvdGFsKClcbiAgfVxuXG4gIGNoZWNrVG90YWwgKCkge1xuICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudG90YWwgPSAwXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoXG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzXG4gICAgKSkge1xuICAgICAgaWYgKGtleSAhPT0gJ2x1Y2snKSB7XG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudG90YWwgKz0gdmFsdWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB2YWxpZGF0aW9uID0gdGhpcy5fZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKCcucG9pbnRzJylcbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy5lbmFibGVkKSB7XG4gICAgICBpZiAoXG4gICAgICAgIE51bWJlcih0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnRvdGFsKSAhPT1cbiAgICAgICAgTnVtYmVyKHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudmFsdWUpXG4gICAgICApIHtcbiAgICAgICAgdmFsaWRhdGlvbi5jbGFzc0xpc3QuYWRkKCd3YXJuaW5nJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbGlkYXRpb24uY2xhc3NMaXN0LnJlbW92ZSgnd2FybmluZycpXG4gICAgICAgIGNvbnN0IHZhbGlkYXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKCdidXR0b24udmFsaWRhdGUnKVxuICAgICAgICB2YWxpZGF0ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdpbmFjdGl2ZScpXG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLnZhbGlkYXRlID0gdHJ1ZVxuICAgICAgfVxuICAgICAgY29uc3QgdmFsdWUgPSB2YWxpZGF0aW9uLnF1ZXJ5U2VsZWN0b3IoJy52YWx1ZScpXG4gICAgICB2YWx1ZS5pbm5lclRleHQgPSB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnZhbHVlXG4gICAgfVxuXG4gICAgY29uc3QgdG90YWwgPSB2YWxpZGF0aW9uLnF1ZXJ5U2VsZWN0b3IoJy50b3RhbCcpXG4gICAgdG90YWwuaW5uZXJUZXh0ID0gdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy50b3RhbFxuXG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5yb2xscy5lbmFibGVkKSB7XG4gICAgICBpZiAodGhpcy5yb2xsZWQpIHtcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEudmFsaWRhdGUgPVxuICAgICAgICAgICFPYmplY3QuZW50cmllcyh0aGlzLnJvbGxlZCkuZmluZChlbCA9PiAhZWwpICYmXG4gICAgICAgICAgT2JqZWN0LmVudHJpZXModGhpcy5yb2xsZWQpLmxlbmd0aCA9PT0gOVxuICAgICAgICBpZiAodGhpcy5kYXRhLmRhdGEudmFsaWRhdGUpIHtcbiAgICAgICAgICBjb25zdCB2YWxpZGF0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICdidXR0b24udmFsaWRhdGUnXG4gICAgICAgICAgKVxuICAgICAgICAgIHZhbGlkYXRlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2luYWN0aXZlJylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vblN1Ym1pdCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChkYXRhKSB7XG4gICAgY29uc3Qgcm9sbGVkID0ge31cbiAgICBkYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudG90YWwgPSAwXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzKSkge1xuICAgICAgaWYgKGtleSAhPT0gJ2x1Y2snKSB7XG4gICAgICAgIGRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy50b3RhbCArPSB2YWx1ZSB8fCAwXG4gICAgICB9XG4gICAgICBpZiAoIWlzTmFOKHZhbHVlKSAmJiB2YWx1ZSA+IDApIHtcbiAgICAgICAgcm9sbGVkW2tleV0gPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy5lbmFibGVkKSB7XG4gICAgICBpZiAoXG4gICAgICAgIE51bWJlcihkYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudG90YWwpICE9PVxuICAgICAgICBOdW1iZXIoZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnZhbHVlKVxuICAgICAgKSB7XG4gICAgICAgIGRhdGEucG9pbnRzV2FybmluZyA9IHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2NoYXItcm9sbC5odG1sJyxcbiAgICAgIGRhdGFcbiAgICApXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgY29uc3QgZGxnID0gbmV3IENoYXJhY1JvbGxEaWFsb2coXG4gICAgICAgIHtcbiAgICAgICAgICB0aXRsZTogZGF0YS50aXRsZSxcbiAgICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgcm9sbGVkOiByb2xsZWQsXG4gICAgICAgICAgYnV0dG9uczoge30sXG4gICAgICAgICAgY2xvc2U6ICgpID0+IHtcbiAgICAgICAgICAgIGlmIChkYXRhLnZhbGlkYXRlKSByZXR1cm4gcmVzb2x2ZSh0cnVlKVxuICAgICAgICAgICAgZWxzZSByZXR1cm4gcmVzb2x2ZShmYWxzZSlcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHsgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdjaGFyLXNlbGVjdCddIH1cbiAgICAgIClcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgRGlhbG9nLCBGb3JtRGF0YSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUgKi9cblxuZXhwb3J0IGNsYXNzIFNraWxsU3BlY1NlbGVjdERpYWxvZyB7XG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKFxuICAgIHNraWxscyxcbiAgICBzcGVjaWFsaXphdGlvbk5hbWUsXG4gICAgYmFzZVZhbHVlID0gbnVsbCxcbiAgICBuYW1lID0gbnVsbFxuICApIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3NraWxsLXNwZWMtc2VsZWN0Lmh0bWwnLFxuICAgICAge1xuICAgICAgICBoYXNTa2lsbHM6IHNraWxscy5sZW5ndGggPiAwLFxuICAgICAgICBza2lsbHM6IHNraWxscyxcbiAgICAgICAgYmFzZTogYmFzZVZhbHVlLFxuICAgICAgICBuYW1lOiBuYW1lXG4gICAgICB9XG4gICAgKVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGxldCBmb3JtRGF0YSA9IG51bGxcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBEaWFsb2coe1xuICAgICAgICB0aXRsZTogbmFtZVxuICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ta2lsbFNlbGVjdEJhc2UnLCB7IG5hbWU6IG5hbWUgfSlcbiAgICAgICAgICA6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2tpbGxTcGVjU2VsZWN0VGl0bGUnLCB7XG4gICAgICAgICAgICAgIHNwZWNpYWxpemF0aW9uOiBzcGVjaWFsaXphdGlvbk5hbWVcbiAgICAgICAgICAgIH0pLFxuICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgdmFsaWRhdGU6IHtcbiAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVmFsaWRhdGUnKSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBodG1sID0+IHtcbiAgICAgICAgICAgICAgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoXG4gICAgICAgICAgICAgICAgaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcjc2tpbGwtc2VsZWN0LWZvcm0nKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGZvcm1EYXRhKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdDogJ3ZhbGlkYXRlJyxcbiAgICAgICAgY2xvc2U6ICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gcmVzb2x2ZShmYWxzZSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIGdhbWUsIHJlbmRlclRlbXBsYXRlLCB1aSAqL1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi4vaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlSW5pdGlhdG9yIH0gZnJvbSAnLi9tZWxlZS1pbml0aWF0b3IuanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVUYXJnZXQgfSBmcm9tICcuL21lbGVlLXRhcmdldC5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdNZWxlZVJlc29sdGlvbiB7XG4gIGNvbnN0cnVjdG9yIChcbiAgICBpbml0aWF0b3JNZXNzYWdlID0gbnVsbCxcbiAgICB0YXJnZXRNZXNzYWdlID0gbnVsbCxcbiAgICBtZXNzYWdlSWQgPSBudWxsXG4gICkge1xuICAgIHRoaXMuaW5pdGlhdG9yTWVzc2FnZSA9IGluaXRpYXRvck1lc3NhZ2VcbiAgICB0aGlzLnRhcmdldE1lc3NhZ2UgPSB0YXJnZXRNZXNzYWdlXG4gICAgdGhpcy5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcbiAgfVxuXG4gIGFzeW5jIHByZUNyZWF0ZU1lc3NhZ2UgKCkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgLy8gY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoe2FjdG9yOiB0aGlzLmFjdG9yfSk7XG4gICAgLy8gaWYoIHRoaXMuYWN0b3IuaXNUb2tlbikgc3BlYWtlci5hbGlhcyA9IHRoaXMuYWN0b3IudG9rZW4ubmFtZTtcblxuICAgIC8vIGNvbnN0IHVzZXIgPSB0aGlzLmFjdG9yLnVzZXIgPyB0aGlzLmFjdG9yLnVzZXIgOiBnYW1lLnVzZXI7XG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICB9XG5cbiAgICAvLyBBZGQgaW1hZ2UgdG8gY2FyZC5cbiAgICAvLyBkYXRhLmZsYWdzID0ge1xuICAgIC8vICAgaW1nOiB0aGlzLmFjdG9yLmlzVG9rZW4gPyB0aGlzLmFjdG9yLnRva2VuLmRhdGEuaW1nOiB0aGlzLmFjdG9yLmltZ1xuICAgIC8vIH07XG5cbiAgICBjb25zdCByb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICBpZiAoWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXMocm9sbE1vZGUpKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICB9XG4gICAgLy8gaWYgKCByb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCcgKSBjaGF0RGF0YVsnYmxpbmQnXSA9IHRydWU7XG4gICAgY2hhdERhdGEuYmxpbmQgPSBmYWxzZVxuXG4gICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBhd2FpdCBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpXG4gICAgdGhpcy5tZXNzYWdlSWQgPSBjaGF0TWVzc2FnZS5pZFxuICAgIHJldHVybiBjaGF0TWVzc2FnZVxuICB9XG5cbiAgZ2V0IGRpc3BsYXlBY3Rvck9uQ2FyZCAoKSB7XG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlBY3Rvck9uQ2FyZCcpXG4gIH1cblxuICBnZXQgdGFyZ2V0ICgpIHtcbiAgICBpZiAodGhpcy50YXJnZXRNZXNzYWdlKSB7XG4gICAgICByZXR1cm4gQ29DN01lbGVlVGFyZ2V0LmdldEZyb21NZXNzYWdlSWQodGhpcy50YXJnZXRNZXNzYWdlKVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHRhcmdldFRva2VuICgpIHtcbiAgICBpZiAodGhpcy50YXJnZXQpIHJldHVybiBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLnRhcmdldC5hY3RvcktleSlcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGluaXRpYXRvciAoKSB7XG4gICAgaWYgKHRoaXMuaW5pdGlhdG9yTWVzc2FnZSkge1xuICAgICAgcmV0dXJuIENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tTWVzc2FnZUlkKHRoaXMuaW5pdGlhdG9yTWVzc2FnZSlcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBpbml0aWF0b3JUb2tlbiAoKSB7XG4gICAgaWYgKHRoaXMuaW5pdGlhdG9yKSB7XG4gICAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5pbml0aWF0b3IuYWN0b3JLZXkpXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBhc3luYyByZXNvbHZlICgpIHtcbiAgICBpZiAodGhpcy50YXJnZXQpIHtcbiAgICAgIHN3aXRjaCAodGhpcy50YXJnZXQuYWN0aW9uKSB7XG4gICAgICAgIGNhc2UgJ25vUmVzcG9uc2UnOlxuICAgICAgICAgIGlmICh0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5XaW5uZXJSb2xsRGFtYWdlJywge1xuICAgICAgICAgICAgICBuYW1lOiB0aGlzLmluaXRpYXRvci5uYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdGhpcy5hY3Rpb24gPSAncm9sbC1tZWxlZS1kYW1hZ2UnXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSB0cnVlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Jbml0aWF0b3JNaXNzZWQnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMuaW5pdGlhdG9yLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgICAgdGhpcy53aW5uZXJJbWcgPSB0aGlzLmluaXRpYXRvci53ZWFwb24uaW1nXG4gICAgICAgICAgdGhpcy53aW5uZXJUaXRsZSA9IHRoaXMuaW5pdGlhdG9yLndlYXBvbi5uYW1lXG4gICAgICAgICAgdGhpcy5sb29zZXIgPSB0aGlzLnRhcmdldFxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAnZG9kZ2UnOlxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsIDw9IDAgJiZcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LnJvbGwuc3VjY2Vzc0xldmVsIDw9IDBcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vV2lubmVyJylcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gbnVsbFxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gZmFsc2VcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPiB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldpbm5lclJvbGxEYW1hZ2UnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMuaW5pdGlhdG9yLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMuaW5pdGlhdG9yLndlYXBvbi5pbWdcbiAgICAgICAgICAgIHRoaXMud2lubmVyVGl0bGUgPSB0aGlzLmluaXRpYXRvci53ZWFwb24ubmFtZVxuICAgICAgICAgICAgdGhpcy5sb29zZXIgPSB0aGlzLnRhcmdldFxuICAgICAgICAgICAgdGhpcy5hY3Rpb24gPSAncm9sbC1tZWxlZS1kYW1hZ2UnXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSB0cnVlXG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsIDw9IHRoaXMudGFyZ2V0LnJvbGwuc3VjY2Vzc0xldmVsXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRG9kZ2VTdWNjZXNzJywge1xuICAgICAgICAgICAgICBuYW1lOiB0aGlzLnRhcmdldC5uYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLnRhcmdldFxuICAgICAgICAgICAgdGhpcy5sb29zZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgICAgICAgdGhpcy53aW5uZXJJbWcgPSB0aGlzLnRhcmdldC5za2lsbC5kYXRhLmltZ1xuICAgICAgICAgICAgdGhpcy53aW5uZXJUaXRsZSA9IHRoaXMudGFyZ2V0LnNraWxsLm5hbWVcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uID0gJ2RvZGdlJ1xuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gZmFsc2VcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGNhc2UgJ2ZpZ2h0QmFjayc6XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPD0gMCAmJlxuICAgICAgICAgICAgdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWwgPD0gMFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9XaW5uZXInKVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSBudWxsXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA+PSB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldpbm5lclJvbGxEYW1hZ2UnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMuaW5pdGlhdG9yLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMuaW5pdGlhdG9yLndlYXBvbi5pbWdcbiAgICAgICAgICAgIHRoaXMud2lubmVyVGl0bGUgPSB0aGlzLmluaXRpYXRvci53ZWFwb24ubmFtZVxuICAgICAgICAgICAgdGhpcy5sb29zZXIgPSB0aGlzLnRhcmdldFxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgLy8gVE9ETyB2ZXJpZmllciBsYSBjb25kaXRpb24gPD0gdnMgPFxuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldpbm5lclJvbGxEYW1hZ2UnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMudGFyZ2V0Lm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMudGFyZ2V0XG4gICAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMudGFyZ2V0LndlYXBvbi5pbWdcbiAgICAgICAgICAgIHRoaXMud2lubmVyVGl0bGUgPSB0aGlzLnRhcmdldC53ZWFwb24ubmFtZVxuICAgICAgICAgICAgdGhpcy5sb29zZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gdHJ1ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAnbWFuZXV2ZXInOlxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsIDw9IDAgJiZcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LnJvbGwuc3VjY2Vzc0xldmVsIDw9IDBcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vV2lubmVyJylcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gbnVsbFxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gZmFsc2VcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPj0gdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWxcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5XaW5uZXJSb2xsRGFtYWdlJywge1xuICAgICAgICAgICAgICBuYW1lOiB0aGlzLmluaXRpYXRvci5uYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgICAgICAgdGhpcy53aW5uZXJJbWcgPSB0aGlzLmluaXRpYXRvci53ZWFwb24uaW1nXG4gICAgICAgICAgICB0aGlzLndpbm5lclRpdGxlID0gdGhpcy5pbml0aWF0b3Iud2VhcG9uLm5hbWVcbiAgICAgICAgICAgIHRoaXMubG9vc2VyID0gdGhpcy50YXJnZXRcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IHRydWVcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPD0gdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWxcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NYW5ldXZlclN1Y2Nlc3MnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMudGFyZ2V0Lm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMudGFyZ2V0XG4gICAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMudGFyZ2V0LnNraWxsLmRhdGEuaW1nXG4gICAgICAgICAgICB0aGlzLndpbm5lclRpdGxlID0gdGhpcy50YXJnZXQuc2tpbGwubmFtZVxuICAgICAgICAgICAgdGhpcy5sb29zZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gZmFsc2VcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsID4gMCkge1xuICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldpbm5lclJvbGxEYW1hZ2UnLCB7XG4gICAgICAgIG5hbWU6IHRoaXMuaW5pdGlhdG9yLm5hbWVcbiAgICAgIH0pXG4gICAgICB0aGlzLndpbm5lciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICB0aGlzLnJvbGxEYW1hZ2UgPSB0cnVlXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Jbml0aWF0b3JNaXNzZWQnLCB7XG4gICAgICAgIG5hbWU6IHRoaXMuaW5pdGlhdG9yLm5hbWVcbiAgICAgIH0pXG4gICAgICB0aGlzLndpbm5lciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxuICAgIH1cblxuICAgIGlmICh0aGlzLndpbm5lcikge1xuICAgICAgaWYgKHRoaXMud2lubmVyLnJvbGwuc3VjY2Vzc0xldmVsID49IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSkge1xuICAgICAgICB0aGlzLndpbm5lci5yb2xsLmNyaXRpY2FsRGFtYWdlID0gdHJ1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy53aW5uZXIucm9sbC5jcml0aWNhbERhbWFnZSA9IGZhbHNlXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcbiAgICBpZiAodGhpcy5tZXNzYWdlSWQpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcbiAgICAgIGNvbnN0IHNwZWFrZXJEYXRhID0ge31cbiAgICAgIGlmICh0aGlzLndpbm5lcikge1xuICAgICAgICBpZiAodGhpcy53aW5uZXIudG9rZW4pIHNwZWFrZXJEYXRhLnRva2VuID0gdGhpcy53aW5uZXIudG9rZW4uZG9jdW1tZW50XG4gICAgICAgIGlmICh0aGlzLndpbm5lci5hY3Rvcikgc3BlYWtlckRhdGEuYWN0b3IgPSB0aGlzLndpbm5lci5hY3RvclxuICAgICAgfVxuICAgICAgY29uc3Qgc3BlYWtlciA9IHRoaXMud2lubmVyID8gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcihzcGVha2VyRGF0YSkgOiBudWxsXG4gICAgICBjb25zdCB1c2VyID1cbiAgICAgICAgdGhpcy53aW5uZXIgJiYgdGhpcy53aW5uZXIuYWN0b3IudXNlclxuICAgICAgICAgID8gdGhpcy53aW5uZXIuYWN0b3IudXNlclxuICAgICAgICAgIDogZ2FtZS51c2VyXG5cbiAgICAgIGxldCBtc2dcbiAgICAgIGlmICghbWVzc2FnZSkge1xuICAgICAgICAvLyBUT0RPOiBJZiBjYXJkIGlzbid0IGZvdW5kIChjYXJkIHdhcyBkZWxldGVkIGJlZm9yZSBjb21wbGV0aW9uKSA/XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybignUmVzb2xpdGlvbiBjYXJkIG1pc3NpbmcsIHdhcyBkZWxldGVkID8nKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGlmIChzcGVha2VyKSB7XG4gICAgICAgIG1zZyA9IGF3YWl0IG1lc3NhZ2UudXBkYXRlKHtcbiAgICAgICAgICAvLyBUT0RPOiBJZiBjYXJkIGlzbid0IGZvdW5kIChjYXJkIHdhcyBkZWxldGVkIGJlZm9yZSBjb21wbGV0aW9uKSA/XG4gICAgICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgICAgICBzcGVha2VyLFxuICAgICAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1zZyA9IGF3YWl0IG1lc3NhZ2UudXBkYXRlKHtcbiAgICAgICAgICB1c2VyOiB1c2VyLmlkLFxuICAgICAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgICAgcmV0dXJuIG1zZ1xuICAgIH1cbiAgfVxuXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY29tYmF0L21lbGVlLXJlc29sdXRpb24uaHRtbCdcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBDT05TVCwgRGlhbG9nLCBGb3JtRGF0YSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIHVpICovXG5cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgQ29DN1JvbGwgfSBmcm9tICcuLi9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3Q2hhdCB9IGZyb20gJy4uLy4uL2NoYXQuanMnXG5pbXBvcnQgeyBDaGF0Q2FyZEFjdG9yIH0gZnJvbSAnLi4vY2FyZC1hY3Rvci5qcydcbmltcG9ydCB7IENvQzdNZWxlZVJlc29sdGlvbiB9IGZyb20gJy4vbWVsZWUtcmVzb2x1dGlvbi5qcydcbmltcG9ydCB7IENvQzdNZWxlZUluaXRpYXRvciB9IGZyb20gJy4vbWVsZWUtaW5pdGlhdG9yLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN01lbGVlVGFyZ2V0IGV4dGVuZHMgQ2hhdENhcmRBY3RvciB7XG4gIGNvbnN0cnVjdG9yIChhY3RvcktleSwgcGFyZW50TWVzc2FnZUlkID0gbnVsbCwgZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIHN1cGVyKGFjdG9yS2V5LCBmYXN0Rm9yd2FyZClcbiAgICB0aGlzLmFjdG9yS2V5ID0gYWN0b3JLZXlcbiAgICB0aGlzLmluaXRpYXRvcktleSA9IG51bGxcbiAgICB0aGlzLnBhcmVudE1lc3NhZ2VJZCA9IHBhcmVudE1lc3NhZ2VJZFxuICAgIHRoaXMuZmFzdEZvcndhcmQgPSBmYXN0Rm9yd2FyZFxuICAgIHRoaXMucmVzb2x2ZWQgPSBmYWxzZVxuXG4gICAgdGhpcy5vdXRudW1iZXJlZCA9IGZhbHNlXG4gICAgdGhpcy5zdXJwcmlzZWQgPSBmYWxzZVxuICAgIHRoaXMuYXV0b1N1Y2Nlc3MgPSBmYWxzZVxuICAgIHRoaXMuYWR2YW50YWdlID0gZmFsc2VcbiAgICB0aGlzLmRpc2FkdmFudGFnZSA9IGZhbHNlXG5cbiAgICB0aGlzLm1lc3NhZ2VJZCA9IG51bGxcbiAgICB0aGlzLnNraWxsSWQgPSBudWxsXG4gICAgdGhpcy5pdGVtSWQgPSBudWxsXG4gICAgdGhpcy5kb2RnaW5nID0gZmFsc2VcbiAgICB0aGlzLm5vdFJlc3BvbmRpbmcgPSBmYWxzZVxuICAgIHRoaXMuZmlnaHRpbmdCYWNrID0gZmFsc2VcbiAgICB0aGlzLm1hbmV1dmVyaW5nID0gZmFsc2VcbiAgfVxuXG4gIGdldCBhY3Rpb25TZWxlY3RlZCAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuZG9kZ2luZyB8fFxuICAgICAgdGhpcy5ub3RSZXNwb25kaW5nIHx8XG4gICAgICB0aGlzLmZpZ2h0aW5nQmFjayB8fFxuICAgICAgdGhpcy5tYW5ldXZlcmluZ1xuICAgIClcbiAgfVxuXG4gIGdldCBhY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLmRvZGdpbmcpIHJldHVybiAnZG9kZ2UnXG4gICAgaWYgKHRoaXMubm90UmVzcG9uZGluZykgcmV0dXJuICdub1Jlc3BvbnNlJ1xuICAgIGlmICh0aGlzLmZpZ2h0aW5nQmFjaykgcmV0dXJuICdmaWdodEJhY2snXG4gICAgaWYgKHRoaXMubWFuZXV2ZXJpbmcpIHJldHVybiAnbWFuZXV2ZXInXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCB3ZWFwb24gKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCBza2lsbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMuc2tpbGxJZClcbiAgfVxuXG4gIHNldCBpbml0aWF0b3JLZXkgKHgpIHtcbiAgICB0aGlzLl9pbml0aWF0b3JLZXkgPSB4XG4gICAgdGhpcy50YXJnZXRLZXkgPSB4XG4gIH1cblxuICBnZXQgaW5pdGlhdG9yS2V5ICgpIHtcbiAgICBpZiAoIXRoaXMuX2luaXRpYXRvcktleSkge1xuICAgICAgaWYgKCF0aGlzLl9pbml0aWF0b3IgJiYgdGhpcy5wYXJlbnRNZXNzYWdlSWQpIHtcbiAgICAgICAgdGhpcy5faW5pdGlhdG9yID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21NZXNzYWdlSWQoXG4gICAgICAgICAgdGhpcy5wYXJlbnRNZXNzYWdlSWRcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX2luaXRpYXRvcikgdGhpcy5faW5pdGlhdG9yS2V5ID0gdGhpcy5faW5pdGlhdG9yLmFjdG9yS2V5XG4gICAgfVxuICAgIGlmICghdGhpcy5faW5pdGlhdG9yS2V5KSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBgTm8gaW5pdGlhdG9yIGZvdW5kIGZvciB0YXJnZXQgOiAke3RoaXMuYWN0b3IubmFtZX1gXG4gICAgICApXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5faW5pdGlhdG9yS2V5XG4gIH1cblxuICBnZXQgaW5pdGlhdG9yICgpIHtcbiAgICBpZiAoIXRoaXMuaW5pdGlhdG9yS2V5KSB7XG4gICAgICBpZiAodGhpcy5wYXJlbnRNZXNzYWdlSWQpIHtcbiAgICAgICAgdGhpcy5faW5pdGlhdG9yID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21NZXNzYWdlSWQoXG4gICAgICAgICAgdGhpcy5wYXJlbnRNZXNzYWdlSWRcbiAgICAgICAgKVxuICAgICAgICB0aGlzLmluaXRpYXRvcktleSA9IHRoaXMuX2luaXRpYXRvci5hY3RvcktleVxuICAgICAgfSBlbHNlIHJldHVybiBudWxsXG4gICAgfVxuICAgIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmluaXRpYXRvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gIH1cblxuICBnZXQgbWVsZWVJbml0aWF0b3IgKCkge1xuICAgIGlmICghdGhpcy5faW5pdGlhdG9yKSB7XG4gICAgICB0aGlzLl9pbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbU1lc3NhZ2VJZChcbiAgICAgICAgdGhpcy5wYXJlbnRNZXNzYWdlSWRcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2luaXRpYXRvclxuICB9XG5cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jb21iYXQvbWVsZWUtdGFyZ2V0Lmh0bWwnXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybiBudWxsXG4gICAgY29uc3QgY2FyZCA9ICQobWVzc2FnZS5kYXRhLmNvbnRlbnQpWzBdXG5cbiAgICBjb25zdCB0YXJnZXQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbUNhcmQoY2FyZCwgbWVzc2FnZUlkKVxuICAgIHRhcmdldC5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcblxuICAgIHJldHVybiB0YXJnZXRcbiAgfVxuXG4gIHN0YXRpYyB1cGRhdGVDYXJkU3dpdGNoIChldmVudCwgcHVibGlzaFVwZGF0ZSA9IHRydWUpIHtcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcubWVsZWUudGFyZ2V0JylcbiAgICBjb25zdCBmbGFnID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWdcbiAgICBjb25zdCBjYW1lbEZsYWcgPSBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWcpXG5cbiAgICAvLyB1cGRhdGUgb25seSBmb3IgbG9jYWwgcGxheWVyXG4gICAgaWYgKCFwdWJsaXNoVXBkYXRlKSB7XG4gICAgICBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXSA9IGNhcmQuZGF0YXNldFtjYW1lbEZsYWddICE9PSAndHJ1ZSdcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnc3dpdGNoZWQtb24nKVxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNlbGVjdGVkID0gY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ11cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdXBkYXRlIGNhcmQgZm9yIGFsbCBwbGF5ZXJcbiAgICAgIGNvbnN0IHRhcmdldCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgdGFyZ2V0LnRvZ2dsZUZsYWcoZmxhZylcbiAgICAgIHRhcmdldC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgfVxuICB9XG5cbiAgdG9nZ2xlRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBjb25zdCBmbGFnID0gZmxhZ05hbWUuaW5jbHVkZXMoJy0nKVxuICAgICAgPyBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWdOYW1lKVxuICAgICAgOiBmbGFnTmFtZVxuICAgIHRoaXNbZmxhZ10gPSAhdGhpc1tmbGFnXVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlQ2hhdENhcmQgKCkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgIGNvbnN0IHRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RvcktleSlcbiAgICBpZiAodG9rZW4pIHNwZWFrZXJEYXRhLnRva2VuID0gdG9rZW4uZG9jdW1lbnRcbiAgICBlbHNlIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpcy5hY3RvclxuXG4gICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoc3BlYWtlckRhdGEpXG4gICAgaWYgKHRoaXMuYWN0b3IuaXNUb2tlbikgc3BlYWtlci5hbGlhcyA9IHRoaXMuYWN0b3IudG9rZW4ubmFtZVxuXG4gICAgbGV0IHVzZXIgPSBnYW1lLnVzZXJcbiAgICBpZiAodHlwZW9mIHRoaXMuYWN0b3IudXNlciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGxldCBvd25lcnMgPSBbXVxuICAgICAgY29uc3QgZ21zID0gZ2FtZS51c2Vycy5maWx0ZXIoYSA9PiBhLmlzR00pLm1hcChhID0+IGEuaWQpXG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyh0aGlzLmFjdG9yLmRhdGEucGVybWlzc2lvbikpIHtcbiAgICAgICAgaWYgKHYgPT09IENPTlNULkVOVElUWV9QRVJNSVNTSU9OUy5PV05FUikge1xuICAgICAgICAgIGlmIChrID09PSAnZGVmYXVsdCcpIHtcbiAgICAgICAgICAgIG93bmVycyA9IGdhbWUudXNlcnMubWFwKGEgPT4gYS5pZClcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfSBlbHNlIGlmICghZ21zLmluY2x1ZGVzKGspKSB7XG4gICAgICAgICAgICBvd25lcnMucHVzaChrKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGV0IGNvbnRlbnQgPSAnJ1xuICAgICAgc3dpdGNoIChvd25lcnMubGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAvLyBHTVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBpZiAodHlwZW9mIGdhbWUudXNlcnMuZ2V0KG93bmVyc1swXSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB1c2VyID0gZ2FtZS51c2Vycy5nZXQob3duZXJzWzBdKVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGNvbnRlbnQgPVxuICAgICAgICAgICAgJzxwPicgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZVNlbGVjdFNpbmdsZVVzZXJGb3JUYXJnZXQnKVxuICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50ICsgJzxmb3JtIGlkPVwic2VsZWN0Zm9ybVwiPjxzZWxlY3QgbmFtZT1cInVzZXJcIj4nXG4gICAgICAgICAgZm9yIChjb25zdCBrIG9mIG93bmVycykge1xuICAgICAgICAgICAgY29udGVudCA9XG4gICAgICAgICAgICAgIGNvbnRlbnQgK1xuICAgICAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cIicgK1xuICAgICAgICAgICAgICBrICtcbiAgICAgICAgICAgICAgJ1wiPicgK1xuICAgICAgICAgICAgICBnYW1lLnVzZXJzLmdldChrKS5uYW1lICtcbiAgICAgICAgICAgICAgJzwvb3B0aW9uPidcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGVudCA9IGNvbnRlbnQgKyAnPC9zZWxlY3Q+PC9mb3JtPjwvcD4nXG4gICAgICAgICAgYXdhaXQgRGlhbG9nLnByb21wdCh7XG4gICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAnQ29DNy5NZXNzYWdlVGl0bGVTZWxlY3RTaW5nbGVVc2VyRm9yVGFyZ2V0J1xuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQsXG4gICAgICAgICAgICBjYWxsYmFjazogaHRtbCA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKFxuICAgICAgICAgICAgICAgIGh0bWxbMF0ucXVlcnlTZWxlY3RvcignI3NlbGVjdGZvcm0nKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgW25hbWUsIHZhbHVlXSBvZiBmb3JtRGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChuYW1lID09PSAndXNlcicpIHtcbiAgICAgICAgICAgICAgICAgIHVzZXIgPSBnYW1lLnVzZXJzLmdldCh2YWx1ZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMuYWN0b3IudXNlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHVzZXIgPSB0aGlzLmFjdG9yLnVzZXJcbiAgICB9XG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IHVzZXIuaWQsXG4gICAgICBzcGVha2VyLFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH1cblxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyh0aGlzLnJvbGxNb2RlKSkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgfVxuICAgIC8vIGlmICggdGhpcy5pc0JsaW5kICkgY2hhdERhdGFbJ2JsaW5kJ10gPSB0cnVlO1xuICAgIGNoYXREYXRhLmJsaW5kID0gZmFsc2VcblxuICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpXG5cbiAgICB0aGlzLm1lc3NhZ2VJZCA9IG1lc3NhZ2UuaWRcbiAgICByZXR1cm4gbWVzc2FnZVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcbiAgICBpZiAoIWdhbWUudXNlci5pc0dNICYmIG1lc3NhZ2UudXNlci5pZCAhPT0gZ2FtZS51c2VyLmlkKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5VbmFibGVUb0ludGVyYWN0V2l0aENoYXRDYXJkJylcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IG1lc3NhZ2UudXBkYXRlKHsgY29udGVudDogaHRtbCB9KVxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgIHJldHVybiBtc2dcbiAgfVxuXG4gIGFzeW5jIGdldFVwZGF0ZWRDaGF0Q2FyZCAoKSB7XG4gICAgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcykudGhlbihodG1sID0+IHtcbiAgICAgIHJldHVybiBodG1sXG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVTZWxlY3RlZCAoY2FyZCwgZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbUNhcmQoY2FyZClcblxuICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvbikge1xuICAgICAgY2FzZSAnZG9kZ2UnOlxuICAgICAgICB0YXJnZXQuZG9kZ2luZyA9IHRydWVcbiAgICAgICAgdGFyZ2V0Lm5vdFJlc3BvbmRpbmcgPSBmYWxzZVxuICAgICAgICB0YXJnZXQuZmlnaHRpbmdCYWNrID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0Lm1hbmV1dmVyaW5nID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0LnNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICB0YXJnZXQuaXRlbUlkID0gbnVsbFxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdub1Jlc3BvbnNlJzpcbiAgICAgICAgdGFyZ2V0LmRvZGdpbmcgPSBmYWxzZVxuICAgICAgICB0YXJnZXQubm90UmVzcG9uZGluZyA9IHRydWVcbiAgICAgICAgdGFyZ2V0LmZpZ2h0aW5nQmFjayA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5tYW5ldXZlcmluZyA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5za2lsbElkID0gbnVsbFxuICAgICAgICB0YXJnZXQuaXRlbUlkID0gbnVsbFxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdmaWdodEJhY2snOlxuICAgICAgICB0YXJnZXQuZG9kZ2luZyA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5ub3RSZXNwb25kaW5nID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0LmZpZ2h0aW5nQmFjayA9IHRydWVcbiAgICAgICAgdGFyZ2V0Lm1hbmV1dmVyaW5nID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0LnNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICB0YXJnZXQuaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LndlYXBvbklkXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ21hbmV1dmVyJzpcbiAgICAgICAgdGFyZ2V0LmRvZGdpbmcgPSBmYWxzZVxuICAgICAgICB0YXJnZXQubm90UmVzcG9uZGluZyA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5maWdodGluZ0JhY2sgPSBmYWxzZVxuICAgICAgICB0YXJnZXQubWFuZXV2ZXJpbmcgPSB0cnVlXG4gICAgICAgIHRhcmdldC5za2lsbElkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWRcbiAgICAgICAgdGFyZ2V0Lml0ZW1JZCA9IG51bGxcbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICB0YXJnZXQudXBkYXRlQ2hhdENhcmQoKVxuXG4gICAgcmV0dXJuIHRhcmdldFxuICB9XG5cbiAgYXN5bmMgcGVyZm9ybVNraWxsQ2hlY2sgKHNraWxsSWQgPSBudWxsLCBwdWJsaXNoID0gZmFsc2UpIHtcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIC8vIENvbWJhdCByb2xsIGNhbm5vdCBiZSBibGluZCBvciB1bmtub3duXG4gICAgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgY2hlY2suaXNVbmtvbnduID0gZmFsc2VcbiAgICBjaGVjay5yZWZlcmVuY2VNZXNzYWdlSWQgPSB0aGlzLm1lc3NhZ2VJZFxuICAgIGNoZWNrLnJvbGxUeXBlID0gJ29wcG9zZWQnXG4gICAgY2hlY2suc2lkZSA9ICd0YXJnZXQnXG4gICAgY2hlY2suYWN0aW9uID0gdGhpcy5hY3Rpb25cbiAgICBjaGVjay5hY3RvciA9IHRoaXMuYWN0b3JcbiAgICBjaGVjay5pdGVtID0gdGhpcy5pdGVtSWRcbiAgICBjaGVjay5za2lsbCA9IHNraWxsSWRcbiAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgY2hlY2suZGljZU1vZGlmaWVyID0gMFxuXG4gICAgaWYgKHRoaXMuZGlzYWR2YW50YWdlKSBjaGVjay5kaWNlTW9kaWZpZXIgLT0gMVxuICAgIGlmICh0aGlzLmFkdmFudGFnZSkgY2hlY2suZGljZU1vZGlmaWVyICs9IDFcblxuICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgIHRoaXMuY2hlY2sgPSBjaGVja1xuICAgIHRoaXMucm9sbGVkID0gdHJ1ZVxuICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgaWYgKHB1Ymxpc2gpIGNoZWNrLnRvTWVzc2FnZSgpXG5cbiAgICByZXR1cm4gY2hlY2tcbiAgfVxuXG4gIGFzeW5jIHB1Ymxpc2hOb1JlcG9uc2VSZXN1bHQgKCkge1xuICAgIHRoaXMucm9sbGVkID0gdHJ1ZVxuICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgdGhpcy5ub3RSZXNwb25kaW5nID0gdHJ1ZVxuICAgIGNvbnN0IHJlc29sdXRpb25DYXJkID0gbmV3IENvQzdNZWxlZVJlc29sdGlvbihcbiAgICAgIHRoaXMucGFyZW50TWVzc2FnZUlkLFxuICAgICAgdGhpcy5tZXNzYWdlSWRcbiAgICApXG5cbiAgICBjb25zdCByZXNvbHV0aW9uTWVzc2FnZSA9IGF3YWl0IHJlc29sdXRpb25DYXJkLnByZUNyZWF0ZU1lc3NhZ2UoKVxuXG4gICAgdGhpcy5yZXNvbHV0aW9uQ2FyZCA9IHJlc29sdXRpb25NZXNzYWdlLmlkXG4gICAgYXdhaXQgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBhc3luYyBwdWJsaXNoQ2hlY2tSZXN1bHQgKGNoZWNrID0gbnVsbCkge1xuICAgIGlmICghY2hlY2sgJiYgIXRoaXMuY2hlY2spIHJldHVybiBudWxsXG5cbiAgICBpZiAoY2hlY2spIHRoaXMuY2hlY2sgPSBjaGVja1xuICAgIHRoaXMucm9sbCA9IENvQzdSb2xsLmdldEZyb21DaGVjayh0aGlzLmNoZWNrKVxuICAgIHRoaXMucm9sbGVkID0gdHJ1ZVxuXG4gICAgdGhpcy5yb2xsLnJvbGxJY29ucyA9IFtdXG4gICAgaWYgKHRoaXMucm9sbC5jcml0aWNhbCkge1xuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdnb2xkZW5yb2QnXG4gICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsU3VjY2VzcycpXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgNDsgaW5kZXgrKykge1xuICAgICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ21lZGFsJylcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMucm9sbC5mdW1ibGUpIHtcbiAgICAgIHRoaXMucm9sbC5yb2xsQ29sb3IgPSAnZGFya3JlZCdcbiAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRnVtYmxlJylcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCA0OyBpbmRleCsrKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsSWNvbnMucHVzaCgnc3BpZGVyJylcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMucm9sbC5zdWNjZXNzKSB7XG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2dvbGRlbnJvZCdcbiAgICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIgPT09IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyU3VjY2VzcycpXG4gICAgICB9XG4gICAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkID09PSB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZFN1Y2Nlc3MnKVxuICAgICAgfVxuICAgICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSA9PT0gdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsOyBpbmRleCsrKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsSWNvbnMucHVzaCgnc3RhcicpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucm9sbC5yb2xsQ29sb3IgPSAnYmxhY2snXG4gICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZhaWx1cmUnKVxuICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdza3VsbCcpXG4gICAgfVxuXG4gICAgY29uc3QgcmVzb2x1dGlvbkNhcmQgPSBuZXcgQ29DN01lbGVlUmVzb2x0aW9uKFxuICAgICAgdGhpcy5wYXJlbnRNZXNzYWdlSWQsXG4gICAgICB0aGlzLm1lc3NhZ2VJZFxuICAgIClcbiAgICBjb25zdCByZXNvbHV0aW9uTWVzc2FnZSA9IGF3YWl0IHJlc29sdXRpb25DYXJkLnByZUNyZWF0ZU1lc3NhZ2UoKVxuXG4gICAgdGhpcy5yZXNvbHV0aW9uQ2FyZCA9IHJlc29sdXRpb25NZXNzYWdlLmlkXG4gICAgYXdhaXQgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbUNhcmQgKGNhcmQsIG1lc3NhZ2VJZCA9IG51bGwpIHtcbiAgICBjb25zdCBhY3RvcktleSA9IGNhcmQuZGF0YXNldC5hY3RvcktleVxuICAgIGNvbnN0IHBhcmVudE1lc3NhZ2VJZCA9IGNhcmQuZGF0YXNldC5wYXJlbnRNZXNzYWdlSWRcbiAgICBjb25zdCBmYXN0Rm9yd2FyZCA9IGNhcmQuZGF0YXNldC5mYXN0Rm9yd2FyZCA9PT0gJ3RydWUnXG4gICAgY29uc3QgdGFyZ2V0ID0gbmV3IENvQzdNZWxlZVRhcmdldChhY3RvcktleSwgcGFyZW50TWVzc2FnZUlkLCBmYXN0Rm9yd2FyZClcblxuICAgIHRhcmdldC5yb2xsID0gQ29DN1JvbGwuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KHRhcmdldCwgY2FyZClcblxuICAgIGlmIChjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykpIHtcbiAgICAgIHRhcmdldC5tZXNzYWdlSWQgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykuZGF0YXNldC5tZXNzYWdlSWRcbiAgICB9IGVsc2UgdGFyZ2V0Lm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuICAgIHJldHVybiB0YXJnZXRcbiAgfVxuXG4gIHVwZ3JhZGVSb2xsIChsdWNrQW1vdW50LCBuZXdTdWNjZXNzTGV2ZWwsIG9sZENhcmQpIHtcbiAgICAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICAgIGlmICghdGhpcy5hY3Rvci5zcGVuZEx1Y2sobHVja0Ftb3VudCkpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGAke3RoaXMuYWN0b3IubmFtZX0gZGlkbid0IGhhdmUgZW5vdWdoIGx1Y2sgdG8gcGFzcyB0aGUgY2hlY2tgXG4gICAgICApXG4gICAgfVxuICAgIHRoaXMucm9sbC52YWx1ZSA9IG51bGxcbiAgICB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsID0gbmV3U3VjY2Vzc0xldmVsXG4gICAgdGhpcy5yb2xsLmx1Y2tTcGVudCA9IHRydWVcbiAgICBvbGRDYXJkLmRhdGFzZXQucHJvY2Vzc2VkID0gZmFsc2VcblxuICAgIGNvbnN0IGRpY2VSb2xscyA9IG9sZENhcmQucXVlcnlTZWxlY3RvcignLmRpY2Utcm9sbCcpXG4gICAgZGljZVJvbGxzLmRhdGFzZXQudmFsdWUgPSBudWxsXG4gICAgZGljZVJvbGxzLmRhdGFzZXQuc3VjY2Vzc0xldmVsID0gbmV3U3VjY2Vzc0xldmVsXG4gICAgZGljZVJvbGxzLmRhdGFzZXQubHVja1NwZW50ID0gdHJ1ZVxuXG4gICAgY29uc3QgcmVzdWxEZXRhaWxzID0gb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcucmVzdWx0LWRldGFpbHMnKVxuICAgIGNvbnN0IGRpY2VUb3RhbCA9IG9sZENhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG90YWwnKVxuICAgIHN3aXRjaCAobmV3U3VjY2Vzc0xldmVsKSB7XG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhcjpcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyU3VjY2VzcycpXG4gICAgICAgIHJlc3VsRGV0YWlscy5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbHVja0Ftb3VudDogbHVja0Ftb3VudCxcbiAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJEaWZmaWN1bHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQ6XG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZFN1Y2Nlc3MnKVxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGx1Y2tBbW91bnQ6IGx1Y2tBbW91bnQsXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkRGlmZmljdWx0eScpXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lOlxuICAgICAgICBkaWNlVG90YWwuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcbiAgICAgICAgcmVzdWxEZXRhaWxzLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsdWNrQW1vdW50OiBsdWNrQW1vdW50LFxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZURpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWw6XG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgICAgcmVzdWxEZXRhaWxzLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsdWNrQW1vdW50OiBsdWNrQW1vdW50LFxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxEaWZmaWN1bHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBkaWNlVG90YWwuY2xhc3NMaXN0LnJlcGxhY2UoJ2ZhaWx1cmUnLCAnc3VjY2VzcycpXG4gICAgb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1idXR0b25zJykucmVtb3ZlKClcbiAgICBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvb2x0aXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgQ29DN0NoYXQudXBkYXRlQ2hhdENhcmQob2xkQ2FyZCkgLy8gVE9ETyA6IENoZWNrIGlmIHRoaXMgbmVlZHMgdG8gYmUgYXN5bmNcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgUm9sbCwgdWkgKi9cblxuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuLi9kaWNlLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyLCBDb0M3Um9sbCwgQ29DN0RhbWFnZSB9IGZyb20gJy4vaGVscGVyLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1JhbmdlSW5pdGlhdG9yIHtcbiAgY29uc3RydWN0b3IgKGFjdG9yS2V5ID0gbnVsbCwgaXRlbUlkID0gbnVsbCwgZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIHRoaXMuYWN0b3JLZXkgPSBhY3RvcktleVxuICAgIHRoaXMuaXRlbUlkID0gaXRlbUlkXG4gICAgdGhpcy5mYXN0Rm9yd2FyZCA9IGZhc3RGb3J3YXJkXG4gICAgdGhpcy5yZXNvbHZlZCA9IGZhbHNlXG4gICAgdGhpcy5jb3ZlciA9IGZhbHNlXG4gICAgdGhpcy5zdXJwcmlzZWQgPSBmYWxzZVxuICAgIHRoaXMuYXV0b1N1Y2Nlc3MgPSBmYWxzZVxuICAgIHRoaXMuYWR2YW50YWdlID0gZmFsc2VcbiAgICB0aGlzLmRpc2FkdmFudGFnZSA9IGZhbHNlXG4gICAgdGhpcy5tZXNzYWdlSWQgPSBudWxsXG4gICAgdGhpcy50YXJnZXRDYXJkID0gbnVsbFxuICAgIHRoaXMucm9sbGVkID0gZmFsc2VcbiAgICB0aGlzLnNpbmdsZVNob3QgPSBmYWxzZVxuICAgIHRoaXMubXVsdGlwbGVTaG90cyA9IGZhbHNlXG4gICAgdGhpcy5idXJzdCA9IGZhbHNlXG4gICAgdGhpcy5mdWxsQXV0byA9IGZhbHNlXG4gICAgdGhpcy50b2tlbktleSA9IG51bGxcbiAgICB0aGlzLmFpbWVkID0gZmFsc2VcbiAgICB0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkID0gMFxuICAgIHRoaXMuX3RhcmdldHMgPSBbXVxuICAgIGZvciAoY29uc3QgdCBvZiBbLi4uZ2FtZS51c2VyLnRhcmdldHNdKSB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBuZXcgQ29DN1JhbmdlVGFyZ2V0KGAke3Quc2NlbmUuaWR9LiR7dC5pZH1gKSAvL1xuICAgICAgdGFyZ2V0LnRva2VuID0gdFxuICAgICAgdGhpcy5fdGFyZ2V0cy5wdXNoKHRhcmdldClcbiAgICB9XG4gICAgaWYgKHRoaXMuX3RhcmdldHMubGVuZ3RoKSB0aGlzLl90YXJnZXRzWzBdLmFjdGl2ZSA9IHRydWVcbiAgICBlbHNlIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IG5ldyBDb0M3UmFuZ2VUYXJnZXQoKVxuICAgICAgdGFyZ2V0LmFjdGl2ZSA9IHRydWVcbiAgICAgIHRoaXMuX3RhcmdldHMucHVzaCh0YXJnZXQpXG4gICAgfVxuICAgIGlmIChhY3RvcktleSkge1xuICAgICAgY29uc3QgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShhY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB0aGlzLnRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkoYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgaWYgKHRoaXMudG9rZW4pIHRoaXMudG9rZW5LZXkgPSBhY3Rvci50b2tlbktleVxuICAgICAgaWYgKGl0ZW1JZCkge1xuICAgICAgICBjb25zdCB3ZWFwb24gPSBhY3Rvci5pdGVtcy5nZXQoaXRlbUlkKVxuICAgICAgICBpZiAod2VhcG9uKSB7XG4gICAgICAgICAgaWYgKHRoaXMud2VhcG9uLnNpbmdsZVNob3QpIHRoaXMuc2luZ2xlU2hvdCA9IHRydWVcbiAgICAgICAgICBlbHNlIGlmICh0aGlzLndlYXBvbi5kYXRhLmRhdGEucHJvcGVydGllcy5hdXRvKSB0aGlzLmZ1bGxBdXRvID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLnRva2VuS2V5KSB7XG4gICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5fdGFyZ2V0cykge1xuICAgICAgICBpZiAodC50b2tlbiAmJiB0aGlzLnRva2VuKSB7XG4gICAgICAgICAgdC5kaXN0YW5jZSA9IGNoYXRIZWxwZXIuZ2V0RGlzdGFuY2UodC50b2tlbiwgdGhpcy50b2tlbilcbiAgICAgICAgICB0LnJvdW5kZWREaXN0YW5jZSA9IE1hdGgucm91bmQodC5kaXN0YW5jZS52YWx1ZSAqIDEwMCkgLyAxMDBcbiAgICAgICAgICB0LmRpc3RhbmNlVW5pdCA9IHQuZGlzdGFuY2UudW5pdFxuICAgICAgICAgIGNvbnN0IGRpc3RJbllkID1cbiAgICAgICAgICAgIE1hdGgucm91bmQoY2hhdEhlbHBlci50b1lhcmRzKHQuZGlzdGFuY2UpICogMTAwKSAvIDEwMFxuICAgICAgICAgIC8vIGlmKCBkaXN0SW5ZZCl7XG4gICAgICAgICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgICAgICAgIHQucG9pbnRCbGFua1JhbmdlID0gZmFsc2VcbiAgICAgICAgICAgIGNvbnN0IHBiUmFuZ2VJbllkID1cbiAgICAgICAgICAgICAgdGhpcy5hY3Rvci5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZSAvIDE1XG4gICAgICAgICAgICBpZiAoZGlzdEluWWQgPD0gcGJSYW5nZUluWWQpIHQucG9pbnRCbGFua1JhbmdlID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodGhpcy53ZWFwb24pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLndlYXBvbi5iYXNlUmFuZ2UpIHtcbiAgICAgICAgICAgICAgdC5iYXNlUmFuZ2UgPSBmYWxzZVxuICAgICAgICAgICAgICB0LmxvbmdSYW5nZSA9IGZhbHNlXG4gICAgICAgICAgICAgIHQuZXh0cmVtZVJhbmdlID0gZmFsc2VcbiAgICAgICAgICAgICAgdC5vdXRPZlJhbmdlID0gZmFsc2VcbiAgICAgICAgICAgICAgaWYgKHRoaXMud2VhcG9uLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLnNob3RndW4pIHtcbiAgICAgICAgICAgICAgICBpZiAoZGlzdEluWWQgPD0gdGhpcy53ZWFwb24uYmFzZVJhbmdlKSB0LmJhc2VSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICBkaXN0SW5ZZCA+IHRoaXMud2VhcG9uLmJhc2VSYW5nZSAmJlxuICAgICAgICAgICAgICAgICAgZGlzdEluWWQgPD0gdGhpcy53ZWFwb24ubG9uZ1JhbmdlXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICB0LmxvbmdSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgZGlzdEluWWQgPiB0aGlzLndlYXBvbi5sb25nUmFuZ2UgJiZcbiAgICAgICAgICAgICAgICAgIGRpc3RJbllkIDw9IHRoaXMud2VhcG9uLmV4dHJlbWVSYW5nZVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgdC5leHRyZW1lUmFuZ2UgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkaXN0SW5ZZCA+IHRoaXMud2VhcG9uLmV4dHJlbWVSYW5nZSkgdC5vdXRPZlJhbmdlID0gdHJ1ZVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChkaXN0SW5ZZCA8PSB0aGlzLndlYXBvbi5iYXNlUmFuZ2UpIHQuYmFzZVJhbmdlID0gdHJ1ZVxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIGRpc3RJbllkID4gdGhpcy53ZWFwb24uYmFzZVJhbmdlICYmXG4gICAgICAgICAgICAgICAgICBkaXN0SW5ZZCA8PSB0aGlzLndlYXBvbi5iYXNlUmFuZ2UgKiAyXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICB0LmxvbmdSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgZGlzdEluWWQgPiB0aGlzLndlYXBvbi5iYXNlUmFuZ2UgKiAyICYmXG4gICAgICAgICAgICAgICAgICBkaXN0SW5ZZCA8PSB0aGlzLndlYXBvbi5iYXNlUmFuZ2UgKiA0XG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICB0LmV4dHJlbWVSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGRpc3RJbllkID4gdGhpcy53ZWFwb24uYmFzZVJhbmdlICogNCkgdC5vdXRPZlJhbmdlID0gdHJ1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhKHQuYmFzZVJhbmdlIHx8IHQubG9uZ1JhbmdlIHx8IHQuZXh0cmVtZVJhbmdlIHx8IHQub3V0T2ZSYW5nZSlcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdC5iYXNlUmFuZ2UgPSB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gfVxuICAgICAgICB9IGVsc2UgdC5iYXNlUmFuZ2UgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0IGRpc3BsYXlBY3Rvck9uQ2FyZCAoKSB7XG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlBY3Rvck9uQ2FyZCcpXG4gIH1cblxuICBnZXQgYWN0b3JJbWcgKCkge1xuICAgIGNvbnN0IGltZyA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JJbWdGcm9tS2V5KHRoaXMuYWN0b3JLZXkpXG4gICAgaWYgKGltZykgcmV0dXJuIGltZ1xuICAgIHJldHVybiAnLi4vaWNvbnMvc3ZnL215c3RlcnktbWFuLWJsYWNrLnN2ZydcbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICB9XG5cbiAgZ2V0IGl0ZW0gKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCB3ZWFwb24gKCkge1xuICAgIHJldHVybiB0aGlzLml0ZW1cbiAgfVxuXG4gIGdldCB0YXJnZXRzICgpIHtcbiAgICBpZiAoIXRoaXMuX3RhcmdldHMpIHRoaXMuX3RhcmdldHMgPSBbXVxuICAgIHJldHVybiB0aGlzLl90YXJnZXRzXG4gIH1cblxuICBnZXQgdGFyZ2V0ICgpIHtcbiAgICBpZiAodGhpcy50YXJnZXRzICYmIHRoaXMudGFyZ2V0cy5sZW5ndGgpIHJldHVybiB0aGlzLnRhcmdldHMucG9wKClcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHNraWxscyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuZ2V0V2VhcG9uU2tpbGxzKHRoaXMuaXRlbUlkKVxuICB9XG5cbiAgZ2V0IG1haW5XZWFwb25Ta2lsbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMud2VhcG9uLmRhdGEuZGF0YS5za2lsbC5tYWluLmlkKVxuICB9XG5cbiAgZ2V0IGF1dG9XZWFwb25Ta2lsbCAoKSB7XG4gICAgaWYgKHRoaXMud2VhcG9uLmRhdGEuZGF0YS5za2lsbC5hbHRlcm5hdGl2LmlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy53ZWFwb24uZGF0YS5kYXRhLnNraWxsLmFsdGVybmF0aXYuaWQpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLm1haW5XZWFwb25Ta2lsbFxuICB9XG5cbiAgZ2V0IGF1dG9GaXJlICgpIHtcbiAgICByZXR1cm4gdGhpcy5idXJzdCB8fCB0aGlzLmZ1bGxBdXRvXG4gIH1cblxuICBnZXQgbXVsdGlUYXJnZXQgKCkge1xuICAgIHJldHVybiB0aGlzLmZ1bGxBdXRvIHx8IHRoaXMubXVsdGlwbGVTaG90c1xuICB9XG5cbiAgZ2V0IGFpbWluZyAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5fYWltaW5nKSB7XG4gICAgICB0aGlzLl9haW1pbmcgPSB0aGlzLmFjdG9yLmdldEFjdG9yRmxhZygnYWltaW5nJylcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2FpbWluZ1xuICB9XG5cbiAgZ2V0IGFjdGl2ZVRhcmdldCAoKSB7XG4gICAgaWYgKCF0aGlzLl90YXJnZXRzLmxlbmd0aCkgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0cy5maW5kKHQgPT4gdC5hY3RpdmUpXG4gIH1cblxuICBnZXQgc2hvdHMgKCkge1xuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX3Nob3RzKSB0aGlzLl9zaG90cyA9IFtdXG4gICAgcmV0dXJuIHRoaXMuX3Nob3RzXG4gIH1cblxuICBnZXQgY3VycmVudFNob3RSYW5rICgpIHtcbiAgICByZXR1cm4gdGhpcy5zaG90cy5sZW5ndGggKyAxXG4gIH1cblxuICBnZXQgYWN0aXZlVGFyZ2V0U2hvdERpZmZpY3VsdHkgKCkge1xuICAgIHJldHVybiB0aGlzLnNob3REaWZmaWN1bHR5KClcbiAgfVxuXG4gIHNldCBhaW1pbmcgKGIpIHtcbiAgICB0aGlzLl9haW1pbmcgPSBiXG4gIH1cblxuICBnZXQgZGlkQW55U2hvdEhpdCAoKSB7XG4gICAgbGV0IGFueUhpdCA9IGZhbHNlXG4gICAgZm9yIChjb25zdCByIG9mIHRoaXMucm9sbHMpIHtcbiAgICAgIGFueUhpdCA9IGFueUhpdCB8fCByLmlzU3VjY2Vzc1xuICAgIH1cbiAgICByZXR1cm4gYW55SGl0XG4gIH1cblxuICBnZXQgc3VjY2Vzc2Z1bEhpdHMgKCkge1xuICAgIGNvbnN0IGhpdHMgPSBbXVxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnJvbGxzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgaWYgKHRoaXMucm9sbHNbaW5kZXhdLmlzU3VjY2Vzcykge1xuICAgICAgICBjb25zdCBoaXQgPSB7XG4gICAgICAgICAgcm9sbDogdGhpcy5yb2xsc1tpbmRleF0sXG4gICAgICAgICAgc2hvdDogdGhpcy5zaG90c1tpbmRleF1cbiAgICAgICAgfVxuICAgICAgICBoaXRzLnB1c2goaGl0KVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaGl0cy5sZW5ndGggIT09IDApIHJldHVybiBoaXRzXG4gICAgZWxzZSByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHNob3RGaXJlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2hvdHMgPyB0aGlzLnNob3RzLmxlbmd0aCA6IDBcbiAgfVxuXG4gIGdldCB0b3RhbEFtbW8gKCkge1xuICAgIHJldHVybiB0aGlzLndlYXBvbi5nZXRCdWxsZXRMZWZ0KClcbiAgfVxuXG4gIGdldCBtYXhTaG90cyAoKSB7XG4gICAgaWYgKHRoaXMuZnVsbEF1dG8pIHJldHVybiAn4oieJ1xuICAgIC8vIHJldHVybiB0aGlzLndlYXBvbi5kYXRhLmRhdGEudXNlc1BlclJvdW5kLm1heDtcblxuICAgIHJldHVybiB0aGlzLndlYXBvbi5kYXRhLmRhdGEudXNlc1BlclJvdW5kLm1heFxuICAgICAgPyBwYXJzZUludCh0aGlzLndlYXBvbi5kYXRhLmRhdGEudXNlc1BlclJvdW5kLm1heClcbiAgICAgIDogMVxuICB9XG5cbiAgZ2V0IGlnbm9yZUFtbW8gKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNyZWdhcmRBbW1vJylcbiAgfVxuXG4gIGdldCBpZ25vcmVVc2VzUGVyUm91bmQgKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNyZWdhcmRVc2VQZXJSb3VuZCcpXG4gIH1cblxuICBnZXQgb3V0T2ZBbW1vICgpIHtcbiAgICBpZiAodGhpcy5pZ25vcmVBbW1vKSByZXR1cm4gZmFsc2VcbiAgICBpZiAodGhpcy50b3RhbEJ1bGxldHNGaXJlZCA+PSB0aGlzLndlYXBvbi5nZXRCdWxsZXRMZWZ0KCkpIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgb3V0T2ZTaG90cyAoKSB7XG4gICAgaWYgKHRoaXMuaWdub3JlVXNlc1BlclJvdW5kKSByZXR1cm4gZmFsc2VcbiAgICBpZiAodGhpcy5zaG90cykgcmV0dXJuIHRoaXMuc2hvdHMubGVuZ3RoID49IHRoaXMubWF4U2hvdHNcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCB2b2xsZXlTaXplICgpIHtcbiAgICBpZiAoIXRoaXMud2VhcG9uLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmF1dG8pIHJldHVybiAxXG4gICAgaWYgKHRoaXMuX3ZvbGxleVNpemUpIHJldHVybiB0aGlzLl92b2xsZXlTaXplXG4gICAgY29uc3Qgc2l6ZSA9IE1hdGguZmxvb3IodGhpcy5hdXRvV2VhcG9uU2tpbGwudmFsdWUgLyAxMClcbiAgICByZXR1cm4gc2l6ZSA8IDMgPyAzIDogc2l6ZVxuICB9XG5cbiAgc2V0IHZvbGxleVNpemUgKHgpIHtcbiAgICBpZiAoeCA+PSBNYXRoLmZsb29yKHRoaXMuYXV0b1dlYXBvblNraWxsLnZhbHVlIC8gMTApKSB7XG4gICAgICB0aGlzLl92b2xsZXlTaXplID0gTWF0aC5mbG9vcih0aGlzLmF1dG9XZWFwb25Ta2lsbC52YWx1ZSAvIDEwKVxuICAgIH0gZWxzZSBpZiAoeCA8PSAzKSB7XG4gICAgICB0aGlzLl92b2xsZXlTaXplID0gM1xuICAgIH1cbiAgICB0aGlzLl92b2xsZXlTaXplID0gcGFyc2VJbnQoeClcbiAgfVxuXG4gIGdldCBpc1ZvbGxleU1pblNpemUgKCkge1xuICAgIGlmICh0aGlzLnZvbGxleVNpemUgPT09IDMpIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgaXNWb2xsZXlNYXhTaXplICgpIHtcbiAgICBjb25zdCBtYXhTaXplID1cbiAgICAgIE1hdGguZmxvb3IodGhpcy5hdXRvV2VhcG9uU2tpbGwudmFsdWUgLyAxMCkgPCAzXG4gICAgICAgID8gM1xuICAgICAgICA6IE1hdGguZmxvb3IodGhpcy5hdXRvV2VhcG9uU2tpbGwudmFsdWUgLyAxMClcbiAgICBpZiAobWF4U2l6ZSA9PT0gdGhpcy52b2xsZXlTaXplKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0VGFyZ2V0RnJvbUtleSAoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldHMuZmluZCh0ID0+IGtleSA9PT0gdC5hY3RvcktleSlcbiAgfVxuXG4gIGNhbGNUYXJnZXRzRGlmZmljdWx0eSAoKSB7XG4gICAgZm9yIChjb25zdCB0IG9mIHRoaXMudGFyZ2V0cykge1xuICAgICAgdC5zaG90RGlmZmljdWx0eSA9IHRoaXMuc2hvdERpZmZpY3VsdHkodClcbiAgICB9XG4gIH1cblxuICBzaG90RGlmZmljdWx0eSAodCA9IG51bGwpIHtcbiAgICBjb25zdCB0YXJnZXQgPSB0IHx8IHRoaXMuYWN0aXZlVGFyZ2V0XG4gICAgbGV0IGRhbWFnZSA9IHRoaXMud2VhcG9uLmRhdGEuZGF0YS5yYW5nZS5ub3JtYWwuZGFtYWdlXG4gICAgaWYgKHRoaXMud2VhcG9uLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLnNob3RndW4pIHtcbiAgICAgIGlmICh0LmxvbmdSYW5nZSkgZGFtYWdlID0gdGhpcy53ZWFwb24uZGF0YS5kYXRhLnJhbmdlLmxvbmcuZGFtYWdlXG4gICAgICBpZiAodC5leHRyZW1lUmFuZ2UpIGRhbWFnZSA9IHRoaXMud2VhcG9uLmRhdGEuZGF0YS5yYW5nZS5leHRyZW1lLmRhbWFnZVxuICAgIH1cbiAgICBsZXQgbW9kaWZpZXIgPSB0YXJnZXQubW9kaWZpZXJcbiAgICBsZXQgZGlmZmljdWx0eVxuICAgIHRoaXMud2VhcG9uLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLnNob3RndW5cbiAgICAgID8gKGRpZmZpY3VsdHkgPSAxKVxuICAgICAgOiAoZGlmZmljdWx0eSA9IHRhcmdldC5kaWZmaWN1bHR5KVxuICAgIGxldCBkaWZmaWN1bHR5TmFtZSA9ICcnXG4gICAgaWYgKHRoaXMuYWltaW5nICYmIHRoaXMuY3VycmVudFNob3RSYW5rID09PSAxKSBtb2RpZmllcisrXG4gICAgaWYgKHRoaXMuYWR2YW50YWdlKSBtb2RpZmllcisrXG4gICAgaWYgKHRoaXMuZGlzYWR2YW50YWdlKSBtb2RpZmllci0tXG4gICAgaWYgKHRoaXMucmVsb2FkKSBtb2RpZmllci0tXG4gICAgaWYgKHRoaXMubXVsdGlwbGVTaG90cyAmJiAhdGhpcy5mdWxsQXV0bykgbW9kaWZpZXItLVxuICAgIGlmICh0aGlzLmZ1bGxBdXRvKSBtb2RpZmllciAtPSB0aGlzLmN1cnJlbnRTaG90UmFuayAtIDFcbiAgICBpZiAobW9kaWZpZXIgPCAtMikge1xuICAgICAgY29uc3QgZXhjZXNzID0gTWF0aC5hYnMobW9kaWZpZXIgKyAyKVxuICAgICAgZGlmZmljdWx0eSArPSBleGNlc3NcbiAgICAgIGlmIChkaWZmaWN1bHR5ID4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbCkge1xuICAgICAgICBkaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5pbXBvc3NpYmxlXG4gICAgICB9XG4gICAgICBtb2RpZmllciA9IC0yXG4gICAgfVxuXG4gICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA9PT0gZGlmZmljdWx0eSkge1xuICAgICAgZGlmZmljdWx0eU5hbWUgPSAnUmVndWxhcidcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZCA9PT0gZGlmZmljdWx0eSkgZGlmZmljdWx0eU5hbWUgPSAnSGFyZCdcbiAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lID09PSBkaWZmaWN1bHR5KSB7XG4gICAgICBkaWZmaWN1bHR5TmFtZSA9ICdFeHRyZW1lJ1xuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbCA9PT0gZGlmZmljdWx0eSkge1xuICAgICAgZGlmZmljdWx0eU5hbWUgPSAnQ3JpdGljYWwnXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmltcG9zc2libGUgPT09IGRpZmZpY3VsdHkpIHtcbiAgICAgIGRpZmZpY3VsdHlOYW1lID0gJ0ltcG9zc2libGUnXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGxldmVsOiBkaWZmaWN1bHR5LFxuICAgICAgbmFtZTogZGlmZmljdWx0eU5hbWUsXG4gICAgICBtb2RpZmllcjogbW9kaWZpZXIsXG4gICAgICBkYW1hZ2U6IGRhbWFnZSxcbiAgICAgIGltcG9zc2libGU6IGRpZmZpY3VsdHkgPT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaW1wb3NzaWJsZVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTaG9vdCBhdCB0aGUgYWN0aXZlIHRhcmdldC4gQWRkIGl0IHRvIHRoZSBsaXN0IG9mIHNob3RzLlxuICAgKiBUT0RPIDogcmVjYWxjdWxlciBsYSBkaWZmaWN1bHTDqSBkZSB0b3VzIGxlcyBzaG90cyAhLlxuICAgKi9cbiAgYWRkU2hvdEF0Q3VycmVudFRhcmdldCAoKSB7XG4gICAgdGhpcy5jYWxjVGFyZ2V0c0RpZmZpY3VsdHkoKVxuICAgIGNvbnN0IHNob3QgPSB7XG4gICAgICB0YXJnZXQ6IHRoaXMuYWN0aXZlVGFyZ2V0LFxuICAgICAgZXh0cmVtZVJhbmdlOiB0aGlzLmFjdGl2ZVRhcmdldC5leHRyZW1lUmFuZ2UsXG4gICAgICBhY3RvcktleTogdGhpcy5hY3RpdmVUYXJnZXQuYWN0b3JLZXksXG4gICAgICBhY3Rvck5hbWU6IHRoaXMuYWN0aXZlVGFyZ2V0Lm5hbWUsXG4gICAgICBkaWZmaWN1bHR5OiB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5sZXZlbCxcbiAgICAgIG1vZGlmaWVyOiB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5tb2RpZmllcixcbiAgICAgIGRhbWFnZTogdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkuZGFtYWdlLFxuICAgICAgYnVsbGV0c1Nob3Q6IDEsXG4gICAgICB0cmFuc2l0QnVsbGV0czogMCxcbiAgICAgIGJ1bGxldHNTaG90VHJhbnNpdDogMSxcbiAgICAgIHRyYW5zaXQ6IGZhbHNlXG4gICAgfVxuXG4gICAgbGV0IGJ1bGxldExlZnQgPSB0aGlzLnRvdGFsQW1tbyAtIHRoaXMudG90YWxCdWxsZXRzRmlyZWRcblxuICAgIGlmICh0aGlzLmZ1bGxBdXRvKSB7XG4gICAgICBpZiAodGhpcy5jdXJyZW50U2hvdFJhbmsgPiAxKSB7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzU2hvdCA9IHRoaXMuc2hvdHNbdGhpcy5jdXJyZW50U2hvdFJhbmsgLSAyXVxuICAgICAgICBpZiAocHJldmlvdXNTaG90LmFjdG9yS2V5ICE9PSB0aGlzLmFjdGl2ZVRhcmdldC5hY3RvcktleSkge1xuICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gY2hhdEhlbHBlci5nZXREaXN0YW5jZShcbiAgICAgICAgICAgIGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHByZXZpb3VzU2hvdC5hY3RvcktleSksXG4gICAgICAgICAgICBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmFjdGl2ZVRhcmdldC5hY3RvcktleSlcbiAgICAgICAgICApXG4gICAgICAgICAgc2hvdC50cmFuc2l0QnVsbGV0cyA9IE1hdGguZmxvb3IoY2hhdEhlbHBlci50b1lhcmRzKGRpc3RhbmNlKSlcbiAgICAgICAgICBpZiAoc2hvdC50cmFuc2l0QnVsbGV0cyA+PSBidWxsZXRMZWZ0ICYmICF0aGlzLmlnbm9yZUFtbW8pIHtcbiAgICAgICAgICAgIHNob3QudHJhbnNpdEJ1bGxldHMgPSBidWxsZXRMZWZ0XG4gICAgICAgICAgICBidWxsZXRMZWZ0ID0gMFxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkID1cbiAgICAgICAgICAgIHBhcnNlSW50KHRoaXMudG90YWxCdWxsZXRzRmlyZWQpICsgc2hvdC50cmFuc2l0QnVsbGV0c1xuICAgICAgICAgIHNob3QudHJhbnNpdCA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc2hvdC5idWxsZXRzU2hvdCA9IHRoaXMudm9sbGV5U2l6ZVxuICAgICAgaWYgKHNob3QuYnVsbGV0c1Nob3QgPD0gMykgc2hvdC5idWxsZXRzU2hvdCA9IDNcbiAgICAgIGlmIChzaG90LmJ1bGxldHNTaG90ID49IGJ1bGxldExlZnQgJiYgIXRoaXMuaWdub3JlQW1tbykge1xuICAgICAgICBzaG90LmJ1bGxldHNTaG90ID0gYnVsbGV0TGVmdFxuICAgICAgICBidWxsZXRMZWZ0ID0gMFxuICAgICAgfVxuICAgICAgLy8gYnVsbGV0c1Nob3RUcmFuc2l0IGlzIGZvciBsb2NhbGl6aW5nIENvQzcuU2hvdEJ1bGxldHMgdXNpbmcgcGFyYW1ldGVycywgbG9jYWxpemUgZG9lcyBub3QgYWNjZXB0IGFkZGluZyBhIHBhcmFtZXRlciBhcyBhIHN1bSBvZiBzaG90LmJ1bGxldHNTaG90ICsgc2hvdC50cmFuc2l0QnVsbGV0cywgc28gSSBjcmVhdGUgYSBuZXcgdmFsdWUgaW4gYWR2YW5jZSB0byB1c2UgaW5zdGVhZFxuICAgICAgc2hvdC5idWxsZXRzU2hvdFRyYW5zaXQgPSBzaG90LmJ1bGxldHNTaG90ICsgc2hvdC50cmFuc2l0QnVsbGV0c1xuICAgIH1cbiAgICBpZiAodGhpcy5idXJzdCkge1xuICAgICAgc2hvdC5idWxsZXRzU2hvdCA9IHBhcnNlSW50KHRoaXMud2VhcG9uLmRhdGEuZGF0YS51c2VzUGVyUm91bmQuYnVyc3QpXG4gICAgICAgID8gcGFyc2VJbnQodGhpcy53ZWFwb24uZGF0YS5kYXRhLnVzZXNQZXJSb3VuZC5idXJzdClcbiAgICAgICAgOiAxXG4gICAgICBpZiAoc2hvdC5idWxsZXRzU2hvdCA+PSBidWxsZXRMZWZ0ICYmICF0aGlzLmlnbm9yZUFtbW8pIHtcbiAgICAgICAgc2hvdC5idWxsZXRzU2hvdCA9IGJ1bGxldExlZnRcbiAgICAgICAgYnVsbGV0TGVmdCA9IDBcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkID0gcGFyc2VJbnQodGhpcy50b3RhbEJ1bGxldHNGaXJlZCkgKyBzaG90LmJ1bGxldHNTaG90XG5cbiAgICBpZiAodGhpcy5haW1pbmcpIHtcbiAgICAgIHRoaXMuYWltaW5nID0gZmFsc2VcbiAgICAgIHRoaXMuYWltZWQgPSB0cnVlXG4gICAgfVxuXG4gICAgdGhpcy5zaG90cy5wdXNoKHNob3QpXG4gIH1cblxuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NvbWJhdC9yYW5nZS1pbml0aWF0b3IuaHRtbCdcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUNoYXRDYXJkICgpIHtcbiAgICB0aGlzLmNhbGNUYXJnZXRzRGlmZmljdWx0eSgpXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXG5cbiAgICAvLyBjb25zdCBlbGVtZW50ID0gJChodG1sKVswXTtcbiAgICAvLyBjb25zdCB0YXJnZXRFbGVtZW50ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcudGFyZ2V0VGVzdCcpO1xuICAgIC8vIHRoaXMudGFyZ2V0LmF0dGFjaFRvRWxlbWVudCh0YXJnZXRFbGVtZW50KTtcbiAgICBjb25zdCBzcGVha2VyRGF0YSA9IHt9XG4gICAgY29uc3QgdG9rZW4gPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICAgIGlmICh0b2tlbikgc3BlYWtlckRhdGEudG9rZW4gPSB0b2tlbi5kb2N1bWVudFxuICAgIGVsc2Ugc3BlYWtlckRhdGEuYWN0b3IgPSB0aGlzLmFjdG9yXG5cbiAgICBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcihzcGVha2VyRGF0YSlcbiAgICAvLyBpZiggdGhpcy5hY3Rvci5pc1Rva2VuKSBzcGVha2VyLmFsaWFzID0gdGhpcy5hY3Rvci50b2tlbi5uYW1lO1xuXG4gICAgY29uc3QgdXNlciA9IHRoaXMuYWN0b3IudXNlciA/IHRoaXMuYWN0b3IudXNlciA6IGdhbWUudXNlclxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgIHNwZWFrZXIsXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfVxuXG4gICAgY29uc3Qgcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHJvbGxNb2RlKSkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgfVxuICAgIC8vIGlmICggcm9sbE1vZGUgPT09ICdibGluZHJvbGwnICkgY2hhdERhdGFbJ2JsaW5kJ10gPSB0cnVlO1xuICAgIGNoYXREYXRhLmJsaW5kID0gZmFsc2VcblxuICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKVxuXG4gICAgcmV0dXJuIGNoYXRNZXNzYWdlXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgdGhpcy5jYWxjVGFyZ2V0c0RpZmZpY3VsdHkoKVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoeyBjb250ZW50OiBodG1sIH0pXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG5cbiAgdG9nZ2xlRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBjb25zdCBmbGFnID0gZmxhZ05hbWUuaW5jbHVkZXMoJy0nKVxuICAgICAgPyBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWdOYW1lKVxuICAgICAgOiBmbGFnTmFtZVxuICAgIGlmIChcbiAgICAgIGZsYWcgPT09ICdzaW5nbGVTaG90JyB8fFxuICAgICAgZmxhZyA9PT0gJ211bHRpcGxlU2hvdHMnIHx8XG4gICAgICBmbGFnID09PSAnZnVsbEF1dG8nXG4gICAgKSB7XG4gICAgICB0aGlzLnNpbmdsZVNob3QgPSBmYWxzZVxuICAgICAgdGhpcy5tdWx0aXBsZVNob3RzID0gZmFsc2VcbiAgICAgIHRoaXMuZnVsbEF1dG8gPSBmYWxzZVxuICAgICAgaWYgKGZsYWcgPT09ICdmdWxsQXV0bycpIHRoaXMuYnVyc3QgPSBmYWxzZVxuICAgICAgdGhpc1tmbGFnXSA9IHRydWVcbiAgICB9IGVsc2UgaWYgKGZsYWcgPT09ICdidXJzdCcpIHtcbiAgICAgIHRoaXMuZnVsbEF1dG8gPSBmYWxzZVxuICAgICAgaWYgKCF0aGlzLnNpbmdsZVNob3QgJiYgIXRoaXMubXVsdGlwbGVTaG90cykgdGhpcy5zaW5nbGVTaG90ID0gdHJ1ZVxuICAgICAgdGhpcy5idXJzdCA9ICF0aGlzLmJ1cnN0XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXNbZmxhZ10gPSAhdGhpc1tmbGFnXVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlc29sdmVDYXJkICgpIHtcbiAgICB0aGlzLnJvbGxzID0gW11cbiAgICBpZiAodGhpcy5tdWx0aVRhcmdldCkge1xuICAgICAgbGV0IHdlYXBvbk1hbGZ1bmN0aW9uID0gZmFsc2VcbiAgICAgIGxldCBpbmRleCA9IDBcbiAgICAgIHdoaWxlICghd2VhcG9uTWFsZnVuY3Rpb24gJiYgdGhpcy5zaG90cy5sZW5ndGggPiBpbmRleCkge1xuICAgICAgICBjb25zdCByb2xsID0gYXdhaXQgdGhpcy5zaG9vdEF0VGFyZ2V0KHRoaXMuc2hvdHNbaW5kZXhdKVxuICAgICAgICBpZiAocm9sbC5kaWNlPy5yb2xsKSB7XG4gICAgICAgICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2Qocm9sbC5kaWNlLnJvbGwpXG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy53ZWFwb24uc2hvb3RCdWxsZXRzKFxuICAgICAgICAgIHBhcnNlSW50KHRoaXMuc2hvdHNbaW5kZXhdLmJ1bGxldHNTaG90KSArXG4gICAgICAgICAgICBwYXJzZUludCh0aGlzLnNob3RzW2luZGV4XS50cmFuc2l0QnVsbGV0cylcbiAgICAgICAgKVxuICAgICAgICBpZiAocm9sbC5oYXNNYWxmdW5jdGlvbikge1xuICAgICAgICAgIHJvbGwuaXNTdWNjZXNzID0gZmFsc2VcbiAgICAgICAgICB3ZWFwb25NYWxmdW5jdGlvbiA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpbmRleCsrXG4gICAgICAgIHRoaXMucm9sbHMucHVzaChyb2xsKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByb2xsID0gYXdhaXQgdGhpcy5zaG9vdEF0VGFyZ2V0KClcbiAgICAgIGlmIChyb2xsLmRpY2U/LnJvbGwpIHtcbiAgICAgICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2Qocm9sbC5kaWNlLnJvbGwpXG4gICAgICB9XG4gICAgICBsZXQgYnVsbGV0RmlyZWQgPSB0aGlzLmJ1cnN0XG4gICAgICAgID8gcGFyc2VJbnQodGhpcy53ZWFwb24uZGF0YS5kYXRhLnVzZXNQZXJSb3VuZC5idXJzdClcbiAgICAgICAgOiAxXG4gICAgICBpZiAoYnVsbGV0RmlyZWQgPj0gdGhpcy50b3RhbEFtbW8pIGJ1bGxldEZpcmVkID0gdGhpcy50b3RhbEFtbW9cbiAgICAgIGNvbnN0IHNob3QgPSB7XG4gICAgICAgIHRhcmdldDogdGhpcy5hY3RpdmVUYXJnZXQsXG4gICAgICAgIGV4dHJlbWVSYW5nZTogdGhpcy5hY3RpdmVUYXJnZXQuZXh0cmVtZVJhbmdlLFxuICAgICAgICBhY3RvcktleTogdGhpcy5hY3RpdmVUYXJnZXQuYWN0b3JLZXksXG4gICAgICAgIGFjdG9yTmFtZTogdGhpcy5hY3RpdmVUYXJnZXQubmFtZSxcbiAgICAgICAgZGlmZmljdWx0eTogdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkubGV2ZWwsXG4gICAgICAgIG1vZGlmaWVyOiB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5tb2RpZmllcixcbiAgICAgICAgZGFtYWdlOiB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5kYW1hZ2UsXG4gICAgICAgIGJ1bGxldHNTaG90OiBidWxsZXRGaXJlZCxcbiAgICAgICAgdHJhbnNpdEJ1bGxldHM6IDAsXG4gICAgICAgIHRyYW5zaXQ6IGZhbHNlXG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLndlYXBvbi5zaG9vdEJ1bGxldHMoYnVsbGV0RmlyZWQpXG5cbiAgICAgIGlmIChyb2xsLmhhc01hbGZ1bmN0aW9uKSB7XG4gICAgICAgIHJvbGwuaXNTdWNjZXNzID0gZmFsc2VcbiAgICAgIH1cbiAgICAgIHRoaXMuc2hvdHMucHVzaChzaG90KVxuICAgICAgdGhpcy5yb2xscy5wdXNoKHJvbGwpXG4gICAgfVxuICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgdGhpcy5yb2xsZWQgPSB0cnVlXG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGFzeW5jIHNob290QXRUYXJnZXQgKHNob3QgPSBudWxsKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gc2hvdFxuICAgICAgPyB0aGlzLmdldFRhcmdldEZyb21LZXkoc2hvdC5hY3RvcktleSlcbiAgICAgIDogdGhpcy5hY3RpdmVUYXJnZXRcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIGNoZWNrLmFjdG9yS2V5ID0gdGhpcy5hY3RvcktleVxuICAgIGNoZWNrLmFjdG9yID0gdGhpcy5hY3RvcktleVxuICAgIGNoZWNrLml0ZW0gPSB0aGlzLml0ZW1JZFxuICAgIC8vIENvbWJhdCByb2xsIGNhbm5vdCBiZSBibGluZCBvciB1bmtub3duXG4gICAgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgY2hlY2suaXNVbmtvbnduID0gZmFsc2VcbiAgICBpZiAodGhpcy5hdXRvRmlyZSkgY2hlY2suc2tpbGwgPSB0aGlzLmF1dG9XZWFwb25Ta2lsbFxuICAgIGVsc2UgY2hlY2suc2tpbGwgPSB0aGlzLm1haW5XZWFwb25Ta2lsbFxuICAgIGlmICh0aGlzLm11bHRpVGFyZ2V0KSB7XG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gc2hvdC5kaWZmaWN1bHR5XG4gICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBzaG90Lm1vZGlmaWVyXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY2FsY1RhcmdldHNEaWZmaWN1bHR5KClcbiAgICAgIHRoaXMudG90YWxCdWxsZXRzRmlyZWQgPSBwYXJzZUludCh0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkKSArIDFcbiAgICAgIGlmICh0aGlzLmFpbWluZykge1xuICAgICAgICB0aGlzLmFpbWluZyA9IGZhbHNlXG4gICAgICAgIHRoaXMuYWltZWQgPSB0cnVlXG4gICAgICB9XG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkubGV2ZWxcbiAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IHRoaXMuYWN0aXZlVGFyZ2V0LnNob3REaWZmaWN1bHR5Lm1vZGlmaWVyXG4gICAgfVxuXG4gICAgY2hlY2suZGV0YWlscyA9IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5UYXJnZXQnKX06ICR7dGFyZ2V0Lm5hbWV9YFxuICAgIGNoZWNrLnRhcmdldEtleSA9IHRhcmdldC5hY3RvcktleVxuXG4gICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgcmV0dXJuIGNoZWNrXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybiBudWxsXG4gICAgY29uc3QgY2FyZCA9ICQobWVzc2FnZS5kYXRhLmNvbnRlbnQpWzBdXG5cbiAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZCwgbWVzc2FnZUlkKVxuICAgIGluaXRpYXRvci5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcblxuICAgIHJldHVybiBpbml0aWF0b3JcbiAgfVxuXG4gIGNoYW5nZVZvbGxleVNpemUgKHgpIHtcbiAgICB0aGlzLnZvbGxleVNpemUgPSB0aGlzLnZvbGxleVNpemUgKyB4XG4gICAgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBzdGF0aWMgdXBkYXRlQ2FyZFN3aXRjaCAoZXZlbnQsIHB1Ymxpc2hVcGRhdGUgPSB0cnVlKSB7XG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnJhbmdlLmluaXRpYXRvcicpXG4gICAgY29uc3QgZmxhZyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnXG4gICAgY29uc3QgY2FtZWxGbGFnID0gY2hhdEhlbHBlci5oeXBoZW5Ub0NhbWVsQ2FzZShmbGFnKVxuXG4gICAgLy8gdXBkYXRlIG9ubHkgZm9yIGxvY2FsIHBsYXllclxuICAgIGlmICghcHVibGlzaFVwZGF0ZSkge1xuICAgICAgY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ10gPSBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXSAhPT0gJ3RydWUnXG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ3N3aXRjaGVkLW9uJylcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5zZWxlY3RlZCA9IGNhcmQuZGF0YXNldFtjYW1lbEZsYWddXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHVwZGF0ZSBjYXJkIGZvciBhbGwgcGxheWVyXG4gICAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygndGFyZ2V0LWZsYWcnKSkge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy50YXJnZXQnKVxuICAgICAgICBjb25zdCBrZXkgPSBwYXJzZUludCh0YXJnZXQuZGF0YXNldC50YXJnZXRLZXkpXG4gICAgICAgIGluaXRpYXRvci50YXJnZXRzW2tleV0udG9nZ2xlRmxhZyhjYW1lbEZsYWcpXG4gICAgICB9IGVsc2UgaW5pdGlhdG9yLnRvZ2dsZUZsYWcoY2FtZWxGbGFnKVxuICAgICAgaW5pdGlhdG9yLnVwZGF0ZUNoYXRDYXJkKClcbiAgICB9XG4gIH1cblxuICBwYXNzUm9sbCAocm9sbEluZGV4KSB7XG4gICAgY29uc3Qgcm9sbCA9IHRoaXMucm9sbHNbcm9sbEluZGV4XVxuICAgIGNvbnN0IGx1Y2tBbW91bnQgPSBwYXJzZUludChyb2xsLmx1Y2tOZWVkZWQpXG4gICAgaWYgKCF0aGlzLmFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgYCR7dGhpcy5hY3Rvci5uYW1lfSBkb2VzIG5vdCBoYXZlIGVub3VnaCBsdWNrIHRvIHBhc3MgdGhlIGNoZWNrYFxuICAgICAgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHJvbGwuc3VjY2Vzc0xldmVsID0gcm9sbC5kaWZmaWN1bHR5XG4gICAgcm9sbC5pc1N1Y2Nlc3MgPSB0cnVlXG4gICAgcm9sbC5sdWNrU3BlbnQgPSB0cnVlXG4gICAgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICB1cGdyYWRlUm9sbCAocm9sbEluZGV4LCB1cGdyYWRlaW5kZXgpIHtcbiAgICAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICAgIGNvbnN0IHJvbGwgPSB0aGlzLnJvbGxzW3JvbGxJbmRleF1cbiAgICBjb25zdCBpbmNyZWFzZWRTdWNjZXNzID0gcm9sbC5pbmNyZWFzZVN1Y2Nlc3NbdXBncmFkZWluZGV4XVxuICAgIGNvbnN0IGx1Y2tBbW91bnQgPSBwYXJzZUludChpbmNyZWFzZWRTdWNjZXNzLmx1Y2tBbW91bnQpXG4gICAgaWYgKCF0aGlzLmFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgYCR7dGhpcy5hY3Rvci5uYW1lfSBkb2VzIG5vdCBoYXZlIGVub3VnaCBsdWNrIHRvIHBhc3MgdGhlIGNoZWNrYFxuICAgICAgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IG5ld1N1Y2Nlc3NMZXZlbCA9IHBhcnNlSW50KGluY3JlYXNlZFN1Y2Nlc3MubmV3U3VjY2Vzc0xldmVsKVxuICAgIHJvbGwuc3VjY2Vzc0xldmVsID0gbmV3U3VjY2Vzc0xldmVsXG4gICAgaWYgKHJvbGwuZGlmZmljdWx0eSA8PSBuZXdTdWNjZXNzTGV2ZWwpIHJvbGwuaXNTdWNjZXNzID0gdHJ1ZVxuICAgIHJvbGwubHVja1NwZW50ID0gdHJ1ZVxuICAgIHRoaXMudXBkYXRlQ2hhdENhcmQoKSAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICB9XG5cbiAgc3RhdGljIGdldEZyb21DYXJkIChjYXJkLCBtZXNzYWdlSWQgPSBudWxsKSB7XG4gICAgY29uc3QgcmFuZ2VJbml0aWF0b3IgPSBuZXcgQ29DN1JhbmdlSW5pdGlhdG9yKClcbiAgICByYW5nZUluaXRpYXRvci5fdGFyZ2V0cyA9IFtdXG4gICAgaWYgKG1lc3NhZ2VJZCkgcmFuZ2VJbml0aWF0b3IubWVzc2FnZUlkID0gbWVzc2FnZUlkXG4gICAgZWxzZSBpZiAoY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpKSB7XG4gICAgICByYW5nZUluaXRpYXRvci5tZXNzYWdlSWQgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykuZGF0YXNldC5tZXNzYWdlSWRcbiAgICB9XG5cbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KHJhbmdlSW5pdGlhdG9yLCBjYXJkKVxuICAgIGNvbnN0IGNhcmRUYXJnZXRzID0gY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCcudGFyZ2V0JylcbiAgICBmb3IgKGNvbnN0IHQgb2YgY2FyZFRhcmdldHMpIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IENvQzdSYW5nZVRhcmdldC5nZXRGcm9tRWxlbWVudCh0KVxuICAgICAgcmFuZ2VJbml0aWF0b3IudGFyZ2V0cy5wdXNoKHRhcmdldClcbiAgICB9XG5cbiAgICBjb25zdCBjYXJkU2hvdHMgPSBjYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zaG90JylcbiAgICBpZiAoY2FyZFNob3RzKSB7XG4gICAgICBmb3IgKGNvbnN0IHMgb2YgY2FyZFNob3RzKSB7XG4gICAgICAgIGNvbnN0IHNob3QgPSB7fVxuICAgICAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KHNob3QsIHMpXG4gICAgICAgIHJhbmdlSW5pdGlhdG9yLnNob3RzLnB1c2goc2hvdClcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gZWxzZSB7XG4gICAgLy8gIGNvbnN0IHNob3QgPSB7XG4gICAgLy8gICAgICBzaG90T3JkZXI6IDAsXG4gICAgLy8gICAgICBhY3RvcktleTogbnVsbCxcbiAgICAvLyAgICAgIGFjdG9yTmFtZTogJ2R1bW15J1xuICAgIC8vICB9XG4gICAgLy8gfVxuXG4gICAgcmFuZ2VJbml0aWF0b3Iucm9sbHMgPSBbXVxuICAgIGNvbnN0IHJvbGxzID0gY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCcucm9sbC1yZXN1bHQnKVxuICAgIGZvciAoY29uc3QgciBvZiByb2xscykge1xuICAgICAgY29uc3Qgcm9sbCA9IENvQzdSb2xsLmdldEZyb21FbGVtZW50KHIpXG4gICAgICByYW5nZUluaXRpYXRvci5yb2xscy5wdXNoKHJvbGwpXG4gICAgfVxuXG4gICAgcmFuZ2VJbml0aWF0b3IuZGFtYWdlID0gW11cbiAgICBjb25zdCBkYW1hZ2VSb2xscyA9IGNhcmQucXVlcnlTZWxlY3RvckFsbCgnLmRhbWFnZS1yZXN1bHRzJylcbiAgICBmb3IgKGNvbnN0IGRyIG9mIGRhbWFnZVJvbGxzKSB7XG4gICAgICBjb25zdCBkYW1hZ2VSb2xsID0gQ29DN0RhbWFnZS5nZXRGcm9tRWxlbWVudChkcilcbiAgICAgIHJhbmdlSW5pdGlhdG9yLmRhbWFnZS5wdXNoKGRhbWFnZVJvbGwpXG4gICAgfVxuXG4gICAgcmV0dXJuIHJhbmdlSW5pdGlhdG9yXG4gIH1cblxuICBhc3luYyByb2xsRGFtYWdlICgpIHtcbiAgICB0aGlzLmRhbWFnZSA9IFtdXG4gICAgY29uc3QgaGl0cyA9IHRoaXMuc3VjY2Vzc2Z1bEhpdHNcblxuICAgIC8vIGxldCB2b2xsZXlTaXplID0gMTtcbiAgICAvLyBpZiggdGhpcy5mdWxsQXV0bykge1xuICAgIC8vICB2b2xsZXlTaXplID0gdGhpcy52b2xsZXlTaXplO1xuICAgIC8vICBpZih2b2xsZXlTaXplIDwgMykgdm9sbGV5U2l6ZSA9IDM7XG4gICAgLy8gfVxuICAgIC8vIGlmKCB0aGlzLmJ1cnN0KSB2b2xsZXlTaXplID0gcGFyc2VJbnQodGhpcy53ZWFwb24uZGF0YS5kYXRhLnVzZXNQZXJSb3VuZC5idXJzdCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoaXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBoID0gaGl0c1tpXVxuICAgICAgY29uc3Qgdm9sbGV5U2l6ZSA9IHBhcnNlSW50KGguc2hvdC5idWxsZXRzU2hvdClcbiAgICAgIGNvbnN0IGRhbWFnZVJvbGxzID0gW11cblxuICAgICAgbGV0IGRhbWFnZUZvcm11bGEgPSBTdHJpbmcoaC5zaG90LmRhbWFnZSlcbiAgICAgIGlmICghZGFtYWdlRm9ybXVsYSB8fCBkYW1hZ2VGb3JtdWxhID09PSAnJykgZGFtYWdlRm9ybXVsYSA9ICcwJ1xuICAgICAgY29uc3QgZGFtYWdlRGllID0gQ29DN0RhbWFnZS5nZXRNYWluRGllKGRhbWFnZUZvcm11bGEpXG4gICAgICBjb25zdCBtYXhEYW1hZ2UgPSBuZXcgUm9sbChkYW1hZ2VGb3JtdWxhKS5ldmFsdWF0ZSh7XG4gICAgICAgIG1heGltaXplOiB0cnVlXG4gICAgICB9KS50b3RhbFxuICAgICAgY29uc3QgY3JpdGljYWxEYW1hZ2VGb3JtdWxhID0gdGhpcy53ZWFwb24uaW1wYWxlXG4gICAgICAgID8gYCR7ZGFtYWdlRm9ybXVsYX0gKyAke21heERhbWFnZX1gXG4gICAgICAgIDogYCR7bWF4RGFtYWdlfWBcbiAgICAgIGNvbnN0IGNyaXRpY2FsRGFtYWdlRGllID0gQ29DN0RhbWFnZS5nZXRNYWluRGllKGNyaXRpY2FsRGFtYWdlRm9ybXVsYSlcblxuICAgICAgbGV0IGltcGFsaW5nU2hvdHMgPSAwXG4gICAgICBsZXQgc3VjY2Vzc2Z1bFNob3RzID0gMFxuICAgICAgbGV0IGNyaXRpY2FsID0gZmFsc2VcbiAgICAgIGlmICh0aGlzLmZ1bGxBdXRvIHx8IHRoaXMuYnVyc3QpIHtcbiAgICAgICAgc3VjY2Vzc2Z1bFNob3RzID0gTWF0aC5mbG9vcih2b2xsZXlTaXplIC8gMilcbiAgICAgIH1cbiAgICAgIGlmIChzdWNjZXNzZnVsU2hvdHMgPT09IDApIHN1Y2Nlc3NmdWxTaG90cyA9IDFcbiAgICAgIGlmIChoLnJvbGwuc3VjY2Vzc0xldmVsID49IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZSkge1xuICAgICAgICBpbXBhbGluZ1Nob3RzID0gc3VjY2Vzc2Z1bFNob3RzXG4gICAgICAgIHN1Y2Nlc3NmdWxTaG90cyA9IHZvbGxleVNpemUgLSBpbXBhbGluZ1Nob3RzXG4gICAgICAgIGNyaXRpY2FsID0gdHJ1ZVxuICAgICAgICBpZiAoXG4gICAgICAgICAgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbCAhPT0gaC5yb2xsLnN1Y2Nlc3NMZXZlbCAmJlxuICAgICAgICAgIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWUgPD0gaC5yb2xsLmRpZmZpY3VsdHkgfHxcbiAgICAgICAgICAgIGguc2hvdC5leHRyZW1lUmFuZ2UpXG4gICAgICAgICkge1xuICAgICAgICAgIHN1Y2Nlc3NmdWxTaG90cyA9IHZvbGxleVNpemVcbiAgICAgICAgICBpbXBhbGluZ1Nob3RzID0gMFxuICAgICAgICAgIGNyaXRpY2FsID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsZXQgdG90YWwgPSAwXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgc3VjY2Vzc2Z1bFNob3RzOyBpbmRleCsrKSB7XG4gICAgICAgIGNvbnN0IHJvbGwgPSBuZXcgUm9sbChkYW1hZ2VGb3JtdWxhKVxuICAgICAgICAvKiogTU9ESUYgMC44LnggKiovXG4gICAgICAgIGF3YWl0IHJvbGwuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZChyb2xsKVxuICAgICAgICAvKioqKioqKioqKioqKioqKiovXG4gICAgICAgIGRhbWFnZVJvbGxzLnB1c2goe1xuICAgICAgICAgIGZvcm11bGE6IGRhbWFnZUZvcm11bGEsXG4gICAgICAgICAgdG90YWw6IHJvbGwudG90YWwsXG4gICAgICAgICAgZGllOiBkYW1hZ2VEaWUsXG4gICAgICAgICAgY3JpdGljYWw6IGZhbHNlXG4gICAgICAgIH0pXG4gICAgICAgIHRvdGFsICs9IHJvbGwudG90YWxcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBpbXBhbGluZ1Nob3RzOyBpbmRleCsrKSB7XG4gICAgICAgIGNvbnN0IHJvbGwgPSBuZXcgUm9sbChjcml0aWNhbERhbWFnZUZvcm11bGEpXG4gICAgICAgIC8qKiBNT0RJRiAwLjgueCAqKi9cbiAgICAgICAgYXdhaXQgcm9sbC5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHJvbGwpXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKi9cbiAgICAgICAgZGFtYWdlUm9sbHMucHVzaCh7XG4gICAgICAgICAgZm9ybXVsYTogY3JpdGljYWxEYW1hZ2VGb3JtdWxhLFxuICAgICAgICAgIHRvdGFsOiByb2xsLnRvdGFsLFxuICAgICAgICAgIGRpZTogY3JpdGljYWxEYW1hZ2VEaWUsXG4gICAgICAgICAgY3JpdGljYWw6IHRydWVcbiAgICAgICAgfSlcbiAgICAgICAgdG90YWwgKz0gcm9sbC50b3RhbFxuICAgICAgfVxuXG4gICAgICBsZXQgdGFyZ2V0TmFtZSA9ICdkdW1teSdcbiAgICAgIGxldCB0YXJnZXQgPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleShoLnJvbGwudGFyZ2V0S2V5KVxuICAgICAgaWYgKCF0YXJnZXQpIHRhcmdldCA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KGgucm9sbC50YXJnZXRLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgaWYgKHRhcmdldCkgdGFyZ2V0TmFtZSA9IHRhcmdldC5uYW1lXG5cbiAgICAgIHRoaXMuZGFtYWdlLnB1c2goe1xuICAgICAgICB0YXJnZXRLZXk6IGgucm9sbC50YXJnZXRLZXksXG4gICAgICAgIHRhcmdldE5hbWU6IHRhcmdldE5hbWUsXG4gICAgICAgIHJvbGxzOiBkYW1hZ2VSb2xscyxcbiAgICAgICAgdG90YWw6IHRvdGFsLFxuICAgICAgICBjcml0aWNhbDogY3JpdGljYWwsXG4gICAgICAgIGRlYWx0OiBmYWxzZSxcbiAgICAgICAgcmVzdWx0U3RyaW5nOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LnJhbmdlQ29tYmF0RGFtYWdlJywge1xuICAgICAgICAgIG5hbWU6IHRhcmdldE5hbWUsXG4gICAgICAgICAgdG90YWw6IHRvdGFsXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH1cblxuICAgIHRoaXMuZGFtYWdlUm9sbGVkID0gdGhpcy5kYW1hZ2UubGVuZ3RoICE9PSAwXG4gICAgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBhc3luYyBkZWFsRGFtYWdlICgpIHtcbiAgICBmb3IgKGxldCBkSW5kZXggPSAwOyBkSW5kZXggPCB0aGlzLmRhbWFnZS5sZW5ndGg7IGRJbmRleCsrKSB7XG4gICAgICBjb25zdCBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuZGFtYWdlW2RJbmRleF0udGFyZ2V0S2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGlmIChhY3RvciA9PT0gbnVsbCkge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob1RhcmdldFRvRGFtYWdlJykpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnRvdGFsVGFrZW4gPSAwXG4gICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0udG90YWxBYnNvcmJlZCA9IDBcbiAgICAgICAgZm9yIChcbiAgICAgICAgICBsZXQgckluZGV4ID0gMDtcbiAgICAgICAgICBySW5kZXggPCB0aGlzLmRhbWFnZVtkSW5kZXhdLnJvbGxzLmxlbmd0aDtcbiAgICAgICAgICBySW5kZXgrK1xuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBkZWFsdEFtb3VudCA9IGF3YWl0IGFjdG9yLmRlYWxEYW1hZ2UoXG4gICAgICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnJvbGxzW3JJbmRleF0udG90YWxcbiAgICAgICAgICApXG4gICAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS50b3RhbFRha2VuICs9IGRlYWx0QW1vdW50XG4gICAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS5yb2xsc1tySW5kZXhdLnRha2VuID0gZGVhbHRBbW91bnRcbiAgICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnJvbGxzW3JJbmRleF0uYWJzb3JiZWQgPVxuICAgICAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS5yb2xsc1tySW5kZXhdLnRvdGFsIC0gZGVhbHRBbW91bnRcbiAgICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnRvdGFsQWJzb3JiZWQgKz1cbiAgICAgICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0ucm9sbHNbckluZGV4XS50b3RhbCAtIGRlYWx0QW1vdW50XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS5kZWFsdCA9IHRydWVcbiAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICdDb0M3LnJhbmdlQ29tYmF0RGFtYWdlQXJtb3InLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuZGFtYWdlW2RJbmRleF0udGFyZ2V0TmFtZSxcbiAgICAgICAgICAgIHRvdGFsOiB0aGlzLmRhbWFnZVtkSW5kZXhdLnRvdGFsVGFrZW4sXG4gICAgICAgICAgICBhcm1vcjogdGhpcy5kYW1hZ2VbZEluZGV4XS50b3RhbEFic29yYmVkXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuZGFtYWdlRGVhbHQgPSB0cnVlXG4gICAgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvQzdSYW5nZVRhcmdldCB7XG4gIGNvbnN0cnVjdG9yIChhY3RvcktleSA9IG51bGwpIHtcbiAgICB0aGlzLmFjdG9yS2V5ID0gYWN0b3JLZXlcbiAgICB0aGlzLmNvdmVyID0gZmFsc2VcbiAgICB0aGlzLnBvaW50QmxhbmtSYW5nZSA9IGZhbHNlXG4gICAgdGhpcy5iYXNlUmFuZ2UgPSB0cnVlXG4gICAgdGhpcy5sb25nUmFuZ2UgPSBmYWxzZVxuICAgIHRoaXMuZXh0cmVtZVJhbmdlID0gZmFsc2VcbiAgICB0aGlzLmluTWVsZWUgPSBmYWxzZVxuICB9XG5cbiAgZ2V0IGJpZyAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5fYmlnKSB7XG4gICAgICBpZiAodGhpcy5hY3RvciAmJiB0aGlzLmFjdG9yLmJ1aWxkKSB0aGlzLl9iaWcgPSB0aGlzLmFjdG9yLmJ1aWxkID49IDRcbiAgICAgIGVsc2UgdGhpcy5fYmlnID0gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2JpZ1xuICB9XG5cbiAgc2V0IGJpZyAoYikge1xuICAgIHRoaXMuX2JpZyA9IGJcbiAgfVxuXG4gIGdldCBzbWFsbCAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5fc21hbGwpIHtcbiAgICAgIGlmICh0aGlzLmFjdG9yICYmIHRoaXMuYWN0b3IuYnVpbGQpIHRoaXMuX3NtYWxsID0gdGhpcy5hY3Rvci5idWlsZCA8PSAtMlxuICAgICAgZWxzZSB0aGlzLl9zbWFsbCA9IGZhbHNlXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9zbWFsbFxuICB9XG5cbiAgc2V0IHNtYWxsIChiKSB7XG4gICAgdGhpcy5fc21hbGwgPSBiXG4gIH1cblxuICBnZXQgbm9ybWFsICgpIHtcbiAgICByZXR1cm4gIXRoaXMuYmlnICYmICF0aGlzLnNtYWxsXG4gIH1cblxuICBzZXQgbm9ybWFsIChiKSB7XG4gICAgdGhpcy5fYmlnID0gZmFsc2VcbiAgICB0aGlzLl9zbWFsbCA9IGZhbHNlXG4gIH1cblxuICBnZXQgaXNGYXN0ICgpIHtcbiAgICBpZiAodGhpcy5hY3RvciAmJiB0aGlzLmFjdG9yLm1vdikgcmV0dXJuIHRoaXMuYWN0b3IubW92ID49IDhcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBmYXN0ICgpIHtcbiAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9mYXN0KSB7XG4gICAgICAvLyBpZiggdGhpcy5hY3RvciAmJiB0aGlzLmFjdG9yLm1vdikgdGhpcy5fZmFzdCA9IHRoaXMuYWN0b3IubW92ID49IDg7XG4gICAgICAvLyBlbHNlIHRoaXMuX2Zhc3QgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2Zhc3QgPSBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fZmFzdFxuICB9XG5cbiAgc2V0IGZhc3QgKGIpIHtcbiAgICB0aGlzLl9mYXN0ID0gYlxuICB9XG5cbiAgZ2V0IGFjdG9yICgpIHtcbiAgICBpZiAodGhpcy5hY3RvcktleSAmJiAhdGhpcy5fYWN0b3IpIHtcbiAgICAgIHRoaXMuX2FjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9hY3RvclxuICB9XG5cbiAgZ2V0IG5hbWUgKCkge1xuICAgIGlmICh0aGlzLnRva2VuKSByZXR1cm4gdGhpcy50b2tlbi5uYW1lXG4gICAgaWYgKHRoaXMuYWN0b3IpIHJldHVybiB0aGlzLmFjdG9yLm5hbWVcbiAgICByZXR1cm4gJ0R1bW15J1xuICB9XG5cbiAgZ2V0IGltZyAoKSB7XG4gICAgaWYgKHRoaXMudG9rZW4pIHJldHVybiB0aGlzLnRva2VuLmRhdGEuaW1nXG4gICAgaWYgKHRoaXMuYWN0b3IpIHJldHVybiB0aGlzLmFjdG9yLmRhdGEuaW1nXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xuICB9XG5cbiAgZ2V0IHRva2VuICgpIHtcbiAgICBpZiAoIXRoaXMuX3Rva2VuICYmIHRoaXMuYWN0b3JLZXkpIHtcbiAgICAgIHRoaXMuX3Rva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RvcktleSlcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3Rva2VuXG4gIH1cblxuICBnZXQgc2l6ZVRleHQgKCkge1xuICAgIGlmICh0aGlzLmJpZykge1xuICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5yYW5nZUNvbWJhdENhcmQuQmlnVGFyZ2V0VGl0bGUnKVxuICAgIH1cbiAgICBpZiAodGhpcy5zbWFsbCkge1xuICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5yYW5nZUNvbWJhdENhcmQuU21hbGxUYXJnZXRUaXRsZScpXG4gICAgfVxuICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucmFuZ2VDb21iYXRDYXJkLk5vcm1hbFRhcmdldFRpdGxlJylcbiAgfVxuXG4gIGdldCBzaXplTGFiZWwgKCkge1xuICAgIGlmICh0aGlzLmJpZykgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5yYW5nZUNvbWJhdENhcmQuQmlnVGFyZ2V0JylcbiAgICBpZiAodGhpcy5zbWFsbCkgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5jb21iYXRDYXJkLlNtYWxsVGFyZ2V0JylcbiAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LnJhbmdlQ29tYmF0Q2FyZC5Ob3JtYWxUYXJnZXQnKVxuICB9XG5cbiAgZ2V0IGRpZmZpY3VsdHkgKCkge1xuICAgIGlmICh0aGlzLmJhc2VSYW5nZSB8fCB0aGlzLnBvaW50QmxhbmtSYW5nZSkge1xuICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIH1cbiAgICBpZiAodGhpcy5sb25nUmFuZ2UpIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmRcbiAgICBpZiAodGhpcy5leHRyZW1lUmFuZ2UpIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWVcbiAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5pbXBvc3NpYmxlXG4gIH1cblxuICBnZXQgbW9kaWZpZXIgKCkge1xuICAgIGxldCBtb2RpZmllciA9IDBcbiAgICBpZiAodGhpcy5jb3ZlcikgbW9kaWZpZXItLVxuICAgIGlmICh0aGlzLnBvaW50QmxhbmtSYW5nZSkgbW9kaWZpZXIrK1xuICAgIGlmICh0aGlzLmZhc3QpIG1vZGlmaWVyLS1cbiAgICBpZiAodGhpcy5zbWFsbCkgbW9kaWZpZXItLVxuICAgIGlmICh0aGlzLmJpZykgbW9kaWZpZXIrK1xuICAgIGlmICh0aGlzLmluTWVsZWUpIG1vZGlmaWVyLS1cbiAgICBpZiAodGhpcy5zdXJwcmlzZWQpIG1vZGlmaWVyKytcbiAgICByZXR1cm4gbW9kaWZpZXJcbiAgfVxuXG4gIHNldCB0b2tlbiAodCkge1xuICAgIHRoaXMuX3Rva2VuID0gdFxuICB9XG5cbiAgc3RhdGljIGdldEZyb21FbGVtZW50IChlbGVtZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gbmV3IENvQzdSYW5nZVRhcmdldCgpXG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudCh0YXJnZXQsIGVsZW1lbnQpXG4gICAgcmV0dXJuIHRhcmdldFxuICB9XG5cbiAgc3RhdGljIGNoYW5nZURpc3BsYXllZFRhcmdldCAoZXZlbnQpIHtcbiAgICBpZiAoIWV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXJnZXQtc2VsZWN0b3InKSkgcmV0dXJuIG51bGxcbiAgICBjb25zdCB0YXJnZXRTZWxlY3RvciA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCB0YXJnZXRzID0gdGFyZ2V0U2VsZWN0b3IuY2xvc2VzdCgnLnRhcmdldHMnKVxuICAgIGNvbnN0IHRhcmdldExpc3QgPSB0YXJnZXRzLnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXJnZXQnKVxuICAgIHJldHVybiB0YXJnZXRMaXN0XG4gIH1cblxuICBhdHRhY2hUb0VsZW1lbnQgKGVsZW1lbnQpIHtcbiAgICBjaGF0SGVscGVyLmF0dGFjaE9iamVjdFRvRWxlbWVudCh0aGlzLCBlbGVtZW50KVxuICB9XG5cbiAgdG9nZ2xlRmxhZyAoZmxhZykge1xuICAgIGlmIChcbiAgICAgIGZsYWcgPT09ICdiYXNlUmFuZ2UnIHx8XG4gICAgICBmbGFnID09PSAnbG9uZ1JhbmdlJyB8fFxuICAgICAgZmxhZyA9PT0gJ2V4dHJlbWVSYW5nZScgfHxcbiAgICAgIGZsYWcgPT09ICdwb2ludEJsYW5rUmFuZ2UnXG4gICAgKSB7XG4gICAgICB0aGlzLnBvaW50QmxhbmtSYW5nZSA9IGZhbHNlXG4gICAgICB0aGlzLmJhc2VSYW5nZSA9IGZhbHNlXG4gICAgICB0aGlzLmxvbmdSYW5nZSA9IGZhbHNlXG4gICAgICB0aGlzLmV4dHJlbWVSYW5nZSA9IGZhbHNlXG4gICAgICB0aGlzLm91dE9mUmFuZ2UgPSBmYWxzZVxuICAgICAgdGhpc1tmbGFnXSA9IHRydWVcbiAgICB9IGVsc2UgaWYgKGZsYWcgPT09ICdzaXplJykge1xuICAgICAgaWYgKHRoaXMuc21hbGwpIHtcbiAgICAgICAgdGhpcy5zbWFsbCA9IGZhbHNlXG4gICAgICAgIHRoaXMuYmlnID0gdHJ1ZVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmJpZykge1xuICAgICAgICB0aGlzLnNtYWxsID0gZmFsc2VcbiAgICAgICAgdGhpcy5iaWcgPSBmYWxzZVxuICAgICAgfSBlbHNlIHRoaXMuc21hbGwgPSB0cnVlXG4gICAgfSBlbHNlIHRoaXNbZmxhZ10gPSAhdGhpc1tmbGFnXVxuICAgIGlmIChmbGFnID09PSAnZmFzdCcgJiYgdGhpcy5mYXN0ICYmICF0aGlzLmlzRmFzdCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldhcm5GYXN0VGFyZ2V0V2l0aFdyb25nTU9WJywge1xuICAgICAgICAgIG1vdjogdGhpcy5hY3Rvci5tb3ZcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDaGF0TWVzc2FnZSwgZGlmZk9iamVjdCwgZXhwYW5kT2JqZWN0LCBGb3JtRGF0YUV4dGVuZGVkLCBnYW1lLCBtZXJnZU9iamVjdCwgcmVuZGVyVGVtcGxhdGUsIHVpICovXG5cbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuL2hlbHBlci5qcydcblxuZXhwb3J0IGNsYXNzIEludGVyYWN0aXZlQ2hhdENhcmQge1xuICBjb25zdHJ1Y3RvciAob3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnNcbiAgfVxuXG4gIGdldCBvcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3QodGhpcy5jb25zdHJ1Y3Rvci5kZWZhdWx0T3B0aW9ucywgdGhpcy5fb3B0aW9ucylcbiAgfVxuXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy50ZW1wbGF0ZVxuICB9XG5cbiAgZ2V0IGNzc0NsYXNzZXMgKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuY2xhc3Nlc1xuICB9XG5cbiAgYXN5bmMgdG9NZXNzYWdlIChvcHRpb25uYWxDaGF0RGF0YSA9IHt9KSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXG4gICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gJChodG1sKVswXVxuICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLmRhdGFTdHJpbmcpXG4gICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQuY2FyZENsYXNzID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lXG4gICAgaHRtbENhcmRFbGVtZW50LmNsYXNzTGlzdC5hZGQoLi4udGhpcy5jc3NDbGFzc2VzKVxuXG4gICAgY29uc3QgY2hhdERhdGEgPSBtZXJnZU9iamVjdChcbiAgICAgIHtcbiAgICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgICBmbGF2b3I6IGdhbWUuaTE4bi5sb2NhbGl6ZSh0aGlzLm9wdGlvbnMudGl0bGUpLFxuICAgICAgICBjb250ZW50OiBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MXG4gICAgICB9LFxuICAgICAgb3B0aW9ubmFsQ2hhdERhdGFcbiAgICApXG5cbiAgICBpZiAoWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXModGhpcy5yb2xsTW9kZSkpIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKVxuICAgIH1cbiAgICBpZiAodGhpcy5yb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCcpIGNoYXREYXRhLmJsaW5kID0gdHJ1ZVxuXG4gICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKS50aGVuKG1zZyA9PiB7XG4gICAgICByZXR1cm4gbXNnXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUNoYXRDYXJkIChvcHRpb25zID0ge30pIHtcbiAgICBpZiAob3B0aW9ucy5jb21wdXRlKSB0aGlzLmNvbXB1dGUoKVxuICAgIGlmICghdGhpcy5tZXNzYWdlSWQpIHtcbiAgICAgIHRoaXMudG9NZXNzYWdlKClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXG4gICAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkLnBhcnNlSFRNTChodG1sKVswXVxuXG4gICAgICAvLyBBdHRhY2ggdGhlIHNhbkNoZWNrQ2FyZCBvYmplY3QgdG8gdGhlIG1lc3NhZ2UuXG4gICAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5vYmplY3QgPSBlc2NhcGUodGhpcy5kYXRhU3RyaW5nKVxuICAgICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQuY2FyZENsYXNzID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lXG4gICAgICBodG1sQ2FyZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCguLi50aGlzLmNzc0NsYXNzZXMpXG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgbWVzc2FnZS5cbiAgICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXG4gICAgICBpZiAodGhpcy5jbG9zZWQpIGF3YWl0IGNoYXRNZXNzYWdlLnNldEZsYWcoJ0NvQzcnLCAnc3RhdGUnLCAncmVzb2x2ZWQnKVxuXG4gICAgICBjb25zdCBtc2cgPSBhd2FpdCBjaGF0TWVzc2FnZS51cGRhdGUoe1xuICAgICAgICBjb250ZW50OiBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MXG4gICAgICB9KVxuICAgICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgICByZXR1cm4gbXNnXG4gICAgfVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcuaW50ZXJhY3RpdmUtY2FyZCAuaWMtcmFkaW8tc3dpdGNoJyxcbiAgICAgIHRoaXMuX29uVG9nZ2xlLmJpbmQodGhpcylcbiAgICApXG4gICAgaHRtbC5vbignY2xpY2snLCAnLmludGVyYWN0aXZlLWNhcmQgLmljLXN3aXRjaCcsIHRoaXMuX29uVG9nZ2xlLmJpbmQodGhpcykpXG4gICAgaHRtbC5vbignY2xpY2snLCAnLmludGVyYWN0aXZlLWNhcmQgLnN1Ym1pdCcsIHRoaXMuX29uU3VibWl0LmJpbmQodGhpcykpXG4gICAgaHRtbC5vbignZm9jdXNvdXQnLCAnaW5wdXQnLCB0aGlzLl9vblN1Ym1pdC5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2NsaWNrJywgJy5pbnRlcmFjdGl2ZS1jYXJkIGJ1dHRvbicsIHRoaXMuX29uQnV0dG9uLmJpbmQodGhpcykpXG4gICAgaHRtbC5vbigna2V5ZG93bicsICdmb3JtJywgdGhpcy5fb25LZXkuYmluZCh0aGlzKSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBiaW5kTGlzdGVuZXJzIChodG1sKSB7XG4gICAgY29uc3QgaHRtbE1lc3NhZ2VFbGVtZW50ID0gaHRtbFswXVxuICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9IGh0bWxNZXNzYWdlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhdC1jYXJkJylcbiAgICBpZiAoIWh0bWxDYXJkRWxlbWVudCkgcmV0dXJuXG4gICAgaWYgKFxuICAgICAgIU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGdhbWUuQ29DNy5jYXJkcykuaW5jbHVkZXMoXG4gICAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmNhcmRDbGFzc1xuICAgICAgKVxuICAgICkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCBJbnRlcmFjdGl2ZUNoYXRDYXJkLmZyb21IVE1MQ2FyZEVsZW1lbnQoaHRtbENhcmRFbGVtZW50KVxuICAgIGNvbnN0IHR5cGVkQ2FyZCA9IE9iamVjdC5hc3NpZ24oXG4gICAgICBuZXcgZ2FtZS5Db0M3LmNhcmRzW2h0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmNhcmRDbGFzc10oKSxcbiAgICAgIGNhcmRcbiAgICApXG4gICAgdHlwZWRDYXJkLmFzc2lnbk9iamVjdCgpXG4gICAgdHlwZWRDYXJkLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGUgdG8gcmVhc3NpZ24gb2JqZWN0IHR5cGVcbiAgICogQHJldHVybnNcbiAgICovXG4gIGFzc2lnbk9iamVjdCAoKSB7fVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGV2ZW50IHdpbGwgY2hlY2sgZm9yIGFuIGFjdGlvbiAoZGF0YS1hY3Rpb24pXG4gICAqIGlmIGEgbWV0aG9kIHdpdGggdGhhdCBuYW1lIGV4aXN0IGl0IHdpbGwgYmUgdHJpZ2dlcmVkLlxuICAgKi9cbiAgX29uQnV0dG9uIChldmVudCkge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAvLyBidXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJyAvL0F2b2lkIG11bHRpcGxlIHB1c2hcbiAgICBjb25zdCBhY3Rpb24gPSBidXR0b24uZGF0YXNldC5hY3Rpb25cbiAgICBpZiAodGhpc1thY3Rpb25dKSB0aGlzW2FjdGlvbl0oeyBldmVudDogZXZlbnQsIHVwZGF0ZTogdHJ1ZSB9KVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gZXZlbnRcbiAgICogQHJldHVybnMgZmFsc2UgaWYga2V5IGlzIGVudGVyIHRvIGF2b2lkIGdsb2JhbCBzdWJtaXNzaW9uXG4gICAqL1xuICBfb25LZXkgKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJykgdGhpcy5fb25TdWJtaXQoZXZlbnQpXG4gICAgcmV0dXJuIGV2ZW50LmtleSAhPT0gJ0VudGVyJ1xuICB9XG5cbiAgX29uU3VibWl0IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBjYXJkID0gdGFyZ2V0LmNsb3Nlc3QoJy5pbnRlcmFjdGl2ZS1jYXJkJylcbiAgICBpZiAoIWNhcmQpIHJldHVyblxuICAgIGNvbnN0IHVwZGF0ZXMgPSB0aGlzLl91cGRhdGUoY2FyZClcbiAgICBpZiAodXBkYXRlcykgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBfdXBkYXRlIChjYXJkKSB7XG4gICAgY29uc3QgZm9ybXMgPSBjYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoJ2Zvcm0nKVxuICAgIGxldCB1cGRhdGVzID0gZmFsc2VcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZvcm1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBmb3JtID0gZm9ybXNbaV1cbiAgICAgIGNvbnN0IGZkID0gbmV3IEZvcm1EYXRhRXh0ZW5kZWQoZm9ybSlcbiAgICAgIGxldCBkYXRhID0gZmQudG9PYmplY3QoKVxuICAgICAgZGF0YSA9IGRpZmZPYmplY3QodGhpcywgZXhwYW5kT2JqZWN0KGRhdGEpKVxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YSkpIHtcbiAgICAgICAgdGhpc1trZXldID0gdmFsdWVcbiAgICAgICAgdXBkYXRlcyA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZXNcbiAgfVxuXG4gIGdldCBtZXNzYWdlICgpIHtcbiAgICBpZiAodGhpcy5fbWVzc2FnZSkgcmV0dXJuIHRoaXMuX21lc3NhZ2VcbiAgICBpZiAodGhpcy5fbWVzc2FnZUlkKSByZXR1cm4gZ2FtZS5tZXNzYWdlLmdldCh0aGlzLl9tZXNzYWdlSWQpXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgc2V0IG1lc3NhZ2UgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlID0geFxuICB9XG5cbiAgZ2V0IG1lc3NhZ2VJZCAoKSB7XG4gICAgaWYgKHRoaXMuX21lc3NhZ2VJZCkgcmV0dXJuIHRoaXMuX21lc3NhZ2VJZFxuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZS5pZFxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHNldCBtZXNzYWdlSWQgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlSWQgPSB4XG4gIH1cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY2xhc3NlczogWydpbnRlcmFjdGl2ZS1jYXJkJ10sXG4gICAgICBleGNsdWRlOiBbJ19hY3RvcicsICdfc2tpbGwnLCAnX2l0ZW0nLCAnX21lc3NhZ2UnLCAnX2h0bWxSb2xsJ10sXG4gICAgICBleGNsdWRlU3RhcnRXaXRoOiAnX18nXG4gICAgfVxuICB9XG5cbiAgZ2V0IGRhdGEgKCkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKHRoaXMuZGF0YVN0cmluZylcbiAgfVxuXG4gIGdldCBkYXRhU3RyaW5nICgpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcywgKGtleSwgdmFsdWUpID0+IHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5leGNsdWRlPy5pbmNsdWRlcyhrZXkpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgodGhpcy5vcHRpb25zLmV4Y2x1ZGVTdGFydFdpdGgpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICByZXR1cm4gdmFsdWVcbiAgICB9KVxuICB9XG5cbiAgZ2V0IHJvbGxNb2RlICgpIHtcbiAgICBpZiAoIXRoaXMuX3JvbGxNb2RlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICByZXR1cm4gdGhpcy5fcm9sbE1vZGVcbiAgfVxuXG4gIHNldCByb2xsTW9kZSAoeCkge1xuICAgIGlmICh4ID09PSBmYWxzZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgdGhpcy5fcm9sbE1vZGUgPSB4XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5mcm9tTWVzc2FnZShtZXNzYWdlKVxuICAgIGNhcmQubWVzc2FnZUlkID0gbWVzc2FnZUlkXG4gICAgcmV0dXJuIGNhcmRcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tTWVzc2FnZSAobWVzc2FnZSkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gJChtZXNzYWdlLmRhdGEuY29udGVudClbMF1cbiAgICBpZiAoIWNhcmRFbGVtZW50KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IHRoaXMuZnJvbUhUTUxDYXJkRWxlbWVudChjYXJkRWxlbWVudClcbiAgICBjYXJkLm1lc3NhZ2UgPSBtZXNzYWdlXG4gICAgcmV0dXJuIGNhcmRcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tSFRNTENhcmRFbGVtZW50IChjYXJkKSB7XG4gICAgY29uc3QgY2FyZERhdGEgPSBKU09OLnBhcnNlKHVuZXNjYXBlKGNhcmQuZGF0YXNldC5vYmplY3QpKVxuICAgIGlmICghY2FyZERhdGEubWVzc2FnZUlkKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpXG4gICAgICBjYXJkRGF0YS5tZXNzYWdlSWQgPSBtZXNzYWdlPy5kYXRhc2V0Py5tZXNzYWdlSWRcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZnJvbURhdGEoY2FyZERhdGEpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbURhdGEgKGRhdGEpIHtcbiAgICBjb25zdCBjYXJkID0gT2JqZWN0LmFzc2lnbihuZXcgdGhpcygpLCBkYXRhKVxuICAgIGF3YWl0IGNhcmQuYXNzaWduT2JqZWN0KClcbiAgICByZXR1cm4gY2FyZFxuICB9XG5cbiAgLy8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIHNldEZsYWcgKGZsYWdOYW1lKSB7XG4gICAgaWYgKCFmbGFnTmFtZSAmJiAhKCQudHlwZShmbGFnTmFtZSkgPT09ICdzdHJpbmcnKSkgcmV0dXJuXG4gICAgdGhpc1tmbGFnTmFtZV0gPSB0cnVlXG4gIH1cblxuICB1bnNldEZsYWcgKGZsYWdOYW1lKSB7XG4gICAgaWYgKCFmbGFnTmFtZSAmJiAhKCQudHlwZShmbGFnTmFtZSkgPT09ICdzdHJpbmcnKSkgcmV0dXJuXG4gICAgdGhpc1tmbGFnTmFtZV0gPSBmYWxzZVxuICB9XG5cbiAgdG9nZ2xlRmxhZyAoZmxhZ05hbWUpIHtcbiAgICB0aGlzW2ZsYWdOYW1lXSA9ICF0aGlzW2ZsYWdOYW1lXVxuICB9XG5cbiAgYXN5bmMgX29uVG9nZ2xlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBpZiAoJ2FjdGlvbicgaW4gdGFyZ2V0LmRhdGFzZXQpIHJldHVybiB0aGlzLl9vbkJ1dHRvbihldmVudClcbiAgICBpZiAoXG4gICAgICB0YXJnZXQgJiZcbiAgICAgIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2dtLXNlbGVjdC1vbmx5JykgJiZcbiAgICAgICFnYW1lLnVzZXIuaXNHTVxuICAgICkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGZsYWcgPSB0YXJnZXQuZGF0YXNldC5mbGFnXG4gICAgaWYgKCFmbGFnKSByZXR1cm5cbiAgICBjb25zdCB0b2dnbGUgPSB0YXJnZXQuY2xvc2VzdCgnLmljLXJhZGlvJylcbiAgICBpZiAoIXRvZ2dsZSkge1xuICAgICAgdGhpcy50b2dnbGVGbGFnKGZsYWcpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGJ1dHRvbnMgPSB0b2dnbGUucXVlcnlTZWxlY3RvckFsbCgnLmljLXJhZGlvLXN3aXRjaCcpXG4gICAgICBmb3IgKGNvbnN0IGIgb2YgYnV0dG9ucykge1xuICAgICAgICB0aGlzLnVuc2V0RmxhZyhiLmRhdGFzZXQuZmxhZylcbiAgICAgIH1cbiAgICAgIHRoaXMuc2V0RmxhZyhmbGFnKVxuICAgIH1cbiAgICBjb25zdCBjYXJkID0gdGFyZ2V0LmNsb3Nlc3QoJy5pbnRlcmFjdGl2ZS1jYXJkJylcbiAgICBpZiAoY2FyZCkgdGhpcy5fdXBkYXRlKGNhcmQpXG4gICAgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICAvLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIGdldCBkaXNwbGF5QWN0b3JPbkNhcmQgKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNwbGF5QWN0b3JPbkNhcmQnKVxuICB9XG5cbiAgZ2V0IGlzQmxpbmQgKCkge1xuICAgIGlmICghdGhpcy5yb2xsTW9kZSkgcmV0dXJuIG51bGxcbiAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9pc0JsaW5kKSB7XG4gICAgICB0aGlzLl9pc0JsaW5kID0gdGhpcy5yb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCdcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2lzQmxpbmRcbiAgfVxuXG4gIHNldCBpc0JsaW5kICh4KSB7XG4gICAgdGhpcy5faXNCbGluZCA9IHhcbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgaWYgKCF0aGlzLmFjdG9yS2V5KSByZXR1cm4gbnVsbFxuICAgIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgfVxuXG4gIGdldCB0b2tlbiAoKSB7XG4gICAgaWYgKCF0aGlzLmFjdG9yKSByZXR1cm4gbnVsbFxuICAgIHJldHVybiBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICB9XG5cbiAgZ2V0IGl0ZW0gKCkge1xuICAgIGlmICghdGhpcy5pdGVtSWQpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMuaXRlbUlkKVxuICB9XG5cbiAgZ2V0IHdlYXBvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbVxuICB9XG5cbiAgZ2V0IHRhcmdldGVkVG9rZW5zICgpIHtcbiAgICByZXR1cm4gWy4uLmdhbWUudXNlci50YXJnZXRzXVxuICB9XG5cbiAgZ2V0IHRhcmdldCAoKSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0VG9rZW4pIHJldHVybiB0aGlzLnRhcmdldFRva2VuXG4gICAgcmV0dXJuIHRoaXMudGFyZ2V0QWN0b3JcbiAgfVxuXG4gIGdldCBpc1RhcmdldE93bmVyICgpIHtcbiAgICByZXR1cm4gdGhpcy50YXJnZXQuaXNPd25lclxuICB9XG5cbiAgZ2V0IGlzR00gKCkge1xuICAgIHJldHVybiBnYW1lLnVzZXIuaXNHTVxuICB9XG5cbiAgLyoqXG4gICAqIElmIGEgdGFyZ2V0S2V5IHdhcyBwcm92aWRlZCB0cnkgdG8gZmluZCBhIHRva2VuIHdpdGggdGhhdCBrZXkgYW5kIHVzZSBpdC5cbiAgICogSWYgbm90IHRhcmdldEtleSBwcm92aWRlZCByZXR1cm4gdGhlIGZpcnN0IHRhcmdldC5cbiAgICovXG4gIGdldCB0YXJnZXRUb2tlbiAoKSB7XG4gICAgaWYgKCF0aGlzLl90YXJnZXRUb2tlbikge1xuICAgICAgaWYgKHRoaXMuX3RhcmdldEtleSkge1xuICAgICAgICB0aGlzLl90YXJnZXRUb2tlbiA9IGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMuX3RhcmdldEtleSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3RhcmdldFRva2VuID0gdGhpcy50YXJnZXRlZFRva2Vucy5wb3AoKVxuICAgICAgICBpZiAodGhpcy5fdGFyZ2V0VG9rZW4pIHtcbiAgICAgICAgICB0aGlzLl90YXJnZXRLZXkgPSBgJHt0aGlzLl90YXJnZXRUb2tlbi5zY2VuZS5pZH0uJHt0aGlzLl90YXJnZXRUb2tlbi5pZH1gXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICAgICAgdGhpcy5fdGFyZ2V0VG9rZW4gPSBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldFRva2VuXG4gIH1cblxuICBnZXQgdGFyZ2V0QWN0b3IgKCkge1xuICAgIGlmICghdGhpcy5fdGFyZ2V0QWN0b3IpIHtcbiAgICAgIGlmICh0aGlzLnRhcmdldFRva2VuKSB7XG4gICAgICAgIHRoaXMuX3RhcmdldEFjdG9yID1cbiAgICAgICAgICB0aGlzLnRhcmdldFRva2VuLmFjdG9yIHx8XG4gICAgICAgICAgdGhpcy50YXJnZXRUb2tlbi5kYXRhLmFjdG9yIHx8XG4gICAgICAgICAgdGhpcy50YXJnZXRUb2tlbi5kYXRhLmRvY3VtZW50XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl90YXJnZXRBY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuX3RhcmdldEtleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl90YXJnZXRBY3RvclxuICB9XG5cbiAgZ2V0IHRhcmdldEtleSAoKSB7XG4gICAgaWYgKCF0aGlzLnRhcmdldFRva2VuICYmICF0aGlzLnRhcmdldEFjdG9yKSByZXR1cm4gbnVsbFxuICAgIHJldHVybiB0aGlzLl90YXJnZXRLZXlcbiAgfVxuXG4gIGdldCBoYXNUYXJnZXQgKCkge1xuICAgIGlmICghdGhpcy50YXJnZXRUb2tlbiAmJiAhdGhpcy50YXJnZXRBY3RvcikgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIHNldCB0YXJnZXRLZXkgKHgpIHtcbiAgICB0aGlzLl90YXJnZXRLZXkgPSB4XG4gIH1cblxuICBnZXQgc2tpbGxzICgpIHtcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5nZXRXZWFwb25Ta2lsbHModGhpcy5pdGVtSWQpXG4gIH1cblxuICBnZXQgdGFyZ2V0SW1nICgpIHtcbiAgICBjb25zdCBpbWcgPSBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleSh0aGlzLnRhcmdldEtleSlcbiAgICBpZiAoaW1nKSByZXR1cm4gaW1nXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xuICB9XG5cbiAgZ2V0IG5hbWUgKCkge1xuICAgIGlmICh0aGlzLnRva2VuKSByZXR1cm4gdGhpcy50b2tlbi5uYW1lXG4gICAgcmV0dXJuIHRoaXMuYWN0b3IubmFtZVxuICB9XG5cbiAgZ2V0IHRhcmdldE5hbWUgKCkge1xuICAgIGlmICghdGhpcy50YXJnZXQpIHJldHVybiAnZHVtbXknXG4gICAgcmV0dXJuIHRoaXMudGFyZ2V0Lm5hbWVcbiAgfVxuXG4gIGdldCBhY3RvckltZyAoKSB7XG4gICAgY29uc3QgaW1nID0gY2hhdEhlbHBlci5nZXRBY3RvckltZ0Zyb21LZXkodGhpcy5hY3RvcktleSlcbiAgICBpZiAoaW1nKSByZXR1cm4gaW1nXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xuICB9XG59XG4iLCIvKiBnbG9iYWwgY2FudmFzLCBDaGF0TWVzc2FnZSwgRGlhbG9nLCBnYW1lLCBtZXJnZU9iamVjdCwgUm9sbCwgdWkgKi9cblxuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuLi8uLi9kaWNlLmpzJ1xuaW1wb3J0IHsgSW50ZXJhY3RpdmVDaGF0Q2FyZCB9IGZyb20gJy4uL2ludGVyYWN0aXZlLWNoYXQtY2FyZC5qcydcbmltcG9ydCB7IGNyZWF0ZUlubGluZVJvbGwgfSBmcm9tICcuLi9oZWxwZXIuanMnXG5cbmV4cG9ydCBjbGFzcyBEYW1hZ2VDYXJkIGV4dGVuZHMgSW50ZXJhY3RpdmVDaGF0Q2FyZCB7XG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgNWUgQWN0b3IgU2hlZXRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgZXhjbHVkZTogW1xuICAgICAgICAnX3RhcmdldFRva2VuJyxcbiAgICAgICAgJ190YXJnZXRBY3RvcicsXG4gICAgICAgICdfaHRtbFJvbGwnLFxuICAgICAgICAnX2h0bWxJbmxpbmVSb2xsJ1xuICAgICAgXS5jb25jYXQoc3VwZXIuZGVmYXVsdE9wdGlvbnMuZXhjbHVkZSksXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jYXJkcy9kYW1hZ2UuaHRtbCdcbiAgICB9KVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICB9XG5cbiAgYXN5bmMgYXNzaWduT2JqZWN0ICgpIHtcbiAgICBpZiAodGhpcy5kYW1hZ2VSb2xsICYmIHRoaXMuZGFtYWdlUm9sbC5jb25zdHJ1Y3Rvci5uYW1lID09PSAnT2JqZWN0Jykge1xuICAgICAgdGhpcy5kYW1hZ2VSb2xsID0gUm9sbC5mcm9tRGF0YSh0aGlzLmRhbWFnZVJvbGwpXG4gICAgfVxuICB9XG5cbiAgX29uQnV0dG9uIChldmVudCkge1xuICAgIHN1cGVyLl9vbkJ1dHRvbihldmVudClcbiAgfVxuXG4gIGdldCBjcml0aWNhbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jcml0aWNhbFxuICB9XG5cbiAgc2V0IGNyaXRpY2FsICh4KSB7XG4gICAgdGhpcy5fb3B0aW9ucy5jcml0aWNhbCA9IHhcbiAgfVxuXG4gIGdldCBpbXBhbGUgKCkge1xuICAgIGlmICh0aGlzLl9pbXBhbGUgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gdGhpcy53ZWFwb24uaW1wYWxlXG4gICAgcmV0dXJuIHRoaXMuX2ltcGFsZVxuICB9XG5cbiAgc2V0IGltcGFsZSAoeCkge1xuICAgIHRoaXMuX2ltcGFsZSA9IHhcbiAgfVxuXG4gIGdldCBpc0RhbWFnZUZvcm11bGEgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5kYW1hZ2VGb3JtdWxhICE9PSAnc3RyaW5nJykgcmV0dXJuIGZhbHNlXG4gICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5kYW1hZ2VGb3JtdWxhKSkpIHJldHVybiBmYWxzZVxuICAgIHJldHVybiBSb2xsLnZhbGlkYXRlKHRoaXMuZGFtYWdlRm9ybXVsYSlcbiAgfVxuXG4gIGdldCBpc0RhbWFnZU51bWJlciAoKSB7XG4gICAgcmV0dXJuICFpc05hTihOdW1iZXIodGhpcy5kYW1hZ2VGb3JtdWxhKSlcbiAgfVxuXG4gIGdldCBpc0FybW9yRm9ydWxhICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuYXJtb3IgIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2VcbiAgICBpZiAoIWlzTmFOKE51bWJlcih0aGlzLmFybW9yKSkpIHJldHVybiBmYWxzZVxuICAgIHJldHVybiBSb2xsLnZhbGlkYXRlKHRoaXMuYXJtb3IpXG4gIH1cblxuICBnZXQgdG90YWxEYW1hZ2VTdHJpbmcgKCkge1xuICAgIGxldCBkYW1hZ2UgPSBOdW1iZXIoXG4gICAgICB0aGlzLmlzRGFtYWdlTnVtYmVyID8gdGhpcy5kYW1hZ2VGb3JtdWxhIDogdGhpcy5yb2xsLnRvdGFsXG4gICAgKVxuICAgIGlmICghdGhpcy5pZ25vcmVBcm1vcikge1xuICAgICAgaWYgKGlzTmFOKE51bWJlcih0aGlzLmFybW9yKSkgfHwgTnVtYmVyKHRoaXMuYXJtb3IpID4gMCkge1xuICAgICAgICBkYW1hZ2UgPSBkYW1hZ2UgLSBOdW1iZXIodGhpcy5hcm1vcilcbiAgICAgIH1cbiAgICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuYXJtb3IpKSkge1xuICAgICAgICBpZiAoZGFtYWdlIDw9IDApIHtcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFybW9yQWJzb3Jic0RhbWFnZScpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRhbWFnZVxuICB9XG5cbiAgZ2V0IG5vRGFtYWdlICgpIHtcbiAgICBpZiAodGhpcy5yb2xsZWQpIHtcbiAgICAgIGNvbnN0IGRhbWFnZSA9IHRoaXMuaXNEYW1hZ2VOdW1iZXIgPyB0aGlzLmRhbWFnZUZvcm11bGEgOiB0aGlzLnJvbGwudG90YWxcbiAgICAgIGlmICghdGhpcy5pZ25vcmVBcm1vcikge1xuICAgICAgICBpZiAoIWlzTmFOKE51bWJlcih0aGlzLmFybW9yKSkpIHtcbiAgICAgICAgICByZXR1cm4gISEoZGFtYWdlIC0gTnVtYmVyKHRoaXMuYXJtb3IpIDw9IDApXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gISEoZGFtYWdlIDw9IDApXG4gICAgICB9XG4gICAgfSBlbHNlIHJldHVybiBmYWxzZVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKCkge1xuICAgIGlmICh0aGlzLm9wdGlvbnMuZmFzdEZvcndhcmQgJiYgIXRoaXMucm9sbCAmJiAhdGhpcy5pc0RhbWFnZU51bWJlcikge1xuICAgICAgYXdhaXQgdGhpcy5yb2xsRGFtYWdlKHsgdXBkYXRlOiBmYWxzZSB9KVxuICAgIH1cbiAgICBpZiAoXG4gICAgICB0aGlzLmlzRGFtYWdlTnVtYmVyIHx8XG4gICAgICAodGhpcy5yb2xsICYmIHRoaXMucm9sbC50b3RhbCAhPSBudWxsKSB8fFxuICAgICAgdGhpcy5oYXJkcm9sbGVkXG4gICAgKSB7XG4gICAgICB0aGlzLnJvbGxlZCA9IHRydWVcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yb2xsZWQgPSBmYWxzZVxuICAgIH1cbiAgICBpZiAodGhpcy5vcHRpb25zLmZhc3RGb3J3YXJkICYmICF0aGlzLmRhbWFnZUluZmxpY3RlZCAmJiAhdGhpcy5ub0RhbWFnZSkge1xuICAgICAgYXdhaXQgdGhpcy5kZWFsRGFtYWdlKHsgdXBkYXRlOiBmYWxzZSB9KVxuICAgIH1cblxuICAgIGlmICh0aGlzLnJvbGxlZCAmJiB0aGlzLnJvbGwpIHtcbiAgICAgIGlmICh0aGlzLnJvbGwuY29uc3RydWN0b3IubmFtZSA9PT0gJ09iamVjdCcpIHtcbiAgICAgICAgdGhpcy5yb2xsID0gUm9sbC5mcm9tRGF0YSh0aGlzLnJvbGwpXG4gICAgICB9XG4gICAgICBjb25zdCBhID0gY3JlYXRlSW5saW5lUm9sbCh0aGlzLnJvbGwpXG4gICAgICB0aGlzLl9odG1sSW5saW5lUm9sbCA9IGEub3V0ZXJIVE1MXG4gICAgICB0aGlzLl9odG1sUm9sbCA9IGF3YWl0IHRoaXMucm9sbC5yZW5kZXIoKVxuICAgIH1cbiAgICBhd2FpdCBzdXBlci51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBhc3luYyByb2xsRGFtYWdlIChvcHRpb25zID0geyB1cGRhdGU6IHRydWUgfSkge1xuICAgIHRoaXMucm9sbCA9IGF3YWl0IG5ldyBSb2xsKHRoaXMuZGFtYWdlRm9ybXVsYSB8fCAnMCcpLmV2YWx1YXRlKHtcbiAgICAgIGFzeW5jOiB0cnVlXG4gICAgfSlcbiAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZCh0aGlzLnJvbGwpXG4gICAgdGhpcy5oYXJkcm9sbGVkID0gdHJ1ZVxuICAgIG9wdGlvbnMudXBkYXRlID1cbiAgICAgIHR5cGVvZiBvcHRpb25zLnVwZGF0ZSA9PT0gJ3VuZGVmaW5lZCcgPyB0cnVlIDogb3B0aW9ucy51cGRhdGVcbiAgICBpZiAob3B0aW9ucy51cGRhdGUpIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgYXN5bmMgcm9sbEFybW9yIChvcHRpb25zID0geyB1cGRhdGU6IHRydWUgfSkge1xuICAgIGNvbnN0IHJvbGwgPSBhd2FpdCBuZXcgUm9sbCh0aGlzLmFybW9yKS5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgdGhpcy5hcm1vciA9IHJvbGwudG90YWxcbiAgICBvcHRpb25zLnVwZGF0ZSA9XG4gICAgICB0eXBlb2Ygb3B0aW9ucy51cGRhdGUgPT09ICd1bmRlZmluZWQnID8gdHJ1ZSA6IG9wdGlvbnMudXBkYXRlXG4gICAgaWYgKG9wdGlvbnMudXBkYXRlKSB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGFzeW5jIGRlYWxEYW1hZ2VUb1NlbGVjdGVkVGFyZ2V0IChvcHRpb25zID0geyB1cGRhdGU6IHRydWUgfSkge1xuICAgIGlmICh0aGlzLmlzQXJtb3JGb3J1bGEpIGF3YWl0IHRoaXMucm9sbEFybW9yKClcbiAgICBpZiAoaXNOYU4oTnVtYmVyKHRoaXMudG90YWxEYW1hZ2VTdHJpbmcpKSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignRXJyb3IgZXZhbHVhdGluZyBkYW1hZ2UnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IHRhcmdldHMgPSBbXVxuICAgIGNvbnN0IHRhcmdldE5hbWUgPSBbXVxuICAgIGNvbnN0IHNlbGVjdGVkUGxheWVycyA9IGNhbnZhcy50b2tlbnMuY29udHJvbGxlZC5tYXAodG9rZW4gPT4ge1xuICAgICAgcmV0dXJuIHRva2VuLmFjdG9yXG4gICAgfSlcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgc2VsZWN0ZWRQbGF5ZXJzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgaWYgKHRoaXMuYWN0b3IuaWQgPT09IHNlbGVjdGVkUGxheWVyc1tpbmRleF0uaWQpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cbiAgICAgIHRhcmdldE5hbWUucHVzaChzZWxlY3RlZFBsYXllcnNbaW5kZXhdLm5hbWUpXG4gICAgICB0YXJnZXRzLnB1c2goc2VsZWN0ZWRQbGF5ZXJzW2luZGV4XSlcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIHRpdGxlOiAnICcsXG4gICAgICBjb250ZW50OiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRlYWxEYW1hZ2UnLCB7XG4gICAgICAgIGRhbWFnZTogdGhpcy50b3RhbERhbWFnZVN0cmluZyxcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXROYW1lXG4gICAgICB9KSxcbiAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgb25lOiB7XG4gICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLWNoZWNrXCI+PC9pPicsXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Qcm9jZWVkJyksXG4gICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY29uZmlybURhbWFnZSh0YXJnZXRzKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgdHdvOiB7XG4gICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLXRpbWVzXCI+PC9pPicsXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DYW5jZWwnKSxcbiAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge31cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRlZmF1bHQ6ICd0d28nXG4gICAgfVxuICAgIGlmICh0YXJnZXROYW1lLmxlbmd0aCA+IDApIHtcbiAgICAgIG5ldyBEaWFsb2coZGF0YSkucmVuZGVyKHRydWUpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY29uZmlybURhbWFnZSAodGFyZ2V0cykge1xuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0YXJnZXRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgYXdhaXQgdGFyZ2V0c1tpbmRleF0uZGVhbERhbWFnZShOdW1iZXIodGhpcy50b3RhbERhbWFnZVN0cmluZyksIHtcbiAgICAgICAgaWdub3JlQXJtb3I6IGZhbHNlXG4gICAgICB9KVxuICAgICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgICAgY29udGVudDogYERhbWFnZSAke3RhcmdldHNbaW5kZXhdLm5hbWV9ICR7dGhpcy50b3RhbERhbWFnZVN0cmluZ31IUGBcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZGVhbERhbWFnZSAob3B0aW9ucyA9IHsgdXBkYXRlOiB0cnVlIH0pIHtcbiAgICBpZiAodGhpcy5pc0FybW9yRm9ydWxhKSBhd2FpdCB0aGlzLnJvbGxBcm1vcigpXG4gICAgbGV0IGRhbWFnZSA9IHRoaXMudG90YWxEYW1hZ2VTdHJpbmdcbiAgICBpZiAoaXNOYU4oTnVtYmVyKGRhbWFnZSkpKSB7XG4gICAgICBpZiAoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFybW9yQWJzb3Jic0RhbWFnZScpID09PSBkYW1hZ2UpIHtcbiAgICAgICAgZGFtYWdlID0gMFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignRXJyb3IgZXZhbHVhdGluZyBkYW1hZ2UnKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMudGFyZ2V0QWN0b3IpIHtcbiAgICAgIGF3YWl0IHRoaXMudGFyZ2V0QWN0b3IuZGVhbERhbWFnZShOdW1iZXIoZGFtYWdlKSwge1xuICAgICAgICBpZ25vcmVBcm1vcjogdHJ1ZVxuICAgICAgfSlcbiAgICB9XG4gICAgdGhpcy5kYW1hZ2VJbmZsaWN0ZWQgPSB0cnVlXG4gICAgb3B0aW9ucy51cGRhdGUgPVxuICAgICAgdHlwZW9mIG9wdGlvbnMudXBkYXRlID09PSAndW5kZWZpbmVkJyA/IHRydWUgOiBvcHRpb25zLnVwZGF0ZVxuICAgIGlmIChvcHRpb25zLnVwZGF0ZSkgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBnZXQgcmFuZ2UgKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMucmFuZ2UgfHwgJ25vcm1hbCdcbiAgfVxuXG4gIHNldCByYW5nZSAoeCkge1xuICAgIGNvbnN0IHJhbmdlcyA9IFsnbm9ybWFsJywgJ2xvbmcnLCAnZXh0cmVtZSddXG4gICAgaWYgKCFyYW5nZXMuaW5jbHVlcyh4LnRvTG93ZXJDYXNlKCkpKSByZXR1cm5cbiAgICB0aGlzLl9vcHRpb25zLnJhbmdlID0geFxuICB9XG5cbiAgZ2V0IGRhbWFnZUZvcm11bGEgKCkge1xuICAgIGNvbnN0IHJhbmdlID0gdGhpcy5yYW5nZVxuICAgIGxldCBmb3JtdWxhID0gdGhpcy53ZWFwb24/LmRhdGE/LmRhdGE/LnJhbmdlW3JhbmdlXT8uZGFtYWdlXG4gICAgbGV0IGRiID0gdGhpcy5hY3Rvci5kYlxuICAgIGlmIChkYiA9PT0gbnVsbCkge1xuICAgICAgZGIgPSAnJ1xuICAgIH0gZWxzZSB7XG4gICAgICBkYiA9IGAke2RifWBcbiAgICB9XG5cbiAgICBpZiAoZGIgJiYgIWRiLnN0YXJ0c1dpdGgoJy0nKSkgZGIgPSAnKycgKyBkYlxuICAgIGlmICh0aGlzLndlYXBvbi5kYXRhLmRhdGEucHJvcGVydGllcy5hZGRiKSBmb3JtdWxhID0gZm9ybXVsYSArIGRiXG4gICAgaWYgKHRoaXMud2VhcG9uLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmFoZGIpIGZvcm11bGEgPSBmb3JtdWxhICsgZGIgKyAnLzInXG5cbiAgICBpZiAoZm9ybXVsYSkge1xuICAgICAgY29uc3QgbWF4RGFtYWdlID0gbmV3IFJvbGwoZm9ybXVsYSkuZXZhbHVhdGUoeyBtYXhpbWl6ZTogdHJ1ZSB9KS50b3RhbFxuICAgICAgbGV0IHJvbGxTdHJpbmdcbiAgICAgIGlmICh0aGlzLmNyaXRpY2FsKSB7XG4gICAgICAgIGlmICh0aGlzLmltcGFsZSkge1xuICAgICAgICAgIHJvbGxTdHJpbmcgPSBmb3JtdWxhICsgJysnICsgbWF4RGFtYWdlXG4gICAgICAgICAgcmV0dXJuIHJvbGxTdHJpbmdcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gbWF4RGFtYWdlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmb3JtdWxhXG4gICAgICB9XG4gICAgfSBlbHNlIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBhcm1vciAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCAhPT0gdGhpcy5fYXJtb3IgJiYgdGhpcy5fYXJtb3IgIT09ICcnKSByZXR1cm4gdGhpcy5fYXJtb3JcbiAgICBpZiAodGhpcy50YXJnZXQpIHtcbiAgICAgIHJldHVybiB0aGlzLnRhcmdldEFjdG9yLmRhdGEuZGF0YS5hdHRyaWJzLmFybW9yLnZhbHVlXG4gICAgfVxuICAgIHJldHVybiAwXG4gIH1cblxuICBzZXQgYXJtb3IgKHgpIHtcbiAgICB0aGlzLl9hcm1vciA9IHhcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgdWkgKi9cblxuLy8gaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi8uLi9hY3RvcnMvYWN0b3IuanMnO1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5cbmV4cG9ydCBjbGFzcyBSb2xsQ2FyZCB7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICB0aGlzLnJvbGxzID0gW11cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tTWVzc2FnZUlkIChtZXNzYWdlSWQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgIGlmICghbWVzc2FnZSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21NZXNzYWdlKG1lc3NhZ2UpXG4gICAgY2FyZC5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcbiAgICByZXR1cm4gY2FyZFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21NZXNzYWdlIChtZXNzYWdlKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSAkKG1lc3NhZ2UuZGF0YS5jb250ZW50KVswXVxuICAgIGlmICghY2FyZEVsZW1lbnQpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5mcm9tSFRNTENhcmRFbGVtZW50KGNhcmRFbGVtZW50KVxuICAgIGNhcmQubWVzc2FnZSA9IG1lc3NhZ2VcbiAgICByZXR1cm4gY2FyZFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21IVE1MQ2FyZEVsZW1lbnQgKGNhcmQpIHtcbiAgICBjb25zdCBjYXJkRGF0YSA9IEpTT04ucGFyc2UodW5lc2NhcGUoY2FyZC5kYXRhc2V0Lm9iamVjdCkpXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZnJvbURhdGEoY2FyZERhdGEpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbURhdGEgKGRhdGEpIHtcbiAgICBjb25zdCBjYXJkID0gT2JqZWN0LmFzc2lnbihuZXcgdGhpcygpLCBkYXRhKVxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBjYXJkLnJvbGxzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgaWYgKGNhcmQucm9sbHNbaW5kZXhdPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ09iamVjdCcpIHtcbiAgICAgICAgY2FyZC5yb2xsc1tpbmRleF0gPSBPYmplY3QuYXNzaWduKG5ldyBDb0M3Q2hlY2soKSwgY2FyZC5yb2xsc1tpbmRleF0pXG4gICAgICAgIGlmIChjYXJkLnJvbGxzW2luZGV4XS5yb2xsZWQpIHtcbiAgICAgICAgICBjYXJkLnJvbGxzW2luZGV4XS5faHRtbFJvbGwgPSBhd2FpdCBjYXJkLnJvbGxzW2luZGV4XS5nZXRIdG1sUm9sbCgpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNhcmRcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25Ub2dnbGUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3Qgc3BhbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBpZiAoc3BhbiAmJiBzcGFuLmNsYXNzTGlzdC5jb250YWlucygnZ20tc2VsZWN0LW9ubHknKSAmJiAhZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBtZXNzYWdlID0gc3Bhbi5jbG9zZXN0KCcuY2hhdC1tZXNzYWdlJylcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5mcm9tTWVzc2FnZUlkKG1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQpXG4gICAgaWYgKCFjYXJkKSByZXR1cm5cbiAgICBjb25zdCBmbGFnID0gc3Bhbi5kYXRhc2V0LmZsYWdcbiAgICBpZiAoIWZsYWcpIHJldHVyblxuICAgIGNvbnN0IHRvZ2dsZSA9IHNwYW4uY2xvc2VzdCgnLnRvZ2dsZScpXG4gICAgaWYgKCF0b2dnbGUpIHtcbiAgICAgIGNhcmQudG9nZ2xlRmxhZyhmbGFnKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBidXR0b25zID0gdG9nZ2xlLnF1ZXJ5U2VsZWN0b3JBbGwoJy50b2dnbGUtc3dpdGNoJylcbiAgICAgIGZvciAoY29uc3QgYiBvZiBidXR0b25zKSB7XG4gICAgICAgIGNhcmQudW5zZXRGbGFnKGIuZGF0YXNldC5mbGFnKVxuICAgICAgfVxuICAgICAgY2FyZC5zZXRGbGFnKGZsYWcpXG4gICAgfVxuICAgIGNhcmQudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGRpc3BhdGNoIChkYXRhKSB7XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBsZXQgbWVzc2FnZXMgPSB1aS5jaGF0LmNvbGxlY3Rpb24uZmlsdGVyKG1lc3NhZ2UgPT4ge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdGhpcy5kZWZhdWx0Q29uZmlnLnR5cGUgPT09IG1lc3NhZ2UuZ2V0RmxhZygnQ29DNycsICd0eXBlJykgJiZcbiAgICAgICAgICBtZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAnc3RhdGUnKSAhPT0gJ3Jlc29sdmVkJ1xuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfSlcblxuICAgICAgaWYgKG1lc3NhZ2VzLmxlbmd0aCkge1xuICAgICAgICAvLyBPbGQgbWVzc2FnZXMgY2FuJ3QgYmUgdXNlZCBpZiBtZXNzYWdlIGlzIG1vcmUgdGhhbiBhIGRheSBvbGQgbWFyayBpdCBhcyByZXNvbHZlZFxuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZShtZXNzYWdlc1swXS5kYXRhLnRpbWVzdGFtcClcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKVxuICAgICAgICBjb25zdCB0aW1lRGlmZlNlYyA9IChub3cgLSB0aW1lc3RhbXApIC8gMTAwMFxuICAgICAgICBpZiAoMjQgKiA2MCAqIDYwIDwgdGltZURpZmZTZWMpIHtcbiAgICAgICAgICBhd2FpdCBtZXNzYWdlc1swXS5zZXRGbGFnKCdDb0M3JywgJ3N0YXRlJywgJ3Jlc29sdmVkJylcbiAgICAgICAgICBtZXNzYWdlcyA9IFtdXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbGV0IGNhcmRcbiAgICAgIGlmICghbWVzc2FnZXMubGVuZ3RoKSBjYXJkID0gbmV3IHRoaXMoKVxuICAgICAgZWxzZSBjYXJkID0gYXdhaXQgdGhpcy5mcm9tTWVzc2FnZShtZXNzYWdlc1swXSlcbiAgICAgIGF3YWl0IGNhcmQucHJvY2VzcyhkYXRhKVxuICAgIH0gZWxzZSBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIGRhdGEpXG4gIH1cblxuICBhc3luYyB0b01lc3NhZ2UgKCkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLmNvbmZpZy50ZW1wbGF0ZSwgdGhpcylcbiAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkKGh0bWwpXG4gICAgaHRtbENhcmRFbGVtZW50WzBdLmRhdGFzZXQub2JqZWN0ID0gZXNjYXBlKHRoaXMuZGF0YVN0cmluZylcblxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgZmxhdm9yOiBnYW1lLmkxOG4ubG9jYWxpemUodGhpcy5jb25maWcudGl0bGUpLFxuICAgICAgY29udGVudDogaHRtbENhcmRFbGVtZW50WzBdLm91dGVySFRNTCxcbiAgICAgIGZsYWdzOiB7XG4gICAgICAgIENvQzc6IHtcbiAgICAgICAgICB0eXBlOiB0aGlzLmNvbmZpZy50eXBlLFxuICAgICAgICAgIHN0YXRlOiAnaW5pdGlhdGVkJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHRoaXMucm9sbE1vZGUpKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICB9XG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnKSBjaGF0RGF0YS5ibGluZCA9IHRydWVcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcbiAgICByZXR1cm4gbXNnXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgYXdhaXQgdGhpcy5jb21wdXRlKClcbiAgICBpZiAoIXRoaXMubWVzc2FnZUlkKSB7XG4gICAgICBhd2FpdCB0aGlzLnRvTWVzc2FnZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLmNvbmZpZy50ZW1wbGF0ZSwgdGhpcylcbiAgICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG5cbiAgICAgIC8vIEF0dGFjaCB0aGUgc2FuQ2hlY2tDYXJkIG9iamVjdCB0byB0aGUgbWVzc2FnZS5cbiAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLmRhdGFTdHJpbmcpXG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgbWVzc2FnZS5cbiAgICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXG4gICAgICBpZiAodGhpcy5jbG9zZWQpIGF3YWl0IGNoYXRNZXNzYWdlLnNldEZsYWcoJ0NvQzcnLCAnc3RhdGUnLCAncmVzb2x2ZWQnKVxuXG4gICAgICBjb25zdCBtc2cgPSBhd2FpdCBjaGF0TWVzc2FnZS51cGRhdGUoe1xuICAgICAgICBjb250ZW50OiBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MXG4gICAgICB9KVxuICAgICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgICByZXR1cm4gbXNnXG4gICAgfVxuICB9XG5cbiAgdXBkYXRlUm9sbCAoZGF0YSkge1xuICAgIGlmICghZGF0YS5mcm9tR00pIHtcbiAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5yb2xsc1tkYXRhLnJhbmtdLCBkYXRhLnJvbGwpXG4gICAgfVxuICB9XG5cbiAgYWRkUm9sbERhdGEgKGRhdGEpIHtcbiAgICBjb25zdCBjaGVjayA9IE9iamVjdC5hc3NpZ24obmV3IENvQzdDaGVjaygpLCBkYXRhLnJvbGwpXG4gICAgdGhpcy5yb2xscy5wdXNoKGNoZWNrKVxuICB9XG5cbiAgYWRkUm9sbCAoZGF0YSkge1xuICAgIHRoaXMucm9sbHMucHVzaChkYXRhKVxuICB9XG5cbiAgcmVtb3ZlUm9sbCAocmFuaykge1xuICAgIHRoaXMucm9sbHMuc3BsaWNlKHJhbmssIDEpXG4gIH1cblxuICBzZXRGbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghZmxhZ05hbWUgJiYgISgkLnR5cGUoZmxhZ05hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxuICAgIHRoaXNbZmxhZ05hbWVdID0gdHJ1ZVxuICB9XG5cbiAgdW5zZXRGbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghZmxhZ05hbWUgJiYgISgkLnR5cGUoZmxhZ05hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxuICAgIHRoaXNbZmxhZ05hbWVdID0gZmFsc2VcbiAgfVxuXG4gIHRvZ2dsZUZsYWcgKGZsYWdOYW1lKSB7XG4gICAgdGhpc1tmbGFnTmFtZV0gPSAhdGhpc1tmbGFnTmFtZV1cbiAgfVxuXG4gIGdldCBtZXNzYWdlICgpIHtcbiAgICBpZiAodGhpcy5fbWVzc2FnZSkgcmV0dXJuIHRoaXMuX21lc3NhZ2VcbiAgICBpZiAodGhpcy5fbWVzc2FnZUlkKSByZXR1cm4gZ2FtZS5tZXNzYWdlLmdldCh0aGlzLl9tZXNzYWdlSWQpXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgc2V0IG1lc3NhZ2UgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlID0geFxuICB9XG5cbiAgZ2V0IG1lc3NhZ2VJZCAoKSB7XG4gICAgaWYgKHRoaXMuX21lc3NhZ2VJZCkgcmV0dXJuIHRoaXMuX21lc3NhZ2VJZFxuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZS5pZFxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHNldCBtZXNzYWdlSWQgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlSWQgPSB4XG4gIH1cblxuICAvLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdENvbmZpZyAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGV4Y2x1ZGU6IFsnX2FjdG9yJywgJ19za2lsbCcsICdfaXRlbScsICdfbWVzc2FnZScsICdfaHRtbFJvbGwnXSxcbiAgICAgIGV4Y2x1ZGVTdGFydFdpdGg6ICdfXydcbiAgICB9XG4gIH1cblxuICAvLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgZ2V0IHdpbm5lcnMgKCkge1xuICAgIHJldHVybiB0aGlzLnJvbGxzLmZpbHRlcihyID0+IHIud2lubmVyKVxuICB9XG5cbiAgZ2V0IHdpbm5lciAoKSB7XG4gICAgaWYgKHRoaXMud2lubmVycy5sZW5ndGgpIHJldHVybiB0aGlzLndpbm5lcnNbMF1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgbG9vc2VycyAoKSB7XG4gICAgcmV0dXJuIHRoaXMucm9sbHMuZmlsdGVyKHIgPT4gIXIud2lubmVyKVxuICB9XG5cbiAgZ2V0IGxvb3NlciAoKSB7XG4gICAgaWYgKHRoaXMubG9vc2Vycy5sZW5ndGgpIHJldHVybiB0aGlzLmxvb3NlcnNbMF1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgaGFzV2lubmVyICgpIHtcbiAgICBpZiAodGhpcy53aW5uZXJzLmxlbmd0aCA+IDApIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgaXNHTSAoKSB7XG4gICAgcmV0dXJuIGdhbWUudXNlci5pc0dNXG4gIH1cblxuICBnZXQgcm9sbE1vZGUgKCkge1xuICAgIGlmICghdGhpcy5fcm9sbE1vZGUpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHJldHVybiB0aGlzLl9yb2xsTW9kZVxuICB9XG5cbiAgc2V0IHJvbGxNb2RlICh4KSB7XG4gICAgaWYgKHggPT09IGZhbHNlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICB0aGlzLl9yb2xsTW9kZSA9IHhcbiAgfVxuXG4gIGdldCBkYXRhICgpIHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZSh0aGlzLmRhdGFTdHJpbmcpXG4gIH1cblxuICBnZXQgZGF0YVN0cmluZyAoKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMsIChrZXksIHZhbHVlKSA9PiB7XG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIGlmICh0aGlzLmNvbmZpZy5leGNsdWRlPy5pbmNsdWRlcyhrZXkpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgodGhpcy5jb25maWcuZXhjbHVkZVN0YXJ0V2l0aCkpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIHJldHVybiB2YWx1ZVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBDaGF0TWVzc2FnZSwgZ2FtZSwgbWVyZ2VPYmplY3QgKi9cblxuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBEYW1hZ2VDYXJkIH0gZnJvbSAnLi9kYW1hZ2UuanMnXG5pbXBvcnQgeyBSb2xsQ2FyZCB9IGZyb20gJy4vcm9sbC1jYXJkLmpzJ1xuXG5leHBvcnQgY2xhc3MgT3Bwb3NlZENoZWNrQ2FyZCBleHRlbmRzIFJvbGxDYXJkIHtcbiAgc3RhdGljIGFzeW5jIGJpbmRMaXN0ZXJuZXJzIChodG1sKSB7XG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLnJvbGwtY2FyZC5vcHBvc2VkIC50b2dnbGUtc3dpdGNoJyxcbiAgICAgIHRoaXMuX29uVG9nZ2xlLmJpbmQodGhpcylcbiAgICApXG4gICAgLy8gc3VwZXIuYmluZExpc3Rlcm5lcnMoIGh0bWwpO1xuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yb2xsLWNhcmQub3Bwb3NlZCBhJyxcbiAgICAgIE9wcG9zZWRDaGVja0NhcmQuX29uQ2xpY2suYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucm9sbC1jYXJkLm9wcG9zZWQgYnV0dG9uJyxcbiAgICAgIE9wcG9zZWRDaGVja0NhcmQuX29uQ2xpY2suYmluZCh0aGlzKVxuICAgIClcbiAgfVxuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdENvbmZpZyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRDb25maWcsIHtcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NhcmRzL29wcG9zZWQtcm9sbC5odG1sJyxcbiAgICAgIHR5cGU6ICdvcHBvc2VkQ2FyZCdcbiAgICB9KVxuICB9XG5cbiAgZ2V0IGNvbmZpZyAoKSB7XG4gICAgcmV0dXJuIE9wcG9zZWRDaGVja0NhcmQuZGVmYXVsdENvbmZpZ1xuICB9XG5cbiAgZ2V0IGF0dGFja2VyUm9sbCAoKSB7XG4gICAgaWYgKHRoaXMuY29tYmF0KSB7XG4gICAgICBpZiAodGhpcy5yb2xscz8ubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGF0dGFja2VyID0gdGhpcy5yb2xscy5maWx0ZXIociA9PiByLmluZGV4ID09PSAwIHx8IHIuYXR0YWNrZXIpXG4gICAgICAgIGlmIChhdHRhY2tlci5sZW5ndGgpIHJldHVybiBhdHRhY2tlclswXVxuICAgICAgfVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgZGVmZW5kZXJSb2xsICgpIHtcbiAgICBpZiAodGhpcy5jb21iYXQpIHtcbiAgICAgIGlmICh0aGlzLnJvbGxzPy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgZGVmZW5kZXIgPSB0aGlzLnJvbGxzLmZpbHRlcihyID0+IHIuaW5kZXggIT09IDAgfHwgIXIuYXR0YWNrZXIpXG4gICAgICAgIGlmIChkZWZlbmRlci5sZW5ndGgpIHJldHVybiBkZWZlbmRlclswXVxuICAgICAgfVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgZGVmZW5kZXJJc0RvZGdpbmcgKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuZGVmZW5kZXJSb2xsPy5hY3Rvcj8uZG9kZ2VTa2lsbD8ubmFtZSAmJlxuICAgICAgdGhpcy5kZWZlbmRlclJvbGw/LnNraWxsPy5uYW1lXG4gICAgKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICB0aGlzLmRlZmVuZGVyUm9sbC5hY3Rvci5kb2RnZVNraWxsLm5hbWUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgdGhpcy5kZWZlbmRlclJvbGwuc2tpbGwubmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGFkdmFudGFnZUF0dGFja2VyICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuX2FhID09PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKHRoaXMuZGVmZW5kZXJSb2xsKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5kZWZlbmRlcklzRG9kZ2luZ1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9hYVxuICB9XG5cbiAgZ2V0IHdpbm5lclJvbGxzRGFtYWdlICgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLmNvbWJhdCAmJlxuICAgICAgdGhpcy5yb2xscy5sZW5ndGggPj0gMiAmJlxuICAgICAgdGhpcy5oYXNXaW5uZXIgJiZcbiAgICAgIHRoaXMud2lubmVyPy5pdGVtPy50eXBlID09PSAnd2VhcG9uJ1xuICAgICkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBzZXQgYWR2YW50YWdlQXR0YWNrZXIgKHgpIHtcbiAgICB0aGlzLl9hYSA9IHRydWVcbiAgICB0aGlzLl9hZCA9IGZhbHNlXG4gIH1cblxuICBnZXQgYWR2YW50YWdlRGVmZW5kZXIgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5fYWQgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gdGhpcy5kZWZlbmRlcklzRG9kZ2luZ1xuICAgIHJldHVybiB0aGlzLl9hZFxuICB9XG5cbiAgc2V0IGFkdmFudGFnZURlZmVuZGVyICh4KSB7XG4gICAgdGhpcy5fYWQgPSB0cnVlXG4gICAgdGhpcy5fYWEgPSBmYWxzZVxuICB9XG5cbiAgZ2V0IGlzVGllICgpIHtcbiAgICByZXR1cm4gdGhpcy53aW5uZXJDb3VudCA+IDFcbiAgfVxuXG4gIGdldCBuZWVkc1RpZUJyZWFrZXIgKCkge1xuICAgIGlmICghdGhpcy5jb21iYXQpIHJldHVybiBmYWxzZVxuICAgIGlmIChcbiAgICAgIHRoaXMuYXR0YWNrZXJSb2xsICYmXG4gICAgICB0aGlzLmRlZmVuZGVyUm9sbCAmJlxuICAgICAgdGhpcy5hdHRhY2tlclJvbGwuc3VjY2Vzc0xldmVsID09PSB0aGlzLmRlZmVuZGVyUm9sbC5zdWNjZXNzTGV2ZWxcbiAgICApIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IHdpbm5lckNvdW50ICgpIHtcbiAgICBsZXQgY291bnQgPSAwXG4gICAgZm9yIChjb25zdCByIG9mIHRoaXMucm9sbHMpIHtcbiAgICAgIGlmIChyLndpbm5lcikgY291bnQgKz0gMVxuICAgIH1cbiAgICByZXR1cm4gY291bnRcbiAgfVxuXG4gIGdldCBpc0F0dGFja01hbmV1dmVyICgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLmNvbWJhdCAmJlxuICAgICAgdGhpcy5hdHRhY2tlclJvbGwgJiZcbiAgICAgICghdGhpcy5hdHRhY2tlclJvbGw/Lml0ZW0gfHxcbiAgICAgICAgdGhpcy5hdHRhY2tlclJvbGw/Lml0ZW0uZGF0YS5kYXRhLnByb3BlcnRpZXM/Lm1udnIpXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCByZXN1bHRUZXh0ICgpIHtcbiAgICBpZiAodGhpcy5jb21iYXQgJiYgdGhpcy5hdHRhY2tlclJvbGwgJiYgdGhpcy5kZWZlbmRlclJvbGwpIHtcbiAgICAgIGlmICghdGhpcy5hdHRhY2tlclJvbGwud2lubmVyICYmICF0aGlzLmRlZmVuZGVyUm9sbC53aW5uZXIpIHtcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob1dpbm5lcicpXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5hdHRhY2tlclJvbGwud2lubmVyKSB7XG4gICAgICAgIGlmICh0aGlzLmF0dGFja2VyUm9sbC5tYW5ldXZlcikge1xuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1hbmV1dmVyU3VjY2VzcycsIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuYXR0YWNrZXJSb2xsLmFjdG9yLm5hbWVcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkF0dGFja1N1Y2Nlc3MnLCB7XG4gICAgICAgICAgbmFtZTogdGhpcy5hdHRhY2tlclJvbGwuYWN0b3IubmFtZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuZGVmZW5kZXJSb2xsLndpbm5lcikge1xuICAgICAgICBpZiAodGhpcy5kZWZlbmRlclJvbGwubWFuZXV2ZXIpIHtcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NYW5ldXZlclN1Y2Nlc3MnLCB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLmRlZmVuZGVyUm9sbC5hY3Rvci5uYW1lXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kZWZlbmRlcklzRG9kZ2luZykge1xuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRvZGdlU3VjY2VzcycsIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuZGVmZW5kZXJSb2xsLmFjdG9yLm5hbWVcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkF0dGFja1N1Y2Nlc3MnLCB7XG4gICAgICAgICAgbmFtZTogdGhpcy5kZWZlbmRlclJvbGwuYWN0b3IubmFtZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBhc3luYyBwcm9jZXNzIChkYXRhKSB7XG4gICAgc3dpdGNoIChkYXRhLmFjdGlvbikge1xuICAgICAgY2FzZSAnbmV3JzpcbiAgICAgICAgaWYgKCF0aGlzLnJvbGxzPy5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmNvbWJhdCA9IGRhdGEuY29tYmF0IHx8IHVuZGVmaW5lZFxuICAgICAgICAgIGlmICh0aGlzLmNvbWJhdCkge1xuICAgICAgICAgICAgZGF0YS5yb2xsLmF0dGFja2VyID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkYXRhLnJvbGwuaW5kZXggPSB0aGlzLnJvbGxzLmxlbmd0aFxuICAgICAgICB0aGlzLmFkZFJvbGxEYXRhKGRhdGEpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ3JvbGwnOlxuICAgICAgICB0aGlzLmFkZFJvbGxEYXRhKGRhdGEpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ3VwZGF0ZVJvbGwnOlxuICAgICAgICB0aGlzLnVwZGF0ZVJvbGwoZGF0YSlcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIGF3YWl0IHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICAgIGVsc2UgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxuICB9XG5cbiAgYXN5bmMgcm9sbCAocmFuaykge1xuICAgIGF3YWl0IHRoaXMucm9sbHNbcmFua10uX3BlcmZvcm0oKVxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICB0eXBlOiB0aGlzLmNvbmZpZy50eXBlLFxuICAgICAgYWN0aW9uOiAndXBkYXRlUm9sbCcsXG4gICAgICByYW5rOiByYW5rLFxuICAgICAgZnJvbUdNOiBnYW1lLnVzZXIuaXNHTVxuICAgIH1cbiAgICBpZiAoIWdhbWUudXNlci5pc0dNKSBkYXRhLnJvbGwgPSB0aGlzLnJvbGxzW3JhbmtdLkpTT05Sb2xsRGF0YVxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uQ2xpY2sgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBhY3Rpb24gPSBhLmRhdGFzZXQuYWN0aW9uXG4gICAgY29uc3QgbGkgPSBhLmNsb3Nlc3QoJ2xpLmFjdG9yLXJvbGwnKVxuICAgIGNvbnN0IG1lc3NhZ2UgPSBhLmNsb3Nlc3QoJy5jaGF0LW1lc3NhZ2UnKVxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gYS5jbG9zZXN0KCdkaXYucm9sbC1jYXJkJylcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgT3Bwb3NlZENoZWNrQ2FyZC5mcm9tSFRNTENhcmRFbGVtZW50KGNhcmRFbGVtZW50KVxuICAgIGNhcmQubWVzc2FnZUlkID0gbWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgIGNvbnN0IHJhbmsgPSBOdW1iZXIobGk/LmRhdGFzZXQ/LnJhbmspXG5cbiAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgY2FzZSAndG9nZ2xlLWNvbWJhdCc6IHtcbiAgICAgICAgY2FyZC5jb21iYXQgPSAhY2FyZC5jb21iYXRcbiAgICAgICAgLy8gaWYoICFjYXJkLmFkdmFudGFnZUF0dGFja2VyICYmICFjYXJkLmFkdmFudGFnZURlZmVuZGVyKSBjYXJkLmFkdmFudGFnZUF0dGFja2VyID0gdHJ1ZTtcbiAgICAgICAgYXdhaXQgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JlbW92ZS1yb2xsJzoge1xuICAgICAgICBjYXJkLnJlbW92ZVJvbGwocmFuaylcbiAgICAgICAgYXdhaXQgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2Nsb3NlLWNhcmQnOiB7XG4gICAgICAgIGNhcmQuY2xvc2VDYXJkKClcbiAgICAgICAgYXdhaXQgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JvbGwtY2hlY2snOiB7XG4gICAgICAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICAgICAgaWYgKCFjYXJkLnJvbGxzW3JhbmtdLmFjdG9yS2V5KSB7XG4gICAgICAgICAgY2FyZC5yb2xsc1tyYW5rXS5hY3RvcktleSA9IGAke3NwZWFrZXIuc2NlbmV9LiR7c3BlYWtlci50b2tlbn1gXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgY2FyZC5yb2xsKHJhbmspXG4gICAgICAgIGF3YWl0IGNhcmQucHJvY2VzcyhkYXRhKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyb2xsLWRhbWFnZSc6IHtcbiAgICAgICAgY2FyZC5jbG9zZUNhcmQoKVxuICAgICAgICBhd2FpdCBjYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgY29uc3QgZGFtYWdlQ2hhdENhcmQgPSBuZXcgRGFtYWdlQ2FyZCh7XG4gICAgICAgICAgY3JpdGljYWw6IGNhcmQud2lubmVyLmlzRXh0cmVtZVN1Y2Nlc3MsXG4gICAgICAgICAgZmFzdEZvcndhcmQ6IGV2ZW50LnNoaWZ0S2V5XG4gICAgICAgIH0pXG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLmFjdG9yS2V5ID0gY2FyZC53aW5uZXIuYWN0b3IuYWN0b3JLZXlcbiAgICAgICAgZGFtYWdlQ2hhdENhcmQudGFyZ2V0S2V5ID0gY2FyZC5sb29zZXIuYWN0b3IuYWN0b3JLZXlcbiAgICAgICAgZGFtYWdlQ2hhdENhcmQuaXRlbUlkID0gY2FyZC53aW5uZXIuaXRlbUlkXG4gICAgICAgIC8vIGlmKCBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkKSBkYW1hZ2VDaGF0Q2FyZC5tZXNzYWdlSWQgPSBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkO1xuICAgICAgICBkYW1hZ2VDaGF0Q2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICB1cGRhdGU6IGZhbHNlLFxuICAgICAgICAgIGRhdGE6IGEuZGF0YXNldCxcbiAgICAgICAgICBjbGFzc2VzOiBhLmNsYXNzTGlzdCxcbiAgICAgICAgICB0YXJnZXQ6IGFcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBDb0M3Q2hlY2suYWx0ZXIoY2FyZC5yb2xsc1tyYW5rXSwgYWN0aW9uLCBvcHRpb25zKVxuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgIHR5cGU6IHRoaXMuZGVmYXVsdENvbmZpZy50eXBlLFxuICAgICAgICAgIGFjdGlvbjogJ3VwZGF0ZVJvbGwnLFxuICAgICAgICAgIHJhbms6IHJhbmssXG4gICAgICAgICAgZnJvbUdNOiBnYW1lLnVzZXIuaXNHTVxuICAgICAgICB9XG4gICAgICAgIGlmICghZ2FtZS51c2VyLmlzR00pIGRhdGEucm9sbCA9IGNhcmQucm9sbHNbcmFua10uSlNPTlJvbGxEYXRhXG4gICAgICAgIGNhcmQucHJvY2VzcyhkYXRhKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNvbXB1dGUgKHJhbmsgPSB1bmRlZmluZWQpIHtcbiAgICBpZiAoIXJhbmspIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yb2xscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBkZWxldGUgdGhpcy5yb2xsc1tpXS5tYW5ldXZlclxuICAgICAgICBpZiAoXG4gICAgICAgICAgdGhpcy5jb21iYXQgJiZcbiAgICAgICAgICAoIXRoaXMucm9sbHNbaV0uaXRlbSB8fFxuICAgICAgICAgICAgdGhpcy5yb2xsc1tpXS5pdGVtLmRhdGEuZGF0YS5wcm9wZXJ0aWVzPy5tbnZyKSAmJlxuICAgICAgICAgICgodGhpcy5yb2xsc1tpXT8uYWN0b3I/LmRvZGdlU2tpbGw/Lm5hbWUgJiZcbiAgICAgICAgICAgIHRoaXMucm9sbHNbaV0/LnNraWxsPy5uYW1lICYmXG4gICAgICAgICAgICB0aGlzLnJvbGxzW2ldLmFjdG9yLmRvZGdlU2tpbGwubmFtZS50b0xvd2VyQ2FzZSgpICE9PVxuICAgICAgICAgICAgICB0aGlzLnJvbGxzW2ldLnNraWxsLm5hbWUudG9Mb3dlckNhc2UoKSkgfHxcbiAgICAgICAgICAgICF0aGlzLnJvbGxzW2ldPy5hY3Rvcj8uZG9kZ2VTa2lsbD8ubmFtZSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5yb2xsc1tpXS5tYW5ldXZlciA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5yb2xsc1tpXS5yb2xsZWQpIHtcbiAgICAgICAgICB0aGlzLnJvbGxzW2ldLl9odG1sUm9sbCA9IGF3YWl0IHRoaXMucm9sbHNbaV0uZ2V0SHRtbFJvbGwoe1xuICAgICAgICAgICAgaGlkZURpY2VSZXN1bHQ6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLnJvbGxzW3JhbmtdLnJvbGxlZCkge1xuICAgICAgICB0aGlzLnJvbGxzW3JhbmtdLl9odG1sUm9sbCA9IGF3YWl0IHRoaXMucm9sbHNbcmFua10uZ2V0SHRtbFJvbGwoe1xuICAgICAgICAgIGhpZGVEaWNlUmVzdWx0OiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5yb2xscyA9IHRoaXMucm9sbHMuZmlsdGVyKHJvbGwgPT4ge1xuICAgICAgcmV0dXJuIHR5cGVvZiByb2xsLmFjdG9yLmRhdGEgIT09ICd1bmRlZmluZWQnIC8vIENoZWNrIGlmIHRoZXJlJ3MgYW4gYWN0b3Igc2V0IGFuZCBpZiB0aGVyZSdzIG9uZSBhbmQgaXQgZG9lc250IGV4aXN0IHJlbW92ZSBoaW0uXG4gICAgfSlcblxuICAgIGlmICh0aGlzLmNvbWJhdCkge1xuICAgICAgLy8gU29ydCBjb21iYXQgcm9sbHMgYnkgaW5kZXguXG4gICAgICB0aGlzLnJvbGxzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgaWYgKGEuaW5kZXggPiBiLmluZGV4KSByZXR1cm4gMVxuICAgICAgICBpZiAoYS5pbmRleCA8IGIuaW5kZXgpIHJldHVybiAtMVxuICAgICAgICByZXR1cm4gMFxuICAgICAgfSlcblxuICAgICAgLy8gQ29tYmF0IHJvbGwgaW5jbHVkZXMgb25seSAyIHBlcnNvbnMsIHJlbW92ZSB0aGUgcmVzdC5cbiAgICAgIGlmICh0aGlzLnJvbGxzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdGhpcy5yb2xscyA9IFt0aGlzLnJvbGxzWzBdLCB0aGlzLnJvbGxzWzFdXVxuICAgICAgICBmb3IgKGNvbnN0IHIgb2YgdGhpcy5yb2xscykge1xuICAgICAgICAgIGRlbGV0ZSByLndpbm5lclxuICAgICAgICAgIGRlbGV0ZSByLnRpZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEZpcnN0IHBlcnNvbiBhZGRlZCBpcyB0aGUgYXR0YWNrZXIuXG4gICAgICBpZiAodGhpcy5yb2xsc1swXSkgdGhpcy5yb2xsc1swXS5hdHRhY2tlciA9IHRydWVcblxuICAgICAgaWYgKHRoaXMucm9sbHNbMF0/LnJvbGxlZCAmJiB0aGlzLnJvbGxzWzFdPy5yb2xsZWQpIHtcbiAgICAgICAgaWYgKHRoaXMucm9sbHNbMF0ucGFzc2VkIHx8IHRoaXMucm9sbHNbMV0ucGFzc2VkKSB7XG4gICAgICAgICAgaWYgKHRoaXMucm9sbHNbMF0uc3VjY2Vzc0xldmVsID4gdGhpcy5yb2xsc1sxXS5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgICAgIHRoaXMucm9sbHNbMF0ud2lubmVyID0gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5yb2xsc1sxXS5zdWNjZXNzTGV2ZWwgPiB0aGlzLnJvbGxzWzBdLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICAgICAgdGhpcy5yb2xsc1sxXS53aW5uZXIgPSB0cnVlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFkdmFudGFnZUF0dGFja2VyKSB0aGlzLnJvbGxzWzBdLndpbm5lciA9IHRydWVcbiAgICAgICAgICAgIGVsc2UgdGhpcy5yb2xsc1sxXS53aW5uZXIgPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucm9sbHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBpZiAoYS5yb2xsZWQgJiYgIWIucm9sbGVkKSByZXR1cm4gLTFcbiAgICAgICAgaWYgKCFhLnJvbGxlZCAmJiBiLnJvbGxlZCkgcmV0dXJuIDFcbiAgICAgICAgaWYgKCFhLnJvbGxlZCAmJiAhYi5yb2xsZWQpIHJldHVybiAwXG4gICAgICAgIGlmIChhLnN1Y2Nlc3NMZXZlbCA+IGIuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICAgICAgICByZXR1cm4gLTFcbiAgICAgICAgfVxuICAgICAgICBpZiAoYS5zdWNjZXNzTGV2ZWwgPCBiLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgICAgICAgcmV0dXJuIDFcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb3Bwb3NlZFJvbGxUaWVCcmVha2VyJykpIHtcbiAgICAgICAgICBpZiAoYS5tb2RpZmllZFJlc3VsdCA+IGIubW9kaWZpZWRSZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgICAgICAgICByZXR1cm4gLTFcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGEubW9kaWZpZWRSZXN1bHQgPCBiLm1vZGlmaWVkUmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgICAgICAgICAgcmV0dXJuIDFcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGEucmF3VmFsdWUgPiBiLnJhd1ZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgICAgICAgICAgcmV0dXJuIC0xXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChhLnJhd1ZhbHVlIDwgYi5yYXdWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICAgICAgICAgIHJldHVybiAxXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwXG4gICAgICB9KVxuXG4gICAgICB0aGlzLndpbkNvdW50ID0gMFxuICAgICAgaWYgKHRoaXMucm9sbHNbMF0gJiYgdGhpcy5yb2xsc1swXS5yb2xsZWQgJiYgIXRoaXMucm9sbHNbMF0uZmFpbGVkKSB7XG4gICAgICAgIHRoaXMud2luQ291bnQgPSAxXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5yb2xscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMucm9sbHNbaV0gJiZcbiAgICAgICAgICAgIHRoaXMucm9sbHNbaV0ucm9sbGVkICYmXG4gICAgICAgICAgICB0aGlzLnJvbGxzWzBdLnN1Y2Nlc3NMZXZlbCA9PT0gdGhpcy5yb2xsc1tpXS5zdWNjZXNzTGV2ZWwgJiZcbiAgICAgICAgICAgIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvcHBvc2VkUm9sbFRpZUJyZWFrZXInKVxuICAgICAgICAgICAgICA/IHRoaXMucm9sbHNbMF0ubW9kaWZpZWRSZXN1bHQgPT09IHRoaXMucm9sbHNbaV0ubW9kaWZpZWRSZXN1bHRcbiAgICAgICAgICAgICAgOiB0aGlzLnJvbGxzWzBdLnJhd1ZhbHVlID09PSB0aGlzLnJvbGxzW2ldLnJhd1ZhbHVlKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy53aW5Db3VudCA9IHRoaXMud2luQ291bnQgKyAxXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yb2xscy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLnJvbGxzW2ldLndpbm5lciA9IGkgPCB0aGlzLndpbkNvdW50XG4gICAgICAgIHRoaXMucm9sbHNbaV0udGllID0gdGhpcy5yb2xsc1tpXS53aW5uZXIgJiYgdGhpcy53aW5Db3VudCA+IDFcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjbG9zZUNhcmQgKCkge1xuICAgIHRoaXMuY2xvc2VkID0gdHJ1ZVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQXVkaW9IZWxwZXIsIENPTkZJRywgZ2FtZSwgbWVyZ2VPYmplY3QgKi9cblxuaW1wb3J0IHsgUm9sbERpYWxvZyB9IGZyb20gJy4uLy4uL2FwcHMvcm9sbC1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdEaWNlIH0gZnJvbSAnLi4vLi4vZGljZS5qcydcbmltcG9ydCB7IFJvbGxDYXJkIH0gZnJvbSAnLi9yb2xsLWNhcmQuanMnXG5cbmV4cG9ydCBjbGFzcyBDb21iaW5lZENoZWNrQ2FyZCBleHRlbmRzIFJvbGxDYXJkIHtcbiAgc3RhdGljIGFzeW5jIGJpbmRMaXN0ZXJuZXJzIChodG1sKSB7XG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLnJvbGwtY2FyZC5jb21iaW5lZCAudG9nZ2xlLXN3aXRjaCcsXG4gICAgICB0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpXG4gICAgKVxuICAgIC8vIGh0bWwuZmluZCgnLnJvbGwtY2FyZCBhJykuY2xpY2soYXN5bmMgKGV2ZW50KSA9PiBDb21iaW5lZENoZWNrQ2FyZC5fb25DbGljayggZXZlbnQpKTtcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucm9sbC1jYXJkLmNvbWJpbmVkIGEnLFxuICAgICAgQ29tYmluZWRDaGVja0NhcmQuX29uQ2xpY2suYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucm9sbC1jYXJkLmNvbWJpbmVkIGJ1dHRvbicsXG4gICAgICBDb21iaW5lZENoZWNrQ2FyZC5fb25DbGljay5iaW5kKHRoaXMpXG4gICAgKVxuICB9XG5cbiAgc3RhdGljIGdldCBkZWZhdWx0Q29uZmlnICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdENvbmZpZywge1xuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY2FyZHMvY29tYmluZWQtcm9sbC5odG1sJyxcbiAgICAgIHR5cGU6ICdjb21iaW5lZENhcmQnLFxuICAgICAgdGl0bGU6ICdDb0M3LkNvbWJpbmVkUm9sbENhcmQnXG4gICAgfSlcbiAgfVxuXG4gIGdldCBjb25maWcgKCkge1xuICAgIHJldHVybiBDb21iaW5lZENoZWNrQ2FyZC5kZWZhdWx0Q29uZmlnXG4gIH1cblxuICBnZXQgc3VjY2Vzc0NvdW50ICgpIHtcbiAgICBpZiAodGhpcy5yb2xsZWQpIHtcbiAgICAgIGxldCBjb3VudCA9IDBcbiAgICAgIGZvciAoY29uc3QgciBvZiB0aGlzLnJvbGxzKSB7XG4gICAgICAgIGlmIChyLnBhc3NlZCkgY291bnQgKz0gMVxuICAgICAgfVxuICAgICAgcmV0dXJuIGNvdW50XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBtYWluQWN0b3JLZXkgKCkge1xuICAgIHJldHVybiB0aGlzLnJvbGxzWzBdPy5hY3Rvcj8uYWN0b3JLZXkgfHwgdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgc3VjY2VzcyAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLnN1Y2Nlc3NDb3VudCA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodGhpcy5hbnkpIHtcbiAgICAgIGlmICh0aGlzLnN1Y2Nlc3NDb3VudCA+IDApIHJldHVybiB0cnVlXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgaWYgKHRoaXMuYWxsKSB7XG4gICAgICBpZiAodGhpcy5zdWNjZXNzQ291bnQgPT09IHRoaXMucm9sbHMubGVuZ3RoKSByZXR1cm4gdHJ1ZVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBmYWlsdXJlICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuc3VjY2VzcyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gIXRoaXMuc3VjY2Vzc1xuICB9XG5cbiAgYXN5bmMgZ2V0SHRtbFJvbGwgKCkge1xuICAgIGlmICghdGhpcy5yb2xsZWQpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIGF3YWl0IGNoZWNrLl9wZXJmb3JtKHsgcm9sbDogdGhpcy5fcm9sbCwgc2lsZW50OiB0cnVlIH0pXG4gICAgcmV0dXJuIGF3YWl0IGNoZWNrLmdldEh0bWxSb2xsKHsgaGlkZVN1Y2Nlc3M6IHRydWUgfSlcbiAgfVxuXG4gIHByb2Nlc3MgKGRhdGEpIHtcbiAgICBzd2l0Y2ggKGRhdGEuYWN0aW9uKSB7XG4gICAgICBjYXNlICduZXcnOlxuICAgICAgICB0aGlzLmFkZFJvbGxEYXRhKGRhdGEpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ3JvbGwnOlxuICAgICAgICB0aGlzLmFkZFJvbGxEYXRhKGRhdGEpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ3VwZGF0ZVJvbGwnOiB7XG4gICAgICAgIHRoaXMudXBkYXRlUm9sbChkYXRhKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdhc3NpZ25Sb2xsJzoge1xuICAgICAgICB0aGlzLmFzc2lnblJvbGwoZGF0YSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICAgIGVsc2UgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxuICB9XG5cbiAgYXN5bmMgYXNzaWduUm9sbCAoZGF0YSkge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaWYgKCF0aGlzLnJvbGxlZCkge1xuICAgICAgICB0aGlzLnJvbGxlZCA9IHRydWVcbiAgICAgICAgdGhpcy5fcm9sbCA9IGRhdGEucm9sbFxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBkYXRhLm9wdGlvbnNcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uQ2xpY2sgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBhY3Rpb24gPSBhLmRhdGFzZXQuYWN0aW9uXG4gICAgY29uc3QgbGkgPSBhLmNsb3Nlc3QoJ2xpLmFjdG9yLXJvbGwnKVxuICAgIGNvbnN0IG1lc3NhZ2UgPSBhLmNsb3Nlc3QoJy5jaGF0LW1lc3NhZ2UnKVxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gYS5jbG9zZXN0KCdkaXYucm9sbC1jYXJkJylcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgQ29tYmluZWRDaGVja0NhcmQuZnJvbUhUTUxDYXJkRWxlbWVudChjYXJkRWxlbWVudClcbiAgICBjYXJkLm1lc3NhZ2VJZCA9IG1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWRcbiAgICBjb25zdCByYW5rID0gTnVtYmVyKGxpPy5kYXRhc2V0Py5yYW5rKVxuXG4gICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgIGNhc2UgJ3JlbW92ZS1yb2xsJzoge1xuICAgICAgICBjYXJkLnJlbW92ZVJvbGwocmFuaylcbiAgICAgICAgYXdhaXQgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2Nsb3NlLWNhcmQnOiB7XG4gICAgICAgIGNhcmQuY2xvc2VDYXJkKClcbiAgICAgICAgYXdhaXQgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JvbGwtY2FyZCc6IHtcbiAgICAgICAgY29uc3Qgcm9sbCA9IHt9XG5cbiAgICAgICAgaWYgKCFldmVudC5zaGlmdEtleSkge1xuICAgICAgICAgIGNvbnN0IHVzYWdlID0gYXdhaXQgUm9sbERpYWxvZy5jcmVhdGUoe1xuICAgICAgICAgICAgZGlzYWJsZUZsYXRUaHJlc2hvbGRNb2RpZmllcjpcbiAgICAgICAgICAgICAgZXZlbnQubWV0YUtleSB8fFxuICAgICAgICAgICAgICBldmVudC5jdHJsS2V5IHx8XG4gICAgICAgICAgICAgIGV2ZW50LmtleUNvZGUgPT09IDkxIHx8XG4gICAgICAgICAgICAgIGV2ZW50LmtleUNvZGUgPT09IDIyNCxcbiAgICAgICAgICAgIGRpc2FibGVGbGF0RGljZU1vZGlmaWVyOlxuICAgICAgICAgICAgICBldmVudC5tZXRhS2V5IHx8XG4gICAgICAgICAgICAgIGV2ZW50LmN0cmxLZXkgfHxcbiAgICAgICAgICAgICAgZXZlbnQua2V5Q29kZSA9PT0gOTEgfHxcbiAgICAgICAgICAgICAgZXZlbnQua2V5Q29kZSA9PT0gMjI0XG4gICAgICAgICAgfSlcbiAgICAgICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgICAgIHJvbGwuZGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnYm9udXNEaWNlJykpXG4gICAgICAgICAgICByb2xsLmRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICAgICAgICByb2xsLmZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXG4gICAgICAgICAgICByb2xsLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcihcbiAgICAgICAgICAgICAgdXNhZ2UuZ2V0KCdmbGF0VGhyZXNob2xkTW9kaWZpZXInKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgdHlwZTogdGhpcy5kZWZhdWx0Q29uZmlnLnR5cGUsXG4gICAgICAgICAgYWN0aW9uOiAnYXNzaWduUm9sbCcsXG4gICAgICAgICAgZnJvbUdNOiBnYW1lLnVzZXIuaXNHTSxcbiAgICAgICAgICBvcHRpb25zOiByb2xsXG4gICAgICAgIH1cbiAgICAgICAgZGF0YS5yb2xsID0gYXdhaXQgQ29DN0RpY2Uucm9sbChyb2xsLm1vZGlmaWVyIHx8IDApXG4gICAgICAgIEF1ZGlvSGVscGVyLnBsYXkoeyBzcmM6IENPTkZJRy5zb3VuZHMuZGljZSB9KVxuICAgICAgICBjYXJkLnByb2Nlc3MoZGF0YSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgIHVwZGF0ZTogZmFsc2UsXG4gICAgICAgICAgZGF0YTogYS5kYXRhc2V0LFxuICAgICAgICAgIGNsYXNzZXM6IGEuY2xhc3NMaXN0LFxuICAgICAgICAgIHRhcmdldDogYVxuICAgICAgICB9XG4gICAgICAgIGF3YWl0IENvQzdDaGVjay5hbHRlcihjYXJkLnJvbGxzW3JhbmtdLCBhY3Rpb24sIG9wdGlvbnMpXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgdHlwZTogdGhpcy5kZWZhdWx0Q29uZmlnLnR5cGUsXG4gICAgICAgICAgYWN0aW9uOiAndXBkYXRlUm9sbCcsXG4gICAgICAgICAgcmFuazogcmFuayxcbiAgICAgICAgICBmcm9tR006IGdhbWUudXNlci5pc0dNXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFnYW1lLnVzZXIuaXNHTSkgZGF0YS5yb2xsID0gY2FyZC5yb2xsc1tyYW5rXS5KU09OUm9sbERhdGFcbiAgICAgICAgY2FyZC5wcm9jZXNzKGRhdGEpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY29tcHV0ZSAoKSB7XG4gICAgaWYgKCF0aGlzLl9yb2xsKSByZXR1cm5cbiAgICBmb3IgKGNvbnN0IHIgb2YgdGhpcy5yb2xscykge1xuICAgICAgaWYgKCFyLnJvbGxlZCkge1xuICAgICAgICByLm1vZGlmaWVyID0gdGhpcy5vcHRpb25zLm1vZGlmaWVyIHx8IDBcbiAgICAgICAgci5kaWZmaWN1bHR5ID1cbiAgICAgICAgICB0aGlzLm9wdGlvbnMuZGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgICAgci5mbGF0RGljZU1vZGlmaWVyID0gdGhpcy5vcHRpb25zLmZsYXREaWNlTW9kaWZpZXIgfHwgMFxuICAgICAgICByLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IHRoaXMub3B0aW9ucy5mbGF0VGhyZXNob2xkTW9kaWZpZXIgfHwgMFxuICAgICAgICBhd2FpdCByLl9wZXJmb3JtKHsgcm9sbDogdGhpcy5fcm9sbCwgc2lsZW50OiB0cnVlIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJvbGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5yb2xsc1tpXS5yb2xsZWQpIHtcbiAgICAgICAgdGhpcy5yb2xsc1tpXS5faHRtbFJvbGwgPSBhd2FpdCB0aGlzLnJvbGxzW2ldLmdldEh0bWxSb2xsKHtcbiAgICAgICAgICBoaWRlRGljZVJlc3VsdDogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMucm9sbHMgPSB0aGlzLnJvbGxzLmZpbHRlcihyb2xsID0+IHtcbiAgICAgIHJldHVybiB0eXBlb2Ygcm9sbC5hY3Rvci5kYXRhICE9PSAndW5kZWZpbmVkJyAvLyBDaGVjayBpZiB0aGVyZSdzIGFuIGFjdG9yIHNldCBhbmQgaWYgdGhlcmUncyBvbmUgYW5kIGl0IGRvZXNudCBleGlzdCByZW1vdmUgaGltLlxuICAgIH0pXG5cbiAgICB0aGlzLl9odG1sUm9sbCA9IGF3YWl0IHRoaXMuZ2V0SHRtbFJvbGwoKVxuICB9XG5cbiAgY2xvc2VDYXJkICgpIHtcbiAgICB0aGlzLmNsb3NlZCA9IHRydWVcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBDT05TVCwgZ2FtZSwgVG9rZW4sIHRva2VuRGF0YSwgdWkgKi9cblxuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi9jaGVjay5qcydcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdNZWxlZUluaXRpYXRvciB9IGZyb20gJy4vY2hhdC9jb21iYXQvbWVsZWUtaW5pdGlhdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlVGFyZ2V0IH0gZnJvbSAnLi9jaGF0L2NvbWJhdC9tZWxlZS10YXJnZXQuanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVSZXNvbHRpb24gfSBmcm9tICcuL2NoYXQvY29tYmF0L21lbGVlLXJlc29sdXRpb24uanMnXG5pbXBvcnQgeyBDb0M3UmFuZ2VJbml0aWF0b3IgfSBmcm9tICcuL2NoYXQvcmFuZ2Vjb21iYXQuanMnXG5pbXBvcnQgeyBDb0M3Um9sbCwgY2hhdEhlbHBlciB9IGZyb20gJy4vY2hhdC9oZWxwZXIuanMnXG4vLyBpbXBvcnQgeyBDb0M3RGFtYWdlUm9sbCB9IGZyb20gJy4vY2hhdC9kYW1hZ2VjYXJkcy5qcyc7XG5pbXBvcnQgeyBDb0M3Q29uQ2hlY2sgfSBmcm9tICcuL2NoYXQvY29uY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3UGFyc2VyIH0gZnJvbSAnLi9hcHBzL3BhcnNlci5qcydcbmltcG9ydCB7IFNhbkNoZWNrQ2FyZCB9IGZyb20gJy4vY2hhdC9jYXJkcy9zYW4tY2hlY2suanMnXG5pbXBvcnQgeyBPcHBvc2VkQ2hlY2tDYXJkIH0gZnJvbSAnLi9jaGF0L2NhcmRzL29wcG9zZWQtcm9sbC5qcydcbmltcG9ydCB7IENvbWJpbmVkQ2hlY2tDYXJkIH0gZnJvbSAnLi9jaGF0L2NhcmRzL2NvbWJpbmVkLXJvbGwuanMnXG5pbXBvcnQgeyBJbnRlcmFjdGl2ZUNoYXRDYXJkIH0gZnJvbSAnLi9jaGF0L2ludGVyYWN0aXZlLWNoYXQtY2FyZC5qcydcbmltcG9ydCB7IERhbWFnZUNhcmQgfSBmcm9tICcuL2NoYXQvY2FyZHMvZGFtYWdlLmpzJ1xuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuL2RpY2UuanMnXG5cbmNvbnN0IENIQVRfQ09DN19NRVNTQUdFID0ge1xuICBGQUtFUk9MTDpcbiAgICAnPGRpdiBjbGFzcz1cImRpY2Utcm9sbFwiPjxkaXYgY2xhc3M9XCJkaWNlLXJlc3VsdFwiPjxkaXYgY2xhc3M9XCJkaWNlLWZvcm11bGFcIj4/Pz88L2Rpdj48aDQgY2xhc3M9XCJkaWNlLXRvdGFsXCI+PzwvaDQ+PC9kaXY+PC9kaXY+J1xufVxuZXhwb3J0IGNsYXNzIENvQzdDaGF0IHtcbiAgLy8gc3RhdGljIGNyZWF0ZUNoYXRNZXNzYWdlSG9vayhjaGF0TWVzc2FnZSwgb3B0aW9ucywgdXNlcil7XG4gIC8vIH1cblxuICBzdGF0aWMgcmVuZGVyQ2hhdE1lc3NhZ2VIb29rIChjaGF0TWVzc2FnZSwgaHRtbCkge1xuICAgIGlmIChjaGF0TWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ0dNU2VsZlJvbGwnKSAmJiAhZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGh0bWwuZmluZCgnLndoaXNwZXItdG8nKS5yZW1vdmUoKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmZsYXZvci10ZXh0JylcbiAgICAgICAgLnJlcGxhY2VXaXRoKFxuICAgICAgICAgIGA8c3BhbiBjbGFzcz1cImZsYXZvci10ZXh0XCI+JHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAnQ29DNy5Sb2xsU2VjcmV0RGljZSdcbiAgICAgICAgICApfTwvc3Bhbj5gXG4gICAgICAgIClcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5tZXNzYWdlLWNvbnRlbnQnKVxuICAgICAgICAucmVwbGFjZVdpdGgoXG4gICAgICAgICAgYDxkaXYgY2xhc3M9XCJtZXNzYWdlLWNvbnRlbnRcIj4ke0NIQVRfQ09DN19NRVNTQUdFLkZBS0VST0xMfTwvZGl2PmBcbiAgICAgICAgKVxuICAgIH1cblxuICAgIGlmIChjaGF0TWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ3JlbW92ZVdpc3BlclRhcmdldHMnKSAmJiAhZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGh0bWwuZmluZCgnLndoaXNwZXItdG8nKS5yZW1vdmUoKVxuICAgIH1cblxuICAgIGlmIChjaGF0TWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ2Zha2VSb2xsJykgJiYgZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5mbGF2b3ItdGV4dCcpXG4gICAgICAgIC5yZXBsYWNlV2l0aChnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuS2VlcGVyU2VudERlY295JykpXG4gICAgICBodG1sLmZpbmQoJy5tZXNzYWdlLWNvbnRlbnQnKS5yZW1vdmUoKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBmYWtlUm9sbE1lc3NhZ2UgKCkge1xuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgZmxhdm9yOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbFNlY3JldERpY2UnKSxcbiAgICAgIHdoaXNwZXI6IGdhbWUudXNlcnMucGxheWVycyxcbiAgICAgIHR5cGU6IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5XSElTUEVSLFxuICAgICAgZmxhZ3M6IHtcbiAgICAgICAgQ29DNzoge1xuICAgICAgICAgIEdNU2VsZlJvbGw6IGZhbHNlLFxuICAgICAgICAgIHJlbW92ZVdpc3BlclRhcmdldHM6IHRydWUsXG4gICAgICAgICAgZmFrZVJvbGw6IHRydWVcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGNvbnRlbnQ6IENIQVRfQ09DN19NRVNTQUdFLkZBS0VST0xMXG4gICAgfVxuXG4gICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKVxuICB9XG5cbiAgLy8gVE9ETyByZW1wbGFjZXIgbGVzIGdldEVsZW1lbnRzQnl4eHh4IHBhciBxdWVyeVNlbGVjdG9yXG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuICAgKiAgSW5pdCBzb2NrZXRzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gICAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIHN0YXRpYyByZWFkeSAoKSB7XG4gICAgLy8gY29uc29sZS5sb2coJy0tPkNvQzdDaGF0LnJlYWR5Jyk7XG4gICAgZ2FtZS5Db0M3ID0gJ2luaXQnXG4gIH1cblxuICAvLyBzdGF0aWMgb25NZXNzYWdlKCBkYXRhKSB7XG4gIC8vICBjb25zb2xlLmxvZygnLS0+Q29DN0NoYXQub25NZXNzYWdlJyk7XG4gIC8vICBjb25zb2xlLmxvZyhgbWVzc2FnZSByZWNlaXZlZCBzZW5kJmVyIDoke2RhdGEudXNlcn0gbWVzc2FnZSB0eXBlIDogJHtkYXRhLmFjdGlvbn0gZm9yIG1lc3NhZ2UgOiR7ZGF0YS5tZXNzYWdlSWR9YCk7XG4gIC8vIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG4gICAqICBDaGF0IE1lc3NhZ2UgSGVscGVycyAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICBzdGF0aWMgYXN5bmMgY2hhdExpc3RlbmVycyAoYXBwLCBodG1sKSB7XG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLmNhcmQtYnV0dG9ucyBidXR0b24nLFxuICAgICAgQ29DN0NoYXQuX29uQ2hhdENhcmRBY3Rpb24uYmluZCh0aGlzKVxuICAgIClcbiAgICAvLyBodG1sLm9uKCdjbGljaycsICcuY2FyZC1idXR0b25zIGJ1dHRvbicsIENvQzdDaGF0Ll9vbkNoYXRDYXJkVGVzdC5iaW5kKHRoaXMpKTtcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcuY2FyZC10aXRsZScsXG4gICAgICBDb0M3Q2hhdC5fb25DaGF0Q2FyZFRvZ2dsZUNvbnRlbnQuYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucmFkaW8tc3dpdGNoJyxcbiAgICAgIENvQzdDaGF0Ll9vbkNoYXRDYXJkUmFkaW9Td2l0Y2guYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucGFuZWwtc3dpdGNoJyxcbiAgICAgIENvQzdDaGF0Ll9vbkNoYXRDYXJkVG9nZ2xlU3dpdGNoLmJpbmQodGhpcylcbiAgICApXG5cbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcuc2ltcGxlLWZsYWcnLFxuICAgICAgQ29DN0NoYXQuX29uQ2hhdENhcmRUb2dnbGVTd2l0Y2guYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKCdjbGljaycsICcudm9sbGV5LXNpemUnLCBDb0M3Q2hhdC5fb25DaGF0Q2FyZFZvbGxleVNpemUuYmluZCh0aGlzKSlcblxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5kcm9wZG93bi1lbGVtZW50JyxcbiAgICAgIENvQzdDaGF0Ll9vbkRyb3BEb3duRWxlbWVudFNlbGVjdGVkLmJpbmQodGhpcylcbiAgICApXG4gICAgaHRtbC5vbignY2xpY2snLCAnLnNpbXBsZS10b2dnbGUnLCBDb0M3Q2hhdC5fb25Ub2dnbGVTZWxlY3RlZC5iaW5kKHRoaXMpKVxuICAgIC8vIGh0bWwub24oJ2NsaWNrJywgJy5pcy1vdXRudW1iZXJlZCcsIENvQzdDaGF0Ll9vbk91dG51bWJlcmVkU2VsZWN0ZWQuYmluZCh0aGlzKSk7XG5cbiAgICBodG1sLm9uKCdjbGljaycsICcudGFyZ2V0LXNlbGVjdG9yJywgQ29DN0NoYXQuX29uVGFyZ2V0U2VsZWN0LmJpbmQodGhpcykpXG5cbiAgICBodG1sLm9uKCdkYmxjbGljaycsICcub3Blbi1hY3RvcicsIENvQzdDaGF0Ll9vbk9wZW5BY3Rvci5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5vbignY2xpY2snLCAnLmNvYzctbGluaycsIGF3YWl0IENvQzdQYXJzZXIuX29uQ2hlY2suYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdkcmFnc3RhcnQnLCAnYS5jb2M3LWxpbmsnLCBDb0M3UGFyc2VyLl9vbkRyYWdDb0M3TGluay5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5vbignY2xpY2snLCAnY29jNy1pbmxpbmUtcmVzdWx0JywgQ29DN0NoYXQuX29uSW5saW5lLmJpbmQodGhpcykpXG5cbiAgICAvLyBSb2xsQ2FyZC5iaW5kTGlzdGVybmVycyggaHRtbCk7XG4gICAgT3Bwb3NlZENoZWNrQ2FyZC5iaW5kTGlzdGVybmVycyhodG1sKVxuICAgIENvbWJpbmVkQ2hlY2tDYXJkLmJpbmRMaXN0ZXJuZXJzKGh0bWwpXG4gIH1cblxuICBzdGF0aWMgX29uT3BlbkFjdG9yIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBhY3RvcktleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3RvcktleVxuICAgIGlmIChhY3RvcktleSkge1xuICAgICAgY29uc3QgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShhY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBpZiAoYWN0b3IuaXNPd25lcikgYWN0b3Iuc2hlZXQucmVuZGVyKHRydWUpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIG9uVXBkYXRlQ2hhdE1lc3NhZ2UgKGNoYXRNZXNzYWdlKSB7XG4gICAgdWkuY2hhdC5zY3JvbGxCb3R0b20oKVxuXG4gICAgLy8gaWYoIGNoYXRNZXNzYWdlLmdldEZsYWcoICdDb0M3JywgJ3JldmVsZWQnKSl7XG4gICAgLy8gfVxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSAmJiBjaGF0TWVzc2FnZS5kYXRhLnR5cGUgPT09IDApIHtcbiAgICAgIGNvbnN0IGNhcmQgPSAkKGNoYXRNZXNzYWdlLmRhdGEuY29udGVudClbMF1cbiAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnbWVsZWUnKSkge1xuICAgICAgICBpZiAoY2FyZC5kYXRhc2V0LnJlc29sdmVkID09PSAndHJ1ZScpIHtcbiAgICAgICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2luaXRpYXRvcicpKSB7XG4gICAgICAgICAgICBpZiAoY2FyZC5kYXRhc2V0LnRhcmdldENhcmQpIHtcbiAgICAgICAgICAgICAgY29uc3QgaW5pdGlhdG9yID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21NZXNzYWdlSWQoXG4gICAgICAgICAgICAgICAgY2hhdE1lc3NhZ2UuaWRcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbU1lc3NhZ2VJZChcbiAgICAgICAgICAgICAgICBpbml0aWF0b3IudGFyZ2V0Q2FyZFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGlmICh0YXJnZXQucmVzb2x2ZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNvbHV0aW9uQ2FyZCA9IG5ldyBDb0M3TWVsZWVSZXNvbHRpb24oXG4gICAgICAgICAgICAgICAgICBjaGF0TWVzc2FnZS5pZCxcbiAgICAgICAgICAgICAgICAgIHRhcmdldC5tZXNzYWdlSWQsXG4gICAgICAgICAgICAgICAgICB0YXJnZXQucmVzb2x1dGlvbkNhcmRcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgYXdhaXQgcmVzb2x1dGlvbkNhcmQucmVzb2x2ZSgpXG4gICAgICAgICAgICAgICAgaWYgKCFpbml0aWF0b3IuY2hlY2tSZXZlYWxlZCkgYXdhaXQgaW5pdGlhdG9yLnJldmVhbENoZWNrKClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29uc3QgaW5pdGlhdG9yID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21NZXNzYWdlSWQoXG4gICAgICAgICAgICAgICAgY2hhdE1lc3NhZ2UuaWRcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBpZiAoaW5pdGlhdG9yLnJlc29sdXRpb25DYXJkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzb2x1dGlvbkNhcmQgPSBuZXcgQ29DN01lbGVlUmVzb2x0aW9uKFxuICAgICAgICAgICAgICAgICAgY2hhdE1lc3NhZ2UuaWQsXG4gICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgaW5pdGlhdG9yLnJlc29sdXRpb25DYXJkXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGF3YWl0IHJlc29sdXRpb25DYXJkLnJlc29sdmUoKVxuICAgICAgICAgICAgICAgIGlmICghaW5pdGlhdG9yLmNoZWNrUmV2ZWFsZWQpIGF3YWl0IGluaXRpYXRvci5yZXZlYWxDaGVjaygpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXJnZXQnKSkge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gQ29DN01lbGVlVGFyZ2V0LmdldEZyb21NZXNzYWdlSWQoY2hhdE1lc3NhZ2UuaWQpXG4gICAgICAgICAgICBjb25zdCByZXNvbHV0aW9uQ2FyZCA9IG5ldyBDb0M3TWVsZWVSZXNvbHRpb24oXG4gICAgICAgICAgICAgIHRhcmdldC5wYXJlbnRNZXNzYWdlSWQsXG4gICAgICAgICAgICAgIGNoYXRNZXNzYWdlLmlkLFxuICAgICAgICAgICAgICB0YXJnZXQucmVzb2x1dGlvbkNhcmRcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGF3YWl0IHJlc29sdXRpb25DYXJkLnJlc29sdmUoKVxuICAgICAgICAgICAgaWYgKCF0YXJnZXQubWVsZWVJbml0aWF0b3IuY2hlY2tSZXZlYWxlZCkge1xuICAgICAgICAgICAgICBhd2FpdCB0YXJnZXQubWVsZWVJbml0aWF0b3IucmV2ZWFsQ2hlY2soKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyByZW5kZXJNZXNzYWdlSG9vayAobWVzc2FnZSwgaHRtbCkge1xuICAgIHVpLmNoYXQuc2Nyb2xsQm90dG9tKClcblxuICAgIEludGVyYWN0aXZlQ2hhdENhcmQuYmluZExpc3RlbmVycyhodG1sKVxuXG4gICAgaWYgKG1lc3NhZ2UuZ2V0RmxhZygnQ29DNycsICdjaGVja1JldmVhbGVkJykpIHtcbiAgICAgIGh0bWwuZmluZCgnLmRpY2Utcm9sbCcpLnJlbW92ZUNsYXNzKCdnbS12aXNpYmxlLW9ubHknKVxuICAgICAgaHRtbFswXS5kYXRhc2V0LmNoZWNrUmV2ZWFsZWQgPSB0cnVlXG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIHNob3dpbmcgZHJvcGRvd24gc2VsZWN0aW9uXG4gICAgaHRtbC5maW5kKCcuZHJvcGJ0bicpLmNsaWNrKGV2ZW50ID0+XG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICAgIC5jbG9zZXN0KCcuZHJvcGRvd24nKVxuICAgICAgICAucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duLWNvbnRlbnQnKVxuICAgICAgICAuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpXG4gICAgKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuZHJvcGRvd24nKVxuICAgICAgLm1vdXNlbGVhdmUoZXZlbnQgPT5cbiAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tY29udGVudCcpXG4gICAgICAgICAgLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKVxuICAgICAgKVxuXG4gICAgLy8gY29uc29sZS5sb2coJyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi0tPkNvQzdDaGF0Lm1lc3NhZ2VMaXN0ZW5lcnMgbWVzc2FnZSA6JyArIG1lc3NhZ2UuaWQpO1xuICAgIC8vIG1lc3NhZ2UuZGF0YS5jb250ZW50ID0gXCJcIjtcbiAgICAvLyBkYXRhLm1lc3NhZ2UuY29udGVudCA9IFwiXCI7XG5cbiAgICAvLyBXaGVuIGEgbmV3IGNhcmQgaXMgcHVibGlzaGVkLCBjaGVjayB3ZXRoZXIgaXQncyBhIHJvbGwgdGhhdCBtb2RpZmllcyBhbiBvdGhlciBjYXJkLlxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgY29uc3QgY2FyZCA9IGh0bWxbMF0ucXVlcnlTZWxlY3RvcignLmNvYzcuY2hhdC1jYXJkJylcbiAgICAgIGlmIChjYXJkKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBjYXJkLmNsYXNzTGlzdC5jb250YWlucygncm9sbC1jYXJkJykgJiZcbiAgICAgICAgICAhKGNhcmQuZGF0YXNldC5wcm9jZXNzZWQgPT09ICd0cnVlJykgJiZcbiAgICAgICAgICBjYXJkLmRhdGFzZXQucmVmTWVzc2FnZUlkXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IHJvbGwgPSBDb0M3Um9sbC5nZXRGcm9tRWxlbWVudChjYXJkKVxuXG4gICAgICAgICAgaWYgKGNhcmQuZGF0YXNldC5zaWRlID09PSAndGFyZ2V0Jykge1xuICAgICAgICAgICAgcm9sbC5kZWZlbmRhbnRJZCA9IGNhcmQuZGF0YXNldC50b2tlbklkXG4gICAgICAgICAgICAgID8gY2FyZC5kYXRhc2V0LnRva2VuSWRcbiAgICAgICAgICAgICAgOiBjYXJkLmRhdGFzZXQuYWN0b3JJZFxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY2FyZC5kYXRhc2V0LnNpZGUgPT09ICdpbml0aWF0b3InKSB7XG4gICAgICAgICAgICByb2xsLmluaXRpYXRvcklkID0gY2FyZC5kYXRhc2V0LnRva2VuSWRcbiAgICAgICAgICAgICAgPyBjYXJkLmRhdGFzZXQudG9rZW5JZFxuICAgICAgICAgICAgICA6IGNhcmQuZGF0YXNldC5hY3RvcklkXG4gICAgICAgICAgfVxuICAgICAgICAgIGNhcmQuZGF0YXNldC5wcm9jZXNzZWQgPSAndHJ1ZSdcblxuICAgICAgICAgIENvQzdDaGF0LnVwZGF0ZUNvbWJhdENhcmRUYXJnZXQocm9sbClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHVzZXJPbmx5ID0gaHRtbC5maW5kKCcudGFyZ2V0LW9ubHknKVxuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiB1c2VyT25seSkge1xuICAgICAgaWYgKCFnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgICAgY29uc3QgYWN0b3JJZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWFjdG9yLWlkJylcbiAgICAgICAgaWYgKGFjdG9ySWQpIHtcbiAgICAgICAgICBpZiAoZ2FtZS5hY3RvcnMuZ2V0KGFjdG9ySWQpLmlzT3duZXIpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBnbU9ubHkgPSBodG1sLmZpbmQoJy5nbS1vbmx5JylcbiAgICBmb3IgKGNvbnN0IHpvbmUgb2YgZ21Pbmx5KSB7XG4gICAgICBpZiAoIWdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIHpvbmUuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHVzZXJWaXNpYmxlT25seSA9IGh0bWwuZmluZCgnLnVzZXItdmlzaWJsZS1vbmx5JylcbiAgICBmb3IgKGNvbnN0IGVsZW0gb2YgdXNlclZpc2libGVPbmx5KSB7XG4gICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIGVsZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgIH1cblxuICAgIGNvbnN0IGdtVmlzaWJsZU9ubHkgPSBodG1sLmZpbmQoJy5nbS12aXNpYmxlLW9ubHknKVxuICAgIGZvciAoY29uc3QgZWxlbSBvZiBnbVZpc2libGVPbmx5KSB7XG4gICAgICBpZiAoIWdhbWUudXNlci5pc0dNKSBlbGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICB9XG5cbiAgICBjb25zdCBvd25lclZpc2libGVPbmx5ID0gaHRtbC5maW5kKCcub3duZXItdmlzaWJsZS1vbmx5JylcbiAgICBmb3IgKGNvbnN0IHpvbmUgb2Ygb3duZXJWaXNpYmxlT25seSkge1xuICAgICAgLy8gVHJ5IHJldHJpZXZpbmcgYWN0b3JcbiAgICAgIGxldCBhY3RvciA9IENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoem9uZS5kYXRhc2V0Py5hY3RvcktleSkgLy8gVHJ5IHdpdGggc2VsZi5cbiAgICAgIGlmICghYWN0b3IpIGFjdG9yID0gQ29DN0NoYXQuX2dldENoYXRDYXJkQWN0b3Ioem9uZS5jbG9zZXN0KCcuY2hhdC1jYXJkJykpIC8vIFRyeSB3aXRoIGNsb3Nlc3QgY2hhdCBjYXJkLlxuICAgICAgaWYgKCFhY3Rvcikge1xuICAgICAgICBhY3RvciA9IENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoem9uZS5wYXJlbnRFbGVtZW50LmRhdGFzZXQuYWN0b3JLZXkpIC8vIFRyeSB3aXRoIHBhcmVudCBlbGVtZW50LlxuICAgICAgfVxuICAgICAgaWYgKCFhY3Rvcikge1xuICAgICAgICBhY3RvciA9IENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoXG4gICAgICAgICAgem9uZS5jbG9zZXN0KCdbZGF0YS1hY3Rvci1rZXldJyk/LmRhdGFzZXQuYWN0b3JLZXlcbiAgICAgICAgKSAvLyBUcnkgd2l0aCBjbG9zZXN0IGRhdGEtYWN0b3Ita2V5XG4gICAgICB9XG4gICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgIGFjdG9yID0gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleShcbiAgICAgICAgICB6b25lLmNsb3Nlc3QoJ1tkYXRhLXRva2VuLWtleV0nKT8uZGF0YXNldC5hY3RvcktleVxuICAgICAgICApIC8vIFRyeSB3aXRoIGNsb3Nlc3QgZGF0YS10b2tlbi1rZXlcbiAgICAgIH1cblxuICAgICAgLy8gY29uc3QgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoIGFjdG9ySWQpO1xuICAgICAgaWYgKChhY3RvciAmJiAhYWN0b3IuaXNPd25lcikgfHwgZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgem9uZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICB9IC8vIGlmIGN1cnJlbnQgdXNlciBkb2Vzbid0IG93biB0aGlzIGhlIGNhbid0IGludGVycmFjdFxuICAgICAgLy8gaWYoICFDb0M3Q2hhdC5pc0NhcmRPd25lciggem9uZS5jbG9zZXN0KCcuY2hhdC1jYXJkJykpKSB7em9uZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO31cbiAgICB9XG5cbiAgICBpZiAoIWdhbWUudXNlci5pc0dNKSB7XG4gICAgICAvLyBHTSBjYW4gc2VlIGV2ZXJ5dGhpbmdcbiAgICAgIGNvbnN0IG93bmVyT25seSA9IGh0bWwuZmluZCgnLm93bmVyLW9ubHknKVxuICAgICAgZm9yIChjb25zdCB6b25lIG9mIG93bmVyT25seSkge1xuICAgICAgICAvLyBUcnkgcmV0cmlldmluZyBhY3RvclxuICAgICAgICBsZXQgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KHpvbmUuZGF0YXNldD8uYWN0b3JLZXkpIC8vIFRyeSB3aXRoIHNlbGYuXG4gICAgICAgIGlmICghYWN0b3IpIHtcbiAgICAgICAgICBhY3RvciA9IENvQzdDaGF0Ll9nZXRDaGF0Q2FyZEFjdG9yKHpvbmUuY2xvc2VzdCgnLmNoYXQtY2FyZCcpKSAvLyBUcnkgd2l0aCBjbG9zZXN0IGNoYXQgY2FyZC5cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgICAgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KHpvbmUucGFyZW50RWxlbWVudC5kYXRhc2V0LmFjdG9yS2V5KSAvLyBUcnkgd2l0aCBwYXJlbnQgZWxlbWVudC5cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgICAgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KFxuICAgICAgICAgICAgem9uZS5jbG9zZXN0KCdbZGF0YS1hY3Rvci1rZXldJyk/LmRhdGFzZXQuYWN0b3JLZXlcbiAgICAgICAgICApIC8vIFRyeSB3aXRoIGNsb3Nlc3QgZGF0YS1hY3Rvci1rZXlcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgICAgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KFxuICAgICAgICAgICAgem9uZS5jbG9zZXN0KCdbZGF0YS10b2tlbi1rZXldJyk/LmRhdGFzZXQuYWN0b3JLZXlcbiAgICAgICAgICApIC8vIFRyeSB3aXRoIGNsb3Nlc3QgZGF0YS10b2tlbi1rZXlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNvbnN0IGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KCBhY3RvcklkKTtcbiAgICAgICAgaWYgKChhY3RvciAmJiAhYWN0b3IuaXNPd25lcikgfHwgKCFhY3RvciAmJiAhZ2FtZS51c2VyLmlzR00pKSB7XG4gICAgICAgICAgem9uZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgIH0gLy8gaWYgY3VycmVudCB1c2VyIGRvZXNuJ3Qgb3duIHRoaXMgaGUgY2FuJ3QgaW50ZXJyYWN0XG4gICAgICAgIC8vIGlmKCAhQ29DN0NoYXQuaXNDYXJkT3duZXIoIHpvbmUuY2xvc2VzdCgnLmNoYXQtY2FyZCcpKSkge3pvbmUuc3R5bGUuZGlzcGxheSA9ICdub25lJzt9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGdtU2VsZWN0T25seSA9IGh0bWwuZmluZCgnLmdtLXNlbGVjdC1vbmx5JylcbiAgICAgIGZvciAoY29uc3Qgc2VsZWN0IG9mIGdtU2VsZWN0T25seSkge1xuICAgICAgICBzZWxlY3QuY2xhc3NMaXN0LmFkZCgnaW5hY3RpdmUnKVxuICAgICAgICBzZWxlY3QuY2xhc3NMaXN0LnJlbW92ZSgnc2ltcGxlLWZsYWcnKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgYWN0aW9uVHlwZVN0cmluZyAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGZpZ2h0QmFjazogJ0NvQzcuZmlnaHRCYWNrJyxcbiAgICAgIG1hbmV1dmVyOiAnQ29DNy5tYW5ldXZlcicsXG4gICAgICBkb2RnaW5nOiAnQ29DNy5kb2RnZSdcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX29uVGFyZ2V0U2VsZWN0IChldmVudCkge1xuICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmtleSlcbiAgICBjb25zdCB0YXJnZXRzU2VsZWN0b3IgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy50YXJnZXRzLXNlbGVjdG9yJylcbiAgICBmb3IgKGNvbnN0IGkgb2YgdGFyZ2V0c1NlbGVjdG9yLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZycpKSB7XG4gICAgICBpLnN0eWxlLmJvcmRlciA9ICdub25lJ1xuICAgIH1cbiAgICB0YXJnZXRzU2VsZWN0b3JcbiAgICAgIC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1rZXk9XCIke2luZGV4fVwiXWApXG4gICAgICAucXVlcnlTZWxlY3RvcignaW1nJykuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCAjMDAwJ1xuICAgIGNvbnN0IHRhcmdldHMgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy50YXJnZXRzJylcbiAgICBmb3IgKGNvbnN0IHQgb2YgdGFyZ2V0cy5xdWVyeVNlbGVjdG9yQWxsKCcudGFyZ2V0JykpIHtcbiAgICAgIHQuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgdC5kYXRhc2V0LmFjdGl2ZSA9ICdmYWxzZSdcbiAgICB9XG4gICAgY29uc3QgdGFyZ2V0VG9EaXNwbGF5ID0gdGFyZ2V0cy5xdWVyeVNlbGVjdG9yKFxuICAgICAgYFtkYXRhLXRhcmdldC1rZXk9XCIke2luZGV4fVwiXWBcbiAgICApXG4gICAgdGFyZ2V0VG9EaXNwbGF5LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgdGFyZ2V0VG9EaXNwbGF5LmRhdGFzZXQuYWN0aXZlID0gJ3RydWUnXG4gICAgLy8gY29uc3QgY2hhdENhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5jaGF0LWNhcmQucmFuZ2UnKTtcbiAgICAvLyBjb25zdCByYW5nZUluaXRpYXRvciA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZCggY2hhdENhcmQpO1xuICB9XG5cbiAgc3RhdGljIF9vbkRyb3BEb3duRWxlbWVudFNlbGVjdGVkIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5jaGF0LWNhcmQnKVxuICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygndGFyZ2V0JykpIHtcbiAgICAgIENvQzdNZWxlZVRhcmdldC51cGRhdGVTZWxlY3RlZChjYXJkLCBldmVudClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIGNsZWFyIGFsbCBkcm9wIGRvd24gYW5kIGhpZ2hsaWdodCB0aGlzIHBhcnRpY3VsYXIgb25lXG4gICAgY29uc3QgZHJvcERvd25Cb3hlcyA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIC5jbG9zZXN0KCcucmVzcG9uc2Utc2VsZWN0aW9uJylcbiAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKCcudG9nZ2xlLXN3aXRjaCcpXG4gICAgZm9yIChjb25zdCBkcGRuQm94IG9mIGRyb3BEb3duQm94ZXMpIHtcbiAgICAgIGRwZG5Cb3guY2xhc3NMaXN0LnJlbW92ZSgnc3dpdGNoZWQtb24nKVxuICAgIH1cbiAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy50b2dnbGUtc3dpdGNoJykuY2xhc3NMaXN0LmFkZCgnc3dpdGNoZWQtb24nKVxuXG4gICAgLy8gY2xvc2UgZHJvcGRvd25cbiAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5kcm9wZG93bi1jb250ZW50JykuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpXG5cbiAgICAvLyBEaXNwbGF5IHRoZSByb2xsIGJ1dHRvblxuICAgIGNvbnN0IHNlbGVjdGVkQm94ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgLmNsb3Nlc3QoJy5kZWZlbmRlci1hY3Rpb24tc2VsZWN0JylcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0ZWQtYWN0aW9uJylcbiAgICBzZWxlY3RlZEJveC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAgIGNvbnN0IGJ1dHRvbiA9IHNlbGVjdGVkQm94LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpXG5cbiAgICAvLyBQYXNzIHRoZSBpbml0aWF0b3IgSWQgLSBCdWlsZCBjYW4gYmUgcmV0cmlldmVkIGZyb20gdGhhdFxuXG4gICAgLy8gUGFzcyB0aGUgaW5pdGlhdG9yIGl0ZW1cblxuICAgIC8vIFBhc3MgdGhlIGRlZmVuZGFudCBJZFxuXG4gICAgLy8gUGFzcyB0aGUgZGVmZW5kYW50IGFjdGlvblxuICAgIGJ1dHRvbi5kYXRhc2V0LmFjdGlvbiA9ICdkZWZlbmRpbmcnXG4gICAgYnV0dG9uLmRhdGFzZXQuYWN0aW9uVHlwZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25cbiAgICBidXR0b24uZGF0YXNldC5kZWZlbmRlckNob2ljZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25cbiAgICBidXR0b24uZGF0YXNldC5za2lsbElkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWRcbiAgICBidXR0b24uZGF0YXNldC5za2lsbFZhbHVlID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsVmFsdWVcbiAgICBidXR0b24uZGF0YXNldC5za2lsbE5hbWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxOYW1lXG4gICAgYnV0dG9uLmRhdGFzZXQuaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LndlYXBvbklkXG4gICAgYnV0dG9uLmRhdGFzZXQuaXRlbU5hbWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQud2VhcG9uTmFtZVxuXG4gICAgLy8gUHV0IHNvbWUgdGV4dCBpbiB0aGUgYnV0dG9uXG4gICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uKSB7XG4gICAgICBjYXNlICdtYW5ldXZlcic6XG4gICAgICAgIGJ1dHRvbi5pbm5lclRleHQgPSBgJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgQ09DNy5jb21iYXRDYXJkc1tldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uXVxuICAgICAgICApfSA6ICR7ZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsTmFtZX0gKCR7XG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsVmFsdWVcbiAgICAgICAgfSUpYFxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnZmlnaHRCYWNrJzpcbiAgICAgICAgYnV0dG9uLmlubmVyVGV4dCA9IGAke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICBDT0M3LmNvbWJhdENhcmRzW2V2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25dXG4gICAgICAgICl9IDogJHtldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQud2VhcG9uTmFtZX0gKCR7XG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsVmFsdWVcbiAgICAgICAgfSUpYFxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cbiAgICAvLyBTYXZlIGFjdGlvbiBmb3IgdGhlIHJvbGxcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25JbmxpbmUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG5cbiAgICBpZiAoYS5jbGFzc0xpc3QuY29udGFpbnMoJ2lubGluZS1yZXN1bHQnKSkge1xuICAgICAgaWYgKGEuY2xhc3NMaXN0LmNvbnRhaW5zKCdleHBhbmRlZCcpKSB7XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suX2NvbGxhcHNlSW5saW5lUmVzdWx0KGEpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLl9leHBhbmRJbmxpbmVSZXN1bHQoYSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX29uVG9nZ2xlU2VsZWN0ZWQgKGV2ZW50KSB7XG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmNoYXQtY2FyZCcpXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXJnZXQnKSkge1xuICAgICAgQ29DN01lbGVlVGFyZ2V0LnVwZGF0ZVNlbGVjdGVkKGNhcmQsIGV2ZW50KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkID09PSAnJykge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JOb0RvZGdlU2tpbGwnKSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIGNsZWFyIGFsbCBkcm9wIGRvd24gYW5kIGhpZ2hsaWdodCB0aGlzIHBhcnRpY3VsYXIgb25lXG4gICAgY29uc3QgZHJvcERvd25Cb3hlcyA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIC5jbG9zZXN0KCcucmVzcG9uc2Utc2VsZWN0aW9uJylcbiAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKCcudG9nZ2xlLXN3aXRjaCcpXG4gICAgZm9yIChjb25zdCBkcGRuQm94IG9mIGRyb3BEb3duQm94ZXMpIHtcbiAgICAgIGRwZG5Cb3guY2xhc3NMaXN0LnJlbW92ZSgnc3dpdGNoZWQtb24nKVxuICAgIH1cbiAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3N3aXRjaGVkLW9uJykgLy8gTmVlZCB0byB0ZXN0IGlmIGl0J3MgcmVhbGx5IGEgZG9kZ2UgISEhXG5cbiAgICAvLyBTYXZlIGFjdGlvbiBmb3IgdGhlIHJvbGxcbiAgICBjb25zdCBzZWxlY3RlZEJveCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIC5jbG9zZXN0KCcuZGVmZW5kZXItYWN0aW9uLXNlbGVjdCcpXG4gICAgICAucXVlcnlTZWxlY3RvcignLnNlbGVjdGVkLWFjdGlvbicpXG4gICAgc2VsZWN0ZWRCb3guc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICBjb25zdCBidXR0b24gPSBzZWxlY3RlZEJveC5xdWVyeVNlbGVjdG9yKCdidXR0b24nKVxuXG4gICAgYnV0dG9uLmRhdGFzZXQuYWN0aW9uID0gJ2RlZmVuZGluZydcbiAgICBidXR0b24uZGF0YXNldC5hY3Rpb25UeXBlID0gJ2RvZGdpbmcnXG4gICAgYnV0dG9uLmRhdGFzZXQuZGVmZW5kZXJDaG9pY2UgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uXG4gICAgYnV0dG9uLmRhdGFzZXQuc2tpbGxJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXG4gICAgYnV0dG9uLmRhdGFzZXQuc2tpbGxWYWx1ZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbFZhbHVlXG4gICAgYnV0dG9uLmRhdGFzZXQuc2tpbGxOYW1lID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsTmFtZVxuXG4gICAgYnV0dG9uLmlubmVyVGV4dCA9IGAke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgIENPQzcuY29tYmF0Q2FyZHNbZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvbl1cbiAgICApfSA6ICR7ZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsTmFtZX0gKCR7XG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxWYWx1ZVxuICAgIH0lKWBcbiAgfVxuXG4gIHN0YXRpYyBfb25DaGF0Q2FyZFJhZGlvU3dpdGNoIChldmVudCkge1xuICAgIC8vIGNvbnNvbGUubG9nKCctLT5Db0M3Q2hhdC5fb25DaGF0Q2FyZFJhZGlvU3dpdGNoJyk7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IG9wdGlvbkxpc3QgPSBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcbiAgICAgICdyYWRpby1zd2l0Y2gnXG4gICAgKVxuICAgIGxldCBpbmRleFxuICAgIGZvciAoaW5kZXggPSAwOyBpbmRleCA8IG9wdGlvbkxpc3QubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gb3B0aW9uTGlzdFtpbmRleF1cbiAgICAgIGlmIChlbGVtZW50LmRhdGFzZXQucHJvcGVydHkgPT09IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5wcm9wZXJ0eSkge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3N3aXRjaGVkLW9uJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnc3dpdGNoZWQtb24nKVxuICAgICAgfVxuICAgIH1cbiAgICBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC5zZWxlY3RlZCA9XG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucHJvcGVydHlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25DaGF0Q2FyZFZvbGxleVNpemUgKGV2ZW50KSB7XG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmNoYXQtY2FyZCcpXG5cbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3JhbmdlJykpIHtcbiAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnaW5pdGlhdG9yJykpIHtcbiAgICAgICAgY29uc3QgcmFuZ2VDYXJkID0gQ29DN1JhbmdlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaW5jcmVhc2UnKSkge1xuICAgICAgICAgIHJhbmdlQ2FyZC5jaGFuZ2VWb2xsZXlTaXplKDEpXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2RlY3JlYXNlJykpIHtcbiAgICAgICAgICByYW5nZUNhcmQuY2hhbmdlVm9sbGV5U2l6ZSgtMSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25DaGF0Q2FyZFRvZ2dsZVN3aXRjaCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuY2hhdC1jYXJkJylcbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ21lbGVlJykpIHtcbiAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnaW5pdGlhdG9yJykpIHtcbiAgICAgICAgQ29DN01lbGVlSW5pdGlhdG9yLnVwZGF0ZUNhcmRTd2l0Y2goZXZlbnQpXG4gICAgICB9XG5cbiAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygndGFyZ2V0JykpIHtcbiAgICAgICAgQ29DN01lbGVlVGFyZ2V0LnVwZGF0ZUNhcmRTd2l0Y2goZXZlbnQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyYW5nZScpKSB7XG4gICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2luaXRpYXRvcicpKSB7XG4gICAgICAgIENvQzdSYW5nZUluaXRpYXRvci51cGRhdGVDYXJkU3dpdGNoKGV2ZW50KVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnZGFtYWdlJykpIHtcbiAgICAgIC8vIENvQzdJdGVtLnVwZGF0ZUNhcmRTd2l0Y2goIGV2ZW50KTtcbiAgICB9XG5cbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3JvbGwtY2FyZCcpKSB7XG4gICAgICBDb0M3Q2hlY2sudXBkYXRlQ2FyZFN3aXRjaChldmVudClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBBY3RvciB3aGljaCBpcyB0aGUgYXV0aG9yIG9mIGEgY2hhdCBjYXJkXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNhcmQgICAgVGhlIGNoYXQgY2FyZCBiZWluZyB1c2VkXG4gICAqIEByZXR1cm4ge0FjdG9yfG51bGx9ICAgICAgICAgVGhlIEFjdG9yIGVudGl0eSBvciBudWxsXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGF0aWMgX2dldENoYXRDYXJkQWN0b3IgKGNhcmQpIHtcbiAgICAvLyBpZiBkYXRhc2V0Lm9iamVjdCBpcyB0aGVyZSA9PiBuZWVkIHRvIHVuZXNjYXBlIHRoaW5ncyAhIVxuICAgIC8vIGlmIG5vdCB1c2UgdGhlIGRhdGFzZXQgZGlyZWN0bHkuXG4gICAgY29uc3QgY2FyZERhdGEgPSBjYXJkLmRhdGFzZXQub2JqZWN0XG4gICAgICA/IEpTT04ucGFyc2UodW5lc2NhcGUoY2FyZC5kYXRhc2V0Lm9iamVjdCkpXG4gICAgICA6IGNhcmQuZGF0YXNldFxuXG4gICAgaWYgKGNhcmREYXRhLmFjdG9yS2V5KSByZXR1cm4gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleShjYXJkRGF0YS5hY3RvcktleSlcblxuICAgIC8vIENhc2UgMSAtIGEgc3ludGhldGljIGFjdG9yIGZyb20gYSBUb2tlblxuICAgIGNvbnN0IHRva2VuS2V5ID0gY2FyZERhdGEudG9rZW5JZFxuICAgIGlmICh0b2tlbktleSkge1xuICAgICAgY29uc3QgW3NjZW5lSWQsIHRva2VuSWRdID0gdG9rZW5LZXkuc3BsaXQoJy4nKVxuICAgICAgaWYgKHNjZW5lSWQgPT09ICdUT0tFTicpIHtcbiAgICAgICAgcmV0dXJuIGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxuICAgICAgICBpZiAoIXRva2VuKSByZXR1cm4gbnVsbFxuICAgICAgICByZXR1cm4gdG9rZW4uYWN0b3IgfHwgbmV3IFRva2VuKHRva2VuRGF0YSkuYWN0b3JcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDYXNlIDIgLSB1c2UgQWN0b3IgSUQgZGlyZWN0b3J5XG4gICAgY29uc3QgYWN0b3JJZCA9IGNhcmREYXRhLmFjdG9ySWRcbiAgICBpZiAoYWN0b3JJZCkgcmV0dXJuIGdhbWUuYWN0b3JzLmdldChhY3RvcklkKVxuXG4gICAgY29uc3QgbWVzc2FnZSA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKVxuICAgIGNvbnN0IG1lc3NhZ2VJZCA9IG1lc3NhZ2UgPyBtZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkIDogbnVsbFxuICAgIGlmIChtZXNzYWdlSWQpIHtcbiAgICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgICAgaWYgKGNoYXRNZXNzYWdlLnVzZXIpIHJldHVybiBjaGF0TWVzc2FnZS51c2VyLmNoYXJhY3RlclxuICAgIH1cblxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBzdGF0aWMgaXNDYXJkT3duZXIgKGNhcmQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpXG4gICAgY29uc3QgbWVzc2FnZUlkID0gbWVzc2FnZSA/IG1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQgOiBudWxsXG4gICAgaWYgKG1lc3NhZ2VJZCkge1xuICAgICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgICByZXR1cm4gY2hhdE1lc3NhZ2Uub3dubmVyIHx8IGZhbHNlXG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBzdGF0aWMgX2dldEFjdG9yRnJvbUtleSAoa2V5KSB7XG4gICAgaWYgKCFrZXkpIHJldHVybiB1bmRlZmluZWRcbiAgICAvLyBDYXNlIDEgLSBhIHN5bnRoZXRpYyBhY3RvciBmcm9tIGEgVG9rZW5cbiAgICBpZiAoa2V5LmluY2x1ZGVzKCcuJykpIHtcbiAgICAgIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgY29uc3QgW3NjZW5lSWQsIHRva2VuSWRdID0ga2V5LnNwbGl0KCcuJylcbiAgICAgIGlmIChzY2VuZUlkID09PSAnVE9LRU4nKSB7XG4gICAgICAgIHJldHVybiBnYW1lLmFjdG9ycy50b2tlbnNbdG9rZW5JZF0gLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzY2VuZUlkKVxuICAgICAgICBpZiAoIXNjZW5lKSByZXR1cm4gbnVsbFxuICAgICAgICBjb25zdCB0b2tlbiA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcbiAgICAgICAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGxcbiAgICAgICAgcmV0dXJuIHRva2VuLmFjdG9yIHx8IG5ldyBUb2tlbih0b2tlbkRhdGEpLmFjdG9yXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2FzZSAyIC0gdXNlIEFjdG9yIElEIGRpcmVjdG9yeVxuICAgIHJldHVybiBnYW1lLmFjdG9ycy5nZXQoa2V5KSB8fCBudWxsXG4gIH1cblxuICBzdGF0aWMgZ2V0QWN0b3JGcm9tVG9rZW4gKHRva2VuS2V5KSB7XG4gICAgY29uc3QgdG9rZW4gPSBDb0M3Q2hhdC5nZXRUb2tlbih0b2tlbktleSlcbiAgICByZXR1cm4gdG9rZW4gPyB0b2tlbi5hY3RvciA6IG51bGxcbiAgfVxuXG4gIHN0YXRpYyBnZXRUb2tlbiAodG9rZW5LZXkpIHtcbiAgICBpZiAodG9rZW5LZXkpIHtcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IHRva2VuS2V5LnNwbGl0KCcuJylcbiAgICAgIGlmIChzY2VuZUlkID09PSAnVE9LRU4nKSB7XG4gICAgICAgIGNvbnN0IHRva2VuRG9jID0gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdPy50b2tlblxuICAgICAgICByZXR1cm4gdG9rZW5Eb2Mub2JqZWN0IC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgICAgaWYgKCFzY2VuZSkgcmV0dXJuIG51bGxcbiAgICAgICAgY29uc3QgdG9rZW4gPSBzY2VuZS5nZXRFbWJlZGRlZERvY3VtZW50KCdUb2tlbicsIHRva2VuSWQpXG4gICAgICAgIGlmICghdG9rZW4pIHJldHVybiBudWxsXG4gICAgICAgIHJldHVybiB0b2tlbiB8fCBuZXcgVG9rZW4odG9rZW5EYXRhKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgLyoqXG4gICAqIHVwZGF0ZSBhIGNoYXQgbWVzc2FnZSB3aXRoIGEgbmV3IEhUTUwgY29udGVudCBhbmQgcG9wdWxhdGUgaXQuXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNhcmRcbiAgICovXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoY2FyZCwgbWVzc0lkID0gbnVsbCkge1xuICAgIGNvbnN0IG1lc3NhZ2VJZCA9XG4gICAgICBtZXNzSWQgPT0gbnVsbCA/IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKS5kYXRhc2V0Lm1lc3NhZ2VJZCA6IG1lc3NJZFxuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG5cbiAgICBjb25zdCBtc2cgPSBhd2FpdCBtZXNzYWdlLnVwZGF0ZSh7IGNvbnRlbnQ6IGNhcmQub3V0ZXJIVE1MIH0pXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vbkNoYXRDYXJkQWN0aW9uIChldmVudCkge1xuICAgIC8vIGNvbnNvbGUubG9nKCctLT5Db0M3Q2hhdC5fb25DaGF0Q2FyZEFjdGlvbicpO1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBjYXJkID0gYnV0dG9uLmNsb3Nlc3QoJy5jaGF0LWNhcmQnKVxuICAgIGNvbnN0IG9yaWdpbk1lc3NhZ2UgPSBidXR0b24uY2xvc2VzdCgnLm1lc3NhZ2UnKVxuICAgIC8vIGNvbnN0IG1lc3NhZ2VJZCA9IG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQ7XG4gICAgY29uc3QgYWN0aW9uID0gYnV0dG9uLmRhdGFzZXQuYWN0aW9uXG5cbiAgICBpZiAoIUNvQzdDaGF0Ll9nZXRDaGF0Q2FyZEFjdG9yKGNhcmQpKSByZXR1cm5cblxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICBjYXNlICd1c2VMdWNrJzoge1xuICAgICAgICBjb25zdCBsdWNrQW1vdW50ID0gcGFyc2VJbnQoYnV0dG9uLmRhdGFzZXQubHVja0Ftb3VudClcbiAgICAgICAgY29uc3QgbmV3U3VjY2Vzc0xldmVsID0gcGFyc2VJbnQoXG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0Lm5ld1N1Y2Nlc3NMZXZlbFxuICAgICAgICApXG5cbiAgICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtZWxlZScpKSB7XG4gICAgICAgICAgbGV0IG1lbGVlQ2FyZFxuICAgICAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygndGFyZ2V0JykpIHtcbiAgICAgICAgICAgIG1lbGVlQ2FyZCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2luaXRpYXRvcicpKSB7XG4gICAgICAgICAgICBtZWxlZUNhcmQgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVsZWVDYXJkLnVwZ3JhZGVSb2xsKGx1Y2tBbW91bnQsIG5ld1N1Y2Nlc3NMZXZlbCwgY2FyZCkgLy8gVE9ETyA6IENoZWNrIGlmIHRoaXMgbmVlZHMgdG8gYmUgYXN5bmNcbiAgICAgICAgfSBlbHNlIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygncmFuZ2UnKSkge1xuICAgICAgICAgIGNvbnN0IHJhbmdlQ2FyZCA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICAgIGNvbnN0IHJvbGxSZXN1bHQgPSBidXR0b24uY2xvc2VzdCgnLnJvbGwtcmVzdWx0JylcbiAgICAgICAgICBjb25zdCByb2xsSW5kZXggPSByb2xsUmVzdWx0XG4gICAgICAgICAgICA/IHBhcnNlSW50KHJvbGxSZXN1bHQuZGF0YXNldC5pbmRleClcbiAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgIGlmIChidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdwYXNzLWNoZWNrJykpIHtcbiAgICAgICAgICAgIHJhbmdlQ2FyZC5wYXNzUm9sbChyb2xsSW5kZXgpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHVwZ3JhZGVJbmRleCA9IHBhcnNlSW50KGJ1dHRvbi5kYXRhc2V0LmluZGV4KVxuICAgICAgICAgICAgcmFuZ2VDYXJkLnVwZ3JhZGVSb2xsKHJvbGxJbmRleCwgdXBncmFkZUluZGV4KSAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBjYXJkLmNsYXNzTGlzdC5jb250YWlucygncm9sbC1jYXJkJykgfHxcbiAgICAgICAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yb2xsLXJlc3VsdCcpICE9IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgICBpZiAoYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygncGFzcy1jaGVjaycpKSB7XG4gICAgICAgICAgICBjb25zdCBsdWNrQW1vdW50ID0gcGFyc2VJbnQoYnV0dG9uLmRhdGFzZXQubHVja0Ftb3VudClcbiAgICAgICAgICAgIGNoZWNrLmZvcmNlUGFzcyhsdWNrQW1vdW50KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB1cGdyYWRlSW5kZXggPSBwYXJzZUludChidXR0b24uZGF0YXNldC5pbmRleClcbiAgICAgICAgICAgIGF3YWl0IGNoZWNrLnVwZ3JhZGVDaGVjayh1cGdyYWRlSW5kZXgpXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGFjdG9yID0gQ29DN0NoYXQuX2dldENoYXRDYXJkQWN0b3IoY2FyZClcbiAgICAgICAgICBjb25zdCBkZXRhaWxlZFJlc3VsdFBsYWNlSG9sZGVyID0gY2FyZC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgJy5yZXN1bHQtZGV0YWlscydcbiAgICAgICAgICApXG5cbiAgICAgICAgICBpZiAoYWN0b3Iuc3BlbmRMdWNrKGx1Y2tBbW91bnQpKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvdGFsJylcbiAgICAgICAgICAgIGNhcmQuZGF0YXNldC5zdWNjZXNzTGV2ZWwgPSBuZXdTdWNjZXNzTGV2ZWxcbiAgICAgICAgICAgIGNhcmQuZGF0YXNldC5wcm9jZXNzZWQgPSAnZmFsc2UnIC8vIHRyaWdnZXIgMyB1cGRhdGVzIGRlIGNhcmRcbiAgICAgICAgICAgIHN3aXRjaCAobmV3U3VjY2Vzc0xldmVsKSB7XG4gICAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyOlxuICAgICAgICAgICAgICAgIHJlc3VsdC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhclN1Y2Nlc3MnKVxuICAgICAgICAgICAgICAgIGRldGFpbGVkUmVzdWx0UGxhY2VIb2xkZXIuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGx1Y2tBbW91bnQ6IGx1Y2tBbW91bnQsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJEaWZmaWN1bHR5JylcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZDpcbiAgICAgICAgICAgICAgICByZXN1bHQuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmRTdWNjZXNzJylcbiAgICAgICAgICAgICAgICBkZXRhaWxlZFJlc3VsdFBsYWNlSG9sZGVyLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsdWNrQW1vdW50OiBsdWNrQW1vdW50LFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkRGlmZmljdWx0eScpXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWU6XG4gICAgICAgICAgICAgICAgcmVzdWx0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lU3VjY2VzcycpXG4gICAgICAgICAgICAgICAgZGV0YWlsZWRSZXN1bHRQbGFjZUhvbGRlci5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbHVja0Ftb3VudDogbHVja0Ftb3VudCxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZURpZmZpY3VsdHknKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgICAgICAgICByZXN1bHQuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsU3VjY2VzcycpXG4gICAgICAgICAgICAgICAgZGV0YWlsZWRSZXN1bHRQbGFjZUhvbGRlci5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbHVja0Ftb3VudDogbHVja0Ftb3VudCxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxEaWZmaWN1bHR5JylcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXN1bHQuY2xhc3NMaXN0LnJlcGxhY2UoJ2ZhaWx1cmUnLCAnc3VjY2VzcycpXG4gICAgICAgICAgICByZXN1bHQuY2xhc3NMaXN0LnJlbW92ZSgnZnVtYmxlJylcbiAgICAgICAgICAgIGNhcmQucXVlcnlTZWxlY3RvcignLmNhcmQtYnV0dG9ucycpLnJlbW92ZSgpXG4gICAgICAgICAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvb2x0aXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgICAgICBhd2FpdCBDb0M3Q2hhdC51cGRhdGVDaGF0Q2FyZChjYXJkKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yTm90RW5vdWdoTHVjaycsIHtcbiAgICAgICAgICAgICAgICBhY3RvcjogYWN0b3IubmFtZVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAncHVzaCc6IHtcbiAgICAgICAgY29uc3QgbmV3Q2FyZCA9IGNhcmQuY2xvbmVOb2RlKHRydWUpIC8vIFRPRE8gbm90IG5lY2Vzc2FyeVxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvdGFsJylcbiAgICAgICAgcmVzdWx0LmlubmVyVGV4dCA9XG4gICAgICAgICAgcmVzdWx0LmlubmVyVGV4dCArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5QdXNoaW5nU2tpbGwnKVxuICAgICAgICByZXN1bHQuY2xhc3NMaXN0LnJlbW92ZSgnZmFpbHVyZScpXG4gICAgICAgIG5ld0NhcmQucXVlcnlTZWxlY3RvcignLmNhcmQtYnV0dG9ucycpLnJlbW92ZSgpXG4gICAgICAgIG5ld0NhcmQuZGF0YXNldC5wdXNoZWRSb2xsID0gdHJ1ZVxuICAgICAgICBhd2FpdCBDb0M3Q2hhdC51cGRhdGVDaGF0Q2FyZChuZXdDYXJkLCBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkKVxuICAgICAgICBhd2FpdCBDb0M3Q2hlY2sucHVzaChjYXJkKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnZGVmZW5kaW5nJzoge1xuICAgICAgICBsZXQgZGVmZW5kZXJLZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5kZWZlbmRlci1hY3Rpb24tc2VsZWN0JylcbiAgICAgICAgICAuZGF0YXNldC50b2tlbklkXG4gICAgICAgIGxldCBkZWZlbmRlclxuICAgICAgICBpZiAoIWRlZmVuZGVyS2V5KSB7XG4gICAgICAgICAgZGVmZW5kZXJLZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5kZWZlbmRlci1hY3Rpb24tc2VsZWN0JylcbiAgICAgICAgICAgIC5kYXRhc2V0LmFjdG9ySWRcbiAgICAgICAgICBkZWZlbmRlciA9IGdhbWUuYWN0b3JzLmdldChkZWZlbmRlcktleSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWZlbmRlciA9IHRoaXMuZ2V0QWN0b3JGcm9tVG9rZW4oZGVmZW5kZXJLZXkpXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXNwb25zZVR5cGUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uVHlwZVxuICAgICAgICBjb25zdCBvdXRudW1iZXJlZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5vdXRudW1iZXJlZCA9PT0gJ3RydWUnXG4gICAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICAgIGNoZWNrLnJlZmVyZW5jZU1lc3NhZ2VJZCA9IG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWRcbiAgICAgICAgY2hlY2sucm9sbFR5cGUgPSAnb3Bwb3NlZCdcbiAgICAgICAgY2hlY2suc2lkZSA9ICd0YXJnZXQnXG4gICAgICAgIGNoZWNrLmFjdGlvbiA9IHJlc3BvbnNlVHlwZVxuICAgICAgICBzd2l0Y2ggKHJlc3BvbnNlVHlwZSkge1xuICAgICAgICAgIGNhc2UgJ2RvZGdpbmcnOlxuICAgICAgICAgICAgY2hlY2suYWN0b3IgPSBkZWZlbmRlclxuICAgICAgICAgICAgY2hlY2suc2tpbGwgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgICAgICAgaWYgKG91dG51bWJlcmVkKSBjaGVjay5kaWNlTW9kaWZpZXIgPSAtMVxuXG4gICAgICAgICAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICAgICAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ2ZpZ2h0QmFjayc6XG4gICAgICAgICAgICBjaGVjay5hY3RvciA9IGRlZmVuZGVyXG4gICAgICAgICAgICBjaGVjay5za2lsbCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXG4gICAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgICAgICAgICBjaGVjay5pdGVtID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0Lml0ZW1JZFxuICAgICAgICAgICAgaWYgKG91dG51bWJlcmVkKSBjaGVjay5kaWNlTW9kaWZpZXIgPSAtMVxuXG4gICAgICAgICAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICAgICAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ21hbmV1dmVyJzoge1xuICAgICAgICAgICAgY29uc3QgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0Q2hhdENhcmRBY3RvcihjYXJkKVxuICAgICAgICAgICAgaWYgKGRlZmVuZGVyLmJ1aWxkIDw9IGFjdG9yLmJ1aWxkIC0gMykge1xuICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvck1hbmV1dmVyTm90UG9zc2libGUnKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hlY2suYWN0b3IgPSBkZWZlbmRlclxuICAgICAgICAgICAgY2hlY2suc2tpbGwgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgICAgICAgaWYgKG91dG51bWJlcmVkKSBjaGVjay5kaWNlTW9kaWZpZXIgPSAtMVxuICAgICAgICAgICAgaWYgKGRlZmVuZGVyLmJ1aWxkIDwgYWN0b3IuYnVpbGQpIHtcbiAgICAgICAgICAgICAgY2hlY2suZGljZU1vZGlmaWVyID1cbiAgICAgICAgICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgLSAoYWN0b3IuYnVpbGQgLSBkZWZlbmRlci5idWlsZClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNoZWNrLmRpY2VNb2RpZmllciA8IC0yKSB7XG4gICAgICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPVxuICAgICAgICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgKyBNYXRoLmFicyhjaGVjay5kaWNlTW9kaWZpZXIpIC0gMlxuICAgICAgICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSAtMlxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICAgICAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdtZWxlZS1pbml0aWF0b3Itcm9sbCc6IHtcbiAgICAgICAgY29uc3QgaW5pdGlhdG9yID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgaW5pdGlhdG9yLnBlcmZvcm1Ta2lsbENoZWNrKFxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbFxuICAgICAgICApXG4gICAgICAgICQoYnV0dG9uKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpXG4gICAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKGNoZWNrLmRpY2Uucm9sbClcbiAgICAgICAgYXdhaXQgaW5pdGlhdG9yLnB1Ymxpc2hDaGVja1Jlc3VsdCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ21lbGVlLXRhcmdldC1uby1yZXNwb25zZSc6IHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gQ29DN01lbGVlVGFyZ2V0LmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IHRhcmdldC5wdWJsaXNoTm9SZXBvbnNlUmVzdWx0KClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnbWVsZWUtdGFyZ2V0LXJvbGwnOiB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IHRhcmdldC5wZXJmb3JtU2tpbGxDaGVjayhcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxcbiAgICAgICAgKVxuICAgICAgICAkKGJ1dHRvbikucHJvcCgnZGlzYWJsZWQnLCB0cnVlKVxuICAgICAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZChjaGVjay5kaWNlLnJvbGwpXG4gICAgICAgIGF3YWl0IHRhcmdldC5wdWJsaXNoQ2hlY2tSZXN1bHQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAncm9sbC1tZWxlZS1kYW1hZ2UnOiB7XG4gICAgICAgIGNvbnN0IGRhbWFnZUNoYXRDYXJkID0gbmV3IERhbWFnZUNhcmQoe1xuICAgICAgICAgIGNyaXRpY2FsOiBidXR0b24uZGF0YXNldC5jcml0aWNhbCA9PT0gJ3RydWUnLFxuICAgICAgICAgIGZhc3RGb3J3YXJkOiBldmVudC5zaGlmdEtleVxuICAgICAgICB9KVxuICAgICAgICBkYW1hZ2VDaGF0Q2FyZC5hY3RvcktleSA9IGJ1dHRvbi5kYXRhc2V0LmRlYWxlclxuICAgICAgICBkYW1hZ2VDaGF0Q2FyZC50YXJnZXRLZXkgPSBidXR0b24uZGF0YXNldC50YXJnZXRcbiAgICAgICAgZGFtYWdlQ2hhdENhcmQuaXRlbUlkID0gYnV0dG9uLmRhdGFzZXQud2VhcG9uXG4gICAgICAgIGlmIChvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkKSB7XG4gICAgICAgICAgZGFtYWdlQ2hhdENhcmQubWVzc2FnZUlkID0gb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgICAgICB9XG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLnVwZGF0ZUNoYXRDYXJkKClcblxuICAgICAgICAvLyBjb25zdCBkYW1hZ2VDYXJkID0gbmV3IENvQzdEYW1hZ2VSb2xsKFxuICAgICAgICAvLyAgYnV0dG9uLmRhdGFzZXQud2VhcG9uLFxuICAgICAgICAvLyAgYnV0dG9uLmRhdGFzZXQuZGVhbGVyLFxuICAgICAgICAvLyAge1xuICAgICAgICAvLyAgICB0YXJnZXRLZXk6IGJ1dHRvbi5kYXRhc2V0LnRhcmdldCxcbiAgICAgICAgLy8gICAgY3JpdGljYWw6ICd0cnVlJyA9PSBidXR0b24uZGF0YXNldC5jcml0aWNhbCxcbiAgICAgICAgLy8gICAgZmFzdEZvcndhcmQ6IGV2ZW50LnNoaWZ0S2V5XG4gICAgICAgIC8vICB9KTtcbiAgICAgICAgLy8gaWYoIG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQpIGRhbWFnZUNhcmQubWVzc2FnZUlkID0gb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZDtcbiAgICAgICAgLy8gZGFtYWdlQ2FyZC5yb2xsRGFtYWdlKCk7XG4gICAgICAgIC8vIGlmKCBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkKSB7XG4gICAgICAgIC8vICBmb3IgKGNvbnN0IGIgb2YgY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FyZC1idXR0b25zJykpIHsgYi5yZW1vdmUoKSB9XG4gICAgICAgIC8vICBhd2FpdCBDb0M3Q2hhdC51cGRhdGVDaGF0Q2FyZCggY2FyZCk7XG4gICAgICAgIC8vIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ3JhbmdlLWluaXRpYXRvci1zaG9vdCc6IHtcbiAgICAgICAgY29uc3QgcmFuZ2VJbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgcmFuZ2VJbml0aWF0b3IuYWRkU2hvdEF0Q3VycmVudFRhcmdldCgpXG4gICAgICAgIGF3YWl0IHJhbmdlSW5pdGlhdG9yLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ3JhbmdlLWluaXRpYXRvci1yb2xsJzoge1xuICAgICAgICBjb25zdCByYW5nZUluaXRpYXRvciA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCByYW5nZUluaXRpYXRvci5yZXNvbHZlQ2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdyb2xsLXJhbmdlLWRhbWFnZSc6IHtcbiAgICAgICAgY29uc3QgcmFuZ2VJbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgcmFuZ2VJbml0aWF0b3Iucm9sbERhbWFnZSgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdkZWFsLW1lbGVlLWRhbWFnZSc6IHtcbiAgICAgICAgY29uc3QgdGFyZ2V0S2V5ID0gY2FyZC5kYXRhc2V0LnRhcmdldEtleVxuICAgICAgICBjb25zdCBhbW91bnQgPSBjYXJkLmRhdGFzZXQucmVzdWx0XG4gICAgICAgIGNvbnN0IHRhcmdldEFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGFyZ2V0S2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgICAgYXdhaXQgdGFyZ2V0QWN0b3IuZGVhbERhbWFnZShhbW91bnQpXG4gICAgICAgIGNvbnN0IGJ1dHRvbnMgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWJ1dHRvbnMnKVxuICAgICAgICBjb25zdCBkaWNlVG90YWwgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvdGFsJylcbiAgICAgICAgJChkaWNlVG90YWwpLmFwcGVuZCgnPGkgY2xhc3M9XCJmYXMgZmEtY2hlY2tcIj48L2k+JylcbiAgICAgICAgaWYgKGJ1dHRvbnMpIGJ1dHRvbnMucmVtb3ZlKClcbiAgICAgICAgYXdhaXQgQ29DN0NoYXQudXBkYXRlQ2hhdENhcmQoY2FyZClcblxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdkZWFsLXJhbmdlLWRhbWFnZSc6IHtcbiAgICAgICAgY29uc3QgcmFuZ2VJbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgcmFuZ2VJbml0aWF0b3IuZGVhbERhbWFnZSgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3Rlc3RjaGVjayc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suZm9yY2VQYXNzKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZm9yY2UtcGFzcyc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suZm9yY2VQYXNzKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZm9yY2UtZmFpbCc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suZm9yY2VGYWlsKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnaW5jcmVhc2Utc3VjY2Vzcy1sZXZlbCc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suaW5jcmVhc2VTdWNjZXNzTGV2ZWwoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdkZWNyZWFzZS1zdWNjZXNzLWxldmVsJzoge1xuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjaGVjay5kZWNyZWFzZVN1Y2Nlc3NMZXZlbCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JldmVhbC1jaGVjayc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgICAgIGNoZWNrLmNvbXB1dGVDaGVjaygpXG4gICAgICAgIGlmIChcbiAgICAgICAgICBldmVudC5tZXRhS2V5IHx8XG4gICAgICAgICAgZXZlbnQuY3RybEtleSB8fFxuICAgICAgICAgIGV2ZW50LmtleUNvZGUgPT09IDkxIHx8XG4gICAgICAgICAgZXZlbnQua2V5Q29kZSA9PT0gMjI0XG4gICAgICAgICkge1xuICAgICAgICAgIGNoZWNrLnVwZGF0ZUNoYXRDYXJkKHsgbWFrZVB1YmxpYzogdHJ1ZSB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyb2xsLWNoZWNrLWNhcmQnOiB7XG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGNoZWNrLnN0YW5kYnkgPSBmYWxzZVxuICAgICAgICBhd2FpdCBjaGVjay5fcGVyZm9ybSgpXG4gICAgICAgIGNoZWNrLnVwZGF0ZUNoYXRDYXJkKHsgZm9yY2VSb2xsOiB0cnVlIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2ZsYWctZm9yLWRldmVsb3BtZW50Jzoge1xuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCBjaGVjay5mbGFnRm9yRGV2ZWxvcGVtZW50KClcbiAgICAgICAgY2hlY2suY29tcHV0ZUNoZWNrKClcbiAgICAgICAgY2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyZXNldC1jcmVhdHVyZS1zYW4tZGF0YSc6IHtcbiAgICAgICAgY29uc3Qgc2FuQ2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2sucmVzZXRDcmVhdHVyZVNhbkRhdGEoKVxuICAgICAgICBhd2FpdCBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3Jlc2V0LXNwZWNpZS1zYW4tZGF0YSc6IHtcbiAgICAgICAgY29uc3Qgc2FuQ2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2sucmVzZXRTcGVjaWVTYW5EYXRhKClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyb2xsLXNhbi1jaGVjayc6IHtcbiAgICAgICAgY29uc3Qgc2FuQ2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2sucm9sbFNhbigpXG4gICAgICAgIGF3YWl0IHNhbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnYWR2YW5jZS1zdGF0ZSc6IHtcbiAgICAgICAgY29uc3Qgc2FuQ2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2suYWR2YW5jZVN0YXRlKFxuICAgICAgICAgIGJ1dHRvbi5kYXRhc2V0LnN0YXRlIC8qLCBidXR0b24uZGF0YXNldC5wYXJhbSAqL1xuICAgICAgICApXG4gICAgICAgIGF3YWl0IHNhbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncm9sbC1zYW4tbG9zcyc6IHtcbiAgICAgICAgY29uc3Qgc2FuQ2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2sucm9sbFNhbkxvc3MoKVxuICAgICAgICBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JvbGwtaW50LWNoZWNrJzoge1xuICAgICAgICBjb25zdCBzYW5DaGVjayA9IFNhbkNoZWNrQ2FyZC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCBzYW5DaGVjay5yb2xsSW50KClcbiAgICAgICAgc2FuQ2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICAvLyBjYXNlICdhcHBseS1zYW4tbG9zcyc6e1xuICAgICAgLy8gIGNvbnN0IHNhbkNoZWNrID0gQ29DN1NhbkNoZWNrLmdldEZyb21DYXJkKCBjYXJkKTtcbiAgICAgIC8vICBhd2FpdCBzYW5DaGVjay5hcHBseVNhbkxvc3MoKTtcbiAgICAgIC8vICBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpO1xuICAgICAgLy8gIGJyZWFrO1xuICAgICAgLy8gfVxuXG4gICAgICAvLyBjYXNlICdyZXZlYWwtc2FuLWNoZWNrJzp7XG4gICAgICAvLyAgY29uc3Qgc2FuQ2hlY2sgPSBDb0M3U2FuQ2hlY2suZ2V0RnJvbUNhcmQoIGNhcmQpO1xuICAgICAgLy8gIHNhbkNoZWNrLmlzQmxpbmQgPSBmYWxzZTtcbiAgICAgIC8vICBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpO1xuICAgICAgLy8gIGJyZWFrO1xuICAgICAgLy8gfVxuXG4gICAgICBjYXNlICdyb2xsLWNvbi1jaGVjayc6IHtcbiAgICAgICAgY29uc3QgY29uQ2hlY2sgPSBDb0M3Q29uQ2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgY29uQ2hlY2sucm9sbENvbigpXG4gICAgICAgIGNvbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncmV2ZWFsLWNvbi1jaGVjayc6IHtcbiAgICAgICAgY29uc3QgY29uQ2hlY2sgPSBDb0M3Q29uQ2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY29uQ2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgICAgIGNvbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHRvZ2dsaW5nIHRoZSB2aXNpYmlsaXR5IG9mIGNoYXQgY2FyZCBjb250ZW50IHdoZW4gdGhlIG5hbWUgaXMgY2xpY2tlZFxuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudCAgIFRoZSBvcmlnaW5hdGluZyBjbGljayBldmVudFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhdGljIF9vbkNoYXRDYXJkVG9nZ2xlQ29udGVudCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgaGVhZGVyID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGNhcmQgPSBoZWFkZXIuY2xvc2VzdCgnLmNoYXQtY2FyZCcpXG4gICAgY29uc3QgY29udGVudCA9IGNhcmQucXVlcnlTZWxlY3RvcignLmNhcmQtY29udGVudCcpXG4gICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgIGlmICghY29udGVudC5zdHlsZS5kaXNwbGF5KSB7XG4gICAgICAgIGNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRlbnQuc3R5bGUuZGlzcGxheSA9XG4gICAgICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScgPyAnYmxvY2snIDogJ25vbmUnXG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ2hhdE1lc3NhZ2UsIGdhbWUsIHJlbmRlclRlbXBsYXRlLCB1aSAqL1xuXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIsIENvQzdSb2xsIH0gZnJvbSAnLi4vaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXQgfSBmcm9tICcuLi8uLi9jaGF0LmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlUmVzb2x0aW9uIH0gZnJvbSAnLi9tZWxlZS1yZXNvbHV0aW9uLmpzJ1xuaW1wb3J0IHsgQ2hhdENhcmRBY3RvciB9IGZyb20gJy4uL2NhcmQtYWN0b3IuanMnXG5cbi8vIFRPRE8gOiByw6ljdXDDqXJlciBsZSBqZXQgZW4gdGFudCBxdSdvYmpldCAhISFcbmV4cG9ydCBjbGFzcyBDb0M3TWVsZWVJbml0aWF0b3IgZXh0ZW5kcyBDaGF0Q2FyZEFjdG9yIHtcbiAgY29uc3RydWN0b3IgKGFjdG9yS2V5ID0gbnVsbCwgaXRlbUlkID0gbnVsbCwgZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIHN1cGVyKGFjdG9yS2V5LCBmYXN0Rm9yd2FyZClcbiAgICB0aGlzLml0ZW1JZCA9IGl0ZW1JZFxuICAgIHRoaXMucmVzb2x2ZWQgPSBmYWxzZVxuICAgIHRoaXMub3V0bnVtYmVyZWQgPSBmYWxzZVxuICAgIHRoaXMuc3VycHJpc2VkID0gZmFsc2VcbiAgICB0aGlzLmF1dG9TdWNjZXNzID0gZmFsc2VcbiAgICB0aGlzLmFkdmFudGFnZSA9IGZhbHNlXG4gICAgdGhpcy5kaXNhZHZhbnRhZ2UgPSBmYWxzZVxuICAgIHRoaXMubWVzc2FnZUlkID0gbnVsbFxuICAgIHRoaXMudGFyZ2V0Q2FyZCA9IG51bGxcbiAgICB0aGlzLnJvbGxlZCA9IGZhbHNlXG4gIH1cblxuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NvbWJhdC9tZWxlZS1pbml0aWF0b3IuaHRtbCdcbiAgfVxuXG4gIGFzeW5jIHJldmVhbENoZWNrICgpIHtcbiAgICAvLyBUT0RPIDogb24gdXRpbGlzZSBsJ3VwZGF0ZSBkdSBtZXNzYWdlIGF1IGxpZXUgZGUgcmVjb25zdHJ1aXJlIGwnb2JqZXQuIENoYW5nZXIgY2UgY29tcG9ydGVtZW50LlxuICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXG5cbiAgICBhd2FpdCBjaGF0TWVzc2FnZS5zZXRGbGFnKCdDb0M3JywgJ2NoZWNrUmV2ZWFsZWQnLCB0cnVlKVxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShjaGF0TWVzc2FnZSwgZmFsc2UpXG4gIH1cblxuICBhc3luYyBjcmVhdGVDaGF0Q2FyZCAoKSB7XG4gICAgY2hhdEhlbHBlci5nZXRBY3RvckltZ0Zyb21LZXkodGhpcy5hY3RvcktleSlcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcblxuICAgIGNvbnN0IHNwZWFrZXJEYXRhID0ge31cbiAgICBpZiAodGhpcy50b2tlbikgc3BlYWtlckRhdGEudG9rZW4gPSB0aGlzXG4gICAgZWxzZSBzcGVha2VyRGF0YS5hY3RvciA9IHRoaXNcbiAgICBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcihzcGVha2VyRGF0YSlcblxuICAgIGNvbnN0IHVzZXIgPSB0aGlzLmFjdG9yLnVzZXIgPyB0aGlzLmFjdG9yLnVzZXIgOiBnYW1lLnVzZXJcblxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgIHNwZWFrZXIsXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfVxuXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHRoaXMucm9sbE1vZGUpKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICB9XG4gICAgLy8gaWYgKCB0aGlzLmlzQmxpbmQgKSBjaGF0RGF0YVsnYmxpbmQnXSA9IHRydWU7XG4gICAgY2hhdERhdGEuYmxpbmQgPSBmYWxzZVxuXG4gICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBhd2FpdCBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpXG5cbiAgICByZXR1cm4gY2hhdE1lc3NhZ2VcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUNoYXRDYXJkICgpIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcblxuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IG1lc3NhZ2UudXBkYXRlKHsgY29udGVudDogaHRtbCB9KVxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgIHJldHVybiBtc2dcbiAgfVxuXG4gIHRvZ2dsZUZsYWcgKGZsYWdOYW1lKSB7XG4gICAgY29uc3QgZmxhZyA9IGZsYWdOYW1lLmluY2x1ZGVzKCctJylcbiAgICAgID8gY2hhdEhlbHBlci5oeXBoZW5Ub0NhbWVsQ2FzZShmbGFnTmFtZSlcbiAgICAgIDogZmxhZ05hbWVcbiAgICB0aGlzW2ZsYWddID0gIXRoaXNbZmxhZ11cbiAgfVxuXG4gIGFzeW5jIHBlcmZvcm1Ta2lsbENoZWNrIChza2lsbElkID0gbnVsbCwgcHVibGlzaCA9IGZhbHNlKSB7XG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAvLyBDb21iYXQgcm9sbCBjYW5ub3QgYmUgYmxpbmQgb3IgdW5rbm93blxuICAgIGNoZWNrLmlzQmxpbmQgPSBmYWxzZVxuICAgIGNoZWNrLmlzVW5rb253biA9IGZhbHNlXG4gICAgY2hlY2sucmVmZXJlbmNlTWVzc2FnZUlkID0gdGhpcy5tZXNzYWdlSWRcbiAgICBjaGVjay5yb2xsVHlwZSA9ICdvcHBvc2VkJ1xuICAgIGNoZWNrLnNpZGUgPSAnaW5pdGlhdG9yJ1xuICAgIGNoZWNrLmFjdGlvbiA9ICdhdHRhY2snXG4gICAgY2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yS2V5XG4gICAgY2hlY2suaXRlbSA9IHRoaXMuaXRlbUlkXG4gICAgY2hlY2suc2tpbGwgPSBza2lsbElkXG4gICAgY2hlY2suZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IDBcblxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgdGhpcy5jaGVja1JldmVhbGVkID0gZmFsc2VcbiAgICBlbHNlIHRoaXMuY2hlY2tSZXZlYWxlZCA9IHRydWVcblxuICAgIGlmICh0aGlzLm91dG51bWJlcmVkKSBjaGVjay5kaWNlTW9kaWZpZXIgKz0gMVxuICAgIGlmICh0aGlzLnN1cnByaXNlZCkgY2hlY2suZGljZU1vZGlmaWVyICs9IDFcbiAgICBpZiAodGhpcy5kaXNhZHZhbnRhZ2UpIGNoZWNrLmRpY2VNb2RpZmllciAtPSAxXG4gICAgaWYgKHRoaXMuYWR2YW50YWdlKSBjaGVjay5kaWNlTW9kaWZpZXIgKz0gMVxuXG4gICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgdGhpcy5jaGVjayA9IGNoZWNrXG4gICAgdGhpcy5yb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICBpZiAocHVibGlzaCkgY2hlY2sudG9NZXNzYWdlKClcblxuICAgIHRoaXMuY3JpdGljYWxEYW1hZ2UgPVxuICAgICAgY2hlY2suc3VjY2Vzc0xldmVsID09PSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgfHxcbiAgICAgIGNoZWNrLnN1Y2Nlc3NMZXZlbCA9PT0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbFxuICAgIGlmICh0aGlzLmhhc1RhcmdldCAmJiAhdGhpcy5hdXRvU3VjY2Vzcykge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IGdhbWUuQ29DN3NvY2tldC5leGVjdXRlQXNHTSgnZ21jcmVhdGVtZXNzYWdlYXMnLCB7XG4gICAgICAgIHRhcmdldEtleTogdGhpcy50YXJnZXRLZXksXG4gICAgICAgIG1lc3NhZ2VJZDogdGhpcy5tZXNzYWdlSWQsXG4gICAgICAgIGZhc3RGb3J3YXJkOiB0aGlzLmZhc3RGb3J3YXJkLFxuICAgICAgICBhY3RvcktleTogdGhpcy5hY3RvcktleVxuICAgICAgfSlcbiAgICAgIHRoaXMudGFyZ2V0Q2FyZCA9IG1lc3NhZ2UuaWQgfHwgbWVzc2FnZS5faWRcbiAgICB9XG5cbiAgICBpZiAodGhpcy5hdXRvU3VjY2VzcyAmJiAhdGhpcy5jaGVjay5pc0Z1bWJsZSkge1xuICAgICAgdGhpcy5jaGVjay5mb3JjZVBhc3MoKVxuICAgIH1cbiAgICByZXR1cm4gY2hlY2tcbiAgfVxuXG4gIGFzeW5jIHB1Ymxpc2hDaGVja1Jlc3VsdCAoY2hlY2sgPSBudWxsKSB7XG4gICAgaWYgKCFjaGVjayAmJiAhdGhpcy5jaGVjaykgcmV0dXJuIG51bGxcblxuICAgIGlmIChjaGVjaykgdGhpcy5jaGVjayA9IGNoZWNrXG4gICAgdGhpcy5yb2xsID0gQ29DN1JvbGwuZ2V0RnJvbUNoZWNrKHRoaXMuY2hlY2spXG4gICAgdGhpcy5yb2xsZWQgPSB0cnVlXG5cbiAgICB0aGlzLnJvbGwucm9sbEljb25zID0gW11cbiAgICBpZiAodGhpcy5yb2xsLmNyaXRpY2FsKSB7XG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2dvbGRlbnJvZCdcbiAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCA0OyBpbmRleCsrKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsSWNvbnMucHVzaCgnbWVkYWwnKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5yb2xsLmZ1bWJsZSkge1xuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdkYXJrcmVkJ1xuICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GdW1ibGUnKVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IDQ7IGluZGV4KyspIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdzcGlkZXInKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5yb2xsLnN1Y2Nlc3MpIHtcbiAgICAgIHRoaXMucm9sbC5yb2xsQ29sb3IgPSAnZ29sZGVucm9kJ1xuICAgICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciA9PT0gdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQgPT09IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkU3VjY2VzcycpXG4gICAgICB9XG4gICAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZVN1Y2Nlc3MnKVxuICAgICAgfVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWw7IGluZGV4KyspIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdzdGFyJylcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdibGFjaydcbiAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmFpbHVyZScpXG4gICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ3NrdWxsJylcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMudGFyZ2V0Q2FyZCAmJiAhdGhpcy5hdXRvU3VjY2VzcyAmJiB0aGlzLmhhc1RhcmdldCkge1xuICAgICAgY29uc3QgcmVzb2x1dGlvbkNhcmQgPSBuZXcgQ29DN01lbGVlUmVzb2x0aW9uKFxuICAgICAgICB0aGlzLnBhcmVudE1lc3NhZ2VJZCxcbiAgICAgICAgdGhpcy5tZXNzYWdlSWRcbiAgICAgIClcbiAgICAgIGNvbnN0IHJlc29sdXRpb25NZXNzYWdlID0gYXdhaXQgcmVzb2x1dGlvbkNhcmQucHJlQ3JlYXRlTWVzc2FnZSgpXG4gICAgICB0aGlzLnJlc29sdXRpb25DYXJkID0gcmVzb2x1dGlvbk1lc3NhZ2UuaWRcbiAgICB9XG4gICAgYXdhaXQgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbUNhcmQgKGNhcmQsIG1lc3NhZ2VJZCA9IG51bGwpIHtcbiAgICBjb25zdCBpbml0aWF0b3IgPSBuZXcgQ29DN01lbGVlSW5pdGlhdG9yKClcbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KGluaXRpYXRvciwgY2FyZClcbiAgICBpbml0aWF0b3Iucm9sbCA9IENvQzdSb2xsLmdldEZyb21DYXJkKGNhcmQpXG5cbiAgICBpZiAoY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpKSB7XG4gICAgICBpbml0aWF0b3IubWVzc2FnZUlkID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgfSBlbHNlIGluaXRpYXRvci5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcbiAgICByZXR1cm4gaW5pdGlhdG9yXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybiBudWxsXG4gICAgY29uc3QgY2FyZCA9ICQobWVzc2FnZS5kYXRhLmNvbnRlbnQpWzBdXG5cbiAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZCwgbWVzc2FnZUlkKVxuICAgIGluaXRpYXRvci5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcblxuICAgIHJldHVybiBpbml0aWF0b3JcbiAgfVxuXG4gIHN0YXRpYyB1cGRhdGVDYXJkU3dpdGNoIChldmVudCwgcHVibGlzaFVwZGF0ZSA9IHRydWUpIHtcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcubWVsZWUuaW5pdGlhdG9yJylcbiAgICBjb25zdCBmbGFnID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWdcbiAgICBjb25zdCBjYW1lbEZsYWcgPSBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWcpXG5cbiAgICAvLyB1cGRhdGUgb25seSBmb3IgbG9jYWwgcGxheWVyXG4gICAgaWYgKCFwdWJsaXNoVXBkYXRlKSB7XG4gICAgICBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXSA9IGNhcmQuZGF0YXNldFtjYW1lbEZsYWddICE9PSAndHJ1ZSdcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnc3dpdGNoZWQtb24nKVxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNlbGVjdGVkID0gY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ11cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdXBkYXRlIGNhcmQgZm9yIGFsbCBwbGF5ZXJcbiAgICAgIGNvbnN0IGluaXRpYXRvciA9IENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgaW5pdGlhdG9yLnRvZ2dsZUZsYWcoZmxhZylcbiAgICAgIGluaXRpYXRvci51cGRhdGVDaGF0Q2FyZCgpXG4gICAgfVxuICB9XG5cbiAgdXBncmFkZVJvbGwgKGx1Y2tBbW91bnQsIG5ld1N1Y2Nlc3NMZXZlbCwgb2xkQ2FyZCkge1xuICAgIC8vIFRPRE8gOiBDaGVjayBpZiB0aGlzIG5lZWRzIHRvIGJlIGFzeW5jXG4gICAgaWYgKCF0aGlzLmFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgYCR7dGhpcy5hY3Rvci5uYW1lfSBkaWRuJ3QgaGF2ZSBlbm91Z2ggbHVjayB0byBwYXNzIHRoZSBjaGVja2BcbiAgICAgIClcbiAgICB9XG4gICAgdGhpcy5yb2xsLnZhbHVlID0gbnVsbFxuICAgIHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwgPSBuZXdTdWNjZXNzTGV2ZWxcbiAgICB0aGlzLnJvbGwubHVja1NwZW50ID0gdHJ1ZVxuICAgIG9sZENhcmQuZGF0YXNldC5wcm9jZXNzZWQgPSBmYWxzZVxuXG4gICAgY29uc3QgZGljZVJvbGxzID0gb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS1yb2xsJylcbiAgICBkaWNlUm9sbHMuZGF0YXNldC52YWx1ZSA9IG51bGxcbiAgICBkaWNlUm9sbHMuZGF0YXNldC5zdWNjZXNzTGV2ZWwgPSBuZXdTdWNjZXNzTGV2ZWxcbiAgICBkaWNlUm9sbHMuZGF0YXNldC5sdWNrU3BlbnQgPSB0cnVlXG5cbiAgICBjb25zdCByZXN1bERldGFpbHMgPSBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yZXN1bHQtZGV0YWlscycpXG4gICAgY29uc3QgZGljZVRvdGFsID0gb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS10b3RhbCcpXG4gICAgY29uc3Qgcm9sbERhbWFnZUJ1dHRvbiA9IG9sZENhcmQucXVlcnlTZWxlY3RvcihcbiAgICAgICdidXR0b25bZGF0YS1hY3Rpb249XCJyb2xsLW1lbGVlLWRhbWFnZVwiXSdcbiAgICApXG4gICAgaWYgKHJvbGxEYW1hZ2VCdXR0b24pIHJvbGxEYW1hZ2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaW52aXNpYmxlJylcblxuICAgIHN3aXRjaCAobmV3U3VjY2Vzc0xldmVsKSB7XG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhcjpcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyU3VjY2VzcycpXG4gICAgICAgIHJlc3VsRGV0YWlscy5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbHVja0Ftb3VudDogbHVja0Ftb3VudCxcbiAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJEaWZmaWN1bHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQ6XG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZFN1Y2Nlc3MnKVxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGx1Y2tBbW91bnQ6IGx1Y2tBbW91bnQsXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkRGlmZmljdWx0eScpXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lOlxuICAgICAgICBpZiAocm9sbERhbWFnZUJ1dHRvbikgcm9sbERhbWFnZUJ1dHRvbi5kYXRhc2V0LmNyaXRpY2FsID0gdHJ1ZVxuICAgICAgICBkaWNlVG90YWwuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcbiAgICAgICAgcmVzdWxEZXRhaWxzLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsdWNrQW1vdW50OiBsdWNrQW1vdW50LFxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZURpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWw6XG4gICAgICAgIGlmIChyb2xsRGFtYWdlQnV0dG9uKSByb2xsRGFtYWdlQnV0dG9uLmRhdGFzZXQuY3JpdGljYWwgPSB0cnVlXG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgICAgcmVzdWxEZXRhaWxzLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsdWNrQW1vdW50OiBsdWNrQW1vdW50LFxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxEaWZmaWN1bHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBkaWNlVG90YWwuY2xhc3NMaXN0LnJlcGxhY2UoJ2ZhaWx1cmUnLCAnc3VjY2VzcycpXG4gICAgb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1idXR0b25zJykucmVtb3ZlKClcbiAgICBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvb2x0aXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgQ29DN0NoYXQudXBkYXRlQ2hhdENhcmQob2xkQ2FyZCkgLy8gVE9ETyA6IENoZWNrIGlmIHRoaXMgbmVlZHMgdG8gYmUgYXN5bmNcbiAgfVxufVxuIiwiLyogZ2xvYmFsIEFjdG9yLCBDT05TVCwgRGlhbG9nLCBEaWUsIGR1cGxpY2F0ZSwgZ2FtZSwgZ2V0UHJvcGVydHksIEhvb2tzLCBtZXJnZU9iamVjdCwgUm9sbCwgVGV4dEVkaXRvciwgVG9rZW4sIHVpICovXG5cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdDb25DaGVjayB9IGZyb20gJy4uL2NoYXQvY29uY2hlY2suanMnXG5pbXBvcnQgeyBSb2xsRGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9yb2xsLWRpYWxvZy5qcydcbmltcG9ydCB7IFNraWxsU2VsZWN0RGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9za2lsbC1zZWxlY3Rpb24tZGlhbG9nLmpzJ1xuaW1wb3J0IHsgUG9pbnRTZWxlY3REaWFsb2cgfSBmcm9tICcuLi9hcHBzL3BvaW50LXNlbGVjdGlvbi1kaWFsb2cuanMnXG5pbXBvcnQgeyBDaGFyYWNTZWxlY3REaWFsb2cgfSBmcm9tICcuLi9hcHBzL2NoYXItc2VsZWN0aW9uLWRpYWxvZy5qcydcbmltcG9ydCB7IENoYXJhY1JvbGxEaWFsb2cgfSBmcm9tICcuLi9hcHBzL2NoYXItcm9sbC1kaWFsb2cuanMnXG5pbXBvcnQgeyBTa2lsbFNwZWNTZWxlY3REaWFsb2cgfSBmcm9tICcuLi9hcHBzL3NraWxsLXNwZWMtc2VsZWN0LWRpYWxvZy5qcydcbmltcG9ydCB7IFNraWxsVmFsdWVEaWFsb2cgfSBmcm9tICcuLi9hcHBzL3NraWxsLXZhbHVlLWRpYWxvZy5qcydcbmltcG9ydCB7IENvQzdNZWxlZUluaXRpYXRvciB9IGZyb20gJy4uL2NoYXQvY29tYmF0L21lbGVlLWluaXRpYXRvci5qcydcbmltcG9ydCB7IENvQzdSYW5nZUluaXRpYXRvciB9IGZyb20gJy4uL2NoYXQvcmFuZ2Vjb21iYXQuanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3RGljZSB9IGZyb20gJy4uL2RpY2UuanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW1zL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzZSBBY3RvciBjbGFzcyB0byBpbXBsZW1lbnQgYWRkaXRpb25hbCBsb2dpYyBzcGVjaWFsaXplZCBmb3IgQ29DIDd0aC5cbiAqL1xuZXhwb3J0IGNsYXNzIENvQ0FjdG9yIGV4dGVuZHMgQWN0b3Ige1xuICBhc3luYyBpbml0aWFsaXplICgpIHtcbiAgICBzdXBlci5pbml0aWFsaXplKClcbiAgICBhd2FpdCB0aGlzLmNyZWF0dXJlSW5pdCgpIC8vIFRPRE8gOiBtb3ZlIHRoaXMgaW4gQ29DQWN0b3IuY3JlYXRlKGRhdGEsIG9wdGlvbnMpXG4gIH1cblxuICAvLyAqKioqKioqKioqKioqKioqKioqKioqIFRlc3RpbmdcbiAgLy8gYXN5bmMgdXBkYXRlKGRhdGEsIG9wdGlvbnM9e30pIHtcbiAgLy8gICB1aS5ub3RpZmljYXRpb25zLmluZm8oJ3JldHVybiBzdXBlci51cGRhdGUoZGF0YSwgb3B0aW9ucyk7Jyk7XG4gIC8vICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKGBpbnQgOiAke3RoaXMuY2hhcmFjdGVyaXN0aWNzLmludH1gKTtcbiAgLy8gICB0aGlzLmNoYXJhY3RlcmlzdGljcy5pbnQgPSAxNTtcbiAgLy8gICB1aS5ub3RpZmljYXRpb25zLmluZm8oYG1vZGlmaWVkIGludCA6ICR7dGhpcy5jaGFyYWN0ZXJpc3RpY3MuaW50fWApO1xuICAvLyAgIHJldHVybiBzdXBlci51cGRhdGUoZGF0YSwgb3B0aW9ucyk7XG4gIC8vIH1cblxuICAvLyBnZXQgY2hhcmFjdGVyaXN0aWNzKCl7XG4gIC8vICAgY29uc3QgYWN0b3IgPSB0aGlzO1xuICAvLyAgICAgcmV0dXJuIHtcbiAgLy8gICAgICAgZ2V0IGludCgpe1xuICAvLyAgICAgICAgIHJldHVybiBhY3Rvci5nZXRQcm9wKCdfaW50Jyk7XG4gIC8vICAgICAgIH0sXG5cbiAgLy8gICAgICAgc2V0IGludCh4KXtcbiAgLy8gICAgICAgICBhY3Rvci5zZXRQcm9wKCdfaW50JywgeCk7XG4gIC8vICAgICAgIH1cbiAgLy8gICAgfTtcbiAgLy8gfVxuXG4gIC8vIHNldFByb3Aoa2V5LCB4KXtcbiAgLy8gICB0aGlzW2tleV0gPSB4O1xuICAvLyB9XG5cbiAgLy8gZ2V0UHJvcChrZXkpe1xuICAvLyAgIHJldHVybiB0aGlzW2tleV18fDA7XG4gIC8vIH1cbiAgLy9cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKGRhdGEsIG9wdGlvbnMgPSB7fSkge1xuICAgIGRhdGEudG9rZW4gPSBkYXRhLnRva2VuIHx8IHt9XG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgIG1lcmdlT2JqZWN0KFxuICAgICAgICBkYXRhLnRva2VuLFxuICAgICAgICB7XG4gICAgICAgICAgdmlzaW9uOiB0cnVlLFxuICAgICAgICAgIGRpbVNpZ2h0OiAzMCxcbiAgICAgICAgICBicmlnaHRTaWdodDogMCxcbiAgICAgICAgICBhY3Rvckxpbms6IHRydWUsXG4gICAgICAgICAgZGlzcG9zaXRpb246IDFcbiAgICAgICAgfSxcbiAgICAgICAgeyBvdmVyd3JpdGU6IGZhbHNlIH1cbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3ZlaGljbGUnKSB7XG4gICAgICBkYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL2plZXAuc3ZnJ1xuICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnY29udGFpbmVyJykge1xuICAgICAgZGF0YS5pbWcgPSAnaWNvbnMvc3ZnL2NoZXN0LnN2ZydcbiAgICAgIG1lcmdlT2JqZWN0KGRhdGEudG9rZW4sIHtcbiAgICAgICAgYWN0b3JMaW5rOiB0cnVlXG4gICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4gc3VwZXIuY3JlYXRlKGRhdGEsIG9wdGlvbnMpXG4gIH1cblxuICAvKipcbiAgICogRWFybHkgdmVyc2lvbiBvbiB0ZW1wbGF0ZXMgZGlkIG5vdCBpbmNsdWRlIHBvc3NpYmlsaXR5IG9mIGF1dG8gY2FsY1xuICAgKiBKdXN0IGNoZWNrIGlmIGF1dG8gaXMgdW5kZWZpbmVkLCBpbiB3aGljaCBjYXNlIGl0IHdpbGwgYmUgc2V0IHRvIHRydWVcbiAgICovXG4gIGNoZWNrVW5kZWZpbmVkQXV0byAoKSB7XG4gICAgY29uc3QgcmV0dXJuRGF0YSA9IHtcbiAgICAgIGF0dHJpYnM6IHtcbiAgICAgICAgaHA6IHt9LFxuICAgICAgICBtcDoge30sXG4gICAgICAgIHNhbjoge30sXG4gICAgICAgIG1vdjoge30sXG4gICAgICAgIGRiOiB7fSxcbiAgICAgICAgYnVpbGQ6IHt9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzPy5ocD8uYXV0byA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm5EYXRhLmF0dHJpYnMuaHAuYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLmF0dHJpYnM/Lm1wPy5hdXRvID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5tcC5hdXRvID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuYXR0cmlicz8uc2FuPy5hdXRvID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5zYW4uYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLmF0dHJpYnM/Lm1vdj8uYXV0byA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm5EYXRhLmF0dHJpYnMubW92LmF1dG8gPSB0cnVlXG4gICAgfVxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzPy5kYj8uYXV0byA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm5EYXRhLmF0dHJpYnMuZGIuYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLmF0dHJpYnM/LmJ1aWxkPy5hdXRvID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5idWlsZC5hdXRvID0gdHJ1ZVxuICAgIH1cblxuICAgIHJldHVybiByZXR1cm5EYXRhXG4gIH1cblxuICBnZXQgY2hhcmFjdGVyaXN0aWNzICgpIHtcbiAgICBjb25zdCBjaGFyYWN0ZXJpc3RpY3MgPSB7XG4gICAgICBzdHI6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5TVFInLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5TdHJlbmd0aCcsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBjb246IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5DT04nLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5Db25zdGl0dXRpb24nLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9LFxuICAgICAgc2l6OiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzaG9ydE5hbWU6ICdDSEFSQUMuU0laJyxcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuU2l6ZScsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBkZXg6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5ERVgnLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5EZXh0ZXJpdHknLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9LFxuICAgICAgYXBwOiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzaG9ydE5hbWU6ICdDSEFSQUMuQVBQJyxcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuQXBwZWFyYW5jZScsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBpbnQ6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5JTlQnLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5JbnRlbGxpZ2VuY2UnLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9LFxuICAgICAgcG93OiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzaG9ydE5hbWU6ICdDSEFSQUMuUE9XJyxcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuUG93ZXInLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9LFxuICAgICAgZWR1OiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzaG9ydE5hbWU6ICdDSEFSQUMuRURVJyxcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuRWR1Y2F0aW9uJyxcbiAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzXG4gICAgICApKSB7XG4gICAgICAgIGNoYXJhY3RlcmlzdGljc1trZXldID0ge1xuICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgIHNob3J0TmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLnNob3J0KSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLmxhYmVsKSxcbiAgICAgICAgICB2YWx1ZTogdmFsdWUudmFsdWUsXG4gICAgICAgICAgaGFyZDogTWF0aC5mbG9vcih2YWx1ZS52YWx1ZSAvIDIpIHx8IG51bGwsXG4gICAgICAgICAgZXh0cmVtZTogTWF0aC5mbG9vcih2YWx1ZS52YWx1ZSAvIDUpIHx8IG51bGwsXG4gICAgICAgICAgZm9ybXVsYTogdmFsdWUuZm9ybXVsYVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjaGFyYWN0ZXJpc3RpY3NcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgdXBvbiB0b2tlbiBjcmVhdGlvbiBmcm9tIHByZUNyZWF0ZUFjdG9yIGhvb2tcbiAgICogQHBhcmFtIHsqfSBjcmVhdGVEYXRhXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgaW5pdFRva2VuIChjcmVhdGVEYXRhKSB7XG4gICAgLy8gY2FsbGVkIHVwb24gdG9rZW4gY3JlYXRpb24uYWN0aXZlXG4gICAgaWYgKGNyZWF0ZURhdGEpIHtcbiAgICAgIC8vXG4gICAgfVxuICB9XG5cbiAgZ2V0IGJvdXRPZk1hZG5lc3MgKCkge1xuICAgIHJldHVybiB0aGlzLmVmZmVjdHMuZmluZChcbiAgICAgIGUgPT4gZS5kYXRhLmxhYmVsID09PSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQm91dE9mTWFkbmVzc05hbWUnKVxuICAgIClcbiAgfVxuXG4gIGdldCBpbnNhbml0eSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWZmZWN0cy5maW5kKFxuICAgICAgZSA9PiBlLmRhdGEubGFiZWwgPT09IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JbnNhbml0eU5hbWUnKVxuICAgIClcbiAgfVxuXG4gIGdldCBpc0luQUJvdXRPZk1hZG5lc3MgKCkge1xuICAgIGlmICghdGhpcy5ib3V0T2ZNYWRuZXNzKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gIXRoaXMuYm91dE9mTWFkbmVzcy5kYXRhLmRpc2FibGVkXG4gIH1cblxuICBnZXQgaXNJbnNhbmUgKCkge1xuICAgIGlmICghdGhpcy5pbnNhbml0eSkgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuICF0aGlzLmluc2FuaXR5LmRhdGEuZGlzYWJsZWRcbiAgfVxuXG4gIGdldCBzYW5pdHkgKCkge1xuICAgIGNvbnN0IGJvdXRSZWFsVGltZSA9ICEhdGhpcy5ib3V0T2ZNYWRuZXNzPy5kYXRhLmZsYWdzPy5Db0M3Py5yZWFsVGltZVxuICAgIGxldCBkdXJhdGlvbiA9IGJvdXRSZWFsVGltZVxuICAgICAgPyB0aGlzLmJvdXRPZk1hZG5lc3M/LmRhdGE/LmR1cmF0aW9uPy5yb3VuZHNcbiAgICAgIDogdGhpcy5ib3V0T2ZNYWRuZXNzPy5kYXRhPy5kdXJhdGlvbi5zZWNvbmRzXG4gICAgaWYgKCFib3V0UmVhbFRpbWUgJiYgZHVyYXRpb24pIGR1cmF0aW9uID0gTWF0aC5yb3VuZChkdXJhdGlvbiAvIDM2MDApXG4gICAgbGV0IGluZGVmaW5pdGVJbnN0YW5pdHkgPSAhIXRoaXMuaW5zYW5pdHk/LmRhdGEuZmxhZ3M/LkNvQzc/LmluZGVmaW5pdGVcbiAgICBsZXQgaW5zYW5lRHVyYXRpb24gPSBpbmRlZmluaXRlSW5zdGFuaXR5XG4gICAgICA/IG51bGxcbiAgICAgIDogdGhpcy5pbnNhbml0eT8uZGF0YT8uZHVyYXRpb24uc2Vjb25kc1xuICAgIGlmICghaW5kZWZpbml0ZUluc3Rhbml0eSAmJiBpbnNhbmVEdXJhdGlvbikge1xuICAgICAgaW5zYW5lRHVyYXRpb24gPSBpbnNhbmVEdXJhdGlvbiAvIDM2MDBcbiAgICB9XG4gICAgbGV0IGJvdXREdXJhdGlvblRleHQgPSB0aGlzLmlzSW5BQm91dE9mTWFkbmVzc1xuICAgICAgPyBib3V0UmVhbFRpbWVcbiAgICAgICAgPyBgJHtkdXJhdGlvbn0gJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucm91bmRzJyl9YFxuICAgICAgICA6IGAke2R1cmF0aW9ufSAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5ob3VycycpfWBcbiAgICAgIDogbnVsbFxuICAgIGNvbnN0IGluc2FuaXR5RHVyYXRpb25UZXh0ID0gaW5zYW5lRHVyYXRpb25cbiAgICAgID8gdGhpcy5pc0luc2FuZVxuICAgICAgICA/IGluZGVmaW5pdGVJbnN0YW5pdHlcbiAgICAgICAgICA/IG51bGxcbiAgICAgICAgICA6IGAke2luc2FuZUR1cmF0aW9ufSAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5ob3VycycpfWBcbiAgICAgICAgOiBudWxsXG4gICAgICA6IG51bGxcbiAgICBpZiAodGhpcy5pc0luc2FuZSAmJiAhaW5zYW5pdHlEdXJhdGlvblRleHQgJiYgIWluZGVmaW5pdGVJbnN0YW5pdHkpIHtcbiAgICAgIGluZGVmaW5pdGVJbnN0YW5pdHkgPSB0cnVlXG4gICAgfVxuICAgIGlmICghZHVyYXRpb24pIGJvdXREdXJhdGlvblRleHQgPSAnJ1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGJvdXRPZk1hZG5lc3M6IHtcbiAgICAgICAgYWN0aXZlOiB0aGlzLmlzSW5BQm91dE9mTWFkbmVzcyxcbiAgICAgICAgcmVhbFRpbWU6IHRoaXMuaXNJbkFCb3V0T2ZNYWRuZXNzID8gYm91dFJlYWxUaW1lIDogdW5kZWZpbmVkLFxuICAgICAgICBzdW1tYXJ5OiB0aGlzLmlzSW5BQm91dE9mTWFkbmVzcyA/ICFib3V0UmVhbFRpbWUgOiB1bmRlZmluZWQsXG4gICAgICAgIGR1cmF0aW9uOiB0aGlzLmlzSW5BQm91dE9mTWFkbmVzcyA/IGR1cmF0aW9uIDogdW5kZWZpbmVkLFxuICAgICAgICBkdXJhdGlvblRleHQ6IGJvdXREdXJhdGlvblRleHQgfHwgJycsXG4gICAgICAgIGhpbnQ6IHRoaXMuaXNJbkFCb3V0T2ZNYWRuZXNzXG4gICAgICAgICAgPyBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQm91dE9mTWFkbmVzcycpfSR7XG4gICAgICAgICAgICAgIGJvdXREdXJhdGlvblRleHQgPyAnOiAnICsgYm91dER1cmF0aW9uVGV4dCA6ICcnXG4gICAgICAgICAgICB9YFxuICAgICAgICAgIDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkJvdXRPZk1hZG5lc3MnKVxuICAgICAgfSxcbiAgICAgIHVuZGVybHlpbmc6IHtcbiAgICAgICAgYWN0aXZlOiB0aGlzLmlzSW5zYW5lLFxuICAgICAgICBpbmRlZmludGllOiB0aGlzLmlzSW5zYW5lID8gaW5kZWZpbml0ZUluc3Rhbml0eSA6IHVuZGVmaW5lZCxcbiAgICAgICAgZHVyYXRpb246IGluc2FuZUR1cmF0aW9uLFxuICAgICAgICBkdXJhdGlvblRleHQ6IGluc2FuaXR5RHVyYXRpb25UZXh0IHx8ICcnLFxuICAgICAgICBoaW50OiB0aGlzLmlzSW5zYW5lXG4gICAgICAgICAgPyBpbmRlZmluaXRlSW5zdGFuaXR5XG4gICAgICAgICAgICA/IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JbmRlZmluaXRlSW5zYW5pdHknKVxuICAgICAgICAgICAgOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgJ0NvQzcuVGVtcG9yYXJ5SW5zYW5pdHknXG4gICAgICAgICAgICAgICl9ICR7aW5zYW5pdHlEdXJhdGlvblRleHQgfHwgJyd9YFxuICAgICAgICAgIDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdEluc2FuZScpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0IHBvcnRyYWl0ICgpIHtcbiAgICBpZiAoIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3VzZVRva2VuJykpIHJldHVybiB0aGlzLmltZ1xuICAgIGlmICh0aGlzLmlzVG9rZW4pIHtcbiAgICAgIHJldHVybiB0aGlzLnRva2VuPy5kYXRhPy5pbWcgfHwgdGhpcy5pbWdcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YS50b2tlbj8uaW1nIHx8IHRoaXMuaW1nXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZW50ZXJCb3V0T2ZNYWRuZXNzIChyZWFsVGltZSA9IHRydWUsIGR1cmF0aW9uID0gMSkge1xuICAgIC8vIGNvbnN0IGR1cmF0aW9uID0ge3JvdW5kczogMSxcbiAgICAvLyAgIHNlY29uZHM6IDE3LFxuICAgIC8vICAgc3RhcnRSb3VuZDogMyxcbiAgICAvLyAgIHN0YXJ0VGltZTogNTgsXG4gICAgLy8gICBzdGFydFR1cm46IDQsXG4gICAgLy8gICB0dXJuczogMn07XG4gICAgLy8gYXdhaXQgdGhpcy5ib3V0T2ZNYWRuZXNzPy5zZXRGbGFnKCAnQ29DNycsICdtYWRuZXNzJywgdHJ1ZSk7XG5cbiAgICBsZXQgcmVzdWx0ID0gbnVsbFxuICAgIGNvbnN0IGJvdXRPZk1hZG5lc3NUYWJsZUlkID0gcmVhbFRpbWVcbiAgICAgID8gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1JlYWxUaW1lVGFibGUnKVxuICAgICAgOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzU3VtbWFyeVRhYmxlJylcbiAgICBpZiAoYm91dE9mTWFkbmVzc1RhYmxlSWQgIT09ICdub25lJykge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBwaG9iaWE6IGZhbHNlLFxuICAgICAgICBtYW5pYTogZmFsc2UsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBudWxsXG4gICAgICB9XG4gICAgICBjb25zdCBib3V0T2ZNYWRuZXNzVGFibGUgPSBnYW1lLnRhYmxlcy5nZXQoYm91dE9mTWFkbmVzc1RhYmxlSWQpXG4gICAgICByZXN1bHQudGFibGVSb2xsID0gYXdhaXQgYm91dE9mTWFkbmVzc1RhYmxlLnJvbGwoKVxuICAgICAgaWYgKHR5cGVvZiByZXN1bHQudGFibGVSb2xsLnJlc3VsdHNbMF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBDT05TVC5UQUJMRV9SRVNVTFRfVFlQRVMuRU5USVRZID09PVxuICAgICAgICAgIHJlc3VsdC50YWJsZVJvbGwucmVzdWx0c1swXS5kYXRhLnR5cGVcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IGdhbWUuaXRlbXMuZ2V0KHJlc3VsdC50YWJsZVJvbGwucmVzdWx0c1swXS5kYXRhLnJlc3VsdElkKVxuICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLmRhdGE/LmRhdGE/LnR5cGU/LnBob2JpYSkgcmVzdWx0LnBob2JpYSA9IHRydWVcbiAgICAgICAgICAgIGlmIChpdGVtLmRhdGE/LmRhdGE/LnR5cGU/Lm1hbmlhKSByZXN1bHQubWFuaWEgPSB0cnVlXG4gICAgICAgICAgICByZXN1bHQuZGVzY3JpcHRpb24gPSBgJHtpdGVtLm5hbWV9OiR7VGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgICAgICAgICBpdGVtLmRhdGEuZGF0YS5kZXNjcmlwdGlvbi52YWx1ZVxuICAgICAgICAgICAgKX1gXG4gICAgICAgICAgICByZXN1bHQubmFtZSA9IGl0ZW0ubmFtZVxuICAgICAgICAgICAgZGVsZXRlIGl0ZW0uZGF0YS5faWRcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbaXRlbS5kYXRhXSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1lc3NhZ2VCb3V0T2ZNYWRuZXNzSXRlbU5vdEZvdW5kJylcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIENPTlNULlRBQkxFX1JFU1VMVF9UWVBFUy5URVhUID09PVxuICAgICAgICAgIHJlc3VsdC50YWJsZVJvbGwucmVzdWx0c1swXS5kYXRhLnR5cGVcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmVzdWx0LmRlc2NyaXB0aW9uID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgICAgICAgcmVzdWx0LnRhYmxlUm9sbC5yZXN1bHRzWzBdLmRhdGEudGV4dFxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZUJvdXRPZk1hZG5lc3NUYWJsZU5vdEZvdW5kJylcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIGl0J3Mgbm90IGEgcmVhbCB0aW1lIG5vIG5lZWQgdG8gYWN0aXZhdGUgdGhlIGJvdXRcbiAgICBpZiAoIXJlYWxUaW1lKSByZXR1cm4gcmVzdWx0XG5cbiAgICBpZiAodGhpcy5ib3V0T2ZNYWRuZXNzKSB7XG4gICAgICBhd2FpdCB0aGlzLmJvdXRPZk1hZG5lc3MudXBkYXRlKHtcbiAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLFxuICAgICAgICBkdXJhdGlvbjoge1xuICAgICAgICAgIHJvdW5kczogcmVhbFRpbWUgJiYgZHVyYXRpb24gPyBkdXJhdGlvbiA6IHVuZGVmaW5lZCxcbiAgICAgICAgICBzZWNvbmRzOiByZWFsVGltZSA/IHVuZGVmaW5lZCA6IGR1cmF0aW9uICogMzYwMCxcbiAgICAgICAgICB0dXJuczogMVxuICAgICAgICB9LFxuICAgICAgICBmbGFnczoge1xuICAgICAgICAgIENvQzc6IHtcbiAgICAgICAgICAgIHJlYWxUaW1lOiByZWFsVGltZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gY29uc3QgZWZmZWN0RGF0YSA9XG4gICAgICBhd2FpdCBzdXBlci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnQWN0aXZlRWZmZWN0JywgW1xuICAgICAgICB7XG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Cb3V0T2ZNYWRuZXNzTmFtZScpLFxuICAgICAgICAgIGljb246ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL2hhbmdpbmctc3BpZGVyLnN2ZycsXG4gICAgICAgICAgb3JpZ2luOiB0aGlzLnV1aWQsXG4gICAgICAgICAgZHVyYXRpb246IHtcbiAgICAgICAgICAgIHJvdW5kczogcmVhbFRpbWUgJiYgZHVyYXRpb24gPyBkdXJhdGlvbiA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHNlY29uZHM6IHJlYWxUaW1lID8gdW5kZWZpbmVkIDogZHVyYXRpb24gKiAzNjAwLFxuICAgICAgICAgICAgdHVybnM6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZsYWdzOiB7XG4gICAgICAgICAgICBDb0M3OiB7XG4gICAgICAgICAgICAgIG1hZG5lc3M6IHRydWUsXG4gICAgICAgICAgICAgIHJlYWxUaW1lOiByZWFsVGltZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgLy8gdGludDogJyNmZjAwMDAnLFxuICAgICAgICAgIGRpc2FibGVkOiBmYWxzZVxuICAgICAgICB9XG4gICAgICBdKVxuICAgICAgLy8gY29uc3QgZWZmZWN0ID0gdGhpcy5lZmZlY3RzLmdldCggZWZmZWN0RGF0YS5faWQpO1xuICAgICAgLy8gZWZmZWN0LnNoZWV0LnJlbmRlcih0cnVlKTtcbiAgICB9XG4gICAgLy8gY29uc3QgZWZmZWN0ID0gdGhpcy5lZmZlY3RzLmdldCggZWZmZWN0RGF0YS5faWQpO1xuICAgIC8vIGVmZmVjdC5zaGVldC5yZW5kZXIodHJ1ZSk7XG5cbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICBhc3luYyBlbnRlckluc2FuaXR5IChpbmRlZmluaXRlID0gdHJ1ZSwgZHVyYXRpb24gPSB1bmRlZmluZWQpIHtcbiAgICBpZiAodGhpcy5pbnNhbml0eSkge1xuICAgICAgYXdhaXQgdGhpcy5pbnNhbml0eS51cGRhdGUoe1xuICAgICAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgICAgIGR1cmF0aW9uOiB7XG4gICAgICAgICAgc2Vjb25kczogIWluZGVmaW5pdGUgJiYgZHVyYXRpb24gPyBkdXJhdGlvbiAqIDM2MDAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgdHVybnM6IDFcbiAgICAgICAgfSxcbiAgICAgICAgZmxhZ3M6IHtcbiAgICAgICAgICBDb0M3OiB7XG4gICAgICAgICAgICBpbmRlZmluaXRlOiBpbmRlZmluaXRlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCBzdXBlci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnQWN0aXZlRWZmZWN0JywgW1xuICAgICAgICB7XG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JbnNhbml0eU5hbWUnKSxcbiAgICAgICAgICBpY29uOiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy90ZW50YWNsZXMtc2t1bGwuc3ZnJyxcbiAgICAgICAgICBvcmlnaW46IHRoaXMudXVpZCxcbiAgICAgICAgICBkdXJhdGlvbjoge1xuICAgICAgICAgICAgc2Vjb25kczogIWluZGVmaW5pdGUgJiYgZHVyYXRpb24gPyBkdXJhdGlvbiAqIDM2MDAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB0dXJuczogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZmxhZ3M6IHtcbiAgICAgICAgICAgIENvQzc6IHtcbiAgICAgICAgICAgICAgbWFkbmVzczogdHJ1ZSxcbiAgICAgICAgICAgICAgaW5kZWZpbml0ZTogaW5kZWZpbml0ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIF0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZXhpdEJvdXRPZk1hZG5lc3MgKCkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmJvdXRPZk1hZG5lc3M/LmRlbGV0ZSgpXG4gIH1cblxuICBhc3luYyBleGl0SW5zYW5pdHkgKCkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmluc2FuaXR5Py5kZWxldGUoKVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCB1cG9uIG5ldyBhY3RvciBjcmVhdGlvbi5cbiAgICogQHBhcmFtIHsqfSBkYXRhXG4gICAqIEBwYXJhbSB7Kn0gb3B0aW9uc1xuICAgKi9cbiAgLy8gc3RhdGljIGFzeW5jIGNyZWF0ZShkYXRhLCBvcHRpb25zKSB7XG4gIC8vICAvLyBJZiB0aGUgY3JlYXRlZCBhY3RvciBoYXMgaXRlbXMgKG9ubHkgYXBwbGljYWJsZSB0byBkdXBsaWNhdGVkIGFjdG9ycykgYnlwYXNzIHRoZSBuZXcgYWN0b3IgY3JlYXRpb24gbG9naWNcbiAgLy8gIGlmIChkYXRhLml0ZW1zKSB7XG4gIC8vICAgIHJldHVybiBzdXBlci5jcmVhdGUoZGF0YSwgb3B0aW9ucyk7XG4gIC8vICB9XG4gIC8vICByZXR1cm4gc3VwZXIuY3JlYXRlKGRhdGEsIG9wdGlvbnMpO1xuICAvLyB9XG5cbiAgc3RhdGljIGVtcHR5U2tpbGwgKFxuICAgIHNraWxsTmFtZSxcbiAgICB2YWx1ZSxcbiAgICB7XG4gICAgICByYXJpdHkgPSBmYWxzZSxcbiAgICAgIHB1c2ggPSB0cnVlLFxuICAgICAgY29tYmF0ID0gZmFsc2UsXG4gICAgICBpbWcgPSBmYWxzZSxcbiAgICAgIHNwZWNpYWxpemF0aW9uID0gZmFsc2VcbiAgICB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIG5hbWU6IHNraWxsTmFtZSxcbiAgICAgIHR5cGU6ICdza2lsbCcsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIHNwZWNpYWw6IGZhbHNlLFxuICAgICAgICAgIHJhcml0eTogcmFyaXR5LFxuICAgICAgICAgIHB1c2g6IHB1c2gsXG4gICAgICAgICAgY29tYmF0OiBjb21iYXRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaW1nICE9PSBmYWxzZSkge1xuICAgICAgZGF0YS5pbWcgPSBpbWdcbiAgICB9XG4gICAgaWYgKHNwZWNpYWxpemF0aW9uICE9PSBmYWxzZSkge1xuICAgICAgZGF0YS5kYXRhLnNwZWNpYWxpemF0aW9uID0gc3BlY2lhbGl6YXRpb25cbiAgICAgIGRhdGEuZGF0YS5wcm9wZXJ0aWVzLnNwZWNpYWwgPSB0cnVlXG4gICAgfVxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFzeW5jIGNyZWF0ZVNraWxsIChza2lsbE5hbWUsIHZhbHVlLCBzaG93U2hlZXQgPSBmYWxzZSkge1xuICAgIGNvbnN0IGRhdGEgPSBDb0NBY3Rvci5lbXB0eVNraWxsKHNraWxsTmFtZSwgdmFsdWUpXG4gICAgY29uc3QgY3JlYXRlZCA9IGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZGF0YV0sIHtcbiAgICAgIHJlbmRlclNoZWV0OiBzaG93U2hlZXRcbiAgICB9KVxuICAgIHJldHVybiBjcmVhdGVkXG4gIH1cblxuICBhc3luYyBjcmVhdGVXZWFwb25Ta2lsbCAobmFtZSwgZmlyZWFybXMgPSBmYWxzZSwgYmFzZSA9IG51bGwpIHtcbiAgICAvLyBUT0RPIDogQXNrIGZvciBiYXNlIHZhbHVlIGlmIG51bGxcblxuICAgIGNvbnN0IHNraWxsRGF0YSA9IGF3YWl0IFNraWxsU3BlY1NlbGVjdERpYWxvZy5jcmVhdGUoXG4gICAgICBbXSxcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgZmlyZWFybXNcbiAgICAgICAgICA/ICdDb0M3LkZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUnXG4gICAgICAgICAgOiAnQ29DNy5GaWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgICksXG4gICAgICAwLFxuICAgICAgbmFtZVxuICAgIClcbiAgICBjb25zdCB2YWx1ZSA9IE51bWJlcihza2lsbERhdGEuZ2V0KCdiYXNlLXZhbHVlJykpXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgICB0eXBlOiAnc2tpbGwnLFxuICAgICAgZGF0YToge1xuICAgICAgICBzcGVjaWFsaXphdGlvbjogZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgIGZpcmVhcm1zXG4gICAgICAgICAgICA/ICdDb0M3LkZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUnXG4gICAgICAgICAgICA6ICdDb0M3LkZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgICApLFxuICAgICAgICBiYXNlOiBpc05hTih2YWx1ZSkgPyAwIDogdmFsdWUsXG4gICAgICAgIGFkanVzdG1lbnRzOiB7XG4gICAgICAgICAgcGVyc29uYWw6IG51bGwsXG4gICAgICAgICAgb2NjdXBhdGlvbjogbnVsbCxcbiAgICAgICAgICBhcmNoZXR5cGU6IG51bGwsXG4gICAgICAgICAgZXhwZXJpZW5jZTogbnVsbFxuICAgICAgICB9LFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgc3BlY2lhbDogdHJ1ZSxcbiAgICAgICAgICBmaWdodGluZzogIWZpcmVhcm1zLFxuICAgICAgICAgIGZpcmVhcm06IGZpcmVhcm1zLFxuICAgICAgICAgIGNvbWJhdDogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZGF0YV0sIHtcbiAgICAgIHJlbmRlclNoZWV0OiAhYmFzZVxuICAgIH0pXG4gICAgY29uc3Qgc2tpbGwgPSB0aGlzLmdldFNraWxsc0J5TmFtZShuYW1lKVxuICAgIHJldHVybiBza2lsbFswXVxuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgYSBjcmVhdHVyZSB3aXRoIG1pbmltdW1zIHNraWxsc1xuICAgKi9cbiAgYXN5bmMgY3JlYXR1cmVJbml0ICgpIHtcbiAgICBpZiAodGhpcy5kYXRhLnR5cGUgIT09ICdjcmVhdHVyZScpIHJldHVyblxuICAgIGlmICh0aGlzLmdldEFjdG9yRmxhZygnaW5pdGlhbGl6ZWQnKSkgcmV0dXJuIC8vIENoYW5nZSB0byByZXR1cm4gc2tpbGwgP1xuXG4gICAgLy8gQ2hlY2sgaWYgZmlnaHRpbmcgc2tpbGxzIGV4aXN0cywgaWYgbm90IGNyZWF0ZSBpdCBhbmQgdGhlIGFzc29jaWF0ZWQgYXR0YWNrLlxuICAgIGNvbnN0IHNraWxscyA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKFxuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKENPQzcuY3JlYXR1cmVGaWdodGluZ1NraWxsKVxuICAgIClcbiAgICBpZiAoc2tpbGxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gQ3JlYXRpbmcgbmF0dXJhbCBhdHRhY2sgc2tpbGxcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNraWxsID0gYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cyhcbiAgICAgICAgICAnSXRlbScsIC8vIE1PRElGOiAwLjgueCAnT3duZWRJdG1lbScgPT4gJ0l0ZW1cbiAgICAgICAgICBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3LmNyZWF0dXJlRmlnaHRpbmdTa2lsbCksXG4gICAgICAgICAgICAgIHR5cGU6ICdza2lsbCcsXG4gICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBiYXNlOiAwLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgICAgIHNwZWNpYWxpemF0aW9uOiBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgICBDT0M3LmZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICBjb21iYXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICBmaWdodGluZzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIHNwZWNpYWw6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZsYWdzOiB7fVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgXSxcbiAgICAgICAgICB7IHJlbmRlclNoZWV0OiBmYWxzZSB9XG4gICAgICAgIClcblxuICAgICAgICBjb25zdCBhdHRhY2sgPSBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKFxuICAgICAgICAgICdJdGVtJyxcbiAgICAgICAgICBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIG5hbWU6ICdJbm5hdGUgYXR0YWNrJyxcbiAgICAgICAgICAgICAgdHlwZTogJ3dlYXBvbicsXG4gICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjoge1xuICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiQ3JlYXR1cmUncyBuYXR1cmFsIGF0dGFja1wiLFxuICAgICAgICAgICAgICAgICAgY2hhdDogXCJDcmVhdHVyZSdzIG5hdHVyYWwgYXR0YWNrXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHdwblR5cGU6ICdpbm5hdGUnLFxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgIGFkZGI6IHRydWUsXG4gICAgICAgICAgICAgICAgICBzbG50OiB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgXSxcbiAgICAgICAgICB7IHJlbmRlclNoZWV0OiBmYWxzZSB9XG4gICAgICAgIClcbiAgICAgICAgaWYgKHNraWxsLmxlbmd0aCA+IDAgJiYgYXR0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCBjcmVhdGVkQXR0YWNrID0gdGhpcy5pdGVtcy5nZXQoYXR0YWNrWzBdLmlkKVxuICAgICAgICAgIGF3YWl0IGNyZWF0ZWRBdHRhY2sudXBkYXRlKHtcbiAgICAgICAgICAgICdkYXRhLnNraWxsLm1haW4uaWQnOiBza2lsbFswXS5pZCxcbiAgICAgICAgICAgICdkYXRhLnNraWxsLm1haW4ubmFtZSc6IHNraWxsWzBdLm5hbWVcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignQ3JlYXR1cmUgaW5pdDogJyArIGVyci5tZXNzYWdlKVxuICAgICAgfVxuICAgICAgLy8gY29uc29sZS5sb2coICdTa2lsbCBjcmVhdGVkJyk7XG4gICAgICBhd2FpdCB0aGlzLnNldEFjdG9yRmxhZygnaW5pdGlhbGl6ZWQnKVxuICAgICAgLy8gQ3JlYXRpbmcgY29ycmVzcG9uZGluZyB3ZWFwb24uXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlSXRlbSAoaXRlbU5hbWUsIHF1YW50aXR5ID0gMSwgc2hvd1NoZWV0ID0gZmFsc2UpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgbmFtZTogaXRlbU5hbWUsXG4gICAgICB0eXBlOiAnaXRlbScsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIHF1YW50aXR5OiBxdWFudGl0eVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkYXRhXSwge1xuICAgICAgcmVuZGVyU2hlZXQ6IHNob3dTaGVldFxuICAgIH0pXG4gICAgcmV0dXJuIGNyZWF0ZWRcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUVtcHR5Qm9vayAoZXZlbnQgPSBudWxsKSB7XG4gICAgY29uc3Qgc2hvd1NoZWV0ID0gZXZlbnQgPyAhZXZlbnQuc2hpZnRLZXkgOiB0cnVlXG4gICAgaWYgKCF0aGlzLmdldEl0ZW1JZEJ5TmFtZShnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdCb29rTmFtZSkpKSB7XG4gICAgICByZXR1cm4gdGhpcy5jcmVhdGVCb29rKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld0Jvb2tOYW1lKSwgc2hvd1NoZWV0KVxuICAgIH1cbiAgICBsZXQgaW5kZXggPSAwXG4gICAgbGV0IGl0ZW1OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3Qm9va05hbWUpICsgJyAnICsgaW5kZXhcbiAgICB3aGlsZSAodGhpcy5nZXRJdGVtSWRCeU5hbWUoaXRlbU5hbWUpKSB7XG4gICAgICBpbmRleCsrXG4gICAgICBpdGVtTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld0Jvb2tOYW1lKSArICcgJyArIGluZGV4XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmNyZWF0ZUJvb2soaXRlbU5hbWUsIHNob3dTaGVldClcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUJvb2sgKGl0ZW1OYW1lLCBzaG93U2hlZXQgPSBmYWxzZSkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBuYW1lOiBpdGVtTmFtZSxcbiAgICAgIHR5cGU6ICdib29rJyxcbiAgICAgIGRhdGE6IHt9XG4gICAgfVxuICAgIGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2RhdGFdLCB7XG4gICAgICByZW5kZXJTaGVldDogc2hvd1NoZWV0XG4gICAgfSlcbiAgICByZXR1cm4gY3JlYXRlZFxuICB9XG5cbiAgYXN5bmMgY3JlYXRlRW1wdHlTcGVsbCAoZXZlbnQgPSBudWxsKSB7XG4gICAgY29uc3Qgc2hvd1NoZWV0ID0gZXZlbnQgPyAhZXZlbnQuc2hpZnRLZXkgOiB0cnVlXG4gICAgaWYgKCF0aGlzLmdldEl0ZW1JZEJ5TmFtZShnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdTcGVsbE5hbWUpKSkge1xuICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlU3BlbGwoZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U3BlbGxOYW1lKSwgc2hvd1NoZWV0KVxuICAgIH1cbiAgICBsZXQgaW5kZXggPSAwXG4gICAgbGV0IGl0ZW1OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U3BlbGxOYW1lKSArICcgJyArIGluZGV4XG4gICAgd2hpbGUgKHRoaXMuZ2V0SXRlbUlkQnlOYW1lKGl0ZW1OYW1lKSkge1xuICAgICAgaW5kZXgrK1xuICAgICAgaXRlbU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdTcGVsbE5hbWUpICsgJyAnICsgaW5kZXhcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlU3BlbGwoaXRlbU5hbWUsIHNob3dTaGVldClcbiAgfVxuXG4gIHN0YXRpYyBlbXB0eVNwZWxsIChpdGVtTmFtZSkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBuYW1lOiBpdGVtTmFtZSxcbiAgICAgIHR5cGU6ICdzcGVsbCcsXG4gICAgICBkYXRhOiB7fVxuICAgIH1cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlU3BlbGwgKGl0ZW1OYW1lLCBzaG93U2hlZXQgPSBmYWxzZSkge1xuICAgIGNvbnN0IGRhdGEgPSBDb0NBY3Rvci5lbXB0eVNwZWxsKGl0ZW1OYW1lKVxuICAgIGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2RhdGFdLCB7XG4gICAgICByZW5kZXJTaGVldDogc2hvd1NoZWV0XG4gICAgfSlcbiAgICByZXR1cm4gY3JlYXRlZFxuICB9XG5cbiAgYXN5bmMgY3JlYXRlRW1wdHlTa2lsbCAoZXZlbnQgPSBudWxsKSB7XG4gICAgY29uc3Qgc2hvd1NoZWV0ID0gZXZlbnQgPyAhZXZlbnQuc2hpZnRLZXkgOiB0cnVlXG4gICAgaWYgKCF0aGlzLmdldEl0ZW1JZEJ5TmFtZShnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdTa2lsbE5hbWUpKSkge1xuICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlU2tpbGwoXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1NraWxsTmFtZSksXG4gICAgICAgIG51bGwsXG4gICAgICAgIHNob3dTaGVldFxuICAgICAgKVxuICAgIH1cbiAgICBsZXQgaW5kZXggPSAwXG4gICAgbGV0IHNraWxsTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1NraWxsTmFtZSkgKyAnICcgKyBpbmRleFxuICAgIHdoaWxlICh0aGlzLmdldEl0ZW1JZEJ5TmFtZShza2lsbE5hbWUpKSB7XG4gICAgICBpbmRleCsrXG4gICAgICBza2lsbE5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdTa2lsbE5hbWUpICsgJyAnICsgaW5kZXhcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5jcmVhdGVTa2lsbChza2lsbE5hbWUsIG51bGwsIHNob3dTaGVldClcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUVtcHR5SXRlbSAoZXZlbnQgPSBudWxsKSB7XG4gICAgY29uc3Qgc2hvd1NoZWV0ID0gZXZlbnQgPyAhZXZlbnQuc2hpZnRLZXkgOiB0cnVlXG4gICAgaWYgKCF0aGlzLmdldEl0ZW1JZEJ5TmFtZShnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdJdGVtTmFtZSkpKSB7XG4gICAgICByZXR1cm4gdGhpcy5jcmVhdGVJdGVtKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld0l0ZW1OYW1lKSwgMSwgc2hvd1NoZWV0KVxuICAgIH1cbiAgICBsZXQgaW5kZXggPSAwXG4gICAgbGV0IGl0ZW1OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3SXRlbU5hbWUpICsgJyAnICsgaW5kZXhcbiAgICB3aGlsZSAodGhpcy5nZXRJdGVtSWRCeU5hbWUoaXRlbU5hbWUpKSB7XG4gICAgICBpbmRleCsrXG4gICAgICBpdGVtTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld0l0ZW1OYW1lKSArICcgJyArIGluZGV4XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmNyZWF0ZUl0ZW0oaXRlbU5hbWUsIDEsIHNob3dTaGVldClcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUVtcHR5V2VhcG9uIChldmVudCA9IG51bGwpIHtcbiAgICBjb25zdCBzaG93U2hlZXQgPSBldmVudCA/ICFldmVudC5zaGlmdEtleSA6IHRydWVcbiAgICBsZXQgd2VhcG9uTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1dlYXBvbk5hbWUpXG4gICAgaWYgKHRoaXMuZ2V0SXRlbUlkQnlOYW1lKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1dlYXBvbk5hbWUpKSkge1xuICAgICAgbGV0IGluZGV4ID0gMFxuICAgICAgd2VhcG9uTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1dlYXBvbk5hbWUpICsgJyAnICsgaW5kZXhcbiAgICAgIHdoaWxlICh0aGlzLmdldEl0ZW1JZEJ5TmFtZSh3ZWFwb25OYW1lKSkge1xuICAgICAgICBpbmRleCsrXG4gICAgICAgIHdlYXBvbk5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdXZWFwb25OYW1lKSArICcgJyArIGluZGV4XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIG5hbWU6IHdlYXBvbk5hbWUsXG4gICAgICB0eXBlOiAnd2VhcG9uJyxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgcHJvcGVydGllczoge31cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IFtrZXldIG9mIE9iamVjdC5lbnRyaWVzKENPQzcud2VhcG9uUHJvcGVydGllcykpIHtcbiAgICAgIGRhdGEuZGF0YS5wcm9wZXJ0aWVzW2tleV0gPSBmYWxzZVxuICAgIH1cbiAgICBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2RhdGFdLCB7XG4gICAgICByZW5kZXJTaGVldDogc2hvd1NoZWV0XG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUJpb1NlY3Rpb24gKHRpdGxlID0gbnVsbCkge1xuICAgIGNvbnN0IGJpbyA9IHRoaXMuZGF0YS5kYXRhLmJpb2dyYXBoeVxuICAgICAgPyBkdXBsaWNhdGUodGhpcy5kYXRhLmRhdGEuYmlvZ3JhcGh5KVxuICAgICAgOiBbXVxuICAgIGJpby5wdXNoKHtcbiAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgIHZhbHVlOiBudWxsXG4gICAgfSlcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdkYXRhLmJpb2dyYXBoeSc6IGJpbyB9KVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQmlvVmFsdWUgKGluZGV4LCBjb250ZW50KSB7XG4gICAgY29uc3QgYmlvID0gZHVwbGljYXRlKHRoaXMuZGF0YS5kYXRhLmJpb2dyYXBoeSlcbiAgICBiaW9baW5kZXhdLnZhbHVlID0gY29udGVudFxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ2RhdGEuYmlvZ3JhcGh5JzogYmlvIH0sIHsgcmVuZGVyOiBmYWxzZSB9KVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQmlvVGl0bGUgKGluZGV4LCB0aXRsZSkge1xuICAgIGNvbnN0IGJpbyA9IGR1cGxpY2F0ZSh0aGlzLmRhdGEuZGF0YS5iaW9ncmFwaHkpXG4gICAgYmlvW2luZGV4XS50aXRsZSA9IHRpdGxlXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS5iaW9ncmFwaHknOiBiaW8gfSlcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZUJpb1NlY3Rpb24gKGluZGV4KSB7XG4gICAgY29uc3QgYmlvID0gZHVwbGljYXRlKHRoaXMuZGF0YS5kYXRhLmJpb2dyYXBoeSlcbiAgICBiaW8uc3BsaWNlKGluZGV4LCAxKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ2RhdGEuYmlvZ3JhcGh5JzogYmlvIH0pXG4gIH1cblxuICBhc3luYyBtb3ZlQmlvU2VjdGlvblVwIChpbmRleCkge1xuICAgIGlmIChpbmRleCA9PT0gMCkgcmV0dXJuXG4gICAgY29uc3QgYmlvID0gZHVwbGljYXRlKHRoaXMuZGF0YS5kYXRhLmJpb2dyYXBoeSlcbiAgICBpZiAoaW5kZXggPj0gYmlvLmxlbmd0aCkgcmV0dXJuXG4gICAgY29uc3QgZWxlbSA9IGJpby5zcGxpY2UoaW5kZXgsIDEpWzBdXG4gICAgYmlvLnNwbGljZShpbmRleCAtIDEsIDAsIGVsZW0pXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS5iaW9ncmFwaHknOiBiaW8gfSlcbiAgfVxuXG4gIGFzeW5jIG1vdmVCaW9TZWN0aW9uRG93biAoaW5kZXgpIHtcbiAgICBjb25zdCBiaW8gPSBkdXBsaWNhdGUodGhpcy5kYXRhLmRhdGEuYmlvZ3JhcGh5KVxuICAgIGlmIChpbmRleCA+PSBiaW8ubGVuZ3RoIC0gMSkgcmV0dXJuXG4gICAgY29uc3QgZWxlbSA9IGJpby5zcGxpY2UoaW5kZXgsIDEpWzBdXG4gICAgYmlvLnNwbGljZShpbmRleCArIDEsIDAsIGVsZW0pXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS5iaW9ncmFwaHknOiBiaW8gfSlcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVRleHRBcmVhICh0ZXh0QXJlYSkge1xuICAgIGNvbnN0IG5hbWUgPSAnZGF0YS4nICsgdGV4dEFyZWEuZGF0YXNldC5hcmVhTmFtZVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgW25hbWVdOiB0ZXh0QXJlYS52YWx1ZSB9KVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBpdGVtIGZvciB0aGF0IGFjdG9yLlxuICAgKiBJZiBpdCdzIGEgc2tpbGwgZmlyc3QgY2hlY2sgaWYgdGhlIHNraWxsIGlzIGFscmVhZHkgb3duZWQuIElmIGl0IGlzIGRvbid0IGNyZWF0ZSBhIHNlY29uZCB0aW1lLlxuICAgKiBGaWxsIHRoZSB2YWx1ZSBvZiB0aGUgc2tpbGwgd2l0aCBiYXNlIG9yIHRyeSB0byBldmFsdWF0ZSB0aGUgZm9ybXVsYS5cbiAgICogQHBhcmFtIHsqfSBlbWJlZGRlZE5hbWVcbiAgICogQHBhcmFtIHsqfSBkYXRhXG4gICAqIEBwYXJhbSB7Kn0gb3B0aW9uc1xuICAgKi9cbiAgYXN5bmMgY3JlYXRlRW1iZWRkZWREb2N1bWVudHMgKGVtYmVkZGVkTmFtZSwgZGF0YUFycmF5LCBvcHRpb25zKSB7XG4gICAgY29uc3QgcHJvY2Vzc2VkRGF0YUFycmF5ID0gW11cbiAgICBsZXQgYmFzZVZhbHVlID0gMFxuICAgIGxldCBiYXNlQ2FsY3VsYXRlZCA9IDBcbiAgICBsZXQgYXJjaGV0eXBlID0gZmFsc2VcbiAgICBsZXQgb2NjdXBhdGlvbiA9IGZhbHNlXG4gICAgZm9yIChjb25zdCBkYXRhIG9mIGRhdGFBcnJheSkge1xuICAgICAgc3dpdGNoIChkYXRhLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnc2tpbGwnOlxuICAgICAgICAgIGJhc2VWYWx1ZSA9IGRhdGEuZGF0YS5iYXNlXG4gICAgICAgICAgYmFzZUNhbGN1bGF0ZWQgPSBhd2FpdCBDb0M3SXRlbS5jYWxjdWxhdGVCYXNlKHRoaXMsIGRhdGEpXG4gICAgICAgICAgaWYgKHRoaXMuZGF0YS50eXBlICE9PSAnY2hhcmFjdGVyJykge1xuICAgICAgICAgICAgLy8gSWYgbm90IGEgUEMgc2V0IHNraWxsIHZhbHVlIHRvIGJhc2VcbiAgICAgICAgICAgIGlmICh0aGlzLmdldEl0ZW1JZEJ5TmFtZShkYXRhLm5hbWUpKSByZXR1cm4gLy8gSWYgc2tpbGwgd2l0aCB0aGlzIG5hbWUgZXhpc3QgcmV0dXJuXG5cbiAgICAgICAgICAgIGlmIChiYXNlVmFsdWUpIHtcbiAgICAgICAgICAgICAgaWYgKFN0cmluZyhiYXNlVmFsdWUpICE9PSBTdHJpbmcoZGF0YS5kYXRhLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGRhdGEuZGF0YS52YWx1ZSA9IGJhc2VDYWxjdWxhdGVkXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGlzTmFOKE51bWJlcihkYXRhLmRhdGEudmFsdWUpKSkge1xuICAgICAgICAgICAgICBsZXQgdmFsdWVcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IChcbiAgICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBSb2xsKFxuICAgICAgICAgICAgICAgICAgICBkYXRhLmRhdGEudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyc2VDaGFyYWN0ZXJpc3RpY3MoKVxuICAgICAgICAgICAgICAgICAgKS5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgKS50b3RhbFxuICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG51bGxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAodmFsdWUpIGRhdGEuZGF0YS52YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGRhdGEuZGF0YS52YWx1ZSA9IG51bGxcblxuICAgICAgICAgIGlmIChDb0M3SXRlbS5pc0FueVNwZWMoZGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNwZWNpYWxpemF0aW9uID0gZGF0YS5kYXRhLnNwZWNpYWxpemF0aW9uPy50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICBpZiAoc3BlY2lhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgbGV0IHNraWxsTGlzdCA9IFtdXG4gICAgICAgICAgICAgIGlmIChkYXRhLmRhdGE/LmZsYWdzPy5vY2N1cGF0aW9uIHx8IGRhdGEuZGF0YT8uZmxhZ3M/LmFyY2hldHlwZSkge1xuICAgICAgICAgICAgICAgIHNraWxsTGlzdCA9IHRoaXMuc2tpbGxzLmZpbHRlcihlbCA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAoIWVsLmRhdGEuZGF0YS5zcGVjaWFsaXphdGlvbikgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0YT8uZmxhZ3M/Lm9jY3VwYXRpb24gJiZcbiAgICAgICAgICAgICAgICAgICAgZWwuZGF0YS5kYXRhLmZsYWdzPy5vY2N1cGF0aW9uXG4gICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0YT8uZmxhZ3M/LmFyY2hldHlwZSAmJlxuICAgICAgICAgICAgICAgICAgICBlbC5kYXRhLmRhdGEuZmxhZ3M/LmFyY2hldHlwZVxuICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgc3BlY2lhbGl6YXRpb24udG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgICAgZWwuZGF0YS5kYXRhLnNwZWNpYWxpemF0aW9uPy50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvLyBpZiggMSA8PSBza2lsbExpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHNraWxsRGF0YSA9IGF3YWl0IFNraWxsU3BlY1NlbGVjdERpYWxvZy5jcmVhdGUoXG4gICAgICAgICAgICAgICAgc2tpbGxMaXN0LFxuICAgICAgICAgICAgICAgIGRhdGEuZGF0YS5zcGVjaWFsaXphdGlvbixcbiAgICAgICAgICAgICAgICBiYXNlQ2FsY3VsYXRlZFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGlmIChza2lsbERhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2tpbGxEYXRhLmdldCgnZXhpc3Rpbmctc2tpbGwnKSkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdJdGVtID0gdGhpcy5pdGVtcy5nZXQoXG4gICAgICAgICAgICAgICAgICAgIHNraWxsRGF0YS5nZXQoJ2V4aXN0aW5nLXNraWxsJylcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEuZGF0YS5mbGFncykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSBhd2FpdCBleGlzdGluZ0l0ZW0uc2V0SXRlbUZsYWcoa2V5KVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgZGF0YS5uYW1lID0gQ29DN0l0ZW0uZ2V0TmFtZVdpdGhvdXRTcGVjKGV4aXN0aW5nSXRlbSlcbiAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBpZiAoc2tpbGxEYXRhLmdldCgnbmV3LXNraWxsLW5hbWUnKSkge1xuICAgICAgICAgICAgICAgICAgICBkYXRhLm5hbWUgPSBza2lsbERhdGEuZ2V0KCduZXctc2tpbGwtbmFtZScpXG4gICAgICAgICAgICAgICAgICB9IGVsc2UgZGF0YS5uYW1lID0gQ29DN0l0ZW0uZ2V0TmFtZVdpdGhvdXRTcGVjKGRhdGEpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHNwZWNpYWxpemF0aW9uID0gZGF0YS5kYXRhLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICBpZiAoc3BlY2lhbGl6YXRpb24pIHtcbiAgICAgICAgICAgICAgZGF0YS5uYW1lID0gQ29DN0l0ZW0uZ2V0TmFtZVdpdGhvdXRTcGVjKGRhdGEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKFN0cmluZyhiYXNlVmFsdWUpICE9PSBTdHJpbmcoYmFzZUNhbGN1bGF0ZWQpKSB7XG4gICAgICAgICAgICBkYXRhLmRhdGEuYmFzZSA9IGJhc2VDYWxjdWxhdGVkXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcHJvY2Vzc2VkRGF0YUFycmF5LnB1c2goZHVwbGljYXRlKGRhdGEpKVxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAnd2VhcG9uJzoge1xuICAgICAgICAgIGlmICh0aGlzLmRhdGEudHlwZSAhPT0gJ2NvbnRhaW5lcicpIHtcbiAgICAgICAgICAgIGNvbnN0IG1haW5Ta2lsbCA9IGRhdGEuZGF0YT8uc2tpbGw/Lm1haW4/Lm5hbWVcbiAgICAgICAgICAgIGlmIChtYWluU2tpbGwpIHtcbiAgICAgICAgICAgICAgbGV0IHNraWxsID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUobWFpblNraWxsKVswXVxuICAgICAgICAgICAgICBpZiAoIXNraWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IG1haW5Ta2lsbC5tYXRjaCgvXFwoKFteKV0rKVxcKS8pXG4gICAgICAgICAgICAgICAgICA/IG1haW5Ta2lsbC5tYXRjaCgvXFwoKFteKV0rKVxcKS8pWzFdXG4gICAgICAgICAgICAgICAgICA6IG1haW5Ta2lsbFxuICAgICAgICAgICAgICAgIHNraWxsID0gYXdhaXQgdGhpcy5jcmVhdGVXZWFwb25Ta2lsbChcbiAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICAhIWRhdGEuZGF0YS5wcm9wZXJ0aWVzPy5ybmdkXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChza2lsbCkgZGF0YS5kYXRhLnNraWxsLm1haW4uaWQgPSBza2lsbC5pZFxuICAgICAgICAgICAgfSAvLyBUT0RPIDogRWxzZSA6IHNlbGVjdGlvbm5lciBsZSBza2lsbCBkYW5zIGxhIGxpc3RlIG91IGVuIGNyw6llciB1biBub3V2ZWF1LlxuXG4gICAgICAgICAgICBjb25zdCBzZWNvbmRTa2lsbCA9IGRhdGEuZGF0YT8uc2tpbGw/LmFsdGVybmF0aXY/Lm5hbWVcbiAgICAgICAgICAgIGlmIChzZWNvbmRTa2lsbCkge1xuICAgICAgICAgICAgICBsZXQgc2tpbGwgPSB0aGlzLmdldFNraWxsc0J5TmFtZShzZWNvbmRTa2lsbClbMF1cbiAgICAgICAgICAgICAgaWYgKCFza2lsbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBtYWluU2tpbGwubWF0Y2goL1xcKChbXildKylcXCkvKVxuICAgICAgICAgICAgICAgICAgPyBtYWluU2tpbGwubWF0Y2goL1xcKChbXildKylcXCkvKVsxXVxuICAgICAgICAgICAgICAgICAgOiBtYWluU2tpbGxcbiAgICAgICAgICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMuY3JlYXRlV2VhcG9uU2tpbGwoXG4gICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgISFkYXRhLmRhdGEucHJvcGVydGllcz8ucm5nZFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoc2tpbGwpIGRhdGEuZGF0YS5za2lsbC5hbHRlcm5hdGl2LmlkID0gc2tpbGwuaWRcbiAgICAgICAgICAgIH0gLy8gVE9ETyA6IEVsc2UgOiBzZWxlY3Rpb25uZXIgbGUgc2tpbGwgZGFucyBsYSBsaXN0ZSBvdSBlbiBjcsOpZXIgdW4gbm91dmVhdS5cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBwcm9jZXNzZWREYXRhQXJyYXkucHVzaChkdXBsaWNhdGUoZGF0YSkpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuXG4gICAgICAgIGNhc2UgJ3NldHVwJzoge1xuICAgICAgICAgIGlmIChkYXRhLmRhdGEuZW5hYmxlQ2hhcmFjdGVyaXNpdGljcykge1xuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0ID0ge31cbiAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5zdHIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdzdHInKVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0LmNvbiA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoJ2NvbicpXG4gICAgICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmxpc3Quc2l6ID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnc2l6JylcbiAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5kZXggPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdkZXgnKVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0LmFwcCA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoJ2FwcCcpXG4gICAgICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmxpc3QuaW50ID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnaW50JylcbiAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5wb3cgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdwb3cnKVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0LmVkdSA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoJ2VkdScpXG5cbiAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5sdWNrID0ge31cbiAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5sdWNrLnZhbHVlID0gaXNOYU4odGhpcy5sdWNrKVxuICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgOiB0aGlzLmx1Y2tcbiAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5sdWNrLmxhYmVsID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAnQ29DNy5MdWNrJ1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0Lmx1Y2suc2hvcnROYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAnQ29DNy5MdWNrJ1xuICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICBpZiAoIWRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzKSB7XG4gICAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzID0ge31cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnN0ciA9XG4gICAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5zdHIudmFsdWVcbiAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLmNvbiA9XG4gICAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5jb24udmFsdWVcbiAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnNpeiA9XG4gICAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5zaXoudmFsdWVcbiAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLmRleCA9XG4gICAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5kZXgudmFsdWVcbiAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLmFwcCA9XG4gICAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5hcHAudmFsdWVcbiAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLmludCA9XG4gICAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5pbnQudmFsdWVcbiAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnBvdyA9XG4gICAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5wb3cudmFsdWVcbiAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLmVkdSA9XG4gICAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5lZHUudmFsdWVcbiAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLmx1Y2sgPVxuICAgICAgICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmxpc3QubHVjay52YWx1ZVxuICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLmVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgZGF0YS5kYXRhLnRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNwZW5kUG9pbnRzJylcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRhdGEuZGF0YS50aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsQ2hhcmFjJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRhdGEuZGF0YS5wb2ludHNXYXJuaW5nID0gIShcbiAgICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuc3RyICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLmNvbiAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5zaXogIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuZGV4ICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLmFwcCAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5pbnQgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMucG93ICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLmVkdSAhPT0gbnVsbFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgY29uc3Qgcm9sbGVkID0gYXdhaXQgQ2hhcmFjUm9sbERpYWxvZy5jcmVhdGUoZGF0YS5kYXRhKVxuICAgICAgICAgICAgaWYgKHJvbGxlZCkge1xuICAgICAgICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cbiAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgW1xuICAgICAgICAgICAgICAgICdzdHInLFxuICAgICAgICAgICAgICAgICdjb24nLFxuICAgICAgICAgICAgICAgICdzaXonLFxuICAgICAgICAgICAgICAgICdkZXgnLFxuICAgICAgICAgICAgICAgICdhcHAnLFxuICAgICAgICAgICAgICAgICdpbnQnLFxuICAgICAgICAgICAgICAgICdwb3cnLFxuICAgICAgICAgICAgICAgICdlZHUnXG4gICAgICAgICAgICAgIF0pIHtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNba2V5XSkge1xuICAgICAgICAgICAgICAgICAgdXBkYXRlRGF0YVtgZGF0YS5jaGFyYWN0ZXJpc3RpY3MuJHtrZXl9LnZhbHVlYF0gPVxuICAgICAgICAgICAgICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1trZXldXG4gICAgICAgICAgICAgICAgICB1cGRhdGVEYXRhW2BkYXRhLmNoYXJhY3RlcmlzdGljcy4ke2tleX0uZm9ybXVsYWBdID1cbiAgICAgICAgICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5yb2xsc1trZXldXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5sdWNrKSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5hdHRyaWJzLmxjay52YWx1ZSddID1cbiAgICAgICAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLmx1Y2tcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMucG93KSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5hdHRyaWJzLnNhbi52YWx1ZSddID1cbiAgICAgICAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnBvd1xuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHknXSA9XG4gICAgICAgICAgICAgICAgICAnIC8gJyArIE1hdGguZmxvb3IoZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMucG93IC8gNSlcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmluZGVmaW5pdGVJbnNhbml0eUxldmVsLm1heCddID0gdXBkYXRlRGF0YVtcbiAgICAgICAgICAgICAgICAgICdkYXRhLmF0dHJpYnMubXAudmFsdWUnXG4gICAgICAgICAgICAgICAgXSA9IHVwZGF0ZURhdGFbJ2RhdGEuYXR0cmlicy5tcC5tYXgnXSA9IE1hdGguZmxvb3IoXG4gICAgICAgICAgICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5wb3cgLyA1XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHVwZGF0ZURhdGEpXG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgICAgICAgICAnZGF0YS5hdHRyaWJzLmhwLnZhbHVlJzogdGhpcy5ocE1heCxcbiAgICAgICAgICAgICAgICAnZGF0YS5hdHRyaWJzLmhwLm1heCc6IHRoaXMuaHBNYXhcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0gZWxzZSByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3Qgc2tpbGxzID0gZGF0YS5kYXRhLml0ZW1zLmZpbHRlcihpdCA9PiBpdC50eXBlID09PSAnc2tpbGwnKVxuICAgICAgICAgIGNvbnN0IG90aGVyc0l0ZW1zID0gZGF0YS5kYXRhLml0ZW1zLmZpbHRlcihpdCA9PiBpdC50eXBlICE9PSAnc2tpbGwnKVxuICAgICAgICAgIGF3YWl0IHRoaXMuYWRkVW5pcXVlSXRlbXMoc2tpbGxzKVxuICAgICAgICAgIGF3YWl0IHRoaXMuYWRkSXRlbXMob3RoZXJzSXRlbXMpXG4gICAgICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ29uZUJsb2NrQmFja3N0b3J5JykpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ2RhdGEuYmFja3N0b3J5JzogZGF0YS5kYXRhLmJhY2tzdG9yeSB9KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNlY3Rpb25OYW1lIG9mIGRhdGEuZGF0YS5iaW9TZWN0aW9ucykge1xuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgIXRoaXMuZGF0YS5kYXRhLmJpb2dyYXBoeT8uZmluZChcbiAgICAgICAgICAgICAgICAgIGVsID0+IHNlY3Rpb25OYW1lID09PSBlbC50aXRsZVxuICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICBzZWN0aW9uTmFtZVxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZUJpb1NlY3Rpb24oc2VjdGlvbk5hbWUpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgSG9va3MuY2FsbCgnc2V0dXBGaW5pc2hlZENvQzcnKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnYXJjaGV0eXBlJzpcbiAgICAgICAgICBpZiAodGhpcy5kYXRhLnR5cGUgPT09ICdjaGFyYWN0ZXInKSB7XG4gICAgICAgICAgICAvLyBBcmNoZXR5cHJlIG9ubHkgZm9yIFBDc1xuICAgICAgICAgICAgaWYgKHRoaXMuYXJjaGV0eXBlKSB7XG4gICAgICAgICAgICAgIGxldCByZXNldEFyY2hldHlwZSA9IGZhbHNlXG4gICAgICAgICAgICAgIGF3YWl0IERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlc2V0QXJjaGV0eXBlJyksXG4gICAgICAgICAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZXNldEFyY2hldHlwZUhpbnQnLCB7XG4gICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWVcbiAgICAgICAgICAgICAgICB9KX08L3A+YCxcbiAgICAgICAgICAgICAgICB5ZXM6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJlc2V0QXJjaGV0eXBlID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGVmYXVsdFllczogZmFsc2VcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgaWYgKHJlc2V0QXJjaGV0eXBlKSBhd2FpdCB0aGlzLnJlc2V0QXJjaGV0eXBlKClcbiAgICAgICAgICAgICAgZWxzZSByZXR1cm5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgY29yZUNoYXJhYyA9IFtdXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIE9iamVjdC5lbnRyaWVzKGRhdGEuZGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWNzKSkge1xuICAgICAgICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBlbnRyeVxuICAgICAgICAgICAgICBkYXRhLmRhdGEuY29yZUNoYXJhY3RlcmlzdGljc1trZXldID0gZmFsc2VcbiAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hhciA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoa2V5KVxuICAgICAgICAgICAgICAgIGNoYXIua2V5ID0ga2V5XG4gICAgICAgICAgICAgICAgY29yZUNoYXJhYy5wdXNoKGNoYXIpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGNoYXJhY1xuXG4gICAgICAgICAgICBpZiAoY29yZUNoYXJhYy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNoYXJEaWFsb2dEYXRhID0ge31cbiAgICAgICAgICAgICAgY2hhckRpYWxvZ0RhdGEuY2hhcmFjdGVyaXN0aWNzID0gY29yZUNoYXJhY1xuICAgICAgICAgICAgICBjaGFyRGlhbG9nRGF0YS50aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TZWxlY3RDb3JlQ2hhcmFjJylcbiAgICAgICAgICAgICAgY2hhcmFjID0gYXdhaXQgQ2hhcmFjU2VsZWN0RGlhbG9nLmNyZWF0ZShjaGFyRGlhbG9nRGF0YSlcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29yZUNoYXJhYy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgY2hhcmFjID0gY29yZUNoYXJhY1swXS5rZXlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFjaGFyYWMpIHJldHVyblxuICAgICAgICAgICAgZGF0YS5kYXRhLmNvcmVDaGFyYWN0ZXJpc3RpY3NbY2hhcmFjXSA9IHRydWVcbiAgICAgICAgICAgIGlmIChkYXRhLmRhdGEuY29yZUNoYXJhY3RlcmlzdGljc0Zvcm11bGEuZW5hYmxlZCkge1xuICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBOdW1iZXIoZGF0YS5kYXRhLmNvcmVDaGFyYWN0ZXJpc3RpY3NGb3JtdWxhLnZhbHVlKVxuICAgICAgICAgICAgICBpZiAoaXNOYU4odmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hhciA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoY2hhcmFjKVxuICAgICAgICAgICAgICAgIGNvbnN0IHJvbGwgPSBuZXcgUm9sbChcbiAgICAgICAgICAgICAgICAgIGRhdGEuZGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWNzRm9ybXVsYS52YWx1ZVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBhd2FpdCByb2xsLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgIHJvbGwudG9NZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgIGZsYXZvcjogYFJvbGxpbmcgY2hhcmFjdGVyaXNpdGljICR7Y2hhci5sYWJlbH06ICR7ZGF0YS5kYXRhLmNvcmVDaGFyYWN0ZXJpc3RpY3NGb3JtdWxhLnZhbHVlfWBcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIHZhbHVlID0gY2hhci52YWx1ZSA8IHJvbGwudG90YWwgPyByb2xsLnRvdGFsIDogY2hhci52YWx1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgICAgICAgICBbYGRhdGEuY2hhcmFjdGVyaXN0aWNzLiR7Y2hhcmFjfS52YWx1ZWBdOiB2YWx1ZVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBZGQgYWxsIHNraWxsc1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRVbmlxdWVJdGVtcyhkYXRhLmRhdGEuc2tpbGxzLCAnYXJjaGV0eXBlJylcblxuICAgICAgICAgICAgcHJvY2Vzc2VkRGF0YUFycmF5LnB1c2goZHVwbGljYXRlKGRhdGEpKVxuICAgICAgICAgICAgYXJjaGV0eXBlID0gdHJ1ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ29jY3VwYXRpb24nOlxuICAgICAgICAgIGlmICh0aGlzLmRhdGEudHlwZSA9PT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgICAgICAgIC8vIE9jY3VwYXRpb24gb25seSBmb3IgUENzXG4gICAgICAgICAgICBpZiAodGhpcy5vY2N1cGF0aW9uKSB7XG4gICAgICAgICAgICAgIGxldCByZXNldE9jY3VwYXRpb24gPSBmYWxzZVxuICAgICAgICAgICAgICBhd2FpdCBEaWFsb2cuY29uZmlybSh7XG4gICAgICAgICAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZXNldE9jY3VwYXRpb24nKSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlc2V0T2NjdXBhdGlvbkhpbnQnLCB7XG4gICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWVcbiAgICAgICAgICAgICAgICB9KX08L3A+YCxcbiAgICAgICAgICAgICAgICB5ZXM6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJlc2V0T2NjdXBhdGlvbiA9IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRlZmF1bHRZZXM6IGZhbHNlXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIGlmIChyZXNldE9jY3VwYXRpb24pIGF3YWl0IHRoaXMucmVzZXRPY2N1cGF0aW9uKClcbiAgICAgICAgICAgICAgZWxzZSByZXR1cm5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2VsZWN0IGNoYXJhY3RlcmlzdGljXG4gICAgICAgICAgICBjb25zdCBwb2ludHNEaWFsb2dEYXRhID0ge31cbiAgICAgICAgICAgIHBvaW50c0RpYWxvZ0RhdGEuY2hhcmFjdGVyaXN0aWNzID0gZGF0YS5kYXRhLm9jY3VwYXRpb25Ta2lsbFBvaW50c1xuICAgICAgICAgICAgbGV0IHRvdGFsID0gMFxuICAgICAgICAgICAgbGV0IG9wdGlvbmFsQ2hhciA9IGZhbHNlXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgICAgICAgICBkYXRhLmRhdGEub2NjdXBhdGlvblNraWxsUG9pbnRzXG4gICAgICAgICAgICApKSB7XG4gICAgICAgICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IGVudHJ5XG4gICAgICAgICAgICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKGtleSlcbiAgICAgICAgICAgICAgcG9pbnRzRGlhbG9nRGF0YS5jaGFyYWN0ZXJpc3RpY3Nba2V5XS5uYW1lID0gY2hhci5sYWJlbFxuICAgICAgICAgICAgICBwb2ludHNEaWFsb2dEYXRhLmNoYXJhY3RlcmlzdGljc1trZXldLnZhbHVlID0gY2hhci52YWx1ZVxuICAgICAgICAgICAgICBpZiAodmFsdWUuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBwb2ludHNEaWFsb2dEYXRhLmNoYXJhY3RlcmlzdGljc1trZXldLnRvdGFsID1cbiAgICAgICAgICAgICAgICAgIGNoYXIudmFsdWUgKlxuICAgICAgICAgICAgICAgICAgTnVtYmVyKHBvaW50c0RpYWxvZ0RhdGEuY2hhcmFjdGVyaXN0aWNzW2tleV0ubXVsdGlwbGllcilcbiAgICAgICAgICAgICAgICBpZiAoIXZhbHVlLm9wdGlvbmFsKSB7XG4gICAgICAgICAgICAgICAgICB0b3RhbCArPSBwb2ludHNEaWFsb2dEYXRhLmNoYXJhY3RlcmlzdGljc1trZXldLnRvdGFsXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIG9wdGlvbmFsQ2hhciA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvaW50c0RpYWxvZ0RhdGEudG90YWwgPSB0b3RhbFxuICAgICAgICAgICAgaWYgKG9wdGlvbmFsQ2hhcikge1xuICAgICAgICAgICAgICAvLyBJcyB0aGVyZSBhbnkgb3B0aW9uYWwgY2hhciB0byBjaG9vc2UgZm9yIHBvaW50cyBjYWxjID9cbiAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUG9pbnRTZWxlY3REaWFsb2cuY3JlYXRlKHBvaW50c0RpYWxvZ0RhdGEpXG4gICAgICAgICAgICAgIGlmICghcmVzdWx0KSByZXR1cm4gLy8gUG9pbnQgbm90IHNlbGVjdGVkID0+IGV4aXQuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFkZCBvcHRpb25hbCBza2lsbHNcbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBkYXRhLmRhdGEuZ3JvdXBzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICBjb25zdCBkaWFsb2dEYXRhID0ge31cbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS5za2lsbHMgPSBbXVxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLnR5cGUgPSAnb2NjdXBhdGlvbidcbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS5hY3RvcklkID0gdGhpcy5pZFxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLm9wdGlvbnNDb3VudCA9IE51bWJlcihkYXRhLmRhdGEuZ3JvdXBzW2luZGV4XS5vcHRpb25zKVxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLnRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNraWxsU2VsZWN0aW9uV2luZG93JylcblxuICAgICAgICAgICAgICAvLyBTZWxlY3Qgb25seSBza2lsbHMgdGhhdCBhcmUgbm90IHByZXNlbnQgb3IgYXJlIG5vdCBmbGFnZ2VkIGFzIG9jY3VwYXRpb24uXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgZGF0YS5kYXRhLmdyb3Vwc1tpbmRleF0uc2tpbGxzKSB7XG4gICAgICAgICAgICAgICAgaWYgKENvQzdJdGVtLmlzQW55U3BlYyh2YWx1ZSkpIGRpYWxvZ0RhdGEuc2tpbGxzLnB1c2godmFsdWUpXG4gICAgICAgICAgICAgICAgLy8gSWYgaXQncyBhIGdlbmVyaWMgc3BlYyB3ZSBhbHdheXMgYWRkIGl0XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuaXRlbXMuZmluZChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZSA9PT0gdmFsdWUubmFtZSAmJiBpdGVtLnR5cGUgPT09ICdza2lsbCdcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBpZiAoIXNraWxsIHx8ICFza2lsbC5kYXRhLmRhdGEuZmxhZ3M/Lm9jY3VwYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgc2tpbGwgd2FzIGFkZGVkIHRvIHNraWxsIGxpc3QgcHJldmlvdXNseSwgcmVtb3ZlIGl0XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFscmVhZHlTZWxlY3RlZFNraWxsID0gZGF0YS5kYXRhLnNraWxscy5maW5kKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLm5hbWUgPT09IHZhbHVlLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhbHJlYWR5U2VsZWN0ZWRTa2lsbCkgZGlhbG9nRGF0YS5za2lsbHMucHVzaCh2YWx1ZSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBpZiB0aGVyZSdzIG5vbmUsIGRvIG5vdGhpbmcuXG4gICAgICAgICAgICAgIGlmIChkaWFsb2dEYXRhLnNraWxscy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHNraWxsIG9mIGRpYWxvZ0RhdGEuc2tpbGxzKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIHNraWxsLmRhdGEuc3BlY2lhbGl6YXRpb24gJiZcbiAgICAgICAgICAgICAgICAgICAgIXNraWxsLm5hbWUuaW5jbHVkZXMoc2tpbGwuZGF0YS5zcGVjaWFsaXphdGlvbilcbiAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBza2lsbC5kaXNwbGF5TmFtZSA9IGAke3NraWxsLmRhdGEuc3BlY2lhbGl6YXRpb259ICgke3NraWxsLm5hbWV9KWBcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSBza2lsbC5kaXNwbGF5TmFtZSA9IHNraWxsLm5hbWVcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZGlhbG9nRGF0YS5za2lsbHMubGVuZ3RoIDw9IGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50KSB7XG4gICAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGlzIGxlc3Mgc2tpbGwgdGhhbiBvcHRpb25zLCBhZGQgdGhlbSBhbGwuXG4gICAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0xlc3NTa2lsbFRoYW5PcHRpb25zJywge1xuICAgICAgICAgICAgICAgICAgICAgIHNraWxsQ291bnQ6IGRpYWxvZ0RhdGEuc2tpbGxzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zQ291bnQ6IGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAvLyBhd2FpdCB0aGlzLmFkZFVuaXF1ZUl0ZW1zKCBkaWFsb2dEYXRhLnNraWxscywgJ29jY3VwYXRpb24nKTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IENvQzdJdGVtLm1lcmdlT3B0aW9uYWxTa2lsbHMoXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0YS5za2lsbHMsXG4gICAgICAgICAgICAgICAgICAgIGRpYWxvZ0RhdGEuc2tpbGxzXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICBkYXRhLmRhdGEuc2tpbGxzID0gbWVyZ2VkXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIC8vIFdhaXQgZm9yIHNraWxsIHNlbGVjdGlvbi5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkID0gYXdhaXQgU2tpbGxTZWxlY3REaWFsb2cuY3JlYXRlKGRpYWxvZ0RhdGEpXG4gICAgICAgICAgICAgICAgICBpZiAoIXNlbGVjdGVkKSByZXR1cm5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IENvQzdJdGVtLm1lcmdlT3B0aW9uYWxTa2lsbHMoXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0YS5za2lsbHMsXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICBkYXRhLmRhdGEuc2tpbGxzID0gbWVyZ2VkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JbmZvQWxsU2tpbGxzQWxyZWFkeVNlbGVjdGVkJylcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQWRkIGV4dHJhIHNraWxsc1xuICAgICAgICAgICAgaWYgKE51bWJlcihkYXRhLmRhdGEucGVyc29uYWwpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGRpYWxvZ0RhdGEgPSB7fVxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLnNraWxscyA9IFtdXG4gICAgICAgICAgICAgIGRpYWxvZ0RhdGEudHlwZSA9ICdvY2N1cGF0aW9uJ1xuICAgICAgICAgICAgICBkaWFsb2dEYXRhLmFjdG9ySWQgPSB0aGlzLmlkXG4gICAgICAgICAgICAgIGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50ID0gTnVtYmVyKGRhdGEuZGF0YS5wZXJzb25hbClcbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS50aXRsZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2VsZWN0UGVyc29uYWxTa2lsbHMnLCB7XG4gICAgICAgICAgICAgICAgbnVtYmVyOiBOdW1iZXIoZGF0YS5kYXRhLnBlcnNvbmFsKVxuICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgIC8vIFNlbGVjdCBvbmx5IHNraWxscyB0aGF0IGFyZSBub3QgcHJlc2VudCBvciBhcmUgbm90IGZsYWdnZWQgYXMgb2NjdXBhdGlvbi5cbiAgICAgICAgICAgICAgZm9yIChjb25zdCBzIG9mIHRoaXMuc2tpbGxzKSB7XG4gICAgICAgICAgICAgICAgLy8gU2VsZWN0IGFsbCBza2lsbHMgdGhhdCBhcmUgbm90IGFscmVhZHkgZmxhZ2dlZCBhcyBvY2N1cGF0aW9uLCBjYW4gaGF2ZSBhZGp1c3RtZW50cyBhbmQgWFAuXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgIXMuZGF0YS5kYXRhLmZsYWdzLm9jY3VwYXRpb24gJiZcbiAgICAgICAgICAgICAgICAgICFzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLm5vYWRqdXN0bWVudHMgJiZcbiAgICAgICAgICAgICAgICAgICFzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLm5veHBnYWluXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAvLyBpZiBza2lsbCBhbHJlYWR5IHNlbGVjdGVkIGRvbid0IGFkZCBpdFxuICAgICAgICAgICAgICAgICAgY29uc3QgYWxyZWFkeVNlbGVjdGVkU2tpbGwgPSBkYXRhLmRhdGEuc2tpbGxzLmZpbmQoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLm5hbWUgPT09IHMubmFtZVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIGlmICghYWxyZWFkeVNlbGVjdGVkU2tpbGwpIGRpYWxvZ0RhdGEuc2tpbGxzLnB1c2gocy5kYXRhKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIGlmIHRoZXJlJ3Mgbm9uZSwgZG8gbm90aGluZy5cbiAgICAgICAgICAgICAgaWYgKGRpYWxvZ0RhdGEuc2tpbGxzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgZGlhbG9nRGF0YS5za2lsbHMpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgc2tpbGwuZGF0YS5zcGVjaWFsaXphdGlvbiAmJlxuICAgICAgICAgICAgICAgICAgICAhc2tpbGwubmFtZS5pbmNsdWRlcyhza2lsbC5kYXRhLnNwZWNpYWxpemF0aW9uKVxuICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHNraWxsLmRpc3BsYXlOYW1lID0gYCR7c2tpbGwuZGF0YS5zcGVjaWFsaXphdGlvbn0gKCR7c2tpbGwubmFtZX0pYFxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHNraWxsLmRpc3BsYXlOYW1lID0gc2tpbGwubmFtZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZGlhbG9nRGF0YS5za2lsbHMubGVuZ3RoIDw9IGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50KSB7XG4gICAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGlzIGxlc3Mgc2tpbGwgdGhhbiBvcHRpb25zLCBhZGQgdGhlbSBhbGwuXG4gICAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0xlc3NTa2lsbFRoYW5PcHRpb25zJywge1xuICAgICAgICAgICAgICAgICAgICAgIHNraWxsQ291bnQ6IGRpYWxvZ0RhdGEuc2tpbGxzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zQ291bnQ6IGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAvLyBhd2FpdCB0aGlzLmFkZFVuaXF1ZUl0ZW1zKCBkaWFsb2dEYXRhLnNraWxscywgJ29jY3VwYXRpb24nKTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IENvQzdJdGVtLm1lcmdlT3B0aW9uYWxTa2lsbHMoXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0YS5za2lsbHMsXG4gICAgICAgICAgICAgICAgICAgIGRpYWxvZ0RhdGEuc2tpbGxzXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICBkYXRhLmRhdGEuc2tpbGxzID0gbWVyZ2VkXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIC8vIFdhaXQgZm9yIHNraWxsIHNlbGVjdGlvbi5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkID0gYXdhaXQgU2tpbGxTZWxlY3REaWFsb2cuY3JlYXRlKGRpYWxvZ0RhdGEpIC8vIERpYWxvZyBkYXRhIGJ1ZyA/Pz9cbiAgICAgICAgICAgICAgICAgIGlmICghc2VsZWN0ZWQpIHJldHVyblxuICAgICAgICAgICAgICAgICAgY29uc3QgbWVyZ2VkID0gQ29DN0l0ZW0ubWVyZ2VPcHRpb25hbFNraWxscyhcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5kYXRhLnNraWxscyxcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIGRhdGEuZGF0YS5za2lsbHMgPSBtZXJnZWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkluZm9BbGxTa2lsbHNBbHJlYWR5U2VsZWN0ZWQnKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBZGQgYWxsIHNraWxsc1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRVbmlxdWVJdGVtcyhkYXRhLmRhdGEuc2tpbGxzLCAnb2NjdXBhdGlvbicpXG4gICAgICAgICAgICAvLyBDcmVkaXQgcmF0aW5nIGlzIGFsd2F5cyBwYXJ0IG9mIG9jY3VwYXRpb25cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlZGl0UmF0aW5nU2tpbGw/LnNldEl0ZW1GbGFnKCdvY2N1cGF0aW9uJylcbiAgICAgICAgICAgIC8vIHNldHRpbmcgaXQgdG8gbWluIGNyZWRpdCByYXRpbmdcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlZGl0UmF0aW5nU2tpbGw/LnVwZGF0ZSh7XG4gICAgICAgICAgICAgICdkYXRhLmFkanVzdG1lbnRzLm9jY3VwYXRpb24nOiBOdW1iZXIoZGF0YS5kYXRhLmNyZWRpdFJhdGluZy5taW4pXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBwcm9jZXNzZWREYXRhQXJyYXkucHVzaChkdXBsaWNhdGUoZGF0YSkpXG4gICAgICAgICAgICBvY2N1cGF0aW9uID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcHJvY2Vzc2VkRGF0YUFycmF5LnB1c2goZHVwbGljYXRlKGRhdGEpKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAocHJvY2Vzc2VkRGF0YUFycmF5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIGNvbnN0IHByb2Nlc3NlZCA9IGF3YWl0IHN1cGVyLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKFxuICAgICAgZW1iZWRkZWROYW1lLFxuICAgICAgcHJvY2Vzc2VkRGF0YUFycmF5LFxuICAgICAgb3B0aW9uc1xuICAgIClcblxuICAgIGlmIChhcmNoZXR5cGUpIHtcbiAgICAgIC8vIHNldHRpbmcgcG9pbnRzXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdkYXRhLmRldmVsb3BtZW50LmFyY2hldHlwZSc6IHRoaXMuYXJjaGV0eXBlUG9pbnRzXG4gICAgICB9KVxuICAgICAgSG9va3MuY2FsbCgnYXJjaGV0eXBlRmluaXNoZWRDb0M3JylcbiAgICB9XG4gICAgaWYgKG9jY3VwYXRpb24pIHtcbiAgICAgIC8vIHNldHRpbmcgcG9pbnRzXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdkYXRhLmRldmVsb3BtZW50Lm9jY3VwYXRpb24nOiB0aGlzLm9jY3VwYXRpb25Qb2ludHMsXG4gICAgICAgICdkYXRhLmRldmVsb3BtZW50LnBlcnNvbmFsJzogdGhpcy5wZXJzb25hbFBvaW50c1xuICAgICAgfSlcbiAgICAgIEhvb2tzLmNhbGwoJ29jY3VwYXRpb25GaW5pc2hlZENvQzcnKVxuICAgIH1cblxuICAgIHJldHVybiBwcm9jZXNzZWRcbiAgfVxuXG4gIC8vIGdldFNraWxsSWRCeU5hbWUoIHNraWxsTmFtZSl7XG4gIC8vICAgbGV0IGlkID0gbnVsbDtcbiAgLy8gICAgZm9yIChjb25zdCBbbWFwLCBrZXksIHZhbHVlXSBvZiB0aGlzLml0ZW1zKSB7XG4gIC8vICAgICBpZiggdmFsdWUubmFtZSA9PSBza2lsbE5hbWUpIGlkID0gdmFsdWUuaWQ7XG4gIC8vICAgfTtcblxuICAvLyAgIHJldHVybiBpZDtcbiAgLy8gfVxuXG4gIGdldEl0ZW1JZEJ5TmFtZSAoaXRlbU5hbWUpIHtcbiAgICBsZXQgaWQgPSBudWxsXG4gICAgY29uc3QgbmFtZSA9IGl0ZW1OYW1lLm1hdGNoKC9cXCgoW14pXSspXFwpLylcbiAgICAgID8gaXRlbU5hbWUubWF0Y2goL1xcKChbXildKylcXCkvKVsxXVxuICAgICAgOiBpdGVtTmFtZVxuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdGhpcy5pdGVtcykge1xuICAgICAgaWYgKFxuICAgICAgICBDb0M3SXRlbS5nZXROYW1lV2l0aG91dFNwZWModmFsdWUpLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgKSB7XG4gICAgICAgIGlkID0gdmFsdWUuaWRcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaWRcbiAgfVxuXG4gIGdldEl0ZW1zQnlOYW1lIChpdGVtTmFtZSkge1xuICAgIGNvbnN0IGl0ZW1MaXN0ID0gW11cbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgIGlmICh2YWx1ZS5uYW1lID09PSBpdGVtTmFtZSkgaXRlbUxpc3QucHVzaCh2YWx1ZSlcbiAgICB9XG5cbiAgICByZXR1cm4gaXRlbUxpc3RcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKlxuICAgKi9cbiAgZ2V0U2tpbGxzQnlOYW1lIChza2lsbE5hbWUpIHtcbiAgICAvLyBUT0RPIDogbW9yZSBhZ2dyZXNzaXZlIGZpbmRpbmcgaW5jbHVkaW5nIHNwZWNzXG4gICAgY29uc3Qgc2tpbGxMaXN0ID0gW11cbiAgICBjb25zdCBuYW1lID0gc2tpbGxOYW1lLm1hdGNoKC9cXCgoW14pXSspXFwpLylcbiAgICAgID8gc2tpbGxOYW1lLm1hdGNoKC9cXCgoW14pXSspXFwpLylbMV1cbiAgICAgIDogc2tpbGxOYW1lXG5cbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgIGlmIChcbiAgICAgICAgQ29DN0l0ZW0uZ2V0TmFtZVdpdGhvdXRTcGVjKHZhbHVlKS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgIG5hbWUudG9Mb3dlckNhc2UoKSAmJlxuICAgICAgICB2YWx1ZS50eXBlID09PSAnc2tpbGwnXG4gICAgICApIHtcbiAgICAgICAgc2tpbGxMaXN0LnB1c2godmFsdWUpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBza2lsbExpc3RcbiAgfVxuXG4gIHBhcnNlRm9ybXVsYSAoZm9ybXVsYSkge1xuICAgIGxldCBwYXJzZWRGb3JtdWxhID0gZm9ybXVsYVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZm9ybXVsYS5hY3RvcikpIHtcbiAgICAgIHBhcnNlZEZvcm11bGEgPSBwYXJzZWRGb3JtdWxhLnJlcGxhY2Uoa2V5LCB2YWx1ZSlcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlZEZvcm11bGFcbiAgfVxuXG4gIHBhcnNlQ2hhcmFjdGVyaXN0aWNzICgpIHtcbiAgICBjb25zdCBwYXJzZWQgPSB7fVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZm9ybXVsYS5hY3RvcikpIHtcbiAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCgnQCcpICYmIHZhbHVlLnN0YXJ0c1dpdGgoJ3RoaXMuJykpIHtcbiAgICAgICAgcGFyc2VkW2tleS5zdWJzdHJpbmcoMSldID0gZ2V0UHJvcGVydHkodGhpcywgdmFsdWUuc3Vic3RyaW5nKDUpKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcGFyc2VkXG4gIH1cblxuICBzdGF0aWMgZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uICgpIHtcbiAgICBjb25zdCBjaGFyYWN0ZXJpc3RpY3MgPSBbXVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgZ2FtZS5zeXN0ZW0udGVtcGxhdGUuQWN0b3IudGVtcGxhdGVzLmNoYXJhY3RlcmlzdGljcy5jaGFyYWN0ZXJpc3RpY3NcbiAgICApKSB7XG4gICAgICBjaGFyYWN0ZXJpc3RpY3MucHVzaCh7XG4gICAgICAgIGtleToga2V5LFxuICAgICAgICBzaG9ydE5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCksXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUubGFiZWwpXG4gICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4gY2hhcmFjdGVyaXN0aWNzXG4gIH1cblxuICBnZXRDaGFyYWN0ZXJpc3RpYyAoY2hhck5hbWUpIHtcbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzXG4gICAgICApKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUuc2hvcnQpLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICBjaGFyTmFtZS50b0xvd2VyQ2FzZSgpIHx8XG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLmxhYmVsKS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgY2hhck5hbWUudG9Mb3dlckNhc2UoKSB8fFxuICAgICAgICAgIGtleSA9PT0gY2hhck5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2V5OiBrZXksXG4gICAgICAgICAgICBzaG9ydE5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCksXG4gICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLmxhYmVsKSxcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZS52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0QXR0cmlidXRlIChhdHRyaWJOYW1lKSB7XG4gICAgaWYgKFxuICAgICAgWydsY2snLCAnbHVjaycsIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJykudG9Mb3dlckNhc2UoKV0uaW5jbHVkZXMoXG4gICAgICAgIGF0dHJpYk5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgKVxuICAgICkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAga2V5OiAnbGNrJyxcbiAgICAgICAgc2hvcnROYW1lOiAnbHVjaycsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpLFxuICAgICAgICB2YWx1ZTogdGhpcy5kYXRhLmRhdGEuYXR0cmlicy5sY2sudmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKFxuICAgICAgW1xuICAgICAgICAnc2FuJyxcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNBTicpLnRvTG93ZXJDYXNlKCksXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHknKS50b0xvd2VyQ2FzZSgpXG4gICAgICBdLmluY2x1ZGVzKGF0dHJpYk5hbWUudG9Mb3dlckNhc2UoKSlcbiAgICApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGtleTogJ3NhbicsXG4gICAgICAgIHNob3J0TmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNBTicpLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eScpLFxuICAgICAgICB2YWx1ZTogdGhpcy5kYXRhLmRhdGEuYXR0cmlicy5zYW4udmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBvY2N1cGF0aW9uICgpIHtcbiAgICBjb25zdCBvY2N1cGF0aW9uID0gdGhpcy5pdGVtcy5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09ICdvY2N1cGF0aW9uJylcbiAgICByZXR1cm4gb2NjdXBhdGlvblswXVxuICB9XG5cbiAgZ2V0IGFyY2hldHlwZSAoKSB7XG4gICAgY29uc3QgYXJjaGV0eXBlID0gdGhpcy5pdGVtcy5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09ICdhcmNoZXR5cGUnKVxuICAgIHJldHVybiBhcmNoZXR5cGVbMF1cbiAgfVxuXG4gIGFzeW5jIHJlc2V0T2NjdXBhdGlvbiAoZXJhc2VPbGQgPSB0cnVlKSB7XG4gICAgaWYgKGVyYXNlT2xkKSB7XG4gICAgICBjb25zdCBvY2N1cGF0aW9uU2tpbGwgPSB0aGlzLml0ZW1zLmZpbHRlcihpdGVtID0+XG4gICAgICAgIGl0ZW0uZ2V0SXRlbUZsYWcoJ29jY3VwYXRpb24nKVxuICAgICAgKVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IG9jY3VwYXRpb25Ta2lsbC5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgYXdhaXQgb2NjdXBhdGlvblNraWxsW2luZGV4XS51bnNldEl0ZW1GbGFnKCdvY2N1cGF0aW9uJylcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMub2NjdXBhdGlvbikgYXdhaXQgdGhpcy5vY2N1cGF0aW9uLmRlbGV0ZSgpXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS5kZXZlbG9wbWVudC5vY2N1cGF0aW9uJzogbnVsbCB9KVxuICB9XG5cbiAgYXN5bmMgcmVzZXRBcmNoZXR5cGUgKGVyYXNlT2xkID0gdHJ1ZSkge1xuICAgIGlmIChlcmFzZU9sZCkge1xuICAgICAgY29uc3QgYXJjaGV0eXBlU2tpbGwgPSB0aGlzLml0ZW1zLmZpbHRlcihpdGVtID0+XG4gICAgICAgIGl0ZW0uZ2V0SXRlbUZsYWcoJ2FyY2hldHlwZScpXG4gICAgICApXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYXJjaGV0eXBlU2tpbGwubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIGF3YWl0IGFyY2hldHlwZVNraWxsW2luZGV4XS51bnNldEl0ZW1GbGFnKCdhcmNoZXR5cGUnKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5hcmNoZXR5cGUpIGF3YWl0IHRoaXMuYXJjaGV0eXBlLmRlbGV0ZSgpXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS5kZXZlbG9wbWVudC5hcmNoZXR5cGUnOiBudWxsIH0pXG4gIH1cblxuICBnZXQgbHVjayAoKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLmF0dHJpYnM/Lmxjaz8udmFsdWUpXG4gIH1cblxuICBhc3luYyBzZXRMdWNrICh2YWx1ZSkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdkYXRhLmF0dHJpYnMubGNrLnZhbHVlJzogdmFsdWUgfSlcbiAgfVxuXG4gIGFzeW5jIHNwZW5kTHVjayAoYW1vdW50KSB7XG4gICAgYW1vdW50ID0gcGFyc2VJbnQoYW1vdW50KVxuICAgIGlmICghKHRoaXMubHVjayA+PSBhbW91bnQpKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gdGhpcy5zZXRMdWNrKHRoaXMubHVjayAtIGFtb3VudClcbiAgfVxuXG4gIGdldCBocCAoKSB7XG4gICAgaWYgKFsndmVoaWNsZSddLmluY2x1ZGVzKHRoaXMuZGF0YS50eXBlKSkge1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQgPT09IG51bGwgfHxcbiAgICAgICAgdW5kZWZpbmVkID09PSB0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQgfHxcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEuYXR0cmlicy5idWlsZC5jdXJyZW50ID09PSAnJ1xuICAgICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1aWxkXG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMuYnVpbGQuY3VycmVudCA+XG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMuYnVpbGQudmFsdWVcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5idWlsZFxuICAgICAgfVxuICAgICAgY29uc3QgaHAgPSBwYXJzZUludCh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQpXG4gICAgICByZXR1cm4gaXNOYU4oaHApID8gbnVsbCA6IGhwXG4gICAgfVxuICAgIHJldHVybiBwYXJzZUludCh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmhwLnZhbHVlKVxuICB9XG5cbiAgZ2V0IGhwTWF4ICgpIHtcbiAgICBpZiAoWyd2ZWhpY2xlJ10uaW5jbHVkZXModGhpcy5kYXRhLnR5cGUpKSByZXR1cm4gdGhpcy5idWlsZFxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmhwLmF1dG8pIHtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZSAhPSBudWxsICYmXG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5jb24udmFsdWUgIT0gbnVsbFxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKFxuICAgICAgICAgICh0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlICtcbiAgICAgICAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5jb24udmFsdWUpIC9cbiAgICAgICAgICAgIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZXMnKSAmJlxuICAgICAgICAgICAgdGhpcy5kYXRhLnR5cGUgPT09ICdjaGFyYWN0ZXInXG4gICAgICAgICAgICAgID8gNVxuICAgICAgICAgICAgICA6IDEwKVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5kYXRhLmRhdGEuYXR0cmlicy5ocC5tYXgpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMuaHAubWF4KVxuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMuaHAubWF4KVxuICB9XG5cbiAgYXN5bmMgc2V0SHAgKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAwXG4gICAgaWYgKFsndmVoaWNsZSddLmluY2x1ZGVzKHRoaXMuZGF0YS50eXBlKSkge1xuICAgICAgaWYgKHZhbHVlID4gdGhpcy5idWlsZCkgdmFsdWUgPSBwYXJzZUludCh0aGlzLmJ1aWxkKVxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgJ2RhdGEuYXR0cmlicy5idWlsZC5jdXJyZW50JzogdmFsdWUgfSlcbiAgICB9XG4gICAgaWYgKHZhbHVlID4gdGhpcy5ocE1heCkgdmFsdWUgPSBwYXJzZUludCh0aGlzLmhwTWF4KVxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdkYXRhLmF0dHJpYnMuaHAudmFsdWUnOiB2YWx1ZSB9KVxuICB9XG5cbiAgYXN5bmMgYWRkVW5pcXVlSXRlbXMgKHNraWxsTGlzdCwgZmxhZyA9IG51bGwpIHtcbiAgICBjb25zdCBwcm9jZXNzZWQgPSBbXVxuICAgIGZvciAoY29uc3Qgc2tpbGwgb2Ygc2tpbGxMaXN0KSB7XG4gICAgICBpZiAoQ29DN0l0ZW0uaXNBbnlTcGVjKHNraWxsKSkge1xuICAgICAgICBpZiAoIXNraWxsLmRhdGEuZmxhZ3MpIHNraWxsLmRhdGEuZmxhZ3MgPSB7fVxuICAgICAgICBpZiAoZmxhZykgc2tpbGwuZGF0YS5mbGFnc1tmbGFnXSA9IHRydWVcbiAgICAgICAgcHJvY2Vzc2VkLnB1c2goZHVwbGljYXRlKHNraWxsKSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGl0ZW1JZCA9IHRoaXMuZ2V0SXRlbUlkQnlOYW1lKHNraWxsLm5hbWUpXG4gICAgICAgIGlmICghaXRlbUlkKSB7XG4gICAgICAgICAgaWYgKGZsYWcpIHtcbiAgICAgICAgICAgIGlmICghc2tpbGwuZGF0YS5mbGFncykgc2tpbGwuZGF0YS5mbGFncyA9IHt9XG4gICAgICAgICAgICBza2lsbC5kYXRhLmZsYWdzW2ZsYWddID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBwcm9jZXNzZWQucHVzaChkdXBsaWNhdGUoc2tpbGwpKVxuICAgICAgICB9IGVsc2UgaWYgKGZsYWcpIHtcbiAgICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5pdGVtcy5nZXQoaXRlbUlkKVxuICAgICAgICAgIGF3YWl0IGl0ZW0uc2V0SXRlbUZsYWcoZmxhZylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAocHJvY2Vzc2VkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBwcm9jZXNzZWQsIHtcbiAgICAgIHJlbmRlclNoZWV0OiBmYWxzZVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBhZGRJdGVtcyAoaXRlbUxpc3QsIGZsYWcgPSBudWxsKSB7XG4gICAgY29uc3QgcHJvY2Vzc2VkID0gW11cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbUxpc3QpIHtcbiAgICAgIGlmIChmbGFnKSB7XG4gICAgICAgIGlmICghaXRlbS5kYXRhLmZsYWdzKSBpdGVtLmRhdGEuZmxhZ3MgPSB7fVxuICAgICAgICBpdGVtLmRhdGEuZmxhZ3NbZmxhZ10gPSB0cnVlXG4gICAgICB9XG4gICAgICBwcm9jZXNzZWQucHVzaChkdXBsaWNhdGUoaXRlbSkpXG4gICAgfVxuICAgIGlmIChwcm9jZXNzZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBwcm9jZXNzZWQsIHtcbiAgICAgIHJlbmRlclNoZWV0OiBmYWxzZVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBhZGRVbmlxdWVJdGVtIChza2lsbCwgZmxhZyA9IG51bGwpIHtcbiAgICBjb25zdCBpdGVtSWQgPSB0aGlzLmdldEl0ZW1JZEJ5TmFtZShza2lsbC5uYW1lKVxuICAgIGlmICghaXRlbUlkKSB7XG4gICAgICBpZiAoZmxhZykge1xuICAgICAgICBpZiAoIXNraWxsLmRhdGEuZmxhZ3MpIHNraWxsLmRhdGEuZmxhZ3MgPSB7fVxuICAgICAgICBza2lsbC5kYXRhLmZsYWdzW2ZsYWddID0gdHJ1ZVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtza2lsbF0sIHtcbiAgICAgICAgcmVuZGVyU2hlZXQ6IGZhbHNlXG4gICAgICB9KVxuICAgIH0gZWxzZSBpZiAoZmxhZykge1xuICAgICAgY29uc3QgaXRlbSA9IHRoaXMuaXRlbXMuZ2V0KGl0ZW1JZClcbiAgICAgIGF3YWl0IGl0ZW0uc2V0SXRlbUZsYWcoZmxhZylcbiAgICB9XG4gIH1cblxuICBnZXQgbXBNYXggKCkge1xuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLm1wLmF1dG8pIHtcbiAgICAgIGlmICh0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IodGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvdy52YWx1ZSAvIDUpXG4gICAgICB9IGVsc2UgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMubXAubWF4KVxuICB9XG5cbiAgZW5jb3VudGVyZWRDcmVhdHVyZXNTYW5EYXRhIChjcmVhdHVyZSkge1xuICAgIGNvbnN0IGkgPSB0aGlzLmVuY291bnRlcmVkQ3JlYXR1cmVzU2FuRGF0YUluZGV4KGNyZWF0dXJlKVxuICAgIGlmIChpICE9PSAtMSkgcmV0dXJuIHRoaXMuZGF0YS5kYXRhLmVuY291bnRlcmVkQ3JlYXR1cmVzW2ldXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGVuY291bnRlcmVkQ3JlYXR1cmVzU2FuRGF0YUluZGV4IChjcmVhdHVyZSkge1xuICAgIGNvbnN0IHNhbkRhdGEgPSBDb0M3VXRpbGl0aWVzLmdldENyZWF0dXJlU2FuRGF0YShjcmVhdHVyZSlcbiAgICByZXR1cm4gdGhpcy5kYXRhLmRhdGEuZW5jb3VudGVyZWRDcmVhdHVyZXMuZmluZEluZGV4KGNkID0+IHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIGNkLmlkID09PSBzYW5EYXRhPy5pZCB8fFxuICAgICAgICBjZC5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IHNhbkRhdGEubmFtZT8udG9Mb2NhbGVMb3dlckNhc2UoKVxuICAgICAgKVxuICAgIH0pXG4gIH1cblxuICBzYW5Mb3N0VG9DcmVhdHVyZSAoY3JlYXR1cmUpIHtcbiAgICBjb25zdCBzYW5EYXRhID0gdGhpcy5lbmNvdW50ZXJlZENyZWF0dXJlc1NhbkRhdGEoY3JlYXR1cmUpXG4gICAgaWYgKHNhbkRhdGEpIHtcbiAgICAgIC8vIGNoZWNrIGZvciBpZiBzcGVjaWUgYWxyZWFkeSBlbmNvdW50ZXJlZCByZXR1cm4gbWF4IG9mIGJvdGg7XG4gICAgICBpZiAoc2FuRGF0YS5zcGVjaWUpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KHNhbkRhdGEuc3BlY2llLnRvdGFsTG9zcyB8fCAwLCBzYW5EYXRhLnRvdGFsTG9zcylcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNhbkRhdGEudG90YWxMb3NzIHx8IDBcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVGhhdCBjcmVhdHVyZSB3YXMgbmV2ZXIgZW5jb3VudGVyZWQuIFdoYXQgYWJvdXQgaGlzIHNwZWNpZS5cbiAgICAgIGNvbnN0IGNyZWF0dXJlU2FuRGF0YSA9IENvQzdVdGlsaXRpZXMuZ2V0Q3JlYXR1cmVTYW5EYXRhKGNyZWF0dXJlKVxuICAgICAgaWYgKGNyZWF0dXJlU2FuRGF0YS5zcGVjaWUpIHtcbiAgICAgICAgY29uc3Qgc3BlY2llRW5jb3VudGVyZWQgPSB0aGlzLmVuY291bnRlcmVkQ3JlYXR1cmVzU2FuRGF0YShcbiAgICAgICAgICBjcmVhdHVyZVNhbkRhdGEuc3BlY2llXG4gICAgICAgIClcbiAgICAgICAgaWYgKHNwZWNpZUVuY291bnRlcmVkKSByZXR1cm4gc3BlY2llRW5jb3VudGVyZWQudG90YWxMb3NzXG4gICAgICB9XG4gICAgICByZXR1cm4gMCAvLyBOZXZlciBlbmNvdW50ZXJlZCB0aGF0IHNwZWNpZSBvciB0aGlzIGNyZWF0dXJlLlxuICAgIH1cbiAgfVxuXG4gIG1heFBvc3NpYmxlU2FuTG9zc1RvQ3JlYXR1cmUgKGNyZWF0dXJlKSB7XG4gICAgLy8gRG8gd2Uga25vdyB5b3UgP1xuICAgIGNvbnN0IHNhbkRhdGEgPSB0aGlzLmVuY291bnRlcmVkQ3JlYXR1cmVzU2FuRGF0YShjcmVhdHVyZSlcbiAgICBjb25zdCBjcmVhdHVyZVNhbkRhdGEgPSBDb0M3VXRpbGl0aWVzLmdldENyZWF0dXJlU2FuRGF0YShjcmVhdHVyZSlcblxuICAgIGlmIChzYW5EYXRhKSB7XG4gICAgICAvLyBXYXMgdGhlcmUgYW55IHVwZGF0ZSB0byB0aGF0IGNyZWF0dXJlID9cbiAgICAgIGxldCBjaGFuZ2VzID0gZmFsc2VcbiAgICAgIGlmIChjcmVhdHVyZVNhbkRhdGEuc2FuTG9zc01heCAhPT0gc2FuRGF0YS5zYW5Mb3NzTWF4KSB7XG4gICAgICAgIHNhbkRhdGEuc2FuTG9zc01heCA9IGNyZWF0dXJlU2FuRGF0YS5zYW5Mb3NzTWF4XG4gICAgICAgIGNoYW5nZXMgPSB0cnVlXG4gICAgICB9XG4gICAgICBpZiAoY3JlYXR1cmVTYW5EYXRhLnNwZWNpZSAmJiAhc2FuRGF0YS5zcGVjaWUpIHtcbiAgICAgICAgc2FuRGF0YS5zcGVjaWUgPSBjcmVhdHVyZVNhbkRhdGEuc3BlY2llXG4gICAgICAgIGNoYW5nZXMgPSB0cnVlXG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIGNyZWF0dXJlU2FuRGF0YS5zcGVjaWUgJiZcbiAgICAgICAgY3JlYXR1cmVTYW5EYXRhLnNwZWNpZS5zYW5Mb3NzTWF4ICE9PSBzYW5EYXRhLnNwZWNpZS5zYW5Mb3NzTWF4XG4gICAgICApIHtcbiAgICAgICAgc2FuRGF0YS5zcGVjaWUuc2FuTG9zc01heCA9IGNyZWF0dXJlU2FuRGF0YS5zcGVjaWUuc2FuTG9zc01heFxuICAgICAgICBjaGFuZ2VzID0gdHJ1ZVxuICAgICAgfVxuICAgICAgaWYgKHNhbkRhdGEudG90YWxMb3NzID4gc2FuRGF0YS5zYW5Mb3NzTWF4KSB7XG4gICAgICAgIHNhbkRhdGEudG90YWxMb3NzID0gc2FuRGF0YS5zYW5Mb3NzTWF4XG4gICAgICAgIGNoYW5nZXMgPSB0cnVlXG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIHNhbkRhdGEuc3BlY2llICYmXG4gICAgICAgIHNhbkRhdGEuc3BlY2llLnRvdGFsTG9zcyA+IHNhbkRhdGEuc3BlY2llLnNhbkxvc3NNYXhcbiAgICAgICkge1xuICAgICAgICBzYW5EYXRhLnNwZWNpZS50b3RhbExvc3MgPSBzYW5EYXRhLnNwZWNpZS5zYW5Mb3NzTWF4XG4gICAgICAgIGNoYW5nZXMgPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFuZ2VzKSB7XG4gICAgICAgIGNvbnN0IGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdCA9IHRoaXMuZGF0YS5kYXRhLmVuY291bnRlcmVkQ3JlYXR1cmVzXG4gICAgICAgICAgPyBkdXBsaWNhdGUodGhpcy5kYXRhLmRhdGEuZW5jb3VudGVyZWRDcmVhdHVyZXMpXG4gICAgICAgICAgOiBbXVxuICAgICAgICBjb25zdCBzYW5EYXRhSW5kZXggPSB0aGlzLmVuY291bnRlcmVkQ3JlYXR1cmVzU2FuRGF0YUluZGV4KGNyZWF0dXJlKVxuICAgICAgICBlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3Rbc2FuRGF0YUluZGV4XSA9IHNhbkRhdGFcbiAgICAgICAgaWYgKHNhbkRhdGEuc3BlY2llKSB7XG4gICAgICAgICAgdGhpcy5fdXBkYXRlQWxsT2ZTYW1lU3BlY2llKGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdCwgc2FuRGF0YS5zcGVjaWUpXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICAgJ2RhdGEuZW5jb3VudGVyZWRDcmVhdHVyZXMnOiBlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3RcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNhbkRhdGEuc2FuTG9zc01heCAtIHNhbkRhdGEudG90YWxMb3NzXG4gICAgfVxuICAgIC8vIFdlIGRvbid0IGtub3cgeW91LlxuICAgIGlmIChjcmVhdHVyZVNhbkRhdGEpIHtcbiAgICAgIGNvbnN0IHNhbkxvc3RUb0NyZWF0dXJlID0gdGhpcy5zYW5Mb3N0VG9DcmVhdHVyZShjcmVhdHVyZSlcbiAgICAgIHJldHVybiBNYXRoLm1heCgwLCBjcmVhdHVyZVNhbkRhdGEuc2FuTG9zc01heCAtIHNhbkxvc3RUb0NyZWF0dXJlKVxuICAgIH1cbiAgICByZXR1cm4gOTlcbiAgfVxuXG4gIGNyZWF0dXJlRW5jb3VudGVyZWQgKGNyZWF0dXJlKSB7XG4gICAgcmV0dXJuICEhfnRoaXMuZW5jb3VudGVyZWRDcmVhdHVyZXNTYW5EYXRhSW5kZXgoY3JlYXR1cmUpXG4gIH1cblxuICBjcmVhdHVyZVNwZWNpZUVuY291bnRlcmVkIChjcmVhdHVyZSkge1xuICAgIGNvbnN0IGNyZWF0dXJlU2FuRGF0YSA9IENvQzdVdGlsaXRpZXMuZ2V0Q3JlYXR1cmVTYW5EYXRhKGNyZWF0dXJlKVxuICAgIGlmIChjcmVhdHVyZVNhbkRhdGEuc3BlY2llKSB7XG4gICAgICByZXR1cm4gISF+dGhpcy5lbmNvdW50ZXJlZENyZWF0dXJlc1NhbkRhdGFJbmRleChjcmVhdHVyZVNhbkRhdGEuc3BlY2llKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jcmVhdHVyZUVuY291bnRlcmVkKGNyZWF0dXJlKVxuICB9XG5cbiAgX3VwZGF0ZUFsbE9mU2FtZVNwZWNpZSAoZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0LCBzcGVjaWVTYW5EYXRhKSB7XG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdC5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIGlmIChcbiAgICAgICAgZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0W2luZGV4XS5zcGVjaWU/LmlkID09PSBzcGVjaWVTYW5EYXRhLmlkIHx8XG4gICAgICAgIGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdFtpbmRleF0uc3BlY2llPy5uYW1lLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgc3BlY2llU2FuRGF0YS5uYW1lPy50b0xvd2VyQ2FzZSgpXG4gICAgICApIHtcbiAgICAgICAgLy8gTmV3IGVuY291bnRlciB3aXRoIHRoYXQgc3BlY2llLlxuICAgICAgICBpZiAoXG4gICAgICAgICAgZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0W2luZGV4XS5zcGVjaWUudG90YWxMb3NzICE9PVxuICAgICAgICAgIHNwZWNpZVNhbkRhdGEudG90YWxMb3NzXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGRlbHRhID1cbiAgICAgICAgICAgIHNwZWNpZVNhbkRhdGEudG90YWxMb3NzIC1cbiAgICAgICAgICAgIGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdFtpbmRleF0uc3BlY2llLnRvdGFsTG9zc1xuICAgICAgICAgIGlmIChkZWx0YSA+IDApIHtcbiAgICAgICAgICAgIGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdFtpbmRleF0uc3BlY2llID0gc3BlY2llU2FuRGF0YVxuICAgICAgICAgICAgZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0W2luZGV4XS50b3RhbExvc3MgKz0gZGVsdGFcbiAgICAgICAgICAgIGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdFtpbmRleF0udG90YWxMb3NzID0gTWF0aC5taW4oXG4gICAgICAgICAgICAgIGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdFtpbmRleF0udG90YWxMb3NzLFxuICAgICAgICAgICAgICBlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3RbaW5kZXhdLnNhbkxvc3NNYXhcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfcmVtb3ZlU3BlY2llIChlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3QsIHNwZWNpZVNhbkRhdGEpIHtcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0Lmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgaWYgKFxuICAgICAgICBlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3RbaW5kZXhdLnNwZWNpZT8uaWQgPT09IHNwZWNpZVNhbkRhdGEuaWQgfHxcbiAgICAgICAgZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0W2luZGV4XS5zcGVjaWU/Lm5hbWUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICBzcGVjaWVTYW5EYXRhLm5hbWU/LnRvTG93ZXJDYXNlKClcbiAgICAgICkge1xuICAgICAgICBjb25zdCBwcmV2aW91c1NwZWNpZUxvc3QgPVxuICAgICAgICAgIGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdFtpbmRleF0uc3BlY2llLnRvdGFsTG9zc1xuICAgICAgICBkZWxldGUgZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0W2luZGV4XS5zcGVjaWVcblxuICAgICAgICBlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3RbaW5kZXhdLnRvdGFsTG9zcyA9XG4gICAgICAgICAgZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0W2luZGV4XS50b3RhbExvc3MgLSBwcmV2aW91c1NwZWNpZUxvc3RcbiAgICAgICAgaWYgKGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdFtpbmRleF0udG90YWxMb3NzIDwgMCkge1xuICAgICAgICAgIGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdFtpbmRleF0udG90YWxMb3NzID0gMFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmVzZXRDcmVhdHVyZSAoY3JlYXR1cmUpIHtcbiAgICBjb25zdCBpbmRleFNhbkRhdGEgPSB0aGlzLmVuY291bnRlcmVkQ3JlYXR1cmVzU2FuRGF0YUluZGV4KGNyZWF0dXJlKVxuICAgIGlmICh+aW5kZXhTYW5EYXRhKSB7XG4gICAgICBjb25zdCBjcmVhdHVyZVNhbkRhdGEgPSBDb0M3VXRpbGl0aWVzLmdldENyZWF0dXJlU2FuRGF0YShjcmVhdHVyZSlcbiAgICAgIGNvbnN0IGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdCA9IHRoaXMuZGF0YS5kYXRhLmVuY291bnRlcmVkQ3JlYXR1cmVzXG4gICAgICAgID8gZHVwbGljYXRlKHRoaXMuZGF0YS5kYXRhLmVuY291bnRlcmVkQ3JlYXR1cmVzKVxuICAgICAgICA6IFtdXG4gICAgICBlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3Quc3BsaWNlKGluZGV4U2FuRGF0YSwgMSlcbiAgICAgIGNyZWF0dXJlU2FuRGF0YS50b3RhbExvc3MgPSAwXG4gICAgICBpZiAoY3JlYXR1cmVTYW5EYXRhLnNwZWNpZSkgZGVsZXRlIGNyZWF0dXJlU2FuRGF0YS5zcGVjaWVcbiAgICAgIHRoaXMuX3VwZGF0ZUFsbE9mU2FtZVNwZWNpZShlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3QsIGNyZWF0dXJlU2FuRGF0YSlcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ2RhdGEuZW5jb3VudGVyZWRDcmVhdHVyZXMnOiBlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3RcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmVzZXRTcGVjaWUgKGNyZWF0dXJlKSB7XG4gICAgY29uc3QgZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0ID0gdGhpcy5kYXRhLmRhdGEuZW5jb3VudGVyZWRDcmVhdHVyZXNcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuZGF0YS5kYXRhLmVuY291bnRlcmVkQ3JlYXR1cmVzKVxuICAgICAgOiBbXVxuICAgIGNvbnN0IGNyZWF0dXJlU2FuRGF0YSA9IENvQzdVdGlsaXRpZXMuZ2V0Q3JlYXR1cmVTYW5EYXRhKGNyZWF0dXJlKVxuICAgIGlmICghY3JlYXR1cmVTYW5EYXRhLnNwZWNpZSkgcmV0dXJuXG4gICAgY29uc3QgaW5kZXhTYW5EYXRhID0gdGhpcy5lbmNvdW50ZXJlZENyZWF0dXJlc1NhbkRhdGFJbmRleChcbiAgICAgIGNyZWF0dXJlU2FuRGF0YS5zcGVjaWVcbiAgICApXG4gICAgaWYgKH5pbmRleFNhbkRhdGEpIHtcbiAgICAgIGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdC5zcGxpY2UoaW5kZXhTYW5EYXRhLCAxKVxuICAgIH1cbiAgICB0aGlzLl9yZW1vdmVTcGVjaWUoZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0LCBjcmVhdHVyZVNhbkRhdGEuc3BlY2llKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICdkYXRhLmVuY291bnRlcmVkQ3JlYXR1cmVzJzogZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0XG4gICAgfSlcblxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgYXN5bmMgbG9vc2VTYW5Ub0NyZWF0dXJlIChzYW5Mb3NzLCBjcmVhdHVyZSkge1xuICAgIGxldCBleGFjdFNhbkxvc3MgPSBzYW5Mb3NzXG4gICAgLy8gR2V0IHRoYXQgY3JlYXR1cmUgU0FOIGRhdGEuXG4gICAgY29uc3QgY3JlYXR1cmVTYW5EYXRhID0gQ29DN1V0aWxpdGllcy5nZXRDcmVhdHVyZVNhbkRhdGEoY3JlYXR1cmUpXG5cbiAgICAvLyBHZXQgYWN0b3IgU0FOIGRhdGEgZm9yIHRoYXQgY3JlYXR1cmUuXG4gICAgY29uc3QgaW5kZXhTYW5EYXRhID0gdGhpcy5lbmNvdW50ZXJlZENyZWF0dXJlc1NhbkRhdGFJbmRleChjcmVhdHVyZSlcblxuICAgIC8vIENoZWNrIGlmIHRoYXQgY3JlYXR1cmUgYmVsb25ncyB0byBhIHNwZWNpZSBhbmQgaGF2ZSB3ZSBhbHJlYWR5IGVuY291dGVyZWQgaXQuXG4gICAgbGV0IGluZGV4U3BlY2llc1NhbkRhdGEgPSAtMVxuICAgIGlmIChjcmVhdHVyZVNhbkRhdGEuc3BlY2llPy5pZCkge1xuICAgICAgaW5kZXhTcGVjaWVzU2FuRGF0YSA9IHRoaXMuZW5jb3VudGVyZWRDcmVhdHVyZXNTYW5EYXRhSW5kZXgoXG4gICAgICAgIGNyZWF0dXJlU2FuRGF0YS5zcGVjaWUuaWRcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKGluZGV4U3BlY2llc1NhbkRhdGEgPT09IC0xICYmIGNyZWF0dXJlU2FuRGF0YS5zcGVjaWU/Lm5hbWUpIHtcbiAgICAgIGluZGV4U3BlY2llc1NhbkRhdGEgPSB0aGlzLmVuY291bnRlcmVkQ3JlYXR1cmVzU2FuRGF0YUluZGV4KFxuICAgICAgICBjcmVhdHVyZVNhbkRhdGEuc3BlY2llLm5hbWVcbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyBDb3B5IHRoZSBhcnJheSBmb3IgdXBkYXRpbmcuXG4gICAgY29uc3QgZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0ID0gdGhpcy5kYXRhLmRhdGEuZW5jb3VudGVyZWRDcmVhdHVyZXNcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuZGF0YS5kYXRhLmVuY291bnRlcmVkQ3JlYXR1cmVzKVxuICAgICAgOiBbXVxuXG4gICAgLy8gQ3JlYXR1cmUgYWxyZWFkeSBlbmNvdW50ZXJlZC5cbiAgICBpZiAofmluZGV4U2FuRGF0YSkge1xuICAgICAgY29uc3Qgb2xkU2FuRGF0YSA9IGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdFtpbmRleFNhbkRhdGFdXG4gICAgICBsZXQgbmV3U2FuRGF0YVxuICAgICAgLy8gVXBkYXRlIHNhbkRhdGEgd2l0aCBuZXcgU0FOIGRhdGEgKG1pZ2h0IGhhdmUgYmVlbiB1cGRhdGVkID8pXG4gICAgICBpZiAoY3JlYXR1cmVTYW5EYXRhKSB7XG4gICAgICAgIG5ld1NhbkRhdGEgPSBjcmVhdHVyZVNhbkRhdGFcbiAgICAgICAgbmV3U2FuRGF0YS50b3RhbExvc3MgPSBvbGRTYW5EYXRhLnRvdGFsTG9zcyB8fCAwXG4gICAgICAgIGlmIChuZXdTYW5EYXRhLnNwZWNpZSkge1xuICAgICAgICAgIG5ld1NhbkRhdGEuc3BlY2llLnRvdGFsTG9zcyA9IG9sZFNhbkRhdGEuc3BlY2llPy50b3RhbExvc3NcbiAgICAgICAgICAgID8gb2xkU2FuRGF0YS5zcGVjaWUudG90YWxMb3NzXG4gICAgICAgICAgICA6IDBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAob2xkU2FuRGF0YS5zcGVjaWUpIG5ld1NhbkRhdGEuc3BlY2llID0gb2xkU2FuRGF0YS5zcGVjaWUgLy8gU2hvdWxkIG5ldmVyIGhhcHBlblxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG5ld1NhbkRhdGEudG90YWxMb3NzID0gbmV3U2FuRGF0YS50b3RhbExvc3NcbiAgICAgICAgPyBuZXdTYW5EYXRhLnRvdGFsTG9zcyArIHNhbkxvc3NcbiAgICAgICAgOiBzYW5Mb3NzXG4gICAgICBpZiAobmV3U2FuRGF0YS50b3RhbExvc3MgPiBuZXdTYW5EYXRhLnNhbkxvc3NNYXgpIHtcbiAgICAgICAgZXhhY3RTYW5Mb3NzID1cbiAgICAgICAgICBleGFjdFNhbkxvc3MgLSAobmV3U2FuRGF0YS50b3RhbExvc3MgLSBuZXdTYW5EYXRhLnNhbkxvc3NNYXgpXG4gICAgICAgIG5ld1NhbkRhdGEudG90YWxMb3NzID0gbmV3U2FuRGF0YS5zYW5Mb3NzTWF4XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWRpdCB0aGUgbG9zcyB0byB0aGF0IGNyZWF0dXJlIHNwZWNpZSBhcyB3ZWxsIGlmIGl0IGV4aXN0cy5cbiAgICAgIGlmIChuZXdTYW5EYXRhLnNwZWNpZSkge1xuICAgICAgICBuZXdTYW5EYXRhLnNwZWNpZS50b3RhbExvc3MgPSBuZXdTYW5EYXRhLnNwZWNpZS50b3RhbExvc3NcbiAgICAgICAgICA/IG5ld1NhbkRhdGEuc3BlY2llLnRvdGFsTG9zcyArIGV4YWN0U2FuTG9zc1xuICAgICAgICAgIDogZXhhY3RTYW5Mb3NzXG4gICAgICAgIGlmIChuZXdTYW5EYXRhLnNwZWNpZS50b3RhbExvc3MgPiBuZXdTYW5EYXRhLnNwZWNpZS5zYW5Mb3NzTWF4KSB7XG4gICAgICAgICAgbmV3U2FuRGF0YS5zcGVjaWUudG90YWxMb3NzID0gbmV3U2FuRGF0YS5zcGVjaWUuc2FuTG9zc01heFxuICAgICAgICB9XG5cbiAgICAgICAgLy8gVXBkYXRlIGFsbCBjcmV0dXJlIGZyb20gdGhlIHNhbWUgc3BlY2llLlxuICAgICAgICB0aGlzLl91cGRhdGVBbGxPZlNhbWVTcGVjaWUoZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0LCBuZXdTYW5EYXRhLnNwZWNpZSlcbiAgICAgIH1cblxuICAgICAgZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0W2luZGV4U2FuRGF0YV0gPSBuZXdTYW5EYXRhXG4gICAgICAvLyBVcGRhdGUgdGhlIHNwZWNpZSBhbHNvIDpcbiAgICAgIGlmICh+aW5kZXhTcGVjaWVzU2FuRGF0YSAmJiBuZXdTYW5EYXRhLnNwZWNpZSkge1xuICAgICAgICBlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3RbaW5kZXhTcGVjaWVzU2FuRGF0YV0gPSBuZXdTYW5EYXRhLnNwZWNpZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gV2UgYWxyZWFkeSBlbmNvdXRlcmVkIHRoYXQgc3BlY2llXG4gICAgICAgIC8vIFNob3VsZCBuZXZlciBoYXBwZW4gKGVuY291bnRlcmVkIHRoYXQgY3JlYXR1cmUgYnV0IG5ldmVyIGhpcyBzcGVjaWUpLlxuICAgICAgICBpZiAobmV3U2FuRGF0YS5zcGVjaWUpIGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdC5wdXNoKG5ld1NhbkRhdGEuc3BlY2llKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDcmVhdHVyZSBuZXZlciBlbmNvdW50ZXJlZC5cbiAgICAgIGNvbnN0IG5ld1NhbkRhdGEgPSBjcmVhdHVyZVNhbkRhdGFcbiAgICAgIG5ld1NhbkRhdGEudG90YWxMb3NzID0gMFxuXG4gICAgICBpZiAobmV3U2FuRGF0YS5zcGVjaWUpIHtcbiAgICAgICAgLy8gU3BlY2llIGFscmVhZHkgZW5jb3VudGVyZWQuXG4gICAgICAgIGlmICh+aW5kZXhTcGVjaWVzU2FuRGF0YSkge1xuICAgICAgICAgIG5ld1NhbkRhdGEuc3BlY2llLnRvdGFsTG9zcyA9XG4gICAgICAgICAgICBlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3RbaW5kZXhTcGVjaWVzU2FuRGF0YV0udG90YWxMb3NzXG5cbiAgICAgICAgICAvLyBXZSBhbHJlYWR5IGxvc3MgU0FOIHRvIHRoaXMgc3BlY2llIG9mIGNyZWF0dXJlLiBUaGUgYmFzZSBsb3MgZm9yIHRoaXMgY3JlYXR1cmUgaXMgdGhlIHNwZWNpZSBiYXNlIGxvc3MuXG4gICAgICAgICAgbmV3U2FuRGF0YS50b3RhbExvc3MgPSBuZXdTYW5EYXRhLnNwZWNpZS50b3RhbExvc3NcbiAgICAgICAgICBpZiAobmV3U2FuRGF0YS50b3RhbExvc3MgPiBuZXdTYW5EYXRhLnNhbkxvc3NNYXgpIHtcbiAgICAgICAgICAgIG5ld1NhbkRhdGEudG90YWxMb3NzID0gbmV3U2FuRGF0YS5zYW5Mb3NzTWF4XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFdlIG5ldmVyIGVuY291bnRlcmVkIHNwZWNpZSBvciBjcmVhdHVyZS5cbiAgICAgICAgICBuZXdTYW5EYXRhLnNwZWNpZS50b3RhbExvc3MgPSAwXG4gICAgICAgICAgbmV3U2FuRGF0YS50b3RhbExvc3MgPSAwXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQXBwbHkgdGhlIHNhbiBsb3NzIHRvIHRoYXQgY3JlYXR1cmUuXG4gICAgICBuZXdTYW5EYXRhLnRvdGFsTG9zcyA9IG5ld1NhbkRhdGEudG90YWxMb3NzICsgc2FuTG9zc1xuXG4gICAgICAvLyBJZiBsb3NzIGlzIG1vcmUgdGhhbnQgY3JlYXR1cmUgTWF4LlxuICAgICAgaWYgKG5ld1NhbkRhdGEudG90YWxMb3NzID4gbmV3U2FuRGF0YS5zYW5Mb3NzTWF4KSB7XG4gICAgICAgIC8vIEdldCB0aGUgZXhhY3Qgc2FuIGxvc3MgPSBsb3NzIC0gKG92ZXJmbG93IC0gbWF4KVxuICAgICAgICBleGFjdFNhbkxvc3MgPVxuICAgICAgICAgIGV4YWN0U2FuTG9zcyAtIChuZXdTYW5EYXRhLnRvdGFsTG9zcyAtIG5ld1NhbkRhdGEuc2FuTG9zc01heClcbiAgICAgICAgbmV3U2FuRGF0YS50b3RhbExvc3MgPSBuZXdTYW5EYXRhLnNhbkxvc3NNYXhcbiAgICAgIH1cblxuICAgICAgLy8gRGVkdWN0IHRoZSBleGFjdCBsb3NzIHRvIHRoYXQgc3BlY2llLlxuICAgICAgaWYgKG5ld1NhbkRhdGEuc3BlY2llKSB7XG4gICAgICAgIC8vIFdhaXQgZm9yIGV4YWN0IHNhbiBMT1NTIGJlZm9yZSBkZWR1Y2l0aW5nIGl0IGZyb20gc3BlY2llLlxuICAgICAgICBuZXdTYW5EYXRhLnNwZWNpZS50b3RhbExvc3MgPSBuZXdTYW5EYXRhLnNwZWNpZS50b3RhbExvc3MgKyBleGFjdFNhbkxvc3NcbiAgICAgICAgaWYgKG5ld1NhbkRhdGEuc3BlY2llLnRvdGFsTG9zcyA+IG5ld1NhbkRhdGEuc3BlY2llLnNhbkxvc3NNYXgpIHtcbiAgICAgICAgICBuZXdTYW5EYXRhLnNwZWNpZS50b3RhbExvc3MgPSBuZXdTYW5EYXRhLnNwZWNpZS5zYW5Mb3NzTWF4XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiB3ZSBub3cgdGhhdCBzcGVjaWUgdXBkYXRlIGl0LiBJZiB3ZSBkb24ndCBhZGQgaXQuXG4gICAgICAgIGlmICh+aW5kZXhTcGVjaWVzU2FuRGF0YSkge1xuICAgICAgICAgIGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdFtpbmRleFNwZWNpZXNTYW5EYXRhXSA9IG5ld1NhbkRhdGEuc3BlY2llXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0LnB1c2gobmV3U2FuRGF0YS5zcGVjaWUpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBVcGRhdGUgYWxsIGNyZWF0dXJlIGZyb20gdGhlIHNhbWUgc3BlY2llLlxuICAgICAgICB0aGlzLl91cGRhdGVBbGxPZlNhbWVTcGVjaWUoZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0LCBuZXdTYW5EYXRhLnNwZWNpZSlcbiAgICAgIH1cblxuICAgICAgZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0LnB1c2gobmV3U2FuRGF0YSlcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnNldFNhbih0aGlzLnNhbiAtIGV4YWN0U2FuTG9zcylcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAnZGF0YS5lbmNvdW50ZXJlZENyZWF0dXJlcyc6IGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdFxuICAgIH0pXG4gICAgcmV0dXJuIGV4YWN0U2FuTG9zc1xuICB9XG5cbiAgYXN5bmMgbG9vc2VTYW4gKHNhbkxvc3MsIGNyZWF0dXJlID0gbnVsbCkge1xuICAgIGlmIChjcmVhdHVyZSkgYXdhaXQgdGhpcy5sb29zZVNhblRvQ3JlYXR1cmUoc2FuTG9zcywgY3JlYXR1cmUpXG4gICAgZWxzZSBhd2FpdCB0aGlzLnNldFNhbih0aGlzLnNhbiAtIHNhbkxvc3MpXG4gIH1cblxuICBnZXQgc2FuRGF0YSAoKSB7XG4gICAgcmV0dXJuIENvQzdVdGlsaXRpZXMuZ2V0Q3JlYXR1cmVTYW5EYXRhKHRoaXMpXG4gIH1cblxuICBzYW5Mb3NzIChjaGVja1Bhc3NlZCkge1xuICAgIGlmIChjaGVja1Bhc3NlZCkgcmV0dXJuIHRoaXMuc2FuTG9zc0NoZWNrUGFzc2VkXG4gICAgcmV0dXJuIHRoaXMuc2FuTG9zc0NoZWNrRmFpbGxlZFxuICB9XG5cbiAgZ2V0IHNhbkxvc3NDaGVja1Bhc3NlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5kYXRhLnNwZWNpYWw/LnNhbkxvc3M/LmNoZWNrUGFzc2VkXG4gIH1cblxuICBnZXQgc2FuTG9zc0NoZWNrRmFpbGxlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5kYXRhLnNwZWNpYWw/LnNhbkxvc3M/LmNoZWNrRmFpbGxlZFxuICB9XG5cbiAgZ2V0IHNhbkxvc3NNYXggKCkge1xuICAgIGlmICh0aGlzLnNhbkxvc3NDaGVja0ZhaWxsZWQpIHtcbiAgICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuc2FuTG9zc0NoZWNrRmFpbGxlZCkpKSB7XG4gICAgICAgIHJldHVybiBOdW1iZXIodGhpcy5zYW5Mb3NzQ2hlY2tGYWlsbGVkKVxuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBSb2xsKHRoaXMuc2FuTG9zc0NoZWNrRmFpbGxlZCkuZXZhbHVhdGUoe1xuICAgICAgICBtYXhpbWl6ZTogdHJ1ZVxuICAgICAgfSkudG90YWxcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIGdldCBzYW5Mb3NzTWluICgpIHtcbiAgICBpZiAodGhpcy5zYW5Mb3NzQ2hlY2tQYXNzZWQpIHtcbiAgICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuc2FuTG9zc0NoZWNrUGFzc2VkKSkpIHtcbiAgICAgICAgcmV0dXJuIE51bWJlcih0aGlzLnNhbkxvc3NDaGVja1Bhc3NlZClcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgUm9sbCh0aGlzLnNhbkxvc3NDaGVja1Bhc3NlZCkuZXZhbHVhdGUoe1xuICAgICAgICBtYXhpbWl6ZTogdHJ1ZVxuICAgICAgfSkudG90YWxcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIGdldCBkYWlseVNhbkxvc3MgKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLnNhbj8uZGFpbHlMb3NzIHx8IDBcbiAgfVxuXG4gIGdldCBzYW5NYXggKCkge1xuICAgIGlmICghdGhpcy5kYXRhLmRhdGEuYXR0cmlicykgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzPy5zYW4/LmF1dG8pIHtcbiAgICAgIGlmICh0aGlzLmN0aHVsaHVNeXRob3MpIHJldHVybiBNYXRoLm1heCg5OSAtIHRoaXMuY3RodWxodU15dGhvcywgMClcbiAgICAgIHJldHVybiA5OVxuICAgIH1cbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEuYXR0cmlicy5zYW4ubWF4KVxuICB9XG5cbiAgZ2V0IG1wICgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEuYXR0cmlicy5tcC52YWx1ZSlcbiAgfVxuXG4gIGFzeW5jIHNldE1wICh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMFxuICAgIGlmICh2YWx1ZSA+IHBhcnNlSW50KHRoaXMubXBNYXgpKSB2YWx1ZSA9IHBhcnNlSW50KHRoaXMubXBNYXgpXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgJ2RhdGEuYXR0cmlicy5tcC52YWx1ZSc6IHZhbHVlIH0pXG4gIH1cblxuICBnZXQgc2FuICgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEuYXR0cmlicy5zYW4udmFsdWUpXG4gIH1cblxuICBnZXQgaW50ICgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnaW50JylcbiAgfVxuXG4gIGdldCBvY2N1cGF0aW9uUG9pbnRzU3BlbnQgKCkge1xuICAgIGxldCBvY2N1cGF0aW9uUG9pbnRzID0gMFxuICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgdGhpcy5za2lsbHMpIHtcbiAgICAgIGlmIChza2lsbC5kYXRhLmRhdGEuYWRqdXN0bWVudHM/Lm9jY3VwYXRpb24pIHtcbiAgICAgICAgb2NjdXBhdGlvblBvaW50cyArPSBza2lsbC5kYXRhLmRhdGEuYWRqdXN0bWVudHMub2NjdXBhdGlvblxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2NjdXBhdGlvblBvaW50c1xuICB9XG5cbiAgZ2V0IG9jY3VwYXRpb25Qb2ludHMgKCkge1xuICAgIGlmICghdGhpcy5vY2N1cGF0aW9uKSByZXR1cm4gMFxuICAgIGxldCBwb2ludHMgPSAwXG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgIHRoaXMub2NjdXBhdGlvbi5kYXRhLmRhdGEub2NjdXBhdGlvblNraWxsUG9pbnRzXG4gICAgKSkge1xuICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gZW50cnlcbiAgICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKGtleSlcbiAgICAgIGlmICh2YWx1ZS5zZWxlY3RlZCkge1xuICAgICAgICBwb2ludHMgKz0gY2hhci52YWx1ZSAqIE51bWJlcih2YWx1ZS5tdWx0aXBsaWVyKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcG9pbnRzXG4gIH1cblxuICBhc3luYyByZXNldE9jY3VwYXRpb25Qb2ludHMgKCkge1xuICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICdkYXRhLmRldmVsb3BtZW50Lm9jY3VwYXRpb24nOiB0aGlzLm9jY3VwYXRpb25Qb2ludHNcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgcmVzZXRBcmNoZXR5cGVQb2ludHMgKCkge1xuICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICdkYXRhLmRldmVsb3BtZW50LmFyY2hldHlwZSc6IHRoaXMub2NjdXBhdGlvblBvaW50c1xuICAgIH0pXG4gIH1cblxuICBhc3luYyByZXNldFBlcnNvbmFsUG9pbnRzICgpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAnZGF0YS5kZXZlbG9wbWVudC5wZXJzb25hbCc6IHRoaXMucGVyc29uYWxQb2ludHNcbiAgICB9KVxuICB9XG5cbiAgZ2V0IGFyY2hldHlwZVBvaW50c1NwZW50ICgpIHtcbiAgICBsZXQgYXJjaGV0eXBlUG9pbnRzID0gMFxuICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgdGhpcy5za2lsbHMpIHtcbiAgICAgIGlmIChza2lsbC5kYXRhLmRhdGEuYWRqdXN0bWVudHM/LmFyY2hldHlwZSkge1xuICAgICAgICBhcmNoZXR5cGVQb2ludHMgKz0gc2tpbGwuZGF0YS5kYXRhLmFkanVzdG1lbnRzLmFyY2hldHlwZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXJjaGV0eXBlUG9pbnRzXG4gIH1cblxuICBnZXQgYXJjaGV0eXBlUG9pbnRzICgpIHtcbiAgICBpZiAoIXRoaXMuYXJjaGV0eXBlKSByZXR1cm4gMFxuICAgIHJldHVybiB0aGlzLmFyY2hldHlwZS5kYXRhLmRhdGEuYm9udXNQb2ludHNcbiAgfVxuXG4gIGdldCBleHBlcmllbmNlUG9pbnRzICgpIHtcbiAgICBsZXQgZXhwZXJpZW5jZVBvaW50cyA9IDBcbiAgICBmb3IgKGNvbnN0IHNraWxsIG9mIHRoaXMuc2tpbGxzKSB7XG4gICAgICBpZiAoc2tpbGwuZGF0YS5kYXRhLmFkanVzdG1lbnRzPy5leHBlcmllbmNlKSB7XG4gICAgICAgIGV4cGVyaWVuY2VQb2ludHMgKz0gc2tpbGwuZGF0YS5kYXRhLmFkanVzdG1lbnRzLmV4cGVyaWVuY2VcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGV4cGVyaWVuY2VQb2ludHNcbiAgfVxuXG4gIGdldCBwZXJzb25hbFBvaW50c1NwZW50ICgpIHtcbiAgICBsZXQgcGVyc29uYWxQb2ludHMgPSAwXG4gICAgZm9yIChjb25zdCBza2lsbCBvZiB0aGlzLnNraWxscykge1xuICAgICAgaWYgKHNraWxsLmRhdGEuZGF0YS5hZGp1c3RtZW50cz8ucGVyc29uYWwpIHtcbiAgICAgICAgcGVyc29uYWxQb2ludHMgKz0gc2tpbGwuZGF0YS5kYXRhLmFkanVzdG1lbnRzLnBlcnNvbmFsXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwZXJzb25hbFBvaW50c1xuICB9XG5cbiAgZ2V0IHBlcnNvbmFsUG9pbnRzICgpIHtcbiAgICByZXR1cm4gMiAqIE51bWJlcih0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MuaW50LnZhbHVlKVxuICB9XG5cbiAgZ2V0IGhhc1NraWxsRmxhZ2dlZEZvckV4cCAoKSB7XG4gICAgZm9yIChjb25zdCBza2lsbCBvZiB0aGlzLnNraWxscykge1xuICAgICAgaWYgKHNraWxsLmRhdGEuZGF0YS5mbGFncz8uZGV2ZWxvcGVtZW50KSByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGFzeW5jIHNldFNhbiAodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDBcbiAgICBpZiAodmFsdWUgPiB0aGlzLnNhbk1heCkgdmFsdWUgPSB0aGlzLnNhbk1heFxuICAgIGNvbnN0IGxvc3MgPSBwYXJzZUludCh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLnNhbi52YWx1ZSkgLSB2YWx1ZVxuICAgIC8vIGlmKCBjcmVhdHVyZURhdGEpe1xuICAgIC8vICBjb25zdCBjcmVhdHVyZUluZGV4ID0gdGhpcy5kYXRhLmRhdGEuZW5jb3VudGVyZWRDcmVhdHVyZXMuZmluZEluZGV4KCBjID0+IHtcbiAgICAvLyAgICBpZiggYy5pZCAmJiBjLmlkID09IGNyZWF0dXJlRGF0YS5pZCkgcmV0dXJuIHRydWU7XG4gICAgLy8gICAgaWYoIGMubmFtZSAmJiBjLm5hbWUudG9Mb3dlckNhc2UoKSA9PSBjcmVhdHVyZURhdGEubmFtZT8udG9Mb3dlckNhc2UoKSkgcmV0dXJuIHRydWU7XG4gICAgLy8gICAgcmV0dXJuIGZhbHNlO30pO1xuICAgIC8vICBsZXQgZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0O1xuICAgIC8vICBpZiggLTEgPCBjcmVhdHVyZUluZGV4KXtcbiAgICAvLyAgICBlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3QgPSB0aGlzLmRhdGEuZGF0YS5lbmNvdW50ZXJlZENyZWF0dXJlcyA/IGR1cGxpY2F0ZSggdGhpcy5kYXRhLmRhdGEuZW5jb3VudGVyZWRDcmVhdHVyZXMpIDogW107XG4gICAgLy8gICAgY29uc3QgbWF4TG9zc1JlbWFpbmluZyA9IGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdFtjcmVhdHVyZUluZGV4XS5tYXhMb3NzIC0gZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0W2NyZWF0dXJlSW5kZXhdLnRvdGFsTG9zcztcbiAgICAvLyAgICBpZiggbG9zcyA+IG1heExvc3NSZW1haW5pbmcpIGxvc3MgPSBtYXhMb3NzUmVtYWluaW5nO1xuICAgIC8vICAgIGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdFtjcmVhdHVyZUluZGV4XS50b3RhbExvc3MgKz0gbG9zcztcbiAgICAvLyAgfSBlbHNlIHtcbiAgICAvLyAgICBpZiggbG9zcyA+IGNyZWF0ZURhdGEubWF4TG9zcykgbG9zcyA9IGNyZWF0ZURhdGEubWF4TG9zcztcbiAgICAvLyAgICBlbmNvdW50ZXJlZENyZWF0dXJlc0xpc3QgPSBbe1xuICAgIC8vICAgICAgICBpZDogY3JlYXR1cmVEYXRhLmlkLFxuICAgIC8vICAgICAgICBuYW1lOiBjcmVhdHVyZURhdGEubmFtZSxcbiAgICAvLyAgICAgICAgbWF4TG9zczogY3JlYXRlRGF0YS5tYXhMb3NzLFxuICAgIC8vICAgICAgICB0b3RhbExvc3M6IGxvc3NcbiAgICAvLyAgICAgIH1dO1xuICAgIC8vICB9XG5cbiAgICAvLyAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSggeyBbJ2RhdGEuZW5jb3VudGVyZWRDcmVhdHVyZXMnXSA6IGVuY291bnRlcmVkQ3JlYXR1cmVzTGlzdH0pO1xuICAgIC8vIH1cblxuICAgIGlmIChsb3NzID4gMCkge1xuICAgICAgbGV0IHRvdGFsTG9zcyA9IHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMuc2FuLmRhaWx5TG9zcylcbiAgICAgICAgPyBwYXJzZUludCh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLnNhbi5kYWlseUxvc3MpXG4gICAgICAgIDogMFxuICAgICAgdG90YWxMb3NzID0gdG90YWxMb3NzICsgbG9zc1xuICAgICAgaWYgKGxvc3MgPj0gNSkgdGhpcy5zZXRTdGF0dXMoQ09DNy5zdGF0dXMudGVtcG9JbnNhbmUpXG4gICAgICBpZiAodG90YWxMb3NzID49IE1hdGguZmxvb3IodGhpcy5zYW4gLyA1KSkge1xuICAgICAgICB0aGlzLnNldFN0YXR1cyhDT0M3LnN0YXR1cy5pbmRlZkluc2FuZSlcbiAgICAgIH1cbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdkYXRhLmF0dHJpYnMuc2FuLnZhbHVlJzogdmFsdWUsXG4gICAgICAgICdkYXRhLmF0dHJpYnMuc2FuLmRhaWx5TG9zcyc6IHRvdGFsTG9zc1xuICAgICAgfSlcbiAgICB9IGVsc2UgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgJ2RhdGEuYXR0cmlicy5zYW4udmFsdWUnOiB2YWx1ZSB9KVxuICB9XG5cbiAgYXN5bmMgc2V0QXR0cmliQXV0byAodmFsdWUsIGF0dHJpYikge1xuICAgIGNvbnN0IHVwZGF0ZWRLZXkgPSBgZGF0YS5hdHRyaWJzLiR7YXR0cmlifS5hdXRvYFxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7IFt1cGRhdGVkS2V5XTogdmFsdWUgfSlcbiAgfVxuXG4gIGFzeW5jIHRvZ2dsZUF0dHJpYkF1dG8gKGF0dHJpYikge1xuICAgIHRoaXMuc2V0QXR0cmliQXV0byghdGhpcy5kYXRhLmRhdGEuYXR0cmlic1thdHRyaWJdLmF1dG8sIGF0dHJpYilcbiAgfVxuXG4gIGdldCBidWlsZCAoKSB7XG4gICAgaWYgKFsndmVoaWNsZSddLmluY2x1ZGVzKHRoaXMuZGF0YS50eXBlKSkge1xuICAgICAgY29uc3QgYnVpbGQgPSBwYXJzZUludCh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmJ1aWxkLnZhbHVlKVxuICAgICAgcmV0dXJuIGlzTmFOKGJ1aWxkKSA/IG51bGwgOiBidWlsZFxuICAgIH1cbiAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLmF0dHJpYnMpIHJldHVybiBudWxsXG4gICAgaWYgKCF0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmJ1aWxkKSByZXR1cm4gbnVsbFxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmJ1aWxkLnZhbHVlID09PSAnYXV0bycpIHtcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMuYnVpbGQuYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMuYnVpbGQuYXV0bykge1xuICAgICAgY29uc3Qgc3VtID1cbiAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnN0ci52YWx1ZSArXG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWVcbiAgICAgIGlmIChzdW0gPiAxNjQpIHJldHVybiBNYXRoLmZsb29yKChzdW0gLSA0NSkgLyA4MCkgKyAxXG4gICAgICBpZiAoc3VtIDwgNjUpIHJldHVybiAtMlxuICAgICAgaWYgKHN1bSA8IDg1KSByZXR1cm4gLTFcbiAgICAgIGlmIChzdW0gPCAxMjUpIHJldHVybiAwXG4gICAgICBpZiAoc3VtIDwgMTY1KSByZXR1cm4gMVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmJ1aWxkLnZhbHVlXG4gIH1cblxuICBnZXQgZGIgKCkge1xuICAgIGlmIChbJ3ZlaGljbGUnXS5pbmNsdWRlcyh0aGlzLmRhdGEudHlwZSkpIHJldHVybiAwXG4gICAgaWYgKCF0aGlzLmRhdGEuZGF0YS5hdHRyaWJzKSByZXR1cm4gbnVsbFxuICAgIGlmICghdGhpcy5kYXRhLmRhdGEuYXR0cmlicy5kYikgcmV0dXJuIG51bGxcbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuYXR0cmlicy5kYi52YWx1ZSA9PT0gJ2F1dG8nKSB7XG4gICAgICB0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmRiLmF1dG8gPSB0cnVlXG4gICAgfVxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmRiLmF1dG8pIHtcbiAgICAgIGNvbnN0IHN1bSA9XG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5zdHIudmFsdWUgK1xuICAgICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlXG4gICAgICBpZiAoc3VtID4gMTY0KSByZXR1cm4gYCR7TWF0aC5mbG9vcigoc3VtIC0gNDUpIC8gODApfUQ2YFxuICAgICAgaWYgKHN1bSA8IDY1KSByZXR1cm4gLTJcbiAgICAgIGlmIChzdW0gPCA4NSkgcmV0dXJuIC0xXG4gICAgICBpZiAoc3VtIDwgMTI1KSByZXR1cm4gMFxuICAgICAgaWYgKHN1bSA8IDE2NSkgcmV0dXJuICcxRDQnXG4gICAgfVxuICAgIHJldHVybiB0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmRiLnZhbHVlXG4gIH1cblxuICBnZXQgbW92ICgpIHtcbiAgICBpZiAoWyd2ZWhpY2xlJ10uaW5jbHVkZXModGhpcy5kYXRhLnR5cGUpKSB7XG4gICAgICByZXR1cm4gdGhpcy5kYXRhLmRhdGEuYXR0cmlicy5tb3YudmFsdWVcbiAgICB9XG4gICAgaWYgKCF0aGlzLmRhdGEuZGF0YS5hdHRyaWJzKSByZXR1cm4gbnVsbFxuICAgIGlmICghdGhpcy5kYXRhLmRhdGEuYXR0cmlicy5tb3YpIHJldHVybiBudWxsXG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMubW92LnZhbHVlID09PSAnYXV0bycpIHtcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMubW92LmF1dG8gPSB0cnVlXG4gICAgfVxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLm1vdi5hdXRvKSB7XG4gICAgICBsZXQgTU9WXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUgPlxuICAgICAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUgJiZcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnN0ci52YWx1ZSA+XG4gICAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZVxuICAgICAgKSB7XG4gICAgICAgIE1PViA9IDkgLy8gQnVnIGNvcnJlY3Rpb24gYnkgQWRtaXJhbE55YXIuXG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlID49XG4gICAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZSB8fFxuICAgICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3Muc3RyLnZhbHVlID49XG4gICAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZVxuICAgICAgKSB7XG4gICAgICAgIE1PViA9IDhcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIE1PViA9IDdcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmRhdGEuZGF0YS50eXBlICE9PSAnY3JlYXR1cmUnKSB7XG4gICAgICAgIGlmICghaXNOYU4ocGFyc2VJbnQodGhpcy5kYXRhLmRhdGEuaW5mb3MuYWdlKSkpIHtcbiAgICAgICAgICBNT1YgPVxuICAgICAgICAgICAgcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEuaW5mb3MuYWdlKSA+PSA0MFxuICAgICAgICAgICAgICA/IE1PViAtIE1hdGguZmxvb3IocGFyc2VJbnQodGhpcy5kYXRhLmRhdGEuaW5mb3MuYWdlKSAvIDEwKSArIDNcbiAgICAgICAgICAgICAgOiBNT1ZcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKE1PViA+IDApIHJldHVybiBNT1ZcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMubW92LnZhbHVlXG4gIH1cblxuICBnZXQgdG9rZW5JZCAoKSB7XG4gICAgLy8gVE9ETyBjbGFyaWZpZXIgY2EgZXQgdG9rZW5rZXlcbiAgICByZXR1cm4gdGhpcy50b2tlbiA/IGAke3RoaXMudG9rZW4uc2NlbmUuX2lkfS4ke3RoaXMudG9rZW4uaWR9YCA6IG51bGwgLy8gUkVGQUNUT1JJTkcgKDIpXG4gIH1cblxuICBnZXQgbG9ja2VkICgpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLmZsYWdzKSB7XG4gICAgICB0aGlzLmRhdGEuZGF0YS5mbGFncyA9IHt9XG4gICAgICB0aGlzLmRhdGEuZGF0YS5mbGFncy5sb2NrZWQgPSB0cnVlIC8vIExvY2tlZCBieSBkZWZhdWx0XG4gICAgICB0aGlzLnVwZGF0ZSh7ICdkYXRhLmZsYWdzJzoge30gfSlcbiAgICAgIHRoaXMudXBkYXRlKHsgJ2RhdGEuZmxhZ3MubG9ja2VkJzogZmFsc2UgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5kYXRhLmRhdGEuZmxhZ3MubG9ja2VkXG4gIH1cblxuICBnZXRJdGVtc0Zyb21OYW1lIChuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbXMuZmlsdGVyKGkgPT4gaS5uYW1lID09PSBuYW1lKVxuICB9XG5cbiAgc2V0IGxvY2tlZCAodmFsdWUpIHtcbiAgICB0aGlzLnVwZGF0ZSh7ICdkYXRhLmZsYWdzLmxvY2tlZCc6IHZhbHVlIH0pXG4gIH1cblxuICBhc3luYyB0b2dnbGVBY3RvckZsYWcgKGZsYWdOYW1lKSB7XG4gICAgY29uc3QgZmxhZ1ZhbHVlID0gIXRoaXMuZGF0YS5kYXRhLmZsYWdzW2ZsYWdOYW1lXVxuICAgIGNvbnN0IG5hbWUgPSBgZGF0YS5mbGFncy4ke2ZsYWdOYW1lfWBcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtuYW1lXTogZmxhZ1ZhbHVlIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBhdHRyaWJ1dGVOYW1lIGtleSBvZiBhdHRyaWJ1dGUgdG8gY2hlY2sgaW4gWydsY2snXVxuICAgKiBAcGFyYW0geyp9IGZhc3RGb3J3YXJkXG4gICAqIEBwYXJhbSB7Kn0gb3B0aW9ucyBkaWZmaWN1bHR5IGluIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwsIG1vZGlmaWVyICgtMiArMiksIG5hbWVcbiAgICovXG4gIGFzeW5jIGF0dHJpYnV0ZUNoZWNrIChhdHRyaWJ1dGVOYW1lLCBmYXN0Rm9yd2FyZCA9IGZhbHNlLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBhdHRyaWIgPSB0aGlzLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lLnRvTG93ZXJDYXNlKCkpXG4gICAgaWYgKCFhdHRyaWIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JOb3RGb3VuZCcsIHtcbiAgICAgICAgICBtaXNzaW5nOiBhdHRyaWJ1dGVOYW1lXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG5cbiAgICBpZiAob3B0aW9ucy5tb2RpZmllcikgY2hlY2suZGljZU1vZGlmaWVyID0gTnVtYmVyKG9wdGlvbnMubW9kaWZpZXIpXG4gICAgaWYgKG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IENvQzdVdGlsaXRpZXMuY29udmVydERpZmZpY3VsdHkob3B0aW9ucy5kaWZmaWN1bHR5KVxuICAgIH1cblxuICAgIGlmICghZmFzdEZvcndhcmQpIHtcbiAgICAgIGlmICh1bmRlZmluZWQgPT09IG9wdGlvbnMuZGlmZmljdWx0eSB8fCB1bmRlZmluZWQgPT09IG9wdGlvbnMubW9kaWZpZXIpIHtcbiAgICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZShvcHRpb25zKVxuICAgICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gTnVtYmVyKHVzYWdlLmdldCgnZGlmZmljdWx0eScpKVxuICAgICAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXG4gICAgICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKFxuICAgICAgICAgICAgdXNhZ2UuZ2V0KCdmbGF0VGhyZXNob2xkTW9kaWZpZXInKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNoZWNrLmFjdG9yID0gdGhpcy50b2tlbktleVxuICAgIGlmIChvcHRpb25zLmJsaW5kID09PSAnZmFsc2UnKSBjaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICBlbHNlIGNoZWNrLmlzQmxpbmQgPSAhIW9wdGlvbnMuYmxpbmRcbiAgICBhd2FpdCBjaGVjay5yb2xsQXR0cmlidXRlKGF0dHJpYi5rZXkpXG4gICAgY2hlY2sudG9NZXNzYWdlKClcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGNoYXJhY3RlcmlzdGljTmFtZSBrZXkgb2YgY2hhcmFjdGVyaXN0aWMgdG8gY2hlY2sgaW4gWydzdHInLCdjb24nLCdzaXonLCdkZXgnLCdhcHAnLCdpbnQnLCdwb3cnLCdlZHUnXVxuICAgKiBAcGFyYW0geyp9IGZhc3RGb3J3YXJkXG4gICAqIEBwYXJhbSB7Kn0gb3B0aW9ucyBkaWZmaWN1bHR5IGluIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwsIG1vZGlmaWVyICgtMiArMiksIG5hbWVcbiAgICovXG4gIGFzeW5jIGNoYXJhY3RlcmlzdGljQ2hlY2sgKFxuICAgIGNoYXJhY3RlcmlzdGljTmFtZSxcbiAgICBmYXN0Rm9yd2FyZCA9IGZhbHNlLFxuICAgIG9wdGlvbnMgPSB7fVxuICApIHtcbiAgICBjb25zdCBjaGFyID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYyhjaGFyYWN0ZXJpc3RpY05hbWUpXG5cbiAgICBpZiAoIWNoYXIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JOb3RGb3VuZEZvckFjdG9yJywge1xuICAgICAgICAgIG1pc3Npbmc6IGNoYXJhY3RlcmlzdGljTmFtZSxcbiAgICAgICAgICBhY3RvcjogdGhpcy5uYW1lXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuXG4gICAgaWYgKG9wdGlvbnMubW9kaWZpZXIpIGNoZWNrLmRpY2VNb2RpZmllciA9IE51bWJlcihvcHRpb25zLm1vZGlmaWVyKVxuICAgIGlmIChvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3VXRpbGl0aWVzLmNvbnZlcnREaWZmaWN1bHR5KG9wdGlvbnMuZGlmZmljdWx0eSlcbiAgICB9XG5cbiAgICBpZiAoIWZhc3RGb3J3YXJkKSB7XG4gICAgICBpZiAodW5kZWZpbmVkID09PSBvcHRpb25zLmRpZmZpY3VsdHkgfHwgdW5kZWZpbmVkID09PSBvcHRpb25zLm1vZGlmaWVyKSB7XG4gICAgICAgIG9wdGlvbnMuZGlzcGxheU5hbWUgPSBjaGFyLmxhYmVsXG4gICAgICAgIGNvbnN0IHVzYWdlID0gYXdhaXQgUm9sbERpYWxvZy5jcmVhdGUob3B0aW9ucylcbiAgICAgICAgaWYgKHVzYWdlKSB7XG4gICAgICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnYm9udXNEaWNlJykpXG4gICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IE51bWJlcih1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKSlcbiAgICAgICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxuICAgICAgICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcihcbiAgICAgICAgICAgIHVzYWdlLmdldCgnZmxhdFRocmVzaG9sZE1vZGlmaWVyJylcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjaGVjay5hY3RvciA9IHRoaXMudG9rZW5LZXlcbiAgICBpZiAob3B0aW9ucy5ibGluZCA9PT0gJ2ZhbHNlJykgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgZWxzZSBjaGVjay5pc0JsaW5kID0gISFvcHRpb25zLmJsaW5kXG4gICAgYXdhaXQgY2hlY2sucm9sbENoYXJhY3RlcmlzdGljKGNoYXIua2V5KVxuICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gIH1cblxuICBhc3luYyBza2lsbENoZWNrIChza2lsbERhdGEsIGZhc3RGb3J3YXJkLCBvcHRpb25zID0ge30pIHtcbiAgICBsZXQgc2tpbGwgPSB0aGlzLmdldFNraWxsc0J5TmFtZShcbiAgICAgIHNraWxsRGF0YS5uYW1lID8gc2tpbGxEYXRhLm5hbWUgOiBza2lsbERhdGFcbiAgICApXG4gICAgaWYgKCFza2lsbC5sZW5ndGgpIHtcbiAgICAgIGxldCBpdGVtID0gbnVsbFxuICAgICAgaWYgKHNraWxsRGF0YS5wYWNrKSB7XG4gICAgICAgIGNvbnN0IHBhY2sgPSBnYW1lLnBhY2tzLmdldChza2lsbERhdGEucGFjaylcbiAgICAgICAgaWYgKHBhY2subWV0YWRhdGEuZW50aXR5ICE9PSAnSXRlbScpIHJldHVyblxuICAgICAgICBpdGVtID0gYXdhaXQgcGFjay5nZXREb2N1bWVudChza2lsbERhdGEuaWQpXG4gICAgICB9IGVsc2UgaWYgKHNraWxsRGF0YS5pZCkge1xuICAgICAgICBpdGVtID0gZ2FtZS5pdGVtcy5nZXQoc2tpbGxEYXRhLmlkKVxuICAgICAgfVxuXG4gICAgICAvLyBObyBza2lsbCBmb3VuZCwgdHJ5IHRvIGdldCBnZXQgaXQgZnJvbSBjb21wZW5kaXVtICFcbiAgICAgIGlmICghaXRlbSkge1xuICAgICAgICAvLyBUT0RPOiBJbXBsZW1lbnQgcmV0cmlldmFsIG9mIHNraWxsIGZyb20gY29tcGVuZGl1bSAhIVxuICAgICAgICAvLyBnYW1lLnNldHRpbmdzLmdldCggJ0NvQzcnLCAnRGVmYXVsdENvbXBlbmRpdW0nKTtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgICAgY2hlY2suX3Jhd1ZhbHVlID0gJz8nXG4gICAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgICAgICBjaGVjay50b01lc3NhZ2UoKVxuICAgICAgfVxuICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ob1NraWxsJykgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvck5vdEZvdW5kRm9yQWN0b3InLCB7XG4gICAgICAgICAgICAgIG1pc3Npbmc6IHNraWxsRGF0YS5uYW1lID8gc2tpbGxEYXRhLm5hbWUgOiBza2lsbERhdGEsXG4gICAgICAgICAgICAgIGFjdG9yOiB0aGlzLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgbGV0IGNyZWF0ZSA9IGZhbHNlXG4gICAgICBhd2FpdCBEaWFsb2cuY29uZmlybSh7XG4gICAgICAgIHRpdGxlOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWRkV2VhcG9uJyl9YCxcbiAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmZvcm1hdCgnQ29DNy5BZGRXZWFwb250SGludCcsIHtcbiAgICAgICAgICB3ZWFwb246IHNraWxsRGF0YS5uYW1lLFxuICAgICAgICAgIGFjdG9yOiB0aGlzLm5hbWVcbiAgICAgICAgfSl9PC9wPmAsXG4gICAgICAgIHllczogKCkgPT4ge1xuICAgICAgICAgIGNyZWF0ZSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgaWYgKGNyZWF0ZSA9PT0gdHJ1ZSkge1xuICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2R1cGxpY2F0ZShpdGVtKV0pXG4gICAgICB9IGVsc2UgcmV0dXJuXG5cbiAgICAgIHNraWxsID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUoaXRlbS5uYW1lKVxuXG4gICAgICBpZiAoIXNraWxsLmxlbmd0aCkgcmV0dXJuXG5cbiAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICBjb25zdCBza2lsbFZhbHVlID0gYXdhaXQgU2tpbGxWYWx1ZURpYWxvZy5jcmVhdGUoXG4gICAgICAgICAgc2tpbGxbMF0ubmFtZSxcbiAgICAgICAgICBza2lsbFswXS5iYXNlXG4gICAgICAgIClcbiAgICAgICAgY29uc3QgdmFsdWUgPSBOdW1iZXIoc2tpbGxWYWx1ZS5nZXQoJ2Jhc2UtdmFsdWUnKSlcbiAgICAgICAgYXdhaXQgc2tpbGxbMF0udXBkYXRlVmFsdWUodmFsdWUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcblxuICAgIGlmICh1bmRlZmluZWQgIT09IG9wdGlvbnMubW9kaWZpZXIpIHtcbiAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IE51bWJlcihvcHRpb25zLm1vZGlmaWVyKVxuICAgIH1cbiAgICBpZiAodW5kZWZpbmVkICE9PSBvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3VXRpbGl0aWVzLmNvbnZlcnREaWZmaWN1bHR5KG9wdGlvbnMuZGlmZmljdWx0eSlcbiAgICB9XG5cbiAgICBpZiAoIWZhc3RGb3J3YXJkKSB7XG4gICAgICBpZiAodW5kZWZpbmVkID09PSBvcHRpb25zLmRpZmZpY3VsdHkgfHwgdW5kZWZpbmVkID09PSBvcHRpb25zLm1vZGlmaWVyKSB7XG4gICAgICAgIGNvbnN0IHVzYWdlID0gYXdhaXQgUm9sbERpYWxvZy5jcmVhdGUob3B0aW9ucylcbiAgICAgICAgaWYgKHVzYWdlKSB7XG4gICAgICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnYm9udXNEaWNlJykpXG4gICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IE51bWJlcih1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKSlcbiAgICAgICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxuICAgICAgICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcihcbiAgICAgICAgICAgIHVzYWdlLmdldCgnZmxhdFRocmVzaG9sZE1vZGlmaWVyJylcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjaGVjay5hY3RvciA9IHRoaXMudG9rZW5LZXlcbiAgICBjaGVjay5za2lsbCA9IHNraWxsWzBdLmlkXG4gICAgaWYgKG9wdGlvbnMuYmxpbmQgPT09ICdmYWxzZScpIGNoZWNrLmlzQmxpbmQgPSBmYWxzZVxuICAgIGVsc2UgY2hlY2suaXNCbGluZCA9ICEhb3B0aW9ucy5ibGluZFxuICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gIH1cblxuICBhc3luYyB3ZWFwb25DaGVjayAod2VhcG9uRGF0YSwgZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIGNvbnN0IGl0ZW1JZCA9IHdlYXBvbkRhdGEuaWRcbiAgICBsZXQgd2VhcG9uXG4gICAgd2VhcG9uID0gdGhpcy5pdGVtcy5nZXQoaXRlbUlkKVxuICAgIGlmICghd2VhcG9uKSB7XG4gICAgICBsZXQgd2VhcG9ucyA9IHRoaXMuZ2V0SXRlbXNGcm9tTmFtZSh3ZWFwb25EYXRhLm5hbWUpXG4gICAgICBpZiAod2VhcG9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgICAgbGV0IGl0ZW0gPSBudWxsXG4gICAgICAgICAgY29uc3QgcGFjayA9IHdlYXBvbkRhdGEucGFjayA/IGdhbWUucGFja3MuZ2V0KHdlYXBvbkRhdGEucGFjaykgOiBudWxsXG4gICAgICAgICAgaWYgKHBhY2spIHtcbiAgICAgICAgICAgIGlmIChwYWNrLm1ldGFkYXRhLmVudGl0eSAhPT0gJ0l0ZW0nKSByZXR1cm5cbiAgICAgICAgICAgIGl0ZW0gPSBhd2FpdCBwYWNrLmdldERvY3VtZW50KHdlYXBvbkRhdGEuaWQpXG4gICAgICAgICAgfSBlbHNlIGlmICh3ZWFwb25EYXRhLmlkKSB7XG4gICAgICAgICAgICBpdGVtID0gZ2FtZS5pdGVtcy5nZXQod2VhcG9uRGF0YS5pZClcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTWFjcm9Ob0l0ZW1Gb3VuZCcpXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGV0IGNyZWF0ZSA9IGZhbHNlXG4gICAgICAgICAgYXdhaXQgRGlhbG9nLmNvbmZpcm0oe1xuICAgICAgICAgICAgdGl0bGU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BZGRXZWFwb24nKX1gLFxuICAgICAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmZvcm1hdCgnQ29DNy5BZGRXZWFwb250SGludCcsIHtcbiAgICAgICAgICAgICAgd2VhcG9uOiB3ZWFwb25EYXRhLm5hbWUsXG4gICAgICAgICAgICAgIGFjdG9yOiB0aGlzLm5hbWVcbiAgICAgICAgICAgIH0pfTwvcD5gLFxuICAgICAgICAgICAgeWVzOiAoKSA9PiB7XG4gICAgICAgICAgICAgIGNyZWF0ZSA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIGNvbnN0IGFjdG9yID1cbiAgICAgICAgICAgIHR5cGVvZiB0aGlzLnBhcmVudD8uYWN0b3IgIT09ICd1bmRlZmluZWQnID8gdGhpcy5wYXJlbnQuYWN0b3IgOiB0aGlzXG5cbiAgICAgICAgICBpZiAoY3JlYXRlID09PSB0cnVlKSB7XG4gICAgICAgICAgICBhd2FpdCBhY3Rvci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtpdGVtLnRvSlNPTigpXSlcbiAgICAgICAgICB9IGVsc2UgcmV0dXJuXG4gICAgICAgICAgd2VhcG9ucyA9IGFjdG9yLmdldEl0ZW1zRnJvbU5hbWUoaXRlbS5uYW1lKVxuICAgICAgICAgIGlmICghd2VhcG9ucy5sZW5ndGgpIHJldHVyblxuICAgICAgICAgIGF3YWl0IHdlYXBvbnNbMF0ucmVsb2FkKClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgICBgQWN0b3IgJHt0aGlzLm5hbWV9IGhhcyBubyB3ZWFwb24gbmFtZWQgJHt3ZWFwb25EYXRhLm5hbWV9YFxuICAgICAgICAgIClcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh3ZWFwb25zLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgIGBBY3RvciAke3RoaXMubmFtZX0gaGFzIG1vcmUgdGhhbiBvbmUgd2VhcG9uIG5hbWVkICR7d2VhcG9uRGF0YS5uYW1lfS4gVGhlIGZpcnN0IGZvdW5kIHdpbGwgYmUgdXNlZGBcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgd2VhcG9uID0gd2VhcG9uc1swXVxuICAgIH1cblxuICAgIGlmICghd2VhcG9uLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLnJuZ2QpIHtcbiAgICAgIGlmIChnYW1lLnVzZXIudGFyZ2V0cy5zaXplID4gMSkge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5Ub29NYW55VGFyZ2V0JykpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ29DN01lbGVlSW5pdGlhdG9yKHRoaXMudG9rZW5LZXksIHdlYXBvbi5pZCwgZmFzdEZvcndhcmQpXG4gICAgICBjYXJkLmNyZWF0ZUNoYXRDYXJkKClcbiAgICB9XG4gICAgaWYgKHdlYXBvbi5kYXRhLmRhdGEucHJvcGVydGllcy5ybmdkKSB7XG4gICAgICBjb25zdCBjYXJkID0gbmV3IENvQzdSYW5nZUluaXRpYXRvcih0aGlzLnRva2VuS2V5LCB3ZWFwb24uaWQsIGZhc3RGb3J3YXJkKVxuICAgICAgY2FyZC5jcmVhdGVDaGF0Q2FyZCgpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcm9sbEluaXRpYXRpdmUgKGhhc0d1biA9IGZhbHNlKSB7XG4gICAgc3dpdGNoIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdpbml0aWF0aXZlUnVsZScpKSB7XG4gICAgICBjYXNlICdvcHRpb25hbCc6IHtcbiAgICAgICAgY29uc3Qgcm9sbCA9IG5ldyBDb0M3Q2hlY2sodGhpcy5hY3RvcktleSlcbiAgICAgICAgcm9sbC5kZW55UHVzaCA9IHRydWVcbiAgICAgICAgcm9sbC5kZW55THVjayA9IHRydWVcbiAgICAgICAgcm9sbC5kZW55QmxpbmRUYW1wZXJpbmcgPSB0cnVlXG4gICAgICAgIHJvbGwuaGlkZURpY2UgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNwbGF5SW5pdERpY2VzJykgPT09IGZhbHNlXG4gICAgICAgIHJvbGwuZmxhdm9yID0gJ0luaXRpYXRpdmUgcm9sbCdcbiAgICAgICAgYXdhaXQgcm9sbC5yb2xsQ2hhcmFjdGVyaXN0aWMoJ2RleCcsIGhhc0d1biA/IDEgOiAwKVxuICAgICAgICByb2xsLnRvTWVzc2FnZSgpXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgcm9sbC5zdWNjZXNzTGV2ZWwgKyB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlIC8gMTAwXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGhhc0d1blxuICAgICAgICAgID8gdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZSArIDUwXG4gICAgICAgICAgOiB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlXG4gICAgfVxuICB9XG5cbiAgZ2V0QWN0b3JGbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghdGhpcy5kYXRhLmRhdGEuZmxhZ3MpIHtcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmZsYWdzID0ge31cbiAgICAgIHRoaXMuZGF0YS5kYXRhLmZsYWdzLmxvY2tlZCA9IHRydWVcbiAgICAgIHRoaXMudXBkYXRlKHsgJ2RhdGEuZmxhZ3MnOiB7fSB9KVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmRhdGEuZGF0YS5mbGFnc1tmbGFnTmFtZV0pIHJldHVybiBmYWxzZVxuICAgIHJldHVybiB0aGlzLmRhdGEuZGF0YS5mbGFnc1tmbGFnTmFtZV1cbiAgfVxuXG4gIGFzeW5jIHNldEFjdG9yRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtgZGF0YS5mbGFncy4ke2ZsYWdOYW1lfWBdOiB0cnVlIH0pXG4gIH1cblxuICBhc3luYyB1bnNldEFjdG9yRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtgZGF0YS5mbGFncy4ke2ZsYWdOYW1lfWBdOiBmYWxzZSB9KVxuICB9XG5cbiAgZ2V0V2VhcG9uU2tpbGxzIChpdGVtSWQpIHtcbiAgICBjb25zdCB3ZWFwb24gPSB0aGlzLml0ZW1zLmdldChpdGVtSWQpXG4gICAgaWYgKHdlYXBvbi5kYXRhLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IHNraWxscyA9IFtdXG4gICAgaWYgKHdlYXBvbi5kYXRhLmRhdGEuc2tpbGwubWFpbi5pZCkge1xuICAgICAgc2tpbGxzLnB1c2godGhpcy5pdGVtcy5nZXQod2VhcG9uLmRhdGEuZGF0YS5za2lsbC5tYWluLmlkKSlcbiAgICB9XG5cbiAgICBpZiAod2VhcG9uLnVzZXNBbHRlcm5hdGl2ZVNraWxsICYmIHdlYXBvbi5kYXRhLmRhdGEuc2tpbGwuYWx0ZXJuYXRpdi5pZCkge1xuICAgICAgc2tpbGxzLnB1c2godGhpcy5pdGVtcy5nZXQod2VhcG9uLmRhdGEuZGF0YS5za2lsbC5hbHRlcm5hdGl2LmlkKSlcbiAgICB9XG5cbiAgICByZXR1cm4gc2tpbGxzXG4gIH1cblxuICAvKiogVHJ5IHRvIGZpbmQgYSBjaGFyYWN0ZXJpc3RpYywgYXR0cmlidXRlIG9yIHNraWxsIHRoYXQgbWF0Y2hlcyB0aGUgbmFtZSAqL1xuICBmaW5kIChuYW1lKSB7XG4gICAgLy8gVHJ5IElEXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuaXRlbXMuZ2V0KG5hbWUpXG4gICAgaWYgKGl0ZW0pIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdpdGVtJyxcbiAgICAgICAgdmFsdWU6IGl0ZW1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCByZWdFeHAgPSAvXFwoKFteKV0rKVxcKS9cbiAgICBjb25zdCBtYXRjaGVzID0gcmVnRXhwLmV4ZWMobmFtZSlcbiAgICBsZXQgc2hvcnROYW1lID0gbnVsbFxuICAgIGlmIChtYXRjaGVzICYmIG1hdGNoZXMubGVuZ3RoKSBzaG9ydE5hbWUgPSBtYXRjaGVzWzFdXG4gICAgLy8gVHJ5IHRvIGZpbmQgYSBza2lsbCB3aXRoIGV4YWN0IG5hbWUuXG4gICAgY29uc3Qgc2tpbGwgPSB0aGlzLnNraWxscy5maWx0ZXIocyA9PiB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICAhIXMubmFtZSAmJlxuICAgICAgICAocy5uYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzL2csICcnKSA9PT1cbiAgICAgICAgICBuYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzL2csICcnKSB8fFxuICAgICAgICAgIHMuc05hbWUudG9Mb2NhbGVMb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMvZywgJycpID09PVxuICAgICAgICAgICAgbmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCAnJykgfHxcbiAgICAgICAgICBzLnNOYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzL2csICcnKSA9PT1cbiAgICAgICAgICAgIHNob3J0TmFtZT8udG9Mb2NhbGVMb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMvZywgJycpKVxuICAgICAgKVxuICAgIH0pXG4gICAgaWYgKHNraWxsLmxlbmd0aCkgcmV0dXJuIHsgdHlwZTogJ2l0ZW0nLCB2YWx1ZTogc2tpbGxbMF0gfVxuXG4gICAgLy8gVHJ5IHRvIGZpbmQgYSBjaGFyYWN0ZXJpc3RpYy5cbiAgICBjb25zdCBjaGFyS2V5ID0gWydzdHInLCAnY29uJywgJ3NpeicsICdkZXgnLCAnYXBwJywgJ2ludCcsICdwb3cnLCAnZWR1J11cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYXJLZXkubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKGNoYXJLZXlbaV0pXG4gICAgICBpZiAoY2hhcikge1xuICAgICAgICBpZiAoY2hhci5rZXk/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdjaGFyYWN0ZXJpc3RpYycsIHZhbHVlOiBjaGFyIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hhci5zaG9ydE5hbWU/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdjaGFyYWN0ZXJpc3RpYycsIHZhbHVlOiBjaGFyIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hhci5sYWJlbD8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgcmV0dXJuIHsgdHlwZTogJ2NoYXJhY3RlcmlzdGljJywgdmFsdWU6IGNoYXIgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVHJ5IHRvIGZpbmQgYSBhdHRyaWJ1dGUuXG4gICAgY29uc3QgYXR0cmliS2V5ID0gWydsY2snLCAnc2FuJ11cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF0dHJpYktleS5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYXR0ciA9IHRoaXMuZ2V0QXR0cmlidXRlKGF0dHJpYktleVtpXSlcbiAgICAgIGlmIChhdHRyKSB7XG4gICAgICAgIGlmIChhdHRyLmtleT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgcmV0dXJuIHsgdHlwZTogJ2F0dHJpYnV0ZScsIHZhbHVlOiBhdHRyIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoYXR0ci5zaG9ydE5hbWU/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdhdHRyaWJ1dGUnLCB2YWx1ZTogYXR0ciB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF0dHIubGFiZWw/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdhdHRyaWJ1dGUnLCB2YWx1ZTogYXR0ciB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUcnkgd2l0aCBwYXJ0aWFsID8/XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IHBpbG90U2tpbGxzICgpIHtcbiAgICByZXR1cm4gdGhpcy5za2lsbHMuZmlsdGVyKHMgPT4ge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgISFzLmRhdGEuZGF0YS5zcGVjaWFsaXphdGlvbiAmJlxuICAgICAgICBzLmRhdGEuZGF0YS5zcGVjaWFsaXphdGlvbi5sZW5ndGggJiZcbiAgICAgICAgcy5kYXRhLmRhdGEuc3BlY2lhbGl6YXRpb24/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgZ2FtZS5pMThuXG4gICAgICAgICAgICAubG9jYWxpemUoJ0NvQzcuUGlsb3RTcGVjaWFsaXphdGlvbk5hbWUnKVxuICAgICAgICAgICAgPy50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgICApXG4gICAgfSlcbiAgfVxuXG4gIGdldCBkcml2ZVNraWxscyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2tpbGxzLmZpbHRlcihzID0+IHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgICEhcy5kYXRhLmRhdGEuc3BlY2lhbGl6YXRpb24gJiZcbiAgICAgICAgcy5kYXRhLmRhdGEuc3BlY2lhbGl6YXRpb24ubGVuZ3RoICYmXG4gICAgICAgIHMuZGF0YS5kYXRhLnNwZWNpYWxpemF0aW9uPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PVxuICAgICAgICAgIGdhbWUuaTE4blxuICAgICAgICAgICAgLmxvY2FsaXplKCdDb0M3LkRyaXZlU3BlY2lhbGl6YXRpb25OYW1lJylcbiAgICAgICAgICAgID8udG9Mb2NhbGVMb3dlckNhc2UoKVxuICAgICAgKVxuICAgIH0pXG4gIH1cblxuICBnZXQgdG9rZW5LZXkgKCkge1xuICAgIC8vIENsYXJpZmllciBjYSBldCB0b2tlbmlkXG4gICAgLyoqICogTU9ESUYgMC44LnggKi9cbiAgICAvLyBpZiB0aGlzLnNoZWV0LnRva2VuID0+IHdhcyBvcGVuZWQgZnJvbSB0b2tlblxuICAgIC8vIGlmIHRoaXMudG9rZW4gPT4gc3ludGhldGljIGFjdG9yID09IHRoaXMuaXNUb2tlblxuICAgIGlmICh0aGlzLnNoZWV0LnRva2VuKSB7XG4gICAgICByZXR1cm4gYCR7dGhpcy5zaGVldC50b2tlbi5wYXJlbnQuaWR9LiR7dGhpcy5zaGVldC50b2tlbi5pZH1gXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHJldHVybiBudWxsO1xuICAgICAgcmV0dXJuIHRoaXMuaWRcbiAgICB9XG4gICAgLyoqKioqKioqKioqKioqKioqL1xuICAgIC8vIC8vQ2FzZSAxOiB0aGUgYWN0b3IgaXMgYSBzeW50aGV0aWMgYWN0b3IgYW5kIGhhcyBhIHRva2VuLCByZXR1cm4gdG9rZW4ga2V5LlxuICAgIC8vIGlmKCB0aGlzLmlzVG9rZW4pIHJldHVybiBgJHt0aGlzLnRva2VuLnNjZW5lPy5faWQ/dGhpcy50b2tlbi5zY2VuZS5faWQ6J1RPS0VOJ30uJHt0aGlzLnRva2VuLmlkfWA7ICAvL1JFRkFDVE9SSU5HICgyKVxuXG4gICAgLy8gLy9DYXNlIDI6IHRoZSBhY3RvciBpcyBub3QgYSB0b2tlbiAobGlua2VkIGFjdG9yKS4gSWYgdGhlIHNoZWV0IGhhdmUgYW4gYXNzb2NpYXRlZCB0b2tlbiByZXR1cm4gdGhlIHRva2VuIGtleS5cbiAgICAvLyBpZiggdGhpcy5zaGVldC50b2tlbikgcmV0dXJuIGAke3RoaXMuc2hlZXQudG9rZW4uc2NlbmU/LmlkP3RoaXMuc2hlZXQudG9rZW4uc2NlbmUuaWQ6J1RPS0VOJ30uJHt0aGlzLnNoZWV0LnRva2VuLmlkfWA7XG5cbiAgICAvLyAvL0Nhc2UgMzogQWN0b3IgaGFzIG5vIHRva2VuIHJldHVybiBoaXMgSUQ7XG4gICAgLy8gcmV0dXJuIHRoaXMuaWQ7XG4gIH1cblxuICBnZXQgYWN0b3JLZXkgKCkge1xuICAgIGlmICh0aGlzLmRhdGEudG9rZW4uYWN0b3JMaW5rKSByZXR1cm4gdGhpcy5pZCAvLyBSRUZBQ1RPUklORyAoMilcbiAgICByZXR1cm4gdGhpcy50b2tlbktleVxuICB9XG5cbiAgc3RhdGljIGdldEFjdG9yRnJvbUtleSAoa2V5KSB7XG4gICAgLy8gQ2FzZSAxIC0gYSBzeW50aGV0aWMgYWN0b3IgZnJvbSBhIFRva2VuXG4gICAgaWYgKGtleS5pbmNsdWRlcygnLicpKSB7XG4gICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGtleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgICAgaWYgKCFzY2VuZSkgcmV0dXJuIG51bGxcbiAgICAgICAgY29uc3QgdG9rZW5EYXRhID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxuICAgICAgICBpZiAoIXRva2VuRGF0YSkgcmV0dXJuIG51bGxcbiAgICAgICAgY29uc3QgdG9rZW4gPSBuZXcgVG9rZW4odG9rZW5EYXRhKVxuICAgICAgICByZXR1cm4gdG9rZW4uYWN0b3JcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDYXNlIDIgLSB1c2UgQWN0b3IgSUQgZGlyZWN0b3J5XG4gICAgcmV0dXJuIGdhbWUuYWN0b3JzLmdldChrZXkpIHx8IG51bGxcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2UgdGhlIGZvcm11bGEgaWYgYXZhaWxhYmxlIHRvIHJvbGwgc29tZSBjaGFyYWN0ZXJpdGljcy5cbiAgICovXG4gIGFzeW5jIHJvbGxDaGFyYWN0ZXJpc3RpY3NWYWx1ZSAoKSB7XG4gICAgY29uc3QgY2hhcmFjdGVyaXN0aWNzID0ge31cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MpKSB7XG4gICAgICBpZiAodmFsdWUuZm9ybXVsYSAmJiAhdmFsdWUuZm9ybXVsYS5zdGFydHNXaXRoKCdAJykpIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBSb2xsKHZhbHVlLmZvcm11bGEpXG4gICAgICAgIGF3YWl0IHIucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgIGlmIChyLnRvdGFsKSB7XG4gICAgICAgICAgY2hhcmFjdGVyaXN0aWNzW2BkYXRhLmNoYXJhY3RlcmlzdGljcy4ke2tleX0udmFsdWVgXSA9IE1hdGguZmxvb3IoXG4gICAgICAgICAgICByLnRvdGFsXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoY2hhcmFjdGVyaXN0aWNzKVxuICAgIGF3YWl0IHRoaXMucmVwb3J0Q2hhcmFjdGVkcml0aWNzVmFsdWUoKVxuICB9XG5cbiAgLyoqXG4gICAqIElmIHRoZXJlIGlzIGEgZm9ybXVsYSwgd2lsbCBzZXQgdGhlIGNoYXJhY3RlcmlzdGljIHRvIHRoZSBhdmVyYWdlIHZhbHVlICxpZiBkaXZpc2libGUgYnkgNSwgb3IgdGhlIGNsb3Nlc3QgMTAuXG4gICAqL1xuICBhc3luYyBhdmVyYWdlQ2hhcmFjdGVyaXN0aWNzVmFsdWUgKCkge1xuICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljcyA9IHt9XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzKSkge1xuICAgICAgaWYgKHZhbHVlLmZvcm11bGEgJiYgIXZhbHVlLmZvcm11bGEuc3RhcnRzV2l0aCgnQCcpKSB7XG4gICAgICAgIGNvbnN0IG1heCA9IG5ldyBSb2xsKHZhbHVlLmZvcm11bGEpLmV2YWx1YXRlKHsgbWF4aW1pemU6IHRydWUgfSkudG90YWxcbiAgICAgICAgY29uc3QgbWluID0gbmV3IFJvbGwodmFsdWUuZm9ybXVsYSkuZXZhbHVhdGUoeyBtaW5pbWl6ZTogdHJ1ZSB9KS50b3RhbFxuICAgICAgICBjb25zdCBhdmVyYWdlID0gTWF0aC5mbG9vcigobWF4ICsgbWluKSAvIDIpXG4gICAgICAgIGNvbnN0IGNoYXJWYWx1ZSA9XG4gICAgICAgICAgYXZlcmFnZSAlIDUgPT09IDAgPyBhdmVyYWdlIDogTWF0aC5yb3VuZChhdmVyYWdlIC8gMTApICogMTBcbiAgICAgICAgaWYgKGNoYXJWYWx1ZSkge1xuICAgICAgICAgIGNoYXJhY3RlcmlzdGljc1tgZGF0YS5jaGFyYWN0ZXJpc3RpY3MuJHtrZXl9LnZhbHVlYF0gPSBjaGFyVmFsdWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGF3YWl0IHRoaXMudXBkYXRlKGNoYXJhY3RlcmlzdGljcylcbiAgICBhd2FpdCB0aGlzLnJlcG9ydENoYXJhY3RlZHJpdGljc1ZhbHVlKClcbiAgfVxuXG4gIC8qKlxuICAgKiBUZXN0IGlmIGEgY2hhcmFjdGVyaXNpdGMgZm9ybXVsYSBpcyBhIHJlZmVyZW5jZSB0byBhbiBvdGhlciBjaGFyYWN0ZXJpc3RpYyBhbmQgc2V0IGl0IGFjY29yZGluZ2x5LlxuICAgKi9cbiAgYXN5bmMgcmVwb3J0Q2hhcmFjdGVkcml0aWNzVmFsdWUgKCkge1xuICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljcyA9IHt9XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzKSkge1xuICAgICAgaWYgKHZhbHVlLmZvcm11bGEgJiYgdmFsdWUuZm9ybXVsYS5zdGFydHNXaXRoKCdAJykpIHtcbiAgICAgICAgbGV0IGNoYXJWYWx1ZVxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNoYXJWYWx1ZSA9IG5ldyBSb2xsKFxuICAgICAgICAgICAgdmFsdWUuZm9ybXVsYSxcbiAgICAgICAgICAgIHRoaXMucGFyc2VDaGFyYWN0ZXJpc3RpY3MoKVxuICAgICAgICAgICkuZXZhbHVhdGUoeyBtYXhpbWl6ZTogdHJ1ZSB9KS50b3RhbFxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBjaGFyVmFsdWUgPSBudWxsXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoYXJWYWx1ZSkge1xuICAgICAgICAgIGNoYXJhY3RlcmlzdGljc1tgZGF0YS5jaGFyYWN0ZXJpc3RpY3MuJHtrZXl9LnZhbHVlYF0gPSBjaGFyVmFsdWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGF3YWl0IHRoaXMudXBkYXRlKGNoYXJhY3RlcmlzdGljcylcbiAgfVxuXG4gIGFzeW5jIHNldENoYXJhY3RlcmlzdGljIChuYW1lLCB2YWx1ZSkge1xuICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljID0ge31cbiAgICBjb25zdCBjaGFyVmFsdWUgPSBpc05hTihwYXJzZUludCh2YWx1ZSkpID8gbnVsbCA6IHBhcnNlSW50KHZhbHVlKVxuICAgIGNoYXJhY3RlcmlzdGljW25hbWVdID0gY2hhclZhbHVlXG4gICAgaWYgKCFjaGFyVmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZS5zdGFydHNXaXRoKCdAJykpIHtcbiAgICAgICAgY29uc3QgZm9ybXVsYSA9IG5hbWUucmVwbGFjZSgnLnZhbHVlJywgJy5mb3JtdWxhJylcbiAgICAgICAgY2hhcmFjdGVyaXN0aWNbZm9ybXVsYV0gPSB2YWx1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGF3YWl0IHRoaXMudXBkYXRlKGNoYXJhY3RlcmlzdGljKVxuICAgIGF3YWl0IHRoaXMucmVwb3J0Q2hhcmFjdGVkcml0aWNzVmFsdWUoKVxuICB9XG5cbiAgYXN5bmMgZGV2ZWxvcGVtZW50UGhhc2UgKGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICBjb25zdCBmYWlsdXJlID0gW11cbiAgICBjb25zdCBzdWNjZXNzID0gW11cbiAgICBjb25zdCBza2lsbE1hc3RlcmluZ1RocmVzaG9sZCA9IDkwXG4gICAgY29uc3QgYWx3YXlzU3VjY2Vzc1RocmVzaG9sZCA9IDk1XG5cbiAgICBjb25zdCB0aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsQWxsNERldicpXG4gICAgbGV0IG1lc3NhZ2UgPSAnPHAgY2xhc3M9XCJjaGF0LWNhcmRcIj4nXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgaWYgKGl0ZW0uZGV2ZWxvcGVtZW50RmxhZykge1xuICAgICAgICAgIGNvbnN0IGRpZSA9IGF3YWl0IG5ldyBEaWUoeyBmYWNlczogMTAwIH0pLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICBjb25zdCBza2lsbFZhbHVlID0gaXRlbS52YWx1ZVxuICAgICAgICAgIGxldCBhdWdtZW50ID0gbnVsbFxuICAgICAgICAgIGxldCBza2lsbE1hc3RlcmluZ01lc3NhZ2UgPSBudWxsXG4gICAgICAgICAgaWYgKGRpZS50b3RhbCA+IHNraWxsVmFsdWUgfHwgZGllLnRvdGFsID49IGFsd2F5c1N1Y2Nlc3NUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgIGNvbnN0IGF1Z21lbnREaWUgPSBhd2FpdCBuZXcgRGllKHsgZmFjZXM6IDEwIH0pLmV2YWx1YXRlKHtcbiAgICAgICAgICAgICAgYXN5bmM6IHRydWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBzdWNjZXNzLnB1c2goaXRlbS5pZClcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBTQU4gYXVnbWVudCB3aGVuIHRoZSBza2lsbCBnb2VzIGJleW9uZCB0aGUgc2tpbGwgbWFzdGVyaW5nIHRocmVzaG9sZC5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgc2tpbGxWYWx1ZSA8IHNraWxsTWFzdGVyaW5nVGhyZXNob2xkICYmXG4gICAgICAgICAgICAgIHNraWxsVmFsdWUgKyBhdWdtZW50RGllLnRvdGFsID49IHNraWxsTWFzdGVyaW5nVGhyZXNob2xkXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY29uc3QgYXVnbWVudFNBTkRpZSA9IGF3YWl0IG5ldyBEaWUoe1xuICAgICAgICAgICAgICAgIGZhY2VzOiA2LFxuICAgICAgICAgICAgICAgIG51bWJlcjogMlxuICAgICAgICAgICAgICB9KS5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgICAgICAgIGNvbnN0IHNhbkdhaW5lZCA9IGF1Z21lbnRTQU5EaWUudG90YWxcbiAgICAgICAgICAgICAgY29uc3Qgc2FuR2FpbmVkTWVzc2FnZSA9IGBHYWluZWQgMmQ2ICgke2F1Z21lbnRTQU5EaWUudmFsdWVzWzBdfSArICR7YXVnbWVudFNBTkRpZS52YWx1ZXNbMV19ID0gJHtzYW5HYWluZWR9KSBTQU5gXG4gICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoc2FuR2FpbmVkTWVzc2FnZSlcbiAgICAgICAgICAgICAgc2tpbGxNYXN0ZXJpbmdNZXNzYWdlID0gYDxzcGFuIGNsYXNzPVwidXBncmFkZS1zdWNjZXNzXCI+JHtnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICdDb0M3LlNhbkdhaW5lZCcsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgcmVzdWx0czogYCR7YXVnbWVudFNBTkRpZS52YWx1ZXNbMF19ICsgJHthdWdtZW50U0FORGllLnZhbHVlc1sxXX1gLFxuICAgICAgICAgICAgICAgICAgc2FuR2FpbmVkOiBzYW5HYWluZWQsXG4gICAgICAgICAgICAgICAgICBza2lsbDogaXRlbS5kYXRhLm5hbWUsXG4gICAgICAgICAgICAgICAgICBza2lsbFZhbHVlOiBza2lsbFZhbHVlICsgYXVnbWVudERpZS50b3RhbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgKX08L3NwYW4+PGJyPmBcbiAgICAgICAgICAgICAgLy8gU2V0IHNhbiBjb250cm9scyB0aGF0IGl0IGRvZXNuJ3QgYXVnbWVudCBiZXlvbmQgc2FuTWF4XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0U2FuKHRoaXMuc2FuICsgc2FuR2FpbmVkKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXVnbWVudCArPSBhdWdtZW50RGllLnRvdGFsXG4gICAgICAgICAgICBtZXNzYWdlICs9IGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtc3VjY2Vzc1wiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgJ0NvQzcuRGV2U3VjY2VzcycsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpdGVtOiBpdGVtLmRhdGEubmFtZSxcbiAgICAgICAgICAgICAgICBkaWU6IGRpZS50b3RhbCxcbiAgICAgICAgICAgICAgICBzY29yZTogaXRlbS52YWx1ZSxcbiAgICAgICAgICAgICAgICBhdWdtZW50OiBhdWdtZW50RGllLnRvdGFsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICl9PC9zcGFuPjxicj5gXG4gICAgICAgICAgICBpZiAoc2tpbGxNYXN0ZXJpbmdNZXNzYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgIG1lc3NhZ2UgKz0gc2tpbGxNYXN0ZXJpbmdNZXNzYWdlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBpdGVtLmluY3JlYXNlRXhwZXJpZW5jZShhdWdtZW50KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtZXNzYWdlICs9IGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtZmFpbGVkXCI+JHtnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAnQ29DNy5EZXZGYWlsdXJlJyxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGl0ZW06IGl0ZW0uZGF0YS5uYW1lLFxuICAgICAgICAgICAgICAgIGRpZTogZGllLnRvdGFsLFxuICAgICAgICAgICAgICAgIHNjb3JlOiBpdGVtLnZhbHVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICl9PC9zcGFuPjxicj5gXG4gICAgICAgICAgICBmYWlsdXJlLnB1c2goaXRlbS5pZClcbiAgICAgICAgICB9XG4gICAgICAgICAgYXdhaXQgaXRlbS51bmZsYWdGb3JEZXZlbG9wZW1lbnQoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghZmFzdEZvcndhcmQpIHtcbiAgICAgIG1lc3NhZ2UgKz0gJzwvcD4nXG4gICAgICBjb25zdCBzcGVha2VyID0geyBhY3RvcjogdGhpcy5hY3RvciB9XG4gICAgICBhd2FpdCBjaGF0SGVscGVyLmNyZWF0ZU1lc3NhZ2UodGl0bGUsIG1lc3NhZ2UsIHsgc3BlYWtlcjogc3BlYWtlciB9KVxuICAgIH1cbiAgICByZXR1cm4geyBmYWlsdXJlOiBmYWlsdXJlLCBzdWNjZXNzOiBzdWNjZXNzIH1cbiAgfVxuXG4gIGFzeW5jIGRldmVsb3BMdWNrIChmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgY29uc3QgY3VycmVudEx1Y2sgPSB0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmxjay52YWx1ZVxuICAgIGlmICghY3VycmVudEx1Y2spIGF3YWl0IHRoaXMudXBkYXRlKHsgJ2RhdGEuYXR0cmlicy5sY2sudmFsdWUnOiAwIH0pXG4gICAgY29uc3QgcHVscFJ1bGVzQWN0aXZhdGVkID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVzJylcbiAgICBjb25zdCB1cGdyYWRlUm9sbCA9IChhd2FpdCBuZXcgUm9sbCgnMUQxMDAnKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpLnRvdGFsXG4gICAgY29uc3QgZXF1YWxPckxlc3NDdXJyZW50THVjayA9IHVwZ3JhZGVSb2xsIDw9IGN1cnJlbnRMdWNrXG4gICAgbGV0IGF1Z21lbnRSb2xsXG4gICAgaWYgKHB1bHBSdWxlc0FjdGl2YXRlZCkge1xuICAgICAgZXF1YWxPckxlc3NDdXJyZW50THVja1xuICAgICAgICA/IChhdWdtZW50Um9sbCA9ICcyRDEwKzEwJylcbiAgICAgICAgOiAoYXVnbWVudFJvbGwgPSAnMUQxMCs1JylcbiAgICB9IGVsc2UgaWYgKGVxdWFsT3JMZXNzQ3VycmVudEx1Y2spIHtcbiAgICAgIGF1Z21lbnRSb2xsID0gJzFEMTAnXG4gICAgfVxuICAgIGNvbnN0IHRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJvbGxMdWNrNERldicpXG4gICAgbGV0IG1lc3NhZ2UgPSAnPHAgY2xhc3M9XCJjaGF0LWNhcmRcIj4nXG4gICAgaWYgKHB1bHBSdWxlc0FjdGl2YXRlZCB8fCBlcXVhbE9yTGVzc0N1cnJlbnRMdWNrKSB7XG4gICAgICBjb25zdCBhdWdtZW50VmFsdWUgPSAoYXdhaXQgbmV3IFJvbGwoYXVnbWVudFJvbGwpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KSlcbiAgICAgICAgLnRvdGFsXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdkYXRhLmF0dHJpYnMubGNrLnZhbHVlJzpcbiAgICAgICAgICB0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmxjay52YWx1ZSArIGF1Z21lbnRWYWx1ZVxuICAgICAgfSlcbiAgICAgIG1lc3NhZ2UgKz0gYDxzcGFuIGNsYXNzPVwidXBncmFkZS1zdWNjZXNzXCI+JHtnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAnQ29DNy5MdWNrSW5jcmVhc2VkJyxcbiAgICAgICAge1xuICAgICAgICAgIGRpZTogdXBncmFkZVJvbGwsXG4gICAgICAgICAgc2NvcmU6IGN1cnJlbnRMdWNrLFxuICAgICAgICAgIGF1Z21lbnQ6IGF1Z21lbnRWYWx1ZVxuICAgICAgICB9XG4gICAgICApfTwvc3Bhbj5gXG4gICAgfSBlbHNlIHtcbiAgICAgIG1lc3NhZ2UgKz0gYDxzcGFuIGNsYXNzPVwidXBncmFkZS1mYWlsZWRcIj4ke2dhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICdDb0M3Lkx1Y2tOb3RJbmNyZWFzZWQnLFxuICAgICAgICB7IGRpZTogdXBncmFkZVJvbGwsIHNjb3JlOiBjdXJyZW50THVjayB9XG4gICAgICApfTwvc3Bhbj5gXG4gICAgfVxuICAgIGlmICghZmFzdEZvcndhcmQpIHtcbiAgICAgIG1lc3NhZ2UgKz0gJzwvcD4nXG4gICAgICBjb25zdCBzcGVha2VyID0geyBhY3RvcjogdGhpcyB9XG4gICAgICBhd2FpdCBjaGF0SGVscGVyLmNyZWF0ZU1lc3NhZ2UodGl0bGUsIG1lc3NhZ2UsIHsgc3BlYWtlcjogc3BlYWtlciB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGRldmVsb3BTa2lsbCAoc2tpbGxJZCwgZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIGNvbnN0IHNraWxsID0gdGhpcy5pdGVtcy5nZXQoc2tpbGxJZClcbiAgICBpZiAoIXNraWxsKSByZXR1cm5cbiAgICBsZXQgdGl0bGUgPSAnJ1xuICAgIGxldCBtZXNzYWdlID0gJydcbiAgICBjb25zdCB1cGdyYWRlUm9sbCA9IG5ldyBSb2xsKCcxRDEwMCcpXG4gICAgYXdhaXQgdXBncmFkZVJvbGwucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgaWYgKCFmYXN0Rm9yd2FyZCkgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2QodXBncmFkZVJvbGwpXG4gICAgaWYgKHVwZ3JhZGVSb2xsLnRvdGFsID4gc2tpbGwudmFsdWUgfHwgdXBncmFkZVJvbGwudG90YWwgPj0gOTUpIHtcbiAgICAgIGNvbnN0IGF1Z21lbnRSb2xsID0gbmV3IFJvbGwoJzFEMTAnKVxuICAgICAgYXdhaXQgYXVnbWVudFJvbGwucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICBpZiAoIWZhc3RGb3J3YXJkKSBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZChhdWdtZW50Um9sbClcbiAgICAgIG1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRldlN1Y2Nlc3NEZXRhaWxzJywge1xuICAgICAgICBpdGVtOiBza2lsbC5uYW1lLFxuICAgICAgICBhdWdtZW50OiBhdWdtZW50Um9sbC50b3RhbFxuICAgICAgfSlcbiAgICAgIHRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EZXZSb2xsVGl0bGUnLCB7XG4gICAgICAgIGl0ZW06IHNraWxsLm5hbWUsXG4gICAgICAgIGRpZTogdXBncmFkZVJvbGwudG90YWwsXG4gICAgICAgIHNjb3JlOiBza2lsbC52YWx1ZVxuICAgICAgfSlcbiAgICAgIGF3YWl0IHNraWxsLmluY3JlYXNlRXhwZXJpZW5jZShhdWdtZW50Um9sbC50b3RhbClcbiAgICB9IGVsc2Uge1xuICAgICAgdGl0bGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRldlJvbGxUaXRsZScsIHtcbiAgICAgICAgaXRlbTogc2tpbGwubmFtZSxcbiAgICAgICAgZGllOiB1cGdyYWRlUm9sbC50b3RhbCxcbiAgICAgICAgc2NvcmU6IHNraWxsLnZhbHVlXG4gICAgICB9KVxuICAgICAgbWVzc2FnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGV2RmFpbHVyZURldGFpbHMnLCB7XG4gICAgICAgIGl0ZW06IHNraWxsLm5hbWVcbiAgICAgIH0pXG4gICAgfVxuICAgIGNvbnN0IHNwZWFrZXIgPSB7IGFjdG9yOiB0aGlzLl9pZCB9XG4gICAgYXdhaXQgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKHRpdGxlLCBtZXNzYWdlLCB7IHNwZWFrZXI6IHNwZWFrZXIgfSlcbiAgICBhd2FpdCBza2lsbC51bmZsYWdGb3JEZXZlbG9wZW1lbnQoKVxuICB9XG5cbiAgYXN5bmMgdG9nZ2xlU3RhdHVzIChzdGF0dXNOYW1lKSB7XG4gICAgbGV0IHN0YXR1c1ZhbHVlID0gdGhpcy5kYXRhLmRhdGEuc3RhdHVzW3N0YXR1c05hbWVdPy52YWx1ZVxuICAgIGlmICghKHR5cGVvZiBzdGF0dXNWYWx1ZSA9PT0gJ2Jvb2xlYW4nKSkge1xuICAgICAgc3RhdHVzVmFsdWUgPSBzdGF0dXNWYWx1ZSA9PT0gJ2ZhbHNlJyAvLyBOZWNlc3NhcnksIGluY29ycmVjdCB0ZW1wbGF0ZSBpbml0aWFsaXphdGlvblxuICAgIH1cbiAgICBpZiAoQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHMgPT09IHN0YXR1c05hbWUpIHtcbiAgICAgIGlmIChzdGF0dXNWYWx1ZSkgYXdhaXQgdGhpcy5jdXJlTWFqb3JXb3VuZCgpXG4gICAgICBlbHNlIGF3YWl0IHRoaXMuaW5mbGljdE1ham9yV291bmQoKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIC8vIGF3YWl0IHRoaXMudXBkYXRlKHsgW2BkYXRhLnN0YXR1cy4ke3N0YXR1c05hbWV9LnZhbHVlYF06ICFzdGF0dXNWYWx1ZSB9KVxuICAgIGxldCBlZmZlY3RFZmZlY3RcbiAgICBzd2l0Y2ggKHN0YXR1c05hbWUpIHtcbiAgICAgIGNhc2UgJ2RlYWQnOlxuICAgICAgICBpZiAoc3RhdHVzVmFsdWUpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnVuc2V0U3RhdHVzKCdkZWFkJylcbiAgICAgICAgICBlZmZlY3RFZmZlY3QgPSBhd2FpdCB0aGlzLmhhc0FjdGl2ZUVmZmVjdCgnZGVhZCcpXG4gICAgICAgICAgaWYgKGVmZmVjdEVmZmVjdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVmZmVjdCBvZiBlZmZlY3RFZmZlY3QpIHtcbiAgICAgICAgICAgICAgZWZmZWN0LmRlbGV0ZSgpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgdGhpcy5mYWxsRGVhZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdkeWluZyc6XG4gICAgICAgIGlmIChzdGF0dXNWYWx1ZSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMudW5zZXRTdGF0dXMoJ2R5aW5nJylcbiAgICAgICAgICBlZmZlY3RFZmZlY3QgPSBhd2FpdCB0aGlzLmhhc0FjdGl2ZUVmZmVjdCgnZHlpbmcnKVxuICAgICAgICAgIGlmIChlZmZlY3RFZmZlY3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBlZmZlY3Qgb2YgZWZmZWN0RWZmZWN0KSB7XG4gICAgICAgICAgICAgIGVmZmVjdC5kZWxldGUoKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHRoaXMuZmFsbER5aW5nKClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3Byb25lJzpcbiAgICAgICAgaWYgKHN0YXR1c1ZhbHVlKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy51bnNldFN0YXR1cygncHJvbmUnKVxuICAgICAgICAgIGVmZmVjdEVmZmVjdCA9IGF3YWl0IHRoaXMuaGFzQWN0aXZlRWZmZWN0KCdwcm9uZScpXG4gICAgICAgICAgaWYgKGVmZmVjdEVmZmVjdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVmZmVjdCBvZiBlZmZlY3RFZmZlY3QpIHtcbiAgICAgICAgICAgICAgZWZmZWN0LmRlbGV0ZSgpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgdGhpcy5mYWxsUHJvbmUoKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAndW5jb25zY2lvdXMnOlxuICAgICAgICBpZiAoc3RhdHVzVmFsdWUpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnVuc2V0U3RhdHVzKCd1bmNvbnNjaW91cycpXG4gICAgICAgICAgZWZmZWN0RWZmZWN0ID0gYXdhaXQgdGhpcy5oYXNBY3RpdmVFZmZlY3QoJ3VuY29uc2Npb3VzJylcbiAgICAgICAgICBpZiAoZWZmZWN0RWZmZWN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZWZmZWN0IG9mIGVmZmVjdEVmZmVjdCkge1xuICAgICAgICAgICAgICBlZmZlY3QuZGVsZXRlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB0aGlzLmZhbGxVbmNvbnNjaW91cygpXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgaGFzQWN0aXZlRWZmZWN0IChlZmZlY3RMYWJlbCkge1xuICAgIGNvbnN0IGVmZmVjdExpc3QgPSB0aGlzLmVmZmVjdHNcbiAgICAgIC5tYXAoZWZmZWN0ID0+IHtcbiAgICAgICAgcmV0dXJuIGVmZmVjdFxuICAgICAgfSlcbiAgICAgIC5maWx0ZXIoZWZmZWN0ID0+IGVmZmVjdC5kYXRhLmxhYmVsID09PSBlZmZlY3RMYWJlbClcbiAgICByZXR1cm4gZWZmZWN0TGlzdFxuICB9XG5cbiAgYXN5bmMgdG9nZ2xlRWZmZWN0IChlZmZlY3ROYW1lKSB7XG4gICAgc3dpdGNoIChlZmZlY3ROYW1lKSB7XG4gICAgICBjYXNlICdib3V0T2ZNYWRuZXNzJzpcbiAgICAgICAgaWYgKHRoaXMuYm91dE9mTWFkbmVzcykge1xuICAgICAgICAgIGF3YWl0IHRoaXMuYm91dE9mTWFkbmVzcy5kZWxldGUoKVxuICAgICAgICAgIC8vIGlmKCBib3V0T2ZNYWRuZXNzKXtcbiAgICAgICAgICAvLyAgIGF3YWl0IGJvdXRPZk1hZG5lc3MudXBkYXRlKHsgZGlzYWJsZWQ6ICFib3V0T2ZNYWRuZXNzLmRhdGEuZGlzYWJsZWQsIGR1cmF0aW9uOiB7c2Vjb25kczogdW5kZWZpbmVkLCByb3VuZHM6IHVuZGVmaW5lZCwgdHVybnM6IDF9fSk7XG4gICAgICAgICAgLy8gfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF3YWl0IHN1cGVyLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdBY3RpdmVFZmZlY3QnLCBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQm91dE9mTWFkbmVzc05hbWUnKSxcbiAgICAgICAgICAgICAgaWNvbjogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZW5hYmxlU3RhdHVzSWNvbnMnKVxuICAgICAgICAgICAgICAgID8gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvaGFuZ2luZy1zcGlkZXIuc3ZnJ1xuICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICAgICAgb3JpZ2luOiB0aGlzLnV1aWQsXG4gICAgICAgICAgICAgIGR1cmF0aW9uOiB7XG4gICAgICAgICAgICAgICAgc2Vjb25kczogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIHJvdW5kczogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIHR1cm5zOiAxXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGZsYWdzOiB7XG4gICAgICAgICAgICAgICAgQ29DNzoge1xuICAgICAgICAgICAgICAgICAgbWFkbmVzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIHJlYWxUaW1lOiB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBkaXNhYmxlZDogZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdKVxuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2luc2FuaXR5JzpcbiAgICAgICAgaWYgKHRoaXMuaW5zYW5pdHkpIHtcbiAgICAgICAgICB0aGlzLmluc2FuaXR5LmRlbGV0ZSgpXG4gICAgICAgICAgLy8gaWYoIGluc2FuaXR5KXtcbiAgICAgICAgICAvLyAgIGF3YWl0IGluc2FuaXR5LnVwZGF0ZSh7IGRpc2FibGVkOiAhaW5zYW5pdHkuZGF0YS5kaXNhYmxlZCwgZHVyYXRpb246IHtzZWNvbmRzOiB1bmRlZmluZWQsIHJvdW5kczogdW5kZWZpbmVkLCB0dXJuczogMX19KTtcbiAgICAgICAgICAvLyB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXdhaXQgc3VwZXIuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JbnNhbml0eU5hbWUnKSxcbiAgICAgICAgICAgICAgaWNvbjogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZW5hYmxlU3RhdHVzSWNvbnMnKVxuICAgICAgICAgICAgICAgID8gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvdGVudGFjbGVzLXNrdWxsLnN2ZydcbiAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgICAgIG9yaWdpbjogdGhpcy51dWlkLFxuICAgICAgICAgICAgICBkdXJhdGlvbjoge1xuICAgICAgICAgICAgICAgIHNlY29uZHM6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICByb3VuZHM6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB0dXJuczogMVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBmbGFnczoge1xuICAgICAgICAgICAgICAgIENvQzc6IHtcbiAgICAgICAgICAgICAgICAgIG1hZG5lc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgICBpbmRlZmluaXRlOiB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAvLyB0aW50OiAnI2ZmMDAwMCcsXG4gICAgICAgICAgICAgIGRpc2FibGVkOiBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF0pXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBnZXRTdGF0dXMgKHN0YXR1c05hbWUpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLnN0YXR1cykgcmV0dXJuIGZhbHNlXG4gICAgbGV0IHN0YXR1c1ZhbHVlID0gdGhpcy5kYXRhLmRhdGEuc3RhdHVzW3N0YXR1c05hbWVdPy52YWx1ZVxuICAgIGlmICh1bmRlZmluZWQgPT09IHN0YXR1c1ZhbHVlKSByZXR1cm4gZmFsc2VcbiAgICBpZiAoISh0eXBlb2Ygc3RhdHVzVmFsdWUgPT09ICdib29sZWFuJykpIHtcbiAgICAgIHN0YXR1c1ZhbHVlID0gc3RhdHVzVmFsdWUgPT09ICdmYWxzZScgLy8gTmVjZXNzYXJ5LCBpbmNvcnJlY3QgdGVtcGxhdGUgaW5pdGlhbGl6YXRpb25cbiAgICB9XG4gICAgcmV0dXJuIHN0YXR1c1ZhbHVlXG4gIH1cblxuICBhc3luYyBzZXRTdGF0dXMgKHN0YXR1c05hbWUpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtgZGF0YS5zdGF0dXMuJHtzdGF0dXNOYW1lfS52YWx1ZWBdOiB0cnVlIH0pXG4gIH1cblxuICBhc3luYyB1bnNldFN0YXR1cyAoc3RhdHVzTmFtZSkge1xuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgW2BkYXRhLnN0YXR1cy4ke3N0YXR1c05hbWV9LnZhbHVlYF06IGZhbHNlIH0pXG4gIH1cblxuICBhc3luYyByZXNldENvdW50ZXIgKGNvdW50ZXIpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtjb3VudGVyXTogMCB9KVxuICB9XG5cbiAgYXN5bmMgc2V0T25lRmlmdGhTYW5pdHkgKG9uZUZpZnRoU2FuaXR5KSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS5hdHRyaWJzLnNhbi5vbmVGaWZ0aFNhbml0eSc6IG9uZUZpZnRoU2FuaXR5IH0pXG4gIH1cblxuICBnZXQgZmlnaHRpbmdTa2lsbHMgKCkge1xuICAgIGNvbnN0IHNraWxsTGlzdCA9IFtdXG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICBpZiAodmFsdWUudHlwZSA9PT0gJ3NraWxsJyAmJiB2YWx1ZS5kYXRhLmRhdGEucHJvcGVydGllcy5maWdodGluZykge1xuICAgICAgICBza2lsbExpc3QucHVzaCh2YWx1ZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBza2lsbExpc3Quc29ydCgoYSwgYikgPT4ge1xuICAgICAgcmV0dXJuIGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSlcbiAgICB9KVxuXG4gICAgcmV0dXJuIHNraWxsTGlzdFxuICB9XG5cbiAgZ2V0IGNsb3NlQ29tYmF0V2VhcG9ucyAoKSB7XG4gICAgY29uc3Qgd2VhcG9uTGlzdCA9IFtdXG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICBpZiAodmFsdWUudHlwZSA9PT0gJ3dlYXBvbicgJiYgIXZhbHVlLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLnJuZ2QpIHtcbiAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLml0ZW1zLmdldCh2YWx1ZS5kYXRhLmRhdGEuc2tpbGwubWFpbi5pZClcbiAgICAgICAgdmFsdWUuZGF0YS5kYXRhLnNraWxsLm1haW4udmFsdWUgPSBza2lsbCA/IHNraWxsLnZhbHVlIDogMFxuICAgICAgICB3ZWFwb25MaXN0LnB1c2godmFsdWUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgd2VhcG9uTGlzdC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICByZXR1cm4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKVxuICAgIH0pXG5cbiAgICByZXR1cm4gd2VhcG9uTGlzdFxuICB9XG5cbiAgZ2V0IGZpcmVhcm1Ta2lsbHMgKCkge1xuICAgIGNvbnN0IHNraWxsTGlzdCA9IFtdXG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICBpZiAodmFsdWUudHlwZSA9PT0gJ3NraWxsJyAmJiB2YWx1ZS5kYXRhLmRhdGEucHJvcGVydGllcy5maXJlYXJtKSB7XG4gICAgICAgIHNraWxsTGlzdC5wdXNoKHZhbHVlKVxuICAgICAgfVxuICAgIH1cblxuICAgIHNraWxsTGlzdC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICByZXR1cm4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKVxuICAgIH0pXG5cbiAgICByZXR1cm4gc2tpbGxMaXN0XG4gIH1cblxuICBnZXQgdXNlciAoKSB7XG4gICAgLy8gaXMgdGhhdCBhY3RvciBpbXBlcnNvbmFudGVkIGJ5IGEgdXNlciA/XG4gICAgcmV0dXJuIGdhbWUudXNlcnMuZmluZCh1c2VyID0+IHtcbiAgICAgIGlmICh1c2VyLmNoYXJhY3Rlcikge1xuICAgICAgICBpZiAodXNlci5jaGFyYWN0ZXIuaWQgPT09IHRoaXMuaWQpIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9KVxuICB9XG5cbiAgZ2V0IGRvZGdlU2tpbGwgKCkge1xuICAgIGNvbnN0IHNraWxsTGlzdCA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKFxuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKENPQzcuZG9kZ2VTa2lsbE5hbWUpXG4gICAgKVxuICAgIGlmIChza2lsbExpc3QubGVuZ3RoICE9PSAwKSByZXR1cm4gc2tpbGxMaXN0WzBdXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBjcmVkaXRSYXRpbmdTa2lsbCAoKSB7XG4gICAgY29uc3Qgc2tpbGxMaXN0ID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUoXG4gICAgICBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5jcmVkaXRSYXRpbmdTa2lsbE5hbWUpXG4gICAgKVxuICAgIGlmIChza2lsbExpc3QubGVuZ3RoICE9PSAwKSByZXR1cm4gc2tpbGxMaXN0WzBdXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBjdGh1bGh1TXl0aG9zU2tpbGwgKCkge1xuICAgIGNvbnN0IHNraWxsTGlzdCA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKFxuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKENPQzcuQ3RodWxodU15dGhvc05hbWUpXG4gICAgKVxuICAgIGlmIChza2lsbExpc3QubGVuZ3RoICE9PSAwKSByZXR1cm4gc2tpbGxMaXN0WzBdXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBjdGh1bGh1TXl0aG9zICgpIHtcbiAgICBjb25zdCBDTSA9IHRoaXMuY3RodWxodU15dGhvc1NraWxsXG4gICAgaWYgKENNKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IENNLnZhbHVlXG4gICAgICBpZiAodmFsdWUpIHJldHVybiB2YWx1ZVxuICAgICAgcmV0dXJuIHBhcnNlSW50KENNLmRhdGEuZGF0YS52YWx1ZSlcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIGdldCBteXRob3NJbnNhbml0eUV4cGVyaWVuY2VkICgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRGbGFnKCdDb0M3JywgJ215dGhvc0luc2FuaXR5RXhwZXJpZW5jZWQnKSB8fCBmYWxzZVxuICB9XG5cbiAgYXN5bmMgZXhwZXJpZW5jZUZpcnN0TXl0aG9zSW5zYW5pdHkgKCkge1xuICAgIGF3YWl0IHRoaXMuc2V0RmxhZygnQ29DNycsICdteXRob3NJbnNhbml0eUV4cGVyaWVuY2VkJywgdHJ1ZSlcbiAgfVxuXG4gIGdldCBjcmVkaXRSYXRpbmcgKCkge1xuICAgIGNvbnN0IENSID0gdGhpcy5jcmVkaXRSYXRpbmdTa2lsbFxuICAgIGlmIChDUikge1xuICAgICAgY29uc3QgdmFsdWUgPSBDUi52YWx1ZVxuICAgICAgaWYgKHZhbHVlKSByZXR1cm4gdmFsdWVcbiAgICAgIHJldHVybiBwYXJzZUludChDUi5kYXRhLmRhdGEudmFsdWUpXG4gICAgfVxuICAgIHJldHVybiAwXG4gIH1cblxuICBnZXQgc3BlbmRpbmdMZXZlbCAoKSB7XG4gICAgY29uc3QgQ1IgPSB0aGlzLmNyZWRpdFJhdGluZ1xuICAgIGlmIChDUiA+PSA5OSkgcmV0dXJuIDUwMDBcbiAgICBpZiAoQ1IgPj0gOTApIHJldHVybiAyNTBcbiAgICBpZiAoQ1IgPj0gNTApIHJldHVybiA1MFxuICAgIGlmIChDUiA+PSAxMCkgcmV0dXJuIDEwXG4gICAgaWYgKENSID49IDEpIHJldHVybiAyXG4gICAgcmV0dXJuIDAuNVxuICB9XG5cbiAgZ2V0IGNhc2ggKCkge1xuICAgIGNvbnN0IENSID0gdGhpcy5jcmVkaXRSYXRpbmdcbiAgICBpZiAoQ1IgPj0gOTkpIHJldHVybiA1MDAwMFxuICAgIGlmIChDUiA+PSA5MCkgcmV0dXJuIENSICogMjBcbiAgICBpZiAoQ1IgPj0gNTApIHJldHVybiBDUiAqIDVcbiAgICBpZiAoQ1IgPj0gMTApIHJldHVybiBDUiAqIDJcbiAgICBpZiAoQ1IgPj0gMSkgcmV0dXJuIENSXG4gICAgcmV0dXJuIDAuNVxuICB9XG5cbiAgZ2V0IGFzc2V0cyAoKSB7XG4gICAgY29uc3QgQ1IgPSB0aGlzLmNyZWRpdFJhdGluZ1xuICAgIGlmIChDUiA+PSA5OSkgcmV0dXJuIDUwMDAwMDBcbiAgICBpZiAoQ1IgPj0gOTApIHJldHVybiBDUiAqIDIwMDBcbiAgICBpZiAoQ1IgPj0gNTApIHJldHVybiBDUiAqIDUwMFxuICAgIGlmIChDUiA+PSAxMCkgcmV0dXJuIENSICogNTBcbiAgICBpZiAoQ1IgPj0gMSkgcmV0dXJuIENSICogMTBcbiAgICByZXR1cm4gMFxuICB9XG5cbiAgZ2V0IHNraWxscyAoKSB7XG4gICAgY29uc3Qgc2tpbGxMaXN0ID0gW11cbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgIGlmICh2YWx1ZS50eXBlID09PSAnc2tpbGwnKSBza2lsbExpc3QucHVzaCh2YWx1ZSlcbiAgICB9XG5cbiAgICBza2lsbExpc3Quc29ydCgoYSwgYikgPT4ge1xuICAgICAgcmV0dXJuIGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSlcbiAgICB9KVxuXG4gICAgcmV0dXJuIHNraWxsTGlzdFxuICB9XG5cbiAgZ2V0IG93bmVycyAoKSB7XG4gICAgcmV0dXJuIGdhbWUudXNlcnMuZmlsdGVyKFxuICAgICAgdSA9PiB0aGlzLnRlc3RVc2VyUGVybWlzc2lvbih1LCAnT1dORVInKSAmJiAhdS5pc0dNXG4gICAgKVxuICB9XG5cbiAgZ2V0IHBsYXllciAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3duZXJzLmZpbHRlcih1ID0+IHUuY2hhcmFjdGVyPy5pZCA9PT0gdGhpcy5pZClcbiAgfVxuXG4gIGdldCBjaGFyYWN0ZXJVc2VyICgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgZ2FtZS51c2Vycy5jb250ZW50cy5maWx0ZXIodSA9PiB1LmNoYXJhY3Rlcj8uaWQgPT09IHRoaXMuaWQpWzBdIHx8IG51bGxcbiAgICApXG4gIH1cblxuICBhc3luYyBzZXRIZWFsdGhTdGF0dXNNYW51YWxseSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgaWYgKGV2ZW50Lm9yaWdpbmFsRXZlbnQpIHtcbiAgICAgIGNvbnN0IGhlYWx0aEJlZm9yZSA9IHBhcnNlSW50KFxuICAgICAgICBldmVudC5vcmlnaW5hbEV2ZW50LmN1cnJlbnRUYXJnZXQuZGVmYXVsdFZhbHVlXG4gICAgICApXG4gICAgICBjb25zdCBoZWFsdGhBZnRlciA9IHBhcnNlSW50KGV2ZW50Lm9yaWdpbmFsRXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgIGxldCBkYW1hZ2VUYWtlblxuICAgICAgLy8gaXMgaGVhbGluZ1xuICAgICAgaWYgKGhlYWx0aEFmdGVyID4gaGVhbHRoQmVmb3JlKSByZXR1cm4gYXdhaXQgdGhpcy5zZXRIcChoZWFsdGhBZnRlcilcbiAgICAgIGVsc2UgaWYgKGhlYWx0aEFmdGVyIDwgMCkgZGFtYWdlVGFrZW4gPSBNYXRoLmFicyhoZWFsdGhBZnRlcilcbiAgICAgIGVsc2UgZGFtYWdlVGFrZW4gPSBoZWFsdGhCZWZvcmUgLSBoZWFsdGhBZnRlclxuICAgICAgdGhpcy5yZW5kZXIodHJ1ZSkgLy8gbmVlZGVkLCBvciBuZWdhdGl2ZSB2YWx1ZXMgd2lsbCBub3Qgd29ya1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZGVhbERhbWFnZShkYW1hZ2VUYWtlbiwgeyBpZ25vcmVBcm1vcjogdHJ1ZSB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGRlYWxEYW1hZ2UgKGFtb3VudCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgYXJtb3JEYXRhID0gdGhpcy5kYXRhLmRhdGEuYXR0cmlicy5hcm1vci52YWx1ZVxuICAgIGNvbnN0IGdyb3NzRGFtYWdlID0gcGFyc2VJbnQoYW1vdW50KVxuICAgIGxldCBhcm1vclZhbHVlID0gMFxuICAgIGlmICghb3B0aW9ucy5pZ25vcmVBcm1vcikge1xuICAgICAgaWYgKGFybW9yRGF0YSA9PT0gbnVsbCkge1xuICAgICAgfSBlbHNlIGlmIChDb0M3VXRpbGl0aWVzLmlzRm9ybXVsYShhcm1vckRhdGEpKSB7XG4gICAgICAgIGFybW9yVmFsdWUgPSAoYXdhaXQgbmV3IFJvbGwoYXJtb3JEYXRhKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpLnRvdGFsXG4gICAgICB9IGVsc2UgaWYgKCFpc05hTihOdW1iZXIoYXJtb3JEYXRhKSkpIHtcbiAgICAgICAgYXJtb3JWYWx1ZSA9IE51bWJlcihhcm1vckRhdGEpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgYFVuYWJsZSB0byBwcm9jZXNzIGFybW9yIHZhbHVlOiAke2FybW9yRGF0YX0uIElnbm9yaW5nIGFybW9yLmBcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBuZXREYW1hZ2UgPSBncm9zc0RhbWFnZSAtIGFybW9yVmFsdWVcbiAgICBpZiAobmV0RGFtYWdlIDw9IDApIHJldHVybiAwXG4gICAgYXdhaXQgdGhpcy5zZXRIcCh0aGlzLmhwIC0gbmV0RGFtYWdlKVxuICAgIGlmIChuZXREYW1hZ2UgPj0gdGhpcy5ocE1heCkge1xuICAgICAgYXdhaXQgdGhpcy5mYWxsRGVhZCgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChuZXREYW1hZ2UgPj0gTWF0aC5mbG9vcih0aGlzLmhwTWF4IC8gMikpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5pbmZsaWN0TWFqb3JXb3VuZCgpXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5ocCA9PT0gMCkge1xuICAgICAgICBpZiAoIXRoaXMuZ2V0U3RhdHVzKENPQzcuc3RhdHVzLnVuY29uc2Npb3VzKSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuZmFsbFVuY29uc2Npb3VzKClcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tYWpvcldvdW5kKSB0aGlzLmZhbGxEeWluZygpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXREYW1hZ2VcbiAgfVxuXG4gIGFzeW5jIGluZmxpY3RNYWpvcldvdW5kICgpIHtcbiAgICBpZiAoIXRoaXMubWFqb3JXb3VuZCkge1xuICAgICAgYXdhaXQgdGhpcy5zZXRTdGF0dXMoQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHMpXG4gICAgICBjb25zdCBjcml0aWNhbFdvdW5kc0VmZmVjdCA9IGF3YWl0IHRoaXMuaGFzQWN0aXZlRWZmZWN0KCdjcml0aWNhbFdvdW5kcycpXG4gICAgICBpZiAoY3JpdGljYWxXb3VuZHNFZmZlY3QubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGF3YWl0IHN1cGVyLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdBY3RpdmVFZmZlY3QnLCBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbGFiZWw6ICdjcml0aWNhbFdvdW5kcycsXG4gICAgICAgICAgICBpY29uOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdlbmFibGVTdGF0dXNJY29ucycpXG4gICAgICAgICAgICAgID8gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvYXJtLXNsaW5nLnN2ZydcbiAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgICAgb3JpZ2luOiB0aGlzLnV1aWQsXG4gICAgICAgICAgICBkdXJhdGlvbjoge1xuICAgICAgICAgICAgICBzZWNvbmRzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgIHJvdW5kczogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICB0dXJuczogMVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRpc2FibGVkOiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgXSlcbiAgICAgIH1cbiAgICB9XG4gICAgYXdhaXQgdGhpcy5mYWxsUHJvbmUoKVxuICAgIGlmIChcbiAgICAgICF0aGlzLmdldFN0YXR1cyhDT0M3LnN0YXR1cy51bmNvbnNjaW91cykgJiZcbiAgICAgICF0aGlzLmdldFN0YXR1cyhDT0M3LnN0YXR1cy5kZWFkKVxuICAgICkge1xuICAgICAgY29uc3QgY29uQ2hlY2sgPSBuZXcgQ29DN0NvbkNoZWNrKHRoaXMuaXNUb2tlbiA/IHRoaXMudG9rZW5LZXkgOiB0aGlzLmlkKVxuICAgICAgY29uQ2hlY2sudG9NZXNzYWdlKClcbiAgICB9XG4gIH1cblxuICBhc3luYyBjdXJlTWFqb3JXb3VuZCAoKSB7XG4gICAgYXdhaXQgdGhpcy51bnNldFN0YXR1cyhDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kcylcbiAgICBjb25zdCBjcml0aWNhbFdvdW5kc0VmZmVjdCA9IGF3YWl0IHRoaXMuaGFzQWN0aXZlRWZmZWN0KCdjcml0aWNhbFdvdW5kcycpXG4gICAgaWYgKGNyaXRpY2FsV291bmRzRWZmZWN0Lmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAoY29uc3QgZWZmZWN0IG9mIGNyaXRpY2FsV291bmRzRWZmZWN0KSB7XG4gICAgICAgIGVmZmVjdC5kZWxldGUoKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGZhbGxQcm9uZSAoKSB7XG4gICAgYXdhaXQgdGhpcy5zZXRTdGF0dXMoQ09DNy5zdGF0dXMucHJvbmUpXG4gICAgY29uc3QgcHJvbmVFZmZlY3QgPSBhd2FpdCB0aGlzLmhhc0FjdGl2ZUVmZmVjdCgncHJvbmUnKVxuICAgIGlmIChwcm9uZUVmZmVjdC5sZW5ndGggPT09IDApIHtcbiAgICAgIGF3YWl0IHN1cGVyLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdBY3RpdmVFZmZlY3QnLCBbXG4gICAgICAgIHtcbiAgICAgICAgICBsYWJlbDogJ3Byb25lJyxcbiAgICAgICAgICBpY29uOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdlbmFibGVTdGF0dXNJY29ucycpXG4gICAgICAgICAgICA/ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL2ZhbGxpbmcuc3ZnJ1xuICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgIG9yaWdpbjogdGhpcy51dWlkLFxuICAgICAgICAgIGR1cmF0aW9uOiB7XG4gICAgICAgICAgICBzZWNvbmRzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICByb3VuZHM6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHR1cm5zOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkaXNhYmxlZDogZmFsc2VcbiAgICAgICAgfVxuICAgICAgXSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBmYWxsVW5jb25zY2lvdXMgKCkge1xuICAgIGF3YWl0IHRoaXMuc2V0U3RhdHVzKENPQzcuc3RhdHVzLnVuY29uc2Npb3VzKVxuICAgIGNvbnN0IHVuY29uc2Npb3VzRWZmZWN0ID0gYXdhaXQgdGhpcy5oYXNBY3RpdmVFZmZlY3QoJ3VuY29uc2Npb3VzJylcbiAgICBpZiAodW5jb25zY2lvdXNFZmZlY3QubGVuZ3RoID09PSAwKSB7XG4gICAgICBhd2FpdCBzdXBlci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnQWN0aXZlRWZmZWN0JywgW1xuICAgICAgICB7XG4gICAgICAgICAgbGFiZWw6ICd1bmNvbnNjaW91cycsXG4gICAgICAgICAgaWNvbjogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZW5hYmxlU3RhdHVzSWNvbnMnKVxuICAgICAgICAgICAgPyAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9rbm9ja2VkLW91dC1zdGFycy5zdmcnXG4gICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgb3JpZ2luOiB0aGlzLnV1aWQsXG4gICAgICAgICAgZHVyYXRpb246IHtcbiAgICAgICAgICAgIHNlY29uZHM6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHJvdW5kczogdW5kZWZpbmVkLFxuICAgICAgICAgICAgdHVybnM6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRpc2FibGVkOiBmYWxzZVxuICAgICAgICB9XG4gICAgICBdKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGZhbGxEeWluZyAoKSB7XG4gICAgYXdhaXQgdGhpcy5zZXRTdGF0dXMoQ09DNy5zdGF0dXMuZHlpbmcpXG4gICAgY29uc3QgZHlpbmdFZmZlY3QgPSBhd2FpdCB0aGlzLmhhc0FjdGl2ZUVmZmVjdCgnZHlpbmcnKVxuICAgIGlmIChkeWluZ0VmZmVjdC5sZW5ndGggPT09IDApIHtcbiAgICAgIGF3YWl0IHN1cGVyLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdBY3RpdmVFZmZlY3QnLCBbXG4gICAgICAgIHtcbiAgICAgICAgICBsYWJlbDogJ2R5aW5nJyxcbiAgICAgICAgICBpY29uOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdlbmFibGVTdGF0dXNJY29ucycpXG4gICAgICAgICAgICA/ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL2hlYXJ0LWJlYXRzLnN2ZydcbiAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICBvcmlnaW46IHRoaXMudXVpZCxcbiAgICAgICAgICBkdXJhdGlvbjoge1xuICAgICAgICAgICAgc2Vjb25kczogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcm91bmRzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB0dXJuczogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIF0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZmFsbERlYWQgKCkge1xuICAgIGF3YWl0IHRoaXMudW5zZXRTdGF0dXMoQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHMpXG4gICAgYXdhaXQgdGhpcy51bnNldFN0YXR1cyhDT0M3LnN0YXR1cy5keWluZylcbiAgICBhd2FpdCB0aGlzLnVuc2V0U3RhdHVzKENPQzcuc3RhdHVzLnVuY29uc2Npb3VzKVxuICAgIGF3YWl0IHRoaXMuc2V0U3RhdHVzKENPQzcuc3RhdHVzLmRlYWQpXG4gICAgY29uc3QgZGVhZEVmZmVjdCA9IGF3YWl0IHRoaXMuaGFzQWN0aXZlRWZmZWN0KCdkZWFkJylcbiAgICBpZiAoZGVhZEVmZmVjdC5sZW5ndGggPT09IDApIHtcbiAgICAgIGF3YWl0IHN1cGVyLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdBY3RpdmVFZmZlY3QnLCBbXG4gICAgICAgIHtcbiAgICAgICAgICBsYWJlbDogJ2RlYWQnLFxuICAgICAgICAgIGljb246IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2VuYWJsZVN0YXR1c0ljb25zJylcbiAgICAgICAgICAgID8gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvdG9tYnN0b25lLnN2ZydcbiAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICBvcmlnaW46IHRoaXMudXVpZCxcbiAgICAgICAgICBkdXJhdGlvbjoge1xuICAgICAgICAgICAgc2Vjb25kczogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcm91bmRzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB0dXJuczogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIF0pXG4gICAgfVxuICAgIGNvbnN0IGR5aW5nRWZmZWN0ID0gYXdhaXQgdGhpcy5oYXNBY3RpdmVFZmZlY3QoJ2R5aW5nJylcbiAgICBpZiAoIXRoaXMuZHlpbmcgJiYgZHlpbmdFZmZlY3QubGVuZ3RoID4gMCkge1xuICAgICAgZm9yIChjb25zdCBlZmZlY3Qgb2YgZHlpbmdFZmZlY3QpIHtcbiAgICAgICAgZWZmZWN0LmRlbGV0ZSgpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0IG1ham9yV291bmQgKCkge1xuICAgIHJldHVybiB0aGlzLmdldFN0YXR1cyhDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kcylcbiAgfVxuXG4gIGdldCBkeWluZyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0U3RhdHVzKENPQzcuc3RhdHVzLmR5aW5nKVxuICB9XG5cbiAgZ2V0IHVuY29uc2Npb3VzICgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRTdGF0dXMoQ09DNy5zdGF0dXMudW5jb25zY2lvdXMpXG4gIH1cblxuICBnZXQgZGVhZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0U3RhdHVzKENPQzcuc3RhdHVzLmRlYWQpXG4gIH1cblxuICBnZXQgcHJvbmUgKCkge1xuICAgIHJldHVybiB0aGlzLmdldFN0YXR1cyhDT0M3LnN0YXR1cy5wcm9uZSlcbiAgfVxuXG4gIC8vIHN0YXRpYyB1cGRhdGVBY3RvciggYWN0b3IsIGRhdGFVcGRhdGUpe1xuICAvLyAgIGlmKCBnYW1lLnVzZXIuaXNHTSl7XG4gIC8vICAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oIGB1cGRhdGluZyBhY3RvciAke2FjdG9yLm5hbWV9YCk7XG4gIC8vICAgICBjb25zdCBwcm9uZSA9IGRhdGFVcGRhdGU/LmZsYWdzPy5Db0M3W0NPQzcuc3RhdHVzLnByb25lXTtcbiAgLy8gICAgIGNvbnN0IHVuY29uc2Npb3VzID0gZGF0YVVwZGF0ZT8uZmxhZ3M/LkNvQzdbQ09DNy5zdGF0dXMudW5jb25zY2lvdXNdO1xuICAvLyAgICAgY29uc3QgY3JpdGljYWxXb3VuZHMgPSBkYXRhVXBkYXRlPy5mbGFncz8uQ29DN1tDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kc107XG4gIC8vICAgICBjb25zdCBkeWluZyA9IGRhdGFVcGRhdGU/LmZsYWdzPy5Db0M3W0NPQzcuc3RhdHVzLmR5aW5nXTtcbiAgLy8gICAgIGlmKCBwcm9uZSkgdWkubm90aWZpY2F0aW9ucy5pbmZvKCBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9BY3RvclByb25lJywge2FjdG9yOiBhY3Rvci5uYW1lfSkpO1xuICAvLyAgICAgaWYoIHVuY29uc2Npb3VzKSB1aS5ub3RpZmljYXRpb25zLmluZm8oIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0FjdG9yVW5jb25zY2lvdXMnLCB7YWN0b3I6IGFjdG9yLm5hbWV9KSk7XG4gIC8vICAgICBpZiggY3JpdGljYWxXb3VuZHMpIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5JbmZvQWN0b3JNYWpvcldvdW5kJywge2FjdG9yOiBhY3Rvci5uYW1lfSkpO1xuICAvLyAgICAgaWYoIGR5aW5nKSB1aS5ub3RpZmljYXRpb25zLmluZm8oIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0FjdG9yRHlpbmcnLCB7YWN0b3I6IGFjdG9yLm5hbWV9KSk7XG4gIC8vICAgfVxuICAvLyAgIHJldHVybjtcbiAgLy8gfVxuXG4gIC8vIFwiQ29DNy5JbmZvQWN0b3JQcm9uZVwiOiBcInthY3Rvcn0gZmFsbCBwcm9uZVwiLFxuICAvLyBcIkNvQzcuSW5mb0FjdG9yVW5jb25zY2lvdXNcIjogXCJ7YWN0b3J9IGZhbGwgdW5jb25zY2lvdXNcIixcbiAgLy8gXCJDb0M3LkluZm9BY3Rvck1ham9yV291bmRcIjogXCJ7YWN0b3J9IGdldCBhIG1ham9yIHdvdW5kXCIsXG4gIC8vIFwiQ29DNy5JbmZvQWN0b3JEeWluZ1wiOiBcInthY29yfSBpcyBkeWluZ1wiLFxuICAvLyBcIkNvQzcuSW5mb0FjdG9ySW5qdXJpZWRcIjogXCJ7YWN0b3J9IGlzIGluanVyaWVkXCIsXG5cbiAgLy8gc3RhdGljIHVwZGF0ZVRva2VuKCBzY2VuZSwgdG9rZW4sIGRhdGFVcGRhdGUpe1xuICAvLyAgIGNvbnN0IGluanVyaWVkID0gZGF0YVVwZGF0ZT8uYWN0b3JEYXRhPy5mbGFncz8uQ29DNz8uaW5qdXJpZWQ7XG4gIC8vICAgaWYoIGluanVyaWVkKSB1aS5ub3RpZmljYXRpb25zLmluZm8oIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0FjdG9ySW5qdXJpZWQnLCB7YWN0b3I6IHRva2VuLm5hbWV9KSk7XG4gIC8vICAgcmV0dXJuO1xuICAvLyB9XG59XG4iLCIvKiBnbG9iYWwgRGlhbG9nLCBGb3JtRGF0YSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUgKi9cblxuZXhwb3J0IGNsYXNzIFNraWxsVmFsdWVEaWFsb2cge1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChuYW1lID0gbnVsbCwgYmFzZVZhbHVlID0gbnVsbCkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvc2tpbGwtdmFsdWUuaHRtbCcsXG4gICAgICB7IGJhc2U6IGJhc2VWYWx1ZSwgbmFtZTogbmFtZSB9XG4gICAgKVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGxldCBmb3JtRGF0YSA9IG51bGxcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBEaWFsb2coe1xuICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ta2lsbFZhbHVlJywgeyBuYW1lOiBuYW1lIH0pLFxuICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgdmFsaWRhdGU6IHtcbiAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVmFsaWRhdGUnKSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBodG1sID0+IHtcbiAgICAgICAgICAgICAgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoXG4gICAgICAgICAgICAgICAgaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcjc2tpbGwtc2VsZWN0LWZvcm0nKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGZvcm1EYXRhKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdDogJ3ZhbGlkYXRlJyxcbiAgICAgICAgY2xvc2U6ICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gcmVzb2x2ZShmYWxzZSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZHVwbGljYXRlLCBnYW1lLCBtZXJnZU9iamVjdCAqL1xuXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdMaW5rQ3JlYXRpb25EaWFsb2cgfSBmcm9tICcuL2xpbmstY3JlYXRpb24tZGlhbG9nLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0xpbmsge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgdGhpcy5fbGlua0RhdGEgPSB7XG4gICAgICB0eXBlOiBDb0M3TGluay5MSU5LX1RZUEUuQ0hFQ0ssXG4gICAgICBjaGVjazogQ29DN0xpbmsuQ0hFQ0tfVFlQRS5TS0lMTFxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tRGF0YSAobGlua0RhdGEpIHtcbiAgICBjb25zdCBsYWJlbCA9IENvQzdMaW5rQ3JlYXRpb25EaWFsb2cuYXR0cmlidXRlc1xuICAgICAgLmNvbmNhdChDb0NBY3Rvci5nZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24oKSlcbiAgICAgIC5maWx0ZXIoZSA9PiBlLmtleSA9PT0gbGlua0RhdGEubmFtZSlcbiAgICAgIC5tYXAoZSA9PiBlLmxhYmVsKVxuICAgIGlmIChsYWJlbC5sZW5ndGggPiAwKSB7XG4gICAgICBsaW5rRGF0YS5sYWJlbCA9IGxhYmVsWzBdXG4gICAgfVxuICAgIGNvbnN0IGxpbmsgPSBuZXcgQ29DN0xpbmsoKVxuICAgIGF3YWl0IGxpbmsuc2V0RGF0YShsaW5rRGF0YSlcbiAgICByZXR1cm4gbGlua1xuICB9XG5cbiAgc3RhdGljIGdldCBUWVBFX0tFWVdPUkQgKCkge1xuICAgIHJldHVybiBbJ2NoZWNrJywgJ3Nhbmxvc3MnLCAnaXRlbSddXG4gIH1cblxuICBzdGF0aWMgZ2V0IENIQVJBQ19LRVlXT1JEICgpIHtcbiAgICByZXR1cm4gWydjaGFyYWMnLCAnY2hhcicsICdjaGFyYWN0ZXJpc3RpYycsICdjaGFyYWN0ZXJpc3RpY3MnXVxuICB9XG5cbiAgc3RhdGljIGdldCBBVFRSSUJfS0VZV09SRCAoKSB7XG4gICAgcmV0dXJuIFsnYXR0cmlidXRlcycsICdhdHRyaWJ1dGUnLCAnYXR0cmliJywgJ2F0dHJpYnMnXVxuICB9XG5cbiAgc3RhdGljIGdldCBTS0lMTF9LRVlXT1JEICgpIHtcbiAgICByZXR1cm4gWydza2lsbCddXG4gIH1cblxuICBzdGF0aWMgZ2V0IExJTktfVFlQRSAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIENIRUNLOiAxLFxuICAgICAgU0FOTE9TUzogMixcbiAgICAgIElURU06IDNcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IENIRUNLX1RZUEUgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBDSEFSQUNURVJJU1RJQzogMSxcbiAgICAgIEFUVFJJQlVURTogMixcbiAgICAgIFNLSUxMOiAzXG4gICAgfVxuICB9XG5cbiAgZ2V0IGFjdG9yICgpIHtcbiAgICBpZiAodGhpcy5hY3RvcktleSkge1xuICAgICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGRhdGEgKCkge1xuICAgIGNvbnN0IGRhdGEgPSBkdXBsaWNhdGUodGhpcy5fbGlua0RhdGEpXG4gICAgZGF0YS5pc0NoZWNrID0gdGhpcy5pcy5jaGVja1xuICAgIGRhdGEuaXNTYW5sb3NzID0gdGhpcy5pcy5zYW5sb3NzXG4gICAgZGF0YS5pc0l0ZW0gPSB0aGlzLmlzLml0ZW1cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgYXN5bmMgZmV0Y2hJdGVtICgpIHtcbiAgICB0aGlzLl9saW5rRGF0YS52YWxpZEl0ZW0gPSBmYWxzZVxuICAgIGlmICghdGhpcy5fbGlua0RhdGEuZnJvbUNvbXBlbmRpdW0gJiYgIXRoaXMuX2xpbmtEYXRhLmZyb21EaXJlY3RvcnkpIHtcbiAgICAgIHRoaXMuX2l0ZW0gPSB1bmRlZmluZWRcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGlmICh0aGlzLl9saW5rRGF0YS5mcm9tQ29tcGVuZGl1bSkge1xuICAgICAgY29uc3QgcGFjayA9IGdhbWUucGFja3MuZ2V0KHRoaXMuX2xpbmtEYXRhLnBhY2spXG4gICAgICBpZiAoIXBhY2spIHJldHVybiBmYWxzZVxuICAgICAgaWYgKHBhY2subWV0YWRhdGEuZW50aXR5ICE9PSAnSXRlbScpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIHRoaXMuX2l0ZW0gPSBhd2FpdCBwYWNrLmdldERvY3VtZW50KHRoaXMuX2xpbmtEYXRhLmlkKVxuICAgIH1cblxuICAgIGlmICh0aGlzLl9saW5rRGF0YS5mcm9tRGlyZWN0b3J5KSB7XG4gICAgICB0aGlzLl9pdGVtID0gZ2FtZS5pdGVtcy5nZXQodGhpcy5fbGlua0RhdGEuaWQpXG4gICAgfVxuXG4gICAgdGhpcy5fbGlua0RhdGEuc2tpbGxOYW1lID0gbnVsbFxuICAgIHRoaXMuX2xpbmtEYXRhLml0ZW1OYW1lID0gbnVsbFxuXG4gICAgaWYgKHRoaXMuX2l0ZW0pIHtcbiAgICAgIGlmICh0aGlzLl9pdGVtLmRhdGEudHlwZSA9PT0gJ3dlYXBvbicpIHtcbiAgICAgICAgdGhpcy50eXBlID0gQ29DN0xpbmsuTElOS19UWVBFLklURU1cbiAgICAgICAgdGhpcy5fbGlua0RhdGEuaXRlbU5hbWUgPSB0aGlzLl9pdGVtLmRhdGEubmFtZVxuICAgICAgICB0aGlzLl9saW5rRGF0YS52YWxpZEl0ZW0gPSB0cnVlXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9pdGVtLmRhdGEudHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICB0aGlzLnR5cGUgPSBDb0M3TGluay5MSU5LX1RZUEUuQ0hFQ0tcbiAgICAgICAgdGhpcy5jaGVjayA9IENvQzdMaW5rLkNIRUNLX1RZUEUuU0tJTExcbiAgICAgICAgdGhpcy5fbGlua0RhdGEuc2tpbGxOYW1lID0gdGhpcy5faXRlbS5kYXRhLm5hbWVcbiAgICAgICAgdGhpcy5fbGlua0RhdGEudmFsaWRJdGVtID0gdHJ1ZVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGFzeW5jIHNldERhdGEgKHgpIHtcbiAgICAvLyB0aGlzLl9saW5rRGF0YSA9IHg7XG4gICAgLy8gdGhpcy5fbGlua0RhdGEuZm9yY2VNb2RpZmllcnMgPSBmYWxzZTtcbiAgICB0aGlzLl9saW5rRGF0YS5mcm9tQ29tcGVuZGl1bSA9IGZhbHNlXG4gICAgdGhpcy5fbGlua0RhdGEuZnJvbURpcmVjdG9yeSA9IGZhbHNlXG4gICAgdGhpcy5oYXNQbGF5ZXJPd25lciA9IGZhbHNlXG5cbiAgICBpZiAoeC5oYXNQbGF5ZXJPd25lcikge1xuICAgICAgdGhpcy5oYXNQbGF5ZXJPd25lciA9IHRydWVcbiAgICAgIHRoaXMuYWN0b3JLZXkgPSB4LmFjdG9yS2V5XG4gICAgfVxuXG4gICAgLy8gUmV0cmlldmUgaXRlbVxuICAgIGlmICh4LnBhY2sgJiYgeC5pZCkge1xuICAgICAgdGhpcy5fbGlua0RhdGEuZnJvbUNvbXBlbmRpdW0gPSB0cnVlXG4gICAgICB0aGlzLl9saW5rRGF0YS5wYWNrID0geC5wYWNrXG4gICAgICB0aGlzLl9saW5rRGF0YS5pZCA9IHguaWRcbiAgICB9XG5cbiAgICBpZiAoeC5pZCAmJiAheC5wYWNrKSB7XG4gICAgICB0aGlzLl9saW5rRGF0YS5mcm9tRGlyZWN0b3J5ID0gdHJ1ZVxuICAgICAgdGhpcy5fbGlua0RhdGEuaWQgPSB4LmlkXG4gICAgfVxuXG4gICAgY29uc3QgbGlua1NldCA9IGF3YWl0IHRoaXMuZmV0Y2hJdGVtKClcblxuICAgIGlmICghbGlua1NldCkge1xuICAgICAgLy8gTGluayBkZWZpbml0aW9uXG4gICAgICBpZiAoeC5jaGVjaykgdGhpcy50eXBlID0geC5jaGVja1xuICAgICAgZWxzZSB0aGlzLnR5cGUgPSBDb0M3TGluay5MSU5LX1RZUEUuQ0hFQ0sgLy8gY2hlY2ssIHNhbmxvc3MsIGl0ZW1cbiAgICAgIGlmICh4LnR5cGUpIHRoaXMuY2hlY2sgPSB4LnR5cGVcbiAgICAgIC8vIGF0dHJpYiwgY2hhcmFjLCBza2lsbFxuICAgICAgZWxzZSBpZiAodGhpcy50eXBlKSB0aGlzLmNoZWNrID0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEFSQUNURVJJU1RJQ1xuXG4gICAgICAvLyBMaW5rIG5hbWVcbiAgICAgIGlmICh4Lm5hbWUpIHtcbiAgICAgICAgdGhpcy5fbGlua0RhdGEuaXRlbU5hbWUgPSBudWxsXG4gICAgICAgIHRoaXMuX2xpbmtEYXRhLnNraWxsTmFtZSA9IG51bGxcbiAgICAgICAgdGhpcy5fbGlua0RhdGEuY2hhcmFjdGVyaXN0aWNLZXkgPSBudWxsXG4gICAgICAgIHRoaXMuX2xpbmtEYXRhLmF0dHJpYnV0ZUtleSA9IG51bGxcbiAgICAgICAgaWYgKHRoaXMuaXMuY2hlY2spIHtcbiAgICAgICAgICBzd2l0Y2ggKHRoaXMuY2hlY2spIHtcbiAgICAgICAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5TS0lMTDpcbiAgICAgICAgICAgICAgdGhpcy5fbGlua0RhdGEuc2tpbGxOYW1lID0geC5uYW1lXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hBUkFDVEVSSVNUSUM6XG4gICAgICAgICAgICAgIHRoaXMuX2xpbmtEYXRhLmNoYXJhY3RlcmlzdGljS2V5ID0geC5uYW1lXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuQVRUUklCVVRFOlxuICAgICAgICAgICAgICB0aGlzLl9saW5rRGF0YS5hdHRyaWJ1dGVLZXkgPSB4Lm5hbWVcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXMuaXRlbSkgdGhpcy5fbGlua0RhdGEuaXRlbU5hbWUgPSB4Lm5hbWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNb2RpZmllcnNcbiAgICBpZiAoeC5kaWZmaWN1bHR5IHx8ICFpc05hTihOdW1iZXIoeC5kaWZmaWN1bHR5KSkpIHtcbiAgICAgIHRoaXMuX2xpbmtEYXRhLmRpZmZpY3VsdHkgPSBOdW1iZXIoeC5kaWZmaWN1bHR5KVxuICAgIH1cbiAgICBpZiAoeC5tb2RpZmllciB8fCAhaXNOYU4oTnVtYmVyKHgubW9kaWZpZXIpKSkge1xuICAgICAgdGhpcy5fbGlua0RhdGEubW9kaWZpZXIgPSBOdW1iZXIoeC5tb2RpZmllcilcbiAgICB9XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIHguZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgIHR5cGVvZiB4Lm1vZGlmaWVyICE9PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgdGhpcy5fbGlua0RhdGEuZm9yY2VNb2RpZmllcnMgPSB0cnVlXG4gICAgfVxuICAgIGlmICh4LmZvcmNlTW9kaWZpZXJzKSB0aGlzLl9saW5rRGF0YS5mb3JjZU1vZGlmaWVycyA9IHRydWVcblxuICAgIC8vIEZvcmNlIGRpc3BsYXllZCBuYW1lXG4gICAgaWYgKHguZGlzcGxheU5hbWUgPT09ICd0cnVlJyB8fCB4LmRpc3BsYXlOYW1lID09PSB0cnVlKSB7XG4gICAgICB0aGlzLl9saW5rRGF0YS5kaXNwbGF5TmFtZSA9IHRydWVcbiAgICB9XG4gICAgaWYgKHgubGFiZWwpIHtcbiAgICAgIHRoaXMuX2xpbmtEYXRhLmhhc0xhYmVsID0gdHJ1ZVxuICAgICAgdGhpcy5fbGlua0RhdGEubGFiZWwgPSB4LmxhYmVsXG4gICAgfVxuXG4gICAgLy8gSWNvblxuICAgIGlmICh4Lmljb24pIHtcbiAgICAgIHRoaXMuX2xpbmtEYXRhLmhhc0ljb24gPSB0cnVlXG4gICAgICB0aGlzLl9saW5rRGF0YS5pY29uID0geC5pY29uXG4gICAgfVxuXG4gICAgLy8gQmxpbmRcbiAgICBpZiAoeC5ibGluZCA9PT0gJ3RydWUnIHx8IHguYmxpbmQgPT09IHRydWUpIHRoaXMuX2xpbmtEYXRhLmJsaW5kID0gdHJ1ZVxuXG4gICAgLy8gU2FuIERhdGFcbiAgICB0aGlzLl9saW5rRGF0YS5zYW5NaW4gPSB4LnNhbk1pblxuICAgIHRoaXMuX2xpbmtEYXRhLnNhbk1heCA9IHguc2FuTWF4XG4gIH1cblxuICBnZXQgdHlwZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xpbmtEYXRhLnR5cGVcbiAgfVxuXG4gIGdldCBjaGVja1R5cGUgKCkge1xuICAgIHN3aXRjaCAodGhpcy5jaGVjaykge1xuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLkNIQVJBQ1RFUklTVElDOlxuICAgICAgICByZXR1cm4gJ2NoYXJhY3RlcmlzdGljJ1xuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLkFUVFJJQlVURTpcbiAgICAgICAgcmV0dXJuICdhdHRyaWJ1dGUnXG4gICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuU0tJTEw6XG4gICAgICAgIHJldHVybiAnc2tpbGwnXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuICB9XG5cbiAgc2V0IHR5cGUgKHgpIHtcbiAgICBpZiAoIWlzTmFOKE51bWJlcih4KSkpIHRoaXMuX2xpbmtEYXRhLnR5cGUgPSB4XG4gICAgZWxzZSB7XG4gICAgICBzd2l0Y2ggKHgudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICBjYXNlICdjaGVjayc6XG4gICAgICAgICAgdGhpcy5fbGlua0RhdGEudHlwZSA9IENvQzdMaW5rLkxJTktfVFlQRS5DSEVDS1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3Nhbmxvc3MnOlxuICAgICAgICAgIHRoaXMuX2xpbmtEYXRhLnR5cGUgPSBDb0M3TGluay5MSU5LX1RZUEUuU0FOTE9TU1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2l0ZW0nOlxuICAgICAgICAgIHRoaXMuX2xpbmtEYXRhLnR5cGUgPSBDb0M3TGluay5MSU5LX1RZUEUuSVRFTVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhpcy5fbGlua0RhdGEudHlwZSA9IHVuZGVmaW5lZFxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0IGNoZWNrICgpIHtcbiAgICByZXR1cm4gIWlzTmFOKE51bWJlcih0aGlzLl9saW5rRGF0YS5jaGVjaykpXG4gICAgICA/IE51bWJlcih0aGlzLl9saW5rRGF0YS5jaGVjaylcbiAgICAgIDogdW5kZWZpbmVkXG4gIH1cblxuICBzZXQgY2hlY2sgKHgpIHtcbiAgICBpZiAoIWlzTmFOKE51bWJlcih4KSkpIHRoaXMuX2xpbmtEYXRhLmNoZWNrID0gTnVtYmVyKHgpXG4gICAgZWxzZSB7XG4gICAgICB0aGlzLl9saW5rRGF0YS5jaGVjayA9IHVuZGVmaW5lZFxuICAgICAgaWYgKENvQzdMaW5rLkNIQVJBQ19LRVlXT1JELmluY2x1ZGVzKHgpKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IENvQzdMaW5rLkxJTktfVFlQRS5DSEVDS1xuICAgICAgICB0aGlzLl9saW5rRGF0YS5jaGVjayA9IENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hBUkFDVEVSSVNUSUNcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3TGluay5BVFRSSUJfS0VZV09SRC5pbmNsdWRlcyh4KSkge1xuICAgICAgICB0aGlzLnR5cGUgPSBDb0M3TGluay5MSU5LX1RZUEUuQ0hFQ0tcbiAgICAgICAgdGhpcy5fbGlua0RhdGEuY2hlY2sgPSBDb0M3TGluay5DSEVDS19UWVBFLkFUVFJJQlVURVxuICAgICAgfVxuICAgICAgaWYgKENvQzdMaW5rLlNLSUxMX0tFWVdPUkQuaW5jbHVkZXMoeCkpIHtcbiAgICAgICAgdGhpcy50eXBlID0gQ29DN0xpbmsuTElOS19UWVBFLkNIRUNLXG4gICAgICAgIHRoaXMuX2xpbmtEYXRhLmNoZWNrID0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5TS0lMTFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldCBuYW1lICgpIHtcbiAgICBpZiAodGhpcy5pcy5jaGVjaykge1xuICAgICAgc3dpdGNoICh0aGlzLmNoZWNrKSB7XG4gICAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEFSQUNURVJJU1RJQzpcbiAgICAgICAgICByZXR1cm4gdGhpcy5fbGlua0RhdGEuY2hhcmFjdGVyaXN0aWNLZXlcbiAgICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLkFUVFJJQlVURTpcbiAgICAgICAgICByZXR1cm4gdGhpcy5fbGlua0RhdGEuYXR0cmlidXRlS2V5XG4gICAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5TS0lMTDpcbiAgICAgICAgICByZXR1cm4gdGhpcy5fbGlua0RhdGEuc2tpbGxOYW1lXG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmlzLml0ZW0pIHJldHVybiB0aGlzLl9saW5rRGF0YS5pdGVtTmFtZVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHNldCBuYW1lICh4KSB7XG4gICAgaWYgKHRoaXMuaXMuY2hlY2spIHtcbiAgICAgIHN3aXRjaCAodGhpcy5jaGVjaykge1xuICAgICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hBUkFDVEVSSVNUSUM6XG4gICAgICAgICAgdGhpcy5fbGlua0RhdGEuY2hhcmFjdGVyaXN0aWNLZXkgPSB4XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLkFUVFJJQlVURTpcbiAgICAgICAgICB0aGlzLl9saW5rRGF0YS5hdHRyaWJ1dGVLZXkgPSB4XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLlNLSUxMOlxuICAgICAgICAgIHRoaXMuX2xpbmtEYXRhLnNraWxsTmFtZSA9IHhcbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuaXMuaXRlbSkgdGhpcy5fbGlua0RhdGEuaXRlbU5hbWUgPSB4XG4gIH1cblxuICBnZXQgaXMgKCkge1xuICAgIGNvbnN0IGxpbmsgPSB0aGlzXG4gICAgcmV0dXJuIHtcbiAgICAgIGdldCBjaGVjayAoKSB7XG4gICAgICAgIHJldHVybiBsaW5rLnR5cGUgPT09IENvQzdMaW5rLkxJTktfVFlQRS5DSEVDS1xuICAgICAgfSxcbiAgICAgIHNldCBjaGVjayAoeCkge1xuICAgICAgICBpZiAoeCA9PT0gdHJ1ZSkgbGluay50eXBlID0gQ29DN0xpbmsuTElOS19UWVBFLkNIRUNLXG4gICAgICB9LFxuICAgICAgZ2V0IHNhbmxvc3MgKCkge1xuICAgICAgICByZXR1cm4gbGluay50eXBlID09PSBDb0M3TGluay5MSU5LX1RZUEUuU0FOTE9TU1xuICAgICAgfSxcbiAgICAgIHNldCBzYW5sb3NzICh4KSB7XG4gICAgICAgIGlmICh4ID09PSB0cnVlKSBsaW5rLnR5cGUgPSBDb0M3TGluay5MSU5LX1RZUEUuU0FOTE9TU1xuICAgICAgfSxcbiAgICAgIGdldCBpdGVtICgpIHtcbiAgICAgICAgcmV0dXJuIGxpbmsudHlwZSA9PT0gQ29DN0xpbmsuTElOS19UWVBFLklURU1cbiAgICAgIH0sXG4gICAgICBzZXQgaXRlbSAoeCkge1xuICAgICAgICBpZiAoeCA9PT0gdHJ1ZSkgbGluay50eXBlID0gQ29DN0xpbmsuTElOS19UWVBFLklURU1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGUgKHVwZGF0ZURhdGEpIHtcbiAgICB0aGlzLl9saW5rRGF0YSA9IG1lcmdlT2JqZWN0KHRoaXMuX2xpbmtEYXRhLCB1cGRhdGVEYXRhKVxuICAgIGlmICh0aGlzLl9saW5rRGF0YS5mcm9tRGlyZWN0b3J5IHx8IHRoaXMuX2xpbmtEYXRhLmZyb21Db21wZW5kaXVtKSB7XG4gICAgICBhd2FpdCB0aGlzLmZldGNoSXRlbSgpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlRnJvbUxpbmsgKGxpbmtEYXRhKSB7XG4gICAgYXdhaXQgdGhpcy5zZXREYXRhKGxpbmtEYXRhKVxuICAgIGlmICh0aGlzLl9saW5rRGF0YS5mcm9tRGlyZWN0b3J5IHx8IHRoaXMuX2xpbmtEYXRhLmZyb21Db21wZW5kaXVtKSB7XG4gICAgICBhd2FpdCB0aGlzLmZldGNoSXRlbSgpXG4gICAgfVxuICB9XG5cbiAgZ2V0IGxpbmsgKCkge1xuICAgIGlmICghdGhpcy50eXBlKSByZXR1cm4gbnVsbFxuICAgIHN3aXRjaCAodGhpcy50eXBlKSB7XG4gICAgICBjYXNlIENvQzdMaW5rLkxJTktfVFlQRS5DSEVDSzoge1xuICAgICAgICAvLyBAY29jNy5jaGVja1t0eXBlOmNoYXJhYyxuYW1lOlNUUixkaWZmaWN1bHR5OissbW9kaWZpZXI6LTFde0hhcmQgU1RSIGNoZWNrKC0xKX1cbiAgICAgICAgaWYgKCF0aGlzLnR5cGUgfHwgIXRoaXMubmFtZSkgcmV0dXJuIG51bGxcbiAgICAgICAgbGV0IG9wdGlvbnMgPSBgJHt0aGlzLl9saW5rRGF0YS5ibGluZCA/ICdibGluZCwnIDogJyd9dHlwZToke1xuICAgICAgICAgIHRoaXMuY2hlY2tUeXBlXG4gICAgICAgIH0sbmFtZToke3RoaXMubmFtZX1gXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5fbGlua0RhdGEuZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBvcHRpb25zICs9IGAsZGlmZmljdWx0eToke3RoaXMuX2xpbmtEYXRhLmRpZmZpY3VsdHl9YFxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5fbGlua0RhdGEubW9kaWZpZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLG1vZGlmaWVyOiR7dGhpcy5fbGlua0RhdGEubW9kaWZpZXJ9YFxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9saW5rRGF0YS5pY29uKSBvcHRpb25zICs9IGAsaWNvbjoke3RoaXMuX2xpbmtEYXRhLmljb259YFxuXG4gICAgICAgIC8vIFRPRE86IENoZWNrIGlmIG5lZWRlZFxuICAgICAgICBpZiAodGhpcy5fbGlua0RhdGEuZnJvbUNvbXBlbmRpdW0pIHtcbiAgICAgICAgICBvcHRpb25zICs9IGAscGFjazoke3RoaXMuX2xpbmtEYXRhLnBhY2t9YFxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9saW5rRGF0YS5mcm9tQ29tcGVuZGl1bSB8fCB0aGlzLl9saW5rRGF0YS5mcm9tRGlyZWN0b3J5KSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLGlkOiR7dGhpcy5fbGlua0RhdGEuaWR9YFxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxpbmsgPSBgQGNvYzcuY2hlY2tbJHtvcHRpb25zfV1gXG4gICAgICAgIGlmICh0aGlzLl9saW5rRGF0YS5oYXNMYWJlbCAmJiB0aGlzLl9saW5rRGF0YS5sYWJlbCkge1xuICAgICAgICAgIGxpbmsgKz0gYHske3RoaXMuX2xpbmtEYXRhLmxhYmVsfX1gXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5uYW1lKSB7XG4gICAgICAgICAgbGluayArPSBgeyR7dGhpcy5uYW1lfX1gXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpbmtcbiAgICAgIH1cblxuICAgICAgY2FzZSBDb0M3TGluay5MSU5LX1RZUEUuU0FOTE9TUzoge1xuICAgICAgICAvLyBAY29jNy5zYW5sb3NzW3Nhbk1heDoxRDYsc2FuTWluOjEsZGlmZmljdWx0eTorKyxtb2RpZmllcjotMV17SGFyZCBTYW4gTG9zcyAoLTEpIDEvMUQ2fVxuICAgICAgICBpZiAoIXRoaXMuX2xpbmtEYXRhLnNhbk1heCB8fCAhdGhpcy5fbGlua0RhdGEuc2FuTWluKSByZXR1cm4gbnVsbFxuXG4gICAgICAgIC8vIFRPRE8gOiBCbGluZCBTQU4gdGVzdCA/P1xuICAgICAgICAvLyBsZXQgb3B0aW9ucyA9IGAke3RoaXMuX2xpbmtEYXRhLmJsaW5kPydibGluZCwnOicnfXNhbk1heDoke3RoaXMuX2xpbmtEYXRhLnNhbk1heH0sc2FuTWluOiR7dGhpcy5fbGlua0RhdGEuc2FuTWlufWA7XG4gICAgICAgIGxldCBvcHRpb25zID0gYHNhbk1heDoke3RoaXMuX2xpbmtEYXRhLnNhbk1heH0sc2FuTWluOiR7dGhpcy5fbGlua0RhdGEuc2FuTWlufWBcblxuICAgICAgICBpZiAodGhpcy5fbGlua0RhdGEuZGlmZmljdWx0eSkge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxkaWZmaWN1bHR5OiR7dGhpcy5fbGlua0RhdGEuZGlmZmljdWx0eX1gXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2xpbmtEYXRhLm1vZGlmaWVyKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLG1vZGlmaWVyOiR7dGhpcy5fbGlua0RhdGEubW9kaWZpZXJ9YFxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9saW5rRGF0YS5pY29uKSBvcHRpb25zICs9IGAsaWNvbjoke3RoaXMuX2xpbmtEYXRhLmljb259YFxuICAgICAgICBsZXQgbGluayA9IGBAY29jNy5zYW5sb3NzWyR7b3B0aW9uc31dYFxuICAgICAgICBpZiAodGhpcy5fbGlua0RhdGEuaGFzTGFiZWwpIGxpbmsgKz0gYHske3RoaXMuX2xpbmtEYXRhLmxhYmVsfX1gXG4gICAgICAgIHJldHVybiBsaW5rXG4gICAgICB9XG5cbiAgICAgIC8vIERvIHdlIG5lZWQgdGhhdCA/Pz9cbiAgICAgIGNhc2UgQ29DN0xpbmsuTElOS19UWVBFLklURU06IHtcbiAgICAgICAgLy8gQGNvYzcuaXRlbVt0eXBlOm9wdGlvbmFsLG5hbWU6U2hvdGd1bixkaWZmaWN1bHR5OissbW9kaWZpZXI6LTFde0hhcmQgU2hpdGd1biBjaGVjaygtMSl9XG4gICAgICAgIGlmICghdGhpcy50eXBlIHx8ICF0aGlzLm5hbWUpIHJldHVybiBudWxsXG4gICAgICAgIGxldCBvcHRpb25zID0gYG5hbWU6JHt0aGlzLm5hbWV9YFxuICAgICAgICBpZiAodGhpcy5fbGlua0RhdGEuaWNvbikgb3B0aW9ucyArPSBgLGljb246JHt0aGlzLl9saW5rRGF0YS5pY29ufWBcblxuICAgICAgICAvLyBUT0RPOiBDaGVjayBpZiBuZWVkZWRcbiAgICAgICAgaWYgKHRoaXMuX2xpbmtEYXRhLmZyb21Db21wZW5kaXVtKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLHBhY2s6JHt0aGlzLl9saW5rRGF0YS5wYWNrfWBcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fbGlua0RhdGEuZnJvbUNvbXBlbmRpdW0gfHwgdGhpcy5fbGlua0RhdGEuZnJvbURpcmVjdG9yeSkge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxpZDoke3RoaXMuX2xpbmtEYXRhLmlkfWBcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsaW5rID0gYEBjb2M3Lml0ZW1bJHtvcHRpb25zfV1gXG4gICAgICAgIGlmICh0aGlzLl9saW5rRGF0YS5oYXNMYWJlbCkgbGluayArPSBgeyR7dGhpcy5fbGlua0RhdGEubGFiZWx9fWBcbiAgICAgICAgcmV0dXJuIGxpbmtcbiAgICAgIH1cblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBjYW52YXMsIGRpZmZPYmplY3QsIGV4cGFuZE9iamVjdCwgRm9ybUFwcGxpY2F0aW9uLCBnYW1lLCBtZXJnZU9iamVjdCwgdWkgKi9cbmltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vYWN0b3JzL2FjdG9yLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4uL2NoYXQvaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3TGluayB9IGZyb20gJy4vbGluay5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3TGlua0NyZWF0aW9uRGlhbG9nIGV4dGVuZHMgRm9ybUFwcGxpY2F0aW9uIHtcbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGlkOiAnbGluay1jcmVhdGlvbicsXG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnXSxcbiAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JlYXRlTGluaycpLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogbnVsbCwgZHJvcFNlbGVjdG9yOiAnLmNvbnRhaW5lcicgfV0sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9saW5rLWNyZWF0aW9uLmh0bWwnLFxuICAgICAgY2xvc2VPblN1Ym1pdDogZmFsc2UsXG4gICAgICBzdWJtaXRPbkNsb3NlOiB0cnVlLFxuICAgICAgc3VibWl0T25DaGFuZ2U6IHRydWUsXG4gICAgICB3aWR0aDogNDAwLFxuICAgICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgICBjaG9pY2VzOiB7fSxcbiAgICAgIGFsbG93Q3VzdG9tOiB0cnVlLFxuICAgICAgbWluaW11bTogMCxcbiAgICAgIG1heGltdW06IG51bGxcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21MaW5rRGF0YSAobGlua0RhdGEsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGxpbmsgPSBhd2FpdCBDb0M3TGluay5mcm9tRGF0YShsaW5rRGF0YSlcbiAgICByZXR1cm4gbmV3IENvQzdMaW5rQ3JlYXRpb25EaWFsb2cobGluaywgb3B0aW9ucylcbiAgfVxuXG4gIHN0YXRpYyBnZXQgYXR0cmlidXRlcyAoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHtcbiAgICAgICAga2V5OiAnbGNrJyxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJyksXG4gICAgICAgIHNlbGVjdGVkOiBmYWxzZVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAga2V5OiAnc2FuJyxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHknKSxcbiAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlXG4gICAgICB9XG4gICAgXVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBkYXRhLmxpbmsgPSB0aGlzLmxpbmtcbiAgICBkYXRhLmRhdGEgPSB0aGlzLmxpbmsuZGF0YVxuICAgIGRhdGEuZnJvbUdhbWUgPVxuICAgICAgdGhpcy5saW5rLmlzLml0ZW0gfHxcbiAgICAgICh0aGlzLmxpbmsuaXMuY2hlY2sgJiYgdGhpcy5saW5rLmNoZWNrID09PSBDb0M3TGluay5DSEVDS19UWVBFLlNLSUxMKVxuICAgIGRhdGEuYXNrSWQgPVxuICAgICAgZGF0YS5mcm9tR2FtZSAmJlxuICAgICAgKHRoaXMubGluay5kYXRhLmZyb21EaXJlY3RvcnkgfHwgdGhpcy5saW5rLmRhdGEuZnJvbUNvbXBlbmRpdW0pXG4gICAgZGF0YS5hc2tQYWNrID0gZGF0YS5mcm9tR2FtZSAmJiB0aGlzLmxpbmsuZGF0YS5mcm9tQ29tcGVuZGl1bVxuICAgIGRhdGEuaXNTZXRGcm9tR2FtZSA9IGRhdGEuYXNrSWQgfHwgZGF0YS5hc2tQYWNrXG5cbiAgICAvLyBQcmVwYXJlIGRpZmZpY3VsdHkgc2VsZWN0IGRhdGFcbiAgICBkYXRhLmRpZmZpY3VsdHlMZXZlbCA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWxcbiAgICBkYXRhLnNlbGVjdGVkRGlmZmljdWx0eSA9IHtcbiAgICAgIHVua25vd246IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwudW5rbm93biA9PT0gdGhpcy5saW5rLmRhdGEuZGlmZmljdWx0eSxcbiAgICAgIHJlZ3VsYXI6IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA9PT0gdGhpcy5saW5rLmRhdGEuZGlmZmljdWx0eSxcbiAgICAgIGhhcmQ6IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZCA9PT0gdGhpcy5saW5rLmRhdGEuZGlmZmljdWx0eSxcbiAgICAgIGV4dHJlbWU6IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZSA9PT0gdGhpcy5saW5rLmRhdGEuZGlmZmljdWx0eSxcbiAgICAgIGNyaXRpY2FsOiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsID09PSB0aGlzLmxpbmsuZGF0YS5kaWZmaWN1bHR5XG4gICAgfVxuICAgIGlmICghdGhpcy5saW5rLmRhdGEuZGlmZmljdWx0eSkge1xuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RlZmF1bHRDaGVja0RpZmZpY3VsdHknKSA9PT0gJ3Vua25vd24nKSB7XG4gICAgICAgIGRhdGEuc2VsZWN0ZWREaWZmaWN1bHR5LnVua25vd24gPSB0cnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYXRhLnNlbGVjdGVkRGlmZmljdWx0eS5yZWd1bGFyID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFByZXBhcmUgbGluayB0eXBlXG4gICAgZGF0YS5saW5rVHlwZSA9IFtcbiAgICAgIHtcbiAgICAgICAga2V5OiBDb0M3TGluay5MSU5LX1RZUEUuQ0hFQ0ssXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hlY2snKSxcbiAgICAgICAgc2VsZWN0ZWQ6IHRoaXMubGluay5pcy5jaGVja1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAga2V5OiBDb0M3TGluay5MSU5LX1RZUEUuU0FOTE9TUyxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHlDaGVjaycpLFxuICAgICAgICBzZWxlY3RlZDogdGhpcy5saW5rLmlzLnNhbmxvc3NcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGtleTogQ29DN0xpbmsuTElOS19UWVBFLklURU0sXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSXRlbVdlYXBvbicpLFxuICAgICAgICBzZWxlY3RlZDogdGhpcy5saW5rLmlzLml0ZW1cbiAgICAgIH1cbiAgICBdXG5cbiAgICAvLyBQcmVwYXJlIGNoZWNrIHR5cGUgZGF0YVxuICAgIGRhdGEuY2hlY2tUeXBlID0gQ29DN0xpbmsuQ0hFQ0tfVFlQRVxuICAgIGRhdGEuc2VsZWN0ZWRDaGVja1R5cGUgPSB7XG4gICAgICBjaGFyYWN0ZXJpc3RpYzogQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEFSQUNURVJJU1RJQyA9PT0gdGhpcy5saW5rLmNoZWNrLFxuICAgICAgYXR0cmlidXRlOiBDb0M3TGluay5DSEVDS19UWVBFLkFUVFJJQlVURSA9PT0gdGhpcy5saW5rLmNoZWNrLFxuICAgICAgc2tpbGw6IENvQzdMaW5rLkNIRUNLX1RZUEUuU0tJTEwgPT09IHRoaXMubGluay5jaGVja1xuICAgIH1cbiAgICBpZiAoIXRoaXMubGluay5jaGVjaykgZGF0YS5zZWxlY3RlZENoZWNrVHlwZS5jaGFyYWN0ZXJpc3RpYyA9IHRydWVcblxuICAgIC8vIFByZXBhcmUgY2hhcmFjdGVyaXN0aWNzXG4gICAgZGF0YS5jaGFyYWN0ZXJpc3RpY3MgPSBDb0NBY3Rvci5nZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24oKVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5jaGFyYWN0ZXJpc3RpY3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChcbiAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljS2V5ID09PSBkYXRhLmNoYXJhY3RlcmlzdGljc1tpXS5rZXkgfHxcbiAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljS2V5ID09PSBkYXRhLmNoYXJhY3RlcmlzdGljc1tpXS5zaG9ydE5hbWUgfHxcbiAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljS2V5ID09PSBkYXRhLmNoYXJhY3RlcmlzdGljc1tpXS5sYWJlbFxuICAgICAgKSB7XG4gICAgICAgIGRhdGEuY2hhcmFjdGVyaXN0aWNzW2ldLnNlbGVjdGVkID0gdHJ1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YS5jaGFyYWN0ZXJpc3RpY3NbaV0uc2VsZWN0ZWQgPSBmYWxzZVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFByZXBhcmUgY2hhcmFjdGVyaXN0aWNzXG4gICAgZGF0YS5hdHRyaWJ1dGVzID0gQ29DN0xpbmtDcmVhdGlvbkRpYWxvZy5hdHRyaWJ1dGVzLm1hcChlID0+IHtcbiAgICAgIGUuc2VsZWN0ZWQgPSBkYXRhLmRhdGEuYXR0cmlidXRlS2V5ID09PSBlLmtleVxuICAgICAgcmV0dXJuIGVcbiAgICB9KVxuXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIGdldCBsaW5rICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3RcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgaHRtbC5maW5kKCcuc3VibWl0LWJ1dHRvbicpLmNsaWNrKHRoaXMuX29uQ2xpY2tTdWJtaXQuYmluZCh0aGlzKSlcblxuICAgIC8vIFJlcGxhY2VkIGluIG9wdGlvbnMgYnkgZHJhZ0Ryb3A6IFt7ZHJhZ1NlbGVjdG9yOiBudWxsLCBkcm9wU2VsZWN0b3I6ICcuY29udGFpbmVyJ31dXG4gICAgLy8gY29uc3QgZHJhZ0Ryb3AgPSBuZXcgRHJhZ0Ryb3Aoe1xuICAgIC8vICAgZHJvcFNlbGVjdG9yOiAnLmNvbnRhaW5lcicsXG4gICAgLy8gICBjYWxsYmFja3M6IHsgZHJvcDogdGhpcy5fb25Ecm9wLmJpbmQodGhpcykgfVxuICAgIC8vIH0pO1xuICAgIC8vIGNvbnN0IHRlc3QgPSBkcmFnRHJvcC5iaW5kKGh0bWxbMF0pO1xuXG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50KSB7XG4gICAgY29uc3QgZGF0YVN0cmluZyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJylcbiAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShkYXRhU3RyaW5nKVxuICAgIGlmIChkYXRhLkNvQzdUeXBlID09PSAnbGluaycpIHtcbiAgICAgIGF3YWl0IHRoaXMubGluay51cGRhdGVGcm9tTGluayhkYXRhKVxuICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGRhdGEuYWN0b3JJZCkge1xuICAgICAgICBjb25zdCBhY3RvcktleSA9XG4gICAgICAgICAgZGF0YS5zY2VuZUlkICYmIGRhdGEudG9rZW5JZFxuICAgICAgICAgICAgPyBgJHtkYXRhLnNjZW5lSWR9LiR7ZGF0YS50b2tlbklkfWBcbiAgICAgICAgICAgIDogZGF0YS5hY3RvcklkXG4gICAgICAgIGNvbnN0IGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoYWN0b3JLZXkpXG4gICAgICAgIGlmIChhY3Rvci5oYXNQbGF5ZXJPd25lcikge1xuICAgICAgICAgIHRoaXMubGluay5oYXNQbGF5ZXJPd25lciA9IHRydWVcbiAgICAgICAgICB0aGlzLmxpbmsuYWN0b3JLZXkgPSBhY3Rvci5hY3RvcktleVxuICAgICAgICB9IGVsc2UgdGhpcy5saW5rLmhhc1BsYXllck93bmVyID0gZmFsc2VcbiAgICAgIH1cbiAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdJdGVtJykge1xuICAgICAgICBpZiAoIWRhdGEuZGF0YSkge1xuICAgICAgICAgIGlmIChkYXRhLmlkKSB7XG4gICAgICAgICAgICB0aGlzLmxpbmsuX2xpbmtEYXRhLmlkID0gZGF0YS5pZFxuICAgICAgICAgICAgdGhpcy5saW5rLl9saW5rRGF0YS5mcm9tRGlyZWN0b3J5ID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZGF0YS5wYWNrKSB7XG4gICAgICAgICAgICB0aGlzLmxpbmsuX2xpbmtEYXRhLnBhY2sgPSBkYXRhLnBhY2tcbiAgICAgICAgICAgIHRoaXMubGluay5fbGlua0RhdGEuZnJvbURpcmVjdG9yeSA9IGZhbHNlXG4gICAgICAgICAgICB0aGlzLmxpbmsuX2xpbmtEYXRhLmZyb21Db21wZW5kaXVtID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBhd2FpdCB0aGlzLmxpbmsuZmV0Y2hJdGVtKClcbiAgICAgICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN3aXRjaCAoZGF0YS5kYXRhLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ3NraWxsJzpcbiAgICAgICAgICAgICAgdGhpcy5saW5rLl9saW5rRGF0YS5mcm9tRGlyZWN0b3J5ID0gZmFsc2VcbiAgICAgICAgICAgICAgdGhpcy5saW5rLl9saW5rRGF0YS5mcm9tQ29tcGVuZGl1bSA9IGZhbHNlXG4gICAgICAgICAgICAgIHRoaXMubGluay50eXBlID0gQ29DN0xpbmsuTElOS19UWVBFLkNIRUNLXG4gICAgICAgICAgICAgIHRoaXMubGluay5jaGVjayA9IENvQzdMaW5rLkNIRUNLX1RZUEUuU0tJTExcbiAgICAgICAgICAgICAgdGhpcy5saW5rLm5hbWUgPSBkYXRhLmRhdGEubmFtZVxuICAgICAgICAgICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnd2VhcG9uJzpcbiAgICAgICAgICAgICAgdGhpcy5saW5rLl9saW5rRGF0YS5mcm9tRGlyZWN0b3J5ID0gZmFsc2VcbiAgICAgICAgICAgICAgdGhpcy5saW5rLl9saW5rRGF0YS5mcm9tQ29tcGVuZGl1bSA9IGZhbHNlXG4gICAgICAgICAgICAgIHRoaXMubGluay50eXBlID0gQ29DN0xpbmsuTElOS19UWVBFLklURU1cbiAgICAgICAgICAgICAgdGhpcy5saW5rLm5hbWUgPSBkYXRhLmRhdGEubmFtZVxuICAgICAgICAgICAgICB0aGlzLnJlbmRlcih0cnVlKVxuXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9vbkNsaWNrU3VibWl0IChldmVudCkge1xuICAgIGNvbnN0IGFjdGlvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25cbiAgICBpZiAoIXRoaXMubGluay5saW5rKSB7XG4gICAgICAvLyB1aS5ub3RpZmljYXRpb25zLndhcm4oICdMaW5rIGlzIGludmFsaWQgIScpO1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICBjYXNlICdjbGlwYm9hcmQnOlxuICAgICAgICBDb0M3VXRpbGl0aWVzLmNvcHlUb0NsaXBib2FyZCh0aGlzLmxpbmsubGluaylcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAnY2hhdCc6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCBvcHRpb24gPSB7fVxuICAgICAgICAgIG9wdGlvbi5zcGVha2VyID0ge1xuICAgICAgICAgICAgYWxpYXM6IGdhbWUudXNlci5uYW1lXG4gICAgICAgICAgfVxuICAgICAgICAgIGNoYXRIZWxwZXIuY3JlYXRlTWVzc2FnZShcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1lc3NhZ2VDaGVja1JlcXVlc3RlZFdhaXQnLCB7XG4gICAgICAgICAgICAgIGNoZWNrOiB0aGlzLmxpbmsubGlua1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBvcHRpb25cbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAnd2hpc3Blci1vd25lcic6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCBvcHRpb24gPSB7fVxuICAgICAgICAgIG9wdGlvbi5zcGVha2VyID0ge1xuICAgICAgICAgICAgYWxpYXM6IGdhbWUudXNlci5uYW1lXG4gICAgICAgICAgfVxuICAgICAgICAgIG9wdGlvbi53aGlzcGVyID0gdGhpcy5saW5rLmFjdG9yLm93bmVyc1xuICAgICAgICAgIGNoYXRIZWxwZXIuY3JlYXRlTWVzc2FnZShcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1lc3NhZ2VUYXJnZXRDaGVja1JlcXVlc3RlZCcsIHtcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy5saW5rLmFjdG9yLm5hbWUsXG4gICAgICAgICAgICAgIGNoZWNrOiB0aGlzLmxpbmsubGlua1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBvcHRpb25cbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAnd2hpc3Blci1zZWxlY3RlZCc6XG4gICAgICAgIHtcbiAgICAgICAgICBpZiAoIWNhbnZhcy50b2tlbnMuY29udHJvbGxlZC5sZW5ndGgpIHtcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybignTm8gdG9rZW5zIHNlbGVjdGVkJylcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBvcHRpb24gPSB7fVxuICAgICAgICAgIG9wdGlvbi5zcGVha2VyID0ge1xuICAgICAgICAgICAgYWxpYXM6IGdhbWUudXNlci5uYW1lXG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBjYW52YXMudG9rZW5zLmNvbnRyb2xsZWQpIHtcbiAgICAgICAgICAgIGlmICh0LmFjdG9yLmhhc1BsYXllck93bmVyKSB7XG4gICAgICAgICAgICAgIG9wdGlvbi53aGlzcGVyID0gdC5hY3Rvci5vd25lcnNcbiAgICAgICAgICAgICAgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKFxuICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NZXNzYWdlVGFyZ2V0Q2hlY2tSZXF1ZXN0ZWQnLCB7XG4gICAgICAgICAgICAgICAgICBuYW1lOiB0LmFjdG9yLm5hbWUsXG4gICAgICAgICAgICAgICAgICBjaGVjazogdGhpcy5saW5rLmxpbmtcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBvcHRpb25cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cbiAgICB0aGlzLmNsb3NlKClcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGVcbiAgICogQSBzdWJjbGFzcyBvZiB0aGUgRm9ybUFwcGxpY2F0aW9uIG11c3QgaW1wbGVtZW50IHRoZSBfdXBkYXRlT2JqZWN0IG1ldGhvZC5cbiAgICovXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBncm91cCA9IHRhcmdldD8uY2xvc2VzdCgnLmZvcm0tZ3JvdXAnKVxuICAgIGNvbnN0IGdyb3VwTmFtZSA9IGdyb3VwPy5kYXRhc2V0Lmdyb3VwXG4gICAgaWYgKGdyb3VwTmFtZSA9PT0gJ29yaWdpbicpIHtcbiAgICAgIC8vIERlcHJlY2F0ZWRcbiAgICAgIGlmICh0YXJnZXQubmFtZSA9PT0gJ2Zyb21Db21wZW5kaXVtJykge1xuICAgICAgICB0aGlzLmxpbmsuX2xpbmtEYXRhLmZyb21Db21wZW5kaXVtID0gIXRoaXMubGluay5fbGlua0RhdGEuZnJvbUNvbXBlbmRpdW1cbiAgICAgICAgaWYgKHRoaXMubGluay5fbGlua0RhdGEuZnJvbUNvbXBlbmRpdW0pIHtcbiAgICAgICAgICB0aGlzLmxpbmsuX2xpbmtEYXRhLmZyb21EaXJlY3RvcnkgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodGFyZ2V0Lm5hbWUgPT09ICdmcm9tRGlyZWN0b3J5Jykge1xuICAgICAgICB0aGlzLmxpbmsuX2xpbmtEYXRhLmZyb21EaXJlY3RvcnkgPSAhdGhpcy5saW5rLl9saW5rRGF0YS5mcm9tRGlyZWN0b3J5XG4gICAgICAgIGlmICh0aGlzLmxpbmsuX2xpbmtEYXRhLmZyb21EaXJlY3RvcnkpIHtcbiAgICAgICAgICB0aGlzLmxpbmsuX2xpbmtEYXRhLmZyb21Db21wZW5kaXVtID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy5saW5rLmZldGNoSXRlbSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGZvcm1EYXRhRXggPSBleHBhbmRPYmplY3QoZm9ybURhdGEpXG4gICAgICBpZiAoZm9ybURhdGFFeC5jaGVjaykgZm9ybURhdGFFeC5jaGVjayA9IE51bWJlcihmb3JtRGF0YUV4LmNoZWNrKVxuICAgICAgaWYgKGZvcm1EYXRhRXguZGlmZmljdWx0eSkge1xuICAgICAgICBmb3JtRGF0YUV4LmRpZmZpY3VsdHkgPSBOdW1iZXIoZm9ybURhdGFFeC5kaWZmaWN1bHR5KVxuICAgICAgfVxuICAgICAgaWYgKGZvcm1EYXRhRXgudHlwZSkgZm9ybURhdGFFeC50eXBlID0gTnVtYmVyKGZvcm1EYXRhRXgudHlwZSlcbiAgICAgIGNvbnN0IGRpZmZEYXRhID0gZGlmZk9iamVjdCh0aGlzLmxpbmsuZGF0YSwgZm9ybURhdGFFeClcbiAgICAgIGF3YWl0IHRoaXMubGluay51cGRhdGUoZGlmZkRhdGEpXG4gICAgfVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICAvLyAvKiogQG92ZXJyaWRlICovXG4gIC8vIF9nZXRTdWJtaXREYXRhKHVwZGF0ZURhdGE9e30pIHtcbiAgLy8gICB1aS5ub3RpZmljYXRpb25zLmluZm8oYF9nZXRTdWJtaXREYXRhOiAke3VwZGF0ZURhdGF9YCk7XG5cbiAgLy8gICAvLyBDcmVhdGUgdGhlIGV4cGFuZGVkIHVwZGF0ZSBkYXRhIG9iamVjdFxuICAvLyAgIGNvbnN0IGZkID0gbmV3IEZvcm1EYXRhRXh0ZW5kZWQodGhpcy5mb3JtLCB7ZWRpdG9yczogdGhpcy5lZGl0b3JzfSk7XG4gIC8vICAgbGV0IGRhdGEgPSBmZC50b09iamVjdCgpO1xuICAvLyAgIGlmICggdXBkYXRlRGF0YSApIGRhdGEgPSBtZXJnZU9iamVjdChkYXRhLCB1cGRhdGVEYXRhKTtcbiAgLy8gICBlbHNlIGRhdGEgPSBleHBhbmRPYmplY3QoZGF0YSk7XG5cbiAgLy8gICAvLyBIYW5kbGUgRGFtYWdlIGFycmF5XG4gIC8vICAgY29uc3QgZGFtYWdlID0gZGF0YS5kYXRhPy5kYW1hZ2U7XG4gIC8vICAgaWYgKCBkYW1hZ2UgKSBkYW1hZ2UucGFydHMgPSBPYmplY3QudmFsdWVzKGRhbWFnZT8ucGFydHMgfHwge30pLm1hcChkID0+IFtkWzBdIHx8ICcnLCBkWzFdIHx8ICcnXSk7XG5cbiAgLy8gICAvLyBSZXR1cm4gdGhlIGZsYXR0ZW5lZCBzdWJtaXNzaW9uIGRhdGFcbiAgLy8gICByZXR1cm4gZmxhdHRlbk9iamVjdChkYXRhKTtcbiAgLy8gfVxuXG4gIC8vIC8qKiBAb3ZlcnJpZGUgKi9cbiAgLy8gX29uU3VibWl0XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoKSB7XG4gICAgY29uc3QgbGluayA9IG5ldyBDb0M3TGluaygpXG4gICAgbmV3IENvQzdMaW5rQ3JlYXRpb25EaWFsb2cobGluaywge30pLnJlbmRlcih0cnVlKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgY2FudmFzLCBDaGF0TWVzc2FnZSwgZHVwbGljYXRlLCBnYW1lLCBOb2RlRmlsdGVyLCBUZXh0RWRpdG9yLCB1aSAqL1xuXG4vKipcbiAqIEFsbG93IGZvciBwYXJzaW5nIG9mIENvQzcgZWxlbWVudHMgaW4gY2hhdCBtZXNzYWdlIGFuZCBzaGVldHMuXG4gKiBGb3JtYXQgaXMgOlxuICogQGNvYzcuVFlQRV9PRl9SRVFVRVNUW09QVElPTlNde0RJU1BMQVlFRF9OQU1FfVxuICogVFlQRV9PRl9SRVFVRVNUIDpcbiAqIC0gc2FubG9zcyA6IHRyaWdnZXIgYSBzYW4gY2hlY2ssIHVwb24gZmFpbHVyZSB3aWxsIHByb3Bvc2UgdG8gZGVkdWN0IHRoZSBjb3JyZXNwb25kaW5nIFNBTi5cbiAqIC0gY2hlY2sgOiB0cmlnZ2VyIGEgY2hlY2sgZGVwZW5kaW5nIG9uIHRoZSBvcHRpb25zLlxuICpcbiAqIE9QVElPTlM6IFtdID0gb3B0aW9uYWxcbiAqIHNhbmxvc3M6XG4gKiAgIHNhbk1heDogbWF4IFNBTiBsb3NzXG4gKiAgIHNhbk1pbjogbWluIFNBTiBsb3NzXG4gKiBjaGVjazpcbiAqICAgdHlwZTogdHlwZSBvZiBjaGVjayAoY2hhcmFjdGVyaXN0aWMsIHNraWxsLCBhdHRyaWIpLlxuICogICBuYW1lOiBuYW1lIG9mIHRoZSBza2lsbC9jaGFyYWN0ZXJpc3RpYy5cbiAqICAgW2RpZmZpY3VsdHldOiA/IChibGluZCksIDAgKHJlZ3VsYXIpLCArIChoYXJkKSwgKysgKGV4dHJlbWUpLCArKysgKGNyaXRpY2FsKS5cbiAqICAgW21vZGlmaWVyXTogLXggKHggcGVuYWx0eSBkaWNlKSwgK3ggKHggYm9udXMgZGljZSksIDAgKG5vIG1vZGlmaWVyKS5cbiAqICAgW2ljb25dOiBpY29uIHR1IHVzZSAoZm9udCBhd3NvbWUpLlxuICogICBbYmxpbmRdOiB3aWxsIHRyaWdnZXIgYSBibGluZCByb2xsLlxuICpcbiAqIFtESVNQTEFZRURfTkFNRTogbmFtZSB0byBkaXNwbGF5Ll1cbiAqXG4gKi9cblxuaW1wb3J0IHsgU2FuQ2hlY2tDYXJkIH0gZnJvbSAnLi4vY2hhdC9jYXJkcy9zYW4tY2hlY2suanMnXG5pbXBvcnQgeyBpc0N0cmxLZXksIGNoYXRIZWxwZXIgfSBmcm9tICcuLi9jaGF0L2hlbHBlci5qcydcblxuLy8gaW1wb3J0IHsgQ29DN1NhbkNoZWNrIH0gZnJvbSAnLi4vY2hhdC9zYW5jaGVjay5qcyc7XG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBDb0M3TGlua0NyZWF0aW9uRGlhbG9nIH0gZnJvbSAnLi9saW5rLWNyZWF0aW9uLWRpYWxvZy5qcydcbmltcG9ydCB7IENvQzdMaW5rIH0gZnJvbSAnLi9saW5rLmpzJ1xuaW1wb3J0IHsgUm9sbERpYWxvZyB9IGZyb20gJy4vcm9sbC1kaWFsb2cuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3UGFyc2VyIHtcbiAgc3RhdGljIGFzeW5jIG9uRWRpdG9yRHJvcCAoZXZlbnQsIGVkaXRvcikge1xuICAgIC8vIFRPRE86IE1BTkFHRSBGTEFUIE1PRElGSUVSIFRIRVJFXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgLy8gY2hlY2sga2V5IHByZXNzZWQgKENUUkwgPylcbiAgICAvLyBpZiBDVFJMIGNoZWNrIGlmIGl0ZW0gaXMgc2tpbGwvd2VhcG9uXG4gICAgLy8gaWYgaXRlbSBmcm9tIGdhbWUgb3IgcGFjayBhZGQgcmVmIHRvIHRoZSBsaW5rICFcbiAgICAvLyBjb25zdCBkYXRhU3RyaW5nID0gZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKTtcbiAgICBjb25zdCBkYXRhU3RyaW5nID0gZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKVxuICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGRhdGFTdHJpbmcpXG4gICAgaWYgKGRhdGEubGlua1R5cGUgPT09ICdjb2M3LWxpbmsnKSB7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgaWYgKFxuICAgICAgICAhZXZlbnQuc2hpZnRLZXkgJiZcbiAgICAgICAgKHR5cGVvZiBkYXRhLmRpZmZpY3VsdHkgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgdHlwZW9mIGRhdGEubW9kaWZpZXIgPT09ICd1bmRlZmluZWQnKVxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IHVzYWdlID0gYXdhaXQgUm9sbERpYWxvZy5jcmVhdGUoe1xuICAgICAgICAgIGRpc2FibGVGbGF0RGljZU1vZGlmaWVyOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICAgIGlmICh1c2FnZSkge1xuICAgICAgICAgIGRhdGEubW9kaWZpZXIgPSB1c2FnZS5nZXQoJ2JvbnVzRGljZScpXG4gICAgICAgICAgZGF0YS5kaWZmaWN1bHR5ID0gdXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JylcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJykgPT09ICdibGluZHJvbGwnKSB7XG4gICAgICAgIGRhdGEuYmxpbmQgPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGxpbmsgPSBDb0M3UGFyc2VyLmNyZWF0ZUNvQzdMaW5rKGRhdGEpXG5cbiAgICAgIGlmIChsaW5rKSB7XG4gICAgICAgIGVkaXRvci5pbnNlcnRDb250ZW50KGxpbmspXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc0N0cmxLZXkoZXZlbnQpKSB7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgICBpZiAoZGF0YS50eXBlICE9PSAnSXRlbScpIHJldHVyblxuXG4gICAgICBsZXQgaXRlbVxuICAgICAgY29uc3QgbGlua0RhdGEgPSB7fVxuXG4gICAgICBpZiAoZGF0YS5wYWNrKSB7XG4gICAgICAgIGNvbnN0IHBhY2sgPSBnYW1lLnBhY2tzLmdldChkYXRhLnBhY2spXG4gICAgICAgIGlmIChwYWNrLm1ldGFkYXRhLmVudGl0eSAhPT0gJ0l0ZW0nKSByZXR1cm5cbiAgICAgICAgaXRlbSA9IGF3YWl0IHBhY2suZ2V0RG9jdW1lbnQoZGF0YS5pZClcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS5kYXRhKSB7XG4gICAgICAgIGl0ZW0gPSBkYXRhLmRhdGFcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGl0ZW0gPSBnYW1lLml0ZW1zLmdldChkYXRhLmlkKVxuICAgICAgfVxuXG4gICAgICBpZiAoIWl0ZW0pIHJldHVyblxuXG4gICAgICBsaW5rRGF0YS5uYW1lID0gaXRlbS5uYW1lXG4gICAgICBpZiAoZGF0YS5wYWNrKSBsaW5rRGF0YS5wYWNrID0gZGF0YS5wYWNrXG4gICAgICBpZiAoZGF0YS5pZCkgbGlua0RhdGEuaWQgPSBkYXRhLmlkXG5cbiAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgaWYgKCFldmVudC5zaGlmdEtleSkge1xuICAgICAgICAgIGNvbnN0IHVzYWdlID0gYXdhaXQgUm9sbERpYWxvZy5jcmVhdGUoe1xuICAgICAgICAgICAgZGlzYWJsZUZsYXREaWNlTW9kaWZpZXI6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIGlmICh1c2FnZSkge1xuICAgICAgICAgICAgbGlua0RhdGEubW9kaWZpZXIgPSB1c2FnZS5nZXQoJ2JvbnVzRGljZScpXG4gICAgICAgICAgICBsaW5rRGF0YS5kaWZmaWN1bHR5ID0gdXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGlua0RhdGEuY2hlY2sgPSAnY2hlY2snXG4gICAgICAgIGxpbmtEYXRhLnR5cGUgPSAnc2tpbGwnXG4gICAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpID09PSAnYmxpbmRyb2xsJykge1xuICAgICAgICAgIGxpbmtEYXRhLmJsaW5kID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ3dlYXBvbicpIHtcbiAgICAgICAgbGlua0RhdGEuY2hlY2sgPSAnaXRlbSdcbiAgICAgICAgbGlua0RhdGEudHlwZSA9ICd3ZWFwb24nXG4gICAgICB9IGVsc2UgcmV0dXJuXG5cbiAgICAgIGNvbnN0IGxpbmsgPSBDb0M3UGFyc2VyLmNyZWF0ZUNvQzdMaW5rKGxpbmtEYXRhKVxuICAgICAgaWYgKGxpbmspIHtcbiAgICAgICAgZWRpdG9yLmluc2VydENvbnRlbnQobGluaylcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgUGFyc2VNZXNzYWdlIChcbiAgICBtZXNzYWdlLFxuICAgIGh0bWwsXG4gICAgZGF0YSAvKiBjaGF0TWVzc2FnZSwgZGF0YS8qLCBvcHRpb24sIHVzZXIgKi9cbiAgKSB7XG4gICAgLy8gQGNvYzcuc2FubG9zc1tzYW5NYXg6MUQ2LHNhbk1pbjoxLGRpZmZpY3VsdHk6KyssbW9kaWZpZXI6LTFde0hhcmQgU2FuIExvc3MgKC0xKSAxLzFENn1cbiAgICAvLyBAY29jNy5jaGVja1t0eXBlOmNoYXJhYyxuYW1lOlNUUixkaWZmaWN1bHR5OissbW9kaWZpZXI6LTFde0hhcmQgU1RSIGNoZWNrKC0xKX1cbiAgICAvLyBAY29jNy5jaGVja1t0eXBlOmF0dHJpYixuYW1lOmxjayxkaWZmaWN1bHR5OissbW9kaWZpZXI6LTFde0hhcmQgbHVjayBjaGVjaygtMSl9XG4gICAgLy8gQGNvYzcuY2hlY2tbdHlwZTpza2lsbCxuYW1lOmFudGhyb3BvbG9neSxkaWZmaWN1bHR5OissbW9kaWZpZXI6LTFde0hhcmQgQW50aHJvcG9sb2d5IGNoZWNrKC0xKX1cbiAgICAvLyBAY29jNy5jaGVja1t0eXBlOnNraWxsLGljb246ZmFzIGZhLWFycm93LWFsdC1jaXJjbGUtcmlnaHQsbmFtZTphbnRocm9wb2xvZ3ksZGlmZmljdWx0eTorLG1vZGlmaWVyOi0xXXtIYXJkIEFudGhyb3BvbG9neSBjaGVjaygtMSl9XG4gICAgLy8gQGNvYzcuaXRlbVtuYW1lOlNob3RndW4saWNvbjpmYXMgZmEtYnVsbHNleWUsZGlmZmljdWx0eTorLG1vZGlmaWVyOi0xXXtVc2Ugc2hvdGd1bn1cbiAgICAvLyBbVEJJXUBjb2M3LmRhbWFnZVtmb3JtdWxhOjFENl17RGFtYWdlIDFENn1cbiAgICAvLyBbVEJJXUBjb2M3LnJvbGxbdGhyZXNob2xkOjUwXXtTaW1wbGUgcm9sbH1cblxuICAgIGlmICghbWVzc2FnZS5pc0NvbnRlbnRWaXNpYmxlKSByZXR1cm5cblxuICAgIGlmIChkYXRhLm1lc3NhZ2UuY29udGVudC50b0xvY2FsZUxvd2VyQ2FzZSgpLmluY2x1ZGVzKCdAY29jNycpKSB7XG4gICAgICBjb25zdCBwYXJzZWRDb250ZW50ID0gQ29DN1BhcnNlci5lbnJpY2hIVE1MKGRhdGEubWVzc2FnZS5jb250ZW50KVxuICAgICAgaHRtbC5maW5kKCcubWVzc2FnZS1jb250ZW50JykuaHRtbChwYXJzZWRDb250ZW50KVxuICAgICAgLy8gY2hhdE1lc3NhZ2UuZGF0YS5jb250ZW50ID0gcGFyc2VkQ29udGVudDtcbiAgICAgIGRhdGEubWVzc2FnZS5jb250ZW50ID0gcGFyc2VkQ29udGVudFxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZSAvLyBhbGxvdyBtZXNzYWdlIHRvIGJlIHB1Ymxpc2hlZCAhXG4gIH1cblxuICBzdGF0aWMgY3JlYXRlQ29DN0xpbmsgKGRhdGEpIHtcbiAgICBpZiAoIWRhdGEuY2hlY2spIHJldHVyblxuICAgIHN3aXRjaCAoZGF0YS5jaGVjay50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICBjYXNlICdjaGVjayc6IHtcbiAgICAgICAgLy8gQGNvYzcuY2hlY2tbdHlwZTpjaGFyYWMsbmFtZTpTVFIsZGlmZmljdWx0eTorLG1vZGlmaWVyOi0xXXtIYXJkIFNUUiBjaGVjaygtMSl9XG4gICAgICAgIGlmICghZGF0YS50eXBlIHx8ICFkYXRhLm5hbWUpIHJldHVyblxuICAgICAgICBsZXQgb3B0aW9ucyA9IGAke2RhdGEuYmxpbmQgPyAnYmxpbmQsJyA6ICcnfXR5cGU6JHtkYXRhLnR5cGV9LG5hbWU6JHtcbiAgICAgICAgICBkYXRhLm5hbWVcbiAgICAgICAgfWBcbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhLmRpZmZpY3VsdHkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLGRpZmZpY3VsdHk6JHtkYXRhLmRpZmZpY3VsdHl9YFxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgZGF0YS5tb2RpZmllciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBvcHRpb25zICs9IGAsbW9kaWZpZXI6JHtkYXRhLm1vZGlmaWVyfWBcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YS5pY29uKSBvcHRpb25zICs9IGAsaWNvbjoke2RhdGEuaWNvbn1gXG4gICAgICAgIGlmIChkYXRhLnBhY2spIG9wdGlvbnMgKz0gYCxwYWNrOiR7ZGF0YS5wYWNrfWBcbiAgICAgICAgaWYgKGRhdGEuaWQpIG9wdGlvbnMgKz0gYCxpZDoke2RhdGEuaWR9YFxuICAgICAgICBsZXQgbGluayA9IGBAY29jNy5jaGVja1ske29wdGlvbnN9XWBcbiAgICAgICAgaWYgKGRhdGEuZGlzcGxheU5hbWUpIGxpbmsgKz0gYHske2RhdGEuZGlzcGxheU5hbWV9fWBcbiAgICAgICAgcmV0dXJuIGxpbmtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnc2FubG9zcyc6IHtcbiAgICAgICAgLy8gQGNvYzcuc2FubG9zc1tzYW5NYXg6MUQ2LHNhbk1pbjoxLGRpZmZpY3VsdHk6KyssbW9kaWZpZXI6LTFde0hhcmQgU2FuIExvc3MgKC0xKSAxLzFENn1cbiAgICAgICAgaWYgKCFkYXRhLnNhbk1heCB8fCAhZGF0YS5zYW5NaW4pIHJldHVyblxuICAgICAgICBsZXQgb3B0aW9ucyA9IGAke2RhdGEuYmxpbmQgPyAnYmxpbmQsJyA6ICcnfXNhbk1heDoke1xuICAgICAgICAgIGRhdGEuc2FuTWF4XG4gICAgICAgIH0sc2FuTWluOiR7ZGF0YS5zYW5NaW59YFxuICAgICAgICBpZiAoZGF0YS5kaWZmaWN1bHR5KSBvcHRpb25zICs9IGAsZGlmZmljdWx0eToke2RhdGEuZGlmZmljdWx0eX1gXG4gICAgICAgIGlmIChkYXRhLm1vZGlmaWVyKSBvcHRpb25zICs9IGAsbW9kaWZpZXI6JHtkYXRhLm1vZGlmaWVyfWBcbiAgICAgICAgaWYgKGRhdGEuaWNvbikgb3B0aW9ucyArPSBgLGljb246JHtkYXRhLmljb259YFxuICAgICAgICBsZXQgbGluayA9IGBAY29jNy5zYW5sb3NzWyR7b3B0aW9uc31dYFxuICAgICAgICBpZiAoZGF0YS5kaXNwbGF5TmFtZSkgbGluayArPSBgeyR7ZGF0YS5kaXNwbGF5TmFtZX19YFxuICAgICAgICByZXR1cm4gbGlua1xuICAgICAgfVxuXG4gICAgICAvLyBEbyB3ZSBuZWVkIHRoYXQgPz8/XG4gICAgICBjYXNlICdpdGVtJzoge1xuICAgICAgICAvLyBAY29jNy5pdGVtW3R5cGU6b3B0aW9uYWwsbmFtZTpTaG90Z3VuLGRpZmZpY3VsdHk6Kyxtb2RpZmllcjotMV17SGFyZCBTaGl0Z3VuIGNoZWNrKC0xKX1cbiAgICAgICAgaWYgKCFkYXRhLnR5cGUgfHwgIWRhdGEubmFtZSkgcmV0dXJuXG4gICAgICAgIGxldCBvcHRpb25zID0gYCR7ZGF0YS5ibGluZCA/ICdibGluZCwnIDogJyd9dHlwZToke2RhdGEudHlwZX0sbmFtZToke1xuICAgICAgICAgIGRhdGEubmFtZVxuICAgICAgICB9YFxuICAgICAgICAvLyBpZiggZGF0YS5kaWZmaWN1bHR5KSBvcHRpb25zICs9IGAsZGlmZmljdWx0eToke2RhdGEuZGlmZmljdWx0eX1gO1xuICAgICAgICAvLyBpZiggZGF0YS5tb2RpZmllcikgb3B0aW9ucyArPSBgLG1vZGlmaWVyOiR7ZGF0YS5tb2RpZmllcn1gO1xuICAgICAgICBpZiAoZGF0YS5pY29uKSBvcHRpb25zICs9IGAsaWNvbjoke2RhdGEuaWNvbn1gXG4gICAgICAgIGlmIChkYXRhLnBhY2spIG9wdGlvbnMgKz0gYCxwYWNrOiR7ZGF0YS5wYWNrfWBcbiAgICAgICAgaWYgKGRhdGEuaWQpIG9wdGlvbnMgKz0gYCxpZDoke2RhdGEuaWR9YFxuICAgICAgICBsZXQgbGluayA9IGBAY29jNy5pdGVtWyR7b3B0aW9uc31dYFxuICAgICAgICBpZiAoZGF0YS5kaXNwbGF5TmFtZSkgbGluayArPSBgeyR7ZGF0YS5kaXNwbGF5TmFtZX19YFxuICAgICAgICByZXR1cm4gbGlua1xuICAgICAgfVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBQYXJzZVNoZWV0Q29udGVudCAoYXBwLCBodG1sKSB7XG4gICAgLy8gQ2hlY2sgaW4gYWxsIGVkaXRvcnMgY29udGVudCBmb3IgYSBsaW5rLlxuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBodG1sLmZpbmQoJ2Rpdi5lZGl0b3ItY29udGVudCA+ICosIHAnKSkge1xuICAgICAgaWYgKGVsZW1lbnQub3V0ZXJIVE1MLnRvTG9jYWxlTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ0Bjb2M3JykpIHtcbiAgICAgICAgZWxlbWVudC5vdXRlckhUTUwgPSBDb0M3UGFyc2VyLmVucmljaEhUTUwoZWxlbWVudC5vdXRlckhUTUwpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQmluZCB0aGUgY2xpY2sgdG8gZXhlY3V0ZSB0aGUgY2hlY2suXG4gICAgLy8gaHRtbC5vbignY2xpY2snLCAnYS5jb2M3LWxpbmsnLCBDb0M3UGFyc2VyLl9vbkNoZWNrLmJpbmQodGhpcykpO1xuICAgIGh0bWxcbiAgICAgIC5maW5kKCdhLmNvYzctbGluaycpXG4gICAgICAub24oJ2NsaWNrJywgYXN5bmMgZXZlbnQgPT4gYXdhaXQgQ29DN1BhcnNlci5fb25DaGVjayhldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJ2EuY29jNy1saW5rJylcbiAgICAgIC5vbignZHJhZ3N0YXJ0JywgZXZlbnQgPT4gQ29DN1BhcnNlci5fb25EcmFnQ29DN0xpbmsoZXZlbnQpKVxuICB9XG5cbiAgc3RhdGljIF9nZXRUZXh0Tm9kZXMgKHBhcmVudCkge1xuICAgIGNvbnN0IHRleHQgPSBbXVxuICAgIGNvbnN0IHdhbGsgPSBkb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyKFxuICAgICAgcGFyZW50LFxuICAgICAgTm9kZUZpbHRlci5TSE9XX1RFWFQsXG4gICAgICBudWxsLFxuICAgICAgZmFsc2VcbiAgICApXG4gICAgd2hpbGUgKHdhbGsubmV4dE5vZGUoKSkgdGV4dC5wdXNoKHdhbGsuY3VycmVudE5vZGUpXG4gICAgcmV0dXJuIHRleHRcbiAgfVxuXG4gIHN0YXRpYyBlbnJpY2hIVE1MIChjb250ZW50KSB7XG4gICAgY29uc3QgaHRtbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgaHRtbC5pbm5lckhUTUwgPSBTdHJpbmcoY29udGVudClcblxuICAgIGxldCB0ZXh0ID0gW11cblxuICAgIHRleHQgPSBUZXh0RWRpdG9yLl9nZXRUZXh0Tm9kZXMoaHRtbClcbiAgICAvLyBBbHRlcm5hdGl2ZSByZWdleCA6ICdAKGNvYzcpLihbXlxcW10rKVxcWyhbXlxcXV0rKVxcXSg/OnsoW159XSspfSk/J1xuICAgIGNvbnN0IHJneCA9IG5ldyBSZWdFeHAoXG4gICAgICAnQChjb2M3KS4oLio/KVxcXFxbKFteXFxcXF1dKylcXFxcXScgKyAnKD86eyhbXn1dKyl9KT8nLFxuICAgICAgJ2dpJ1xuICAgIClcbiAgICBUZXh0RWRpdG9yLl9yZXBsYWNlVGV4dENvbnRlbnQodGV4dCwgcmd4LCBDb0M3UGFyc2VyLl9jcmVhdGVMaW5rKVxuICAgIHJldHVybiBodG1sLmlubmVySFRNTFxuICB9XG5cbiAgc3RhdGljIGJpbmRFdmVudHNIYW5kbGVyIChodG1sKSB7XG4gICAgaHRtbFxuICAgICAgLmZpbmQoJ2EuY29jNy1saW5rJylcbiAgICAgIC5vbignY2xpY2snLCBhc3luYyBldmVudCA9PiBhd2FpdCBDb0M3UGFyc2VyLl9vbkNoZWNrKGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnYS5jb2M3LWxpbmsnKVxuICAgICAgLm9uKCdkcmFnc3RhcnQnLCBldmVudCA9PiBDb0M3UGFyc2VyLl9vbkRyYWdDb0M3TGluayhldmVudCkpXG4gIH1cblxuICBzdGF0aWMgX29uRHJhZ0NvQzdMaW5rIChldmVudCkge1xuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgaSA9IGEucXVlcnlTZWxlY3RvcignaS5saW5rLWljb24nKVxuICAgIGNvbnN0IGRhdGEgPSBkdXBsaWNhdGUoYS5kYXRhc2V0KVxuICAgIGRhdGEubGlua1R5cGUgPSAnY29jNy1saW5rJ1xuICAgIGRhdGEuQ29DN1R5cGUgPSAnbGluaydcbiAgICBkYXRhLmljb24gPSBudWxsXG5cbiAgICBpZiAoXG4gICAgICBpLmRhdGFzZXQgJiZcbiAgICAgIGkuZGF0YXNldC5saW5rSWNvbiAmJlxuICAgICAgaS5kYXRhc2V0LmxpbmtJY29uICE9PSAnZmFzIGZhLWRpY2UnXG4gICAgKSB7XG4gICAgICBkYXRhLmljb24gPSBpLmRhdGFzZXQubGlua0ljb25cbiAgICB9XG4gICAgZGF0YS5kaXNwbGF5TmFtZSA9IGEuZGF0YXNldC5kaXNwbGF5TmFtZSA/IGEuaW5uZXJUZXh0IDogbnVsbFxuICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkYXRhKSlcbiAgfVxuXG4gIHN0YXRpYyBfY3JlYXRlTGluayAobWF0Y2gsIHRhZywgdHlwZSwgb3B0aW9ucywgbmFtZSkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBjbHM6IFsnY29jNy1saW5rJ10sXG4gICAgICBkYXRhc2V0OiB7IGNoZWNrOiB0eXBlIH0sXG4gICAgICBpY29uOiAnZmFzIGZhLWRpY2UnLFxuICAgICAgYmxpbmQ6IGZhbHNlLFxuICAgICAgbmFtZTogbmFtZVxuICAgIH1cblxuICAgIGNvbnN0IG1hdGNoZXMgPSBvcHRpb25zLm1hdGNoQWxsKC9bXixdKy9naSlcbiAgICBmb3IgKGNvbnN0IG1hdGNoIG9mIEFycmF5LmZyb20obWF0Y2hlcykpIHtcbiAgICAgIGxldCBba2V5LCB2YWx1ZV0gPSBtYXRjaFswXS5zcGxpdCgnOicpXG4gICAgICBpZiAoa2V5ID09PSAnaWNvbicpIGRhdGEuaWNvbiA9IHZhbHVlXG4gICAgICBpZiAoa2V5ID09PSAnYmxpbmQnICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdmFsdWUgPSB0cnVlXG4gICAgICAgIGRhdGEuYmxpbmQgPSB0cnVlICYmIFsnY2hlY2snXS5pbmNsdWRlcyh0eXBlLnRvTG93ZXJDYXNlKCkpXG4gICAgICB9XG4gICAgICBkYXRhLmRhdGFzZXRba2V5XSA9IHZhbHVlXG4gICAgfVxuXG4gICAgbGV0IHRpdGxlXG4gICAgY29uc3QgZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5U3RyaW5nKGRhdGEuZGF0YXNldC5kaWZmaWN1bHR5KVxuXG4gICAgc3dpdGNoICh0eXBlLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIGNhc2UgJ2NoZWNrJzoge1xuICAgICAgICBsZXQgaHVtYW5OYW1lID0gZGF0YS5kYXRhc2V0Lm5hbWVcbiAgICAgICAgaWYgKFxuICAgICAgICAgIFsnYXR0cmlidXRlcycsICdhdHRyaWJ1dGUnLCAnYXR0cmliJywgJ2F0dHJpYnMnXS5pbmNsdWRlcyhcbiAgICAgICAgICAgIGRhdGEuZGF0YXNldC50eXBlPy50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoZGF0YS5kYXRhc2V0Lm5hbWUgPT09ICdsY2snKSB7XG4gICAgICAgICAgICBodW1hbk5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChkYXRhLmRhdGFzZXQubmFtZSA9PT0gJ3NhbicpIHtcbiAgICAgICAgICAgIGh1bWFuTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgWydjaGFyYWMnLCAnY2hhcicsICdjaGFyYWN0ZXJpc3RpYycsICdjaGFyYWN0ZXJpc3RpY3MnXS5pbmNsdWRlcyhcbiAgICAgICAgICAgIGRhdGEuZGF0YXNldC50eXBlPy50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICBodW1hbk5hbWUgPSBDb0M3VXRpbGl0aWVzLmdldENoYXJhY3RlcmlzdGljTmFtZXMoZGF0YS5kYXRhc2V0Lm5hbWUpXG4gICAgICAgICAgICA/LmxhYmVsXG4gICAgICAgIH1cbiAgICAgICAgdGl0bGUgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgIGBDb0M3LkxpbmtDaGVjayR7IWRhdGEuZGF0YXNldC5kaWZmaWN1bHR5ID8gJycgOiAnRGlmZid9JHtcbiAgICAgICAgICAgICFkYXRhLmRhdGFzZXQubW9kaWZpZXIgPyAnJyA6ICdNb2RpZidcbiAgICAgICAgICB9YCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkaWZmaWN1bHR5OiBkaWZmaWN1bHR5LFxuICAgICAgICAgICAgbW9kaWZpZXI6IGRhdGEuZGF0YXNldC5tb2RpZmllcixcbiAgICAgICAgICAgIG5hbWU6IGh1bWFuTmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnc2FubG9zcyc6XG4gICAgICAgIHRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICBgQ29DNy5MaW5rU2FuTG9zcyR7IWRhdGEuZGF0YXNldC5kaWZmaWN1bHR5ID8gJycgOiAnRGlmZid9JHtcbiAgICAgICAgICAgICFkYXRhLmRhdGFzZXQubW9kaWZpZXIgPyAnJyA6ICdNb2RpZidcbiAgICAgICAgICB9YCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkaWZmaWN1bHR5OiBkaWZmaWN1bHR5LFxuICAgICAgICAgICAgbW9kaWZpZXI6IGRhdGEuZGF0YXNldC5tb2RpZmllcixcbiAgICAgICAgICAgIHNhbk1pbjogZGF0YS5kYXRhc2V0LnNhbk1pbixcbiAgICAgICAgICAgIHNhbk1heDogZGF0YS5kYXRhc2V0LnNhbk1heFxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnaXRlbSc6XG4gICAgICAgIHRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICBgQ29DNy5MaW5rSXRlbSR7IWRhdGEuZGF0YXNldC5kaWZmaWN1bHR5ID8gJycgOiAnRGlmZid9JHtcbiAgICAgICAgICAgICFkYXRhLmRhdGFzZXQubW9kaWZpZXIgPyAnJyA6ICdNb2RpZidcbiAgICAgICAgICB9YCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkaWZmaWN1bHR5OiBkaWZmaWN1bHR5LFxuICAgICAgICAgICAgbW9kaWZpZXI6IGRhdGEuZGF0YXNldC5tb2RpZmllcixcbiAgICAgICAgICAgIG5hbWU6IGRhdGEuZGF0YXNldC5uYW1lXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIGlmICghbmFtZSkge1xuICAgICAgZGF0YS5uYW1lID0gdGl0bGVcbiAgICB9IGVsc2UgZGF0YS5kYXRhc2V0LmRpc3BsYXlOYW1lID0gdHJ1ZVxuXG4gICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKVxuICAgIGEudGl0bGUgPSBnYW1lLnVzZXIuaXNHTSA/IGRhdGEubmFtZSA6IHRpdGxlXG4gICAgYS5jbGFzc0xpc3QuYWRkKC4uLmRhdGEuY2xzKVxuICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEuZGF0YXNldCkpIHtcbiAgICAgIGEuZGF0YXNldFtrXSA9IHZcbiAgICB9XG4gICAgYS5kcmFnZ2FibGUgPSB0cnVlXG4gICAgYS5pbm5lckhUTUwgPSBgJHtcbiAgICAgIGRhdGEuYmxpbmQgPyAnPGkgY2xhc3M9XCJmYXMgZmEtZXllLXNsYXNoXCI+PC9pPicgOiAnJ1xuICAgIH08aSBkYXRhLWxpbmstaWNvbj1cIiR7ZGF0YS5pY29ufVwiIGNsYXNzPVwibGluay1pY29uICR7ZGF0YS5pY29ufVwiPjwvaT4ke1xuICAgICAgZGF0YS5uYW1lXG4gICAgfWBcblxuICAgIHJldHVybiBhXG4gIH1cblxuICAvKipcbiAgICogVHJpZ2dlciBhIGNoZWNrIHdoZW4gYSBsaW5rIGlzIGNsaWNxdWVkLlxuICAgKiBEZXBlbmRpbmcgdGhlIG9yaWdpblxuICAgKiBAcGFyYW0geyp9IGV2ZW50XG4gICAqXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgX29uQ2hlY2sgKGV2ZW50KSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldFxuXG4gICAgaWYgKG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgb3B0aW9ucy5kaWZmaWN1bHR5ID0gQ29DN1V0aWxpdGllcy5jb252ZXJ0RGlmZmljdWx0eShvcHRpb25zLmRpZmZpY3VsdHkpXG4gICAgfVxuXG4gICAgLy8gQ2xpY2sgb3JpZ2luIChmcm9tIG1lc3NhZ2Ugb3IgZnJvbSBzaGVldClcbiAgICAvLyBjb25zdCBmcm9tU2hlZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5jaGF0LW1lc3NhZ2UnKT9mYWxzZTp0cnVlO1xuXG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBpZiAoaXNDdHJsS2V5KGV2ZW50KSkge1xuICAgICAgICBpZiAob3B0aW9ucy5kaXNwbGF5TmFtZSkgb3B0aW9ucy5sYWJlbCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuaW5uZXJUZXh0XG4gICAgICAgIGNvbnN0IGxpbmsgPSBhd2FpdCBDb0M3TGluay5mcm9tRGF0YShvcHRpb25zKVxuICAgICAgICBjb25zdCBsaW5rRGlhbG9nID0gbmV3IENvQzdMaW5rQ3JlYXRpb25EaWFsb2cobGluaylcbiAgICAgICAgbGlua0RpYWxvZy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBpZiAoY2FudmFzLnRva2Vucy5jb250cm9sbGVkLmxlbmd0aCkge1xuICAgICAgICBmb3IgKGNvbnN0IHRva2VuIG9mIGNhbnZhcy50b2tlbnMuY29udHJvbGxlZCkge1xuICAgICAgICAgIHN3aXRjaCAob3B0aW9ucy5jaGVjaykge1xuICAgICAgICAgICAgY2FzZSAnY2hlY2snOlxuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgJ2NoYXJhYycsXG4gICAgICAgICAgICAgICAgICAnY2hhcicsXG4gICAgICAgICAgICAgICAgICAnY2hhcmFjdGVyaXN0aWMnLFxuICAgICAgICAgICAgICAgICAgJ2NoYXJhY3RlcmlzdGljcydcbiAgICAgICAgICAgICAgICBdLmluY2x1ZGVzKG9wdGlvbnMudHlwZS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9rZW4uYWN0b3IuY2hhcmFjdGVyaXN0aWNDaGVjayhcbiAgICAgICAgICAgICAgICAgIG9wdGlvbnMubmFtZSxcbiAgICAgICAgICAgICAgICAgIGV2ZW50LnNoaWZ0S2V5LFxuICAgICAgICAgICAgICAgICAgb3B0aW9uc1xuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoWydza2lsbCddLmluY2x1ZGVzKG9wdGlvbnMudHlwZS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0b2tlbi5hY3Rvci5za2lsbENoZWNrKG9wdGlvbnMsIGV2ZW50LnNoaWZ0S2V5LCBvcHRpb25zKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBbJ2F0dHJpYnV0ZXMnLCAnYXR0cmlidXRlJywgJ2F0dHJpYicsICdhdHRyaWJzJ10uaW5jbHVkZXMoXG4gICAgICAgICAgICAgICAgICBvcHRpb25zLnR5cGUudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRva2VuLmFjdG9yLmF0dHJpYnV0ZUNoZWNrKFxuICAgICAgICAgICAgICAgICAgb3B0aW9ucy5uYW1lLFxuICAgICAgICAgICAgICAgICAgZXZlbnQuc2hpZnRLZXksXG4gICAgICAgICAgICAgICAgICBvcHRpb25zXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICAgIGNhc2UgJ3Nhbmxvc3MnOiB7XG4gICAgICAgICAgICAgIFNhbkNoZWNrQ2FyZC5jcmVhdGUodG9rZW4uYWN0b3IuaWQsIG9wdGlvbnMsIHtcbiAgICAgICAgICAgICAgICBmYXN0Rm9yd2FyZDogZXZlbnQuc2hpZnRLZXlcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLy8gY29uc3QgY2hlY2sgPSBuZXcgQ29DN1NhbkNoZWNrKFxuICAgICAgICAgICAgICAvLyAgIHRva2VuLmFjdG9yLmlkLFxuICAgICAgICAgICAgICAvLyAgIG9wdGlvbnMuc2FuTWluLFxuICAgICAgICAgICAgICAvLyAgIG9wdGlvbnMuc2FuTWF4LFxuICAgICAgICAgICAgICAvLyAgIHVuZGVmaW5lZCAhPSBvcHRpb25zLmRpZmZpY3VsdHk/Q29DN1V0aWxpdGllcy5jb252ZXJ0RGlmZmljdWx0eShvcHRpb25zLmRpZmZpY3VsdHkpOkNvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcixcbiAgICAgICAgICAgICAgLy8gICB1bmRlZmluZWQgIT0gb3B0aW9ucy5tb2RpZmllcj9OdW1iZXIob3B0aW9ucy5tb2RpZmllcik6MCk7XG4gICAgICAgICAgICAgIC8vIGNoZWNrLnRvTWVzc2FnZSggZXZlbnQuc2hpZnRLZXkpO1xuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjYXNlICdpdGVtJzoge1xuICAgICAgICAgICAgICByZXR1cm4gdG9rZW4uYWN0b3Iud2VhcG9uQ2hlY2sob3B0aW9ucywgZXZlbnQuc2hpZnRLZXkpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZ2FtZS51c2VyLmRhdGEuZG9jdW1lbnQuY2hhcmFjdGVyPy5kYXRhKSB7XG4gICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgICAgICBnYW1lLnVzZXIuZGF0YS5kb2N1bWVudC5jaGFyYWN0ZXIuZGF0YS5pdGVtcy5tYXAoYXN5bmMgdiA9PiB7XG4gICAgICAgICAgICAgIGlmICh2Lm5hbWUgPT09IG9wdGlvbnMubmFtZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICAgICAgICAgICAgY2hlY2suX3Jhd1ZhbHVlID0gdi5kYXRhLmRhdGEuYmFzZVxuICAgICAgICAgICAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgICAgICAgICAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIClcbiAgICAgICAgfSBlbHNlIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IHtcbiAgICAgICAgICAgIHNwZWFrZXI6IHtcbiAgICAgICAgICAgICAgYWxpYXM6IGdhbWUudXNlci5uYW1lXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNoYXRIZWxwZXIuY3JlYXRlTWVzc2FnZShcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1lc3NhZ2VDaGVja1JlcXVlc3RlZFdhaXQnLCB7XG4gICAgICAgICAgICAgIGNoZWNrOiAoYXdhaXQgQ29DN0xpbmsuZnJvbURhdGEob3B0aW9ucykpLmxpbmtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgb3B0aW9uXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICAgIGNvbnN0IGFjdG9yID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlckFjdG9yKHNwZWFrZXIpXG4gICAgICBpZiAoYWN0b3IpIHtcbiAgICAgICAgc3dpdGNoIChvcHRpb25zLmNoZWNrKSB7XG4gICAgICAgICAgY2FzZSAnY2hlY2snOlxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBbJ2NoYXJhYycsICdjaGFyJywgJ2NoYXJhY3RlcmlzdGljJywgJ2NoYXJhY3RlcmlzdGljcyddLmluY2x1ZGVzKFxuICAgICAgICAgICAgICAgIG9wdGlvbnMudHlwZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICByZXR1cm4gYWN0b3IuY2hhcmFjdGVyaXN0aWNDaGVjayhcbiAgICAgICAgICAgICAgICBvcHRpb25zLm5hbWUsXG4gICAgICAgICAgICAgICAgZXZlbnQuc2hpZnRLZXksXG4gICAgICAgICAgICAgICAgb3B0aW9uc1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoWydza2lsbCddLmluY2x1ZGVzKG9wdGlvbnMudHlwZS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgICAgICByZXR1cm4gYWN0b3Iuc2tpbGxDaGVjayhvcHRpb25zLCBldmVudC5zaGlmdEtleSwgb3B0aW9ucylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgWydhdHRyaWJ1dGVzJywgJ2F0dHJpYnV0ZScsICdhdHRyaWInLCAnYXR0cmlicyddLmluY2x1ZGVzKFxuICAgICAgICAgICAgICAgIG9wdGlvbnMudHlwZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICByZXR1cm4gYWN0b3IuYXR0cmlidXRlQ2hlY2sob3B0aW9ucy5uYW1lLCBldmVudC5zaGlmdEtleSwgb3B0aW9ucylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBjYXNlICdzYW5sb3NzJzoge1xuICAgICAgICAgICAgU2FuQ2hlY2tDYXJkLmNyZWF0ZShhY3Rvci5pZCwgb3B0aW9ucywge1xuICAgICAgICAgICAgICBmYXN0Rm9yd2FyZDogZXZlbnQuc2hpZnRLZXlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyBjb25zdCBjaGVjayA9IG5ldyBDb0M3U2FuQ2hlY2soXG4gICAgICAgICAgICAvLyAgIGFjdG9yLmlkLFxuICAgICAgICAgICAgLy8gICBvcHRpb25zLnNhbk1pbixcbiAgICAgICAgICAgIC8vICAgb3B0aW9ucy5zYW5NYXgsXG4gICAgICAgICAgICAvLyAgIHVuZGVmaW5lZCAhPSBvcHRpb25zLmRpZmZpY3VsdHk/Q29DN1V0aWxpdGllcy5jb252ZXJ0RGlmZmljdWx0eShvcHRpb25zLmRpZmZpY3VsdHkpOkNvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcixcbiAgICAgICAgICAgIC8vICAgdW5kZWZpbmVkICE9IG9wdGlvbnMubW9kaWZpZXI/TnVtYmVyKG9wdGlvbnMubW9kaWZpZXIpOjApO1xuICAgICAgICAgICAgLy8gY2hlY2sudG9NZXNzYWdlKCBldmVudC5zaGlmdEtleSk7XG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNhc2UgJ2l0ZW0nOiB7XG4gICAgICAgICAgICByZXR1cm4gYWN0b3Iud2VhcG9uQ2hlY2sob3B0aW9ucywgZXZlbnQuc2hpZnRLZXkpXG4gICAgICAgICAgfVxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChnYW1lLnVzZXIuZGF0YS5kb2N1bWVudC5jaGFyYWN0ZXI/LmRhdGEpIHtcbiAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgICAgIGdhbWUudXNlci5kYXRhLmRvY3VtZW50LmNoYXJhY3Rlci5kYXRhLml0ZW1zLm1hcChhc3luYyB2ID0+IHtcbiAgICAgICAgICAgICAgaWYgKHYubmFtZSA9PT0gb3B0aW9ucy5uYW1lKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgICAgICAgICAgICBjaGVjay5fcmF3VmFsdWUgPSB2LmRhdGEuZGF0YS5iYXNlXG4gICAgICAgICAgICAgICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgICAgICAgICAgICAgY2hlY2sudG9NZXNzYWdlKClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTm9Db250cm9sbGVkQWN0b3InKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsIENPTkZJRywgZHVwbGljYXRlLCBnYW1lLCBnZXRQcm9wZXJ0eSwgSXRlbSwgUm9sbCwgVGV4dEVkaXRvciwgVG9rZW4sIHVpICovXG5pbXBvcnQgeyBDb0M3UGFyc2VyIH0gZnJvbSAnLi4vYXBwcy9wYXJzZXIuanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcblxuLyoqXG4gKiBPdmVycmlkZSBhbmQgZXh0ZW5kIHRoZSBiYXNpYyA6Y2xhc3M6YEl0ZW1gIGltcGxlbWVudGF0aW9uXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3SXRlbSBleHRlbmRzIEl0ZW0ge1xuICAvKiogQ3JlYXRlIGRlcml2ZWQgZG9jdW1lbnQgY2xhc3NlcyBmb3Igc3BlY2lmaWMgSXRlbSB0eXBlcyAqL1xuICBjb25zdHJ1Y3RvciAoZGF0YSwgY29udGV4dCkge1xuICAgIC8qKiBAc2VlIENPTkZJRy5JdGVtLmRvY3VtZW50Q2xhc3NlcyBpbiBtb2R1bGUvc2NyaXB0cy9jb25maWd1cmUtZG9jdW1lbnRzICovXG4gICAgaWYgKGRhdGEudHlwZSBpbiBDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzZXMgJiYgIWNvbnRleHQ/LmV4dGVuZGVkKSB7XG4gICAgICAvKipcbiAgICAgICAqIFdoZW4gdGhlIGNvbnN0cnVjdG9yIGZvciB0aGUgbmV3IGNsYXNzIHdpbGwgY2FsbCBpdCdzIHN1cGVyKCksXG4gICAgICAgKiB0aGUgZXh0ZW5kZWQgZmxhZyB3aWxsIGJlIHRydWUsIHRodXMgYnlwYXNzaW5nIHRoaXMgd2hvbGUgcHJvY2Vzc1xuICAgICAgICogYW5kIHJlc3VtZSBkZWZhdWx0IGJlaGF2aW9yXG4gICAgICAgKi9cbiAgICAgIHJldHVybiBuZXcgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzc2VzW2RhdGEudHlwZV0oZGF0YSwge1xuICAgICAgICAuLi57IGV4dGVuZGVkOiB0cnVlIH0sXG4gICAgICAgIC4uLmNvbnRleHRcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmICh0eXBlb2YgZGF0YS5pbWcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoZGF0YS50eXBlID09PSAnY2hhc2UnKSB7XG4gICAgICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvcnVubmluZy1zb2xpZC5zdmcnXG4gICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICBkYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3NraWxscy5zdmcnXG4gICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3N0YXR1cycpIHtcbiAgICAgICAgZGF0YS5pbWcgPSAnaWNvbnMvc3ZnL2F1cmEuc3ZnJ1xuICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICd3ZWFwb24nKSB7XG4gICAgICAgIGRhdGEuaW1nID0gJ2ljb25zL3N2Zy9zd29yZC5zdmcnXG4gICAgICB9XG4gICAgfVxuICAgIC8qKiBEZWZhdWx0IGJlaGF2aW9yLCBqdXN0IGNhbGwgc3VwZXIoKSBhbmQgZG8gYWxsIHRoZSBkZWZhdWx0IEl0ZW0gaW5pdHMgKi9cbiAgICBzdXBlcihkYXRhLCBjb250ZXh0KVxuICB9XG5cbiAgc3RhdGljIGdldCBpY29uTGFuZ3VhZ2UgKCkge1xuICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9za2lsbHMvbGFuZ3VhZ2Uuc3ZnJ1xuICB9XG5cbiAgc3RhdGljIGdldCBmbGFncyAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1hbGZ1bmN0aW9uOiAnbWFsZmMnXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSBvbiBvZiB0aGUgaXRlbSBwcm9wZXJ0eSBpbiBkYXRhLmRhdGEucHJvcGVydGllc1xuICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlJZCA6IG5hbWUgZm9yIHRoZSBwcm9wZXJ0eSB0byB0b2dnbGVcbiAgICovXG4gIGFzeW5jIHRvZ2dsZVByb3BlcnR5IChwcm9wZXJ0eUlkLCBvdmVycmlkZSA9IGZhbHNlKSB7XG4gICAgbGV0IGNoZWNrZWRQcm9wcyA9IHt9XG4gICAgbGV0IGZpZ2h0aW5nXG4gICAgbGV0IGZpcmVhcm1zXG4gICAgaWYgKHRoaXMudHlwZSA9PT0gJ3dlYXBvbicgJiYgIW92ZXJyaWRlKSB7XG4gICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ2FoZGInKSB7XG4gICAgICAgIGlmICghdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5haGRiKSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5haGRiJzogdHJ1ZSxcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMuYWRkYic6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMuYWhkYic6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnYWRkYicpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmFkZGIpIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLmFkZGInOiB0cnVlLFxuICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5haGRiJzogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5hZGRiJzogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdzaG90Z3VuJykge1xuICAgICAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLnByb3BlcnRpZXMuc2hvdGd1bikge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMucm5nZCc6IHRydWUsXG4gICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLm1lbGVlJzogZmFsc2UsXG4gICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLnNob3RndW4nOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMuc2hvdGd1bic6IGZhbHNlLFxuICAgICAgICAgICAgJ2RhdGEucmFuZ2UuZXh0cmVtZS52YWx1ZSc6IG51bGwsXG4gICAgICAgICAgICAnZGF0YS5yYW5nZS5leHRyZW1lLmRhbWFnZSc6IG51bGwsXG4gICAgICAgICAgICAnZGF0YS5yYW5nZS5sb25nLnZhbHVlJzogbnVsbCxcbiAgICAgICAgICAgICdkYXRhLnJhbmdlLmxvbmcuZGFtYWdlJzogbnVsbFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ21lbGVlJyB8fCBwcm9wZXJ0eUlkID09PSAncm5nZCcpIHtcbiAgICAgICAgbGV0IG1lbGVlV2VhcG9uXG4gICAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnbWVsZWUnICYmICF0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLm1lbGVlKSB7XG4gICAgICAgICAgbWVsZWVXZWFwb24gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdtZWxlZScgJiYgdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5tZWxlZSkge1xuICAgICAgICAgIG1lbGVlV2VhcG9uID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ3JuZ2QnICYmICF0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLnJuZ2QpIHtcbiAgICAgICAgICBtZWxlZVdlYXBvbiA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdybmdkJyAmJiB0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLnJuZ2QpIHtcbiAgICAgICAgICBtZWxlZVdlYXBvbiA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVsZWVXZWFwb24pIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLm1lbGVlJzogdHJ1ZSxcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMucm5nZCc6IGZhbHNlLFxuICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5zaG90Z3VuJzogZmFsc2UsXG4gICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLmJyc3QnOiBmYWxzZSxcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMuYXV0byc6IGZhbHNlLFxuICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5kYnJsJzogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5tZWxlZSc6IGZhbHNlLFxuICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5ybmdkJzogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnR5cGUgPT09ICdza2lsbCcgJiYgIW92ZXJyaWRlKSB7XG4gICAgICBsZXQgbW9kaWYgPSBmYWxzZVxuICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdjb21iYXQnKSB7XG4gICAgICAgIGlmICghdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5jb21iYXQpIHtcbiAgICAgICAgICAvLyBDbG9zZSBjb21iYXQgYnkgZGVmYXVsdFxuICAgICAgICAgIGlmICghdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5maXJlYXJtKSB7XG4gICAgICAgICAgICBmaWdodGluZyA9IHRydWVcbiAgICAgICAgICB9IGVsc2UgZmlyZWFybXMgPSB0cnVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5jb21iYXQnOiBmYWxzZSxcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMuc3BlY2lhbCc6IGZhbHNlLFxuICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5maWdodGluZyc6IGZhbHNlLFxuICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5maXJlYXJtJzogZmFsc2UsXG4gICAgICAgICAgICAnZGF0YS5zcGVjaWFsaXphdGlvbic6IG51bGxcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbW9kaWYgPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnZmlnaHRpbmcnKSB7XG4gICAgICAgIGlmICghdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5maWdodGluZykge1xuICAgICAgICAgIGZpcmVhcm1zID0gZmFsc2VcbiAgICAgICAgICBmaWdodGluZyA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmaXJlYXJtcyA9IHRydWVcbiAgICAgICAgICBmaWdodGluZyA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgbW9kaWYgPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnZmlyZWFybScpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmZpcmVhcm0pIHtcbiAgICAgICAgICBmaXJlYXJtcyA9IHRydWVcbiAgICAgICAgICBmaWdodGluZyA9IGZhbHNlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZmlyZWFybXMgPSBmYWxzZVxuICAgICAgICAgIGZpZ2h0aW5nID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIG1vZGlmID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICBpZiAobW9kaWYpIHtcbiAgICAgICAgLy8gc2V0IHNwZWNpYWxpc2F0aW9uIGlmIGZpZ2h0aW5nIG9yIGZpcmVhcm1cbiAgICAgICAgaWYgKGZpZ2h0aW5nKSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5maWdodGluZyc6IHRydWUsXG4gICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLmZpcmVhcm0nOiBmYWxzZSxcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMuY29tYmF0JzogdHJ1ZSxcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMuc3BlY2lhbCc6IHRydWUsXG4gICAgICAgICAgICAnZGF0YS5zcGVjaWFsaXphdGlvbic6IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgQ09DNy5maWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmaXJlYXJtcykge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMuZmlnaHRpbmcnOiBmYWxzZSxcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMuZmlyZWFybSc6IHRydWUsXG4gICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLmNvbWJhdCc6IHRydWUsXG4gICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLnNwZWNpYWwnOiB0cnVlLFxuICAgICAgICAgICAgJ2RhdGEuc3BlY2lhbGl6YXRpb24nOiBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgIENPQzcuZmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChPYmplY3Qua2V5cyhjaGVja2VkUHJvcHMpLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBhd2FpdCB0aGlzLnVwZGF0ZShjaGVja2VkUHJvcHMpXG4gICAgICByZXR1cm4gaXRlbVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBwcm9wTmFtZSA9IGBkYXRhLnByb3BlcnRpZXMuJHtwcm9wZXJ0eUlkfWBcbiAgICAgIGNvbnN0IHByb3BWYWx1ZSA9ICF0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzW3Byb3BlcnR5SWRdXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtwcm9wTmFtZV06IHByb3BWYWx1ZSB9KS50aGVuKGl0ZW0gPT4ge1xuICAgICAgICByZXR1cm4gaXRlbVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBoYXNQcm9wZXJ0eSAocHJvcGVydHlJZCkge1xuICAgIHJldHVybiB0aGlzLmlzSW5jbHVkZWRJblNldCgncHJvcGVydGllcycsIHByb3BlcnR5SWQpXG4gIH1cblxuICBnZXQgbmFtZSAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3NraWxsJyB8fCAhdGhpcy5kYXRhLmRhdGE/LnByb3BlcnRpZXM/LnNwZWNpYWwpIHtcbiAgICAgIHJldHVybiBzdXBlci5uYW1lXG4gICAgfVxuICAgIGlmIChcbiAgICAgIHRoaXMuZGF0YS5uYW1lXG4gICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgIC5pbmNsdWRlcyh0aGlzLmRhdGEuZGF0YS5zcGVjaWFsaXphdGlvbj8udG9Mb3dlckNhc2UoKSlcbiAgICApIHtcbiAgICAgIC8vIFJlc3RvcmUgbmFtZXMgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiBwcm9jZXNzZWRcbiAgICAgIGlmICh0aGlzLmlzT3duZWQgJiYgc3VwZXIubmFtZSA9PT0gdGhpcy5kYXRhLm5hbWUpIHtcbiAgICAgICAgY29uc3QgcmUgPSBuZXcgUmVnRXhwKFxuICAgICAgICAgICdeJyArXG4gICAgICAgICAgICBDb0M3VXRpbGl0aWVzLnF1b3RlUmVnRXhwKHRoaXMuZGF0YS5kYXRhLnNwZWNpYWxpemF0aW9uKSArXG4gICAgICAgICAgICAnIFxcXFwoKC4rKVxcXFwpJCdcbiAgICAgICAgKVxuICAgICAgICBjb25zdCBtYXRjaCA9IHJlLmV4ZWModGhpcy5kYXRhLm5hbWUpXG4gICAgICAgIGlmIChtYXRjaCAhPT0gbnVsbCAmJiB0eXBlb2YgbWF0Y2hbMV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgcmV0dXJuIG1hdGNoWzFdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBzdXBlci5uYW1lXG4gICAgfVxuICAgIGlmICh0aGlzLmlzT3duZWQpIHtcbiAgICAgIHJldHVybiBzdXBlci5uYW1lXG4gICAgfVxuICAgIHJldHVybiBgJHt0aGlzLmRhdGEuZGF0YS5zcGVjaWFsaXphdGlvbn0gKCR7dGhpcy5kYXRhLm5hbWV9KWBcbiAgfVxuXG4gIGdldCBmdWxsTmFtZSAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLnByb3BlcnRpZXMuc3BlY2lhbClcbiAgICAgIHJldHVybiBgJHt0aGlzLmRhdGEuZGF0YS5zcGVjaWFsaXphdGlvbn0gKCR7dGhpcy5kYXRhLm5hbWV9KWBcbiAgICByZXR1cm4gdGhpcy5uYW1lXG4gIH1cblxuICBnZXQgc05hbWUgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICdza2lsbCcgfHwgIXRoaXMuZGF0YS5kYXRhPy5wcm9wZXJ0aWVzPy5zcGVjaWFsKSB7XG4gICAgICByZXR1cm4gc3VwZXIubmFtZVxuICAgIH1cbiAgICBpZiAoXG4gICAgICB0aGlzLmRhdGEubmFtZVxuICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAuaW5jbHVkZXModGhpcy5kYXRhLmRhdGEuc3BlY2lhbGl6YXRpb24/LnRvTG93ZXJDYXNlKCkpXG4gICAgKSB7XG4gICAgICByZXR1cm4gc3VwZXIubmFtZVxuICAgIH1cbiAgICByZXR1cm4gYCR7dGhpcy5kYXRhLm5hbWV9YFxuICB9XG5cbiAgYXN5bmMgdXBkYXRlUm9sbCAocm9sbCkge1xuICAgIGlmICgndXBkYXRlUm9sbCcgaW4gdGhpcy5zaGVldCkgcmV0dXJuIGF3YWl0IHRoaXMuc2hlZXQudXBkYXRlUm9sbChyb2xsKVxuICAgIGVsc2UgaWYgKCd1cGRhdGVSb2xsJyBpbiB0aGlzKSByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVSb2xsKHJvbGwpXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgc3RhdGljIGdldE5hbWVXaXRob3V0U3BlYyAoaXRlbSkge1xuICAgIGlmIChpdGVtIGluc3RhbmNlb2YgQ29DN0l0ZW0pIHtcbiAgICAgIGlmIChpdGVtLmRhdGEuZGF0YT8ucHJvcGVydGllcz8uc3BlY2lhbCkge1xuICAgICAgICBjb25zdCBzcGVjTmFtZVJlZ2V4ID0gbmV3IFJlZ0V4cChcbiAgICAgICAgICBDb0M3VXRpbGl0aWVzLnF1b3RlUmVnRXhwKGl0ZW0uZGF0YS5kYXRhLnNwZWNpYWxpemF0aW9uKSxcbiAgICAgICAgICAnaWcnXG4gICAgICAgIClcbiAgICAgICAgY29uc3QgZmlsdGVyZWROYW1lID0gaXRlbS5uYW1lXG4gICAgICAgICAgLnJlcGxhY2Uoc3BlY05hbWVSZWdleCwgJycpXG4gICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgIC5yZXBsYWNlKC9eXFwoK3xcXCkrJC9nbSwgJycpXG4gICAgICAgIHJldHVybiBmaWx0ZXJlZE5hbWUubGVuZ3RoID8gZmlsdGVyZWROYW1lIDogaXRlbS5uYW1lXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpdGVtLmRhdGEucHJvcGVydGllcz8uc3BlY2lhbCkge1xuICAgICAgICBjb25zdCBzcGVjTmFtZVJlZ2V4ID0gbmV3IFJlZ0V4cChcbiAgICAgICAgICAnXicgK1xuICAgICAgICAgICAgQ29DN1V0aWxpdGllcy5xdW90ZVJlZ0V4cChpdGVtLmRhdGEuc3BlY2lhbGl6YXRpb24pICtcbiAgICAgICAgICAgICdcXFxccypcXFxcKCguKylcXFxcKSQnLFxuICAgICAgICAgICdpJ1xuICAgICAgICApXG4gICAgICAgIHJldHVybiBpdGVtLm5hbWUucmVwbGFjZShzcGVjTmFtZVJlZ2V4LCAnJDEnKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaXRlbS5uYW1lXG4gIH1cblxuICBzdGF0aWMgaXNBbnlTcGVjIChpdGVtKSB7XG4gICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBDb0M3SXRlbSkge1xuICAgICAgaWYgKGl0ZW0udHlwZSAhPT0gJ3NraWxsJyB8fCAhaXRlbS5kYXRhLmRhdGEucHJvcGVydGllcz8uc3BlY2lhbCkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIHJldHVybiBbXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BbnlTcGVjTmFtZScpLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICdhbnknXG4gICAgICBdLmluY2x1ZGVzKENvQzdJdGVtLmdldE5hbWVXaXRob3V0U3BlYyhpdGVtKS50b0xvd2VyQ2FzZSgpKVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBBc3N1bWUgaXQncyBkYXRhIG9ubHlcbiAgICAgIGlmIChpdGVtLnR5cGUgIT09ICdza2lsbCcgfHwgIWl0ZW0uZGF0YS5wcm9wZXJ0aWVzPy5zcGVjaWFsKSByZXR1cm4gZmFsc2VcbiAgICAgIHJldHVybiBbXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BbnlTcGVjTmFtZScpLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICdhbnknXG4gICAgICBdLmluY2x1ZGVzKENvQzdJdGVtLmdldE5hbWVXaXRob3V0U3BlYyhpdGVtKS50b0xvd2VyQ2FzZSgpKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNoZWNrU2tpbGxQcm9wZXJ0aWVzICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm5cbiAgICBjb25zdCBjaGVja2VkUHJvcHMgPSB7fVxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmNvbWJhdCkge1xuICAgICAgLy8gaWYgc2tpbGwgaXMgbm90IGEgc3BlY2lhbGlzYXRpb24gbWFrZSBpdCBhIHNwZWNpYWxpc2F0aW9uXG4gICAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLnByb3BlcnRpZXMuc3BlY2lhbCkge1xuICAgICAgICB0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLnNwZWNpYWwgPSB0cnVlXG4gICAgICAgIGNoZWNrZWRQcm9wc1snZGF0YS5wcm9wZXJ0aWVzLnNwZWNpYWwnXSA9IHRydWVcbiAgICAgIH1cblxuICAgICAgLy8gSWYgc2tpbGwgaXMgY29tYmF0IHNraWxsIGFuZCBubyBzcGVjaWFsaXNhdGlvbiBzZXQgdGhlbiBtYWtlIGl0IGEgZmlnaHRpbmcoIGNsb3NlY29tYmF0KSBza2lsbFxuICAgICAgaWYgKFxuICAgICAgICAhdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5maWdodGluZyAmJlxuICAgICAgICAhdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5maXJlYXJtXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5maWdodGluZyA9IHRydWVcbiAgICAgICAgY2hlY2tlZFByb3BzWydkYXRhLnByb3BlcnRpZXMuZmlnaHRpbmcnXSA9IHRydWVcbiAgICAgIH1cblxuICAgICAgLy8gaWYgc2tpbGwgaXMgY2xvc2UgY29tYmF0IHdpdGhvdXQgc3BlY2lhbGlzYXRpb24gbmFtZSBtYWtlIHNldCBpdCBhY2NvcmRpbmcgdG8gdGhlIGZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLnByb3BlcnRpZXMuZmlnaHRpbmcgJiZcbiAgICAgICAgKCF0aGlzLmRhdGEuZGF0YS5zcGVjaWFsaXphdGlvbiB8fCB0aGlzLmRhdGEuZGF0YS5zcGVjaWFsaXphdGlvbiA9PT0gJycpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEuc3BlY2lhbGl6YXRpb24gPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgQ09DNy5maWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZVxuICAgICAgICApXG4gICAgICAgIGNoZWNrZWRQcm9wc1snZGF0YS5zcGVjaWFsaXphdGlvbiddID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgIENPQzcuZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWVcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICAvLyBpZiBza2lsbCBpcyByYW5nZSBjb21iYXQgd2l0aG91dCBhIHNwZWNpYWxpc2F0aW9uIG5hbWUgbWFrZSBzZXQgaXQgYWNjb3JkaW5nIHRvIHRoZSBmaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLnByb3BlcnRpZXMuZmlyZWFybSAmJlxuICAgICAgICAoIXRoaXMuZGF0YS5kYXRhLnNwZWNpYWxpemF0aW9uIHx8IHRoaXMuZGF0YS5kYXRhLnNwZWNpYWxpemF0aW9uID09PSAnJylcbiAgICAgICkge1xuICAgICAgICB0aGlzLmRhdGEuZGF0YS5zcGVjaWFsaXphdGlvbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICBDT0M3LmZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWVcbiAgICAgICAgKVxuICAgICAgICBjaGVja2VkUHJvcHNbJ2RhdGEuc3BlY2lhbGl6YXRpb24nXSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICBDT0M3LmZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWVcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5maWdodGluZykge1xuICAgICAgICB0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmZpZ2h0aW5nID0gZmFsc2VcbiAgICAgICAgY2hlY2tlZFByb3BzWydkYXRhLnByb3BlcnRpZXMuZmlnaHRpbmcnXSA9IGZhbHNlXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5maXJlYXJtKSB7XG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLnByb3BlcnRpZXMuZmlyZWFybSA9IGZhbHNlXG4gICAgICAgIGNoZWNrZWRQcm9wc1snZGF0YS5wcm9wZXJ0aWVzLmZpcmVhcm0nXSA9IGZhbHNlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKE9iamVjdC5rZXlzKGNoZWNrZWRQcm9wcykubGVuZ3RoID4gMCkge1xuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoY2hlY2tlZFByb3BzKVxuICAgIH1cblxuICAgIHJldHVybiBjaGVja2VkUHJvcHNcblxuICAgIC8vIGZvciAoY29uc3QgcHJvcGVydHkgaW4gdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcykge1xuICAgIC8vICBjaGVja2VkUHJvcHNbYGRhdGEuZGF0YS5wcm9wZXJ0aWVzJHtwcm9wZXJ0eX1gXSA9IHRydWU7XG4gICAgLy8gfVxuICB9XG5cbiAgLy8gYXN5bmMgdG9nZ2xlSW5TZXQoIHNldCwgcHJvcGVydHlJZCl7XG4gIC8vICBpZiggdGhpcy5kYXRhLmRhdGFbc2V0XVtwcm9wZXJ0eUlkXSA9PSBcImZhbHNlXCIpIHRoaXMuZGF0YS5kYXRhW3NldF1bcHJvcGVydHlJZF0gPSBcInRydWVcIjsgZWxzZSB0aGlzLmRhdGEuZGF0YVtzZXRdW3Byb3BlcnR5SWRdID0gXCJmYWxzZVwiO1xuICAvLyB9XG5cbiAgaXNJbmNsdWRlZEluU2V0IChzZXQsIHByb3BlcnR5SWQpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5kYXRhW3NldF0pIHRoaXMuZGF0YS5kYXRhW3NldF0gPSBbXVxuICAgIGNvbnN0IHByb3BlcnR5SW5kZXggPSB0aGlzLmRhdGEuZGF0YVtzZXRdLmluZGV4T2YocHJvcGVydHlJZClcbiAgICBpZiAocHJvcGVydHlJbmRleCA+IC0xKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgYXN5bmMgZmxhZ0ZvckRldmVsb3BlbWVudCAoKSB7XG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3hwRW5hYmxlZCcpIHx8IGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLmZsYWdzKSB7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ2RhdGEuZmxhZ3MnOiB7fSB9KVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS5mbGFncy5kZXZlbG9wZW1lbnQnOiB0cnVlIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdW5mbGFnRm9yRGV2ZWxvcGVtZW50ICgpIHtcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAneHBFbmFibGVkJykgfHwgZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGlmICghdGhpcy5kYXRhLmRhdGEuZmxhZ3MpIHtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS5mbGFncyc6IHt9IH0pXG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdkYXRhLmZsYWdzLmRldmVsb3BlbWVudCc6IGZhbHNlIH0pXG4gICAgfVxuICB9XG5cbiAgZ2V0IGRldmVsb3BlbWVudEZsYWcgKCkge1xuICAgIHJldHVybiB0aGlzLmdldEl0ZW1GbGFnKCdkZXZlbG9wZW1lbnQnKVxuICB9XG5cbiAgYXN5bmMgdG9nZ2xlSXRlbUZsYWcgKGZsYWdOYW1lLCBlcmFzZUFkanVzdG1lbnQgPSB0cnVlKSB7XG4gICAgY29uc3QgZmxhZ1ZhbHVlID0gIXRoaXMuZ2V0SXRlbUZsYWcoZmxhZ05hbWUpXG4gICAgY29uc3QgbmFtZSA9IGBkYXRhLmZsYWdzLiR7ZmxhZ05hbWV9YFxuICAgIGlmIChcbiAgICAgIChmbGFnTmFtZSA9PT0gJ29jY3VwYXRpb24nIHx8IGZsYWdOYW1lID09PSAnYXJjaGV0eXBlJykgJiZcbiAgICAgICFmbGFnVmFsdWUgJiZcbiAgICAgIGVyYXNlQWRqdXN0bWVudFxuICAgICkge1xuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICBbYGRhdGEuYWRqdXN0bWVudHMuJHtmbGFnTmFtZX1gXTogbnVsbCxcbiAgICAgICAgW25hbWVdOiBmbGFnVmFsdWVcbiAgICAgIH0pXG4gICAgfSBlbHNlIGlmIChmbGFnTmFtZSA9PT0gJ2RldmVsb3BlbWVudCcpIHtcbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd4cEVuYWJsZWQnKSB8fCBnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtuYW1lXTogZmxhZ1ZhbHVlIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oJ1hQIEdhaW4gZGlzYWJsZWQuJylcbiAgICAgIH1cbiAgICB9IGVsc2UgYXdhaXQgdGhpcy51cGRhdGUoeyBbbmFtZV06IGZsYWdWYWx1ZSB9KVxuICB9XG5cbiAgYXN5bmMgc2V0SXRlbUZsYWcgKGZsYWdOYW1lKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyBbYGRhdGEuZmxhZ3MuJHtmbGFnTmFtZX1gXTogdHJ1ZSB9KVxuICB9XG5cbiAgYXN5bmMgdW5zZXRJdGVtRmxhZyAoZmxhZ05hbWUsIGVyYXNlQWRqdXN0bWVudCA9IHRydWUpIHtcbiAgICBjb25zdCBuYW1lID0gYGRhdGEuZmxhZ3MuJHtmbGFnTmFtZX1gXG4gICAgaWYgKFxuICAgICAgKGZsYWdOYW1lID09PSAnb2NjdXBhdGlvbicgfHwgZmxhZ05hbWUgPT09ICdhcmNoZXR5cGUnKSAmJlxuICAgICAgZXJhc2VBZGp1c3RtZW50XG4gICAgKSB7XG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgIFtgZGF0YS5hZGp1c3RtZW50cy4ke2ZsYWdOYW1lfWBdOiBudWxsLFxuICAgICAgICBbbmFtZV06IGZhbHNlXG4gICAgICB9KVxuICAgIH0gZWxzZSBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtuYW1lXTogZmFsc2UgfSlcbiAgfVxuXG4gIGdldEl0ZW1GbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghdGhpcy5kYXRhLmRhdGEuZmxhZ3MpIHtcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmZsYWdzID0ge31cbiAgICAgIHRoaXMuZGF0YS5kYXRhLmZsYWdzLmxvY2tlZCA9IHRydWVcbiAgICAgIHRoaXMudXBkYXRlKHsgJ2RhdGEuZmxhZ3MnOiB7fSB9KVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmRhdGEuZGF0YS5mbGFnc1tmbGFnTmFtZV0pIHJldHVybiBmYWxzZVxuICAgIHJldHVybiB0aGlzLmRhdGEuZGF0YS5mbGFnc1tmbGFnTmFtZV1cbiAgfVxuXG4gIGdldCB1c2VzQWx0ZXJuYXRpdmVTa2lsbCAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMudHlwZSA9PT0gJ3dlYXBvbicgJiZcbiAgICAgICh0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzPy5hdXRvID09PSB0cnVlIHx8XG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLnByb3BlcnRpZXM/LmJyc3QgPT09IHRydWUgfHxcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcz8udGhyb3duID09PSB0cnVlKVxuICAgIClcbiAgfVxuXG4gIGdldCBtYXhVc2VzUGVyUm91bmQgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IG11bHRpU2hvdCA9IHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLnVzZXNQZXJSb3VuZC5tYXgpXG4gICAgaWYgKGlzTmFOKG11bHRpU2hvdCkpIHJldHVybiAwXG4gICAgcmV0dXJuIG11bHRpU2hvdFxuICB9XG5cbiAgZ2V0IHVzZXNQZXJSb3VuZCAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgY29uc3Qgc2luZ2xlU2hvdCA9IHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLnVzZXNQZXJSb3VuZC5ub3JtYWwpXG4gICAgaWYgKGlzTmFOKHNpbmdsZVNob3QpKSByZXR1cm4gMFxuICAgIHJldHVybiBzaW5nbGVTaG90XG4gIH1cblxuICBnZXQgdXNlc1BlclJvdW5kU3RyaW5nICgpIHtcbiAgICBsZXQgdXNlc1BlclJvdW5kXG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLnVzZXNQZXJSb3VuZC5ub3JtYWwpIHtcbiAgICAgIHVzZXNQZXJSb3VuZCA9IHRoaXMuZGF0YS5kYXRhLnVzZXNQZXJSb3VuZC5ub3JtYWxcbiAgICB9IGVsc2Uge1xuICAgICAgdXNlc1BlclJvdW5kID0gJzEnXG4gICAgfVxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS51c2VzUGVyUm91bmQubWF4KSB7XG4gICAgICB1c2VzUGVyUm91bmQgKz0gYCgke3RoaXMuZGF0YS5kYXRhLnVzZXNQZXJSb3VuZC5tYXh9KWBcbiAgICB9XG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLnByb3BlcnRpZXMuYXV0bykge1xuICAgICAgdXNlc1BlclJvdW5kICs9IGAgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2VhcG9uQXV0bycpfWBcbiAgICB9XG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLnByb3BlcnRpZXMuYnJzdCkge1xuICAgICAgdXNlc1BlclJvdW5kICs9IGAgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2VhcG9uQnJzdCcpfWBcbiAgICAgIGlmICh0aGlzLmRhdGEuZGF0YS51c2VzUGVyUm91bmQuYnVyc3QpIHtcbiAgICAgICAgdXNlc1BlclJvdW5kICs9IGAoJHt0aGlzLmRhdGEuZGF0YS51c2VzUGVyUm91bmQuYnVyc3R9KWBcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdXNlc1BlclJvdW5kXG4gIH1cblxuICBnZXQgbXVsdGlwbGVTaG90cyAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgaWYgKHRoaXMubWF4VXNlc1BlclJvdW5kIDw9IDEpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgZ2V0IHNpbmdsZVNob3QgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGlmICghdGhpcy51c2VzUGVyUm91bmQpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgZ2V0IGJhc2VSYW5nZSAoKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLnJhbmdlLm5vcm1hbC52YWx1ZSlcbiAgfVxuXG4gIGdldCBsb25nUmFuZ2UgKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLmRhdGEuZGF0YS5yYW5nZS5sb25nLnZhbHVlKVxuICB9XG5cbiAgZ2V0IGV4dHJlbWVSYW5nZSAoKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLnJhbmdlLmV4dHJlbWUudmFsdWUpXG4gIH1cblxuICBnZXQgc2tpbGxQcm9wZXJ0aWVzICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm4gW11cblxuICAgIGNvbnN0IHNraWxsUHJvcGVydGllcyA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5za2lsbFByb3BlcnRpZXMpKSB7XG4gICAgICBpZiAodGhpcy5kYXRhLmRhdGEucHJvcGVydGllc1trZXldID09PSB0cnVlKSB7XG4gICAgICAgIHNraWxsUHJvcGVydGllcy5wdXNoKGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZSkpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBza2lsbFByb3BlcnRpZXNcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjYWxjdWxhdGVCYXNlIChhY3RvciwgZGF0YSkge1xuICAgIGlmIChkYXRhLnR5cGUgIT09ICdza2lsbCcpIHJldHVybiBudWxsXG4gICAgaWYgKFN0cmluZyhkYXRhLmRhdGEuYmFzZSkuaW5jbHVkZXMoJ0AnKSkge1xuICAgICAgY29uc3QgcGFyc2VkID0ge31cbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZm9ybXVsYS5hY3RvcnNoZWV0KSkge1xuICAgICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ0AnKSAmJiB2YWx1ZS5zdGFydHNXaXRoKCd0aGlzLmFjdG9yLicpKSB7XG4gICAgICAgICAgcGFyc2VkW2tleS5zdWJzdHJpbmcoMSldID0gZ2V0UHJvcGVydHkoYWN0b3IsIHZhbHVlLnN1YnN0cmluZygxMSkpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxldCB2YWx1ZVxuICAgICAgdHJ5IHtcbiAgICAgICAgdmFsdWUgPSBNYXRoLmZsb29yKFxuICAgICAgICAgIG5ldyBSb2xsKGRhdGEuZGF0YS5iYXNlLCBwYXJzZWQpLmV2YWx1YXRlKHtcbiAgICAgICAgICAgIG1heGltaXplOiB0cnVlXG4gICAgICAgICAgfSkudG90YWxcbiAgICAgICAgKVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHZhbHVlID0gMFxuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlXG4gICAgfVxuICAgIHJldHVybiAhaXNOYU4ocGFyc2VJbnQoZGF0YS5kYXRhLmJhc2UpKSA/IHBhcnNlSW50KGRhdGEuZGF0YS5iYXNlKSA6IG51bGxcbiAgfVxuXG4gIGdldCBfYmFzZSAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3NraWxsJykgcmV0dXJuIFtudWxsLCBmYWxzZV1cbiAgICBpZiAodHlwZW9mIHRoaXMuZGF0YS5kYXRhLmJhc2UgIT09ICdzdHJpbmcnKVxuICAgICAgcmV0dXJuIFt0aGlzLmRhdGEuZGF0YS5iYXNlLCBmYWxzZV1cblxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5iYXNlLmluY2x1ZGVzKCdAJykpIHtcbiAgICAgIGNvbnN0IHBhcnNlZCA9IHt9XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmZvcm11bGEuYWN0b3JzaGVldCkpIHtcbiAgICAgICAgaWYgKGtleS5zdGFydHNXaXRoKCdAJykgJiYgdmFsdWUuc3RhcnRzV2l0aCgndGhpcy4nKSkge1xuICAgICAgICAgIHBhcnNlZFtrZXkuc3Vic3RyaW5nKDEpXSA9IGdldFByb3BlcnR5KHRoaXMsIHZhbHVlLnN1YnN0cmluZyg1KSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGV0IHZhbHVlXG4gICAgICB0cnkge1xuICAgICAgICB2YWx1ZSA9IE1hdGguZmxvb3IoXG4gICAgICAgICAgbmV3IFJvbGwodGhpcy5kYXRhLmRhdGEuYmFzZSwgcGFyc2VkKS5ldmFsdWF0ZSh7XG4gICAgICAgICAgICBtYXhpbWl6ZTogdHJ1ZVxuICAgICAgICAgIH0pLnRvdGFsXG4gICAgICAgIClcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICB2YWx1ZSA9IDBcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFt2YWx1ZSwgdHJ1ZV1cbiAgICB9XG4gICAgcmV0dXJuIFtcbiAgICAgICFpc05hTihwYXJzZUludCh0aGlzLmRhdGEuZGF0YS5iYXNlKSlcbiAgICAgICAgPyBwYXJzZUludCh0aGlzLmRhdGEuZGF0YS5iYXNlKVxuICAgICAgICA6IG51bGwsXG4gICAgICBmYWxzZVxuICAgIF1cbiAgfVxuXG4gIGFzeW5jIGFzeW5jQmFzZSAoKSB7XG4gICAgY29uc3QgZSA9IHRoaXMuX2Jhc2VcbiAgICBpZiAoZVsxXSkge1xuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS5iYXNlJzogZVswXSB9KVxuICAgIH1cbiAgICByZXR1cm4gZVswXVxuICB9XG5cbiAgZ2V0IGJhc2UgKCkge1xuICAgIGNvbnN0IGUgPSB0aGlzLl9iYXNlXG4gICAgaWYgKGVbMV0pIHtcbiAgICAgIHRoaXMudXBkYXRlKHsgJ2RhdGEuYmFzZSc6IGVbMF0gfSlcbiAgICB9XG4gICAgcmV0dXJuIGVbMF1cbiAgfVxuXG4gIGdldCB2YWx1ZSAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3NraWxsJykgcmV0dXJuIG51bGxcbiAgICBsZXQgdmFsdWUgPSAwXG4gICAgaWYgKHRoaXMuYWN0b3IuZGF0YS50eXBlID09PSAnY2hhcmFjdGVyJykge1xuICAgICAgdmFsdWUgPSB0aGlzLmJhc2VcbiAgICAgIHZhbHVlICs9IHRoaXMuZGF0YS5kYXRhLmFkanVzdG1lbnRzPy5wZXJzb25hbFxuICAgICAgICA/IHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLmFkanVzdG1lbnRzPy5wZXJzb25hbClcbiAgICAgICAgOiAwXG4gICAgICB2YWx1ZSArPSB0aGlzLmRhdGEuZGF0YS5hZGp1c3RtZW50cz8ub2NjdXBhdGlvblxuICAgICAgICA/IHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLmFkanVzdG1lbnRzPy5vY2N1cGF0aW9uKVxuICAgICAgICA6IDBcbiAgICAgIHZhbHVlICs9IHRoaXMuZGF0YS5kYXRhLmFkanVzdG1lbnRzPy5leHBlcmllbmNlXG4gICAgICAgID8gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEuYWRqdXN0bWVudHM/LmV4cGVyaWVuY2UpXG4gICAgICAgIDogMFxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlcycpKSB7XG4gICAgICAgIGlmICh0aGlzLmRhdGEuZGF0YS5hZGp1c3RtZW50cz8uYXJjaGV0eXBlKSB7XG4gICAgICAgICAgdmFsdWUgKz0gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEuYWRqdXN0bWVudHM/LmFyY2hldHlwZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZSA9IHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLnZhbHVlKVxuICAgIH1cbiAgICByZXR1cm4gIWlzTmFOKHZhbHVlKSA/IHZhbHVlIDogbnVsbFxuICB9XG5cbiAgYXN5bmMgdXBkYXRlVmFsdWUgKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3NraWxsJykgcmV0dXJuIG51bGxcbiAgICBpZiAodGhpcy5hY3Rvci5kYXRhLnR5cGUgPT09ICdjaGFyYWN0ZXInKSB7XG4gICAgICBjb25zdCBkZWx0YSA9IHBhcnNlSW50KHZhbHVlKSAtIHRoaXMudmFsdWVcbiAgICAgIGNvbnN0IGV4cCA9XG4gICAgICAgICh0aGlzLmRhdGEuZGF0YS5hZGp1c3RtZW50cz8uZXhwZXJpZW5jZVxuICAgICAgICAgID8gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEuYWRqdXN0bWVudHMuZXhwZXJpZW5jZSlcbiAgICAgICAgICA6IDApICsgZGVsdGFcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ2RhdGEuYWRqdXN0bWVudHMuZXhwZXJpZW5jZSc6IGV4cCA+IDAgPyBleHAgOiAwXG4gICAgICB9KVxuICAgIH0gZWxzZSBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdkYXRhLnZhbHVlJzogdmFsdWUgfSlcbiAgfVxuXG4gIGFzeW5jIGluY3JlYXNlRXhwZXJpZW5jZSAoeCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICdza2lsbCcpIHJldHVybiBudWxsXG4gICAgaWYgKHRoaXMuYWN0b3IuZGF0YS50eXBlID09PSAnY2hhcmFjdGVyJykge1xuICAgICAgY29uc3QgZXhwID1cbiAgICAgICAgKHRoaXMuZGF0YS5kYXRhLmFkanVzdG1lbnRzPy5leHBlcmllbmNlXG4gICAgICAgICAgPyBwYXJzZUludCh0aGlzLmRhdGEuZGF0YS5hZGp1c3RtZW50cy5leHBlcmllbmNlKVxuICAgICAgICAgIDogMCkgKyBwYXJzZUludCh4KVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnZGF0YS5hZGp1c3RtZW50cy5leHBlcmllbmNlJzogZXhwID4gMCA/IGV4cCA6IDBcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgZ2V0QnVsbGV0TGVmdCAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgaWYgKCF0aGlzLmRhdGEuZGF0YS5hbW1vKSB7XG4gICAgICB0aGlzLnNldEJ1bGxldHMoMClcbiAgICAgIHJldHVybiAwXG4gICAgfVxuICAgIHJldHVybiB0aGlzLmRhdGEuZGF0YS5hbW1vXG4gIH1cblxuICBhc3luYyByZWxvYWQgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IG1heEJ1bGxldCA9IHRoaXMuZGF0YS5kYXRhLmJ1bGxldHNcbiAgICAgID8gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEuYnVsbGV0cylcbiAgICAgIDogMVxuICAgIGF3YWl0IHRoaXMuc2V0QnVsbGV0cyhtYXhCdWxsZXQpXG4gIH1cblxuICBhc3luYyBzZXRCdWxsZXRzIChidWxsZXRzKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS5hbW1vJzogYnVsbGV0cyB8fCAwIH0pXG4gIH1cblxuICBhc3luYyBhZGRCdWxsZXQgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IGJ1bGxldHMgPSBhd2FpdCB0aGlzLmdldEJ1bGxldExlZnQoKVxuICAgIGNvbnN0IG1heEJ1bGxldHMgPSB0aGlzLmRhdGEuZGF0YS5idWxsZXRzXG4gICAgICA/IHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLmJ1bGxldHMpXG4gICAgICA6IDFcbiAgICBpZiAoYnVsbGV0cyArIDEgPj0gbWF4QnVsbGV0cykgYXdhaXQgdGhpcy5zZXRCdWxsZXRzKG1heEJ1bGxldHMpXG4gICAgZWxzZSBhd2FpdCB0aGlzLnNldEJ1bGxldHMoYnVsbGV0cyArIDEpXG4gIH1cblxuICBhc3luYyBzaG9vdEJ1bGxldHMgKHgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcbiAgICBjb25zdCBidWxsZXRzID0gYXdhaXQgdGhpcy5nZXRCdWxsZXRMZWZ0KClcbiAgICBpZiAoeCA+IGJ1bGxldHMpIGF3YWl0IHRoaXMuc2V0QnVsbGV0cygwKVxuICAgIGVsc2UgYXdhaXQgdGhpcy5zZXRCdWxsZXRzKGJ1bGxldHMgLSB4KVxuICB9XG5cbiAgc3RhdGljIG1lcmdlT3B0aW9uYWxTa2lsbHMgKHNraWxsTGlzdCwgb3B0aW9ucykge1xuICAgIGNvbnN0IGpvaW50QXJyYXkgPSBza2lsbExpc3QuY29uY2F0KG9wdGlvbnMpXG4gICAgcmV0dXJuIGpvaW50QXJyYXlcbiAgICAgIC5yZWR1Y2UoKG5ld0FycmF5LCBpdGVtKSA9PiB7XG4gICAgICAgIC8vIElmIHNraWxsIGlzIG5vdCBhIGdlbmVyaWMgc3BlYyBhbmQgaXMgYWxyZWFkeSBpbmNsdWRlZCB3ZSBkb24ndCBhZGQgaXRlbVxuICAgICAgICBpZiAoXG4gICAgICAgICAgIUNvQzdJdGVtLmlzQW55U3BlYyhpdGVtKSAmJlxuICAgICAgICAgIG5ld0FycmF5LmZpbmQoc2tpbGwgPT4gc2tpbGwubmFtZSA9PT0gaXRlbS5uYW1lKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gbmV3QXJyYXlcbiAgICAgICAgfVxuICAgICAgICAvLyBFbHNlIGl0ZW0gaXMgYWRkZWRcbiAgICAgICAgcmV0dXJuIFsuLi5uZXdBcnJheSwgaXRlbV1cbiAgICAgIH0sIFtdKVxuICAgICAgLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgbGV0IGxjYVxuICAgICAgICBsZXQgbGNiXG4gICAgICAgIGlmIChhLmRhdGEucHJvcGVydGllcyAmJiBiLmRhdGEucHJvcGVydGllcykge1xuICAgICAgICAgIGxjYSA9IGEuZGF0YS5wcm9wZXJ0aWVzLnNwZWNpYWxcbiAgICAgICAgICAgID8gYS5kYXRhLnNwZWNpYWxpemF0aW9uLnRvTG93ZXJDYXNlKCkgKyBhLm5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgOiBhLm5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgICAgIGxjYiA9IGIuZGF0YS5wcm9wZXJ0aWVzLnNwZWNpYWxcbiAgICAgICAgICAgID8gYi5kYXRhLnNwZWNpYWxpemF0aW9uLnRvTG93ZXJDYXNlKCkgKyBiLm5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgOiBiLm5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxjYSA9IGEubmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgbGNiID0gYi5uYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGNhLmxvY2FsZUNvbXBhcmUobGNiKVxuICAgICAgfSlcbiAgfVxuXG4gIC8qKiBUT0RPIDogcmllbiBhIGZhaXJlIGljaSAhIVxuICAgKiBHZXQgdGhlIEFjdG9yIHdoaWNoIGlzIHRoZSBhdXRob3Igb2YgYSBjaGF0IGNhcmRcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY2FyZCAgICBUaGUgY2hhdCBjYXJkIGJlaW5nIHVzZWRcbiAgICogQHJldHVybiB7QWN0b3J8bnVsbH0gICAgICAgICBUaGUgQWN0b3IgZW50aXR5IG9yIG51bGxcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN0YXRpYyBfZ2V0Q2hhdENhcmRBY3RvciAoY2FyZCkge1xuICAgIC8vIENhc2UgMSAtIGEgc3ludGhldGljIGFjdG9yIGZyb20gYSBUb2tlblxuICAgIGNvbnN0IHRva2VuS2V5ID0gY2FyZC5kYXRhc2V0LnRva2VuSWRcbiAgICBpZiAodG9rZW5LZXkpIHtcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IHRva2VuS2V5LnNwbGl0KCcuJylcbiAgICAgIGlmIChzY2VuZUlkID09PSAnVE9LRU4nKSB7XG4gICAgICAgIHJldHVybiBnYW1lLmFjdG9ycy50b2tlbnNbdG9rZW5JZF0gLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzY2VuZUlkKVxuICAgICAgICBpZiAoIXNjZW5lKSByZXR1cm4gbnVsbFxuICAgICAgICBjb25zdCB0b2tlbkRhdGEgPSBzY2VuZS5nZXRFbWJlZGRlZERvY3VtZW50KCdUb2tlbicsIHRva2VuSWQpXG4gICAgICAgIGlmICghdG9rZW5EYXRhKSByZXR1cm4gbnVsbFxuICAgICAgICBjb25zdCB0b2tlbiA9IG5ldyBUb2tlbih0b2tlbkRhdGEpXG4gICAgICAgIHJldHVybiB0b2tlbi5hY3RvclxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENhc2UgMiAtIHVzZSBBY3RvciBJRCBkaXJlY3RvcnlcbiAgICBjb25zdCBhY3RvcklkID0gY2FyZC5kYXRhc2V0LmFjdG9ySWRcbiAgICByZXR1cm4gZ2FtZS5hY3RvcnMuZ2V0KGFjdG9ySWQpIHx8IG51bGxcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gIC8qICBDaGF0IE1lc3NhZ2UgSGVscGVycyAgICAgICAgICAgICAgICAgICAgICAgICovXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIFByZXBhcmUgYW4gb2JqZWN0IG9mIGNoYXQgZGF0YSB1c2VkIHRvIGRpc3BsYXkgYSBjYXJkIGZvciB0aGUgSXRlbSBpbiB0aGUgY2hhdCBsb2dcbiAgICogQHBhcmFtIHtPYmplY3R9IGh0bWxPcHRpb25zICAgIE9wdGlvbnMgdXNlZCBieSB0aGUgVGV4dEVkaXRvci5lbnJpY2hIVE1MIGZ1bmN0aW9uXG4gICAqIEByZXR1cm4ge09iamVjdH0gICAgICAgICAgICAgICBBbiBvYmplY3Qgb2YgY2hhdCBkYXRhIHRvIHJlbmRlclxuICAgKi9cbiAgZ2V0Q2hhdERhdGEgKGh0bWxPcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBkYXRhID0gZHVwbGljYXRlKHRoaXMuZGF0YS5kYXRhKVxuICAgIC8vIEZpeCA6IGRhdGEgY2FuIGhhdmUgZGVzY3JpcHRpb24gZGlyZWN0bHkgaW4gZmllbGQsIG5vdCB1bmRlciB2YWx1ZS5cbiAgICBpZiAodHlwZW9mIGRhdGEuZGVzY3JpcHRpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICBkYXRhLmRlc2NyaXB0aW9uID0ge1xuICAgICAgICB2YWx1ZTogZGF0YS5kZXNjcmlwdGlvbixcbiAgICAgICAgc3BlY2lhbDogJydcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBkYXRhLmRlc2NyaXB0aW9uLnZhbHVlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgZGF0YS5kZXNjcmlwdGlvbi52YWx1ZSA9ICcnXG4gICAgfVxuICAgIGlmICh0eXBlb2YgZGF0YS5kZXNjcmlwdGlvbi5zcGVjaWFsID09PSAndW5kZWZpbmVkJykge1xuICAgICAgZGF0YS5kZXNjcmlwdGlvbi5zcGVjaWFsID0gJydcbiAgICB9XG4gICAgY29uc3QgbGFiZWxzID0gW11cblxuICAgIC8vIFJpY2ggdGV4dCBkZXNjcmlwdGlvblxuICAgIGRhdGEuZGVzY3JpcHRpb24udmFsdWUgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBkYXRhLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAgaHRtbE9wdGlvbnNcbiAgICApXG4gICAgZGF0YS5kZXNjcmlwdGlvbi52YWx1ZSA9IENvQzdQYXJzZXIuZW5yaWNoSFRNTChkYXRhLmRlc2NyaXB0aW9uLnZhbHVlKVxuICAgIGRhdGEuZGVzY3JpcHRpb24uc3BlY2lhbCA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIGRhdGEuZGVzY3JpcHRpb24uc3BlY2lhbCxcbiAgICAgIGh0bWxPcHRpb25zXG4gICAgKVxuICAgIGRhdGEuZGVzY3JpcHRpb24uc3BlY2lhbCA9IENvQzdQYXJzZXIuZW5yaWNoSFRNTChkYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWwpXG5cbiAgICAvLyBJdGVtIHR5cGUgc3BlY2lmaWMgcHJvcGVydGllc1xuICAgIGNvbnN0IHByb3BzID0gW11cbiAgICBjb25zdCBmbiA9IHRoaXNbYF8ke3RoaXMuZGF0YS50eXBlfUNoYXREYXRhYF1cbiAgICBpZiAoZm4pIGZuLmJpbmQodGhpcykoZGF0YSwgbGFiZWxzLCBwcm9wcywgaHRtbE9wdGlvbnMpXG5cbiAgICBpZiAodGhpcy50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LnNraWxsUHJvcGVydGllcykpIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0YS5kYXRhLnByb3BlcnRpZXNba2V5XSA9PT0gdHJ1ZSkgcHJvcHMucHVzaCh2YWx1ZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGaWx0ZXIgcHJvcGVydGllcyBhbmQgcmV0dXJuXG4gICAgZGF0YS5wcm9wZXJ0aWVzID0gcHJvcHMuZmlsdGVyKHAgPT4gISFwKVxuICAgIGRhdGEubGFiZWxzID0gbGFiZWxzXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIF93ZWFwb25DaGF0RGF0YSAoZGF0YSwgbGFiZWxzLCBwcm9wcykge1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcud2VhcG9uUHJvcGVydGllcykpIHtcbiAgICAgIGlmICh0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzW2tleV0gPT09IHRydWUpIHByb3BzLnB1c2godmFsdWUpXG4gICAgfVxuXG4gICAgbGV0IHNraWxsTGFiZWwgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGwnKVxuICAgIGxldCBza2lsbE5hbWUgPSAnJ1xuICAgIGxldCBmb3VuZCA9IGZhbHNlXG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLnNraWxsLm1haW4uaWQpIHtcbiAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvcj8uaXRlbXMuZ2V0KHRoaXMuZGF0YS5kYXRhLnNraWxsLm1haW4uaWQpXG4gICAgICBpZiAoc2tpbGwpIHtcbiAgICAgICAgc2tpbGxOYW1lICs9IENvQzdJdGVtLmdldE5hbWVXaXRob3V0U3BlYyhza2lsbClcbiAgICAgICAgZm91bmQgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudXNlc0FsdGVybmF0aXZlU2tpbGwgJiYgdGhpcy5kYXRhLmRhdGEuc2tpbGwuYWx0ZXJuYXRpdi5pZCkge1xuICAgICAgc2tpbGxMYWJlbCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ta2lsbHMnKVxuICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yPy5pdGVtcy5nZXQodGhpcy5kYXRhLmRhdGEuc2tpbGwuYWx0ZXJuYXRpdi5pZClcbiAgICAgIGlmIChza2lsbCkge1xuICAgICAgICBza2lsbE5hbWUgKz0gYC8ke0NvQzdJdGVtLmdldE5hbWVXaXRob3V0U3BlYyhza2lsbCl9YFxuICAgICAgICBmb3VuZCA9IHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWZvdW5kKSB7XG4gICAgICBza2lsbE5hbWUgPSB0aGlzLmRhdGEuZGF0YS5za2lsbC5tYWluLm5hbWVcbiAgICAgIGlmICh0aGlzLnVzZXNBbHRlcm5hdGl2ZVNraWxsICYmIHRoaXMuZGF0YS5kYXRhLnNraWxsLmFsdGVybmF0aXYubmFtZSkge1xuICAgICAgICBza2lsbE5hbWUgKz0gYC8ke3RoaXMuZGF0YS5kYXRhLnNraWxsLmFsdGVybmF0aXYubmFtZX1gXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHNraWxsTmFtZSkge1xuICAgICAgbGFiZWxzLnB1c2goe1xuICAgICAgICBuYW1lOiBza2lsbExhYmVsLFxuICAgICAgICB2YWx1ZTogc2tpbGxOYW1lXG4gICAgICB9KVxuICAgIH1cblxuICAgIGxhYmVscy5wdXNoKHtcbiAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XZWFwb25Vc2VzUGVyUm91bmQnKSxcbiAgICAgIHZhbHVlOiB0aGlzLnVzZXNQZXJSb3VuZFN0cmluZ1xuICAgIH0pXG5cbiAgICBsYWJlbHMucHVzaCh7XG4gICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2VhcG9uTWFsZnVuY3Rpb24nKSxcbiAgICAgIHZhbHVlOiB0aGlzLmRhdGEuZGF0YS5tYWxmdW5jdGlvbiA/IHRoaXMuZGF0YS5kYXRhLm1hbGZ1bmN0aW9uIDogJy0nXG4gICAgfSlcblxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5idWxsZXRzKSB7XG4gICAgICBsYWJlbHMucHVzaCh7XG4gICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XZWFwb25CdWxsZXRzSW5NYWcnKSxcbiAgICAgICAgdmFsdWU6IHRoaXMuZGF0YS5kYXRhLmJ1bGxldHNcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgY2FuQmVQdXNoZWQgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgPT09ICdza2lsbCcgJiYgdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5wdXNoKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGltcGFsZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5kYXRhLnByb3BlcnRpZXMuaW1wbFxuICB9XG5cbiAgZ2V0IGlzRG9kZ2UgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICdza2lsbCcpIHJldHVybiBmYWxzZVxuICAgIHJldHVybiAoXG4gICAgICB0aGlzLm5hbWUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Eb2RnZVNraWxsTmFtZScpLnRvTG93ZXJDYXNlKClcbiAgICApXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBBY3RvciwgQXVkaW9IZWxwZXIsIENoYXRNZXNzYWdlLCBDT05GSUcsIENPTlNULCBkdXBsaWNhdGUsIGZvdW5kcnksIGZyb21VdWlkLCBnYW1lLCBnZXRDb21wdXRlZFN0eWxlLCBJdGVtLCBtZXJnZU9iamVjdCwgcmVuZGVyVGVtcGxhdGUsIFRva2VuLCB1aSAqL1xuXG5pbXBvcnQgeyBDb0M3RGljZSB9IGZyb20gJy4vZGljZS5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi9pdGVtcy9pdGVtLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgQ29DN1JvbGwgfSBmcm9tICcuL2NoYXQvaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDaGVjayB7XG4gIGNvbnN0cnVjdG9yIChcbiAgICBhY3RvciA9IG51bGwsXG4gICAgc2tpbGwgPSBudWxsLFxuICAgIGl0ZW0gPSBudWxsLFxuICAgIGRpY2VNb2QgPSAwLFxuICAgIGRpZmZpY3VsdHkgPSBudWxsLFxuICAgIGZsYXRUaHJlc2hvbGRNb2RpZmllciA9IDAsXG4gICAgZmxhdERpY2VNb2RpZmllciA9IDBcbiAgKSB7XG4gICAgdGhpcy5hY3RvciA9IGFjdG9yXG4gICAgdGhpcy5za2lsbCA9IHNraWxsXG4gICAgdGhpcy5pdGVtID0gaXRlbVxuICAgIHRoaXMuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICB0aGlzLmRpY2VNb2RpZmllciA9IGRpY2VNb2RcbiAgICB0aGlzLnJhd1ZhbHVlID0gMCAvLyB2YWx1ZSBuZWVkZWQgYmVmb3JlIGRpZmZpY3VsdHlcbiAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IG51bGxcbiAgICB0aGlzLnJlZmVyZW5jZU1lc3NhZ2VJZCA9IG51bGxcbiAgICB0aGlzLnB1c2hpbmcgPSBmYWxzZVxuICAgIHRoaXMuZmxhdERpY2VNb2RpZmllciA9IGZsYXREaWNlTW9kaWZpZXJcbiAgICB0aGlzLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IGZsYXRUaHJlc2hvbGRNb2RpZmllclxuXG4gICAgaWYgKGRpZmZpY3VsdHkgPT09IG51bGwpIHtcbiAgICAgIGNvbnN0IGlzVW5rbm93biA9XG4gICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RlZmF1bHRDaGVja0RpZmZpY3VsdHknKSA9PT0gJ3Vua25vd24nXG4gICAgICB0aGlzLmRpZmZpY3VsdHkgPSBpc1Vua25vd25cbiAgICAgICAgPyBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnVua25vd25cbiAgICAgICAgOiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IGNhcmRUeXBlICgpIHtcbiAgICByZXR1cm4gJ3JvbGxDYXJkJ1xuICB9XG5cbiAgc3RhdGljIGdldCBkaWZmaWN1bHR5TGV2ZWwgKCkge1xuICAgIHJldHVybiB7XG4gICAgICB1bmtub3duOiAtMSxcbiAgICAgIHJlZ3VsYXI6IDEsXG4gICAgICBoYXJkOiAyLFxuICAgICAgZXh0cmVtZTogMyxcbiAgICAgIGNyaXRpY2FsOiA0LFxuICAgICAgaW1wb3NzaWJsZTogOVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3VjY2Vzc0xldmVsICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZnVtYmxlOiAtOTksXG4gICAgICBmYWlsdXJlOiAwLFxuICAgICAgcmVndWxhcjogMSxcbiAgICAgIGhhcmQ6IDIsXG4gICAgICBleHRyZW1lOiAzLFxuICAgICAgY3JpdGljYWw6IDRcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZGlmZmljdWx0eVN0cmluZyAoZGlmZmljdWx0eUxldmVsKSB7XG4gICAgc3dpdGNoIChcbiAgICAgICFpc05hTihOdW1iZXIoZGlmZmljdWx0eUxldmVsKSlcbiAgICAgICAgPyBOdW1iZXIoZGlmZmljdWx0eUxldmVsKVxuICAgICAgICA6IGRpZmZpY3VsdHlMZXZlbFxuICAgICkge1xuICAgICAgY2FzZSAnPyc6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVW5rbm93bkRpZmZpY3VsdHknKVxuICAgICAgY2FzZSAnKyc6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZERpZmZpY3VsdHknKVxuICAgICAgY2FzZSAnKysnOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVEaWZmaWN1bHR5JylcbiAgICAgIGNhc2UgJysrKyc6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxEaWZmaWN1bHR5JylcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyRGlmZmljdWx0eScpXG4gICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwudW5rbm93bjpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Vbmtub3duRGlmZmljdWx0eScpXG4gICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcjpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyRGlmZmljdWx0eScpXG4gICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZDpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkRGlmZmljdWx0eScpXG4gICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZTpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lRGlmZmljdWx0eScpXG4gICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWw6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxEaWZmaWN1bHR5JylcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG5cbiAgZ2V0IHJhd1ZhbHVlICgpIHtcbiAgICAvLyBpZiAoIXRoaXMuYWN0b3IgfHwgIXRoaXMuYWN0b3IuaWQpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAoIXRoaXMuX3Jhd1ZhbHVlKSB7XG4gICAgICBpZiAodGhpcy5jaGFyYWN0ZXJpc3RpYykge1xuICAgICAgICB0aGlzLnJhd1ZhbHVlID0gdGhpcy5hY3Rvci5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzW1xuICAgICAgICAgIHRoaXMuY2hhcmFjdGVyaXN0aWNcbiAgICAgICAgXS52YWx1ZVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc2tpbGwpIHRoaXMucmF3VmFsdWUgPSB0aGlzLnNraWxsLnZhbHVlXG4gICAgICBpZiAodGhpcy5hdHRyaWJ1dGUpIHtcbiAgICAgICAgdGhpcy5yYXdWYWx1ZSA9IHRoaXMuYWN0b3IuZGF0YS5kYXRhLmF0dHJpYnNbdGhpcy5hdHRyaWJ1dGVdLnZhbHVlXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLl9yYXdWYWx1ZSkge1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLmZsYXRUaHJlc2hvbGRNb2RpZmllciAmJlxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllcicpXG4gICAgICApIHtcbiAgICAgICAgaWYgKHRoaXMuX3Jhd1ZhbHVlICsgdGhpcy5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPCAxKSByZXR1cm4gMVxuICAgICAgICByZXR1cm4gdGhpcy5fcmF3VmFsdWUgKyB0aGlzLmZsYXRUaHJlc2hvbGRNb2RpZmllclxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuX3Jhd1ZhbHVlXG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHNldCByYXdWYWx1ZSAoeCkge1xuICAgIHRoaXMuX3Jhd1ZhbHVlID0geFxuICB9XG5cbiAgc2V0IHV1aWQgKHgpIHtcbiAgICB0aGlzLl91dWlkID0geFxuICB9XG5cbiAgZ2V0IHV1aWQgKCkge1xuICAgIGlmICghdGhpcy5fdXVpZCkgdGhpcy5fdXVpZCA9IGZvdW5kcnkudXRpbHMucmFuZG9tSUQoMTYpXG4gICAgcmV0dXJuIHRoaXMuX3V1aWRcbiAgfVxuXG4gIGdldCBoYXNDYXJkICgpIHtcbiAgICBjb25zdCBjaGF0Q2FyZCA9IHVpLmNoYXQuY29sbGVjdGlvbi5maWx0ZXIobWVzc2FnZSA9PiB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICB0aGlzLnV1aWQgPT09IG1lc3NhZ2UuZ2V0RmxhZygnQ29DNycsICd1dWlkJykgJiZcbiAgICAgICAgQ29DN0NoZWNrLmNhcmRUeXBlID09PSBtZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAndHlwZScpXG4gICAgICApXG4gICAgfSlcbiAgICBpZiAoY2hhdENhcmQubGVuZ3RoID4gMCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCByYXdWYWx1ZVN0cmluZyAoKSB7XG4gICAgaWYgKCF0aGlzLl9yYXdWYWx1ZSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmIChcbiAgICAgIHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyICYmXG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllcicpXG4gICAgKSB7XG4gICAgICBpZiAodGhpcy5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPCAwKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yYXdWYWx1ZS50b1N0cmluZygpICsgdGhpcy5mbGF0VGhyZXNob2xkTW9kaWZpZXIudG9TdHJpbmcoKVxuICAgICAgfVxuICAgICAgcmV0dXJuIChcbiAgICAgICAgdGhpcy5fcmF3VmFsdWUudG9TdHJpbmcoKSArICcrJyArIHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyLnRvU3RyaW5nKClcbiAgICAgIClcbiAgICB9IGVsc2UgcmV0dXJuIHRoaXMuX3Jhd1ZhbHVlLnRvU3RyaW5nKClcbiAgfVxuXG4gIGdldCBjcml0aWNhbFRocmVzaG9sZCAoKSB7XG4gICAgcmV0dXJuIDFcbiAgfVxuXG4gIGdldCByZWd1bGFyVGhyZXNob2xkICgpIHtcbiAgICBpZiAodGhpcy5yYXdWYWx1ZSkge1xuICAgICAgaWYgKHRoaXMucmF3VmFsdWUgPj0gMTAwKSByZXR1cm4gOTlcbiAgICAgIHJldHVybiBwYXJzZUludCh0aGlzLnJhd1ZhbHVlKVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGhhcmRUaHJlc2hvbGQgKCkge1xuICAgIGlmICh0aGlzLnJhd1ZhbHVlKSByZXR1cm4gTWF0aC5mbG9vcih0aGlzLnJhd1ZhbHVlIC8gMilcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGV4dHJlbWVUaHJlc2hvbGQgKCkge1xuICAgIGlmICh0aGlzLnJhd1ZhbHVlKSByZXR1cm4gTWF0aC5mbG9vcih0aGlzLnJhd1ZhbHVlIC8gNSlcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGZ1bWJsZVRocmVzaG9sZCAoKSB7XG4gICAgaWYgKHRoaXMucmF3VmFsdWUpIHJldHVybiB0aGlzLnJhd1ZhbHVlIDwgNTAgPyA5NiA6IDEwMFxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgc3VjY2VzVGhyZXNob2xkICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHN3aXRjaCAodGhpcy5kaWZmaWN1bHR5KSB7XG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lOlxuICAgICAgICAgIHJldHVybiB0aGlzLmV4dHJlbWVUaHJlc2hvbGRcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQ6XG4gICAgICAgICAgcmV0dXJuIHRoaXMuaGFyZFRocmVzaG9sZFxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcjpcbiAgICAgICAgICByZXR1cm4gdGhpcy5yZWd1bGFyVGhyZXNob2xkXG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgICByZXR1cm4gdGhpcy5jcml0aWNhbFRocmVzaG9sZFxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwudW5rbm93bjpcbiAgICAgICAgICByZXR1cm4gLTFcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gdGhpcy5yYXdWYWx1ZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGRpZmZpY3VsdHlTdHJpbmcgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5kaWZmaWN1bHR5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgc3dpdGNoICh0aGlzLmRpZmZpY3VsdHkpIHtcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWU6XG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXh0cmVtZURpZmZpY3VsdHknKVxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZDpcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5IYXJkRGlmZmljdWx0eScpXG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyOlxuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlZ3VsYXJEaWZmaWN1bHR5JylcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsOlxuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNyaXRpY2FsRGlmZmljdWx0eScpXG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duOlxuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlVua25vd25EaWZmaWN1bHR5JylcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gJydcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICBnZXQgbW9kaWZpZWRSZXN1bHQgKCkge1xuICAgIGlmICh0aGlzLnN0YW5kYnkpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodHlwZW9mIHRoaXMuX21vZGlmaWVkUmVzdWx0ICE9PSAndW5kZWZpbmVkJykgcmV0dXJuIHRoaXMuX21vZGlmaWVkUmVzdWx0XG4gICAgaWYgKHRoaXMuZmxhdERpY2VNb2RpZmllcikge1xuICAgICAgY29uc3QgbW9kaWZpZWQgPSB0aGlzLmRpY2VzLnRvdGFsICsgdGhpcy5mbGF0RGljZU1vZGlmaWVyXG4gICAgICBpZiAobW9kaWZpZWQgPCAxKSByZXR1cm4gMVxuICAgICAgaWYgKG1vZGlmaWVkID4gMTAwKSByZXR1cm4gMTAwXG4gICAgICByZXR1cm4gbW9kaWZpZWRcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZGljZXMudG90YWxcbiAgfVxuXG4gIHNldCBtb2RpZmllZFJlc3VsdCAoeCkge1xuICAgIHRoaXMuX21vZGlmaWVkUmVzdWx0ID0geFxuICB9XG5cbiAgZ2V0IGZsYXREaWNlTW9kaWZpZXJTdHJpbmcgKCkge1xuICAgIGlmICghdGhpcy5mbGF0RGljZU1vZGlmaWVyKSByZXR1cm4gbnVsbFxuICAgIGlmICh0aGlzLmZsYXREaWNlTW9kaWZpZXIgPiAwKSByZXR1cm4gYCske3RoaXMuZmxhdERpY2VNb2RpZmllcn1gXG4gICAgcmV0dXJuIHRoaXMuZmxhdERpY2VNb2RpZmllci50b1N0cmluZygpXG4gIH1cblxuICBnZXQgaXNGdW1ibGUgKCkge1xuICAgIGlmICh0aGlzLnN0YW5kYnkpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodGhpcy5pc1NpbXBsZVJvbGwpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5tb2RpZmllZFJlc3VsdCA+PSB0aGlzLmZ1bWJsZVRocmVzaG9sZFxuICB9XG5cbiAgZ2V0IGlzQ3JpdGljYWwgKCkge1xuICAgIGlmICh0aGlzLnN0YW5kYnkpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5tb2RpZmllZFJlc3VsdCA9PT0gMVxuICB9XG5cbiAgZ2V0IGlzRXh0cmVtZVN1Y2Nlc3MgKCkge1xuICAgIGlmICh0aGlzLnN0YW5kYnkpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5zdWNjZXNzTGV2ZWwgPj0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lXG4gIH1cblxuICBnZXQgcGFzc2VkICgpIHtcbiAgICBpZiAodGhpcy5zdGFuZGJ5KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHRoaXMuaXNTaW1wbGVSb2xsKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHRoaXMubHVja1NwZW50KSByZXR1cm4gdGhpcy5kaWZmaWN1bHR5IDw9IHRoaXMuc3VjY2Vzc0xldmVsXG4gICAgcmV0dXJuIHRoaXMuc3VjY2VzVGhyZXNob2xkID49IHRoaXMubW9kaWZpZWRSZXN1bHQgfHwgdGhpcy5pc0NyaXRpY2FsXG4gIH1cblxuICBnZXQgZmFpbGVkICgpIHtcbiAgICBpZiAodGhpcy5zdGFuZGJ5KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHRoaXMuaXNTaW1wbGVSb2xsKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuICF0aGlzLnBhc3NlZFxuICB9XG5cbiAgZ2V0IGlzU2ltcGxlUm9sbCAoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB0aGlzLnJhd1ZhbHVlID09PSAndW5kZWZpbmVkJ1xuICB9XG5cbiAgZ2V0IGhhc0JvbnVzICgpIHtcbiAgICBpZiAodGhpcy5kaWNlTW9kaWZpZXIgJiYgdGhpcy5kaWNlTW9kaWZpZXIgPiAwKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGhhc1BlbmFsdHkgKCkge1xuICAgIGlmICh0aGlzLmRpY2VNb2RpZmllciAmJiB0aGlzLmRpY2VNb2RpZmllciA8IDApIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgaGFzTW9kaWZpZXIgKCkge1xuICAgIGlmICh0aGlzLmRpY2VNb2RpZmllciAmJiB0aGlzLmRpY2VNb2RpZmllciAhPT0gMCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBkaWNlTW9kaWZpZXIgKCkge1xuICAgIGlmICh0aGlzLl9kaWNlTW9kaWZpZXIpIHJldHVybiB0aGlzLl9kaWNlTW9kaWZpZXJcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgc2V0IGRpY2VNb2RpZmllciAoeCkge1xuICAgIHRoaXMuX2RpY2VNb2RpZmllciA9IHBhcnNlSW50KHgpXG4gIH1cblxuICBnZXQgbmFtZSAoKSB7XG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgIGlmICh0aGlzLnNraWxsKSByZXR1cm4gdGhpcy5za2lsbC5uYW1lXG4gICAgICBpZiAodGhpcy5pdGVtKSByZXR1cm4gdGhpcy5pdGVtLm5hbWVcbiAgICAgIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgIHJldHVybiBDb0M3VXRpbGl0aWVzLmdldENoYXJhY3RlcmlzdGljTmFtZXModGhpcy5jaGFyYWN0ZXJpc3RpYyk/LmxhYmVsXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5hdHRyaWJ1dGUpIHtcbiAgICAgICAgaWYgKHRoaXMuYXR0cmlidXRlID09PSAnbGNrJykgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJylcbiAgICAgICAgaWYgKHRoaXMuYXR0cmlidXRlID09PSAnc2FuJykgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHknKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHNOYW1lICgpIHtcbiAgICBpZiAodGhpcy5hY3Rvcikge1xuICAgICAgaWYgKHRoaXMuc2tpbGwpIHJldHVybiB0aGlzLnNraWxsLnNOYW1lXG4gICAgICBpZiAodGhpcy5pdGVtKSByZXR1cm4gdGhpcy5pdGVtLm5hbWVcbiAgICAgIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgIHJldHVybiBDb0M3VXRpbGl0aWVzLmdldENoYXJhY3RlcmlzdGljTmFtZXModGhpcy5jaGFyYWN0ZXJpc3RpYyk/LnNob3J0XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5hdHRyaWJ1dGUpIHtcbiAgICAgICAgaWYgKHRoaXMuYXR0cmlidXRlID09PSAnbGNrJykgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJylcbiAgICAgICAgaWYgKHRoaXMuYXR0cmlidXRlID09PSAnc2FuJykgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TQU4nKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGZ1bGxOYW1lICgpIHtcbiAgICBjb25zdCBkaWZmaWN1bHR5ID1cbiAgICAgIHRoaXMuX2RpZmZpY3VsdHkgPT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgICA/IGZhbHNlXG4gICAgICAgIDogQ29DN0NoZWNrLmRpZmZpY3VsdHlTdHJpbmcodGhpcy5fZGlmZmljdWx0eSlcbiAgICBjb25zdCBtb2RpZmllciA9XG4gICAgICB0aGlzLl9kaWNlTW9kaWZpZXIgPiAwXG4gICAgICAgID8gYCske3RoaXMuX2RpY2VNb2RpZmllcn1gXG4gICAgICAgIDogdGhpcy5fZGljZU1vZGlmaWVyLnRvU3RyaW5nKClcbiAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgIGBDb0M3LkxpbmtDaGVjayR7IWRpZmZpY3VsdHkgPyAnJyA6ICdEaWZmJ30ke1xuICAgICAgICAhdGhpcy5fZGljZU1vZGlmaWVyID8gJycgOiAnTW9kaWYnXG4gICAgICB9YCxcbiAgICAgIHsgZGlmZmljdWx0eTogZGlmZmljdWx0eSwgbW9kaWZpZXI6IG1vZGlmaWVyLCBuYW1lOiB0aGlzLm5hbWUgfVxuICAgIClcbiAgfVxuXG4gIGdldCByb2xsZWQgKCkge1xuICAgIGlmICh0aGlzLmRpY2UpIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgY2hlY2sgZnJvbSBhbiBIVE1MRWxlbWVudCBvciBhIGNoYXQgY2FyZC5cbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY2FyZCAgVGhlIEhUTUxFbGVtZW50IHRoYXQgaXMgYSByb2xsLXJlc3VsdCBvciBhIGNoYXQgY2FyZCBjb250YWluaW5nIGEgc2luZ2xlIHJvbGwtcmVzdWx0LlxuICAgKiBAcmV0dXJuIHtDb0M3Q2hlY2t9ICAgICAgQSBDb0M3Q2hlY2suXG4gICAqL1xuICBzdGF0aWMgZ2V0RnJvbUNhcmQgKGNhcmQpIHtcbiAgICBjb25zdCByb2xsUmVzdWx0ID0gY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3JvbGwtcmVzdWx0JylcbiAgICAgID8gY2FyZFxuICAgICAgOiBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yb2xsLXJlc3VsdCcpXG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICBDb0M3Um9sbC5nZXRGcm9tRWxlbWVudChyb2xsUmVzdWx0LCBjaGVjaylcbiAgICBjb25zdCBtZXNzYWdlID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpXG4gICAgY2hlY2subWVzc2FnZUlkID0gbWVzc2FnZSA/IG1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQgOiBudWxsXG4gICAgcmV0dXJuIGNoZWNrXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgcHVzaCAoY2FyZCwgcHVibGlzaCA9IHRydWUpIHtcbiAgICBjb25zdCBvbGRDaGVjayA9IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKSAvLyBUT0RPOiBSZWZhY3RvcmluZ1xuICAgIGNvbnN0IGFjdG9ySWQgPSBjYXJkLmRhdGFzZXQudG9rZW5JZFxuICAgICAgPyBjYXJkLmRhdGFzZXQudG9rZW5JZFxuICAgICAgOiBjYXJkLmRhdGFzZXQuYWN0b3JJZFxuICAgIGNvbnN0IHNraWxsSWQgPSBjYXJkLmRhdGFzZXQuc2tpbGxJZFxuICAgIGNvbnN0IGNoYXJhYyA9IGNhcmQuZGF0YXNldC5jaGFyYWN0ZXJpc3RpY1xuICAgIGNvbnN0IGl0ZW1JZCA9IGNhcmQuZGF0YXNldC5pdGVtSWRcbiAgICBjb25zdCBkaWNlTW9kID0gY2FyZC5kYXRhc2V0LmRpY2VNb2RcbiAgICBjb25zdCBkaWZmaWN1bHR5ID0gY2FyZC5kYXRhc2V0LmRpZmZpY3VsdHlcblxuICAgIGxldCBwdXNoZWRSb2xsXG4gICAgaWYgKHNraWxsSWQpIHtcbiAgICAgIHB1c2hlZFJvbGwgPSBuZXcgQ29DN0NoZWNrKGFjdG9ySWQsIHNraWxsSWQsIGl0ZW1JZCwgZGljZU1vZCwgZGlmZmljdWx0eSlcbiAgICB9IGVsc2UgaWYgKGNoYXJhYykge1xuICAgICAgcHVzaGVkUm9sbCA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgcHVzaGVkUm9sbC5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kXG4gICAgICBwdXNoZWRSb2xsLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgICBwdXNoZWRSb2xsLmFjdG9yID0gYWN0b3JJZFxuICAgICAgcHVzaGVkUm9sbC5jaGFyYWN0ZXJpc3RpYyA9IGNoYXJhY1xuICAgIH0gZWxzZSByZXR1cm5cbiAgICBpZiAob2xkQ2hlY2sudXVpZCkge1xuICAgICAgcHVzaGVkUm9sbC5jb250ZXh0ID0gb2xkQ2hlY2suY29udGV4dFxuICAgICAgcHVzaGVkUm9sbC51dWlkID0gb2xkQ2hlY2sudXVpZFxuICAgIH1cbiAgICBpZiAob2xkQ2hlY2sucGFyZW50KSBwdXNoZWRSb2xsLnBhcmVudCA9IG9sZENoZWNrLnBhcmVudFxuICAgIHB1c2hlZFJvbGwucHVzaGluZyA9IHRydWVcbiAgICBhd2FpdCBwdXNoZWRSb2xsLnJvbGwoKVxuICAgIGlmIChwdWJsaXNoKSBwdXNoZWRSb2xsLnRvTWVzc2FnZSh0cnVlLCBjYXJkKVxuICB9XG5cbiAgZ2V0IHRva2VuICgpIHtcbiAgICBpZiAoIXRoaXMuYWN0b3IpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMuYWN0b3JLZXkpXG4gIH1cblxuICBzZXQgYWN0b3IgKHgpIHtcbiAgICB0aGlzLmFjdG9yS2V5ID0geFxuICAgIGlmICh4ID09IG51bGwpIHtcbiAgICAgIHRoaXMuX2FjdG9yID0geFxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHggaW5zdGFuY2VvZiBBY3Rvcikge1xuICAgICAgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB0aGlzLl9hY3RvciA9IHhcbiAgICAgIHRoaXMuX2FjdG9yLmFsaWFzID0gdGhpcy5hY3Rvci5uYW1lXG4gICAgICBpZiAoeC50b2tlbiAmJiB4LnRva2VuLnNjZW5lICYmIHgudG9rZW4uc2NlbmUuaWQpIHtcbiAgICAgICAgdGhpcy5hY3RvcktleSA9IGAke3gudG9rZW4uc2NlbmUuaWR9LiR7eC50b2tlbi5pZH1gXG4gICAgICB9IGVsc2UgdGhpcy5hY3RvcktleSA9IHguaWQgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoeC5pbmNsdWRlcygnLicpKSB7XG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSB4LnNwbGl0KCcuJykgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICB0aGlzLl9hY3RvciA9IGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgICAgdGhpcy5fYWN0b3IuYWxpYXMgPSB0aGlzLl9hY3Rvci5uYW1lIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgICAgaWYgKCFzY2VuZSkgcmV0dXJuXG4gICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcbiAgICAgICAgaWYgKCF0b2tlbkRhdGEpIHJldHVyblxuICAgICAgICBjb25zdCB0b2tlbiA9IG5ldyBUb2tlbih0b2tlbkRhdGEpXG4gICAgICAgIHRoaXMuX2FjdG9yID0gdG9rZW4uYWN0b3JcbiAgICAgICAgdGhpcy5fYWN0b3IuYWxpYXMgPSB0b2tlbi5uYW1lXG4gICAgICB9XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB0aGlzLl9hY3RvciA9IGdhbWUuYWN0b3JzLmdldCh4KVxuICAgIHRoaXMuYWN0b3IuYWxpYXMgPSB0aGlzLmFjdG9yLm5hbWVcbiAgfVxuXG4gIGdldCBzdWNjZXNzTGV2ZWxJY29ucyAoKSB7XG4gICAgaWYgKHRoaXMudW5rbm93bkRpZmZpY3VsdHkpIHJldHVybiBudWxsXG4gICAgaWYgKHRoaXMuaXNTaW1wbGVSb2xsKSByZXR1cm4gbnVsbFxuICAgIGlmICh0aGlzLnN1Y2Nlc3NMZXZlbCA+PSB0aGlzLmRpZmZpY3VsdHkpIHtcbiAgICAgIGNvbnN0IGljb25zID0gW11cbiAgICAgIGZvciAoXG4gICAgICAgIGxldCBpbmRleCA9IDA7XG4gICAgICAgIGluZGV4IDwgdGhpcy5zdWNjZXNzTGV2ZWwgLSB0aGlzLmRpZmZpY3VsdHkgKyAxO1xuICAgICAgICBpbmRleCsrXG4gICAgICApIHtcbiAgICAgICAgaWNvbnMucHVzaCh0aGlzLmlzQ3JpdGljYWwgPyAnbWVkYWwnIDogJ3N0YXInKVxuICAgICAgfVxuICAgICAgY29uc3Qgc3VjY2Vzc0hpbnQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlN1Y2Nlc0xldmVsSGludCcsIHtcbiAgICAgICAgdmFsdWU6IHRoaXMuc3VjY2Vzc0xldmVsIC0gdGhpcy5kaWZmaWN1bHR5ICsgMVxuICAgICAgfSlcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGNzc0NsYXNzOiB0aGlzLmlzQ3JpdGljYWwgPyAnY3JpdGljYWwnIDogJ3N1Y2Nlc3MnLFxuICAgICAgICBoaW50OiBzdWNjZXNzSGludCxcbiAgICAgICAgaWNvbnM6IGljb25zXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGljb25zID0gW11cbiAgICAgIGNvbnN0IHN1Y2Nlc3NMZXZlbCA9IHRoaXMuaXNGdW1ibGUgPyAtMSA6IHRoaXMuc3VjY2Vzc0xldmVsXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5kaWZmaWN1bHR5IC0gc3VjY2Vzc0xldmVsOyBpbmRleCsrKSB7XG4gICAgICAgIGljb25zLnB1c2godGhpcy5pc0Z1bWJsZSA/ICdza3VsbCcgOiAnc3BpZGVyJylcbiAgICAgIH1cbiAgICAgIGNvbnN0IGZhaWx1cmVIaW50ID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5GYWlsdXJlTGV2ZWxIaW50Jywge1xuICAgICAgICB2YWx1ZTogdGhpcy5kaWZmaWN1bHR5IC0gc3VjY2Vzc0xldmVsXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGNzc0NsYXNzOiB0aGlzLmlzRnVtYmxlID8gJ2Z1bWJsZScgOiAnZmFpbHVyZScsXG4gICAgICAgIGhpbnQ6IGZhaWx1cmVIaW50LFxuICAgICAgICBpY29uczogaWNvbnNcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXQgaXNCbGluZCAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5faXNCbGluZCkge1xuICAgICAgdGhpcy5faXNCbGluZCA9IHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9pc0JsaW5kXG4gIH1cblxuICBzZXQgaXNCbGluZCAoeCkge1xuICAgIHRoaXMuX2lzQmxpbmQgPSB4XG4gIH1cblxuICBnZXQgdW5rbm93bkRpZmZpY3VsdHkgKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuZ21EaWZmaWN1bHR5Q3JpdGljYWwgfHxcbiAgICAgIHRoaXMuZ21EaWZmaWN1bHR5RXh0cmVtZSB8fFxuICAgICAgdGhpcy5nbURpZmZpY3VsdHlIYXJkIHx8XG4gICAgICB0aGlzLmdtRGlmZmljdWx0eVJlZ3VsYXJcbiAgICApIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duID09PSB0aGlzLmRpZmZpY3VsdHlcbiAgfVxuXG4gIGdldCByb2xsTW9kZSAoKSB7XG4gICAgaWYgKCF0aGlzLl9yb2xsTW9kZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgcmV0dXJuIHRoaXMuX3JvbGxNb2RlXG4gIH1cblxuICBzZXQgcm9sbE1vZGUgKHgpIHtcbiAgICBpZiAoeCA9PT0gZmFsc2UpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHRoaXMuX3JvbGxNb2RlID0geFxuICB9XG5cbiAgc2V0IHNraWxsICh4KSB7XG4gICAgdGhpcy5fc2tpbGwgPSB0aGlzLl9nZXRJdGVtRnJvbUlkKHgpXG4gICAgdGhpcy5za2lsbElkID0geFxuICB9XG5cbiAgc2V0IGl0ZW0gKHgpIHtcbiAgICB0aGlzLl9pdGVtID0gdGhpcy5fZ2V0SXRlbUZyb21JZCh4KVxuICAgIGlmICh0aGlzLl9pdGVtPy50eXBlID09PSAnd2VhcG9uJykge1xuICAgICAgdGhpcy5pdGVtSWQgPSB4XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2l0ZW0gPSB1bmRlZmluZWRcbiAgICAgIHRoaXMuaXRlbUlkID0gdW5kZWZpbmVkXG4gICAgfVxuICB9XG5cbiAgX2dldEl0ZW1Gcm9tSWQgKHgpIHtcbiAgICBpZiAoeCA9PSBudWxsKSByZXR1cm4gbnVsbFxuICAgIGlmICh4IGluc3RhbmNlb2YgSXRlbSkgcmV0dXJuIHhcbiAgICBpZiAodGhpcy5fYWN0b3IpIHJldHVybiB0aGlzLl9hY3Rvci5pdGVtcy5nZXQoeClcbiAgICByZXR1cm4gZ2FtZS5pdGVtcy5nZXQoeClcbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgaWYgKCF0aGlzLl9hY3RvciB8fCAhdGhpcy5fYWN0b3I/LmlkKSB7XG4gICAgICBpZiAodGhpcy5hY3RvcktleSkgdGhpcy5fYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGlmICh0aGlzLmFjdG9ySWQpIHRoaXMuX2FjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcklkKSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGlmICghdGhpcy5fYWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpc0R1bW15OiB0cnVlLFxuICAgICAgICAgIG5hbWU6IHRoaXMuYWN0b3JOYW1lID8gdGhpcy5hY3Rvck5hbWUgOiB1bmRlZmluZWQsXG4gICAgICAgICAgaWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICBpbWc6ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3F1ZXN0aW9uLWNpcmNsZS1yZWd1bGFyLnN2ZycsXG4gICAgICAgICAgcG9ydHJhaXQ6ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3F1ZXN0aW9uLWNpcmNsZS1yZWd1bGFyLnN2ZydcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5fYWN0b3IuY29uc3RydWN0b3IubmFtZSA9PT0gJ09iamVjdCcpIHtcbiAgICAgIGNvbnN0IGFjdG9yID0gbmV3IENvQ0FjdG9yKHRoaXMuX2FjdG9yKVxuICAgICAgdGhpcy5fYWN0b3IgPSBhY3RvclxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fYWN0b3JcbiAgfVxuXG4gIGdldCBza2lsbCAoKSB7XG4gICAgaWYgKCF0aGlzLl9za2lsbCAmJiB0aGlzLnNraWxsSWQpIHtcbiAgICAgIHRoaXMuX3NraWxsID0gdGhpcy5hY3Rvcj8uaXRlbXMuZ2V0KHRoaXMuc2tpbGxJZClcbiAgICB9XG4gICAgaWYgKCF0aGlzLl9za2lsbCAmJiB0aGlzLml0ZW0pIHtcbiAgICAgIGlmICh0aGlzLml0ZW0uZGF0YS5kYXRhLnNraWxsKSB7XG4gICAgICAgIGlmICh0aGlzLml0ZW0uZGF0YS5kYXRhLnNraWxsLm1haW4uaWQgJiYgIXRoaXMud2VhcG9uQWx0U2tpbGwpIHtcbiAgICAgICAgICB0aGlzLl9za2lsbCA9IHRoaXMuX2FjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW0uZGF0YS5kYXRhLnNraWxsLm1haW4uaWQpXG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgdGhpcy5pdGVtLmRhdGEuZGF0YS5za2lsbC5hbHRlcm5hdGl2LmlkICYmXG4gICAgICAgICAgdGhpcy53ZWFwb25BbHRTa2lsbFxuICAgICAgICApIHtcbiAgICAgICAgICB0aGlzLl9za2lsbCA9IHRoaXMuX2FjdG9yLml0ZW1zLmdldChcbiAgICAgICAgICAgIHRoaXMuaXRlbS5kYXRhLmRhdGEuc2tpbGwuYWx0ZXJuYXRpdi5pZFxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fc2tpbGxcbiAgfVxuXG4gIGdldCBpdGVtICgpIHtcbiAgICBpZiAoIXRoaXMuX2l0ZW0gJiYgdGhpcy5pdGVtSWQgJiYgdGhpcy5hY3Rvcikge1xuICAgICAgdGhpcy5faXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMuaXRlbUlkKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5faXRlbVxuICB9XG5cbiAgZ2V0IGRpc3BsYXlSZXN1bHRUeXBlICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheVJlc3VsdFR5cGUnKVxuICB9XG5cbiAgZ2V0IGRpc3BsYXlDaGVja1N1Y2Nlc3NMZXZlbCAoKSB7XG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlDaGVja1N1Y2Nlc3NMZXZlbCcpXG4gIH1cblxuICBnZXQgZGlzcGxheUJvdGhTdWNjZXNzTGV2ZWwgKCkge1xuICAgIHJldHVybiB0aGlzLmRpc3BsYXlSZXN1bHRUeXBlICYmIHRoaXMuZGlzcGxheUNoZWNrU3VjY2Vzc0xldmVsXG4gIH1cblxuICBnZXQgZG9udERpc3BsYXlTdWNjZXNzTGV2ZWwgKCkge1xuICAgIHJldHVybiAhdGhpcy5kaXNwbGF5UmVzdWx0VHlwZSAmJiAhdGhpcy5kaXNwbGF5Q2hlY2tTdWNjZXNzTGV2ZWxcbiAgfVxuXG4gIGdldCBpbWFnZSAoKSB7XG4gICAgaWYgKHRoaXMuc2tpbGwpIHJldHVybiB0aGlzLnNraWxsLmltZ1xuICAgIGlmICh0aGlzLml0ZW0pIHJldHVybiB0aGlzLml0ZW0uaW1nXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGxpbmsgKCkge1xuICAgIHJldHVybiB0aGlzLmdldExpbmtFbGVtZW50KCkub3V0ZXJIVE1MXG4gIH1cblxuICBnZXQgZGlzcGxheUFjdG9yT25DYXJkICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJylcbiAgfVxuXG4gIGdldExpbmtFbGVtZW50IChjbGFzc2VzID0gbnVsbCkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBjbHM6IFsnY29jNy1saW5rJywgJ2NvYzctcm9sbCddLmNvbmNhdChjbGFzc2VzKSxcbiAgICAgIGRhdGFzZXQ6IHsgY2hlY2s6ICdjaGVjaycgfSxcbiAgICAgIGljb246IHRoaXMuaW1hZ2VcbiAgICAgICAgPyBgPGRpdiBzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6IHVybCgke3RoaXMuaW1hZ2V9KVwiPjwvZGl2PmBcbiAgICAgICAgOiAnPGkgY2xhc3M9XCJmYXMgZmEtZGljZVwiPjwvaT4nLFxuICAgICAgYmxpbmQ6IHRoaXMuaXNCbGluZFxuICAgIH1cblxuICAgIGNvbnN0IGRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eVN0cmluZyh0aGlzLl9kaWZmaWN1bHR5KVxuICAgIGNvbnN0IHRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgIGBDb0M3LkxpbmtDaGVjayR7IXRoaXMuX2RpZmZpY3VsdHkgPyAnJyA6ICdEaWZmJ30ke1xuICAgICAgICAhdGhpcy5fZGljZU1vZGlmaWVyID8gJycgOiAnTW9kaWYnXG4gICAgICB9YCxcbiAgICAgIHtcbiAgICAgICAgZGlmZmljdWx0eTogZGlmZmljdWx0eSxcbiAgICAgICAgbW9kaWZpZXI6IHRoaXMuX2RpY2VNb2RpZmllcixcbiAgICAgICAgbmFtZTogdGhpcy5uYW1lXG4gICAgICB9XG4gICAgKVxuXG4gICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKVxuICAgIGEudGl0bGUgPSB0aXRsZVxuICAgIGEuY2xhc3NMaXN0LmFkZCguLi5kYXRhLmNscylcbiAgICBhLmlubmVySFRNTCA9IGAke2RhdGEuYmxpbmQgPyAnPGkgY2xhc3M9XCJmYXMgZmEtZXllLXNsYXNoXCI+PC9pPicgOiAnJ30ke1xuICAgICAgZGF0YS5pY29uXG4gICAgfSR7dGhpcy5uYW1lfWBcblxuICAgIHJldHVybiBhXG4gIH1cblxuICBhc3luYyByb2xsIChkaWNlTW9kID0gbnVsbCwgZGlmZmljdWx0eSA9IG51bGwpIHtcbiAgICBpZiAoZGljZU1vZCkgdGhpcy5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kXG4gICAgaWYgKGRpZmZpY3VsdHkpIHRoaXMuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICBpZiAoIXRoaXMuc3RhbmRieSkgYXdhaXQgdGhpcy5fcGVyZm9ybSgpXG4gIH1cblxuICBzdGF0aWMgY3JlYXRlICh7XG4gICAgZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcixcbiAgICBkaWNlTW9kaWZpZXIgPSBudWxsLFxuICAgIGFjdG9yS2V5ID0gbnVsbCxcbiAgICBjaGFyYWN0ZXJpc3RpYyA9IG51bGwsXG4gICAgYXR0cmlidXRlID0gbnVsbCxcbiAgICByYXdWYWx1ZSA9IDAsXG4gICAgc2tpbGwgPSBudWxsLFxuICAgIGZsYXREaWNlTW9kaWZpZXIgPSAwLFxuICAgIGZsYXRUaHJlc2hvbGRNb2RpZmllciA9IDAsXG4gICAgZGlzcGxheU5hbWUgPSBudWxsLFxuICAgIGFjdG9yTmFtZSA9IG51bGxcbiAgfSA9IHt9KSB7XG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICBjaGVjay5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgIGlmIChkaWNlTW9kaWZpZXIpIGNoZWNrLmRpY2VNb2RpZmllciA9IGRpY2VNb2RpZmllclxuICAgIGlmIChmbGF0RGljZU1vZGlmaWVyKSBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gZmxhdERpY2VNb2RpZmllclxuICAgIGlmIChmbGF0VGhyZXNob2xkTW9kaWZpZXIpIHtcbiAgICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IGZsYXRUaHJlc2hvbGRNb2RpZmllclxuICAgIH1cbiAgICBpZiAoZGlzcGxheU5hbWUpIGNoZWNrLmRpc3BsYXlOYW1lID0gZGlzcGxheU5hbWVcbiAgICBpZiAoYWN0b3JLZXkpIGNoZWNrLmFjdG9yID0gYWN0b3JLZXlcbiAgICBpZiAoYWN0b3JOYW1lKSBjaGVjay5hY3Rvck5hbWUgPSBhY3Rvck5hbWVcbiAgICBpZiAoIWlzTmFOKE51bWJlcihyYXdWYWx1ZSkpKSBjaGVjay5yYXdWYWx1ZSA9IE51bWJlcihyYXdWYWx1ZSlcbiAgICBpZiAoY2hlY2suYWN0b3IgJiYgIWNoZWNrLmFjdG9yLmlzRHVtbXkpIHtcbiAgICAgIC8vIFRPRE8gOiBBZGQgY2hlY2sgZm9yIHZhbGlkaXR5IG9mIGNoYXJhY3RlcmlzdGljLCBhdHRyaWJ1dGUsIHNraWxsSWRcbiAgICAgIGlmIChza2lsbCkgY2hlY2suc2tpbGwgPSBza2lsbFxuICAgICAgLy8gVE9ETyA6IHRyeSByZXRyaWV2ZSBza2lsbCBieSBuYW1lXG4gICAgICBlbHNlIGlmIChjaGFyYWN0ZXJpc3RpYykgY2hlY2suY2hhcmFjdGVyaXN0aWMgPSBjaGFyYWN0ZXJpc3RpY1xuICAgICAgZWxzZSBpZiAoYXR0cmlidXRlKSBjaGVjay5hdHRyaWJ1dGUgPSBhdHRyaWJ1dGVcbiAgICB9XG4gICAgcmV0dXJuIGNoZWNrXG4gIH1cblxuICBhc3luYyByb2xsQ2hhcmFjdGVyaXN0aWMgKGNoYXIsIGRpY2VNb2QgPSBudWxsLCBkaWZmaWN1bHR5ID0gbnVsbCkge1xuICAgIGlmIChkaWNlTW9kKSB0aGlzLmRpY2VNb2RpZmllciA9IGRpY2VNb2RcbiAgICBpZiAoZGlmZmljdWx0eSkgdGhpcy5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgIHRoaXMuY2hhcmFjdGVyaXN0aWMgPSBjaGFyXG4gICAgaWYgKCF0aGlzLnN0YW5kYnkpIGF3YWl0IHRoaXMuX3BlcmZvcm0oKVxuICB9XG5cbiAgYXN5bmMgcm9sbEF0dHJpYnV0ZSAoYXR0cmliLCBkaWNlTW9kID0gbnVsbCwgZGlmZmljdWx0eSA9IG51bGwpIHtcbiAgICBpZiAoZGljZU1vZCkgdGhpcy5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kXG4gICAgaWYgKGRpZmZpY3VsdHkpIHRoaXMuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICB0aGlzLmF0dHJpYnV0ZSA9IGF0dHJpYlxuICAgIGlmICghdGhpcy5zdGFuZGJ5KSBhd2FpdCB0aGlzLl9wZXJmb3JtKClcbiAgfVxuXG4gIGFzeW5jIHJvbGxWYWx1ZSAodmFsLCBkaWNlTW9kID0gbnVsbCwgZGlmZmljdWx0eSA9IG51bGwpIHtcbiAgICBpZiAoZGljZU1vZCkgdGhpcy5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kXG4gICAgaWYgKGRpZmZpY3VsdHkpIHRoaXMuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICB0aGlzLnJhd1ZhbHVlID0gdmFsXG4gICAgaWYgKCF0aGlzLnN0YW5kYnkpIGF3YWl0IHRoaXMuX3BlcmZvcm0oKVxuICB9XG5cbiAgYXN5bmMgX3BlcmZvcm0gKG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMuZGljZSA9XG4gICAgICBvcHRpb25zLnJvbGwgfHxcbiAgICAgIChhd2FpdCBDb0M3RGljZS5yb2xsKHRoaXMuZGljZU1vZGlmaWVyLCB0aGlzLnJvbGxNb2RlLCB0aGlzLmlzQmxpbmQpKVxuICAgIGlmICghb3B0aW9ucy5zaWxlbnQpIEF1ZGlvSGVscGVyLnBsYXkoeyBzcmM6IENPTkZJRy5zb3VuZHMuZGljZSB9KVxuXG4gICAgaWYgKG9wdGlvbnMuZm9yY2VEU04pIHtcbiAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHRoaXMuZGljZS5yb2xsKVxuICAgIH1cblxuICAgIHRoaXMuZGljZXMgPSB7XG4gICAgICB0ZW5zOiBbXSxcbiAgICAgIHVuaXQ6IHtcbiAgICAgICAgdmFsdWU6IHRoaXMuZGljZS51bml0LnRvdGFsXG4gICAgICB9LFxuICAgICAgdG90YWw6IHRoaXMuZGljZS50b3RhbCxcbiAgICAgIHRlblJlc3VsdDogdGhpcy5kaWNlLnRvdGFsIC0gdGhpcy5kaWNlLnVuaXQudG90YWwsXG4gICAgICBoYXNCb251czogISF0aGlzLmRpY2VNb2RpZmllcixcbiAgICAgIGJvbnVzOiBNYXRoLmFicyh0aGlzLmRpY2VNb2RpZmllciksXG4gICAgICBib251c1R5cGU6XG4gICAgICAgIHRoaXMuZGljZU1vZGlmaWVyIDwgMFxuICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EaWNlTW9kaWZpZXJQZW5hbHR5JylcbiAgICAgICAgICA6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGljZU1vZGlmaWVyQm9udXMnKSxcbiAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVxuICAgIH1cblxuICAgIGNvbnN0IG1heCA9IHRoaXMuZGljZS51bml0LnRvdGFsID09PSAwID8gMTAwIDogOTBcbiAgICBjb25zdCBtaW4gPSB0aGlzLmRpY2UudW5pdC50b3RhbCA9PT0gMCA/IDEwIDogMFxuICAgIGxldCBzZWxlY3RlZCA9IHRoaXMuZGljZS50b3RhbCAtIHRoaXMuZGljZS51bml0LnRvdGFsXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGljZS50ZW5zLnJlc3VsdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGRpZSA9IHt9XG4gICAgICBkaWUudmFsdWUgPSB0aGlzLmRpY2UudGVucy5yZXN1bHRzW2ldXG4gICAgICBpZiAoZGllLnZhbHVlID09PSBzZWxlY3RlZCkge1xuICAgICAgICBzZWxlY3RlZCA9IDEwMVxuICAgICAgICBkaWUuc2VsZWN0ZWQgPSB0cnVlXG4gICAgICAgIGlmICh0aGlzLmRpY2VzLmhhc0JvbnVzKSB7XG4gICAgICAgICAgZGllLmlzTWF4ID0gdHJ1ZVxuICAgICAgICAgIGRpZS5pc01pbiA9IGZhbHNlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGllLmlzTWluID0gdHJ1ZVxuICAgICAgICAgIGRpZS5pc01heCA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChkaWUudmFsdWUgPT09IG1heCkgZGllLmlzTWF4ID0gdHJ1ZVxuICAgICAgICBlbHNlIGRpZS5pc01heCA9IGZhbHNlXG4gICAgICAgIGlmIChkaWUudmFsdWUgPT09IG1pbikgZGllLmlzTWluID0gdHJ1ZVxuICAgICAgICBlbHNlIGRpZS5pc01pbiA9IGZhbHNlXG4gICAgICB9XG4gICAgICAvLyBpZiggZGllLnZhbHVlID09IDEwMCkgZGllLnZhbHVlID0gXCIwMFwiO1xuICAgICAgdGhpcy5kaWNlcy50ZW5zLnB1c2goZGllKVxuICAgIH1cbiAgICB0aGlzLmNvbXB1dGVDaGVjaygpXG4gIH1cblxuICBhc3luYyBjb21wdXRlQ2hlY2sgKCkge1xuICAgIHRoaXMuaXNVbmtub3duID0gdGhpcy51bmtub3duRGlmZmljdWx0eVxuXG4gICAgaWYgKHRoaXMuZ21EaWZmaWN1bHR5UmVndWxhcikge1xuICAgICAgdGhpcy5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgfVxuICAgIGlmICh0aGlzLmdtRGlmZmljdWx0eUhhcmQpIHRoaXMuZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZFxuICAgIGlmICh0aGlzLmdtRGlmZmljdWx0eUV4dHJlbWUpIHtcbiAgICAgIHRoaXMuZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZVxuICAgIH1cbiAgICBpZiAodGhpcy5nbURpZmZpY3VsdHlDcml0aWNhbCkge1xuICAgICAgdGhpcy5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbFxuICAgIH1cblxuICAgIHRoaXMudGVuT25seU9uZURpZSA9IHRoaXMuZGljZXMudGVucy5sZW5ndGggPT09IDFcblxuICAgIHRoaXMuaXNWYWx1ZSA9IGZhbHNlXG4gICAgdGhpcy5pc0NoYXJhY3RpcmlzdGljID0gZmFsc2VcbiAgICB0aGlzLmlzU2tpbGwgPSBmYWxzZVxuICAgIHRoaXMuaXNJdGVtID0gZmFsc2VcbiAgICB0aGlzLmlzQXR0cmlidXRlID0gZmFsc2VcbiAgICBpZiAodGhpcy5pc1NpbXBsZVJvbGwpIHtcbiAgICAgIHRoaXMuZGVueVB1c2ggPSB0cnVlXG4gICAgICB0aGlzLmRlbnlMdWNrID0gdHJ1ZVxuICAgIH0gZWxzZSBpZiAodGhpcy5hY3RvciA9PSBudWxsKSB7XG4gICAgICB0aGlzLmlzVmFsdWUgPSB0cnVlXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgIHRoaXMuaXNDaGFyYWN0aXJpc3RpYyA9IHRydWVcbiAgICAgICAgdGhpcy5yYXdWYWx1ZSA9IHRoaXMuYWN0b3IuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljc1tcbiAgICAgICAgICB0aGlzLmNoYXJhY3RlcmlzdGljXG4gICAgICAgIF0udmFsdWVcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuc2tpbGwpIHtcbiAgICAgICAgdGhpcy5pc1NraWxsID0gdHJ1ZVxuICAgICAgICB0aGlzLnJhd1ZhbHVlID0gdGhpcy5za2lsbC52YWx1ZVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5hdHRyaWJ1dGUpIHtcbiAgICAgICAgdGhpcy5pc0F0dHJpYnV0ZSA9IHRydWVcbiAgICAgICAgdGhpcy5yYXdWYWx1ZSA9IHRoaXMuYWN0b3IuZGF0YS5kYXRhLmF0dHJpYnNbdGhpcy5hdHRyaWJ1dGVdLnZhbHVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmx1Y2tTcGVudCAmJiAhdGhpcy5pc1NpbXBsZVJvbGwpIHtcbiAgICAgIGlmICh0aGlzLm1vZGlmaWVkUmVzdWx0IDw9IHRoaXMucmF3VmFsdWUpIHtcbiAgICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXJcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm1vZGlmaWVkUmVzdWx0IDw9IHRoaXMuaGFyZFRocmVzaG9sZCkge1xuICAgICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMubW9kaWZpZWRSZXN1bHQgPD0gdGhpcy5leHRyZW1lVGhyZXNob2xkKSB7XG4gICAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5tb2RpZmllZFJlc3VsdCA+IHRoaXMucmF3VmFsdWUpIHtcbiAgICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmVcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm1vZGlmaWVkUmVzdWx0ID09PSAxKSB7XG4gICAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuZnVtYmxlVGhyZXNob2xkIDw9IHRoaXMubW9kaWZpZWRSZXN1bHQpIHtcbiAgICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZ1bWJsZVxuICAgICAgfVxuICAgIH1cblxuICAgIHN3aXRjaCAodGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyOlxuICAgICAgICB0aGlzLnJlc3VsdFR5cGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkOlxuICAgICAgICB0aGlzLnJlc3VsdFR5cGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkhhcmRTdWNjZXNzJylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lOlxuICAgICAgICB0aGlzLnJlc3VsdFR5cGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgdGhpcy5yZXN1bHRUeXBlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZ1bWJsZTpcbiAgICAgICAgdGhpcy5yZXN1bHRUeXBlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5GdW1ibGUnKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmU6XG4gICAgICAgIHRoaXMucmVzdWx0VHlwZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRmFpbHVyZScpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgaWYgKHRoaXMudW5rbm93bkRpZmZpY3VsdHkpIHtcbiAgICAgIHRoaXMuc3VjY2Vzc1JlcXVpcmVkID0gJydcbiAgICB9IGVsc2UgaWYgKCF0aGlzLmlzU2ltcGxlUm9sbCkge1xuICAgICAgdGhpcy5zdWNjZXNzUmVxdWlyZWQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlN1Y2Nlc3NSZXF1aXJlZCcsIHtcbiAgICAgICAgc3VjY2Vzc1JlcXVpcmVkOiB0aGlzLmRpZmZpY3VsdHlTdHJpbmdcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKHRoaXMubW9kaWZpZWRSZXN1bHQgPT09IDEpIHtcbiAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbFxuICAgIH1cbiAgICBpZiAoIXRoaXMubHVja1NwZW50ICYmICF0aGlzLmlzVW5rbm93biAmJiAhdGhpcy5pc1NpbXBsZVJvbGwpIHtcbiAgICAgIHRoaXMuaXNGYWlsdXJlID0gdGhpcy5mYWlsZWRcbiAgICAgIHRoaXMuaXNTdWNjZXNzID0gdGhpcy5wYXNzZWRcbiAgICB9XG5cbiAgICB0aGlzLmhhc01hbGZ1bmN0aW9uID0gZmFsc2VcbiAgICBpZiAodGhpcy5pc0Z1bWJsZSkgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZ1bWJsZVxuXG4gICAgaWYgKHRoaXMuaXRlbSkge1xuICAgICAgdGhpcy5pc0l0ZW0gPSB0cnVlXG4gICAgICBpZiAodGhpcy5pdGVtLmRhdGEuZGF0YS5tYWxmdW5jdGlvbikge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgTnVtYmVyKHRoaXMubW9kaWZpZWRSZXN1bHQpID49IE51bWJlcih0aGlzLml0ZW0uZGF0YS5kYXRhLm1hbGZ1bmN0aW9uKVxuICAgICAgICApIHtcbiAgICAgICAgICB0aGlzLmhhc01hbGZ1bmN0aW9uID0gdHJ1ZVxuICAgICAgICAgIHRoaXMubWFsZnVuY3Rpb25UeHQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1hbGZ1bmN0aW9uJywge1xuICAgICAgICAgICAgaXRlbU5hbWU6IHRoaXMuaXRlbS5uYW1lXG4gICAgICAgICAgfSlcbiAgICAgICAgICBhd2FpdCB0aGlzLml0ZW0udG9nZ2xlSXRlbUZsYWcoQ29DN0l0ZW0uZmxhZ3MubWFsZnVuY3Rpb24pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmNhbkJlUHVzaGVkID0gdGhpcy5za2lsbCA/IHRoaXMuc2tpbGwuY2FuQmVQdXNoZWQoKSA6IGZhbHNlXG4gICAgaWYgKHRoaXMuY2hhcmFjdGVyaXN0aWMgIT0gbnVsbCkgdGhpcy5jYW5CZVB1c2hlZCA9IHRydWVcbiAgICBpZiAodGhpcy5pc0Z1bWJsZSkgdGhpcy5jYW5CZVB1c2hlZCA9IGZhbHNlXG4gICAgaWYgKHRoaXMuZGVueVB1c2gpIHRoaXMuY2FuQmVQdXNoZWQgPSBmYWxzZVxuXG4gICAgaWYgKCF0aGlzLmRlbnlMdWNrICYmIHRoaXMuYWN0b3IpIHtcbiAgICAgIGlmIChcbiAgICAgICAgIXRoaXMubHVja1NwZW50ICYmXG4gICAgICAgICF0aGlzLnBhc3NlZCAmJlxuICAgICAgICAhdGhpcy5pc0Z1bWJsZSAmJlxuICAgICAgICB0aGlzLmRpZmZpY3VsdHkgIT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWwgJiZcbiAgICAgICAgIXRoaXMudW5rbm93bkRpZmZpY3VsdHlcbiAgICAgICkge1xuICAgICAgICBpZiAodGhpcy5za2lsbCB8fCB0aGlzLmNoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgICAgY29uc3QgbHVja05lZWRlZCA9IHRoaXMubW9kaWZpZWRSZXN1bHQgLSB0aGlzLnN1Y2Nlc1RocmVzaG9sZFxuICAgICAgICAgIGlmICh0aGlzLmFjdG9yLmx1Y2sgPiBsdWNrTmVlZGVkKSB7XG4gICAgICAgICAgICB0aGlzLmhhc0Vub3VnaEx1Y2sgPSB0cnVlXG4gICAgICAgICAgICB0aGlzLmx1Y2tOZWVkZWQgPSBsdWNrTmVlZGVkXG4gICAgICAgICAgICB0aGlzLmx1Y2tOZWVkZWRUeHQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNwZW5kTHVjaycsIHtcbiAgICAgICAgICAgICAgbHVja05lZWRlZFZhbHVlOiBsdWNrTmVlZGVkXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMubHVja1NwZW50KSB7XG4gICAgICAgIHRoaXMuaW5jcmVhc2VTdWNjZXNzID0gW11cblxuICAgICAgICAvLyBDYW4ndCBzcGVuZCBsdWNrIG9uIHB1c2hlZCByb2xscy5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICF0aGlzLnB1c2hpbmcgJiZcbiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZSAhPT0gJ2xjaycgJiZcbiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZSAhPT0gJ3NhbidcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy51bmtub3duRGlmZmljdWx0eSAmJlxuICAgICAgICAgICAgdGhpcy5tb2RpZmllZFJlc3VsdCA+IHRoaXMucmVndWxhclRocmVzaG9sZFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgY29uc3QgbmV4dExldmVsID0ge31cbiAgICAgICAgICAgIG5leHRMZXZlbC5kaWZmaWN1bHR5TmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgJ0NvQzcuUmVndWxhckRpZmZpY3VsdHknXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBuZXh0TGV2ZWwuZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciAvLyBSRUZBQ1RPUklORyAoMSlcbiAgICAgICAgICAgIG5leHRMZXZlbC5sdWNrVG9TcGVuZCA9IHRoaXMubW9kaWZpZWRSZXN1bHQgLSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGQgLy8gUkVGQUNUT1JJTkcgKDEpXG4gICAgICAgICAgICBuZXh0TGV2ZWwuaGFzRW5vdWdoTHVjayA9IG5leHRMZXZlbC5sdWNrVG9TcGVuZCA8PSB0aGlzLmFjdG9yLmx1Y2tcbiAgICAgICAgICAgIGlmIChuZXh0TGV2ZWwubHVja1RvU3BlbmQgPD0gdGhpcy5hY3Rvci5sdWNrKSB7XG4gICAgICAgICAgICAgIHRoaXMuaW5jcmVhc2VTdWNjZXNzLnB1c2gobmV4dExldmVsKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eSA8PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgJiZcbiAgICAgICAgICAgIHRoaXMubW9kaWZpZWRSZXN1bHQgPiB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IG5leHRMZXZlbCA9IHt9XG4gICAgICAgICAgICBuZXh0TGV2ZWwuZGlmZmljdWx0eU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZERpZmZpY3VsdHknKVxuICAgICAgICAgICAgbmV4dExldmVsLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQgLy8gUkVGQUNUT1JJTkcgKDEpXG4gICAgICAgICAgICBuZXh0TGV2ZWwubHVja1RvU3BlbmQgPSB0aGlzLm1vZGlmaWVkUmVzdWx0IC0gdGhpcy5oYXJkVGhyZXNob2xkIC8vIFJFRkFDVE9SSU5HICgxKVxuICAgICAgICAgICAgbmV4dExldmVsLmhhc0Vub3VnaEx1Y2sgPSBuZXh0TGV2ZWwubHVja1RvU3BlbmQgPD0gdGhpcy5hY3Rvci5sdWNrXG4gICAgICAgICAgICBpZiAobmV4dExldmVsLmx1Y2tUb1NwZW5kIDw9IHRoaXMuYWN0b3IubHVjaykge1xuICAgICAgICAgICAgICB0aGlzLmluY3JlYXNlU3VjY2Vzcy5wdXNoKG5leHRMZXZlbClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLmRpZmZpY3VsdHkgPD0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkICYmXG4gICAgICAgICAgICB0aGlzLm1vZGlmaWVkUmVzdWx0ID4gdGhpcy5leHRyZW1lVGhyZXNob2xkXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0TGV2ZWwgPSB7fVxuICAgICAgICAgICAgbmV4dExldmVsLmRpZmZpY3VsdHlOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAnQ29DNy5FeHRyZW1lRGlmZmljdWx0eSdcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIG5leHRMZXZlbC5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lXG4gICAgICAgICAgICBuZXh0TGV2ZWwubHVja1RvU3BlbmQgPSB0aGlzLm1vZGlmaWVkUmVzdWx0IC0gdGhpcy5leHRyZW1lVGhyZXNob2xkIC8vIFJFRkFDVE9SSU5HICgxKVxuICAgICAgICAgICAgbmV4dExldmVsLmhhc0Vub3VnaEx1Y2sgPSBuZXh0TGV2ZWwubHVja1RvU3BlbmQgPD0gdGhpcy5hY3Rvci5sdWNrIC8vIFJFRkFDVE9SSU5HICgxKVxuICAgICAgICAgICAgaWYgKG5leHRMZXZlbC5sdWNrVG9TcGVuZCA8PSB0aGlzLmFjdG9yLmx1Y2spIHtcbiAgICAgICAgICAgICAgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MucHVzaChuZXh0TGV2ZWwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY2FuSW5jcmVhc2VTdWNjZXNzID0gdGhpcy5pbmNyZWFzZVN1Y2Nlc3MubGVuZ3RoID4gMFxuICAgICAgaWYgKHRoaXMuaXNGdW1ibGUpIHRoaXMuY2FuSW5jcmVhc2VTdWNjZXNzID0gZmFsc2VcbiAgICB9XG5cbiAgICB0aGlzLmNhbkF3YXJkRXhwZXJpZW5jZSA9XG4gICAgICB0aGlzLnNraWxsICYmICF0aGlzLnNraWxsLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLm5veHBnYWluXG5cbiAgICBpZiAoXG4gICAgICB0aGlzLnBhc3NlZCAmJlxuICAgICAgdGhpcy5kaWNlTW9kaWZpZXIgPD0gMCAmJlxuICAgICAgdGhpcy5za2lsbCAmJlxuICAgICAgIXRoaXMuc2tpbGwuZGF0YS5kYXRhLnByb3BlcnRpZXMubm94cGdhaW4gJiZcbiAgICAgICF0aGlzLmx1Y2tTcGVudCAmJlxuICAgICAgIXRoaXMuZm9yY2VkICYmXG4gICAgICAhdGhpcy5pc0JsaW5kICYmXG4gICAgICAhdGhpcy5pc1Vua25vd25cbiAgICApIHtcbiAgICAgIHRoaXMuZmxhZ0ZvckRldmVsb3BlbWVudCgpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGFyZW50KSB7XG4gICAgICBjb25zdCBwYXJlbnQgPSBhd2FpdCBmcm9tVXVpZCh0aGlzLnBhcmVudClcbiAgICAgIGlmIChwYXJlbnQgJiYgJ3VwZGF0ZVJvbGwnIGluIHBhcmVudCkge1xuICAgICAgICBhd2FpdCBwYXJlbnQudXBkYXRlUm9sbCh0aGlzLkpTT05Sb2xsU3RyaW5nKVxuICAgICAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oIGBSb2xsICR7dGhpcy51dWlkfSBkZXBlbmRzIG9mICR7dGhpcy5wYXJlbnR9YClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzaG93RGljZVJvbGwgKCkge1xuICAgIGlmIChnYW1lLm1vZHVsZXMuZ2V0KCdkaWNlLXNvLW5pY2UnKT8uYWN0aXZlKSB7XG4gICAgICBjb25zdCBkaWNlUmVzdWx0cyA9IFtdXG4gICAgICBmb3IgKGNvbnN0IGRpZVJlc3VsdCBvZiB0aGlzLmRpY2VzLnRlbnMpIHtcbiAgICAgICAgZGljZVJlc3VsdHMucHVzaChkaWVSZXN1bHQudmFsdWUgPT09IDEwMCA/IDAgOiBkaWVSZXN1bHQudmFsdWUgLyAxMClcbiAgICAgIH1cbiAgICAgIGRpY2VSZXN1bHRzLnB1c2godGhpcy5kaWNlcy51bml0LnZhbHVlKVxuXG4gICAgICBjb25zdCBkaWNlRGF0YSA9IHtcbiAgICAgICAgZm9ybXVsYTogYCR7dGhpcy5kaWNlcy50ZW5zLmxlbmd0aH1kMTAwKzFkMTBgLFxuICAgICAgICByZXN1bHRzOiBkaWNlUmVzdWx0cyxcbiAgICAgICAgd2hpc3BlcjogbnVsbCxcbiAgICAgICAgYmxpbmQ6IGZhbHNlXG4gICAgICB9XG4gICAgICBnYW1lLmRpY2UzZC5zaG93KGRpY2VEYXRhKVxuICAgIH1cbiAgfVxuXG4gIGdldCBjc3NDbGFzcyAoKSB7XG4gICAgbGV0IGNzc0NsYXNzID0gJydcbiAgICBpZiAodGhpcy5pc1N1Y2Nlc3MpIGNzc0NsYXNzID0gJ3N1Y2Nlc3MnXG4gICAgaWYgKHRoaXMuaXNGYWlsdXJlKSBjc3NDbGFzcyA9ICdmYWlsdXJlJ1xuICAgIGlmICh0aGlzLmlzQ3JpdGljYWwgJiYgIXRoaXMuaXNGYWlsdXJlKSBjc3NDbGFzcyA9ICdzdWNjZXNzIGNyaXRpY2FsJ1xuICAgIGlmICh0aGlzLmlzRnVtYmxlICYmICF0aGlzLmlzU3VjY2VzcykgY3NzQ2xhc3MgPSAnZmFpbHVyZSBmdW1ibGUnXG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNzc0NsYXNzICs9ICcgcmVndWxhci1zdWNjZXNzJ1xuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgY3NzQ2xhc3MgKz0gJyBoYXJkLXN1Y2Nlc3MnXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBjc3NDbGFzcyArPSAnIGV4dHJlbWUtc3VjY2VzcydcbiAgICB9XG5cbiAgICByZXR1cm4gY3NzQ2xhc3NcbiAgfVxuXG4gIGdldCBjc3NDbGFzc0xpc3QgKCkge1xuICAgIGNvbnN0IGNzc0NsYXNzID0gW11cbiAgICBpZiAodGhpcy5pc1N1Y2Nlc3MpIGNzc0NsYXNzLnB1c2goJ3N1Y2Nlc3MnKVxuICAgIGlmICh0aGlzLmlzRmFpbHVyZSkgY3NzQ2xhc3MucHVzaCgnZmFpbHVyZScpXG4gICAgaWYgKHRoaXMuaXNDcml0aWNhbCAmJiAhdGhpcy5pc0ZhaWx1cmUpIGNzc0NsYXNzLnB1c2goJ3N1Y2Nlc3MnLCAnY3JpdGljYWwnKVxuICAgIGlmICh0aGlzLmlzRnVtYmxlICYmICF0aGlzLmlzU3VjY2VzcykgY3NzQ2xhc3MucHVzaCgnZmFpbHVyZScsICdmdW1ibGUnKVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBjc3NDbGFzcy5wdXNoKCdyZWd1bGFyLXN1Y2Nlc3MnKVxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgY3NzQ2xhc3MucHVzaCgnaGFyZC1zdWNjZXNzJylcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNzc0NsYXNzLnB1c2goJ2V4dHJlbWUtc3VjY2VzcycpXG4gICAgfVxuXG4gICAgcmV0dXJuIGNzc0NsYXNzXG4gIH1cblxuICBnZXQgcGxheWVyQ3NzQ2xhc3MgKCkge1xuICAgIGlmICh0aGlzLmlzU3VjY2VzcyB8fCB0aGlzLmZvcmNlZFN1Y2Nlc3MpIHJldHVybiAnc3VjY2VzcydcbiAgICBpZiAodGhpcy5pc0ZhaWx1cmUgfHwgdGhpcy5mb3JjZWRGYWlsdXJlKSByZXR1cm4gJ2ZhaWx1cmUnXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIHVwZ3JhZGVDaGVjayAodXBncmFkZWluZGV4LCB1cGRhdGUgPSB0cnVlKSB7XG4gICAgY29uc3QgaW5jcmVhc2VkU3VjY2VzcyA9IHRoaXMuaW5jcmVhc2VTdWNjZXNzW3VwZ3JhZGVpbmRleF1cbiAgICBjb25zdCBsdWNrQW1vdW50ID1cbiAgICAgIHBhcnNlSW50KGluY3JlYXNlZFN1Y2Nlc3MubHVja0Ftb3VudCkgfHxcbiAgICAgIHBhcnNlSW50KGluY3JlYXNlZFN1Y2Nlc3MubHVja1RvU3BlbmQpIC8vIFJFRkFDVE9SSU5HICgxKVxuICAgIGlmICghdGhpcy5hY3Rvci5zcGVuZEx1Y2sobHVja0Ftb3VudCkpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JOb3RFbm91Z2hMdWNrJywge1xuICAgICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB0aGlzLnRvdGFsTHVja1NwZW50ID0gIXBhcnNlSW50KHRoaXMudG90YWxMdWNrU3BlbnQpXG4gICAgICA/IDBcbiAgICAgIDogcGFyc2VJbnQodGhpcy50b3RhbEx1Y2tTcGVudClcbiAgICB0aGlzLnRvdGFsTHVja1NwZW50ICs9IHBhcnNlSW50KGx1Y2tBbW91bnQpXG4gICAgY29uc3QgbmV3U3VjY2Vzc0xldmVsID1cbiAgICAgIHBhcnNlSW50KGluY3JlYXNlZFN1Y2Nlc3MubmV3U3VjY2Vzc0xldmVsKSB8fFxuICAgICAgcGFyc2VJbnQoaW5jcmVhc2VkU3VjY2Vzcy5kaWZmaWN1bHR5KSAvLyBSRUZBQ1RPUklORyAoMSlcbiAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IG5ld1N1Y2Nlc3NMZXZlbFxuICAgIGlmICh0aGlzLmRpZmZpY3VsdHkgPD0gbmV3U3VjY2Vzc0xldmVsKSB7XG4gICAgICB0aGlzLmlzU3VjY2VzcyA9IHRydWVcbiAgICAgIHRoaXMuaXNGYWlsdXJlID0gZmFsc2VcbiAgICB9XG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHVwZ3JhZGVpbmRleCArIDE7IGluZGV4KyspIHtcbiAgICAgIHRoaXMuaW5jcmVhc2VTdWNjZXNzLnNoaWZ0KClcbiAgICB9XG4gICAgZm9yIChjb25zdCBzIG9mIHRoaXMuaW5jcmVhc2VTdWNjZXNzKSB7XG4gICAgICBzLmx1Y2tUb1NwZW5kID0gcy5sdWNrVG9TcGVuZCAtIGx1Y2tBbW91bnRcbiAgICB9XG4gICAgdGhpcy5sdWNrU3BlbnQgPSB0cnVlXG4gICAgdGhpcy5jb21wdXRlQ2hlY2soKVxuICAgIGlmICh1cGRhdGUpIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIHJlbW92ZVVwZ3JhZGVzICgpIHtcbiAgICB0aGlzLmNhbkluY3JlYXNlU3VjY2VzcyA9IGZhbHNlXG4gICAgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MgPSBbXVxuICAgIHRoaXMubHVja05lZWRlZCA9IDBcbiAgICB0aGlzLmx1Y2tOZWVkZWRUeHQgPSBudWxsXG4gICAgdGhpcy5jYW5CZVB1c2hlZCA9IGZhbHNlXG4gIH1cblxuICBmb3JjZVBhc3MgKGx1Y2tBbW91bnQgPSBudWxsLCB1cGRhdGUgPSB0cnVlKSB7XG4gICAgaWYgKGx1Y2tBbW91bnQpIHtcbiAgICAgIHRoaXMuYWN0b3Iuc3BlbmRMdWNrKGx1Y2tBbW91bnQpXG4gICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IHRoaXMuZGlmZmljdWx0eVxuICAgICAgZm9yIChjb25zdCBzIG9mIHRoaXMuaW5jcmVhc2VTdWNjZXNzKSB7XG4gICAgICAgIHMubHVja1RvU3BlbmQgPSBzLmx1Y2tUb1NwZW5kIC0gbHVja0Ftb3VudFxuICAgICAgfVxuICAgICAgdGhpcy5sdWNrU3BlbnQgPSB0cnVlXG4gICAgICB0aGlzLmlzU3VjY2VzcyA9IHRydWVcbiAgICAgIHRoaXMudG90YWxMdWNrU3BlbnQgPSAhcGFyc2VJbnQodGhpcy50b3RhbEx1Y2tTcGVudClcbiAgICAgICAgPyAwXG4gICAgICAgIDogcGFyc2VJbnQodGhpcy50b3RhbEx1Y2tTcGVudClcbiAgICAgIHRoaXMudG90YWxMdWNrU3BlbnQgKz0gcGFyc2VJbnQobHVja0Ftb3VudClcbiAgICAgIHRoaXMuY29tcHV0ZUNoZWNrKClcbiAgICAgIGlmICh1cGRhdGUpIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZvcmNlZCA9IHRydWVcbiAgICAgIHRoaXMuZm9yY2VkU3VjY2VzcyA9IHRydWVcbiAgICAgIGlmICh0aGlzLmlzVW5rbm93bikge1xuICAgICAgICB0aGlzLmZvcmNlU3VjY2Vzc0xldmVsKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciwgdXBkYXRlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5mb3JjZVN1Y2Nlc3NMZXZlbCh0aGlzLmRpZmZpY3VsdHksIHVwZGF0ZSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmb3JjZUZhaWwgKHVwZGF0ZSA9IHRydWUpIHtcbiAgICB0aGlzLmZvcmNlZCA9IHRydWVcbiAgICB0aGlzLmZvcmNlZEZhaWx1cmUgPSB0cnVlXG4gICAgaWYgKHRoaXMuaXNVbmtub3duKSB7XG4gICAgICB0aGlzLmZvcmNlU3VjY2Vzc0xldmVsKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZmFpbHVyZSwgdXBkYXRlKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZvcmNlU3VjY2Vzc0xldmVsKHRoaXMuZGlmZmljdWx0eSAtIDEsIHVwZGF0ZSlcbiAgICB9XG4gIH1cblxuICBfZm9yY2VDaGVjayAoaGlnaCwgbG93LCB1cGRhdGUgPSB0cnVlKSB7XG4gICAgbGV0IHRvdGFsID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGhpZ2ggLSBsb3cpKSArIGxvdyArIDFcbiAgICBjb25zdCB1bml0VG90YWwgPSB0b3RhbCAlIDEwXG4gICAgbGV0IHRlblRvdGFsID0gTWF0aC5mbG9vcih0b3RhbCAvIDEwKVxuICAgIGNvbnN0IHRlbnMgPSBbXVxuXG4gICAgbGV0IGhhc0Vub3VnaCA9IE1hdGguYWJzKHRoaXMuZGljZU1vZGlmaWVyKSA9PT0gdGVucy5sZW5ndGhcbiAgICB3aGlsZSAoIWhhc0Vub3VnaCkge1xuICAgICAgbGV0IHRlbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKVxuICAgICAgbGV0IHJvbGwgPSB0ZW4gKiAxMCArIHVuaXRUb3RhbFxuICAgICAgaWYgKHJvbGwgPT09IDApIHtcbiAgICAgICAgcm9sbCA9IDEwMFxuICAgICAgICB0ZW4gPSAxMDBcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmhhc1BlbmFsdHkgJiYgcm9sbCA8PSBoaWdoKSB7XG4gICAgICAgIHRlbnMucHVzaCh0ZW4pXG4gICAgICAgIGlmIChyb2xsID4gdG90YWwpIHRvdGFsID0gcm9sbFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaGFzQm9udXMgJiYgcm9sbCA+IGxvdykge1xuICAgICAgICB0ZW5zLnB1c2godGVuKVxuICAgICAgICBpZiAocm9sbCA8IHRvdGFsKSB0b3RhbCA9IHJvbGxcbiAgICAgIH1cbiAgICAgIGhhc0Vub3VnaCA9IHRlbnMubGVuZ3RoID09PSBNYXRoLmFicyh0aGlzLmRpY2VNb2RpZmllcilcbiAgICB9XG5cbiAgICAvLyBJbnNlcnQgcmVzdWx0IGF0IHJhbmRvbSBwb3NpdGlvbi5cbiAgICBpZiAodGVuVG90YWwgPT09IDEwICYmIHVuaXRUb3RhbCA9PT0gMCkge1xuICAgICAgdGVuVG90YWwgPSAxMDBcbiAgICB9XG4gICAgdGVucy5zcGxpY2UoXG4gICAgICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0ZW5zLmxlbmd0aCArIDEpLFxuICAgICAgMCxcbiAgICAgIHRlblRvdGFsID09PSAxMCA/IDAgOiB0ZW5Ub3RhbFxuICAgIClcblxuICAgIHRoaXMuZGljZXMudGVucyA9IFtdXG4gICAgdGhpcy5kaWNlcy51bml0LnZhbHVlID0gdW5pdFRvdGFsXG4gICAgdGhpcy5tb2RpZmllZFJlc3VsdCA9IHRvdGFsXG4gICAgdGhpcy5kaWNlcy50b3RhbCA9IHRvdGFsXG4gICAgdGhpcy5kaWNlcy50ZW5SZXN1bHQgPSB0b3RhbCAtIHVuaXRUb3RhbFxuXG4gICAgY29uc3QgbWF4ID0gdW5pdFRvdGFsID09PSAwID8gMTAwIDogOTBcbiAgICBjb25zdCBtaW4gPSB1bml0VG90YWwgPT09IDAgPyAxMCA6IDBcbiAgICBsZXQgc2VsZWN0ZWQgPSB0b3RhbCAtIHVuaXRUb3RhbFxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBkaWUgPSB7fVxuICAgICAgZGllLnZhbHVlID0gdGVuc1tpXVxuICAgICAgaWYgKGRpZS52YWx1ZSA9PT0gc2VsZWN0ZWQpIHtcbiAgICAgICAgc2VsZWN0ZWQgPSAxMDFcbiAgICAgICAgZGllLnNlbGVjdGVkID0gdHJ1ZVxuICAgICAgICBpZiAodGhpcy5oYXNCb251cykge1xuICAgICAgICAgIGRpZS5pc01heCA9IHRydWVcbiAgICAgICAgICBkaWUuaXNNaW4gPSBmYWxzZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRpZS5pc01pbiA9IHRydWVcbiAgICAgICAgICBkaWUuaXNNYXggPSBmYWxzZVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZGllLnZhbHVlID09PSBtYXgpIGRpZS5pc01heCA9IHRydWVcbiAgICAgICAgZWxzZSBkaWUuaXNNYXggPSBmYWxzZVxuICAgICAgICBpZiAoZGllLnZhbHVlID09PSBtaW4pIGRpZS5pc01pbiA9IHRydWVcbiAgICAgICAgZWxzZSBkaWUuaXNNaW4gPSBmYWxzZVxuICAgICAgfVxuICAgICAgLy8gaWYoIGRpZS52YWx1ZSA9PSAxMDApIGRpZS52YWx1ZSA9IFwiMDBcIjtcbiAgICAgIHRoaXMuZGljZXMudGVucy5wdXNoKGRpZSlcbiAgICB9XG5cbiAgICB0aGlzLmNvbXB1dGVDaGVjaygpXG4gICAgaWYgKHVwZGF0ZSkgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBmb3JjZVN1Y2Nlc3NMZXZlbCAoc3VjY2Vzc0xldmVsLCB1cGRhdGUgPSB0cnVlKSB7XG4gICAgbGV0IGhpZ2gsIGxvd1xuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZ1bWJsZSA9PT0gc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gMTAwXG4gICAgICBsb3cgPSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDFcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZmFpbHVyZSA9PT0gc3VjY2Vzc0xldmVsKSB7XG4gICAgICBpZiAodGhpcy5yZWd1bGFyVGhyZXNob2xkID09PSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDEpIHtcbiAgICAgICAgaGlnaCA9IDEwMFxuICAgICAgfSBlbHNlIGhpZ2ggPSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDFcbiAgICAgIGxvdyA9IHRoaXMucmVndWxhclRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyID09PSBzdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcbiAgICAgIGxvdyA9IHRoaXMuaGFyZFRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkID09PSBzdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICAgIGxvdyA9IHRoaXMuZXh0cmVtZVRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSBzdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLmV4dHJlbWVUaHJlc2hvbGRcbiAgICAgIGxvdyA9IDFcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWwgPT09IHN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IDFcbiAgICAgIGxvdyA9IDBcbiAgICB9XG4gICAgaWYgKGhpZ2ggPT09IGxvdykgbG93LS1cbiAgICBpZiAoaGlnaCA9PT0gMCkgaGlnaCA9IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMVxuICAgIHRoaXMuX2ZvcmNlQ2hlY2soaGlnaCwgbG93LCB1cGRhdGUpXG4gIH1cblxuICBpbmNyZWFzZVN1Y2Nlc3NMZXZlbCAodXBkYXRlID0gdHJ1ZSkge1xuICAgIGxldCBoaWdoLCBsb3dcbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mdW1ibGUgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxXG4gICAgICBpZiAodGhpcy5yZWd1bGFyVGhyZXNob2xkID09PSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDEpIHtcbiAgICAgICAgbG93ID0gdGhpcy5oYXJkVGhyZXNob2xkXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb3cgPSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZmFpbHVyZSA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcbiAgICAgIGxvdyA9IHRoaXMuaGFyZFRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuaGFyZFRocmVzaG9sZFxuICAgICAgbG93ID0gdGhpcy5leHRyZW1lVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5leHRyZW1lVGhyZXNob2xkXG4gICAgICBsb3cgPSB0aGlzLmNyaXRpY2FsVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5jcml0aWNhbFRocmVzaG9sZFxuICAgICAgbG93ID0gMFxuICAgIH1cbiAgICBpZiAoaGlnaCA9PT0gbG93KSBsb3ctLVxuICAgIHRoaXMuX2ZvcmNlQ2hlY2soaGlnaCwgbG93LCB1cGRhdGUpXG4gIH1cblxuICBkZWNyZWFzZVN1Y2Nlc3NMZXZlbCAodXBkYXRlID0gdHJ1ZSkge1xuICAgIGxldCBoaWdoLCBsb3dcbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mYWlsdXJlID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IDEwMFxuICAgICAgbG93ID0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxXG4gICAgICBsb3cgPSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZCA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcbiAgICAgIGxvdyA9IHRoaXMuaGFyZFRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuaGFyZFRocmVzaG9sZFxuICAgICAgbG93ID0gdGhpcy5leHRyZW1lVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuZXh0cmVtZVRocmVzaG9sZFxuICAgICAgbG93ID0gMVxuICAgIH1cbiAgICBpZiAoaGlnaCA9PT0gMCkgaGlnaCA9IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMVxuICAgIHRoaXMuX2ZvcmNlQ2hlY2soaGlnaCwgbG93LCB1cGRhdGUpXG4gIH1cblxuICBhc3luYyBmbGFnRm9yRGV2ZWxvcGVtZW50ICgpIHtcbiAgICB0aGlzLmZsYWdnZWRGb3JEZXZlbG9wbWVudCA9IHRydWVcbiAgICBpZiAodGhpcy5za2lsbCkgYXdhaXQgdGhpcy5za2lsbC5mbGFnRm9yRGV2ZWxvcGVtZW50KClcbiAgfVxuXG4gIHNldCBkaWZmaWN1bHR5ICh4KSB7XG4gICAgdGhpcy5fZGlmZmljdWx0eSA9IHBhcnNlSW50KHgpXG4gIH1cblxuICBnZXQgZGlmZmljdWx0eSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RpZmZpY3VsdHlcbiAgfVxuXG4gIHNldCBmbGF2b3IgKHgpIHtcbiAgICB0aGlzLl9mbGF2b3IgPSB4XG4gIH1cblxuICBzZXQgY29udGV4dCAoeCkge1xuICAgIHRoaXMuX2NvbnRleHQgPSB4XG4gIH1cblxuICBnZXQgY29udGV4dCAoKSB7XG4gICAgaWYgKCF0aGlzLl9jb250ZXh0KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMuX2NvbnRleHRcbiAgfVxuXG4gIHNldCBwYXJlbnQgKHgpIHtcbiAgICBpZiAoIXRoaXMudXVpZCkgdGhpcy51dWlkID0gZm91bmRyeS51dGlscy5yYW5kb21JRCgxNilcbiAgICB0aGlzLnBhcmVudFV1aWQgPSB4XG4gIH1cblxuICBnZXQgcGFyZW50ICgpIHtcbiAgICBpZiAoIXRoaXMucGFyZW50VXVpZCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLnBhcmVudFV1aWRcbiAgfVxuXG4gIGdldCBmbGF2b3IgKCkge1xuICAgIGlmICh0aGlzLl9mbGF2b3IpIHJldHVybiB0aGlzLl9mbGF2b3JcbiAgICBsZXQgZmxhdm9yID0gJydcbiAgICBpZiAodGhpcy5hY3Rvcj8uZGF0YSkge1xuICAgICAgaWYgKHRoaXMuc2tpbGwpIHtcbiAgICAgICAgZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DaGVja1Jlc3VsdCcsIHtcbiAgICAgICAgICBuYW1lOiB0aGlzLnNraWxsLm5hbWUsXG4gICAgICAgICAgdmFsdWU6IHRoaXMucmF3VmFsdWVTdHJpbmcsXG4gICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXRlbSkge1xuICAgICAgICBmbGF2b3IgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lkl0ZW1DaGVja1Jlc3VsdCcsIHtcbiAgICAgICAgICBpdGVtOiB0aGlzLml0ZW0ubmFtZSxcbiAgICAgICAgICBza2lsbDogdGhpcy5za2lsbC5uYW1lLFxuICAgICAgICAgIHZhbHVlOiB0aGlzLnJhd1ZhbHVlU3RyaW5nLFxuICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZ1xuICAgICAgICB9KVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2hlY2tSZXN1bHQnLCB7XG4gICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgIHRoaXMuYWN0b3IuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljc1t0aGlzLmNoYXJhY3RlcmlzdGljXS5sYWJlbFxuICAgICAgICAgICksXG4gICAgICAgICAgdmFsdWU6IHRoaXMucmF3VmFsdWVTdHJpbmcsXG4gICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuYXR0cmlidXRlKSB7XG4gICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2hlY2tSZXN1bHQnLCB7XG4gICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgIGBDb0M3LiR7dGhpcy5hY3Rvci5kYXRhLmRhdGEuYXR0cmlic1t0aGlzLmF0dHJpYnV0ZV0ubGFiZWx9YFxuICAgICAgICAgICksXG4gICAgICAgICAgdmFsdWU6IHRoaXMucmF3VmFsdWVTdHJpbmcsXG4gICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZGlzcGxheU5hbWUpIHtcbiAgICAgICAgZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DaGVja1Jlc3VsdCcsIHtcbiAgICAgICAgICBuYW1lOiB0aGlzLmRpc3BsYXlOYW1lLFxuICAgICAgICAgIHZhbHVlOiB0aGlzLnJhd1ZhbHVlU3RyaW5nLFxuICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZ1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghZmxhdm9yKSB7XG4gICAgICBpZiAodGhpcy5yYXdWYWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5kaXNwbGF5TmFtZSkge1xuICAgICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2hlY2tSZXN1bHQnLCB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLmRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgdmFsdWU6IHRoaXMucmF3VmFsdWVTdHJpbmcsXG4gICAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmdcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2hlY2tSYXdWYWx1ZScsIHtcbiAgICAgICAgICAgIHJhd3ZhbHVlOiB0aGlzLnJhd1ZhbHVlLFxuICAgICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnB1c2hpbmcpIHtcbiAgICAgIGZsYXZvciA9IGAke2dhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUHVzaGluZycpfSAke2ZsYXZvcn1gXG4gICAgfVxuXG4gICAgcmV0dXJuIGZsYXZvclxuICB9XG5cbiAgZ2V0IHRvb2x0aXBIZWFkZXIgKCkge1xuICAgIGlmICh0aGlzLmF0dHJpYnV0ZSkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICBgQ29DNy5MaW5rQ2hlY2ske1xuICAgICAgICAgICAgdGhpcy5kaWZmaWN1bHR5ID09PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgPyAnJyA6ICdEaWZmJ1xuICAgICAgICAgIH0keyF0aGlzLmRpY2VNb2RpZmllciA/ICcnIDogJ01vZGlmJ31gLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZyxcbiAgICAgICAgICAgIG1vZGlmaWVyOiB0aGlzLmRpY2VNb2RpZmllcixcbiAgICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgIGBDb0M3LiR7dGhpcy5hY3Rvci5kYXRhLmRhdGEuYXR0cmlic1t0aGlzLmF0dHJpYnV0ZV0ubGFiZWx9YFxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgKSArIGAgKCR7dGhpcy5hY3Rvci5kYXRhLmRhdGEuYXR0cmlic1t0aGlzLmF0dHJpYnV0ZV0udmFsdWV9JSlgXG4gICAgICApXG4gICAgfVxuICAgIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgIGBDb0M3LkxpbmtDaGVjayR7XG4gICAgICAgICAgICB0aGlzLmRpZmZpY3VsdHkgPT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA/ICcnIDogJ0RpZmYnXG4gICAgICAgICAgfSR7IXRoaXMuZGljZU1vZGlmaWVyID8gJycgOiAnTW9kaWYnfWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nLFxuICAgICAgICAgICAgbW9kaWZpZXI6IHRoaXMuZGljZU1vZGlmaWVyLFxuICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICB0aGlzLmFjdG9yLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3NbdGhpcy5jaGFyYWN0ZXJpc3RpY10ubGFiZWxcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgICkgK1xuICAgICAgICBgICgke3RoaXMuYWN0b3IuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljc1t0aGlzLmNoYXJhY3RlcmlzdGljXS52YWx1ZX0lKWBcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKHRoaXMuc2tpbGwpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgYENvQzcuTGlua0NoZWNrJHtcbiAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eSA9PT0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyID8gJycgOiAnRGlmZidcbiAgICAgICAgICB9JHshdGhpcy5kaWNlTW9kaWZpZXIgPyAnJyA6ICdNb2RpZid9YCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmcsXG4gICAgICAgICAgICBtb2RpZmllcjogdGhpcy5kaWNlTW9kaWZpZXIsXG4gICAgICAgICAgICBuYW1lOiB0aGlzLnNraWxsLm5hbWVcbiAgICAgICAgICB9XG4gICAgICAgICkgKyBgICgke3RoaXMuc2tpbGwudmFsdWV9JSlgXG4gICAgICApXG4gICAgfVxuICAgIGlmICh0aGlzLmRpc3BsYXlOYW1lKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgIGBDb0M3LkxpbmtDaGVjayR7XG4gICAgICAgICAgICB0aGlzLmRpZmZpY3VsdHkgPT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA/ICcnIDogJ0RpZmYnXG4gICAgICAgICAgfSR7IXRoaXMuZGljZU1vZGlmaWVyID8gJycgOiAnTW9kaWYnfWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nLFxuICAgICAgICAgICAgbW9kaWZpZXI6IHRoaXMuZGljZU1vZGlmaWVyLFxuICAgICAgICAgICAgbmFtZTogdGhpcy5kaXNwbGF5TmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgKSArIGAgKCR7dGhpcy5yYXdWYWx1ZVN0cmluZ30lKWBcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIGdldEh0bWxSb2xsRWxlbWVudCAob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L3JvbGxzL2luLWNhcmQtcm9sbC5odG1sJ1xuICAgIGlmICh0aGlzLm9wdGlvbnMpIHRoaXMub3B0aW9ucyA9IG1lcmdlT2JqZWN0KHRoaXMub3B0aW9ucywgb3B0aW9ucylcbiAgICBlbHNlIHRoaXMub3B0aW9ucyA9IG9wdGlvbnNcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMpXG4gICAgaWYgKGh0bWwpIHJldHVybiAkLnBhcnNlSFRNTChodG1sKVswXVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBhc3luYyBnZXRIdG1sUm9sbCAob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L3JvbGxzL2luLWNhcmQtcm9sbC5odG1sJ1xuICAgIGlmICh0aGlzLm9wdGlvbnMpIHRoaXMub3B0aW9ucyA9IG1lcmdlT2JqZWN0KHRoaXMub3B0aW9ucywgb3B0aW9ucylcbiAgICBlbHNlIHRoaXMub3B0aW9ucyA9IG9wdGlvbnNcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMpXG4gICAgcmV0dXJuIGh0bWwgfHwgdW5kZWZpbmVkXG4gIH1cblxuICBhc3luYyB0b01lc3NhZ2UgKHB1c2hpbmcgPSBmYWxzZSkge1xuICAgIC8vIElmIGNhcmQgaXMgcHJvdmlkZWQgYXR0dGFjaGVkIHRoZSByb2xsIHRvIHRoZSBjYXJkLiBJZiBVUklEIHByb3ZpZGVkIGF0dGFjaCBhdCB0aGlzIHBvc2l0aW9uLj9cbiAgICB0aGlzLnB1c2hpbmcgPSBwdXNoaW5nXG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L3JvbGwtcmVzdWx0Lmh0bWwnXG5cbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMpXG5cbiAgICBjb25zdCBzcGVha2VyRGF0YSA9IHt9XG4gICAgbGV0IHNwZWFrZXJcbiAgICBpZiAodGhpcy5hY3Rvcikge1xuICAgICAgaWYgKHRoaXMuYWN0b3IuaXNUb2tlbikge1xuICAgICAgICBzcGVha2VyRGF0YS50b2tlbiA9IHRoaXMudG9rZW4uZG9jdW1lbnRcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5hY3Rvci5pc0R1bW15KSB7XG4gICAgICAgIGlmICh0aGlzLmFjdG9yLm5hbWUpIHNwZWFrZXIgPSB7IGFsaWFzOiB0aGlzLmFjdG9yLm5hbWUgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3BlYWtlckRhdGEuYWN0b3IgPSB0aGlzLmFjdG9yXG4gICAgICB9XG4gICAgICBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcihzcGVha2VyRGF0YSlcbiAgICB9IGVsc2Uge1xuICAgICAgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgIH1cblxuICAgIGNvbnN0IHVzZXIgPSB0aGlzLmFjdG9yPy51c2VyID8gdGhpcy5hY3Rvci51c2VyIDogZ2FtZS51c2VyXG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IHVzZXIuaWQsXG4gICAgICBzcGVha2VyOiBzcGVha2VyLFxuICAgICAgZmxhdm9yOiB0aGlzLmZsYXZvcixcbiAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICBmbGFnczoge1xuICAgICAgICBDb0M3OiB7XG4gICAgICAgICAgdHlwZTogQ29DN0NoZWNrLmNhcmRUeXBlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy51dWlkKSBjaGF0RGF0YS5mbGFncy5Db0M3LnV1aWQgPSB0aGlzLnV1aWRcbiAgICBpZiAodGhpcy5jb250ZXh0KSBjaGF0RGF0YS5mbGFncy5Db0M3LmNvbnRleHQgPSB0aGlzLmNvbnRleHRcblxuICAgIGlmICh0aGlzLnJvbGxNb2RlID09PSAnc2VsZnJvbGwnKSB7XG4gICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgY2hhdERhdGEudXNlciA9IGdhbWUudXNlci5pZFxuICAgICAgICBjaGF0RGF0YS5mbGF2b3IgPSBgWyR7dGhpcy5hY3Rvci5uYW1lfV0gJHtjaGF0RGF0YS5mbGF2b3J9YFxuICAgICAgICBjaGF0RGF0YS5mbGFncyA9IHtcbiAgICAgICAgICBDb0M3OiB7XG4gICAgICAgICAgICBHTVNlbGZSb2xsOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgY2hhdERhdGEuc3BlYWtlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjaGF0RGF0YS5mbGFncy5Db0M3Lm9yaWdpbmFsU3BlYWtlciA9IGR1cGxpY2F0ZShjaGF0RGF0YS5zcGVha2VyKVxuICAgICAgICB9XG4gICAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICAgIHN3aXRjaCAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2VsZlJvbGxXaGlzcGVyVGFyZ2V0JykpIHtcbiAgICAgICAgICAgIGNhc2UgJ293bmVycyc6XG4gICAgICAgICAgICAgIGRlbGV0ZSBjaGF0RGF0YS5zcGVha2VyXG4gICAgICAgICAgICAgIGNoYXREYXRhLndoaXNwZXIgPSB0aGlzLmFjdG9yLm93bmVyc1xuICAgICAgICAgICAgICBjaGF0RGF0YS50eXBlID0gQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLldISVNQRVJcbiAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgICAgY2FzZSAnZXZlcnlvbmUnOlxuICAgICAgICAgICAgICBkZWxldGUgY2hhdERhdGEuc3BlYWtlclxuICAgICAgICAgICAgICBjaGF0RGF0YS53aGlzcGVyID0gZ2FtZS51c2Vycy5wbGF5ZXJzXG4gICAgICAgICAgICAgIGNoYXREYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuV0hJU1BFUlxuICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICBDaGF0TWVzc2FnZS5hcHBseVJvbGxNb2RlKGNoYXREYXRhLCB0aGlzLnJvbGxNb2RlKVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIENoYXRNZXNzYWdlLmFwcGx5Um9sbE1vZGUoY2hhdERhdGEsIHRoaXMucm9sbE1vZGUpXG4gICAgfVxuXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHRoaXMucm9sbE1vZGUpKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICB9XG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnKSBjaGF0RGF0YS5ibGluZCA9IHRydWVcblxuICAgIC8vIENoYXRNZXNzYWdlLmFwcGx5Um9sbE1vZGUoIGNoYXREYXRhLCB0aGlzLnJvbGxNb2RlKTtcbiAgICBpZiAodGhpcy5kaWNlPy5yb2xsICYmICF0aGlzLmRpY2U/LmhpZGVEaWNlKSB7XG4gICAgICBjaGF0RGF0YS5yb2xsID0gdGhpcy5kaWNlLnJvbGxcbiAgICAgIGNoYXREYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuUk9MTFxuICAgICAgY2hhdERhdGEucm9sbE1vZGUgPSB0aGlzLmlzQmxpbmQgPyAnYmxpbmRyb2xsJyA6IHRoaXMucm9sbE1vZGVcbiAgICB9XG5cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpLnRoZW4obXNnID0+IHtcbiAgICAgIHJldHVybiBtc2dcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gbWFrZVB1YmxpYyAgV2lsbCBjaGFuZ2UgdGhlIHJvbGwgbW9kZSB0byBwdWJsaWNcbiAgICovXG4gIGFzeW5jIHVwZGF0ZUNoYXRDYXJkICh7IG1ha2VQdWJsaWMgPSBmYWxzZSwgZm9yY2VSb2xsID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgaWYgKG1ha2VQdWJsaWMpIHRoaXMucm9sbE1vZGUgPSBmYWxzZSAvLyByZXNldCByb2xsIG1vZGVcblxuICAgIGNvbnN0IGNoYXREYXRhID0geyBmbGF2b3I6IHRoaXMuZmxhdm9yIH1cblxuICAgIGlmIChtYWtlUHVibGljKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gW11cbiAgICAgIGNoYXREYXRhLmJsaW5kID0gZmFsc2VcbiAgICAgIENoYXRNZXNzYWdlLmFwcGx5Um9sbE1vZGUoY2hhdERhdGEpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBbXVxuICAgICAgY2hhdERhdGEuYmxpbmQgPSBmYWxzZVxuICAgICAgQ2hhdE1lc3NhZ2UuYXBwbHlSb2xsTW9kZShjaGF0RGF0YSwgZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKSlcbiAgICB9XG5cbiAgICBpZiAoY2hhdERhdGEuYmxpbmQpIHtcbiAgICAgIHRoaXMuaXNCbGluZCA9IHRydWVcbiAgICB9XG5cbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvcm9sbC1yZXN1bHQuaHRtbCdcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMpXG4gICAgbGV0IG5ld0NvbnRlbnQgPSBodG1sXG5cbiAgICBpZiAoIXRoaXMubWVzc2FnZUlkKSByZXR1cm4gJC5wYXJzZUhUTUwoaHRtbClbMF0gLy8gSWYgbm8gbWVzc2FnZUlkIHJldHVybiB0aGUgSFRNTEVsZW1lbnQgY29udGFpbmluZyB0aGUgcm9sbC5cbiAgICAvLyBJZiBubyBtZXNzYWdlSWRcblxuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcbiAgICBjb25zdCBodG1sTWVzc2FnZSA9ICQucGFyc2VIVE1MKG1lc3NhZ2UuZGF0YS5jb250ZW50KVswXVxuICAgIGlmICghaHRtbE1lc3NhZ2UuY2xhc3NMaXN0LmNvbnRhaW5zKCdyb2xsLXJlc3VsdCcpKSB7XG4gICAgICBjb25zdCBodG1sQ2hlY2sgPSAkLnBhcnNlSFRNTChodG1sKVswXVxuICAgICAgY29uc3Qgcm9sbFJlc3VsdEVsZW1lbnQgPSBodG1sTWVzc2FnZS5xdWVyeVNlbGVjdG9yKCcucm9sbC1yZXN1bHQnKVxuICAgICAgaWYgKHJvbGxSZXN1bHRFbGVtZW50ICE9PSBudWxsKSB7XG4gICAgICAgIHJvbGxSZXN1bHRFbGVtZW50LnJlcGxhY2VXaXRoKGh0bWxDaGVjaylcbiAgICAgIH1cbiAgICAgIG5ld0NvbnRlbnQgPSBodG1sTWVzc2FnZS5vdXRlckhUTUxcbiAgICB9XG5cbiAgICBjaGF0RGF0YS5jb250ZW50ID0gbmV3Q29udGVudFxuXG4gICAgaWYgKENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5ST0xMID09PSBtZXNzYWdlLmRhdGEudHlwZSkge1xuICAgICAgaWYgKG1lc3NhZ2UuZGF0YS53aGlzcGVyPy5sZW5ndGgpIHtcbiAgICAgICAgY2hhdERhdGEudHlwZSA9IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5XSElTUEVSXG4gICAgICB9IGVsc2UgY2hhdERhdGEudHlwZSA9IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5PVEhFUlxuICAgIH1cblxuICAgIGlmIChmb3JjZVJvbGwgJiYgdGhpcy5kaWNlPy5yb2xsKSB7XG4gICAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZCh0aGlzLmRpY2Uucm9sbClcbiAgICB9XG5cbiAgICBjb25zdCBtc2cgPSBhd2FpdCBtZXNzYWdlLnVwZGF0ZShjaGF0RGF0YSlcbiAgICBhd2FpdCB1aS5jaGF0LnVwZGF0ZU1lc3NhZ2UobXNnLCBmYWxzZSlcbiAgICByZXR1cm4gbXNnXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdXBkYXRlQ2FyZFN3aXRjaCAoZXZlbnQpIHtcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuY2hhdC1jYXJkJylcbiAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgIGNoZWNrLmdtRGlmZmljdWx0eVJlZ3VsYXIgPSBmYWxzZVxuICAgIGNoZWNrLmdtRGlmZmljdWx0eUhhcmQgPSBmYWxzZVxuICAgIGNoZWNrLmdtRGlmZmljdWx0eUV4dHJlbWUgPSBmYWxzZVxuICAgIGNoZWNrLmdtRGlmZmljdWx0eUNyaXRpY2FsID0gZmFsc2VcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWcgPT09ICdnbURpZmZpY3VsdHlSZWd1bGFyJykge1xuICAgICAgY2hlY2suZ21EaWZmaWN1bHR5UmVndWxhciA9IHRydWVcbiAgICB9XG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnID09PSAnZ21EaWZmaWN1bHR5SGFyZCcpIHtcbiAgICAgIGNoZWNrLmdtRGlmZmljdWx0eUhhcmQgPSB0cnVlXG4gICAgfVxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZyA9PT0gJ2dtRGlmZmljdWx0eUV4dHJlbWUnKSB7XG4gICAgICBjaGVjay5nbURpZmZpY3VsdHlFeHRyZW1lID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWcgPT09ICdnbURpZmZpY3VsdHlDcml0aWNhbCcpIHtcbiAgICAgIGNoZWNrLmdtRGlmZmljdWx0eUNyaXRpY2FsID0gdHJ1ZVxuICAgIH1cbiAgICBjaGVjay5jb21wdXRlQ2hlY2soKVxuICAgIGNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIC8vIE9CU09MRVRFICFcbiAgYXN5bmMgc2hvcnRSZXN1bHQgKGRldGFpbHMgPSBmYWxzZSkge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xsLmh0bWwnXG4gICAgdGhpcy5kZXRhaWxzID0gZGV0YWlscyB8fCBmYWxzZVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGhpcylcbiAgICByZXR1cm4gaHRtbFxuICB9XG5cbiAgZ2V0IHRvb2x0aXAgKCkge1xuICAgIHJldHVybiByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvcm9sbHMvcm9sbC10b29sdGlwLmh0bWwnLFxuICAgICAgdGhpc1xuICAgIClcbiAgfVxuXG4gIGdldCBpbmxpbmVDaGVjayAoKSB7XG4gICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKVxuICAgIGEuY2xhc3NMaXN0LmFkZCgnY29jNy1pbmxpbmUtY2hlY2snKVxuICAgIGEuY2xhc3NMaXN0LmFkZCgnY29jNy1jaGVjay1yZXN1bHQnKVxuICAgIGEuY2xhc3NMaXN0LmFkZCgnY29jNy1pbmxpbmUnKVxuICAgIGEuY2xhc3NMaXN0LmFkZCguLi50aGlzLmNzc0NsYXNzTGlzdClcbiAgICBhLnRpdGxlID0gdGhpcy50b29sdGlwSGVhZGVyXG4gICAgYS5kYXRhc2V0LnJvbGwgPSBlc2NhcGUodGhpcy5KU09OUm9sbFN0cmluZykgLy8gVE9ETyFJTVBPUlRBTlQhISFcbiAgICBhLmlubmVySFRNTCA9IGA8aSBjbGFzcz1cImdhbWUtaWNvbiBnYW1lLWljb24tZDEwXCI+PC9pPiAke3RoaXNcbiAgICAgIC5tb2RpZmllZFJlc3VsdCB8fCAnPz8nfWBcbiAgICByZXR1cm4gYVxuICB9XG5cbiAgZ2V0IHJvbGxUb29sVGlwICgpIHtcbiAgICBpZiAodGhpcy5zdGFuZGJ5KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgcGFydHMgPSBbXVxuICAgIGNvbnN0IHRlbnMgPSB0aGlzLmRpY2VzLnRlbnMubWFwKHIgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdWx0OiByLnZhbHVlLFxuICAgICAgICBzZWxlY3RlZDogci5zZWxlY3RlZCxcbiAgICAgICAgY2xhc3NlczogW1xuICAgICAgICAgICdkaWUnLFxuICAgICAgICAgICdkMTAnLFxuICAgICAgICAgICFyLnNlbGVjdGVkID8gJ2Rpc2NhcmRlZCcgOiBudWxsLFxuICAgICAgICAgIHIuaXNNaW4gPyAnbWluJyA6IG51bGwsXG4gICAgICAgICAgci5pc01heCA/ICdtYXgnIDogbnVsbFxuICAgICAgICBdXG4gICAgICAgICAgLmZpbHRlcihjID0+IGMpXG4gICAgICAgICAgLmpvaW4oJyAnKVxuICAgICAgfVxuICAgIH0pXG4gICAgY29uc3QgdW5pdCA9IFtcbiAgICAgIHtcbiAgICAgICAgcmVzdWx0OiB0aGlzLmRpY2VzLnVuaXQudmFsdWUsXG4gICAgICAgIHNlbGVjdGVkOiB0cnVlLFxuICAgICAgICBjbGFzc2VzOiAnZGllIGQxMCdcbiAgICAgIH1cbiAgICBdXG5cbiAgICBwYXJ0cy5wdXNoKHtcbiAgICAgIGZvcm11bGE6IHRoaXMudG9vbHRpcEhlYWRlcixcbiAgICAgIHRvdGFsOiB0aGlzLm1vZGlmaWVkUmVzdWx0LFxuICAgICAgaWNvbnM6IHRoaXMuc3VjY2Vzc0xldmVsSWNvbnMsXG4gICAgICBjbGFzczogdGhpcy5jc3NDbGFzcyxcbiAgICAgIHN1Y2Nlc3NSZXF1aXJlZDogdGhpcy5zdWNjZXNzUmVxdWlyZWQsXG4gICAgICByZXN1bHRUeXBlOiB0aGlzLnJlc3VsdFR5cGUsXG4gICAgICBmYWNlOiAxMCxcbiAgICAgIHJvbGxzOiBbLi4udGVucywgLi4udW5pdF1cbiAgICB9KVxuICAgIHJldHVybiByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvcm9sbHMvcm9sbC10b29sdGlwLmh0bWwnLFxuICAgICAgeyBwYXJ0cyB9XG4gICAgKVxuICB9XG5cbiAgZ2V0IEpTT05Sb2xsRGF0YSAoKSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UodGhpcy5KU09OUm9sbFN0cmluZylcbiAgfVxuXG4gIGdldCBKU09OUm9sbFN0cmluZyAoKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMsIChrZXksIHZhbHVlKSA9PiB7XG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIGNvbnN0IGV4Y2x1ZGUgPSBbJ19hY3RvcicsICdfc2tpbGwnLCAnX2l0ZW0nXVxuICAgICAgaWYgKGV4Y2x1ZGUuaW5jbHVkZXMoa2V5KSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgcmV0dXJuIHZhbHVlXG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBmcm9tRGF0YSAoZGF0YSkge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG5ldyBDb0M3Q2hlY2soKSwgZGF0YSlcbiAgfVxuXG4gIHN0YXRpYyBmcm9tUm9sbFN0cmluZyAoZGF0YVN0cmluZykge1xuICAgIGxldCBkYXRhXG4gICAgdHJ5IHtcbiAgICAgIGRhdGEgPSBKU09OLnBhcnNlKHVuZXNjYXBlKGRhdGFTdHJpbmcpKVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnIubWVzc2FnZSlcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICAgIHJldHVybiBDb0M3Q2hlY2suZnJvbURhdGEoZGF0YSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBhbHRlciAoY2hlY2ssIGNvbW1hbmQsIG9wdGlvbnMgPSB7fSkge1xuICAgIHN3aXRjaCAoY29tbWFuZCkge1xuICAgICAgY2FzZSAndXNlTHVjayc6IHtcbiAgICAgICAgaWYgKG9wdGlvbnMudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncGFzcy1jaGVjaycpKSB7XG4gICAgICAgICAgY29uc3QgbHVja0Ftb3VudCA9IHBhcnNlSW50KG9wdGlvbnMudGFyZ2V0LmRhdGFzZXQubHVja0Ftb3VudClcbiAgICAgICAgICBjaGVjay5mb3JjZVBhc3MobHVja0Ftb3VudCwgb3B0aW9ucy51cGRhdGUpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgdXBncmFkZUluZGV4ID0gcGFyc2VJbnQob3B0aW9ucy50YXJnZXQuZGF0YXNldC5pbmRleClcbiAgICAgICAgICBhd2FpdCBjaGVjay51cGdyYWRlQ2hlY2sodXBncmFkZUluZGV4LCBvcHRpb25zLnVwZGF0ZSlcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdmb3JjZS1wYXNzJzoge1xuICAgICAgICBjaGVjay5mb3JjZVBhc3MobnVsbCwgb3B0aW9ucy51cGRhdGUpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2ZvcmNlLWZhaWwnOiB7XG4gICAgICAgIGNoZWNrLmZvcmNlRmFpbChvcHRpb25zLnVwZGF0ZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnaW5jcmVhc2Utc3VjY2Vzcy1sZXZlbCc6IHtcbiAgICAgICAgY2hlY2suaW5jcmVhc2VTdWNjZXNzTGV2ZWwob3B0aW9ucy51cGRhdGUpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2RlY3JlYXNlLXN1Y2Nlc3MtbGV2ZWwnOiB7XG4gICAgICAgIGNoZWNrLmRlY3JlYXNlU3VjY2Vzc0xldmVsKG9wdGlvbnMudXBkYXRlKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyZXZlYWwtY2hlY2snOiB7XG4gICAgICAgIGNoZWNrLmlzQmxpbmQgPSBmYWxzZVxuICAgICAgICBjaGVjay5yb2xsTW9kZSA9IGZhbHNlXG4gICAgICAgIGNoZWNrLmNvbXB1dGVDaGVjaygpXG4gICAgICAgIGlmIChvcHRpb25zLnVwZGF0ZSkgY2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdmbGFnLWZvci1kZXZlbG9wbWVudCc6IHtcbiAgICAgICAgYXdhaXQgY2hlY2suZmxhZ0ZvckRldmVsb3BlbWVudCgpXG4gICAgICAgIGNoZWNrLmNvbXB1dGVDaGVjaygpXG4gICAgICAgIGlmIChvcHRpb25zLnVwZGF0ZSkgY2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdwdXNoJzoge1xuICAgICAgICBhd2FpdCBjaGVjay5fcGVyZm9ybSgpXG4gICAgICAgIGNoZWNrLnB1c2hpbmcgPSB0cnVlXG4gICAgICAgIGlmIChvcHRpb25zLnVwZGF0ZSkgY2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25DbGlja0lubGluZVJvbGwgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG5cbiAgICBpZiAoYS5jbGFzc0xpc3QuY29udGFpbnMoJ2NvYzctY2hlY2stcmVzdWx0JykpIHtcbiAgICAgIGlmIChhLmNsYXNzTGlzdC5jb250YWlucygnZXhwYW5kZWQnKSkge1xuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLl9jb2xsYXBzZUlubGluZVJlc3VsdChhKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5fZXhwYW5kSW5saW5lUmVzdWx0KGEpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIF9jb2xsYXBzZUlubGluZVJlc3VsdCAoYSkge1xuICAgIGlmICghYS5jbGFzc0xpc3QuY29udGFpbnMoJ2NvYzctaW5saW5lLWNoZWNrJykpIHJldHVyblxuICAgIGlmICghYS5jbGFzc0xpc3QuY29udGFpbnMoJ2V4cGFuZGVkJykpIHJldHVyblxuICAgIGNvbnN0IHRvb2x0aXAgPSBhLnF1ZXJ5U2VsZWN0b3IoJy5jb2M3LWNoZWNrLXRvb2x0aXAnKVxuICAgIGlmICh0b29sdGlwKSB0b29sdGlwLnJlbW92ZSgpXG4gICAgcmV0dXJuIGEuY2xhc3NMaXN0LnJlbW92ZSgnZXhwYW5kZWQnKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9leHBhbmRJbmxpbmVSZXN1bHQgKGEpIHtcbiAgICBpZiAoIWEuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb2M3LWlubGluZS1jaGVjaycpKSByZXR1cm5cbiAgICBpZiAoYS5jbGFzc0xpc3QuY29udGFpbnMoJ2V4cGFuZGVkJykpIHJldHVyblxuXG4gICAgLy8gQ3JlYXRlIGEgbmV3IHRvb2x0aXBcbiAgICBjb25zdCBjaGVjayA9IE9iamVjdC5hc3NpZ24oXG4gICAgICBuZXcgQ29DN0NoZWNrKCksXG4gICAgICBKU09OLnBhcnNlKHVuZXNjYXBlKGEuZGF0YXNldC5yb2xsKSlcbiAgICApIC8vIFRPRE8gOiBmaW5kIHN0cmluZ2lmeSB1bmVzY2FwZSAhISAyMDIxMDIwNVxuICAgIGlmIChjaGVjay5zdGFuZGJ5KSByZXR1cm5cblxuICAgIGNvbnN0IHRpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdGlwLmlubmVySFRNTCA9IGF3YWl0IGNoZWNrLnJvbGxUb29sVGlwXG5cbiAgICAvLyBBZGQgdGhlIHRvb2x0aXBcbiAgICBjb25zdCB0b29sdGlwID0gdGlwLmNoaWxkcmVuWzBdXG4gICAgYS5hcHBlbmRDaGlsZCh0b29sdGlwKVxuICAgIGEuY2xhc3NMaXN0LmFkZCgnZXhwYW5kZWQnKVxuXG4gICAgLy8gU2V0IHRoZSBwb3NpdGlvblxuICAgIGNvbnN0IHBhID0gYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgIGNvbnN0IHB0ID0gdG9vbHRpcC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgIHRvb2x0aXAuc3R5bGUubGVmdCA9IGAke01hdGgubWluKFxuICAgICAgcGEueCxcbiAgICAgIHdpbmRvdy5pbm5lcldpZHRoIC0gKHB0LndpZHRoICsgMylcbiAgICApfXB4YFxuICAgIHRvb2x0aXAuc3R5bGUudG9wID0gYCR7TWF0aC5taW4oXG4gICAgICBwYS55ICsgcGEuaGVpZ2h0ICsgMyxcbiAgICAgIHdpbmRvdy5pbm5lckhlaWdodCAtIChwdC5oZWlnaHQgKyAzKVxuICAgICl9cHhgXG4gICAgY29uc3QgemkgPSBnZXRDb21wdXRlZFN0eWxlKGEpLnpJbmRleFxuICAgIHRvb2x0aXAuc3R5bGUuekluZGV4ID0gTnVtYmVyLmlzTnVtZXJpYyh6aSkgPyB6aSArIDEgOiAxMDBcbiAgfVxufVxuIiwiLyogZ2xvYmFsIERpYWxvZywgRm9ybURhdGEsIGdhbWUsIHJlbmRlclRlbXBsYXRlICovXG5cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuXG5leHBvcnQgY2xhc3MgUm9sbERpYWxvZyB7XG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKG9wdGlvbnMgPSB7fSkge1xuICAgIGlmIChvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgIG9wdGlvbnMuZGlmZmljdWx0eUxldmVsID0ge31cbiAgICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnVua25vd24gPT09IG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgICBvcHRpb25zLmRpZmZpY3VsdHlMZXZlbC51bmtub3duID0gdHJ1ZVxuICAgICAgfVxuICAgICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA9PT0gb3B0aW9ucy5kaWZmaWN1bHR5KSB7XG4gICAgICAgIG9wdGlvbnMuZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgPSB0cnVlXG4gICAgICB9XG4gICAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkID09PSBvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgICAgb3B0aW9ucy5kaWZmaWN1bHR5TGV2ZWwuaGFyZCA9IHRydWVcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWUgPT09IG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgICBvcHRpb25zLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGlmKCB1bmRlZmluZWQgPT0gb3B0aW9ucy5hc2tWYWx1ZSkgb3B0aW9ucy5hc2tWYWx1ZSA9IHRydWU7XG4gICAgaWYgKG9wdGlvbnMubmFtZSAmJiAhb3B0aW9ucy5kaXNwbGF5TmFtZSkgb3B0aW9ucy5kaXNwbGF5TmFtZSA9IG9wdGlvbnMubmFtZVxuICAgIGNvbnN0IHVua25vd25EaWZmaWN1bHR5RGVmYXVsdCA9XG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkZWZhdWx0Q2hlY2tEaWZmaWN1bHR5JykgPT09ICd1bmtub3duJ1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvYm9udXMuaHRtbCcsXG4gICAgICB7XG4gICAgICAgIGFsbG93RmxhdERpY2VNb2RpZmllcjpcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhbGxvd0ZsYXREaWNlTW9kaWZpZXInKSAmJlxuICAgICAgICAgICFvcHRpb25zLmRpc2FibGVGbGF0RGljZU1vZGlmaWVyLFxuICAgICAgICBhbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllcjpcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllcicpICYmXG4gICAgICAgICAgIW9wdGlvbnMuZGlzYWJsZUZsYXRUaHJlc2hvbGRNb2RpZmllcixcbiAgICAgICAgZGlmZmljdWx0eTogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbCxcbiAgICAgICAgdW5rbm93bkRpZmZpY3VsdHlEZWZhdWx0OiB1bmtub3duRGlmZmljdWx0eURlZmF1bHQsXG4gICAgICAgIG9wdGlvbnNcbiAgICAgIH1cbiAgICApXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgbGV0IGZvcm1EYXRhID0gbnVsbFxuICAgICAgY29uc3QgZGxnID0gbmV3IERpYWxvZyh7XG4gICAgICAgIHRpdGxlOiBvcHRpb25zLmRpc3BsYXlOYW1lXG4gICAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkJvbnVzU2VsZWN0aW9uV2luZG93TmFtZWQnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IG9wdGlvbnMuZGlzcGxheU5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQm9udXNTZWxlY3Rpb25XaW5kb3cnKSxcbiAgICAgICAgY29udGVudDogaHRtbCxcbiAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgIHJvbGw6IHtcbiAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbERpY2UnKSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBodG1sID0+IHtcbiAgICAgICAgICAgICAgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcjYm9udXMtcm9sbC1mb3JtJykpXG4gICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGZvcm1EYXRhKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdDogJ3JvbGwnLFxuICAgICAgICBjbG9zZTogKCkgPT4ge31cbiAgICAgIH0pXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIERpYWxvZywgRm9ybURhdGEsIGdhbWUsIHJlbmRlclRlbXBsYXRlICovXG5cbmV4cG9ydCBjbGFzcyBTYW5EYXRhRGlhbG9nIGV4dGVuZHMgRGlhbG9nIHtcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIGh0bWwuZmluZCgnOmNoZWNrYm94JykuY2xpY2soKCkgPT4gdGhpcy5fdG9nZ2xlSW5wdXQoaHRtbCkpXG4gIH1cblxuICBfdG9nZ2xlSW5wdXQgKGh0bWwpIHtcbiAgICBodG1sLmZpbmQoJypbbmFtZT1cImN1c3RvbW5hbWVcIl0nKS50b2dnbGUoKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9zYW5kYXRhLmh0bWwnLFxuICAgICAgb3B0aW9uc1xuICAgIClcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGxldCBmb3JtRGF0YSA9IG51bGxcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBTYW5EYXRhRGlhbG9nKHtcbiAgICAgICAgdGl0bGU6IG9wdGlvbnMuZGlzcGxheU5hbWVcbiAgICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2FuRGF0YVNlbGVjdGlvbldpbmRvd05hbWVkJywge1xuICAgICAgICAgICAgICBuYW1lOiBvcHRpb25zLmRpc3BsYXlOYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbkRhdGFTZWxlY3Rpb25XaW5kb3cnKSwgLy8gVE9ETzogUmVtb3ZlIFNhbkRhdGFTZWxlY3Rpb25XaW5kb3dOYW1lZFxuICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgVmFsaWRhdGU6IHtcbiAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVmFsaWRhdGUnKSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBodG1sID0+IHtcbiAgICAgICAgICAgICAgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcjc2FuLWRhdGEtZm9ybScpKVxuICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShmb3JtRGF0YSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRlZmF1bHQ6ICdWYWxpZGF0ZScsXG4gICAgICAgIGNsb3NlOiAoKSA9PiB7fVxuICAgICAgfSlcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQWN0b3JTaGVldCwgQ2hhdE1lc3NhZ2UsIENPTlNULCBEaWFsb2csIEZvcm1EYXRhLCBnYW1lLCBnZXRQcm9wZXJ0eSwgSG9va3MsIG1lcmdlT2JqZWN0LCBSb2xsLCBUZXh0RWRpdG9yLCB1aSAqL1xuXG5pbXBvcnQgeyBSb2xsRGlhbG9nIH0gZnJvbSAnLi4vLi4vYXBwcy9yb2xsLWRpYWxvZy5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdNZWxlZUluaXRpYXRvciB9IGZyb20gJy4uLy4uL2NoYXQvY29tYmF0L21lbGVlLWluaXRpYXRvci5qcydcbmltcG9ydCB7IENvQzdSYW5nZUluaXRpYXRvciB9IGZyb20gJy4uLy4uL2NoYXQvcmFuZ2Vjb21iYXQuanMnXG4vLyBpbXBvcnQgeyBDb0M3RGFtYWdlUm9sbCB9IGZyb20gJy4uLy4uL2NoYXQvZGFtYWdlY2FyZHMuanMnO1xuaW1wb3J0IHsgQ29DN0NvbkNoZWNrIH0gZnJvbSAnLi4vLi4vY2hhdC9jb25jaGVjay5qcydcbmltcG9ydCB7IGlzQ3RybEtleSB9IGZyb20gJy4uLy4uL2NoYXQvaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DN1BhcnNlciB9IGZyb20gJy4uLy4uL2FwcHMvcGFyc2VyLmpzJ1xuaW1wb3J0IHsgU2FuRGF0YURpYWxvZyB9IGZyb20gJy4uLy4uL2FwcHMvc2FuZGF0YS1kaWFsb2cuanMnXG5pbXBvcnQgeyBTYW5DaGVja0NhcmQgfSBmcm9tICcuLi8uLi9jaGF0L2NhcmRzL3Nhbi1jaGVjay5qcydcbmltcG9ydCB7IE9wcG9zZWRDaGVja0NhcmQgfSBmcm9tICcuLi8uLi9jaGF0L2NhcmRzL29wcG9zZWQtcm9sbC5qcydcbmltcG9ydCB7IENvbWJpbmVkQ2hlY2tDYXJkIH0gZnJvbSAnLi4vLi4vY2hhdC9jYXJkcy9jb21iaW5lZC1yb2xsLmpzJ1xuaW1wb3J0IHsgRGFtYWdlQ2FyZCB9IGZyb20gJy4uLy4uL2NoYXQvY2FyZHMvZGFtYWdlLmpzJ1xuaW1wb3J0IHsgQ29DN0xpbmtDcmVhdGlvbkRpYWxvZyB9IGZyb20gJy4uLy4uL2FwcHMvbGluay1jcmVhdGlvbi1kaWFsb2cuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBBY3RvclNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3QWN0b3JTaGVldCBleHRlbmRzIEFjdG9yU2hlZXQge1xuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICAvKiogTU9ESUY6IDAuOC54ICoqL1xuICAgIGNvbnN0IGFjdG9yRGF0YSA9IHRoaXMuYWN0b3IuZGF0YS50b09iamVjdChmYWxzZSlcbiAgICBkYXRhLmRhdGEgPSBhY3RvckRhdGEuZGF0YSAvLyBNb2RpZiAwLjgueCA6IGRhdGEuZGF0YVxuICAgIGRhdGEuZWRpdGFibGUgPSB0aGlzLmlzRWRpdGFibGUgLy8gTU9ESUYgMC44LnggOiBlZGl0YWJsZSByZW1vdmVkXG4gICAgLyoqKioqKioqKioqKioqKioqKi9cblxuICAgIGRhdGEuaXNUb2tlbiA9IHRoaXMuYWN0b3IuaXNUb2tlblxuICAgIGRhdGEuaXRlbXNCeVR5cGUgPSB7fVxuICAgIGRhdGEuc2tpbGxzID0ge31cbiAgICBkYXRhLmNvbWJhdFNraWxscyA9IHt9XG4gICAgZGF0YS53ZWFwb25zID0ge31cbiAgICBkYXRhLnJhbmdlV3BuID0gW11cbiAgICBkYXRhLm1lbGVlV3BuID0gW11cbiAgICBkYXRhLmFjdG9yRmxhZ3MgPSB7fVxuXG4gICAgZGF0YS5wZXJtaXNzaW9uTGltaXRlZCA9XG4gICAgICAodGhpcy5hY3Rvci5kYXRhLnBlcm1pc3Npb25bZ2FtZS51c2VyLmlkXSA9PT1cbiAgICAgICAgQ09OU1QuRU5USVRZX1BFUk1JU1NJT05TLkxJTUlURUQgfHxcbiAgICAgICAgdGhpcy5hY3Rvci5kYXRhLnBlcm1pc3Npb24uZGVmYXVsdCA9PT1cbiAgICAgICAgICBDT05TVC5FTlRJVFlfUEVSTUlTU0lPTlMuTElNSVRFRCkgJiZcbiAgICAgICFnYW1lLnVzZXIuaXNHTVxuICAgIGRhdGEuaXNHTSA9IGdhbWUudXNlci5pc0dNXG4gICAgZGF0YS5hbG93VW5sb2NrID1cbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3BsYXllclVubG9ja1NoZWV0TW9kZScpID09PSAnYWx3YXlzJyB8fFxuICAgICAgZ2FtZS51c2VyLmlzR00gfHxcbiAgICAgIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwbGF5ZXJVbmxvY2tTaGVldE1vZGUnKSA9PT0gJ2NyZWF0aW9uJyAmJlxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJykpXG4gICAgaWYgKFxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncGxheWVyVW5sb2NrU2hlZXRNb2RlJykgPT09ICdjcmVhdGlvbicgJiZcbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnKVxuICAgICkge1xuICAgICAgZGF0YVsnZGF0YS5mbGFncy5sb2NrZWQnXSA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKCFbJ3ZlaGljbGUnXS5pbmNsdWRlcyh0aGlzLmFjdG9yLmRhdGEudHlwZSkpIHtcbiAgICAgIGlmICghZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcykge1xuICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzID0ge1xuICAgICAgICAgIHN0cjoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5TVFInLFxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuU3RyZW5ndGgnLFxuICAgICAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgICAgIH0sXG4gICAgICAgICAgY29uOiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnQ0hBUkFDLkNPTicsXG4gICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5Db25zdGl0dXRpb24nLFxuICAgICAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2l6OiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnQ0hBUkFDLlNJWicsXG4gICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5TaXplJyxcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRleDoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5ERVgnLFxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuRGV4dGVyaXR5JyxcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFwcDoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5BUFAnLFxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuQXBwZWFyYW5jZScsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBpbnQ6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuSU5UJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkludGVsbGlnZW5jZScsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwb3c6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuUE9XJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLlBvd2VyJyxcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVkdToge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5FRFUnLFxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuRWR1Y2F0aW9uJyxcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFkYXRhLmRhdGEuYXR0cmlicykge1xuICAgICAgICBkYXRhLmRhdGEuYXR0cmlicyA9IHtcbiAgICAgICAgICBocDoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBtYXg6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0hQJyxcbiAgICAgICAgICAgIGxhYmVsOiAnSGl0IHBvaW50cycsXG4gICAgICAgICAgICBhdXRvOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBtcDoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBtYXg6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0hQJyxcbiAgICAgICAgICAgIGxhYmVsOiAnTWFnaWMgcG9pbnRzJyxcbiAgICAgICAgICAgIGF1dG86IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGxjazogeyB2YWx1ZTogbnVsbCwgc2hvcnQ6ICdMQ0snLCBsYWJlbDogJ0x1Y2snIH0sXG4gICAgICAgICAgc2FuOiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIG1heDogOTksXG4gICAgICAgICAgICBzaG9ydDogJ1NBTicsXG4gICAgICAgICAgICBsYWJlbDogJ1Nhbml0eScsXG4gICAgICAgICAgICBhdXRvOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBtb3Y6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdNT1YnLFxuICAgICAgICAgICAgbGFiZWw6ICdNb3ZlbWVudCByYXRlJyxcbiAgICAgICAgICAgIGF1dG86IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRiOiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnREInLFxuICAgICAgICAgICAgbGFiZWw6ICdEYW1hZ2UgYm9udXMnLFxuICAgICAgICAgICAgYXV0bzogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgYnVpbGQ6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdCTEQnLFxuICAgICAgICAgICAgbGFiZWw6ICdCdWlsZCcsXG4gICAgICAgICAgICBhdXRvOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBhcm1vcjogeyB2YWx1ZTogbnVsbCwgYXV0bzogZmFsc2UgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghZGF0YS5kYXRhLnN0YXR1cykge1xuICAgICAgICBkYXRhLmRhdGEuc3RhdHVzID0ge1xuICAgICAgICAgIGNyaXRpY2FsV291bmRzOiB7IHR5cGU6ICdCb29sZWFuJywgdmFsdWU6IGZhbHNlIH0sXG4gICAgICAgICAgdW5jb25zY2lvdXM6IHsgdHlwZTogJ0Jvb2xlYW4nLCB2YWx1ZTogZmFsc2UgfSxcbiAgICAgICAgICBkeWluZzogeyB0eXBlOiAnQm9vbGVhbicsIHZhbHVlOiBmYWxzZSB9LFxuICAgICAgICAgIGRlYWQ6IHsgdHlwZTogJ0Jvb2xlYW4nLCB2YWx1ZTogZmFsc2UgfSxcbiAgICAgICAgICBwcm9uZTogeyB0eXBlOiAnQm9vbGVhbicsIHZhbHVlOiBmYWxzZSB9LFxuICAgICAgICAgIHRlbXBvSW5zYW5lOiB7IHR5cGU6ICdib29sZWFuJywgdmFsdWU6IGZhbHNlIH0sXG4gICAgICAgICAgaW5kZWZJbnNhbmU6IHsgdHlwZTogJ2Jvb2xlYW4nLCB2YWx1ZTogZmFsc2UgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghZGF0YS5kYXRhLmJpb2dyYXBoeSkge1xuICAgICAgICBkYXRhLmRhdGEuYmlvZ3JhcGh5ID0ge1xuICAgICAgICAgIHBlcnNvbmFsRGVzY3JpcHRpb246IHsgdHlwZTogJ3N0cmluZycsIHZhbHVlOiAnJyB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFkYXRhLmRhdGEuaW5mb3MpIHtcbiAgICAgICAgZGF0YS5kYXRhLmluZm9zID0ge1xuICAgICAgICAgIG9jY3VwYXRpb246ICcnLFxuICAgICAgICAgIGFnZTogJycsXG4gICAgICAgICAgc2V4OiAnJyxcbiAgICAgICAgICByZXNpZGVuY2U6ICcnLFxuICAgICAgICAgIGJpcnRocGxhY2U6ICcnLFxuICAgICAgICAgIGFyY2hldHlwZTogJycsXG4gICAgICAgICAgb3JnYW5pemF0aW9uOiAnJyxcbiAgICAgICAgICBwbGF5ZXJuYW1lOiAnJ1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghZGF0YS5kYXRhLmZsYWdzKSB7XG4gICAgICAgIGRhdGEuZGF0YS5mbGFncyA9IHsgbG9ja2VkOiB0cnVlLCBtYW51YWxDcmVkaXQ6IGZhbHNlIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFkYXRhLmRhdGEuY3JlZGl0KSB7XG4gICAgICAgIGRhdGEuZGF0YS5jcmVkaXQgPSB7XG4gICAgICAgICAgbW9uZXRhcnlTeW1ib2w6IG51bGwsXG4gICAgICAgICAgbXVsdGlwbGllcjogbnVsbCxcbiAgICAgICAgICBzcGVudDogbnVsbCxcbiAgICAgICAgICBhc3NldHNEZXRhaWxzOiBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFkYXRhLmRhdGEuZGV2ZWxvcG1lbnQpIHtcbiAgICAgICAgZGF0YS5kYXRhLmRldmVsb3BtZW50ID0ge1xuICAgICAgICAgIHBlcnNvbmFsOiBudWxsLFxuICAgICAgICAgIG9jY3VwYXRpb246IG51bGwsXG4gICAgICAgICAgYXJjaGV0eXBlOiBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFkYXRhLmRhdGEuYmlvZ3JhcGh5KSBkYXRhLmRhdGEuYmlvZ3JhcGh5ID0gW11cbiAgICAgIGlmICghZGF0YS5kYXRhLmVuY291bnRlcmVkQ3JlYXR1cmVzKSBkYXRhLmRhdGEuZW5jb3VudGVyZWRDcmVhdHVyZXMgPSBbXVxuXG4gICAgICBkYXRhLmlzSW5BQm91dE9mTWFkbmVzcyA9IHRoaXMuYWN0b3IuaXNJbkFCb3V0T2ZNYWRuZXNzXG4gICAgICBkYXRhLmlzSW5zYW5lID0gdGhpcy5hY3Rvci5pc0luc2FuZVxuICAgICAgZGF0YS5ib3V0T2ZNYWRuZXNzID0gdGhpcy5hY3Rvci5ib3V0T2ZNYWRuZXNzXG4gICAgICBkYXRhLnNhbml0eSA9IHRoaXMuYWN0b3Iuc2FuaXR5XG4gICAgICBkYXRhLnB1bHBDaGFyYWN0ZXIgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZXMnKVxuICAgIH1cblxuICAgIGRhdGEuaXNEZWFkID0gdGhpcy5hY3Rvci5kZWFkXG4gICAgZGF0YS5pc0R5aW5nID0gdGhpcy5hY3Rvci5keWluZ1xuXG4gICAgaWYgKGRhdGEuaXRlbXMpIHtcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBkYXRhLml0ZW1zKSB7XG4gICAgICAgIC8vIHNpIGMnZXN0IHVuZSBmb3JtdWxlIGV0IHF1J29uIHBldXQgbCdldmFsdWVyXG4gICAgICAgIC8vIGNlIGJsb2MgZGV2cmFpdCBldHJlIGTDqXBsYWPDqSBkYW5zIGxlIGJsb2MgX3VwZGF0ZUZvcm1EYXRhXG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgICBpZiAoaXRlbS5kYXRhLnByb3BlcnRpZXMuc3BlY2lhbCkge1xuICAgICAgICAgICAgaWYgKGl0ZW0uZGF0YS5wcm9wZXJ0aWVzLmZpZ2h0aW5nKSB7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBpdGVtLmRhdGEuc3BlY2lhbGl6YXRpb24gIT09XG4gICAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lJylcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbVRvVXBkYXRlID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoaXRlbS5faWQpXG4gICAgICAgICAgICAgICAgYXdhaXQgaXRlbVRvVXBkYXRlLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAnZGF0YS5zcGVjaWFsaXphdGlvbic6IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAgICAgJ0NvQzcuRmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUnXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBpdGVtLmRhdGEuc3BlY2lhbGl6YXRpb24gPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgICAnQ29DNy5GaWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgICAgICAgICAgICApIC8vIFRPRE8gOiBDbGllbnQgd2l0aCBkaWZmZXJlbnQgbGFuZ3VhZ2UgPSByZWN1cnNpdmUgY2FsbCB3aGVuIG9wZW5pbmcgdGhlIHNhbWUgc2hlZXQuXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpdGVtLmRhdGEucHJvcGVydGllcy5maXJlYXJtKSB7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBpdGVtLmRhdGEuc3BlY2lhbGl6YXRpb24gIT09XG4gICAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUnKVxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtVG9VcGRhdGUgPSB0aGlzLmFjdG9yLml0ZW1zLmdldChpdGVtLl9pZClcbiAgICAgICAgICAgICAgICBhd2FpdCBpdGVtVG9VcGRhdGUudXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICdkYXRhLnNwZWNpYWxpemF0aW9uJzogZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICAgICAnQ29DNy5GaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgaXRlbS5kYXRhLnNwZWNpYWxpemF0aW9uID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICAgJ0NvQzcuRmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodGhpcy5hY3Rvci5kYXRhLnR5cGUgIT09ICdjaGFyYWN0ZXInKSB7XG4gICAgICAgICAgICBpZiAoaXNOYU4oTnVtYmVyKGl0ZW0uZGF0YS52YWx1ZSkpKSB7XG4gICAgICAgICAgICAgIGxldCB2YWx1ZSA9IG51bGxcbiAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0ge31cbiAgICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoXG4gICAgICAgICAgICAgICAgQ09DNy5mb3JtdWxhLmFjdG9yc2hlZXRcbiAgICAgICAgICAgICAgKSkge1xuICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCgnQCcpICYmIHZhbHVlLnN0YXJ0c1dpdGgoJ3RoaXMuJykpIHtcbiAgICAgICAgICAgICAgICAgIHBhcnNlZFtrZXkuc3Vic3RyaW5nKDEpXSA9IGdldFByb3BlcnR5KFxuICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZS5zdWJzdHJpbmcoNSlcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IChcbiAgICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBSb2xsKGl0ZW0uZGF0YS52YWx1ZSwgcGFyc2VkKS5ldmFsdWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIGFzeW5jOiB0cnVlXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICkudG90YWxcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgICAgICAgYHVuYWJsZSB0byBwYXJzZSBmb3JtdWxhIDoke2l0ZW0uZGF0YS52YWx1ZX0gZm9yIHNraWxsICR7aXRlbS5uYW1lfWBcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBudWxsXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpdGVtLmRhdGEudmFsdWUgPSB2YWx1ZVxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1Ub1VwZGF0ZSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGl0ZW0uX2lkKVxuICAgICAgICAgICAgICAgIGF3YWl0IGl0ZW1Ub1VwZGF0ZS51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgJ2RhdGEudmFsdWUnOiB2YWx1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yLml0ZW1zLmdldChpdGVtLl9pZClcbiAgICAgICAgICAgIGl0ZW0uZGF0YS5iYXNlID0gYXdhaXQgc2tpbGwuYXN5bmNCYXNlKClcblxuICAgICAgICAgICAgaWYgKGl0ZW0uZGF0YS52YWx1ZSkge1xuICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGl0ZW0uZGF0YS52YWx1ZVxuICAgICAgICAgICAgICBjb25zdCBleHAgPSBpdGVtLmRhdGEuYWRqdXN0bWVudHM/LmV4cGVyaWVuY2VcbiAgICAgICAgICAgICAgICA/IHBhcnNlSW50KGl0ZW0uZGF0YS5hZGp1c3RtZW50cy5leHBlcmllbmNlKVxuICAgICAgICAgICAgICAgIDogMFxuICAgICAgICAgICAgICBsZXQgdXBkYXRlZEV4cCA9IGV4cCArIHBhcnNlSW50KGl0ZW0uZGF0YS52YWx1ZSkgLSBza2lsbC52YWx1ZVxuICAgICAgICAgICAgICBpZiAodXBkYXRlZEV4cCA8PSAwKSB1cGRhdGVkRXhwID0gbnVsbFxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnVwZGF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIF9pZDogaXRlbS5faWQsXG4gICAgICAgICAgICAgICAgICAnZGF0YS5hZGp1c3RtZW50cy5leHBlcmllbmNlJzogdXBkYXRlZEV4cCxcbiAgICAgICAgICAgICAgICAgICdkYXRhLnZhbHVlJzogbnVsbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgaWYgKCFpdGVtLmRhdGEuYWRqdXN0bWVudHMpIGl0ZW0uZGF0YS5hZGp1c3RtZW50cyA9IHt9XG4gICAgICAgICAgICAgIGl0ZW0uZGF0YS5hZGp1c3RtZW50cy5leHBlcmllbmNlID0gdXBkYXRlZEV4cFxuICAgICAgICAgICAgICBpdGVtLmRhdGEudmFsdWUgPSB2YWx1ZVxuICAgICAgICAgICAgfSBlbHNlIGl0ZW0uZGF0YS52YWx1ZSA9IHNraWxsLnZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxpc3QgPSBkYXRhLml0ZW1zQnlUeXBlW2l0ZW0udHlwZV1cbiAgICAgICAgaWYgKCFsaXN0KSB7XG4gICAgICAgICAgbGlzdCA9IFtdXG4gICAgICAgICAgZGF0YS5pdGVtc0J5VHlwZVtpdGVtLnR5cGVdID0gbGlzdFxuICAgICAgICB9XG4gICAgICAgIGxpc3QucHVzaChpdGVtKVxuICAgICAgfVxuXG4gICAgICBmb3IgKGNvbnN0IGl0ZW1UeXBlIGluIGRhdGEuaXRlbXNCeVR5cGUpIHtcbiAgICAgICAgZGF0YS5pdGVtc0J5VHlwZVtpdGVtVHlwZV0uc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgIGxldCBsY2FcbiAgICAgICAgICBsZXQgbGNiXG4gICAgICAgICAgaWYgKGEuZGF0YS5wcm9wZXJ0aWVzICYmIGIuZGF0YS5wcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBsY2EgPVxuICAgICAgICAgICAgICBhLmRhdGEucHJvcGVydGllcy5zcGVjaWFsICYmXG4gICAgICAgICAgICAgIHR5cGVvZiBhLmRhdGEuc3BlY2lhbGl6YXRpb24gIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICAgICAgPyBhLmRhdGEuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgICAgICAgICAgLm5vcm1hbGl6ZSgnTkZEJylcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1tcXHUwMzAwLVxcdTAzNmZdL2csICcnKVxuICAgICAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKSArXG4gICAgICAgICAgICAgICAgICBhLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgLm5vcm1hbGl6ZSgnTkZEJylcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1tcXHUwMzAwLVxcdTAzNmZdL2csICcnKVxuICAgICAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgIDogYS5uYW1lXG4gICAgICAgICAgICAgICAgICAgIC5ub3JtYWxpemUoJ05GRCcpXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bXFx1MDMwMC1cXHUwMzZmXS9nLCAnJylcbiAgICAgICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgIGxjYiA9XG4gICAgICAgICAgICAgIGIuZGF0YS5wcm9wZXJ0aWVzLnNwZWNpYWwgJiZcbiAgICAgICAgICAgICAgdHlwZW9mIGIuZGF0YS5zcGVjaWFsaXphdGlvbiAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgICAgICA/IGIuZGF0YS5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgICAgICAgICAubm9ybWFsaXplKCdORkQnKVxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvW1xcdTAzMDAtXFx1MDM2Zl0vZywgJycpXG4gICAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICAgIGIubmFtZVxuICAgICAgICAgICAgICAgICAgICAubm9ybWFsaXplKCdORkQnKVxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvW1xcdTAzMDAtXFx1MDM2Zl0vZywgJycpXG4gICAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgICAgOiBiLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgLm5vcm1hbGl6ZSgnTkZEJylcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1tcXHUwMzAwLVxcdTAzNmZdL2csICcnKVxuICAgICAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsY2EgPSBhLm5hbWVcbiAgICAgICAgICAgICAgLm5vcm1hbGl6ZSgnTkZEJylcbiAgICAgICAgICAgICAgLnJlcGxhY2UoL1tcXHUwMzAwLVxcdTAzNmZdL2csICcnKVxuICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgbGNiID0gYi5uYW1lXG4gICAgICAgICAgICAgIC5ub3JtYWxpemUoJ05GRCcpXG4gICAgICAgICAgICAgIC5yZXBsYWNlKC9bXFx1MDMwMC1cXHUwMzZmXS9nLCAnJylcbiAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGxjYS5sb2NhbGVDb21wYXJlKGxjYilcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgLy8gcmVkb25kYW50IGF2ZWMgbWF0cmljZSBpdGVtYnl0eXBlXG4gICAgICBkYXRhLnNraWxscyA9IGRhdGEuaXRlbXNcbiAgICAgICAgLmZpbHRlcihpdGVtID0+IGl0ZW0udHlwZSA9PT0gJ3NraWxsJylcbiAgICAgICAgLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICBsZXQgbGNhXG4gICAgICAgICAgbGV0IGxjYlxuICAgICAgICAgIGlmIChhLmRhdGEucHJvcGVydGllcyAmJiBiLmRhdGEucHJvcGVydGllcykge1xuICAgICAgICAgICAgbGNhID0gYS5kYXRhLnByb3BlcnRpZXMuc3BlY2lhbFxuICAgICAgICAgICAgICA/IGEuZGF0YS5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgICAgICAgLm5vcm1hbGl6ZSgnTkZEJylcbiAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bXFx1MDMwMC1cXHUwMzZmXS9nLCAnJylcbiAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpICtcbiAgICAgICAgICAgICAgICBhLm5hbWVcbiAgICAgICAgICAgICAgICAgIC5ub3JtYWxpemUoJ05GRCcpXG4gICAgICAgICAgICAgICAgICAucmVwbGFjZSgvW1xcdTAzMDAtXFx1MDM2Zl0vZywgJycpXG4gICAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgICA6IGEubmFtZVxuICAgICAgICAgICAgICAgICAgLm5vcm1hbGl6ZSgnTkZEJylcbiAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bXFx1MDMwMC1cXHUwMzZmXS9nLCAnJylcbiAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICBsY2IgPSBiLmRhdGEucHJvcGVydGllcy5zcGVjaWFsXG4gICAgICAgICAgICAgID8gYi5kYXRhLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICAgICAgICAubm9ybWFsaXplKCdORkQnKVxuICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1tcXHUwMzAwLVxcdTAzNmZdL2csICcnKVxuICAgICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKCkgK1xuICAgICAgICAgICAgICAgIGIubmFtZVxuICAgICAgICAgICAgICAgICAgLm5vcm1hbGl6ZSgnTkZEJylcbiAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bXFx1MDMwMC1cXHUwMzZmXS9nLCAnJylcbiAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgIDogYi5uYW1lXG4gICAgICAgICAgICAgICAgICAubm9ybWFsaXplKCdORkQnKVxuICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1tcXHUwMzAwLVxcdTAzNmZdL2csICcnKVxuICAgICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGNhID0gYS5uYW1lXG4gICAgICAgICAgICAgIC5ub3JtYWxpemUoJ05GRCcpXG4gICAgICAgICAgICAgIC5yZXBsYWNlKC9bXFx1MDMwMC1cXHUwMzZmXS9nLCAnJylcbiAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgIGxjYiA9IGIubmFtZVxuICAgICAgICAgICAgICAubm9ybWFsaXplKCdORkQnKVxuICAgICAgICAgICAgICAucmVwbGFjZSgvW1xcdTAzMDAtXFx1MDM2Zl0vZywgJycpXG4gICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChsY2EgPCBsY2IpIHJldHVybiAtMVxuICAgICAgICAgIGlmIChsY2EgPiBsY2IpIHJldHVybiAxXG4gICAgICAgICAgcmV0dXJuIDBcbiAgICAgICAgfSlcblxuICAgICAgZGF0YS5tZWxlZVNraWxscyA9IGRhdGEuc2tpbGxzLmZpbHRlcihcbiAgICAgICAgc2tpbGwgPT5cbiAgICAgICAgICBza2lsbC5kYXRhLnByb3BlcnRpZXMuY29tYmF0ID09PSB0cnVlICYmXG4gICAgICAgICAgc2tpbGwuZGF0YS5wcm9wZXJ0aWVzLmZpZ2h0aW5nID09PSB0cnVlXG4gICAgICApXG4gICAgICBkYXRhLnJhbmdlU2tpbGxzID0gZGF0YS5za2lsbHMuZmlsdGVyKFxuICAgICAgICBza2lsbCA9PlxuICAgICAgICAgIHNraWxsLmRhdGEucHJvcGVydGllcy5jb21iYXQgPT09IHRydWUgJiZcbiAgICAgICAgICBza2lsbC5kYXRhLnByb3BlcnRpZXMuZmlyZWFybSA9PT0gdHJ1ZVxuICAgICAgKVxuXG4gICAgICBjb25zdCBjYnRTa2lsbHMgPSBkYXRhLnNraWxscy5maWx0ZXIoXG4gICAgICAgIHNraWxsID0+IHNraWxsLmRhdGEucHJvcGVydGllcy5jb21iYXQgPT09IHRydWVcbiAgICAgIClcbiAgICAgIGlmIChjYnRTa2lsbHMpIHtcbiAgICAgICAgZm9yIChjb25zdCBza2lsbCBvZiBjYnRTa2lsbHMpIHtcbiAgICAgICAgICBkYXRhLmNvbWJhdFNraWxsc1tza2lsbC5faWRdID0gc2tpbGxcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCB3ZWFwb25zID0gZGF0YS5pdGVtc0J5VHlwZS53ZWFwb25cblxuICAgICAgaWYgKHdlYXBvbnMpIHtcbiAgICAgICAgZm9yIChjb25zdCB3ZWFwb24gb2Ygd2VhcG9ucykge1xuICAgICAgICAgIHdlYXBvbi51c2VzQWx0ZXJuYXRlU2tpbGwgPVxuICAgICAgICAgICAgd2VhcG9uLmRhdGEucHJvcGVydGllcy5hdXRvID09PSB0cnVlIHx8XG4gICAgICAgICAgICB3ZWFwb24uZGF0YS5wcm9wZXJ0aWVzLmJyc3QgPT09IHRydWVcbiAgICAgICAgICBpZiAoIXdlYXBvbi5kYXRhLmFtbW8pIHdlYXBvbi5kYXRhLmFtbW8gPSAwXG5cbiAgICAgICAgICB3ZWFwb24uc2tpbGxTZXQgPSB0cnVlXG4gICAgICAgICAgLy8gd2VhcG9uLmRhdGEuc2tpbGwubWFpbi5uYW1lID0gJyc7XG4gICAgICAgICAgLy8gd2VhcG9uLmRhdGEuc2tpbGwubWFpbi52YWx1ZSA9IDA7XG4gICAgICAgICAgLy8gd2VhcG9uLmRhdGEuc2tpbGwuYWx0ZXJuYXRpdi5uYW1lID0gJyc7XG4gICAgICAgICAgLy8gd2VhcG9uLmRhdGEuc2tpbGwuYWx0ZXJuYXRpdi52YWx1ZSA9IDA7XG4gICAgICAgICAgaWYgKHdlYXBvbi5kYXRhLnNraWxsLm1haW4uaWQgPT09ICcnKSB7XG4gICAgICAgICAgICAvLyBUT0RPIDogc2kgbCdJRCBuJ2VzdHMgcGFzIGTDqWZpbmllIG1haXMgcXUndW4gbm9tIGEgw6l0w6kgZG9ubsOpLCB1dGlsaXNlciBjZSBub20gZXQgdGFudGVyIGRlIHJldHJvdXZlciBsZSBza2lsbFxuICAgICAgICAgICAgd2VhcG9uLnNraWxsU2V0ID0gZmFsc2VcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gVE9ETyA6IGF2YW50IGQnYXNzaWdlciBsZSBza2lsbCB2w6lyaWZpZXIgcXUnaWwgZXhpc3RlIHRvdWpvdXJzLlxuICAgICAgICAgICAgLy8gc2kgaWwgbidleGlzdGUgcGx1cyBpbCBmYXV0IGxlIHJldHJvdXZlciBvdSBwYXNzZXIgc2tpbGxzZXQgYSBmYWxzZS5cbiAgICAgICAgICAgIGlmIChkYXRhLmNvbWJhdFNraWxsc1t3ZWFwb24uZGF0YS5za2lsbC5tYWluLmlkXSkge1xuICAgICAgICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHdlYXBvbi5kYXRhLnNraWxsLm1haW4uaWQpXG4gICAgICAgICAgICAgIHdlYXBvbi5kYXRhLnNraWxsLm1haW4ubmFtZSA9XG4gICAgICAgICAgICAgICAgZGF0YS5jb21iYXRTa2lsbHNbd2VhcG9uLmRhdGEuc2tpbGwubWFpbi5pZF0ubmFtZVxuICAgICAgICAgICAgICB3ZWFwb24uZGF0YS5za2lsbC5tYWluLnZhbHVlID0gc2tpbGwudmFsdWVcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHdlYXBvbi5za2lsbFNldCA9IGZhbHNlXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh3ZWFwb24uZGF0YS5za2lsbC5hbHRlcm5hdGl2LmlkICE9PSAnJykge1xuICAgICAgICAgICAgICBpZiAoZGF0YS5jb21iYXRTa2lsbHNbd2VhcG9uLmRhdGEuc2tpbGwuYWx0ZXJuYXRpdi5pZF0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgICAgICAgd2VhcG9uLmRhdGEuc2tpbGwuYWx0ZXJuYXRpdi5pZFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB3ZWFwb24uZGF0YS5za2lsbC5hbHRlcm5hdGl2Lm5hbWUgPVxuICAgICAgICAgICAgICAgICAgZGF0YS5jb21iYXRTa2lsbHNbd2VhcG9uLmRhdGEuc2tpbGwuYWx0ZXJuYXRpdi5pZF0ubmFtZVxuICAgICAgICAgICAgICAgIHdlYXBvbi5kYXRhLnNraWxsLmFsdGVybmF0aXYudmFsdWUgPSBza2lsbC52YWx1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgd2VhcG9uLmRhdGEuX3Byb3BlcnRpZXMgPSBbXVxuICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcud2VhcG9uUHJvcGVydGllcykpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5ID0ge31cbiAgICAgICAgICAgIHByb3BlcnR5LmlkID0ga2V5XG4gICAgICAgICAgICBwcm9wZXJ0eS5uYW1lID0gdmFsdWVcbiAgICAgICAgICAgIHByb3BlcnR5LnZhbHVlID0gd2VhcG9uLmRhdGEucHJvcGVydGllc1trZXldID09PSB0cnVlXG4gICAgICAgICAgICB3ZWFwb24uZGF0YS5fcHJvcGVydGllcy5wdXNoKHByb3BlcnR5KVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGRhdGEud2VhcG9uc1t3ZWFwb24uX2lkXSA9IHdlYXBvblxuICAgICAgICAgIGlmICh3ZWFwb24uZGF0YS5wcm9wZXJ0aWVzLnJuZ2QpIGRhdGEucmFuZ2VXcG4ucHVzaCh3ZWFwb24pXG4gICAgICAgICAgZWxzZSBkYXRhLm1lbGVlV3BuLnB1c2god2VhcG9uKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRva2VuID0gdGhpcy50b2tlblxuICAgICAgZGF0YS50b2tlbklkID0gdG9rZW5cbiAgICAgICAgPyBgJHt0b2tlbi5wYXJlbnQ/LmlkID8gdG9rZW4ucGFyZW50LmlkIDogJ1RPS0VOJ30uJHt0b2tlbi5pZH1gXG4gICAgICAgIDogbnVsbCAvLyBSRUZBQ1RPUklORyAoMilcblxuICAgICAgZGF0YS5oYXNFbXB0eVZhbHVlV2l0aEZvcm11bGEgPSBmYWxzZVxuICAgICAgaWYgKGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICAgICAgZm9yIChjb25zdCBjaGFyYWN0ZXJpc3RpYyBvZiBPYmplY3QudmFsdWVzKGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MpKSB7XG4gICAgICAgICAgaWYgKCFjaGFyYWN0ZXJpc3RpYy52YWx1ZSkgY2hhcmFjdGVyaXN0aWMuZWRpdGFibGUgPSB0cnVlXG4gICAgICAgICAgY2hhcmFjdGVyaXN0aWMuaGFyZCA9IE1hdGguZmxvb3IoY2hhcmFjdGVyaXN0aWMudmFsdWUgLyAyKVxuICAgICAgICAgIGNoYXJhY3RlcmlzdGljLmV4dHJlbWUgPSBNYXRoLmZsb29yKGNoYXJhY3RlcmlzdGljLnZhbHVlIC8gNSlcblxuICAgICAgICAgIC8vIElmIG5vIHZhbHVlICYmIG5vIGZvcm11bGEgZG9uJ3QgZGlzcGxheSBjaGFyYWMuXG4gICAgICAgICAgaWYgKCFjaGFyYWN0ZXJpc3RpYy52YWx1ZSAmJiAhY2hhcmFjdGVyaXN0aWMuZm9ybXVsYSkge1xuICAgICAgICAgICAgY2hhcmFjdGVyaXN0aWMuZGlzcGxheSA9IGZhbHNlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoYXJhY3RlcmlzdGljLmRpc3BsYXkgPSB0cnVlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gaWYgYW55IGNoYXJhY3RlcmlzdGljIGhhcyBubyB2YWx1ZSBidXQgaGFzIGEgZm9ybXVsYS5cbiAgICAgICAgICBpZiAoIWNoYXJhY3RlcmlzdGljLnZhbHVlICYmIGNoYXJhY3RlcmlzdGljLmZvcm11bGEpIHtcbiAgICAgICAgICAgIGNoYXJhY3RlcmlzdGljLmhhc0VtcHR5VmFsdWVXaXRoRm9ybXVsYSA9IHRydWVcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkYXRhLmhhc0VtcHR5VmFsdWVXaXRoRm9ybXVsYSA9XG4gICAgICAgICAgICBkYXRhLmhhc0VtcHR5VmFsdWVXaXRoRm9ybXVsYSB8fFxuICAgICAgICAgICAgY2hhcmFjdGVyaXN0aWMuaGFzRW1wdHlWYWx1ZVdpdGhGb3JtdWxhXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGb3IgY29tcGF0IHdpdGggcHJldmlvdXMgY2hhcmFjdGVycyB0ZXN0IGlmIGF1dG8gaXMgZGVmaW5pZWQsIGlmIG5vdCB3ZSBkZWZpbmUgaXRcbiAgICBpZiAoIVsndmVoaWNsZScsICdjb250YWluZXInXS5pbmNsdWRlcyh0aGlzLmFjdG9yLmRhdGEudHlwZSkpIHtcbiAgICAgIGNvbnN0IGF1dG8gPSB0aGlzLmFjdG9yLmNoZWNrVW5kZWZpbmVkQXV0bygpXG4gICAgICBkYXRhLmRhdGEgPSBtZXJnZU9iamVjdChkYXRhLmRhdGEsIGF1dG8pXG4gICAgfSBlbHNlIHtcbiAgICAgIGRhdGEuZGF0YS5hdHRyaWJzLmhwLmF1dG8gPSBmYWxzZVxuICAgICAgZGF0YS5kYXRhLmF0dHJpYnMubXAuYXV0byA9IGZhbHNlXG4gICAgICBkYXRhLmRhdGEuYXR0cmlicy5zYW4uYXV0byA9IGZhbHNlXG4gICAgICBkYXRhLmRhdGEuYXR0cmlicy5tb3YuYXV0byA9IGZhbHNlXG4gICAgICBkYXRhLmRhdGEuYXR0cmlicy5kYi5hdXRvID0gZmFsc2VcbiAgICAgIGRhdGEuZGF0YS5hdHRyaWJzLmJ1aWxkLmF1dG8gPSBmYWxzZVxuICAgIH1cblxuICAgIGRhdGEuZGF0YS5hdHRyaWJzLm1vdi52YWx1ZSA9IHRoaXMuYWN0b3IubW92IC8vIHJldHVybiBjb21wdXRlZCB2YWx1ZXMgb3IgZml4ZWQgdmFsdWVzIGlmIG5vdCBhdXRvLlxuICAgIGRhdGEuZGF0YS5hdHRyaWJzLmRiLnZhbHVlID0gdGhpcy5hY3Rvci5kYlxuICAgIGRhdGEuZGF0YS5hdHRyaWJzLmJ1aWxkLnZhbHVlID0gdGhpcy5hY3Rvci5idWlsZFxuXG4gICAgaWYgKHR5cGVvZiB0aGlzLmFjdG9yLmNvbXBlbmRpdW0gPT09ICd1bmRlZmluZWQnICYmIHRoaXMuYWN0b3IuaXNPd25lcikge1xuICAgICAgdGhpcy5hY3Rvci51cGRhdGUoXG4gICAgICAgIHsgJ2RhdGEuYXR0cmlicy5tb3YudmFsdWUnOiB0aGlzLmFjdG9yLm1vdiB9LFxuICAgICAgICB7IHJlbmRlcjogZmFsc2UgfVxuICAgICAgKVxuICAgICAgdGhpcy5hY3Rvci51cGRhdGUoXG4gICAgICAgIHsgJ2RhdGEuYXR0cmlicy5tb3YubWF4JzogdGhpcy5hY3Rvci5tb3YgfSxcbiAgICAgICAgeyByZW5kZXI6IGZhbHNlIH1cbiAgICAgIClcbiAgICAgIHRoaXMuYWN0b3IudXBkYXRlKFxuICAgICAgICB7ICdkYXRhLmF0dHJpYnMuZGIudmFsdWUnOiB0aGlzLmFjdG9yLmRiIH0sXG4gICAgICAgIHsgcmVuZGVyOiBmYWxzZSB9XG4gICAgICApXG4gICAgICB0aGlzLmFjdG9yLnVwZGF0ZShcbiAgICAgICAgeyAnZGF0YS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQnOiB0aGlzLmFjdG9yLmJ1aWxkIH0sXG4gICAgICAgIHsgcmVuZGVyOiBmYWxzZSB9XG4gICAgICApXG4gICAgICB0aGlzLmFjdG9yLnVwZGF0ZShcbiAgICAgICAgeyAnZGF0YS5hdHRyaWJzLmJ1aWxkLnZhbHVlJzogdGhpcy5hY3Rvci5idWlsZCB9LFxuICAgICAgICB7IHJlbmRlcjogZmFsc2UgfVxuICAgICAgKVxuICAgIH1cblxuICAgIC8vIGlmKCBkYXRhLmRhdGEuYXR0cmlicy5ocC52YWx1ZSA8IDApIGRhdGEuZGF0YS5hdHRyaWJzLmhwLnZhbHVlID0gbnVsbDtcbiAgICBpZiAoZGF0YS5kYXRhLmF0dHJpYnMubXAudmFsdWUgPCAwKSBkYXRhLmRhdGEuYXR0cmlicy5tcC52YWx1ZSA9IG51bGxcbiAgICBpZiAoZGF0YS5kYXRhLmF0dHJpYnMuc2FuLnZhbHVlIDwgMCkgZGF0YS5kYXRhLmF0dHJpYnMuc2FuLnZhbHVlID0gbnVsbFxuICAgIC8vIGRhdGEuZGF0YS5hdHRyaWJzLnNhbi5maWZ0eU9mQ3VycmVudCA9IGRhdGEuZGF0YS5hdHRyaWJzLnNhbi52YWx1ZSA+PSAwID8gJyAvICcrTWF0aC5mbG9vcihkYXRhLmRhdGEuYXR0cmlicy5zYW4udmFsdWUvNSk6Jyc7XG4gICAgaWYgKGRhdGEuZGF0YS5hdHRyaWJzLmhwLmF1dG8pIHtcbiAgICAgIC8vIFRPRE8gaWYgYW55IGlzIG51bGwgc2V0IG1heCBiYWNrIHRvIG51bGwuXG4gICAgICBpZiAoXG4gICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlICE9IG51bGwgJiZcbiAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5jb24udmFsdWUgIT0gbnVsbFxuICAgICAgKSB7XG4gICAgICAgIGRhdGEuZGF0YS5hdHRyaWJzLmhwLm1heCA9IHRoaXMuYWN0b3IuaHBNYXhcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZGF0YS5kYXRhLmF0dHJpYnMubXAuYXV0bykge1xuICAgICAgLy8gVE9ETyBpZiBhbnkgaXMgbnVsbCBzZXQgbWF4IGJhY2sgdG8gbnVsbC5cbiAgICAgIGlmIChkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvdy52YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgIGRhdGEuZGF0YS5hdHRyaWJzLm1wLm1heCA9IE1hdGguZmxvb3IoXG4gICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWUgLyA1XG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZGF0YS5kYXRhLmF0dHJpYnMuc2FuLmF1dG8pIHtcbiAgICAgIGRhdGEuZGF0YS5hdHRyaWJzLnNhbi5tYXggPSB0aGlzLmFjdG9yLnNhbk1heFxuICAgIH1cblxuICAgIGlmIChcbiAgICAgIGRhdGEuZGF0YS5hdHRyaWJzLm1wLnZhbHVlID4gZGF0YS5kYXRhLmF0dHJpYnMubXAubWF4IHx8XG4gICAgICBkYXRhLmRhdGEuYXR0cmlicy5tcC5tYXggPT0gbnVsbFxuICAgICkge1xuICAgICAgZGF0YS5kYXRhLmF0dHJpYnMubXAudmFsdWUgPSBkYXRhLmRhdGEuYXR0cmlicy5tcC5tYXhcbiAgICB9XG4gICAgaWYgKFxuICAgICAgZGF0YS5kYXRhLmF0dHJpYnMuaHAudmFsdWUgPiBkYXRhLmRhdGEuYXR0cmlicy5ocC5tYXggfHxcbiAgICAgIGRhdGEuZGF0YS5hdHRyaWJzLmhwLm1heCA9PSBudWxsXG4gICAgKSB7XG4gICAgICBkYXRhLmRhdGEuYXR0cmlicy5ocC52YWx1ZSA9IGRhdGEuZGF0YS5hdHRyaWJzLmhwLm1heFxuICAgIH1cblxuICAgIGlmIChcbiAgICAgIGRhdGEuZGF0YS5hdHRyaWJzLmhwLnZhbHVlID09IG51bGwgJiZcbiAgICAgIGRhdGEuZGF0YS5hdHRyaWJzLmhwLm1heCAhPSBudWxsXG4gICAgKSB7XG4gICAgICBkYXRhLmRhdGEuYXR0cmlicy5ocC52YWx1ZSA9IGRhdGEuZGF0YS5hdHRyaWJzLmhwLm1heFxuICAgIH1cbiAgICBpZiAoXG4gICAgICBkYXRhLmRhdGEuYXR0cmlicy5tcC52YWx1ZSA9PSBudWxsICYmXG4gICAgICBkYXRhLmRhdGEuYXR0cmlicy5tcC5tYXggIT0gbnVsbFxuICAgICkge1xuICAgICAgZGF0YS5kYXRhLmF0dHJpYnMubXAudmFsdWUgPSBkYXRhLmRhdGEuYXR0cmlicy5tcC5tYXhcbiAgICB9XG5cbiAgICBpZiAoIVsndmVoaWNsZSddLmluY2x1ZGVzKHRoaXMuYWN0b3IuZGF0YS50eXBlKSkge1xuICAgICAgaWYgKFxuICAgICAgICBkYXRhLmRhdGEuYXR0cmlicy5zYW4udmFsdWUgPT0gbnVsbCAmJlxuICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvdy52YWx1ZSAhPSBudWxsXG4gICAgICApIHtcbiAgICAgICAgZGF0YS5kYXRhLmF0dHJpYnMuc2FuLnZhbHVlID0gZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWVcbiAgICAgIH1cbiAgICAgIGlmIChkYXRhLmRhdGEuYXR0cmlicy5zYW4udmFsdWUgPiBkYXRhLmRhdGEuYXR0cmlicy5zYW4ubWF4KSB7XG4gICAgICAgIGRhdGEuZGF0YS5hdHRyaWJzLnNhbi52YWx1ZSA9IGRhdGEuZGF0YS5hdHRyaWJzLnNhbi5tYXhcbiAgICAgIH1cblxuICAgICAgaWYgKGRhdGEuZGF0YS5iaW9ncmFwaHkgaW5zdGFuY2VvZiBBcnJheSAmJiBkYXRhLmRhdGEuYmlvZ3JhcGh5Lmxlbmd0aCkge1xuICAgICAgICBkYXRhLmRhdGEuYmlvZ3JhcGh5WzBdLmlzRmlyc3QgPSB0cnVlXG4gICAgICAgIGRhdGEuZGF0YS5iaW9ncmFwaHlbZGF0YS5kYXRhLmJpb2dyYXBoeS5sZW5ndGggLSAxXS5pc0xhc3QgPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIGRhdGEuZGF0YS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbCA9IHt9XG4gICAgICBkYXRhLmRhdGEuaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwudmFsdWUgPSBkYXRhLmRhdGEuYXR0cmlicy5zYW4uZGFpbHlMb3NzXG4gICAgICAgID8gZGF0YS5kYXRhLmF0dHJpYnMuc2FuLmRhaWx5TG9zc1xuICAgICAgICA6IDBcbiAgICAgIGRhdGEuZGF0YS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbC5tYXggPSBNYXRoLmZsb29yKFxuICAgICAgICBkYXRhLmRhdGEuYXR0cmlicy5zYW4udmFsdWUgLyA1XG4gICAgICApXG4gICAgfVxuICAgIGRhdGEuc2hvd0ludmVudG9yeUl0ZW1zID0gZmFsc2VcbiAgICBkYXRhLnNob3dJbnZlbnRvcnlCb29rcyA9IGZhbHNlXG4gICAgZGF0YS5zaG93SW52ZW50b3J5U3BlbGxzID0gZmFsc2VcbiAgICBkYXRhLnNob3dJbnZlbnRvcnlUYWxlbnRzID0gZmFsc2VcbiAgICBkYXRhLnNob3dJbnZlbnRvcnlTdGF0dXNlcyA9IGZhbHNlXG4gICAgZGF0YS5zaG93SW52ZW50b3J5V2VhcG9ucyA9IGZhbHNlXG5cbiAgICAvLyBjb25zdCBmaXJzdCA9IGRhdGEuZGF0YS5iaW9ncmFwaHlbMF07XG4gICAgLy8gZmlyc3QuaXNGaXJzdCA9IHRydWU7XG4gICAgLy8gZGF0YS5kYXRhLmJpb2dyYXBoeVswXSA9IGZpcnN0O1xuICAgIC8vIGNvbnN0IGxhc3QgPSBkYXRhLmRhdGEuYmlvZ3JhcGh5W2RhdGEuZGF0YS5iaW9ncmFwaHkubGVuZ3RoIC0gMV07XG4gICAgLy8gbGFzdC5pc0xhc3QgPSB0cnVlO1xuICAgIC8vIGRhdGEuZGF0YS5iaW9ncmFwaHlbZGF0YS5kYXRhLmJpb2dyYXBoeS5sZW5ndGggLSAxXSA9IGxhc3Q7XG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gIHN0YXRpYyBwYXJzZUZvcm11bGEgKGZvcm11bGEpIHtcbiAgICBsZXQgcGFyc2VkRm9ybXVsYSA9IGZvcm11bGFcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmZvcm11bGEuYWN0b3JzaGVldCkpIHtcbiAgICAgIHBhcnNlZEZvcm11bGEgPSBwYXJzZWRGb3JtdWxhLnJlcGxhY2Uoa2V5LCB2YWx1ZSlcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlZEZvcm11bGFcbiAgfVxuXG4gIGdldCB0b2tlbktleSAoKSB7XG4gICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignREVQUkVDQVRFRCBTSE9VTEQgTk9UIEhBUFBFTiEnKVxuICAgIHRocm93IG5ldyBFcnJvcignYmFzZS5qcyBnZXQgdG9rZW5LZXkoKTogREVQUkVDQVRFRCBTSE9VTEQgTk9UIEhBUFBFTiEnKVxuICAgIC8vIGlmKCB0aGlzLnRva2VuKSByZXR1cm4gYCR7dGhpcy50b2tlbi5zY2VuZT8uX2lkP3RoaXMudG9rZW4uc2NlbmUuX2lkOidUT0tFTid9LiR7dGhpcy50b2tlbi5kYXRhLl9pZH1gOyAgLy9SRUZBQ1RPUklORyAoMilcbiAgICAvLyByZXR1cm4gdGhpcy5hY3Rvci5pZDtcbiAgfVxuXG4gIG9uQ2xvc2VTaGVldCAoKSB7XG4gICAgLy8gdGhpcy5hY3Rvci5sb2NrZWQgPSB0cnVlO1xuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKipcbiAgICogQWN0aXZhdGUgZXZlbnQgbGlzdGVuZXJzIHVzaW5nIHRoZSBwcmVwYXJlZCBzaGVldCBIVE1MXG4gICAqIEBwYXJhbSBodG1sIHtIVE1MfSAgIFRoZSBwcmVwYXJlZCBIVE1MIG9iamVjdCByZWFkeSB0byBiZSByZW5kZXJlZCBpbnRvIHRoZSBET01cbiAgICovXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIC8vIE93bmVyIE9ubHkgTGlzdGVuZXJzXG4gICAgaWYgKHRoaXMuYWN0b3IuaXNPd25lciAmJiB0eXBlb2YgdGhpcy5hY3Rvci5jb21wZW5kaXVtID09PSAndW5kZWZpbmVkJykge1xuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmNoYXJhY3RlcmlzdGljLWxhYmVsJylcbiAgICAgICAgLm9uKCdkcmFnc3RhcnQnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdDaGFyYWN0ZXJpc3RpYyhldmVudCkpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuYXR0cmlidXRlLWxhYmVsJylcbiAgICAgICAgLm9uKCdkcmFnc3RhcnQnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdBdHRyaWJ1dGUoZXZlbnQpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLnNhbi1jaGVjaycpXG4gICAgICAgIC5vbignZHJhZ3N0YXJ0JywgZXZlbnQgPT4gdGhpcy5fb25EcmFnU2FuQ2hlY2soZXZlbnQpKVxuXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuY2hhcmFjdGVyaXN0aWMtbGFiZWwnKVxuICAgICAgICAuY29udGV4dG1lbnUodGhpcy5fb25PcHBvc2VkUm9sbC5iaW5kKHRoaXMpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLnNraWxsLW5hbWUucm9sbGFibGUnKVxuICAgICAgICAuY29udGV4dG1lbnUodGhpcy5fb25PcHBvc2VkUm9sbC5iaW5kKHRoaXMpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmF0dHJpYnV0ZS1sYWJlbC5yb2xsYWJsZScpXG4gICAgICAgIC5jb250ZXh0bWVudSh0aGlzLl9vbk9wcG9zZWRSb2xsLmJpbmQodGhpcykpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcud2VhcG9uLW5hbWUucm9sbGFibGUnKVxuICAgICAgICAuY29udGV4dG1lbnUodGhpcy5fb25PcHBvc2VkUm9sbC5iaW5kKHRoaXMpKVxuXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuY2hhcmFjdGVyaXN0aWMtbGFiZWwnKVxuICAgICAgICAuY2xpY2sodGhpcy5fb25Sb2xsQ2hhcmFjdGVyaXRpY1Rlc3QuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnLnNraWxsLW5hbWUucm9sbGFibGUnKS5jbGljayh0aGlzLl9vblJvbGxTa2lsbFRlc3QuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnLnNraWxsLWltYWdlJykuY2xpY2sodGhpcy5fb25Sb2xsU2tpbGxUZXN0LmJpbmQodGhpcykpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuYXR0cmlidXRlLWxhYmVsLnJvbGxhYmxlJylcbiAgICAgICAgLmNsaWNrKHRoaXMuX29uUm9sbEF0dHJpYlRlc3QuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnLmxvY2snKS5jbGljayh0aGlzLl9vbkxvY2tDbGlja2VkLmJpbmQodGhpcykpXG4gICAgICBodG1sLmZpbmQoJy5mbGFnJykuY2xpY2sodGhpcy5fb25GbGFnQ2xpY2tlZC5iaW5kKHRoaXMpKVxuICAgICAgaHRtbC5maW5kKCcuZm9ybXVsYScpLmNsaWNrKHRoaXMuX29uRm9ybXVsYUNsaWNrZWQuYmluZCh0aGlzKSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5yb2xsLWNoYXJhY3Rlcml0aWNzJylcbiAgICAgICAgLmNsaWNrKHRoaXMuX29uUm9sbENoYXJhY3Rlcml0aWNzVmFsdWUuYmluZCh0aGlzKSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5hdmVyYWdlLWNoYXJhY3Rlcml0aWNzJylcbiAgICAgICAgLmNsaWNrKHRoaXMuX29uQXZlcmFnZUNoYXJhY3Rlcml0aWNzVmFsdWUuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnLnRvZ2dsZS1zd2l0Y2gnKS5jbGljayh0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpKVxuICAgICAgaHRtbC5maW5kKCcuYXV0by10b2dnbGUnKS5jbGljayh0aGlzLl9vbkF1dG9Ub2dnbGUuYmluZCh0aGlzKSlcblxuICAgICAgLy8gU3RhdHVzIG1vbml0b3JcbiAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSB8fCBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzdGF0dXNQbGF5ZXJFZGl0YWJsZScpKSB7XG4gICAgICAgIGh0bWwuZmluZCgnLnJlc2V0LWNvdW50ZXInKS5jbGljayh0aGlzLl9vblJlc2V0Q291bnRlci5iaW5kKHRoaXMpKVxuICAgICAgICBodG1sLmZpbmQoJy5zdGF0dXMtbW9uaXRvcicpLmNsaWNrKHRoaXMuX29uU3RhdHVzVG9nZ2xlLmJpbmQodGhpcykpXG4gICAgICAgIGh0bWwuZmluZCgnLmlzLWR5aW5nJykuY2xpY2sodGhpcy5oZWFsLmJpbmQodGhpcykpXG4gICAgICAgIGh0bWwuZmluZCgnLmlzLWRlYWQnKS5jbGljayh0aGlzLnJldml2ZS5iaW5kKHRoaXMpKVxuICAgICAgfVxuXG4gICAgICBodG1sLmZpbmQoJy5keWluZy1jaGVjaycpLmNsaWNrKHRoaXMuY2hlY2tGb3JEZWF0aC5iaW5kKHRoaXMpKVxuXG4gICAgICBodG1sLmZpbmQoJy5pdGVtIC5pdGVtLWltYWdlJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtUm9sbChldmVudCkpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcud2VhcG9uLW5hbWUucm9sbGFibGUnKVxuICAgICAgICAuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25XZWFwb25Sb2xsKGV2ZW50KSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy53ZWFwb24tc2tpbGwucm9sbGFibGUnKVxuICAgICAgICAuY2xpY2soYXN5bmMgZXZlbnQgPT4gdGhpcy5fb25XZWFwb25Ta2lsbFJvbGwoZXZlbnQpKVxuICAgICAgaHRtbC5maW5kKCcucmVsb2FkLXdlYXBvbicpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uUmVsb2FkV2VhcG9uKGV2ZW50KSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5yZWxvYWQtd2VhcG9uJylcbiAgICAgICAgLm9uKCdjb250ZXh0bWVudScsIGV2ZW50ID0+IHRoaXMuX29uUmVsb2FkV2VhcG9uKGV2ZW50KSlcbiAgICAgIGh0bWwuZmluZCgnLmFkZC1hbW1vJykuY2xpY2sodGhpcy5fb25BZGRBbW8uYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnLnJlYWQtb25seScpLmRibGNsaWNrKHRoaXMuX3RvZ2dsZVJlYWRPbmx5LmJpbmQodGhpcykpXG4gICAgICBodG1sLm9uKCdjbGljaycsICcud2VhcG9uLWRhbWFnZScsIHRoaXMuX29uV2VhcG9uRGFtYWdlLmJpbmQodGhpcykpXG5cbiAgICAgIGh0bWwuZmluZCgnLmludmVudG9yeS1oZWFkZXInKS5jbGljayh0aGlzLl9vbkludmVudG9yeUhlYWRlci5iaW5kKHRoaXMpKVxuICAgICAgaHRtbC5maW5kKCcuc2VjdGlvbi1oZWFkZXInKS5jbGljayh0aGlzLl9vblNlY3Rpb25IZWFkZXIuYmluZCh0aGlzKSlcblxuICAgICAgY29uc3Qgd2hlZWxJbnB1dHMgPSBodG1sLmZpbmQoJy5hdHRyaWJ1dGUtdmFsdWUnKVxuICAgICAgZm9yIChjb25zdCB3aGVlbElucHV0IG9mIHdoZWVsSW5wdXRzKSB7XG4gICAgICAgIHdoZWVsSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCBldmVudCA9PiB0aGlzLl9vbldoZWVsKGV2ZW50KSwge1xuICAgICAgICAgIHBhc3NpdmU6IHRydWVcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVyblxuXG4gICAgaHRtbC5maW5kKCcuc2hvdy1kZXRhaWwnKS5jbGljayhldmVudCA9PiB0aGlzLl9vbkl0ZW1TdW1tYXJ5KGV2ZW50KSlcbiAgICBodG1sLmZpbmQoJy5pdGVtLXBvcHVwJykuY2xpY2sodGhpcy5fb25JdGVtUG9wdXAuYmluZCh0aGlzKSlcblxuICAgIC8vIFVwZGF0ZSBJbnZlbnRvcnkgSXRlbVxuICAgIGh0bWwuZmluZCgnLnNob3ctZGV0YWlsJykuZGJsY2xpY2soZXZlbnQgPT4gdGhpcy5fb25SZW5kZXJJdGVtU2hlZXQoZXZlbnQpKVxuICAgIGh0bWwuZmluZCgnLml0ZW0tZWRpdCcpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uUmVuZGVySXRlbVNoZWV0KGV2ZW50KSlcblxuICAgIC8vIERlbGV0ZSBJbnZlbnRvcnkgSXRlbVxuICAgIGh0bWwuZmluZCgnLml0ZW0tZGVsZXRlJykuY2xpY2soYXN5bmMgZXYgPT4ge1xuICAgICAgY29uc3QgbGkgPSAkKGV2LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICAgIGNvbnN0IGl0ZW1Ub0RlbGV0ZSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW1JZCcpLCB7XG4gICAgICAgIHN0cmljdDogdHJ1ZVxuICAgICAgfSlcbiAgICAgIGF3YWl0IGl0ZW1Ub0RlbGV0ZS5kZWxldGUoKVxuICAgICAgbGkuc2xpZGVVcCgyMDAsICgpID0+IHRoaXMucmVuZGVyKGZhbHNlKSlcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcuYWRkLWl0ZW0nKS5jbGljayhldiA9PiB7XG4gICAgICBzd2l0Y2ggKGV2LmN1cnJlbnRUYXJnZXQuZGF0YXNldC50eXBlKSB7XG4gICAgICAgIGNhc2UgJ2Jvb2snOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlCb29rKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2l0ZW0nOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlJdGVtKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3NraWxsJzpcbiAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5U2tpbGwoZXYpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnc3BlbGwnOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlTcGVsbChldilcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICd3ZWFwb24nOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlXZWFwb24oZXYpXG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcuaXRlbS10cmFkZScpLmNsaWNrKHRoaXMuX29uVHJhZGVJdGVtLmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJy5hZGQtbmV3LXNlY3Rpb24nKS5jbGljaygoKSA9PiB7XG4gICAgICB0aGlzLmFjdG9yLmNyZWF0ZUJpb1NlY3Rpb24oKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5kZWxldGUtc2VjdGlvbicpLmNsaWNrKGV2ID0+IHtcbiAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoXG4gICAgICAgIGV2LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmJpby1zZWN0aW9uJykuZGF0YXNldC5pbmRleFxuICAgICAgKVxuICAgICAgdGhpcy5hY3Rvci5kZWxldGVCaW9TZWN0aW9uKGluZGV4KVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5tb3ZlLXNlY3Rpb24tdXAnKS5jbGljayhldiA9PiB7XG4gICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KFxuICAgICAgICBldi5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5iaW8tc2VjdGlvbicpLmRhdGFzZXQuaW5kZXhcbiAgICAgIClcbiAgICAgIHRoaXMuYWN0b3IubW92ZUJpb1NlY3Rpb25VcChpbmRleClcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcubW92ZS1zZWN0aW9uLWRvd24nKS5jbGljayhldiA9PiB7XG4gICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KFxuICAgICAgICBldi5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5iaW8tc2VjdGlvbicpLmRhdGFzZXQuaW5kZXhcbiAgICAgIClcbiAgICAgIHRoaXMuYWN0b3IubW92ZUJpb1NlY3Rpb25Eb3duKGluZGV4KVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5kZXZlbG9wbWVudC1mbGFnJykuZGJsY2xpY2soZXYgPT4ge1xuICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICBldi5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICAgIClcbiAgICAgIGl0ZW0udG9nZ2xlSXRlbUZsYWcoJ2RldmVsb3BlbWVudCcpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLm9jY3VwYXRpb24tc2tpbGwtZmxhZy5jbGlja2FibGUnKS5jbGljayhldiA9PiB7XG4gICAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgIGV2LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgICAgKVxuICAgICAgaXRlbS50b2dnbGVJdGVtRmxhZygnb2NjdXBhdGlvbicpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmFyY2hldHlwZS1za2lsbC1mbGFnLmNsaWNrYWJsZScpLmNsaWNrKGV2ID0+IHtcbiAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgICAgZXYuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICApXG4gICAgICBpdGVtLnRvZ2dsZUl0ZW1GbGFnKCdhcmNoZXR5cGUnKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5za2lsbC1kZXZlbG9wZW1lbnQnKS5jbGljayhldmVudCA9PiB7XG4gICAgICB0aGlzLmFjdG9yLmRldmVsb3BlbWVudFBoYXNlKGV2ZW50LnNoaWZ0S2V5KVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5sdWNrLWRldmVsb3BtZW50JykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgaWYgKCFldmVudC5kZXRhaWwgfHwgZXZlbnQuZGV0YWlsID09PSAxKSB7XG4gICAgICAgIHRoaXMuYWN0b3IuZGV2ZWxvcEx1Y2soZXZlbnQuc2hpZnRLZXkpXG4gICAgICB9XG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnYS5jb2M3LWxpbmsnKS5vbignY2xpY2snLCBldmVudCA9PiBDb0M3UGFyc2VyLl9vbkNoZWNrKGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnYS5jb2M3LWxpbmsnKVxuICAgICAgLm9uKCdkcmFnc3RhcnQnLCBldmVudCA9PiBDb0M3UGFyc2VyLl9vbkRyYWdDb0M3TGluayhldmVudCkpXG5cbiAgICBodG1sLmZpbmQoJy50ZXN0LXRyaWdnZXInKS5jbGljayhhc3luYyBldmVudCA9PiB7XG4gICAgICBhd2FpdCBPcHBvc2VkQ2hlY2tDYXJkLmRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogT3Bwb3NlZENoZWNrQ2FyZC5kZWZhdWx0Q29uZmlnLnR5cGUsXG4gICAgICAgIGNvbWJhdDogZmFsc2UsXG4gICAgICAgIGFjdGlvbjogJ25ldycsXG4gICAgICAgIHJvbGw6IHtcbiAgICAgICAgICBjaGFyYWN0ZXJpc3RpYzogJ3N0cicsXG4gICAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3IuYWN0b3JLZXlcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgYXdhaXQgT3Bwb3NlZENoZWNrQ2FyZC5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6IE9wcG9zZWRDaGVja0NhcmQuZGVmYXVsdENvbmZpZy50eXBlLFxuICAgICAgICBjb21iYXQ6IGZhbHNlLFxuICAgICAgICBhY3Rpb246ICduZXcnLFxuICAgICAgICByb2xsOiB7XG4gICAgICAgICAgY2hhcmFjdGVyaXN0aWM6ICdjb24nXG4gICAgICAgICAgLy8gYWN0b3I6IHRoaXMuYWN0b3IuYWN0b3JLZXlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC8vIGNvbnN0IHZhbCA9IGdldFByb3BlcnR5KCB0aGlzLmFjdG9yLCAnZGF0YS5kYXRhLmF0dHJpYnMuc2FuLnZhbHVlJyk7XG5cbiAgICAgIC8vIHRoaXMuYWN0b3IuZW50ZXJCb3V0T2ZNYWRuZXNzKCB0cnVlLCAxMCk7XG5cbiAgICAgIC8vIGNvbnN0IHJvbGwgPSBuZXcgQ29DN0NoZWNrKCk7XG4gICAgICAvLyByb2xsLmFjdG9yID0gdGhpcy5hY3RvcktleTtcbiAgICAgIC8vIHJvbGwuYXR0cmlidXRlID0gJ3Nhbic7XG4gICAgICAvLyByb2xsLmRpZmZpY3VsdHkgPSB0aGlzLm9wdGlvbnMuc2FuRGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXI7XG4gICAgICAvLyByb2xsLmRpY2VNb2RpZmllciA9IHRoaXMub3B0aW9ucy5zYW5Nb2RpZmllciB8fCAwO1xuICAgICAgLy8gYXdhaXQgcm9sbC5fcGVyZm9ybSgpO1xuXG4gICAgICAvLyBmb3IgKGNvbnN0IGVmZmVjdCBvZiB0aGlzLmFjdG9yLmVmZmVjdHMpIHtcbiAgICAgIC8vICBhd2FpdCBlZmZlY3Quc2hlZXQucmVuZGVyKHRydWUpO1xuICAgICAgLy8gIC8vIGVmZmVjdC5kZWxldGUoKTtcbiAgICAgIC8vIH1cbiAgICAgIC8vIGZvciAoY29uc3QgZSBvZiB0aGlzLmFjdG9yLmVmZmVjdHMpIHsgZS5kZWxldGUoKSB9XG4gICAgICAvLyBhd2FpdCBzZXRQcm9wZXJ0eSggdGhpcy5hY3RvciwgJ2RhdGEuZGF0YS5lbmNvdW50ZXJlZENyZWF0dXJlcycsIFtdKTtcblxuICAgICAgLy8gYXdhaXQgdGhpcy5hY3Rvci51cGRhdGUoIHtbJ2RhdGEuZW5jb3VudGVyZWRDcmVhdHVyZXMnXSA6IFtdfSk7XG4gICAgICBpZiAoZXZlbnQuc2hpZnRLZXkpIHVpLm5vdGlmaWNhdGlvbnMuaW5mbygnU2hpZnQgY2xpZWNrZWQnKVxuICAgICAgLy8gU2FuQ2hlY2tDYXJkLmNyZWF0ZSggdGhpcy5hY3Rvci5hY3RvcktleSwge21pbjonMUQxMCcsbWF4OicxRDEyJ30sIHtmYXN0Rm9yd2FyZDpldmVudC5zaGlmdEtleX0pO1xuICAgIH0pXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5za2lsbC1uYW1lLnJvbGxhYmxlJylcbiAgICAgIC5tb3VzZWVudGVyKHRoaXMudG9vbFRpcFNraWxsRW50ZXIuYmluZCh0aGlzKSlcbiAgICAgIC5tb3VzZWxlYXZlKGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBMZWF2ZS5iaW5kKHRoaXMpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuY2hhcmFjdGVyaXN0aWMtbGFiZWwnKVxuICAgICAgLm1vdXNlZW50ZXIodGhpcy50b29sVGlwQ2hhcmFjdGVyaXN0aWNFbnRlci5iaW5kKHRoaXMpKVxuICAgICAgLm1vdXNlbGVhdmUoZ2FtZS5Db0M3VG9vbHRpcHMudG9vbFRpcExlYXZlLmJpbmQodGhpcykpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5hdHRyaWJ1dGUtbGFiZWwucm9sbGFibGUnKVxuICAgICAgLm1vdXNlZW50ZXIodGhpcy50b29sVGlwQXR0cmlidXRlRW50ZXIuYmluZCh0aGlzKSlcbiAgICAgIC5tb3VzZWxlYXZlKGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBMZWF2ZS5iaW5kKHRoaXMpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuYXV0by10b2dnbGUnKVxuICAgICAgLm1vdXNlZW50ZXIodGhpcy50b29sVGlwQXV0b0VudGVyLmJpbmQodGhpcykpXG4gICAgICAubW91c2VsZWF2ZShnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwTGVhdmUuYmluZCh0aGlzKSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLml0ZW0tY29udHJvbC5kZXZlbG9wbWVudC1mbGFnJylcbiAgICAgIC5tb3VzZWVudGVyKHRoaXMudG9vbFRpcEZsYWdGb3JEZXZlbG9wbWVudC5iaW5kKHRoaXMpKVxuICAgICAgLm1vdXNlbGVhdmUoZ2FtZS5Db0M3VG9vbHRpcHMudG9vbFRpcExlYXZlLmJpbmQodGhpcykpXG4gIH1cblxuICB0b29sVGlwU2tpbGxFbnRlciAoZXZlbnQpIHtcbiAgICBjb25zdCBkZWxheSA9IHBhcnNlSW50KGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3Rvb2xUaXBEZWxheScpKVxuICAgIGlmIChkZWxheSA+IDApIHtcbiAgICAgIGNvbnN0IHNoZWV0ID0gdGhpc1xuICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMudG9vbFRpcFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IGl0ZW0gPSBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIuY2xvc2VzdCgnLml0ZW0nKVxuICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHNraWxsSWQgPSBpdGVtLmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSBzaGVldC5hY3Rvci5pdGVtcy5nZXQoc2tpbGxJZClcbiAgICAgICAgICAgIGxldCB0b29sVGlwID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwU2tpbGwnLCB7XG4gICAgICAgICAgICAgIHNraWxsOiBza2lsbC5zTmFtZSxcbiAgICAgICAgICAgICAgcmVndWxhcjogc2tpbGwudmFsdWUsXG4gICAgICAgICAgICAgIGhhcmQ6IE1hdGguZmxvb3Ioc2tpbGwudmFsdWUgLyAyKSxcbiAgICAgICAgICAgICAgZXh0cmVtZTogTWF0aC5mbG9vcihza2lsbC52YWx1ZSAvIDUpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgICAgICAgIHRvb2xUaXAgPVxuICAgICAgICAgICAgICAgIHRvb2xUaXAgK1xuICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclNraWxsJywge1xuICAgICAgICAgICAgICAgICAgb3RoZXI6XG4gICAgICAgICAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N0YW5ieUdNUm9sbHMnKSAmJlxuICAgICAgICAgICAgICAgICAgICBzaGVldC5hY3Rvci5oYXNQbGF5ZXJPd25lclxuICAgICAgICAgICAgICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwS2VlcGVyU3RhbmRieVNraWxsJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBzaGVldC5hY3Rvci5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgIDogJydcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuZGlzcGxheVRvb2xUaXAodG9vbFRpcClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIGRlbGF5KVxuICAgIH1cbiAgfVxuXG4gIHRvb2xUaXBDaGFyYWN0ZXJpc3RpY0VudGVyIChldmVudCkge1xuICAgIGNvbnN0IGRlbGF5ID0gcGFyc2VJbnQoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndG9vbFRpcERlbGF5JykpXG4gICAgaWYgKGRlbGF5ID4gMCkge1xuICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzXG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgY2hhciA9IGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3Zlci5jbG9zZXN0KCcuY2hhci1ib3gnKVxuICAgICAgICAgIGlmICh0eXBlb2YgY2hhciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNvbnN0IGNoYXJJZCA9IGNoYXIuZGF0YXNldC5jaGFyYWN0ZXJpc3RpY1xuICAgICAgICAgICAgY29uc3QgY2hhcmFjdGVyaXN0aWMgPSBzaGVldC5hY3Rvci5jaGFyYWN0ZXJpc3RpY3NbY2hhcklkXVxuICAgICAgICAgICAgbGV0IHRvb2xUaXAgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRvb2xUaXBTa2lsbCcsIHtcbiAgICAgICAgICAgICAgc2tpbGw6IGNoYXJhY3RlcmlzdGljLmxhYmVsLFxuICAgICAgICAgICAgICByZWd1bGFyOiBjaGFyYWN0ZXJpc3RpYy52YWx1ZSxcbiAgICAgICAgICAgICAgaGFyZDogY2hhcmFjdGVyaXN0aWMuaGFyZCxcbiAgICAgICAgICAgICAgZXh0cmVtZTogY2hhcmFjdGVyaXN0aWMuZXh0cmVtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICAgICAgICB0b29sVGlwID1cbiAgICAgICAgICAgICAgICB0b29sVGlwICtcbiAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRvb2xUaXBLZWVwZXJTa2lsbCcsIHtcbiAgICAgICAgICAgICAgICAgIG90aGVyOlxuICAgICAgICAgICAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzdGFuYnlHTVJvbGxzJykgJiZcbiAgICAgICAgICAgICAgICAgICAgc2hlZXQuYWN0b3IuaGFzUGxheWVyT3duZXJcbiAgICAgICAgICAgICAgICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclN0YW5kYnlTa2lsbCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc2hlZXQuYWN0b3IubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICA6ICcnXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBkZWxheSlcbiAgICB9XG4gIH1cblxuICB0b29sVGlwQXR0cmlidXRlRW50ZXIgKGV2ZW50KSB7XG4gICAgY29uc3QgZGVsYXkgPSBwYXJzZUludChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0b29sVGlwRGVsYXknKSlcbiAgICBpZiAoZGVsYXkgPiAwKSB7XG4gICAgICBjb25zdCBzaGVldCA9IHRoaXNcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodHlwZW9mIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBhdHRyaWIgPSBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIuY2xvc2VzdCgnLmF0dHJpYnV0ZScpXG4gICAgICAgICAgaWYgKHR5cGVvZiBhdHRyaWIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVJZCA9IGF0dHJpYi5kYXRhc2V0LmF0dHJpYlxuICAgICAgICAgICAgbGV0IHRvb2xUaXAgPSAnJ1xuICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IHNoZWV0LmFjdG9yLmRhdGEuZGF0YS5hdHRyaWJzW2F0dHJpYnV0ZUlkXVxuICAgICAgICAgICAgc3dpdGNoIChhdHRyaWJ1dGVJZCkge1xuICAgICAgICAgICAgICBjYXNlICdsY2snOlxuICAgICAgICAgICAgICAgIHRvb2xUaXAgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRvb2xUaXBTa2lsbCcsIHtcbiAgICAgICAgICAgICAgICAgIHNraWxsOiBhdHRyaWJ1dGVzLmxhYmVsLFxuICAgICAgICAgICAgICAgICAgcmVndWxhcjogYXR0cmlidXRlcy52YWx1ZSxcbiAgICAgICAgICAgICAgICAgIGhhcmQ6IE1hdGguZmxvb3IoYXR0cmlidXRlcy52YWx1ZSAvIDIpLFxuICAgICAgICAgICAgICAgICAgZXh0cmVtZTogTWF0aC5mbG9vcihhdHRyaWJ1dGVzLnZhbHVlIC8gNSlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICAgICAgICAgICAgdG9vbFRpcCA9XG4gICAgICAgICAgICAgICAgICAgIHRvb2xUaXAgK1xuICAgICAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRvb2xUaXBLZWVwZXJTa2lsbCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICBvdGhlcjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N0YW5ieUdNUm9sbHMnKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc2hlZXQuYWN0b3IuaGFzUGxheWVyT3duZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRvb2xUaXBLZWVwZXJTdGFuZGJ5U2tpbGwnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBzaGVldC5hY3Rvci5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnJ1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5kaXNwbGF5VG9vbFRpcCh0b29sVGlwKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIGNhc2UgJ2RiJzpcbiAgICAgICAgICAgICAgICB0b29sVGlwID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRvb2xUaXBEQicpXG4gICAgICAgICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuZGlzcGxheVRvb2xUaXAodG9vbFRpcClcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICBjYXNlICdzYW4nOlxuICAgICAgICAgICAgICAgIHRvb2xUaXAgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRvb2xUaXBTa2lsbCcsIHtcbiAgICAgICAgICAgICAgICAgIHNraWxsOiAnU2FuaXR5JyxcbiAgICAgICAgICAgICAgICAgIHJlZ3VsYXI6IGF0dHJpYnV0ZXMudmFsdWUsXG4gICAgICAgICAgICAgICAgICBoYXJkOiBNYXRoLmZsb29yKGF0dHJpYnV0ZXMudmFsdWUgLyAyKSxcbiAgICAgICAgICAgICAgICAgIGV4dHJlbWU6IE1hdGguZmxvb3IoYXR0cmlidXRlcy52YWx1ZSAvIDUpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgICAgICAgICAgIHRvb2xUaXAgPVxuICAgICAgICAgICAgICAgICAgICB0b29sVGlwICtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwS2VlcGVyU2tpbGwnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgb3RoZXI6XG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVG9vbFRpcEtlZXBlclNhbml0eScpICtcbiAgICAgICAgICAgICAgICAgICAgICAgIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzdGFuYnlHTVJvbGxzJykgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoZWV0LmFjdG9yLmhhc1BsYXllck93bmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwS2VlcGVyU3RhbmRieVNraWxsJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc2hlZXQuYWN0b3IubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogJycpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIGRlbGF5KVxuICAgIH1cbiAgfVxuXG4gIHRvb2xUaXBBdXRvRW50ZXIgKGV2ZW50KSB7XG4gICAgY29uc3QgZGVsYXkgPSBwYXJzZUludChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0b29sVGlwRGVsYXknKSlcbiAgICBpZiAoZGVsYXkgPiAwKSB7XG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgdG9vbFRpcCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ub29sVGlwQXV0b1RvZ2dsZScpXG4gICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuZGlzcGxheVRvb2xUaXAodG9vbFRpcClcbiAgICAgICAgfVxuICAgICAgfSwgZGVsYXkpXG4gICAgfVxuICB9XG5cbiAgdG9vbFRpcEZsYWdGb3JEZXZlbG9wbWVudCAoZXZlbnQpIHtcbiAgICBjb25zdCBkZWxheSA9IHBhcnNlSW50KGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3Rvb2xUaXBEZWxheScpKVxuICAgIGlmIChkZWxheSA+IDApIHtcbiAgICAgIGNvbnN0IHNoZWV0ID0gdGhpc1xuICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMudG9vbFRpcFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IGl0ZW0gPSBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIuY2xvc2VzdCgnLml0ZW0nKVxuICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHNraWxsSWQgPSBpdGVtLmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSBzaGVldC5hY3Rvci5pdGVtcy5nZXQoc2tpbGxJZClcbiAgICAgICAgICAgIGNvbnN0IHRvb2xUaXAgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRvb2xUaXBTa2lsbEZsYWdUb2dnbGUnLCB7XG4gICAgICAgICAgICAgIHN0YXR1czogZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgIHNraWxsLmRhdGEuZGF0YS5mbGFncy5kZXZlbG9wZW1lbnRcbiAgICAgICAgICAgICAgICAgID8gJ0NvQzcuVG9vbFRpcFNraWxsRmxhZ2dlZCdcbiAgICAgICAgICAgICAgICAgIDogJ0NvQzcuVG9vbFRpcFNraWxsVW5mbGFnZ2VkJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuZGlzcGxheVRvb2xUaXAodG9vbFRpcClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIGRlbGF5KVxuICAgIH1cbiAgfVxuXG4gIF9vblJlbmRlckl0ZW1TaGVldCAoZXZlbnQpIHtcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtSWQnKSlcbiAgICBpdGVtLnNoZWV0LnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uVHJhZGVJdGVtIChldmVudCkge1xuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW1JZCcpKVxuICAgIGxldCBjb250ZW50ID0gJzxwPicgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZVNlbGVjdFVzZXJUb0dpdmVUbycpXG4gICAgY29uc3QgbWVzc2FnZSA9IHtcbiAgICAgIGFjdG9yRnJvbTogdGhpcy5hY3Rvci5pZCxcbiAgICAgIHNjZW5lOiBudWxsLFxuICAgICAgYWN0b3JUbzogdGhpcy5hY3Rvci5pZCxcbiAgICAgIGl0ZW06IGl0ZW0uaWRcbiAgICB9XG4gICAgaWYgKHRoaXMudG9rZW4/LmFjdG9yKSB7XG4gICAgICBtZXNzYWdlLmFjdG9yRnJvbSA9IHRoaXMudG9rZW4uaWRcbiAgICAgIG1lc3NhZ2Uuc2NlbmUgPSB0aGlzLnRva2VuLnBhcmVudC5pZFxuICAgIH1cbiAgICBjb25zdCBhY3RvcnMgPSBnYW1lLmFjdG9ycy5maWx0ZXIoZSA9PiB7XG4gICAgICBpZiAoIVsnY2hhcmFjdGVyJywgJ25wYycsICdjcmVhdHVyZScsICdjb250YWluZXInXS5pbmNsdWRlcyhlLnR5cGUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuYWN0b3IuaWQgPT09IGUuaWQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBsZXQgdmlzaWJsZSA9IGZhbHNlXG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhlLmRhdGEucGVybWlzc2lvbikpIHtcbiAgICAgICAgaWYgKGsgPT09ICdkZWZhdWx0JyB8fCBrID09PSBnYW1lLnVzZXIuaWQpIHtcbiAgICAgICAgICB2aXNpYmxlID0gdmlzaWJsZSB8fCB2ICE9PSBDT05TVC5FTlRJVFlfUEVSTUlTU0lPTlMuTk9ORVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdmlzaWJsZVxuICAgIH0pXG4gICAgY29udGVudCA9IGNvbnRlbnQgKyAnPGZvcm0gaWQ9XCJzZWxlY3Rmb3JtXCI+PHNlbGVjdCBuYW1lPVwidXNlclwiPidcbiAgICBmb3IgKGNvbnN0IGFjdG9yIG9mIGFjdG9ycykge1xuICAgICAgY29udGVudCA9XG4gICAgICAgIGNvbnRlbnQgKyAnPG9wdGlvbiB2YWx1ZT1cIicgKyBhY3Rvci5pZCArICdcIj4nICsgYWN0b3IubmFtZSArICc8L29wdGlvbj4nXG4gICAgfVxuICAgIGNvbnRlbnQgPSBjb250ZW50ICsgJzwvc2VsZWN0PjwvZm9ybT48L3A+J1xuICAgIG1lc3NhZ2UuYWN0b3JUbyA9IGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgY29uc3QgZGxnID0gbmV3IERpYWxvZyh7XG4gICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZVRpdGxlU2VsZWN0VXNlclRvR2l2ZVRvJyksXG4gICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQsXG4gICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICBjb25maXJtOiB7XG4gICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlZhbGlkYXRlJyksXG4gICAgICAgICAgICBjYWxsYmFjazogaHRtbCA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKFxuICAgICAgICAgICAgICAgIGh0bWxbMF0ucXVlcnlTZWxlY3RvcignI3NlbGVjdGZvcm0nKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgW25hbWUsIHZhbHVlXSBvZiBmb3JtRGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChuYW1lID09PSAndXNlcicpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHZhbHVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdDogJ2NvbmZpcm0nLFxuICAgICAgICBjbG9zZTogKCkgPT4ge31cbiAgICAgIH0pXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgICBhd2FpdCBnYW1lLkNvQzdzb2NrZXQuZXhlY3V0ZUFzR00oJ2dtdHJhZGVpdGVtdG8nLCBtZXNzYWdlKVxuICB9XG5cbiAgX29uRHJhZ0NoYXJhY3RlcmlzdGljIChldmVudCkge1xuICAgIGNvbnN0IGJveCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudFxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBDb0M3VHlwZTogJ2xpbmsnLFxuICAgICAgbGlua1R5cGU6ICdjb2M3LWxpbmsnLFxuICAgICAgY2hlY2s6ICdjaGVjaycsXG4gICAgICB0eXBlOiAnY2hhcmFjdGVyaXN0aWMnLFxuICAgICAgaGFzUGxheWVyT3duZXI6IHRoaXMuYWN0b3IuaGFzUGxheWVyT3duZXIsXG4gICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5hY3RvcktleSxcbiAgICAgIG5hbWU6IGJveC5kYXRhc2V0LmNoYXJhY3RlcmlzdGljLFxuICAgICAgaWNvbjogbnVsbFxuICAgIH1cblxuICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkYXRhKSlcbiAgfVxuXG4gIF9vbkRyYWdBdHRyaWJ1dGUgKGV2ZW50KSB7XG4gICAgY29uc3QgYm94ID0gZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIENvQzdUeXBlOiAnbGluaycsXG4gICAgICBsaW5rVHlwZTogJ2NvYzctbGluaycsXG4gICAgICBjaGVjazogJ2NoZWNrJyxcbiAgICAgIHR5cGU6ICdhdHRyaWJ1dGUnLFxuICAgICAgaGFzUGxheWVyT3duZXI6IHRoaXMuYWN0b3IuaGFzUGxheWVyT3duZXIsXG4gICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5hY3RvcktleSxcbiAgICAgIG5hbWU6IGJveC5kYXRhc2V0LmF0dHJpYixcbiAgICAgIGljb246IG51bGxcbiAgICB9XG5cbiAgICBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gIH1cblxuICBfb25EcmFnU2FuQ2hlY2sgKGV2ZW50KSB7XG4gICAgY29uc3Qgc2FuTWluID0gZXZlbnQuY3VycmVudFRhcmdldC5xdWVyeVNlbGVjdG9yKCcuc2FuLXZhbHVlLnBhc3MnKVxuICAgIGNvbnN0IHNhbk1heCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQucXVlcnlTZWxlY3RvcignLnNhbi12YWx1ZS5mYWlsZWQnKVxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBDb0M3VHlwZTogJ2xpbmsnLFxuICAgICAgbGlua1R5cGU6ICdjb2M3LWxpbmsnLFxuICAgICAgY2hlY2s6ICdzYW5sb3NzJyxcbiAgICAgIGhhc1BsYXllck93bmVyOiB0aGlzLmFjdG9yLmhhc1BsYXllck93bmVyLFxuICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0b3IuYWN0b3JLZXksXG4gICAgICBzYW5NaW46IHNhbk1pbi5pbm5lclRleHQsXG4gICAgICBzYW5NYXg6IHNhbk1heC5pbm5lclRleHQsXG4gICAgICBpY29uOiBudWxsXG4gICAgfVxuXG4gICAgZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRhdGEpKVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcCAoZXZlbnQpIHtcbiAgICBhd2FpdCBzdXBlci5fb25Ecm9wKGV2ZW50KVxuICB9XG5cbiAgYXN5bmMgX29uU3RhdHVzVG9nZ2xlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnN0YXR1cykge1xuICAgICAgYXdhaXQgdGhpcy5hY3Rvci50b2dnbGVTdGF0dXMoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnN0YXR1cylcbiAgICB9IGVsc2UgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5lZmZlY3QpIHtcbiAgICAgIGF3YWl0IHRoaXMuYWN0b3IudG9nZ2xlRWZmZWN0KGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5lZmZlY3QpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmV2aXZlICgpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHRoaXMuYWN0b3IudW5zZXRTdGF0dXMoQ09DNy5zdGF0dXMuZGVhZClcbiAgfVxuXG4gIGFzeW5jIGhlYWwgKCkge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgdGhpcy5hY3Rvci51bnNldFN0YXR1cyhDT0M3LnN0YXR1cy5keWluZylcbiAgfVxuXG4gIGFzeW5jIGNoZWNrRm9yRGVhdGggKGV2ZW50KSB7XG4gICAgY29uc3QgY29uQ2hlY2sgPSBuZXcgQ29DN0NvbkNoZWNrKFxuICAgICAgdGhpcy5hY3Rvci5pc1Rva2VuID8gdGhpcy5hY3Rvci50b2tlbktleSA6IHRoaXMuYWN0b3IuaWRcbiAgICApXG4gICAgY29uQ2hlY2suc3RheUFsaXZlID0gdHJ1ZVxuICAgIGNvbkNoZWNrLnRvTWVzc2FnZShldmVudC5zaGlmdEtleSlcbiAgfVxuXG4gIGFzeW5jIF9vblJlc2V0Q291bnRlciAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgY291bnRlciA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5jb3VudGVyXG4gICAgY29uc3Qgb25lRmlmdGhTYW5pdHkgPVxuICAgICAgJyAvICcgKyBNYXRoLmZsb29yKHRoaXMuYWN0b3IuZGF0YS5kYXRhLmF0dHJpYnMuc2FuLnZhbHVlIC8gNSlcbiAgICB0aGlzLmFjdG9yLnNldE9uZUZpZnRoU2FuaXR5KG9uZUZpZnRoU2FuaXR5KVxuICAgIGlmIChjb3VudGVyKSB0aGlzLmFjdG9yLnJlc2V0Q291bnRlcihjb3VudGVyKVxuICB9XG5cbiAgYXN5bmMgX29uQXV0b1RvZ2dsZSAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYXR0cmlidXRlJykpIHtcbiAgICAgIGNvbnN0IGF0dHJpYiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmF0dHJpYnV0ZScpLmRhdGFzZXQuYXR0cmliXG4gICAgICB0aGlzLmFjdG9yLnRvZ2dsZUF0dHJpYkF1dG8oYXR0cmliKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vblRvZ2dsZSAoZXZlbnQpIHtcbiAgICBjb25zdCB3ZWFwb24gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgIClcbiAgICBpZiAod2VhcG9uKSB7XG4gICAgICB3ZWFwb24udG9nZ2xlUHJvcGVydHkoXG4gICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5wcm9wZXJ0eSxcbiAgICAgICAgZXZlbnQubWV0YUtleSB8fFxuICAgICAgICAgIGV2ZW50LmN0cmxLZXkgfHxcbiAgICAgICAgICBldmVudC5rZXlDb2RlID09PSA5MSB8fFxuICAgICAgICAgIGV2ZW50LmtleUNvZGUgPT09IDIyNFxuICAgICAgKVxuICAgIH1cbiAgfVxuXG4gIC8vIHJvbGwgdGhlIGFjdG9yIGNoYXJhY3RlcmlzdGljIGZyb20gZm9ybXVsYSB3aGVuIHBvc3NpYmxlLlxuICBhc3luYyBfb25Sb2xsQ2hhcmFjdGVyaXRpY3NWYWx1ZSAoKSB7XG4gICAgYXdhaXQgdGhpcy5hY3Rvci5yb2xsQ2hhcmFjdGVyaXN0aWNzVmFsdWUoKVxuICB9XG5cbiAgYXN5bmMgX29uQXZlcmFnZUNoYXJhY3Rlcml0aWNzVmFsdWUgKCkge1xuICAgIHRoaXMuYWN0b3IuYXZlcmFnZUNoYXJhY3RlcmlzdGljc1ZhbHVlKClcbiAgfVxuXG4gIGFzeW5jIF9vbkxvY2tDbGlja2VkIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBpc0xvY2tlZCA9IHRoaXMuYWN0b3IubG9ja2VkXG4gICAgdGhpcy5hY3Rvci5sb2NrZWQgPSAhaXNMb2NrZWRcbiAgICBIb29rcy5jYWxsKCdhY3RvckxvY2tDbGlja2VkQ29DNycsIFshaXNMb2NrZWRdKVxuICB9XG5cbiAgYXN5bmMgX29uRmxhZ0NsaWNrZWQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGZsYWdOYW1lID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWdcbiAgICB0aGlzLmFjdG9yLnRvZ2dsZUFjdG9yRmxhZyhmbGFnTmFtZSlcbiAgfVxuXG4gIGFzeW5jIF9vbkZvcm11bGFDbGlja2VkIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICB0aGlzLmFjdG9yLnRvZ2dsZUFjdG9yRmxhZygnZGlzcGxheUZvcm11bGEnKVxuICB9XG5cbiAgYXN5bmMgX29uV2hlZWwgKGV2ZW50KSB7XG4gICAgbGV0IHZhbHVlID0gcGFyc2VJbnQoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICBpZiAoZXZlbnQuZGVsdGFZID4gMCkge1xuICAgICAgdmFsdWUgPSB2YWx1ZSA9PT0gMCA/IDAgOiB2YWx1ZSAtIDFcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQuZGVsdGFZIDwgMCkge1xuICAgICAgdmFsdWUgPSB2YWx1ZSArIDFcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQubmFtZSkge1xuICAgICAgY2FzZSAnZGF0YS5hdHRyaWJzLmhwLnZhbHVlJzpcbiAgICAgICAgdGhpcy5hY3Rvci5zZXRIcCh2YWx1ZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2RhdGEuYXR0cmlicy5tcC52YWx1ZSc6XG4gICAgICAgIHRoaXMuYWN0b3Iuc2V0TXAodmFsdWUpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdkYXRhLmF0dHJpYnMuc2FuLnZhbHVlJzpcbiAgICAgICAgdGhpcy5hY3Rvci5zZXRTYW4odmFsdWUpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdkYXRhLmF0dHJpYnMubGNrLnZhbHVlJzpcbiAgICAgICAgdGhpcy5hY3Rvci5zZXRMdWNrKHZhbHVlKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnZGF0YS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQnOlxuICAgICAgICB0aGlzLmFjdG9yLnNldEhwKHZhbHVlKVxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIF90b2dnbGVSZWFkT25seSAoZXZlbnQpIHtcbiAgICBldmVudC5jdXJyZW50VGFyZ2V0LnJlYWRPbmx5ID0gIWV2ZW50LmN1cnJlbnRUYXJnZXQucmVhZE9ubHlcbiAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ3JlYWQtb25seScpXG4gIH1cblxuICBfb25JdGVtU3VtbWFyeSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbS1pZCcpKVxuICAgIGNvbnN0IGNoYXREYXRhID0gaXRlbS5nZXRDaGF0RGF0YSh7IHNlY3JldHM6IHRoaXMuYWN0b3IuaXNPd25lciB9KVxuXG4gICAgLy8gVG9nZ2xlIHN1bW1hcnlcbiAgICBpZiAobGkuaGFzQ2xhc3MoJ2V4cGFuZGVkJykpIHtcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSBsaS5jaGlsZHJlbignLml0ZW0tc3VtbWFyeScpXG4gICAgICBzdW1tYXJ5LnNsaWRlVXAoMjAwLCAoKSA9PiBzdW1tYXJ5LnJlbW92ZSgpKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkaXYgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1zdW1tYXJ5XCI+PC9kaXY+JylcblxuICAgICAgY29uc3QgbGFiZWxzID0gJCgnPGRpdiBjbGFzcz1cIml0ZW0tbGFiZWxzXCI+PC9kaXY+JylcbiAgICAgIGZvciAoY29uc3QgcCBvZiBjaGF0RGF0YS5sYWJlbHMpIHtcbiAgICAgICAgbGFiZWxzLmFwcGVuZChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cIml0ZW0tbGFiZWxcIj48c3BhbiBjbGFzcz1cImxhYmVsLW5hbWVcIj4ke3AubmFtZX0gOjwvc3Bhbj48c3BhbiBjbGFzcz1cImxhYmVsLXZhbHVlXCI+JHtwLnZhbHVlfTwvc3Bhbj48L2Rpdj5gXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGRpdi5hcHBlbmQobGFiZWxzKVxuXG4gICAgICBkaXYuYXBwZW5kKFxuICAgICAgICAkKGA8ZGl2IGNsYXNzPVwiaXRlbS1kZXNjcmlwdGlvblwiPiR7Y2hhdERhdGEuZGVzY3JpcHRpb24udmFsdWV9PC9kaXY+YClcbiAgICAgIClcblxuICAgICAgaWYgKGl0ZW0uZGF0YS5kYXRhLnByb3BlcnRpZXM/LnNwY2wpIHtcbiAgICAgICAgY29uc3Qgc3BlY2lhbERpdiA9ICQoXG4gICAgICAgICAgYDxkaXYgY2xhc3M9XCJpdGVtLXNwZWNpYWxcIj4ke2NoYXREYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWx9PC9kaXY+YFxuICAgICAgICApXG4gICAgICAgIGRpdi5hcHBlbmQoc3BlY2lhbERpdilcbiAgICAgIH1cblxuICAgICAgY29uc3QgcHJvcHMgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1wcm9wZXJ0aWVzXCI+PC9kaXY+JylcbiAgICAgIGZvciAoY29uc3QgcCBvZiBjaGF0RGF0YS5wcm9wZXJ0aWVzKSB7XG4gICAgICAgIHByb3BzLmFwcGVuZChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cInRhZyBpdGVtLXByb3BlcnR5XCI+JHtnYW1lLmkxOG4ubG9jYWxpemUocCl9PC9kaXY+YFxuICAgICAgICApXG4gICAgICB9XG4gICAgICBkaXYuYXBwZW5kKHByb3BzKVxuXG4gICAgICBsaS5hcHBlbmQoZGl2LmhpZGUoKSlcbiAgICAgIENvQzdQYXJzZXIuYmluZEV2ZW50c0hhbmRsZXIoZGl2KVxuICAgICAgZGl2LnNsaWRlRG93bigyMDApXG4gICAgfVxuICAgIGxpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpXG4gICAgLy8gJChldmVudC5jdXJyZW50VGFyZ2V0KS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKTtcbiAgfVxuXG4gIF9vblNlY3Rpb25IZWFkZXIgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIC8vIGxldCBzZWN0aW9uID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCdzZWN0aW9uJyksXG4gICAgLy8gIHBhbm5lbENsYXNzID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5kYXRhKCdwYW5uZWwnKSxcbiAgICAvLyAgcGFubmVsID0gc2VjdGlvbi5maW5kKCBgLiR7cGFubmVsQ2xhc3N9YCk7XG4gICAgLy8gcGFubmVsLnRvZ2dsZSgpO1xuICAgIGNvbnN0IHNlY3Rpb24gPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ3NlY3Rpb24nKVxuICAgIGNvbnN0IHBhbm5lbENsYXNzID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnBhbm5lbFxuICAgIGNvbnN0IHBhbm5lbCA9ICQoc2VjdGlvbikuZmluZChgLnBhbm5lbC4ke3Bhbm5lbENsYXNzfWApXG4gICAgLy8gcGFubmVsLnRvZ2dsZSgpO1xuICAgIGlmIChwYW5uZWwuaGFzQ2xhc3MoJ2V4cGFuZGVkJykpIHtcbiAgICAgIHBhbm5lbC5zbGlkZVVwKDIwMClcbiAgICB9IGVsc2Uge1xuICAgICAgcGFubmVsLnNsaWRlRG93bigyMDApXG4gICAgfVxuICAgIHBhbm5lbC50b2dnbGVDbGFzcygnZXhwYW5kZWQnKVxuICB9XG5cbiAgX29uSW52ZW50b3J5SGVhZGVyIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgICAuc2libGluZ3MoJ2xpJylcbiAgICAgIC50b2dnbGUoKVxuICB9XG5cbiAgYXN5bmMgX29uSXRlbVBvcHVwIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtLWlkJykpXG5cbiAgICBDb0M3QWN0b3JTaGVldC5wb3B1cFNraWxsKGl0ZW0pXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgcG9wdXBTa2lsbCAoc2tpbGwpIHtcbiAgICBza2lsbC5kYXRhLmRhdGEuZGVzY3JpcHRpb24uZW5yaWNoZWRWYWx1ZSA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNraWxsLmRhdGEuZGF0YS5kZXNjcmlwdGlvbi52YWx1ZVxuICAgIClcbiAgICAvLyBnYW1lLkNvQzcuZW5yaWNoZXIoIHNraWxsLmRhdGEuZGF0YS5kZXNjcmlwdGlvbi5lbnJpY2hlZFZhbHVlKTtcbiAgICBjb25zdCBkbGcgPSBuZXcgRGlhbG9nKFxuICAgICAge1xuICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNraWxsRGV0YWlsc1dpbmRvdycpLFxuICAgICAgICBjb250ZW50OiBza2lsbCxcbiAgICAgICAgYnV0dG9uczoge30sXG4gICAgICAgIGNsb3NlOiAoKSA9PiB7fVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ3NraWxsJ10sXG4gICAgICAgIHdpZHRoOiA1MjAsXG4gICAgICAgIGhlaWdodDogNDgwLFxuICAgICAgICBzY3JvbGxZOiBbJy5pdGVtLWRlc2NyaXB0aW9uJ10sXG4gICAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3NraWxsLWRldGFpbHMuaHRtbCdcbiAgICAgIH1cbiAgICApXG4gICAgZGxnLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSByb2xsaW5nIG9mIGFuIGl0ZW0gZnJvbSB0aGUgQWN0b3Igc2hlZXQsIG9idGFpbmluZyB0aGUgSXRlbSBpbnN0YW5jZSBhbmQgZGlzcGF0Y2hpbmcgdG8gaXQncyByb2xsIG1ldGhvZFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYXN5bmMgX29uSXRlbVJvbGwgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIC8vIGNvbnN0IGl0ZW1JZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZDtcbiAgICAvLyBjb25zdCBhY3RvcklkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdmb3JtJykuZGF0YXNldC5hY3RvcklkO1xuICAgIC8vIGNvbnN0IHRva2VuS2V5ID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdmb3JtJykuZGF0YXNldC50b2tlbklkO1xuICAgIC8vIGxldCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKTtcblxuICAgIC8vIGNoZWNrLmFjdG9yID0gIXRva2VuS2V5ID8gYWN0b3JJZCA6IHRva2VuS2V5O1xuICAgIC8vIGNoZWNrLml0ZW0gPSBpdGVtSWQ7XG4gICAgLy8gY2hlY2sucm9sbCgpO1xuICAgIC8vIGNoZWNrLnRvTWVzc2FnZSgpO1xuICB9XG5cbiAgYXN5bmMgX29uV2VhcG9uUm9sbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdsaScpLmRhdGFzZXQuaXRlbUlkXG4gICAgY29uc3QgZmFzdEZvcndhcmQgPSBldmVudC5zaGlmdEtleVxuICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGl0ZW1JZClcbiAgICAvLyBjb25zdCBhY3RvcktleSA9ICF0aGlzLnRva2VuPyB0aGlzLmFjdG9yLmFjdG9yS2V5IDogYCR7dGhpcy50b2tlbi5zY2VuZT8uX2lkP3RoaXMudG9rZW4uc2NlbmUuX2lkOidUT0tFTid9LiR7dGhpcy50b2tlbi5kYXRhLl9pZH1gOyAvL1JFRkFDVE9SSU5HICgyKVxuICAgIC8qKiAqIE1PRElGIDAuOC54ICoqKi9cbiAgICBsZXQgYWN0b3JLZXlcbiAgICBpZiAoIXRoaXMudG9rZW4pIGFjdG9yS2V5ID0gdGhpcy5hY3Rvci5pZFxuICAgIC8vIFNoZWV0IHdhcyBvcGVuZWQgZnJvbSBhY3RvciBkaXJlY3RvcnlcbiAgICBlbHNlIHtcbiAgICAgIC8vIE9wZW5lZCBmcm9tIHRva2VuXG4gICAgICBpZiAodGhpcy5hY3Rvci5pc1Rva2VuICYmIGdhbWUuYWN0b3JzLnRva2Vuc1t0aGlzLnRva2VuLmlkXSkge1xuICAgICAgICBhY3RvcktleSA9IGBUT0tFTi4ke3RoaXMudG9rZW4uaWR9YFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWN0b3JLZXkgPSBgJHt0aGlzLnRva2VuLnBhcmVudC5pZH0uJHt0aGlzLnRva2VuLmlkfWBcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaXNDdHJsS2V5KGV2ZW50KSAmJiBnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgY29uc3QgbGlua0RhdGEgPSB7XG4gICAgICAgIGNoZWNrOiAnaXRlbScsXG4gICAgICAgIHR5cGU6ICd3ZWFwb24nLFxuICAgICAgICBuYW1lOiB3ZWFwb24ubmFtZSxcbiAgICAgICAgaGFzUGxheWVyT3duZXI6IHRoaXMuYWN0b3IuaGFzUGxheWVyT3duZXIsXG4gICAgICAgIGFjdG9yS2V5OiB0aGlzLmFjdG9yLmFjdG9yS2V5XG4gICAgICB9XG5cbiAgICAgIENvQzdMaW5rQ3JlYXRpb25EaWFsb2cuZnJvbUxpbmtEYXRhKGxpbmtEYXRhKS50aGVuKGRsZyA9PlxuICAgICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBwcm9jZWVkV2l0aG91dFRhcmdldFxuICAgICAgaWYgKGdhbWUudXNlci50YXJnZXRzLnNpemUgPD0gMCkge1xuICAgICAgICBwcm9jZWVkV2l0aG91dFRhcmdldCA9IGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgICB0aXRsZTogJyAnLFxuICAgICAgICAgICAgY29udGVudDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ob1RhcmdldFNlbGVjdGVkJywge1xuICAgICAgICAgICAgICB3ZWFwb246IHdlYXBvbi5uYW1lXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICAgICAgY2FuY2VsOiB7XG4gICAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLXRpbWVzXCI+PC9pPicsXG4gICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DYW5jZWwnKSxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZmFsc2UpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBwcm9jZWVkOiB7XG4gICAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLWNoZWNrXCI+PC9pPicsXG4gICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Qcm9jZWVkJyksXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHRydWUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVmYXVsdDogJ2NhbmNlbCcsXG4gICAgICAgICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJ11cbiAgICAgICAgICB9XG4gICAgICAgICAgbmV3IERpYWxvZyhkYXRhKS5yZW5kZXIodHJ1ZSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGlmIChnYW1lLnVzZXIudGFyZ2V0cy5zaXplID4gMCB8fCBwcm9jZWVkV2l0aG91dFRhcmdldCkge1xuICAgICAgICBpZiAoIXdlYXBvbi5kYXRhLmRhdGEucHJvcGVydGllcy5ybmdkKSB7XG4gICAgICAgICAgaWYgKGdhbWUudXNlci50YXJnZXRzLnNpemUgPiAxKSB7XG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5Ub29NYW55VGFyZ2V0JykpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBDb0M3TWVsZWVJbml0aWF0b3IoYWN0b3JLZXksIGl0ZW1JZCwgZmFzdEZvcndhcmQpXG4gICAgICAgICAgY2FyZC5jcmVhdGVDaGF0Q2FyZCgpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdlYXBvbi5kYXRhLmRhdGEucHJvcGVydGllcy5ybmdkKSB7XG4gICAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBDb0M3UmFuZ2VJbml0aWF0b3IoYWN0b3JLZXksIGl0ZW1JZCwgZmFzdEZvcndhcmQpXG4gICAgICAgICAgY2FyZC5jcmVhdGVDaGF0Q2FyZCgpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25SZWxvYWRXZWFwb24gKGV2ZW50KSB7XG4gICAgY29uc3QgaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgICA/IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgICAgOiBudWxsXG4gICAgaWYgKCFpdGVtSWQpIHJldHVyblxuICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGl0ZW1JZClcbiAgICBpZiAoZXZlbnQuYnV0dG9uID09PSAwKSB7XG4gICAgICBpZiAoZXZlbnQuc2hpZnRLZXkpIGF3YWl0IHdlYXBvbi5yZWxvYWQoKVxuICAgICAgZWxzZSBhd2FpdCB3ZWFwb24uYWRkQnVsbGV0KClcbiAgICB9IGVsc2UgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gMikge1xuICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5KSBhd2FpdCB3ZWFwb24uc2V0QnVsbGV0cygwKVxuICAgICAgZWxzZSBhd2FpdCB3ZWFwb24uc2hvb3RCdWxsZXRzKDEpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uQWRkQW1vIChldmVudCkge1xuICAgIGNvbnN0IGl0ZW1JZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgICAgPyBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICAgIDogbnVsbFxuICAgIGlmICghaXRlbUlkKSByZXR1cm5cbiAgICBjb25zdCB3ZWFwb24gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChpdGVtSWQpXG4gICAgYXdhaXQgd2VhcG9uLmFkZEJ1bGxldCgpXG4gIH1cblxuICBhc3luYyBfb25XZWFwb25Ta2lsbFJvbGwgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgIGNvbnN0IGFjdG9ySWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LmFjdG9ySWRcbiAgICBjb25zdCB0b2tlbktleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnZm9ybScpLmRhdGFzZXQudG9rZW5JZFxuICAgIGNvbnN0IGl0ZW1JZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnbGknKVxuICAgICAgPyBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2xpJykuZGF0YXNldC5pdGVtSWRcbiAgICAgIDogbnVsbFxuXG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcblxuICAgIGlmICghZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgIGNvbnN0IHVzYWdlID0gYXdhaXQgUm9sbERpYWxvZy5jcmVhdGUoKVxuICAgICAgaWYgKHVzYWdlKSB7XG4gICAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IHVzYWdlLmdldCgnYm9udXNEaWNlJylcbiAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IHVzYWdlLmdldCgnZGlmZmljdWx0eScpXG4gICAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXG4gICAgICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNoZWNrLmFjdG9yID0gIXRva2VuS2V5ID8gYWN0b3JJZCA6IHRva2VuS2V5XG4gICAgY2hlY2suc2tpbGwgPSBza2lsbElkXG4gICAgY2hlY2suaXRlbSA9IGl0ZW1JZFxuICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgIGNoZWNrLnRvTWVzc2FnZSgpXG5cbiAgICAvLyBIQUNLOiBqdXN0IHRvIHBvcCB0aGUgYWR2YW5jZWQgcm9sbCB3aW5kb3dcbiAgICAvLyBjaGVjay5pdGVtLnJvbGwoKTtcbiAgfVxuXG4gIGFzeW5jIF9vbldlYXBvbkRhbWFnZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcud2VhcG9uJykuZGF0YXNldC5pdGVtSWRcbiAgICBjb25zdCByYW5nZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLndlYXBvbi1kYW1hZ2UnKS5kYXRhc2V0LnJhbmdlXG4gICAgY29uc3QgZGFtYWdlQ2hhdENhcmQgPSBuZXcgRGFtYWdlQ2FyZCh7XG4gICAgICBmYXN0Rm9yd2FyZDogZXZlbnQuc2hpZnRLZXksXG4gICAgICByYW5nZTogcmFuZ2VcbiAgICB9KVxuICAgIGRhbWFnZUNoYXRDYXJkLmFjdG9yS2V5ID0gdGhpcy5hY3Rvci50b2tlbktleVxuICAgIGRhbWFnZUNoYXRDYXJkLml0ZW1JZCA9IGl0ZW1JZFxuICAgIGRhbWFnZUNoYXRDYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAvLyBjb25zb2xlLmxvZyggJ1dlYXBvbiBkYW1hZ2UgQ2xpY2tlZCcpO1xuICB9XG5cbiAgYXN5bmMgX29uT3Bwb3NlZFJvbGwgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgaWYgKCFldmVudC5hbHRLZXkpIHtcbiAgICAgIC8vIGlmKCBldmVudC5jdHJsS2V5KSB1aS5ub3RpZmljYXRpb25zLmluZm8oJ0NUUkwgcHJlc3NlZCEnKTtcbiAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgIHR5cGU6IE9wcG9zZWRDaGVja0NhcmQuZGVmYXVsdENvbmZpZy50eXBlLFxuICAgICAgICBjb21iYXQ6IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0Py5jb250YWlucygnY29tYmF0JyksXG4gICAgICAgIGFjdGlvbjogJ25ldydcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJvbGwgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgIHJvbGwuYWN0b3IgPVxuICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LnRva2VuSWQgfHxcbiAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdmb3JtJykuZGF0YXNldC5hY3RvcklkXG4gICAgICByb2xsLmNoYXJhY3RlcmlzdGljID1cbiAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQuY2hhcmFjdGVyaXN0aWNcbiAgICAgIHJvbGwuYXR0cmlidXRlID0gZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQuYXR0cmliXG4gICAgICByb2xsLml0ZW0gPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJyk/LmRhdGFzZXQuaXRlbUlkXG4gICAgICByb2xsLndlYXBvbkFsdFNraWxsID0gZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXG4gICAgICAgICdhbHRlcm5hdGl2LXNraWxsJ1xuICAgICAgKVxuICAgICAgcm9sbC5za2lsbElkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpPy5kYXRhc2V0LnNraWxsSWRcbiAgICAgIHJvbGwucm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgICByb2xsLmluaXRpYXRvciA9IGdhbWUudXNlci5pZFxuXG4gICAgICBpZiAocm9sbC5hdHRyaWIgPT09ICdkYicpIHJldHVyblxuXG4gICAgICBpZiAoIWV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICAgIGNvbnN0IHVzYWdlID0gYXdhaXQgUm9sbERpYWxvZy5jcmVhdGUoe1xuICAgICAgICAgIGRpc2FibGVGbGF0VGhyZXNob2xkTW9kaWZpZXI6XG4gICAgICAgICAgICBldmVudC5tZXRhS2V5IHx8XG4gICAgICAgICAgICBldmVudC5jdHJsS2V5IHx8XG4gICAgICAgICAgICBldmVudC5rZXlDb2RlID09PSA5MSB8fFxuICAgICAgICAgICAgZXZlbnQua2V5Q29kZSA9PT0gMjI0LCAvLyBUT0RPOiBkbyB3ZSBuZWVkIHRoaXMgQ1RSTD9cbiAgICAgICAgICBkaXNhYmxlRmxhdERpY2VNb2RpZmllcjpcbiAgICAgICAgICAgIGV2ZW50Lm1ldGFLZXkgfHxcbiAgICAgICAgICAgIGV2ZW50LmN0cmxLZXkgfHxcbiAgICAgICAgICAgIGV2ZW50LmtleUNvZGUgPT09IDkxIHx8XG4gICAgICAgICAgICBldmVudC5rZXlDb2RlID09PSAyMjRcbiAgICAgICAgfSlcbiAgICAgICAgaWYgKHVzYWdlKSB7XG4gICAgICAgICAgcm9sbC5kaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgICAgICByb2xsLmRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICAgICAgcm9sbC5mbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxuICAgICAgICAgIHJvbGwuZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKFxuICAgICAgICAgICAgdXNhZ2UuZ2V0KCdmbGF0VGhyZXNob2xkTW9kaWZpZXInKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByb2xsLmRlbnlQdXNoID0gdHJ1ZSAvLyBPcHBvc2VkIHJvbGxlZCBjYW4ndCBiZSBwdXNoZWQuXG5cbiAgICAgIGF3YWl0IHJvbGwuX3BlcmZvcm0oKVxuXG4gICAgICBkYXRhLnJvbGwgPSByb2xsLkpTT05Sb2xsRGF0YVxuXG4gICAgICBPcHBvc2VkQ2hlY2tDYXJkLmRpc3BhdGNoKGRhdGEpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgIHR5cGU6IENvbWJpbmVkQ2hlY2tDYXJkLmRlZmF1bHRDb25maWcudHlwZSxcbiAgICAgICAgYWN0aW9uOiAnbmV3J1xuICAgICAgfVxuICAgICAgY29uc3Qgcm9sbCA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgcm9sbC5hY3RvciA9XG4gICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnZm9ybScpLmRhdGFzZXQudG9rZW5JZCB8fFxuICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LmFjdG9ySWRcbiAgICAgIHJvbGwuY2hhcmFjdGVyaXN0aWMgPVxuICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC5jaGFyYWN0ZXJpc3RpY1xuICAgICAgcm9sbC5hdHRyaWJ1dGUgPSBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC5hdHRyaWJcbiAgICAgIHJvbGwuc2tpbGxJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKT8uZGF0YXNldC5za2lsbElkXG4gICAgICByb2xsLnJvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgICAgcm9sbC5pbml0aWF0b3IgPSBnYW1lLnVzZXIuaWRcblxuICAgICAgaWYgKHJvbGwuYXR0cmliID09PSAnZGInKSByZXR1cm5cblxuICAgICAgZGF0YS5yb2xsID0gcm9sbC5KU09OUm9sbERhdGFcblxuICAgICAgQ29tYmluZWRDaGVja0NhcmQuZGlzcGF0Y2goZGF0YSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHJvbGxpbmcgYSBTa2lsbCBjaGVja1xuICAgKiBAICBwYXJhbSB7RXZlbnR9IGV2ZW50ICAgVGhlIG9yaWdpbmF0aW5nIGNsaWNrIGV2ZW50XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhc3luYyBfb25Sb2xsQ2hhcmFjdGVyaXRpY1Rlc3QgKGV2ZW50KSB7XG4gICAgLy8gRkxBVE1PRElGXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgYWN0b3JJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnZm9ybScpLmRhdGFzZXQuYWN0b3JJZFxuICAgIGNvbnN0IHRva2VuS2V5ID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdmb3JtJykuZGF0YXNldC50b2tlbklkXG4gICAgY29uc3QgY2hhcmFjdGVyaXN0aWMgPVxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQuY2hhcmFjdGVyaXN0aWNcblxuICAgIGlmIChpc0N0cmxLZXkoZXZlbnQpICYmIGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBjb25zdCBsaW5rRGF0YSA9IHtcbiAgICAgICAgY2hlY2s6ICdjaGVjaycsXG4gICAgICAgIHR5cGU6ICdjaGFyYWN0ZXJpc3RpYycsXG4gICAgICAgIG5hbWU6IGNoYXJhY3RlcmlzdGljLFxuICAgICAgICBoYXNQbGF5ZXJPd25lcjogdGhpcy5hY3Rvci5oYXNQbGF5ZXJPd25lcixcbiAgICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0b3IuYWN0b3JLZXksXG4gICAgICAgIGZvcmNlTW9kaWZpZXJzOiBldmVudC5zaGlmdEtleVxuICAgICAgfVxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJykgPT09ICdibGluZHJvbGwnKSB7XG4gICAgICAgIGxpbmtEYXRhLmJsaW5kID0gdHJ1ZVxuICAgICAgfVxuICAgICAgQ29DN0xpbmtDcmVhdGlvbkRpYWxvZy5mcm9tTGlua0RhdGEobGlua0RhdGEpLnRoZW4oZGxnID0+XG4gICAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGxldCBkaWZmaWN1bHR5LCBtb2RpZmllciwgZmxhdERpY2VNb2RpZmllciwgZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgaWYgKCFldmVudC5zaGlmdEtleSkge1xuICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZSh7XG4gICAgICAgIGRpc2FibGVGbGF0VGhyZXNob2xkTW9kaWZpZXI6XG4gICAgICAgICAgZXZlbnQubWV0YUtleSB8fFxuICAgICAgICAgIGV2ZW50LmN0cmxLZXkgfHxcbiAgICAgICAgICBldmVudC5rZXlDb2RlID09PSA5MSB8fFxuICAgICAgICAgIGV2ZW50LmtleUNvZGUgPT09IDIyNCwgLy8gVE9ETyA6IFRoaXMgY2FuIGJlIHJlbW92ZWQgP1xuICAgICAgICBkaXNhYmxlRmxhdERpY2VNb2RpZmllcjpcbiAgICAgICAgICBldmVudC5tZXRhS2V5IHx8XG4gICAgICAgICAgZXZlbnQuY3RybEtleSB8fFxuICAgICAgICAgIGV2ZW50LmtleUNvZGUgPT09IDkxIHx8XG4gICAgICAgICAgZXZlbnQua2V5Q29kZSA9PT0gMjI0XG4gICAgICB9KVxuICAgICAgaWYgKHVzYWdlKSB7XG4gICAgICAgIG1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnYm9udXNEaWNlJykpXG4gICAgICAgIGRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICAgIGZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXG4gICAgICAgIGZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgaWYgKG1vZGlmaWVyICE9PSAndW5kZWZpbmVkJykgY2hlY2suZGljZU1vZGlmaWVyID0gbW9kaWZpZXJcbiAgICBpZiAodHlwZW9mIGRpZmZpY3VsdHkgIT09ICd1bmRlZmluZWQnKSBjaGVjay5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgIGNoZWNrLmFjdG9yID0gIXRva2VuS2V5ID8gYWN0b3JJZCA6IHRva2VuS2V5XG4gICAgY2hlY2suZmxhdERpY2VNb2RpZmllciA9IGZsYXREaWNlTW9kaWZpZXJcbiAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBmbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICBjaGVjay5zdGFuZGJ5ID1cbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N0YW5ieUdNUm9sbHMnKSAmJlxuICAgICAgZ2FtZS51c2VyLmlzR00gJiZcbiAgICAgIHRoaXMuYWN0b3IuaGFzUGxheWVyT3duZXJcbiAgICBhd2FpdCBjaGVjay5yb2xsQ2hhcmFjdGVyaXN0aWMoY2hhcmFjdGVyaXN0aWMpXG4gICAgY2hlY2sudG9NZXNzYWdlKClcbiAgfVxuXG4gIGFzeW5jIF9vblJvbGxBdHRyaWJUZXN0IChldmVudCkge1xuICAgIC8vIEZMQVRNT0RJRklFUlxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IGF0dHJpYiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5kYXRhc2V0LmF0dHJpYlxuXG4gICAgaWYgKGlzQ3RybEtleShldmVudCkgJiYgZ2FtZS51c2VyLmlzR00gJiYgWydsY2snLCAnc2FuJ10uaW5jbHVkZXMoYXR0cmliKSkge1xuICAgICAgY29uc3QgbGlua0RhdGEgPSBldmVudC5hbHRLZXlcbiAgICAgICAgPyB7XG4gICAgICAgICAgICBjaGVjazogJ3Nhbmxvc3MnLFxuICAgICAgICAgICAgaGFzUGxheWVyT3duZXI6IHRoaXMuYWN0b3IuaGFzUGxheWVyT3duZXIsXG4gICAgICAgICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5hY3RvcktleSxcbiAgICAgICAgICAgIGZvcmNlTW9kaWZpZXJzOiBldmVudC5zaGlmdEtleVxuICAgICAgICAgIH1cbiAgICAgICAgOiB7XG4gICAgICAgICAgICBjaGVjazogJ2NoZWNrJyxcbiAgICAgICAgICAgIHR5cGU6ICdhdHRyaWJ1dGUnLFxuICAgICAgICAgICAgbmFtZTogYXR0cmliLFxuICAgICAgICAgICAgaGFzUGxheWVyT3duZXI6IHRoaXMuYWN0b3IuaGFzUGxheWVyT3duZXIsXG4gICAgICAgICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5hY3RvcktleSxcbiAgICAgICAgICAgIGZvcmNlTW9kaWZpZXJzOiBldmVudC5zaGlmdEtleVxuICAgICAgICAgIH1cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpID09PSAnYmxpbmRyb2xsJykge1xuICAgICAgICBsaW5rRGF0YS5ibGluZCA9IHRydWVcbiAgICAgIH1cbiAgICAgIENvQzdMaW5rQ3JlYXRpb25EaWFsb2cuZnJvbUxpbmtEYXRhKGxpbmtEYXRhKS50aGVuKGRsZyA9PlxuICAgICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgICApXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoYXR0cmliID09PSAnZGInKSB7XG4gICAgICBpZiAoXG4gICAgICAgICEvXi17MCwxfVxcZCskLy50ZXN0KFxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5kYXRhc2V0LnJvbGxGb3JtdWxhXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICBjb25zdCByID0gbmV3IFJvbGwoXG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQucm9sbEZvcm11bGFcbiAgICAgICAgKVxuICAgICAgICBhd2FpdCByLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICBpZiAoIWlzTmFOKHIudG90YWwpICYmICEoci50b3RhbCA9PT0gdW5kZWZpbmVkKSkge1xuICAgICAgICAgIHIudG9NZXNzYWdlKHtcbiAgICAgICAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKSxcbiAgICAgICAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkJvbnVzRGFtYWdlUm9sbCcpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKGF0dHJpYiA9PT0gJ2xjaycpIHtcbiAgICAgIGlmICghdGhpcy5hY3Rvci5kYXRhLmRhdGEuYXR0cmlicy5sY2sudmFsdWUpIHJldHVybiAvLyBJZiBsdWNrIGlzIG51bGwsIDAgb3Igbm9uIGRlZmluZWQgc3RvcCB0aGVyZS5cbiAgICB9XG5cbiAgICBjb25zdCBhY3RvcklkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdmb3JtJykuZGF0YXNldC5hY3RvcklkXG4gICAgY29uc3QgdG9rZW5LZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LnRva2VuSWRcblxuICAgIGxldCBkaWZmaWN1bHR5LCBtb2RpZmllciwgZmxhdERpY2VNb2RpZmllciwgZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgaWYgKCFldmVudC5zaGlmdEtleSkge1xuICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZSh7XG4gICAgICAgIGRpc2FibGVGbGF0VGhyZXNob2xkTW9kaWZpZXI6IGZhbHNlLCAvLyBUT0RPOiBSZW1vdmUsIGRlcHJlY2F0ZWQuXG4gICAgICAgIGRpc2FibGVGbGF0RGljZU1vZGlmaWVyOiBmYWxzZVxuICAgICAgfSkgLy8gVE9ETzogUmVtb3ZlLCBkZXByZWNhdGVkLlxuICAgICAgaWYgKHVzYWdlKSB7XG4gICAgICAgIG1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnYm9udXNEaWNlJykpXG4gICAgICAgIGRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICAgIGZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXG4gICAgICAgIGZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpKVxuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBzYW5NaW4sIHNhbk1heFxuICAgIGlmIChldmVudC5hbHRLZXkgJiYgYXR0cmliID09PSAnc2FuJykge1xuICAgICAgY29uc3Qgc2FuRGF0YSA9IGF3YWl0IFNhbkRhdGFEaWFsb2cuY3JlYXRlKHtcbiAgICAgICAgcHJvbXB0TGFiZWw6IGZhbHNlIC8vIFRPRE86IFJlbW92ZSwgZGVwcmVjYXRlZC5cbiAgICAgIH0pXG4gICAgICBpZiAoc2FuRGF0YSkge1xuICAgICAgICBzYW5NaW4gPSBzYW5EYXRhLmdldCgnc2FuTWluJykgfHwgMFxuICAgICAgICBzYW5NYXggPSBzYW5EYXRhLmdldCgnc2FuTWF4JykgfHwgMFxuXG4gICAgICAgIGlmICghaXNOYU4oTnVtYmVyKHNhbk1pbikpKSBzYW5NaW4gPSBOdW1iZXIoc2FuTWluKVxuICAgICAgICBpZiAoIWlzTmFOKE51bWJlcihzYW5NYXgpKSkgc2FuTWF4ID0gTnVtYmVyKHNhbk1heClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBpc1NhbkNoZWNrID1cbiAgICAgIHR5cGVvZiBzYW5NaW4gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBzYW5NYXggIT09ICd1bmRlZmluZWQnXG5cbiAgICBpZiAoaXNTYW5DaGVjaykge1xuICAgICAgU2FuQ2hlY2tDYXJkLmNyZWF0ZShcbiAgICAgICAgdGhpcy5hY3Rvci5hY3RvcktleSxcbiAgICAgICAgeyBzYW5NaW46IHNhbk1pbiwgc2FuTWF4OiBzYW5NYXggfSxcbiAgICAgICAge1xuICAgICAgICAgIHNhbk1vZGlmaWVyOiBtb2RpZmllcixcbiAgICAgICAgICBzYW5EaWZmaWN1bHR5OiBkaWZmaWN1bHR5LFxuICAgICAgICAgIGZhc3RGb3J3YXJkOiBldmVudC5zaGlmdEtleVxuICAgICAgICB9XG4gICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICBpZiAodHlwZW9mIG1vZGlmaWVyICE9PSAndW5kZWZpbmVkJykgY2hlY2suZGljZU1vZGlmaWVyID0gbW9kaWZpZXJcbiAgICAgIGlmICh0eXBlb2YgZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCcpIGNoZWNrLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gZmxhdERpY2VNb2RpZmllclxuICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgICBjaGVjay5hY3RvciA9ICF0b2tlbktleSA/IGFjdG9ySWQgOiB0b2tlbktleVxuICAgICAgY2hlY2suc3RhbmRieSA9XG4gICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N0YW5ieUdNUm9sbHMnKSAmJlxuICAgICAgICBnYW1lLnVzZXIuaXNHTSAmJlxuICAgICAgICB0aGlzLmFjdG9yLmhhc1BsYXllck93bmVyXG4gICAgICBhd2FpdCBjaGVjay5yb2xsQXR0cmlidXRlKGF0dHJpYilcbiAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSByb2xsaW5nIGEgU2tpbGwgY2hlY2tcbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgICBUaGUgb3JpZ2luYXRpbmcgY2xpY2sgZXZlbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFzeW5jIF9vblJvbGxTa2lsbFRlc3QgKGV2ZW50KSB7XG4gICAgLy8gRkxBVE1PRElGXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmbGFnZ2VkNGRldicpKSByZXR1cm5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgc2tpbGxJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0LnNraWxsSWRcbiAgICBjb25zdCBhY3RvcklkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdmb3JtJykuZGF0YXNldC5hY3RvcklkXG4gICAgY29uc3QgdG9rZW5LZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LnRva2VuSWRcblxuICAgIGlmIChpc0N0cmxLZXkoZXZlbnQpICYmIGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBjb25zdCBuYW1lID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoc2tpbGxJZCk/Lm5hbWVcbiAgICAgIGlmICghbmFtZSkgcmV0dXJuXG4gICAgICBjb25zdCBsaW5rRGF0YSA9IHtcbiAgICAgICAgY2hlY2s6ICdjaGVjaycsXG4gICAgICAgIHR5cGU6ICdza2lsbCcsXG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgIGhhc1BsYXllck93bmVyOiB0aGlzLmFjdG9yLmhhc1BsYXllck93bmVyLFxuICAgICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5hY3RvcktleSxcbiAgICAgICAgZm9yY2VNb2RpZmllcnM6IGV2ZW50LnNoaWZ0S2V5XG4gICAgICB9XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKSA9PT0gJ2JsaW5kcm9sbCcpIHtcbiAgICAgICAgbGlua0RhdGEuYmxpbmQgPSB0cnVlXG4gICAgICB9XG4gICAgICBDb0M3TGlua0NyZWF0aW9uRGlhbG9nLmZyb21MaW5rRGF0YShsaW5rRGF0YSkudGhlbihkbGcgPT5cbiAgICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgICAgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgbGV0IGRpZmZpY3VsdHksIG1vZGlmaWVyLCBmbGF0RGljZU1vZGlmaWVyLCBmbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICBpZiAoIWV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKHtcbiAgICAgICAgZGlzYWJsZUZsYXRUaHJlc2hvbGRNb2RpZmllcjogZmFsc2UsXG4gICAgICAgIGRpc2FibGVGbGF0RGljZU1vZGlmaWVyOiBmYWxzZVxuICAgICAgfSlcbiAgICAgIGlmICh1c2FnZSkge1xuICAgICAgICBtb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2JvbnVzRGljZScpKVxuICAgICAgICBkaWZmaWN1bHR5ID0gTnVtYmVyKHVzYWdlLmdldCgnZGlmZmljdWx0eScpKVxuICAgICAgICBmbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxuICAgICAgICBmbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0VGhyZXNob2xkTW9kaWZpZXInKSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIGlmICh0eXBlb2YgbW9kaWZpZXIgIT09ICd1bmRlZmluZWQnKSBjaGVjay5kaWNlTW9kaWZpZXIgPSBtb2RpZmllclxuICAgIGlmICh0eXBlb2YgZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCcpIGNoZWNrLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgY2hlY2suYWN0b3IgPSAhdG9rZW5LZXkgPyBhY3RvcklkIDogdG9rZW5LZXlcbiAgICBjaGVjay5za2lsbCA9IHNraWxsSWRcbiAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gZmxhdERpY2VNb2RpZmllclxuICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IGZsYXRUaHJlc2hvbGRNb2RpZmllclxuICAgIGNoZWNrLnN0YW5kYnkgPVxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3RhbmJ5R01Sb2xscycpICYmXG4gICAgICBnYW1lLnVzZXIuaXNHTSAmJlxuICAgICAgdGhpcy5hY3Rvci5oYXNQbGF5ZXJPd25lclxuICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIC8vIF9nZXRTdWJtaXREYXRhKHVwZGF0ZURhdGE9e30pIHtcblxuICAvLyAgLy8gQ3JlYXRlIHRoZSBleHBhbmRlZCB1cGRhdGUgZGF0YSBvYmplY3RcbiAgLy8gIGNvbnN0IGZkID0gbmV3IEZvcm1EYXRhRXh0ZW5kZWQodGhpcy5mb3JtLCB7ZWRpdG9yczogdGhpcy5lZGl0b3JzfSk7XG4gIC8vICBsZXQgZGF0YSA9IGZkLnRvT2JqZWN0KCk7XG4gIC8vICBpZiAoIHVwZGF0ZURhdGEgKSBkYXRhID0gbWVyZ2VPYmplY3QoZGF0YSwgdXBkYXRlRGF0YSk7XG4gIC8vICBlbHNlIGRhdGEgPSBleHBhbmRPYmplY3QoZGF0YSk7XG5cbiAgLy8gIC8vIEhhbmRsZSBEYW1hZ2UgYXJyYXlcbiAgLy8gIGNvbnN0IGRhbWFnZSA9IGRhdGEuZGF0YT8uZGFtYWdlO1xuICAvLyAgaWYgKCBkYW1hZ2UgKSBkYW1hZ2UucGFydHMgPSBPYmplY3QudmFsdWVzKGRhbWFnZT8ucGFydHMgfHwge30pLm1hcChkID0+IFtkWzBdIHx8ICcnLCBkWzFdIHx8ICcnXSk7XG5cbiAgLy8gIC8vIFJldHVybiB0aGUgZmxhdHRlbmVkIHN1Ym1pc3Npb24gZGF0YVxuICAvLyAgcmV0dXJuIGZsYXR0ZW5PYmplY3QoZGF0YSk7XG4gIC8vIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKlxuICAgKiBJbXBsZW1lbnQgdGhlIF91cGRhdGVPYmplY3QgbWV0aG9kIGFzIHJlcXVpcmVkIGJ5IHRoZSBwYXJlbnQgY2xhc3Mgc3BlY1xuICAgKiBUaGlzIGRlZmluZXMgaG93IHRvIHVwZGF0ZSB0aGUgc3ViamVjdCBvZiB0aGUgZm9ybSB3aGVuIHRoZSBmb3JtIGlzIHN1Ym1pdHRlZFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oJ191cGRhdGVPYmplY3QnKTtcbiAgICAvLyBUT0RPOiBSZXBsYWNlIHdpdGggICBfZ2V0U3VibWl0RGF0YSh1cGRhdGVEYXRhPXt9KSBDZi4gc2hlZXQuanMoMjQzKVxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QpIHtcbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdza2lsbC1hZGp1c3RtZW50JykpIHtcbiAgICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICAgICAgICApXG4gICAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICA/IHBhcnNlSW50KGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpXG4gICAgICAgICAgICAgIDogbnVsbFxuXG4gICAgICAgICAgICBpZiAoIWV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpIHtcbiAgICAgICAgICAgICAgYXdhaXQgaXRlbS51cGRhdGUoe1xuICAgICAgICAgICAgICAgIFtldmVudC5jdXJyZW50VGFyZ2V0Lm5hbWVdOiBudWxsXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoIWlzTmFOKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGl0ZW0udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgIFtldmVudC5jdXJyZW50VGFyZ2V0Lm5hbWVdOiB2YWx1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5jcmVkaXRSYXRpbmdTa2lsbE5hbWUpID09PSBpdGVtLm5hbWUpIHtcbiAgICAgICAgICAgICAgY29uc3QgY3JlZGl0VmFsdWUgPVxuICAgICAgICAgICAgICAgIChpdGVtLnZhbHVlIHx8IDApIC1cbiAgICAgICAgICAgICAgICAoaXRlbS5kYXRhLmRhdGEuYWRqdXN0bWVudHM/LmV4cGVyaWVuY2UgfHwgMClcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGNyZWRpdFZhbHVlID5cbiAgICAgICAgICAgICAgICAgIE51bWJlcih0aGlzLmFjdG9yLm9jY3VwYXRpb24uZGF0YS5kYXRhLmNyZWRpdFJhdGluZy5tYXgpIHx8XG4gICAgICAgICAgICAgICAgY3JlZGl0VmFsdWUgPFxuICAgICAgICAgICAgICAgICAgTnVtYmVyKHRoaXMuYWN0b3Iub2NjdXBhdGlvbi5kYXRhLmRhdGEuY3JlZGl0UmF0aW5nLm1pbilcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DcmVkaXRPdXRPZlJhbmdlJywge1xuICAgICAgICAgICAgICAgICAgICBtaW46IE51bWJlcihcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdG9yLm9jY3VwYXRpb24uZGF0YS5kYXRhLmNyZWRpdFJhdGluZy5taW5cbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgbWF4OiBOdW1iZXIoXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rvci5vY2N1cGF0aW9uLmRhdGEuZGF0YS5jcmVkaXRSYXRpbmcubWF4XG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhdHRyaWJ1dGUtdmFsdWUnKSkge1xuICAgICAgICAgIC8vIFRPRE8gOiBjaGVjayB3aHkgU0FOIG9ubHkgP1xuICAgICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0Lm5hbWUgPT09ICdkYXRhLmF0dHJpYnMuc2FuLnZhbHVlJykge1xuICAgICAgICAgICAgdGhpcy5hY3Rvci5zZXRTYW4ocGFyc2VJbnQoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSkpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3RleHQtYXJlYScpKSB7XG4gICAgICAgICAgdGhpcy5hY3Rvci51cGRhdGVUZXh0QXJlYShldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdiaW8tc2VjdGlvbi12YWx1ZScpKSB7XG4gICAgICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmJpby1zZWN0aW9uJykuZGF0YXNldC5pbmRleFxuICAgICAgICAgIClcbiAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnVwZGF0ZUJpb1ZhbHVlKGluZGV4LCBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdiaW8tc2VjdGlvbi10aXRsZScpKSB7XG4gICAgICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmJpby1zZWN0aW9uJykuZGF0YXNldC5pbmRleFxuICAgICAgICAgIClcbiAgICAgICAgICB0aGlzLmFjdG9yLnVwZGF0ZUJpb1RpdGxlKGluZGV4LCBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCducGMtc2tpbGwtc2NvcmUnKSkge1xuICAgICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5za2lsbElkXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmIChza2lsbCkge1xuICAgICAgICAgICAgYXdhaXQgc2tpbGwudXBkYXRlVmFsdWUoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3NraWxsLW5hbWUnKSB8fFxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpdGVtLW5hbWUnKVxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5za2lsbElkXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICBhd2FpdCBpdGVtLnVwZGF0ZSh7IG5hbWU6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NoYXJhY3RlcmlzdGljLWZvcm11bGEnKSkge1xuICAgICAgICAgIC8vIHRlc3RlciBzaSBjJ2VzdCB2aWRlXG4gICAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAvLyBPbiB0ZXN0ZSBzaSBjJ2VzdCB1bmUgZm9ybXVsZSB2YWxpZGUgIVxuICAgICAgICAgICAgY29uc3QgciA9IG5ldyBSb2xsKGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpXG4gICAgICAgICAgICBhd2FpdCByLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICAgaWYgKGlzTmFOKHIudG90YWwpIHx8IHR5cGVvZiByLnRvdGFsID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JJbnZhbGlkRm9ybXVsYScsIHtcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBmb3JtRGF0YVtldmVudC5jdXJyZW50VGFyZ2V0Lm5hbWVdID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgICAnQ29DNy5FcnJvckludmFsaWQnXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2F0dHJpYnV0ZS12YWx1ZScpKSB7XG4gICAgICAgICAgLy8gdGVzdGVyIHNpIGxlIGRiIHJldG91cm7DqSBlc3QgdmFsaWRlLlxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUubGVuZ3RoICE9PSAwICYmXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5hdHRyaWJ1dGUnKS5kYXRhc2V0LmF0dHJpYiA9PT0gJ2RiJ1xuICAgICAgICAgICkge1xuICAgICAgICAgICAgLy8gT24gdGVzdGUgc2kgYydlc3QgdW5lIGZvcm11bGUgdmFsaWRlICFcbiAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgUm9sbChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgYXdhaXQgci5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICAgIGlmIChpc05hTihyLnRvdGFsKSB8fCByLnRvdGFsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9ySW52YWxpZEZvcm11bGEnLCB7XG4gICAgICAgICAgICAgICAgICB2YWx1ZTogZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgZm9ybURhdGFbZXZlbnQuY3VycmVudFRhcmdldC5uYW1lXSA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgJ0NvQzcuRXJyb3JJbnZhbGlkJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gbGUgc2tpbGwgYXNzb2Npw6kgYSBsJ2FybWUgYSBjaGFuZ8OpXG4gICAgICAgIC8vIFRPRE8gOiBGYWN0b3Jpc2F0aW9uIGR1IHN3aXRjaFxuICAgICAgICAvLyBUT0RPIDogcmVtcGxhY2VyIGxlcyBzdHJpbmdzIHBhciBkZSBjb25zdGFudGVzIChpdGVtLnNraWxsLm1haW4gLi4uKVxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3dlYXBvbi1za2lsbCcpKSB7XG4gICAgICAgICAgY29uc3Qgd2VhcG9uID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICAgICAgICApXG4gICAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQub3B0aW9uc1tldmVudC5jdXJyZW50VGFyZ2V0LnNlbGVjdGVkSW5kZXhdLnZhbHVlXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmICh3ZWFwb24gJiYgc2tpbGwpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsKSB7XG4gICAgICAgICAgICAgIGNhc2UgJ21haW4nOlxuICAgICAgICAgICAgICAgIGF3YWl0IHdlYXBvbi51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgJ2RhdGEuc2tpbGwubWFpbi5pZCc6IHNraWxsLmlkLFxuICAgICAgICAgICAgICAgICAgJ2RhdGEuc2tpbGwubWFpbi5uYW1lJzogc2tpbGwubmFtZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgY2FzZSAnYWx0ZXJuYXRpdic6XG4gICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAnZGF0YS5za2lsbC5hbHRlcm5hdGl2LmlkJzogc2tpbGwuaWQsXG4gICAgICAgICAgICAgICAgICAnZGF0YS5za2lsbC5hbHRlcm5hdGl2Lm5hbWUnOiBza2lsbC5uYW1lXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIExlIG5vbSBkZSBsJ2FybWUgYSBjaGFuZ8OpXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnd2VhcG9uLW5hbWUnKSkge1xuICAgICAgICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmICh3ZWFwb24pIHtcbiAgICAgICAgICAgIGF3YWl0IHdlYXBvbi51cGRhdGUoeyBuYW1lOiBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gbGVzIGRlZ2F0cyBkZSBsJ2FybWUgb24gY2hhbmfDqXMuXG4gICAgICAgIC8vIFRPRE8gOiBGYWN0b3Jpc2F0aW9uIGR1IHN3aXRjaFxuICAgICAgICAvLyBUT0RPIDogcmVtcGxhY2VyIGxlcyBzdHJpbmdzIHBhciBkZSBjb25zdGFudGVzIChpdGVtLnJhbmdlLm5vcm1hbCAuLi4pXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZGFtYWdlLWZvcm11bGEnKSkge1xuICAgICAgICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmICh3ZWFwb24pIHtcbiAgICAgICAgICAgIC8vIHRlc3RlIGxhIHZhbGlkaXTDqSBkZSBsYSBmb3JtdWxlLlxuICAgICAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgUm9sbChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgICBhd2FpdCByLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICAgICBpZiAoaXNOYU4oci50b3RhbCkgfHwgdHlwZW9mIHIudG90YWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUgKyAnIGlzIG5vdCBhIHZhbGlkIGZvcm11bGEnXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnJhbmdlKSB7XG4gICAgICAgICAgICAgICAgICBjYXNlICdub3JtYWwnOlxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAnZGF0YS5yYW5nZS5ub3JtYWwuZGFtYWdlJzogZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgY2FzZSAnbG9uZyc6XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHdlYXBvbi51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICdkYXRhLnJhbmdlLmxvbmcuZGFtYWdlJzogZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgY2FzZSAnZXh0cmVtZSc6XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHdlYXBvbi51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICdkYXRhLnJhbmdlLmV4dHJlbWUuZGFtYWdlJzogZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucmFuZ2UpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdub3JtYWwnOlxuICAgICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICdkYXRhLnJhbmdlLm5vcm1hbC5kYW1hZ2UnOiBudWxsXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdsb25nJzpcbiAgICAgICAgICAgICAgICAgIGF3YWl0IHdlYXBvbi51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgICAnZGF0YS5yYW5nZS5sb25nLmRhbWFnZSc6IG51bGxcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ2V4dHJlbWUnOlxuICAgICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICdkYXRhLnJhbmdlLmV4dHJlbWUuZGFtYWdlJzogbnVsbFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LnVwZGF0ZShmb3JtRGF0YSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIG1lcmdlT2JqZWN0ICovXG5cbmltcG9ydCB7IENvQzdBY3RvclNoZWV0IH0gZnJvbSAnLi9iYXNlLmpzJ1xuaW1wb3J0IHsgUm9sbERpYWxvZyB9IGZyb20gJy4uLy4uL2FwcHMvcm9sbC1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb0M3UGFyc2VyIH0gZnJvbSAnLi4vLi4vYXBwcy9wYXJzZXIuanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi4vLi4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBTYW5DaGVja0NhcmQgfSBmcm9tICcuLi8uLi9jaGF0L2NhcmRzL3Nhbi1jaGVjay5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEFjdG9yU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdOUENTaGVldCBleHRlbmRzIENvQzdBY3RvclNoZWV0IHtcbiAgLyoqXG4gICAqIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBBY3RvciBzaGVldFxuICAgKiBUaGUgcHJlcGFyZWQgZGF0YSBvYmplY3QgY29udGFpbnMgYm90aCB0aGUgYWN0b3IgZGF0YSBhcyB3ZWxsIGFzIGFkZGl0aW9uYWwgc2hlZXQgb3B0aW9uc1xuICAgKi9cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuXG4gICAgLy8gVE9ETyA6IGRvIHdlIG5lZWQgdGhhdCA/XG4gICAgZGF0YS5hbGxvd0Zvcm11bGEgPSB0cnVlXG4gICAgZGF0YS5kaXNwbGF5Rm9ybXVsYSA9IHRoaXMuYWN0b3IuZ2V0QWN0b3JGbGFnKCdkaXNwbGF5Rm9ybXVsYScpXG4gICAgaWYgKGRhdGEuZGlzcGxheUZvcm11bGEgPT09IHVuZGVmaW5lZCkgZGF0YS5kaXNwbGF5Rm9ybXVsYSA9IGZhbHNlXG4gICAgLy8gYXdhaXQgdGhpcy5hY3Rvci5jcmVhdHVyZUluaXQoKTtcbiAgICBkYXRhLmhhc1NhbiA9IGRhdGEuZGF0YS5hdHRyaWJzLnNhbi52YWx1ZSAhPT0gbnVsbFxuICAgIGRhdGEuaGFzTXAgPSBkYXRhLmRhdGEuYXR0cmlicy5tcC52YWx1ZSAhPT0gbnVsbFxuICAgIGRhdGEuaGFzTHVjayA9IGRhdGEuZGF0YS5hdHRyaWJzLmxjay52YWx1ZSAhPT0gbnVsbFxuXG4gICAgZGF0YS5pc0NyZWF0dXJlID0gZmFsc2VcblxuICAgIGRhdGEuc2hvd0ludmVudG9yeUl0ZW1zID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkYXRhLml0ZW1zQnlUeXBlLCAnaXRlbScpIHx8XG4gICAgICAhZGF0YS5kYXRhLmZsYWdzLmxvY2tlZFxuICAgIGRhdGEuc2hvd0ludmVudG9yeUJvb2tzID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkYXRhLml0ZW1zQnlUeXBlLCAnYm9vaycpIHx8XG4gICAgICAhZGF0YS5kYXRhLmZsYWdzLmxvY2tlZFxuICAgIGRhdGEuc2hvd0ludmVudG9yeVNwZWxscyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZGF0YS5pdGVtc0J5VHlwZSwgJ3NwZWxsJykgfHxcbiAgICAgICFkYXRhLmRhdGEuZmxhZ3MubG9ja2VkXG4gICAgZGF0YS5zaG93SW52ZW50b3J5VGFsZW50cyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZGF0YS5pdGVtc0J5VHlwZSwgJ3RhbGVudCcpIHx8XG4gICAgICAhZGF0YS5kYXRhLmZsYWdzLmxvY2tlZFxuICAgIGRhdGEuc2hvd0ludmVudG9yeVN0YXR1c2VzID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkYXRhLml0ZW1zQnlUeXBlLCAnc3RhdHVzJykgfHxcbiAgICAgICFkYXRhLmRhdGEuZmxhZ3MubG9ja2VkXG4gICAgZGF0YS5zaG93SW52ZW50b3J5V2VhcG9ucyA9IGZhbHNlXG4gICAgZGF0YS5oYXNJbnZlbnRvcnkgPVxuICAgICAgZGF0YS5zaG93SW52ZW50b3J5SXRlbXMgfHxcbiAgICAgIGRhdGEuc2hvd0ludmVudG9yeUJvb2tzIHx8XG4gICAgICBkYXRhLnNob3dJbnZlbnRvcnlTcGVsbHMgfHxcbiAgICAgIGRhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgfHxcbiAgICAgIGRhdGEuc2hvd0ludmVudG9yeVN0YXR1c2VzIHx8XG4gICAgICBkYXRhLnNob3dJbnZlbnRvcnlXZWFwb25zXG5cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIGh0bWwuZmluZCgnLnJvbGwtc2FuJykuY2xpY2sodGhpcy5fb25TYW5DaGVjay5iaW5kKHRoaXMpKVxuICAgIGlmICh0aGlzLmFjdG9yLmlzT3duZXIpIHtcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJ1tuYW1lPVwiZGF0YS5hdHRyaWJzLmhwLnZhbHVlXCJdJylcbiAgICAgICAgLmNoYW5nZShldmVudCA9PiB0aGlzLmFjdG9yLnNldEhlYWx0aFN0YXR1c01hbnVhbGx5KGV2ZW50KSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25TYW5DaGVjayAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgaWYgKFxuICAgICAgIXRoaXMuYWN0b3IuZGF0YS5kYXRhLnNwZWNpYWwuc2FuTG9zcy5jaGVja1Bhc3NlZCAmJlxuICAgICAgIXRoaXMuYWN0b3IuZGF0YS5kYXRhLnNwZWNpYWwuc2FuTG9zcy5jaGVja0ZhaWxsZWRcbiAgICApIHtcbiAgICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMuaW5mbygnTm8gc2FuaXR5IGxvc3MgdmFsdWUnKTtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAoXG4gICAgICAoZXZlbnQubWV0YUtleSB8fFxuICAgICAgICBldmVudC5jdHJsS2V5IHx8XG4gICAgICAgIGV2ZW50LmtleUNvZGUgPT09IDkxIHx8XG4gICAgICAgIGV2ZW50LmtleUNvZGUgPT09IDIyNCkgJiZcbiAgICAgIGdhbWUudXNlci5pc0dNXG4gICAgKSB7XG4gICAgICBsZXQgZGlmZmljdWx0eSwgbW9kaWZpZXJcbiAgICAgIGlmICghZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZSh7XG4gICAgICAgICAgZGlzYWJsZUZsYXREaWNlTW9kaWZpZXI6IHRydWVcbiAgICAgICAgfSlcbiAgICAgICAgaWYgKHVzYWdlKSB7XG4gICAgICAgICAgbW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgICAgICBkaWZmaWN1bHR5ID0gTnVtYmVyKHVzYWdlLmdldCgnZGlmZmljdWx0eScpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBsaW5rRGF0YSA9IHtcbiAgICAgICAgY2hlY2s6ICdzYW5sb3NzJyxcbiAgICAgICAgc2FuTWluOiB0aGlzLmFjdG9yLmRhdGEuZGF0YS5zcGVjaWFsLnNhbkxvc3MuY2hlY2tQYXNzZWQsXG4gICAgICAgIHNhbk1heDogdGhpcy5hY3Rvci5kYXRhLmRhdGEuc3BlY2lhbC5zYW5Mb3NzLmNoZWNrRmFpbGxlZFxuICAgICAgfVxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJykgPT09ICdibGluZHJvbGwnKSB7XG4gICAgICAgIGxpbmtEYXRhLmJsaW5kID0gdHJ1ZVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBtb2RpZmllciAhPT0gJ3VuZGVmaW5lZCcpIGxpbmtEYXRhLm1vZGlmaWVyID0gbW9kaWZpZXJcbiAgICAgIGlmICh0eXBlb2YgZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCcpIGxpbmtEYXRhLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgICBjb25zdCBsaW5rID0gQ29DN1BhcnNlci5jcmVhdGVDb0M3TGluayhsaW5rRGF0YSlcbiAgICAgIGlmIChsaW5rKSB7XG4gICAgICAgIGNoYXRIZWxwZXIuY3JlYXRlTWVzc2FnZShcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWVzc2FnZUNoZWNrUmVxdWVzdGVkV2FpdCcsIHtcbiAgICAgICAgICAgIGNoZWNrOiBsaW5rXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBTYW5DaGVja0NhcmQuY2hlY2tUYXJnZXRzKHRoaXMuYWN0b3IudG9rZW5LZXksIGV2ZW50LnNoaWZ0S2V5KVxuICAgIH1cbiAgfVxuXG4gIG9uQ2xvc2VTaGVldCAoKSB7XG4gICAgdGhpcy5hY3Rvci51bnNldEFjdG9yRmxhZygnZGlzcGxheUZvcm11bGEnKVxuICAgIHN1cGVyLm9uQ2xvc2VTaGVldCgpXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgQWN0b3IgU2hlZXRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG5cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnYWN0b3InLCAnbnBjJ10sXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLml0ZW0nLCBkcm9wU2VsZWN0b3I6IG51bGwgfV0sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL25wYy1zaGVldC5odG1sJyxcbiAgICAgIHdpZHRoOiA1ODAsXG4gICAgICByZXNpemFibGU6IHRydWVcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEltcGxlbWVudCB0aGUgX3VwZGF0ZU9iamVjdCBtZXRob2QgYXMgcmVxdWlyZWQgYnkgdGhlIHBhcmVudCBjbGFzcyBzcGVjXG4gICAqIFRoaXMgZGVmaW5lcyBob3cgdG8gdXBkYXRlIHRoZSBzdWJqZWN0IG9mIHRoZSBmb3JtIHdoZW4gdGhlIGZvcm0gaXMgc3VibWl0dGVkXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QpIHtcbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjaGFyYWN0ZXJpc3RpYy1zY29yZScpKSB7XG4gICAgICAgICAgdGhpcy5hY3Rvci5zZXRDaGFyYWN0ZXJpc3RpYyhcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQubmFtZSxcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICApXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHN1cGVyLl91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKVxuICB9XG5cbiAgc3RhdGljIGZvcmNlQXV0byAoYXBwLCBodG1sKSB7XG4gICAgY29uc3QgY2VsbCA9IGh0bWwuZmluZCgnLnBhbm5lbC5leHBhbmRlZC5yZXNpemVkZWRpdG9yJylcbiAgICBpZiAoY2VsbC5sZW5ndGgpIHtcbiAgICAgIGNlbGwuaGVpZ2h0KFxuICAgICAgICBNYXRoLm1heCgyMDAsIChodG1sLmhlaWdodCgpIC0gY2VsbC5wb3NpdGlvbigpLnRvcCAtIDgpIC8gY2VsbC5sZW5ndGgpICtcbiAgICAgICAgICAncHgnXG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgc2V0UG9zaXRpb24gKGEpIHtcbiAgICBzdXBlci5zZXRQb3NpdGlvbihhKVxuICAgIENvQzdOUENTaGVldC5mb3JjZUF1dG8oYSwgdGhpcy5fZWxlbWVudClcbiAgfVxufVxuIiwiLyogZ2xvYmFsIG1lcmdlT2JqZWN0ICovXG5pbXBvcnQgeyBDb0M3TlBDU2hlZXQgfSBmcm9tICcuL25wYy1zaGVldC5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEFjdG9yU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdDcmVhdHVyZVNoZWV0IGV4dGVuZHMgQ29DN05QQ1NoZWV0IHtcbiAgLyoqXG4gICAqIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBBY3RvciBzaGVldFxuICAgKiBUaGUgcHJlcGFyZWQgZGF0YSBvYmplY3QgY29udGFpbnMgYm90aCB0aGUgYWN0b3IgZGF0YSBhcyB3ZWxsIGFzIGFkZGl0aW9uYWwgc2hlZXQgb3B0aW9uc1xuICAgKi9cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuICAgIGRhdGEuaXNDcmVhdHVyZSA9IHRydWVcbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgLyoqXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSBBY3RvciBTaGVldFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnYWN0b3InLCAnbnBjJywgJ2NyZWF0dXJlJ11cbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgRm9udEZhY2UsIGdhbWUsIG1lcmdlT2JqZWN0LCB1aSAqL1xuaW1wb3J0IHsgQ29DN0FjdG9yU2hlZXQgfSBmcm9tICcuL2Jhc2UuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q2hhcmFjdGVyU2hlZXRWMiBleHRlbmRzIENvQzdBY3RvclNoZWV0IHtcbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yLm5hbWUgPT09ICdDb0M3Q2hhcmFjdGVyU2hlZXRWMicpIHtcbiAgICAgIGlmICghdGhpcy5zdW1tYXJpemVkKSB0aGlzLnN1bW1hcml6ZWQgPSBmYWxzZVxuICAgICAgbGV0IGJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgICBidXR0b25zID0gW1xuICAgICAgICB7XG4gICAgICAgICAgbGFiZWw6IHRoaXMuc3VtbWFyaXplZFxuICAgICAgICAgICAgPyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWF4aW1pemUnKVxuICAgICAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU3VtbWFyaXplJyksXG4gICAgICAgICAgY2xhc3M6ICd0ZXN0LWV4dHJhLWljb24nLFxuICAgICAgICAgIGljb246IHRoaXMuc3VtbWFyaXplZFxuICAgICAgICAgICAgPyAnZmFzIGZhLXdpbmRvdy1tYXhpbWl6ZSdcbiAgICAgICAgICAgIDogJ2ZhcyBmYS13aW5kb3ctbWluaW1pemUnLFxuICAgICAgICAgIG9uY2xpY2s6IGV2ZW50ID0+IHRoaXMudG9nZ2xlU2hlZXRNb2RlKGV2ZW50KVxuICAgICAgICB9XG4gICAgICBdLmNvbmNhdChidXR0b25zKVxuICAgICAgcmV0dXJuIGJ1dHRvbnNcbiAgICB9XG4gICAgcmV0dXJuIHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgfVxuXG4gIGFzeW5jIHRvZ2dsZVNoZWV0TW9kZSAoZXZlbnQpIHtcbiAgICB0aGlzLnN1bW1hcml6ZWQgPSAhdGhpcy5zdW1tYXJpemVkXG4gICAgYXdhaXQgdGhpcy5jbG9zZSgpXG4gICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMuc3VtbWFyaXplZFxuICAgICAgPyB7XG4gICAgICAgICAgY2xhc3NlczogWydjb2M3JywgJ2FjdG9yJywgJ2NoYXJhY3RlcicsICdzdW1tYXJpemVkJ10sXG4gICAgICAgICAgaGVpZ2h0OiAyMDAsXG4gICAgICAgICAgcmVzaXphYmxlOiBmYWxzZSxcbiAgICAgICAgICB3aWR0aDogNzAwXG4gICAgICAgIH1cbiAgICAgIDogQ29DN0NoYXJhY3RlclNoZWV0VjIuZGVmYXVsdE9wdGlvbnNcbiAgICBhd2FpdCB0aGlzLnJlbmRlcih0cnVlLCBvcHRpb25zKVxuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuXG4gICAgaWYgKHR5cGVvZiB0aGlzLmFjdG9yLmdldEZsYWcoJ0NvQzcnLCAnc2tpbGxMaXN0TW9kZScpID09PSAndW5kZWZpbmVkJykge1xuICAgICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRGbGFnKCdDb0M3JywgJ3NraWxsTGlzdE1vZGUnLCBmYWxzZSlcbiAgICB9XG4gICAgZGF0YS5za2lsbExpc3RNb2RlVmFsdWUgPSB0aGlzLmFjdG9yLmdldEZsYWcoJ0NvQzcnLCAnc2tpbGxMaXN0TW9kZScpXG4gICAgaWYgKFxuICAgICAgdHlwZW9mIHRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdza2lsbFNob3dVbmNvbW1vbicpID09PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRGbGFnKCdDb0M3JywgJ3NraWxsU2hvd1VuY29tbW9uJywgdHJ1ZSlcbiAgICB9XG4gICAgZGF0YS5za2lsbFNob3dVbmNvbW1vbiA9IHRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdza2lsbFNob3dVbmNvbW1vbicpXG4gICAgZGF0YS5zaG93SWNvbnNPbmx5ID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2hvd0ljb25zT25seScpXG5cbiAgICBpZiAodGhpcy5hY3Rvci5vY2N1cGF0aW9uKSB7XG4gICAgICBkYXRhLmRhdGEuaW5mb3Mub2NjdXBhdGlvbiA9IHRoaXMuYWN0b3Iub2NjdXBhdGlvbi5uYW1lXG4gICAgICBkYXRhLmRhdGEuaW5mb3Mub2NjdXBhdGlvblNldCA9IHRydWVcbiAgICB9IGVsc2UgZGF0YS5kYXRhLmluZm9zLm9jY3VwYXRpb25TZXQgPSBmYWxzZVxuXG4gICAgaWYgKHRoaXMuYWN0b3IuYXJjaGV0eXBlKSB7XG4gICAgICBkYXRhLmRhdGEuaW5mb3MuYXJjaGV0eXBlID0gdGhpcy5hY3Rvci5hcmNoZXR5cGUubmFtZVxuICAgICAgZGF0YS5kYXRhLmluZm9zLmFyY2hldHlwZVNldCA9IHRydWVcbiAgICB9IGVsc2UgZGF0YS5kYXRhLmluZm9zLmFyY2hldHlwZVNldCA9IGZhbHNlXG5cbiAgICBkYXRhLnRvdGFsRXhwZXJpZW5jZSA9IHRoaXMuYWN0b3IuZXhwZXJpZW5jZVBvaW50c1xuICAgIGRhdGEudG90YWxPY2N1cGF0aW9uID0gdGhpcy5hY3Rvci5vY2N1cGF0aW9uUG9pbnRzU3BlbnRcbiAgICBkYXRhLmludmFsaWRPY2N1cGF0aW9uUG9pbnRzID1cbiAgICAgIE51bWJlcih0aGlzLmFjdG9yLm9jY3VwYXRpb25Qb2ludHNTcGVudCkgIT09XG4gICAgICBOdW1iZXIodGhpcy5hY3Rvci5kYXRhLmRhdGEuZGV2ZWxvcG1lbnQ/Lm9jY3VwYXRpb24pXG4gICAgZGF0YS50b3RhbEFyY2hldHlwZSA9IHRoaXMuYWN0b3IuYXJjaGV0eXBlUG9pbnRzU3BlbnRcbiAgICBkYXRhLmludmFsaWRBcmNoZXR5cGVQb2ludHMgPVxuICAgICAgTnVtYmVyKHRoaXMuYWN0b3IuYXJjaGV0eXBlUG9pbnRzU3BlbnQpICE9PVxuICAgICAgTnVtYmVyKHRoaXMuYWN0b3IuZGF0YS5kYXRhLmRldmVsb3BtZW50Py5hcmNoZXR5cGUpXG4gICAgZGF0YS50b3RhbFBlcnNvbmFsID0gdGhpcy5hY3Rvci5wZXJzb25hbFBvaW50c1NwZW50XG4gICAgZGF0YS5pbnZhbGlkUGVyc29uYWxQb2ludHMgPVxuICAgICAgTnVtYmVyKHRoaXMuYWN0b3IucGVyc29uYWxQb2ludHNTcGVudCkgIT09XG4gICAgICBOdW1iZXIodGhpcy5hY3Rvci5kYXRhLmRhdGEuZGV2ZWxvcG1lbnQ/LnBlcnNvbmFsKVxuICAgIGRhdGEuY3JlZGl0UmF0aW5nTWF4ID0gTnVtYmVyKFxuICAgICAgdGhpcy5hY3Rvci5vY2N1cGF0aW9uPy5kYXRhLmRhdGEuY3JlZGl0UmF0aW5nLm1heFxuICAgIClcbiAgICBkYXRhLmNyZWRpdFJhdGluZ01pbiA9IE51bWJlcihcbiAgICAgIHRoaXMuYWN0b3Iub2NjdXBhdGlvbj8uZGF0YS5kYXRhLmNyZWRpdFJhdGluZy5taW5cbiAgICApXG4gICAgZGF0YS5pbnZhbGlkQ3JlZGl0UmF0aW5nID1cbiAgICAgIHRoaXMuYWN0b3IuY3JlZGl0UmF0aW5nU2tpbGw/LmRhdGEuZGF0YS5hZGp1c3RtZW50cz8ub2NjdXBhdGlvbiA+XG4gICAgICAgIGRhdGEuY3JlZGl0UmF0aW5nTWF4IHx8XG4gICAgICB0aGlzLmFjdG9yLmNyZWRpdFJhdGluZ1NraWxsPy5kYXRhLmRhdGEuYWRqdXN0bWVudHM/Lm9jY3VwYXRpb24gPFxuICAgICAgICBkYXRhLmNyZWRpdFJhdGluZ01pblxuICAgIGRhdGEucHVscFRhbGVudENvdW50ID0gZGF0YS5pdGVtc0J5VHlwZS50YWxlbnQ/Lmxlbmd0aFxuICAgICAgPyBkYXRhLml0ZW1zQnlUeXBlLnRhbGVudD8ubGVuZ3RoXG4gICAgICA6IDBcbiAgICBkYXRhLm1pblB1bHBUYWxlbnRzID0gdGhpcy5hY3Rvci5hcmNoZXR5cGU/LmRhdGEuZGF0YS50YWxlbnRzXG4gICAgICA/IHRoaXMuYWN0b3IuYXJjaGV0eXBlPy5kYXRhLmRhdGEudGFsZW50c1xuICAgICAgOiAwXG4gICAgZGF0YS5pbnZhbGlkUHVscFRhbGVudHMgPSBkYXRhLnB1bHBUYWxlbnRDb3VudCA8IGRhdGEubWluUHVscFRhbGVudHNcblxuICAgIGRhdGEuaGFzU2tpbGxGbGFnZ2VkRm9yRXhwID0gdGhpcy5hY3Rvci5oYXNTa2lsbEZsYWdnZWRGb3JFeHBcblxuICAgIGRhdGEuYWxsb3dEZXZlbG9wbWVudCA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RldmVsb3BtZW50RW5hYmxlZCcpXG4gICAgZGF0YS5hbGxvd0NoYXJDcmVhdGlvbiA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnKVxuICAgIGRhdGEuZGV2ZWxvcG1lbnRSb2xsRm9yTHVjayA9IGdhbWUuc2V0dGluZ3MuZ2V0KFxuICAgICAgJ0NvQzcnLFxuICAgICAgJ2RldmVsb3BtZW50Um9sbEZvckx1Y2snXG4gICAgKVxuICAgIGRhdGEuc2hvd0RldlBhbm5lbCA9IGRhdGEuYWxsb3dEZXZlbG9wbWVudCB8fCBkYXRhLmFsbG93Q2hhckNyZWF0aW9uXG5cbiAgICBkYXRhLm1hbnVhbENyZWRpdCA9IHRoaXMuYWN0b3IuZ2V0QWN0b3JGbGFnKCdtYW51YWxDcmVkaXQnKVxuICAgIGlmICghZGF0YS5tYW51YWxDcmVkaXQpIHtcbiAgICAgIGRhdGEuY3JlZGl0ID0ge31cbiAgICAgIGxldCBmYWN0b3JcbiAgICAgIGxldCBtb25ldGFyeVN5bWJvbFxuICAgICAgaWYgKCFkYXRhLmRhdGEuY3JlZGl0KSB7XG4gICAgICAgIGZhY3RvciA9IDFcbiAgICAgICAgbW9uZXRhcnlTeW1ib2wgPSAnJCdcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZhY3RvciA9IHBhcnNlSW50KGRhdGEuZGF0YS5jcmVkaXQubXVsdGlwbGllcilcbiAgICAgICAgICA/IHBhcnNlSW50KGRhdGEuZGF0YS5jcmVkaXQubXVsdGlwbGllcilcbiAgICAgICAgICA6IDFcbiAgICAgICAgbW9uZXRhcnlTeW1ib2wgPSBkYXRhLmRhdGEuY3JlZGl0Lm1vbmV0YXJ5U3ltYm9sXG4gICAgICAgICAgPyBkYXRhLmRhdGEuY3JlZGl0Lm1vbmV0YXJ5U3ltYm9sXG4gICAgICAgICAgOiAnJCdcbiAgICAgIH1cblxuICAgICAgZGF0YS5jcmVkaXQuc3BlbmRpbmdMZXZlbCA9IGAke21vbmV0YXJ5U3ltYm9sfSR7dGhpcy5hY3Rvci5zcGVuZGluZ0xldmVsICpcbiAgICAgICAgZmFjdG9yfWBcbiAgICAgIGRhdGEuY3JlZGl0LmFzc2V0cyA9IGAke21vbmV0YXJ5U3ltYm9sfSR7dGhpcy5hY3Rvci5hc3NldHMgKiBmYWN0b3J9YFxuICAgICAgZGF0YS5jcmVkaXQuY2FzaCA9IGAke21vbmV0YXJ5U3ltYm9sfSR7dGhpcy5hY3Rvci5jYXNoICogZmFjdG9yfWBcbiAgICB9XG5cbiAgICBkYXRhLm9uZUJsb2NrQmFja1N0b3J5ID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb25lQmxvY2tCYWNrc3RvcnknKVxuXG4gICAgZGF0YS5zdW1tYXJpemVkID0gdGhpcy5zdW1tYXJpemVkXG4gICAgZGF0YS5za2lsbExpc3QgPSBbXVxuICAgIGxldCBwcmV2aW91c1NwZWMgPSAnJ1xuICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgZGF0YS5za2lsbHMpIHtcbiAgICAgIGlmIChkYXRhLnNraWxsU2hvd1VuY29tbW9uIHx8ICFza2lsbC5kYXRhLnByb3BlcnRpZXMucmFyaXR5KSB7XG4gICAgICAgIGlmIChza2lsbC5kYXRhLnByb3BlcnRpZXMuc3BlY2lhbCkge1xuICAgICAgICAgIGlmIChwcmV2aW91c1NwZWMgIT09IHNraWxsLmRhdGEuc3BlY2lhbGl6YXRpb24pIHtcbiAgICAgICAgICAgIHByZXZpb3VzU3BlYyA9IHNraWxsLmRhdGEuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgIGRhdGEuc2tpbGxMaXN0LnB1c2goe1xuICAgICAgICAgICAgICBpc1NwZWNpYWxpemF0aW9uOiB0cnVlLFxuICAgICAgICAgICAgICBuYW1lOiBza2lsbC5kYXRhLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkYXRhLnNraWxsTGlzdC5wdXNoKHNraWxsKVxuICAgICAgfVxuICAgIH1cbiAgICBkYXRhLnNraWxsc0J5VmFsdWUgPSBbLi4uZGF0YS5za2lsbHNdLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBiLmRhdGEudmFsdWUgLSBhLmRhdGEudmFsdWVcbiAgICB9KVxuICAgIGRhdGEudG9wU2tpbGxzID0gWy4uLmRhdGEuc2tpbGxzQnlWYWx1ZV0uc2xpY2UoMCwgMTQpXG4gICAgZGF0YS5za2lsbHNCeVZhbHVlID0gZGF0YS5za2lsbHNCeVZhbHVlLmZpbHRlcihcbiAgICAgIHNraWxsID0+IGRhdGEuc2tpbGxTaG93VW5jb21tb24gfHwgIXNraWxsLmRhdGEucHJvcGVydGllcy5yYXJpdHlcbiAgICApXG4gICAgZGF0YS50b3BXZWFwb25zID0gWy4uLmRhdGEubWVsZWVXcG4sIC4uLmRhdGEucmFuZ2VXcG5dXG4gICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICByZXR1cm4gYS5kYXRhLnNraWxsLm1haW4/LnZhbHVlIC0gYi5kYXRhLnNraWxsLm1haW4/LnZhbHVlXG4gICAgICB9KVxuICAgICAgLnJldmVyc2UoKVxuICAgICAgLnNsaWNlKDAsIDMpXG4gICAgZGF0YS5kaXNwbGF5UGxheWVyTmFtZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KFxuICAgICAgJ0NvQzcnLFxuICAgICAgJ2Rpc3BsYXlQbGF5ZXJOYW1lT25TaGVldCdcbiAgICApXG4gICAgaWYgKGRhdGEuZGlzcGxheVBsYXllck5hbWUgJiYgIWRhdGEuZGF0YS5pbmZvcy5wbGF5ZXJuYW1lKSB7XG4gICAgICBjb25zdCB1c2VyID0gdGhpcy5hY3Rvci5jaGFyYWN0ZXJVc2VyXG4gICAgICBpZiAodXNlcikge1xuICAgICAgICBkYXRhLmRhdGEuaW5mb3MucGxheWVybmFtZSA9IHVzZXIubmFtZVxuICAgICAgfVxuICAgIH1cblxuICAgIGRhdGEuc2tpbGxMaXN0RW1wdHkgPSBkYXRhLnNraWxscy5sZW5ndGggPT09IDBcblxuICAgIGRhdGEuc2hvd0ludmVudG9yeUl0ZW1zID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkYXRhLml0ZW1zQnlUeXBlLCAnaXRlbScpIHx8XG4gICAgICAhZGF0YS5kYXRhLmZsYWdzLmxvY2tlZFxuICAgIGRhdGEuc2hvd0ludmVudG9yeUJvb2tzID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkYXRhLml0ZW1zQnlUeXBlLCAnYm9vaycpIHx8XG4gICAgICAhZGF0YS5kYXRhLmZsYWdzLmxvY2tlZFxuICAgIGRhdGEuc2hvd0ludmVudG9yeVNwZWxscyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZGF0YS5pdGVtc0J5VHlwZSwgJ3NwZWxsJykgfHxcbiAgICAgICFkYXRhLmRhdGEuZmxhZ3MubG9ja2VkXG4gICAgZGF0YS5zaG93SW52ZW50b3J5VGFsZW50cyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZGF0YS5pdGVtc0J5VHlwZSwgJ3RhbGVudCcpIHx8XG4gICAgICAhZGF0YS5kYXRhLmZsYWdzLmxvY2tlZFxuICAgIGRhdGEuc2hvd0ludmVudG9yeVN0YXR1c2VzID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkYXRhLml0ZW1zQnlUeXBlLCAnc3RhdHVzJykgfHxcbiAgICAgICFkYXRhLmRhdGEuZmxhZ3MubG9ja2VkXG5cbiAgICBkYXRhLmhhc0ludmVudG9yeSA9XG4gICAgICBkYXRhLnNob3dJbnZlbnRvcnlJdGVtcyB8fFxuICAgICAgZGF0YS5zaG93SW52ZW50b3J5Qm9va3MgfHxcbiAgICAgIGRhdGEuc2hvd0ludmVudG9yeVNwZWxscyB8fFxuICAgICAgZGF0YS5zaG93SW52ZW50b3J5VGFsZW50cyB8fFxuICAgICAgZGF0YS5zaG93SW52ZW50b3J5U3RhdHVzZXMgfHxcbiAgICAgIGRhdGEuc2hvd0ludmVudG9yeVdlYXBvbnNcblxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIDVlIEFjdG9yIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldFYyJywgJ2FjdG9yJywgJ2NoYXJhY3RlciddLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9jaGFyYWN0ZXIvaW5kZXguaHRtbCcsXG4gICAgICB3aWR0aDogNjg3LFxuICAgICAgaGVpZ2h0OiA2MjMsXG4gICAgICByZXNpemFibGU6IHRydWUsXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLml0ZW0nLCBkcm9wU2VsZWN0b3I6IG51bGwgfV0sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXYnLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnc2tpbGxzJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGlmICh0aGlzLmFjdG9yLmlzT3duZXIpIHtcbiAgICAgIC8vIE1PRElGOiAwLjgueCBvd25lciBkZXByZWNhdGVkICA9PiBpc093bmVyXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuc2tpbGwtbmFtZS5yb2xsYWJsZS5mbGFnZ2VkNGRldicpXG4gICAgICAgIC5jbGljayhhc3luYyBldmVudCA9PiB0aGlzLl9vblNraWxsRGV2KGV2ZW50KSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5yZXNldC1vY2N1cGF0aW9uJylcbiAgICAgICAgLmNsaWNrKGFzeW5jICgpID0+IGF3YWl0IHRoaXMuYWN0b3IucmVzZXRPY2N1cGF0aW9uKCkpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcucmVzZXQtYXJjaGV0eXBlJylcbiAgICAgICAgLmNsaWNrKGFzeW5jICgpID0+IGF3YWl0IHRoaXMuYWN0b3IucmVzZXRBcmNoZXR5cGUoKSlcbiAgICAgIGh0bWwuZmluZCgnLm9wZW4taXRlbScpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbURldGFpbHMoZXZlbnQpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnW25hbWU9XCJkYXRhLmF0dHJpYnMuaHAudmFsdWVcIl0nKVxuICAgICAgICAuY2hhbmdlKGV2ZW50ID0+IHRoaXMuYWN0b3Iuc2V0SGVhbHRoU3RhdHVzTWFudWFsbHkoZXZlbnQpKVxuICAgICAgaHRtbC5maW5kKCcudG9nZ2xlLWxpc3QtbW9kZScpLmNsaWNrKGV2ZW50ID0+IHtcbiAgICAgICAgdGhpcy50b2dnbGVTa2lsbExpc3RNb2RlKGV2ZW50KVxuICAgICAgfSlcbiAgICAgIGh0bWwuZmluZCgnLnRvZ2dsZS11bmNvbW1vbi1tb2RlJykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgICB0aGlzLnRvZ2dsZVNraWxsVW5jb21tb25Nb2RlKGV2ZW50KVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBhc3luYyB0b2dnbGVTa2lsbExpc3RNb2RlIChldmVudCkge1xuICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0RmxhZyhcbiAgICAgICdDb0M3JyxcbiAgICAgICdza2lsbExpc3RNb2RlJyxcbiAgICAgICF0aGlzLmFjdG9yLmdldEZsYWcoJ0NvQzcnLCAnc2tpbGxMaXN0TW9kZScpXG4gICAgKVxuICAgIHJldHVybiBhd2FpdCB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgdG9nZ2xlU2tpbGxVbmNvbW1vbk1vZGUgKGV2ZW50KSB7XG4gICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRGbGFnKFxuICAgICAgJ0NvQzcnLFxuICAgICAgJ3NraWxsU2hvd1VuY29tbW9uJyxcbiAgICAgICF0aGlzLmFjdG9yLmdldEZsYWcoJ0NvQzcnLCAnc2tpbGxTaG93VW5jb21tb24nKVxuICAgIClcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIF9vblNraWxsRGV2IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBza2lsbElkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgYXdhaXQgdGhpcy5hY3Rvci5kZXZlbG9wU2tpbGwoc2tpbGxJZCwgZXZlbnQuc2hpZnRLZXkpXG4gIH1cblxuICBfb25JdGVtRGV0YWlscyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgdHlwZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC50eXBlXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3JbdHlwZV1cbiAgICBpZiAoaXRlbSkgaXRlbS5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIHN0YXRpYyByZW5kZXJTaGVldCAoc2hlZXQpIHtcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb3ZlcnJpZGVTaGVldEFydHdvcmsnKSkge1xuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFdvcmtTaGVldEJhY2tncm91bmQnKSkge1xuICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAnLS1tYWluLXNoZWV0LWJnJyxcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrU2hlZXRCYWNrZ3JvdW5kJylcbiAgICAgICAgKVxuICAgICAgICAvLyBjb25zdCBib3JkZXJJbWFnZSA9IHNoZWV0LmVsZW1lbnQuZmluZCgnZm9ybScpLmNzcygnYm9yZGVyLWltYWdlJyk7XG4gICAgICAgIC8vIHNoZWV0LmVsZW1lbnQuZmluZCgnZm9ybScpLmNzcygnYm9yZGVyLWltYWdlJywgJycpO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZFR5cGUnKSAhPT0gJ3NsaWNlJ1xuICAgICAgICApIHtcbiAgICAgICAgICBsZXQgc3R5bGVTaGVldCwgY3NzUnVsZUluZGV4XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkb2N1bWVudC5zdHlsZVNoZWV0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGRvY3VtZW50LnN0eWxlU2hlZXRzW2ldLmhyZWY/LmVuZHNXaXRoKCdjb2M3Zy5jc3MnKSkge1xuICAgICAgICAgICAgICBzdHlsZVNoZWV0ID0gZG9jdW1lbnQuc3R5bGVTaGVldHNbaV1cbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc3R5bGVTaGVldCkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHlsZVNoZWV0LnJ1bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBzdHlsZVNoZWV0LnJ1bGVzW2ldLnNlbGVjdG9yVGV4dCA9PT0gJy5zaGVldFYyLmNoYXJhY3RlciBmb3JtJ1xuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBjc3NSdWxlSW5kZXggPSBpXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY3NzUnVsZUluZGV4KSB7XG4gICAgICAgICAgICBjb25zdCBDU1NTdHlsZSA9IHN0eWxlU2hlZXQucnVsZXNbY3NzUnVsZUluZGV4XS5zdHlsZVxuICAgICAgICAgICAgQ1NTU3R5bGUucmVtb3ZlUHJvcGVydHkoJ2JvcmRlci1pbWFnZScpXG4gICAgICAgICAgICBDU1NTdHlsZS5zZXRQcm9wZXJ0eShcbiAgICAgICAgICAgICAgJ2JhY2tncm91bmQnLFxuICAgICAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrU2hlZXRCYWNrZ3JvdW5kJylcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHN3aXRjaCAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZFR5cGUnKSkge1xuICAgICAgICAgICAgICBjYXNlICdhdXRvJzpcbiAgICAgICAgICAgICAgICBDU1NTdHlsZS5zZXRQcm9wZXJ0eSgnYmFja2dyb3VuZC1zaXplJywgJ2F1dG8nKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIGNhc2UgJ2NvbnRhaW4nOlxuICAgICAgICAgICAgICAgIENTU1N0eWxlLnNldFByb3BlcnR5KCdiYWNrZ3JvdW5kLXNpemUnLCAnY29udGFpbicpXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgY2FzZSAnY292ZXInOlxuICAgICAgICAgICAgICAgIENTU1N0eWxlLnNldFByb3BlcnR5KCdiYWNrZ3JvdW5kLXNpemUnLCAnY292ZXInKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgQ1NTU3R5bGUuc2V0UHJvcGVydHkoJ2JhY2tncm91bmQtc2l6ZScsICdhdXRvJylcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZCcpLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICdudWxsJ1xuICAgICAgKSB7XG4gICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKFxuICAgICAgICAgICctLW1haW4tc2hlZXQtYmcnLFxuICAgICAgICAgIFwidXJsKCAnLi9hc3NldHMvaW1hZ2VzL3ZvaWQud2VicCcpXCJcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya090aGVyU2hlZXRCYWNrZ3JvdW5kJykpIHtcbiAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgJy0tb3RoZXItc2hlZXQtYmcnLFxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFdvcmtPdGhlclNoZWV0QmFja2dyb3VuZCcpXG4gICAgICAgIClcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIGdhbWUuc2V0dGluZ3NcbiAgICAgICAgICAuZ2V0KCdDb0M3JywgJ2FydFdvcmtPdGhlclNoZWV0QmFja2dyb3VuZCcpXG4gICAgICAgICAgLnRvTG93ZXJDYXNlKCkgPT09ICdudWxsJ1xuICAgICAgKSB7XG4gICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKFxuICAgICAgICAgICctLW90aGVyLXNoZWV0LWJnJyxcbiAgICAgICAgICBcInVybCggJy4vYXNzZXRzL2ltYWdlcy92b2lkLndlYnAnKVwiXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtTaGVldEltYWdlJykpIHtcbiAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgJy0tbWFpbi1zaGVldC1pbWFnZScsXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya1NoZWV0SW1hZ2UnKVxuICAgICAgICApXG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrU2hlZXRJbWFnZScpLnRvTG93ZXJDYXNlKCkgPT09ICdudWxsJ1xuICAgICAgKSB7XG4gICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKFxuICAgICAgICAgICctLW1haW4tc2hlZXQtaW1hZ2UnLFxuICAgICAgICAgIFwidXJsKCAnLi9hc3NldHMvaW1hZ2VzL3ZvaWQud2VicCcpXCJcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya0Zyb250Q29sb3InKSkge1xuICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAnLS1tYWluLXNoZWV0LWZyb250LWNvbG9yJyxcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrRnJvbnRDb2xvcicpXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrQmFja2dyb3VuZENvbG9yJykpIHtcbiAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgJy0tbWFpbi1zaGVldC1iYWNrLWNvbG9yJyxcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrQmFja2dyb3VuZENvbG9yJylcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtJbnRlcmFjdGl2ZUNvbG9yJykpIHtcbiAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgJy0tbWFpbi1zaGVldC1pbnRlcmFjdGl2ZS1jb2xvcicsXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya0ludGVyYWN0aXZlQ29sb3InKVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAoIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtGaXhlZFNraWxsTGVuZ3RoJykpIHtcbiAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoJy0tc2tpbGwtbGVuZ3RoJywgJ2F1dG8nKVxuICAgICAgICBzaGVldC5lbGVtZW50LmNzcygnLS1za2lsbC1zcGVjaWFsaXphdGlvbi1sZW5ndGgnLCAnYXV0bycpXG4gICAgICB9XG5cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrTWFpbkZvbnQnKSkge1xuICAgICAgICBjb25zdCBjdXN0b21TaGVldEZvbnQgPSBuZXcgRm9udEZhY2UoXG4gICAgICAgICAgJ2N1c3RvbVNoZWV0Rm9udCcsXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250JylcbiAgICAgICAgKVxuICAgICAgICBjdXN0b21TaGVldEZvbnRcbiAgICAgICAgICAubG9hZCgpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGxvYWRlZEZhY2UpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmZvbnRzLmFkZChsb2FkZWRGYWNlKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnJvcilcbiAgICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250Qm9sZCcpKSB7XG4gICAgICAgIGNvbnN0IGN1c3RvbVNoZWV0Q3Vyc2l2ZUZvbnQgPSBuZXcgRm9udEZhY2UoXG4gICAgICAgICAgJ2N1c3RvbVNoZWV0Rm9udCcsXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250Qm9sZCcpLFxuICAgICAgICAgIHsgd2VpZ2h0OiAnYm9sZCcgfVxuICAgICAgICApXG4gICAgICAgIGN1c3RvbVNoZWV0Q3Vyc2l2ZUZvbnRcbiAgICAgICAgICAubG9hZCgpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGxvYWRlZEZhY2UpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmZvbnRzLmFkZChsb2FkZWRGYWNlKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnJvcilcbiAgICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250U2l6ZScpKSB7XG4gICAgICAgIGNvbnN0IHNpemUgPSBgJHtnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrTWFpbkZvbnRTaXplJyl9cHhgXG4gICAgICAgIGlmIChzaXplICE9PSAkKCc6cm9vdCcpLmNzcygnZm9udC1zaXplJykpIHtcbiAgICAgICAgICAkKCc6cm9vdCcpLmNzcygnZm9udC1zaXplJywgc2l6ZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIGdhbWUgKi9cblxuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi9jaGVjay5qcydcbmV4cG9ydCBjbGFzcyBDb0M3Q29tYmF0IHtcbiAgc3RhdGljIHJlbmRlckNvbWJhdFRyYWNrZXIgKGFwcCwgaHRtbCwgZGF0YSkge1xuICAgIGNvbnN0IGN1cnJlbnRDb21iYXQgPSBkYXRhLmNvbWJhdHNbZGF0YS5jdXJyZW50SW5kZXggLSAxXVxuICAgIGlmICghY3VycmVudENvbWJhdCkgcmV0dXJuXG5cbiAgICAvLyBUT0RPIDogU2kgbGUgY29tYmF0IGVzdCBkZWphIGRlYnV0w6kgYXZhbnQgY2hhcmdlbWVudCBsYSBmb25jdGlvbiBkJ2luaXRpYXRpdmUgcG9pbnRlIHZlcnMgbCdhbmNpZW5uZS5cbiAgICAvLyBsYSBmb25jdGlvbiBhdHRyaWJ1w6llIGVzdCBkYXRhLmNvbWJhdC5yb2xsSW5pdGlhdGl2ZVxuICAgIGh0bWwuZmluZCgnLmNvbWJhdGFudCcpLmVhY2goKGksIGVsKSA9PiB7XG4gICAgICAvLyBpZiggZ2FtZS5jb21iYXQuc3RhcnRlZCl7XG5cbiAgICAgIGNvbnN0IGNvbWJJZCA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1jb21iYXRhbnQtaWQnKVxuICAgICAgY29uc3QgY29tYmF0YW50Q29udHJvbHNEaXYgPSBlbC5xdWVyeVNlbGVjdG9yKCcuY29tYmF0YW50LWNvbnRyb2xzJylcbiAgICAgIC8vIGNvbnN0IGNvbWJhdGFudCA9IGdhbWUuY29tYmF0LmdldENvbWJhdGFudChjb21iSWQpO1xuICAgICAgY29uc3QgY29tYmF0YW50ID0gY3VycmVudENvbWJhdC5kYXRhLmNvbWJhdGFudHMuZ2V0KGNvbWJJZClcblxuICAgICAgaWYgKGNvbWJhdGFudC5nZXRGbGFnKCdDb0M3JywgJ2hhc0d1bicpKSB7XG4gICAgICAgICQoY29tYmF0YW50Q29udHJvbHNEaXYpLnByZXBlbmQoXG4gICAgICAgICAgYDxhIGNsYXNzPVwiY29tYmF0YW50LWNvbnRyb2wgYWN0aXZlIGFkZC1pbml0XCIgdGl0bGU9XCIke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICdDb0M3LlB1dEd1bkF3YXknXG4gICAgICAgICAgKX1cIiBkYXRhLWNvbnRyb2w9XCJkcmF3R3VuXCI+PGkgY2xhc3M9XCJnYW1lLWljb24gZ2FtZS1pY29uLXJldm9sdmVyXCI+PC9pPjwvYT5gXG4gICAgICAgIClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQoY29tYmF0YW50Q29udHJvbHNEaXYpLnByZXBlbmQoXG4gICAgICAgICAgYDxhIGNsYXNzPVwiY29tYmF0YW50LWNvbnRyb2wgYWRkLWluaXRcIiB0aXRsZT1cIiR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgJ0NvQzcuRHJhd0d1bidcbiAgICAgICAgICApfVwiIGRhdGEtY29udHJvbD1cImRyYXdHdW5cIj48aSBjbGFzcz1cImdhbWUtaWNvbiBnYW1lLWljb24tcmV2b2x2ZXJcIj48L2k+PC9hPmBcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdpbml0aWF0aXZlUnVsZScpID09PSAnb3B0aW9uYWwnICYmXG4gICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlJbml0QXNUZXh0JylcbiAgICAgICkge1xuICAgICAgICBpZiAoY29tYmF0YW50LmluaXRpYXRpdmUpIHtcbiAgICAgICAgICBjb25zdCB0b2tlbkluaXRpYXRpdmUgPSBlbC5xdWVyeVNlbGVjdG9yKCcudG9rZW4taW5pdGlhdGl2ZScpXG4gICAgICAgICAgY29uc3QgaW5pdGlhdGl2ZVRlc3QgPSB0b2tlbkluaXRpYXRpdmUucXVlcnlTZWxlY3RvcignLmluaXRpYXRpdmUnKVxuICAgICAgICAgIGNvbnN0IHJvbGwgPVxuICAgICAgICAgICAgMTAwICogY29tYmF0YW50LmluaXRpYXRpdmUgLSAxMDAgKiBNYXRoLmZsb29yKGNvbWJhdGFudC5pbml0aWF0aXZlKVxuICAgICAgICAgIHN3aXRjaCAoTWF0aC5mbG9vcihjb21iYXRhbnQuaW5pdGlhdGl2ZSkpIHtcbiAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mdW1ibGU6XG4gICAgICAgICAgICAgIHRva2VuSW5pdGlhdGl2ZS5jbGFzc0xpc3QuYWRkKCdmdW1ibGUnKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRnVtYmxlJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QudGl0bGUgPSByb2xsXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZmFpbHVyZTpcbiAgICAgICAgICAgICAgdG9rZW5Jbml0aWF0aXZlLmNsYXNzTGlzdC5hZGQoJ2ZhaWx1cmUnKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmFpbHVyZScpXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LnRpdGxlID0gcm9sbFxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXI6XG4gICAgICAgICAgICAgIHRva2VuSW5pdGlhdGl2ZS5jbGFzc0xpc3QuYWRkKCdyZWd1bGFyLXN1Y2Nlc3MnKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgJ0NvQzcuUm9sbERpZmZpY3VsdHlSZWd1bGFyJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LnRpdGxlID0gcm9sbFxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQ6XG4gICAgICAgICAgICAgIHRva2VuSW5pdGlhdGl2ZS5jbGFzc0xpc3QuYWRkKCdoYXJkLXN1Y2Nlc3MnKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgJ0NvQzcuUm9sbERpZmZpY3VsdHlIYXJkJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LnRpdGxlID0gcm9sbFxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWU6XG4gICAgICAgICAgICAgIHRva2VuSW5pdGlhdGl2ZS5jbGFzc0xpc3QuYWRkKCdleHRyZW1lLXN1Y2Nlc3MnKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgJ0NvQzcuUm9sbERpZmZpY3VsdHlFeHRyZW1lJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LnRpdGxlID0gcm9sbFxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsOlxuICAgICAgICAgICAgICB0b2tlbkluaXRpYXRpdmUuY2xhc3NMaXN0LmFkZCgnY3JpdGljYWwnKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgJ0NvQzcuUm9sbERpZmZpY3VsdHlDcml0aWNhbCdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC50aXRsZSA9IHJvbGxcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoY29tYmF0YW50LmluaXRpYXRpdmUgPCAwKSB7XG4gICAgICAgIGNvbnN0IGg0ID0gZWwucXVlcnlTZWxlY3RvcignLnRva2VuLW5hbWUnKS5xdWVyeVNlbGVjdG9yKCdoNCcpXG4gICAgICAgIGNvbnN0IHNwYW4gPSBlbC5xdWVyeVNlbGVjdG9yKCdzcGFuLmluaXRpYXRpdmUnKVxuICAgICAgICBoNC5zdHlsZS5mb250V2VpZ2h0ID0gJzkwMCdcbiAgICAgICAgaDQuc3R5bGUudGV4dFNoYWRvdyA9ICcxcHggMXB4IDRweCBkYXJrcmVkJ1xuICAgICAgICBzcGFuLnN0eWxlLmZvbnRXZWlnaHQgPSAnOTAwJ1xuICAgICAgICBzcGFuLnN0eWxlLnRleHRTaGFkb3cgPSAnMXB4IDFweCA0cHggZGFya3JlZCdcblxuICAgICAgICBlbC5zdHlsZS5jb2xvciA9ICdkYXJrcmVkJ1xuICAgICAgICBlbC5zdHlsZS5iYWNrZ3JvdW5kID0gJ2JsYWNrJ1xuICAgICAgICBlbC5zdHlsZS5mb250V2VpZ2h0ID0gJzkwMCdcbiAgICAgIH1cbiAgICB9KVxuICAgIGh0bWwuZmluZCgnLmFkZC1pbml0JykuY2xpY2soZXZlbnQgPT4gQ29DN0NvbWJhdC5fb25Ub2dnbGVHdW4oZXZlbnQpKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vblRvZ2dsZUd1biAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBjb25zdCBidG4gPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgbGkgPSBidG4uY2xvc2VzdCgnLmNvbWJhdGFudCcpXG4gICAgY29uc3QgYyA9IGF3YWl0IGdhbWUuY29tYmF0LmNvbWJhdGFudHMuZ2V0KGxpLmRhdGFzZXQuY29tYmF0YW50SWQpXG4gICAgaWYgKGMuYWN0b3IuaXNPd25lcikge1xuICAgICAgaWYgKGMuZ2V0RmxhZygnQ29DNycsICdoYXNHdW4nKSkge1xuICAgICAgICBhd2FpdCBjLnNldEZsYWcoJ0NvQzcnLCAnaGFzR3VuJywgZmFsc2UpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCBjLnNldEZsYWcoJ0NvQzcnLCAnaGFzR3VuJywgdHJ1ZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBuZXdJbml0ID0gYXdhaXQgYy5hY3Rvci5yb2xsSW5pdGlhdGl2ZSghIWMuZ2V0RmxhZygnQ29DNycsICdoYXNHdW4nKSlcbiAgICBpZiAoYy5nZXRGbGFnKCdDb0M3JywgJ2hhc0d1bicpKSB7XG4gICAgICBpZiAoYy5pbml0aWF0aXZlIDwgbmV3SW5pdCkgZ2FtZS5jb21iYXQuc2V0SW5pdGlhdGl2ZShjLmlkLCBuZXdJbml0KVxuICAgIH0gZWxzZSBnYW1lLmNvbWJhdC5zZXRJbml0aWF0aXZlKGMuaWQsIG5ld0luaXQpXG4gIH1cbn1cblxuLyoqXG4gKiBSb2xsIGluaXRpYXRpdmUgZm9yIG9uZSBvciBtdWx0aXBsZSBDb21iYXRhbnRzIHdpdGhpbiB0aGUgQ29tYmF0IGVudGl0eVxuICogQHBhcmFtIHtzdHJpbmd8c3RyaW5nW119IGlkcyAgICAgQSBDb21iYXRhbnQgaWQgb3IgQXJyYXkgb2YgaWRzIGZvciB3aGljaCB0byByb2xsXG4gKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnM9e31dICAgICBBZGRpdGlvbmFsIG9wdGlvbnMgd2hpY2ggbW9kaWZ5IGhvdyBpbml0aWF0aXZlIHJvbGxzIGFyZSBjcmVhdGVkIG9yIHByZXNlbnRlZC5cbiAqIEBwYXJhbSB7c3RyaW5nfG51bGx9IFtvcHRpb25zLmZvcm11bGFdICAgICAgICAgQSBub24tZGVmYXVsdCBpbml0aWF0aXZlIGZvcm11bGEgdG8gcm9sbC4gT3RoZXJ3aXNlIHRoZSBzeXN0ZW0gZGVmYXVsdCBpcyB1c2VkLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy51cGRhdGVUdXJuPXRydWVdICAgICBVcGRhdGUgdGhlIENvbWJhdCB0dXJuIGFmdGVyIGFkZGluZyBuZXcgaW5pdGlhdGl2ZSBzY29yZXMgdG8ga2VlcCB0aGUgdHVybiBvbiB0aGUgc2FtZSBDb21iYXRhbnQuXG4gKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnMubWVzc2FnZU9wdGlvbnM9e31dICAgIEFkZGl0aW9uYWwgb3B0aW9ucyB3aXRoIHdoaWNoIHRvIGN1c3RvbWl6ZSBjcmVhdGVkIENoYXQgTWVzc2FnZXNcbiAqIEByZXR1cm4ge1Byb21pc2U8Q29tYmF0Pn0gICAgICAgIEEgcHJvbWlzZSB3aGljaCByZXNvbHZlcyB0byB0aGUgdXBkYXRlZCBDb21iYXQgZW50aXR5IG9uY2UgdXBkYXRlcyBhcmUgY29tcGxldGUuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByb2xsSW5pdGlhdGl2ZSAoXG4gIGlkcyxcbiAgeyBmb3JtdWxhID0gbnVsbCwgdXBkYXRlVHVybiA9IHRydWUsIG1lc3NhZ2VPcHRpb25zID0ge30gfSA9IHt9XG4pIHtcbiAgLy8gU3RydWN0dXJlIGlucHV0IGRhdGFcbiAgaWRzID0gdHlwZW9mIGlkcyA9PT0gJ3N0cmluZycgPyBbaWRzXSA6IGlkc1xuICBjb25zdCBjdXJyZW50SWQgPSB0aGlzLmNvbWJhdGFudC5pZFxuXG4gIC8vIEl0ZXJhdGUgb3ZlciBDb21iYXRhbnRzLCBwZXJmb3JtaW5nIGFuIGluaXRpYXRpdmUgcm9sbCBmb3IgZWFjaFxuICBjb25zdCB1cGRhdGVzID0gW11cbiAgZm9yIChjb25zdCBbLCBpZF0gb2YgaWRzLmVudHJpZXMoKSkge1xuICAgIC8vIEdldCBDb21iYXRhbnQgZGF0YSAobm9uLXN0cmljdGx5KVxuICAgIGNvbnN0IGNvbWJhdGFudCA9IHRoaXMuY29tYmF0YW50cy5nZXQoaWQpXG4gICAgaWYgKCFjb21iYXRhbnQ/LmlzT3duZXIpIHJldHVybiBudWxsXG5cbiAgICAvLyBQcm9kdWNlIGFuIGluaXRpYXRpdmUgcm9sbCBmb3IgdGhlIENvbWJhdGFudFxuICAgIGNvbnN0IHJvbGwgPSBhd2FpdCBjb21iYXRhbnQuYWN0b3Iucm9sbEluaXRpYXRpdmUoXG4gICAgICAhIWNvbWJhdGFudC5nZXRGbGFnKCdDb0M3JywgJ2hhc0d1bicpXG4gICAgKVxuICAgIHVwZGF0ZXMucHVzaCh7IF9pZDogaWQsIGluaXRpYXRpdmU6IHJvbGwgfSlcbiAgfVxuICBpZiAoIXVwZGF0ZXMubGVuZ3RoKSByZXR1cm4gdGhpc1xuXG4gIC8vIFVwZGF0ZSBtdWx0aXBsZSBjb21iYXRhbnRzXG4gIGF3YWl0IHRoaXMudXBkYXRlRW1iZWRkZWREb2N1bWVudHMoJ0NvbWJhdGFudCcsIHVwZGF0ZXMpXG5cbiAgLy8gRW5zdXJlIHRoZSB0dXJuIG9yZGVyIHJlbWFpbnMgd2l0aCB0aGUgc2FtZSBjb21iYXRhbnRcbiAgaWYgKHVwZGF0ZVR1cm4pIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IHR1cm46IHRoaXMudHVybnMuZmluZEluZGV4KHQgPT4gdC5pZCA9PT0gY3VycmVudElkKSB9KVxuICB9XG5cbiAgcmV0dXJuIHRoaXNcbn1cbiIsIi8qIGdsb2JhbCBDT05GSUcsIERpYWxvZywgZXhwYW5kT2JqZWN0LCBmb3VuZHJ5LCBnYW1lLCBpc05ld2VyVmVyc2lvbiwgbWVyZ2VPYmplY3QgKi9cbmV4cG9ydCBjbGFzcyBVcGRhdGVyIHtcbiAgc3RhdGljIGFzeW5jIGNoZWNrRm9yVXBkYXRlICgpIHtcbiAgICB0aGlzLnN5c3RlbVVwZGF0ZVZlcnNpb24gPSBTdHJpbmcoXG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzeXN0ZW1VcGRhdGVWZXJzaW9uJylcbiAgICApXG4gICAgY29uc3QgcnVuTWlncmF0ZSA9IGlzTmV3ZXJWZXJzaW9uKFxuICAgICAgZ2FtZS5zeXN0ZW0uZGF0YS52ZXJzaW9uLFxuICAgICAgdGhpcy5zeXN0ZW1VcGRhdGVWZXJzaW9uXG4gICAgKVxuICAgIHRoaXMudXBkYXRlZE1vZHVsZXMgPVxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlZE1vZHVsZVZlcnNpb24nKSB8fCB7fVxuICAgIHRoaXMuY3VycmVudE1vZHVsZXMgPSB7fVxuICAgIGZvciAoY29uc3QgcGFjayBvZiBnYW1lLnBhY2tzKSB7XG4gICAgICBpZiAoXG4gICAgICAgICFbJ0NvQzcnLCAnd29ybGQnXS5pbmNsdWRlcyhwYWNrLm1ldGFkYXRhLnBhY2thZ2UpICYmXG4gICAgICAgIFsnQWN0b3InLCAnSXRlbSddLmluY2x1ZGVzKHBhY2subWV0YWRhdGEuZW50aXR5KVxuICAgICAgKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKFxuICAgICAgICAgICAgdGhpcy5jdXJyZW50TW9kdWxlcyxcbiAgICAgICAgICAgIHBhY2subWV0YWRhdGEucGFja2FnZVxuICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgLy8gT25seSBjaGVjayBlYWNoIHBhY2thZ2Ugb25jZVxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoXG4gICAgICAgICAgICAgIHRoaXMudXBkYXRlZE1vZHVsZXMsXG4gICAgICAgICAgICAgIHBhY2subWV0YWRhdGEucGFja2FnZVxuICAgICAgICAgICAgKSB8fFxuICAgICAgICAgICAgU3RyaW5nKHRoaXMudXBkYXRlZE1vZHVsZXNbcGFjay5tZXRhZGF0YS5wYWNrYWdlXSkgIT09XG4gICAgICAgICAgICAgIFN0cmluZyhnYW1lLm1vZHVsZXMuZ2V0KHBhY2subWV0YWRhdGEucGFja2FnZSkuZGF0YS52ZXJzaW9uKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgLy8gUGFja2FnZSBoYXMgbm90IGJlZW4gdXBkYXRlZCBiZWZvcmUgb3IgdGhlIHZlcnNpb24gbnVtYmVyIGhhcyBjaGFuZ2VkXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRNb2R1bGVzW3BhY2subWV0YWRhdGEucGFja2FnZV0gPSBnYW1lLm1vZHVsZXMuZ2V0KFxuICAgICAgICAgICAgICBwYWNrLm1ldGFkYXRhLnBhY2thZ2VcbiAgICAgICAgICAgICkuZGF0YS52ZXJzaW9uXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChydW5NaWdyYXRlIHx8IE9iamVjdC5rZXlzKHRoaXMuY3VycmVudE1vZHVsZXMpLmxlbmd0aCA+IDApIHtcbiAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICBuZXcgRGlhbG9nKHtcbiAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1pZ3JhdGUuVGl0bGUnKSxcbiAgICAgICAgICBjb250ZW50OiBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5jdXJyZW50TW9kdWxlcykubGVuZ3RoID09PSAwXG4gICAgICAgICAgICAgID8gJ0NvQzcuTWlncmF0ZS5NZXNzYWdlJ1xuICAgICAgICAgICAgICA6ICdDb0M3Lk1pZ3JhdGUuV2l0aE1vZHVsZXNNZXNzYWdlJyxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdmVyc2lvbjogZ2FtZS5zeXN0ZW0uZGF0YS52ZXJzaW9uLFxuICAgICAgICAgICAgICBtb2R1bGVzOlxuICAgICAgICAgICAgICAgICc8dWw+PGxpPicgK1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuY3VycmVudE1vZHVsZXMpXG4gICAgICAgICAgICAgICAgICAubWFwKG1vZCA9PiBnYW1lLm1vZHVsZXMuZ2V0KG1vZCkuZGF0YS5uYW1lKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oJzwvbGk+PGxpPicpICtcbiAgICAgICAgICAgICAgICAnPC9saT48L3VsPidcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApLFxuICAgICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICAgIHVwZGF0ZToge1xuICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1pZ3JhdGUuQnV0dG9uVXBkYXRlJyksXG4gICAgICAgICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiBVcGRhdGVyLnVwZGF0ZSgpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2tpcDoge1xuICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1pZ3JhdGUuQnV0dG9uU2tpcCcpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KS5yZW5kZXIodHJ1ZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBEaWFsb2coe1xuICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5UaXRsZScpLFxuICAgICAgICAgIGNvbnRlbnQ6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWlncmF0ZS5HTVJlcXVpcmVkJywge1xuICAgICAgICAgICAgdmVyc2lvbjogZ2FtZS5zeXN0ZW0uZGF0YS52ZXJzaW9uXG4gICAgICAgICAgfSksXG4gICAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgICAgT0s6IHtcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLkJ1dHRvbk9rYXknKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSkucmVuZGVyKHRydWUpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHVwZGF0ZSAoKSB7XG4gICAgLy8gTWlncmF0ZSBXb3JsZCBBY3RvcnNcbiAgICBmb3IgKGNvbnN0IGFjdG9yIG9mIGdhbWUuYWN0b3JzLmNvbnRlbnRzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0gdGhpcy5taWdyYXRlQWN0b3JEYXRhKGFjdG9yLnRvT2JqZWN0KCkpXG4gICAgICAgIGlmICghZm91bmRyeS51dGlscy5pc09iamVjdEVtcHR5KHVwZGF0ZURhdGEpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYE1pZ3JhdGluZyBBY3RvciBlbnRpdHkgJHthY3Rvci5uYW1lfWApXG4gICAgICAgICAgYXdhaXQgYWN0b3IudXBkYXRlKHVwZGF0ZURhdGEsIHsgZW5mb3JjZVR5cGVzOiBmYWxzZSB9KVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgZXJyLm1lc3NhZ2UgPSBgRmFpbGVkIENvQzcgc3lzdGVtIG1pZ3JhdGlvbiBmb3IgQWN0b3IgJHthY3Rvci5uYW1lfTogJHtlcnIubWVzc2FnZX1gXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1pZ3JhdGUgV29ybGQgSXRlbXNcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZ2FtZS5pdGVtcy5jb250ZW50cykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZUl0ZW1EYXRhKGl0ZW0udG9PYmplY3QoKSlcbiAgICAgICAgaWYgKCFmb3VuZHJ5LnV0aWxzLmlzT2JqZWN0RW1wdHkodXBkYXRlRGF0YSkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgTWlncmF0aW5nIEl0ZW0gZW50aXR5ICR7aXRlbS5uYW1lfWApXG4gICAgICAgICAgYXdhaXQgaXRlbS51cGRhdGUodXBkYXRlRGF0YSwgeyBlbmZvcmNlVHlwZXM6IGZhbHNlIH0pXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBlcnIubWVzc2FnZSA9IGBGYWlsZWQgQ29DNyBzeXN0ZW0gbWlncmF0aW9uIGZvciBJdGVtICR7aXRlbS5uYW1lfTogJHtlcnIubWVzc2FnZX1gXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1pZ3JhdGUgV29ybGQgVGFibGVzXG4gICAgZm9yIChjb25zdCB0YWJsZSBvZiBnYW1lLnRhYmxlcy5jb250ZW50cykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZVRhYmxlRGF0YSh0YWJsZS50b09iamVjdCgpKVxuICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNPYmplY3RFbXB0eSh1cGRhdGVEYXRhKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBNaWdyYXRpbmcgVGFibGUgZW50aXR5ICR7dGFibGUubmFtZX1gKVxuICAgICAgICAgIGF3YWl0IHRhYmxlLnVwZGF0ZSh1cGRhdGVEYXRhLCB7IGVuZm9yY2VUeXBlczogZmFsc2UgfSlcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGVyci5tZXNzYWdlID0gYEZhaWxlZCBDb0M3IHN5c3RlbSBtaWdyYXRpb24gZm9yIFRhYmxlICR7dGFibGUubmFtZX06ICR7ZXJyLm1lc3NhZ2V9YFxuICAgICAgICBjb25zb2xlLmVycm9yKGVycilcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNaWdyYXRlIE1hY3Jvc1xuICAgIGZvciAoY29uc3QgbWFjcm8gb2YgZ2FtZS5tYWNyb3MuY29udGVudHMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSBVcGRhdGVyLm1pZ3JhdGVNYWNyb0RhdGEobWFjcm8udG9PYmplY3QoKSlcbiAgICAgICAgaWYgKCFmb3VuZHJ5LnV0aWxzLmlzT2JqZWN0RW1wdHkodXBkYXRlRGF0YSkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgTWlncmF0aW5nIE1hY3JvIGVudGl0eSAke21hY3JvLm5hbWV9YClcbiAgICAgICAgICBhd2FpdCBtYWNyby51cGRhdGUodXBkYXRlRGF0YSwgeyBlbmZvcmNlVHlwZXM6IGZhbHNlIH0pXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBlcnIubWVzc2FnZSA9IGBGYWlsZWQgQ29DNyBzeXN0ZW0gbWlncmF0aW9uIGZvciBUYWJsZSAke21hY3JvLm5hbWV9OiAke2Vyci5tZXNzYWdlfWBcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWlncmF0ZSBXb3JsZCBDb21wZW5kaXVtIFBhY2tzXG4gICAgZm9yIChjb25zdCBwYWNrIG9mIGdhbWUucGFja3MpIHtcbiAgICAgIGlmIChcbiAgICAgICAgcGFjay5tZXRhZGF0YS5wYWNrYWdlICE9PSAnQ29DNycgJiZcbiAgICAgICAgWydBY3RvcicsICdJdGVtJywgJ01hY3JvJywgJ1JvbGxUYWJsZSddLmluY2x1ZGVzKHBhY2subWV0YWRhdGEuZW50aXR5KVxuICAgICAgKSB7XG4gICAgICAgIGF3YWl0IFVwZGF0ZXIubWlncmF0ZUNvbXBlbmRpdW1EYXRhKHBhY2spXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgc2V0dGluZ3MgPSBtZXJnZU9iamVjdCh0aGlzLnVwZGF0ZWRNb2R1bGVzIHx8IHt9LCB0aGlzLmN1cnJlbnRNb2R1bGVzKVxuICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3N5c3RlbVVwZGF0ZWRNb2R1bGVWZXJzaW9uJywgc2V0dGluZ3MpXG4gICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlVmVyc2lvbicsIGdhbWUuc3lzdGVtLmRhdGEudmVyc2lvbilcbiAgfVxuXG4gIHN0YXRpYyBtaWdyYXRlQWN0b3JEYXRhIChhY3Rvcikge1xuICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7fVxuXG4gICAgLy8gVXBkYXRlIFdvcmxkIEFjdG9yXG4gICAgVXBkYXRlci5fbWlncmF0ZUFjdG9yQ2hhcmFjdGVyU2FuaXR5KGFjdG9yLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVBY3RvckFydHdvcmsoYWN0b3IsIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUFjdG9yS2VlcGVyTm90ZXMoYWN0b3IsIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUFjdG9yTnBjQ3JlYXR1cmUoYWN0b3IsIHVwZGF0ZURhdGEpXG5cbiAgICAvLyBNaWdyYXRlIFdvcmxkIEFjdG9yIEl0ZW1zXG4gICAgaWYgKGFjdG9yLml0ZW1zKSB7XG4gICAgICBjb25zdCBpdGVtcyA9IGFjdG9yLml0ZW1zLnJlZHVjZSgoYXJyLCBpKSA9PiB7XG4gICAgICAgIGNvbnN0IGl0ZW1EYXRhID1cbiAgICAgICAgICBpIGluc3RhbmNlb2YgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzcyA/IGkudG9PYmplY3QoKSA6IGlcbiAgICAgICAgY29uc3QgaXRlbVVwZGF0ZSA9IFVwZGF0ZXIubWlncmF0ZUl0ZW1EYXRhKGl0ZW1EYXRhKVxuICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNPYmplY3RFbXB0eShpdGVtVXBkYXRlKSkge1xuICAgICAgICAgIGl0ZW1VcGRhdGUuX2lkID0gaXRlbURhdGEuX2lkXG4gICAgICAgICAgYXJyLnB1c2goZXhwYW5kT2JqZWN0KGl0ZW1VcGRhdGUpKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJcbiAgICAgIH0sIFtdKVxuICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdXBkYXRlRGF0YS5pdGVtcyA9IGl0ZW1zXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBtaWdyYXRlQ29tcGVuZGl1bURhdGEgKHBhY2spIHtcbiAgICBjb25zdCBlbnRpdHkgPSBwYWNrLm1ldGFkYXRhLmVudGl0eVxuICAgIGlmICghWydBY3RvcicsICdJdGVtJywgJ01hY3JvJywgJ1JvbGxUYWJsZSddLmluY2x1ZGVzKGVudGl0eSkpIHJldHVyblxuXG4gICAgLy8gVW5sb2NrIHRoZSBwYWNrIGZvciBlZGl0aW5nXG4gICAgY29uc3Qgd2FzTG9ja2VkID0gcGFjay5sb2NrZWRcbiAgICBhd2FpdCBwYWNrLmNvbmZpZ3VyZSh7IGxvY2tlZDogZmFsc2UgfSlcblxuICAgIGF3YWl0IHBhY2subWlncmF0ZSgpXG4gICAgY29uc3QgZG9jdW1lbnRzID0gYXdhaXQgcGFjay5nZXREb2N1bWVudHMoKVxuXG4gICAgLy8gSXRlcmF0ZSBvdmVyIGNvbXBlbmRpdW0gZW50cmllcyAtIGFwcGx5aW5nIGZpbmUtdHVuZWQgbWlncmF0aW9uIGZ1bmN0aW9uc1xuICAgIGZvciAoY29uc3QgZG9jIG9mIGRvY3VtZW50cykge1xuICAgICAgbGV0IHVwZGF0ZURhdGEgPSB7fVxuICAgICAgdHJ5IHtcbiAgICAgICAgc3dpdGNoIChlbnRpdHkpIHtcbiAgICAgICAgICBjYXNlICdBY3Rvcic6XG4gICAgICAgICAgICB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlQWN0b3JEYXRhKGRvYy50b09iamVjdCgpKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdJdGVtJzpcbiAgICAgICAgICAgIHVwZGF0ZURhdGEgPSBVcGRhdGVyLm1pZ3JhdGVJdGVtRGF0YShkb2MudG9PYmplY3QoKSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnTWFjcm8nOlxuICAgICAgICAgICAgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZU1hY3JvRGF0YShkb2MudG9PYmplY3QoKSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnUm9sbFRhYmxlJzpcbiAgICAgICAgICAgIHVwZGF0ZURhdGEgPSBVcGRhdGVyLm1pZ3JhdGVUYWJsZURhdGEoZG9jLnRvT2JqZWN0KCkpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICAgIC8vIFNhdmUgdGhlIGVudHJ5LCBpZiBkYXRhIHdhcyBjaGFuZ2VkXG4gICAgICAgIGlmICghZm91bmRyeS51dGlscy5pc09iamVjdEVtcHR5KHVwZGF0ZURhdGEpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBgTWlncmF0ZWQgJHtlbnRpdHl9IGVudGl0eSAke2RvYy5uYW1lfSBpbiBDb21wZW5kaXVtICR7cGFjay5jb2xsZWN0aW9ufWBcbiAgICAgICAgICApXG4gICAgICAgICAgYXdhaXQgZG9jLnVwZGF0ZSh1cGRhdGVEYXRhKVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgZXJyLm1lc3NhZ2UgPSBgRmFpbGVkIENvQzcgc3lzdGVtIG1pZ3JhdGlvbiBmb3IgZW50aXR5ICR7ZG9jLm5hbWV9IGluIHBhY2sgJHtwYWNrLmNvbGxlY3Rpb259OiAke2Vyci5tZXNzYWdlfWBcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQXBwbHkgdGhlIG9yaWdpbmFsIGxvY2tlZCBzdGF0dXMgZm9yIHRoZSBwYWNrXG4gICAgYXdhaXQgcGFjay5jb25maWd1cmUoeyBsb2NrZWQ6IHdhc0xvY2tlZCB9KVxuICB9XG5cbiAgc3RhdGljIG1pZ3JhdGVJdGVtRGF0YSAoaXRlbSkge1xuICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7fVxuXG4gICAgLy8gVXBkYXRlIFdvcmxkIEl0ZW1cbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUV4cGVyaWVuY2UoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUFydHdvcmsoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUJvb2tBdXRvbWF0ZWQoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUtlZXBlck5vdGVzKGl0ZW0sIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUl0ZW1TcGVsbEF1dG9tYXRlZChpdGVtLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtS2VlcGVyTm90ZXNNZXJnZShpdGVtLCB1cGRhdGVEYXRhKVxuXG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBtaWdyYXRlTWFjcm9EYXRhICh0YWJsZSkge1xuICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7fVxuXG4gICAgLy8gVXBkYXRlIFdvcmxkIEFjdG9yXG4gICAgVXBkYXRlci5fbWlncmF0ZU1hY3JvQXJ0d29yayh0YWJsZSwgdXBkYXRlRGF0YSlcblxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgbWlncmF0ZVRhYmxlRGF0YSAodGFibGUpIHtcbiAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cblxuICAgIC8vIFVwZGF0ZSBXb3JsZCBBY3RvclxuICAgIFVwZGF0ZXIuX21pZ3JhdGVUYWJsZUFydHdvcmsodGFibGUsIHVwZGF0ZURhdGEpXG5cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlSXRlbUtlZXBlck5vdGVzIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKFxuICAgICAgW1xuICAgICAgICAnYXJjaGV0eXBlJyxcbiAgICAgICAgJ2NoYXNlJyxcbiAgICAgICAgJ2l0ZW0nLFxuICAgICAgICAnb2NjdXBhdGlvbicsXG4gICAgICAgICdzZXR1cCcsXG4gICAgICAgICdza2lsbCcsXG4gICAgICAgICdzcGVsbCcsXG4gICAgICAgICdzdGF0dXMnLFxuICAgICAgICAndGFsZW50JyxcbiAgICAgICAgJ3dlYXBvbidcbiAgICAgIF0uaW5jbHVkZXMoaXRlbS50eXBlKVxuICAgICkge1xuICAgICAgaWYgKHR5cGVvZiBpdGVtLmRhdGEuZGVzY3JpcHRpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuZGVzY3JpcHRpb24nXSA9IHtcbiAgICAgICAgICB2YWx1ZTogaXRlbS5kYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgICAgIGtlZXBlcjogJydcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgaXRlbS5kYXRhLmRlc2NyaXB0aW9uID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmRlc2NyaXB0aW9uJ10gPSB7XG4gICAgICAgICAgdmFsdWU6ICcnLFxuICAgICAgICAgIGtlZXBlcjogJydcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgaXRlbS5kYXRhLmRlc2NyaXB0aW9uLmtlZXBlciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5kZXNjcmlwdGlvbi5rZWVwZXInXSA9ICcnXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVJdGVtRXhwZXJpZW5jZSAoaXRlbSwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgIGlmICh0eXBlb2YgaXRlbS5kYXRhLmFkanVzdG1lbnRzPy5leHBlcmllbmNlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UnXSA9IDBcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW1BcnR3b3JrIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgY29uc3QgcmVnRXggPSBuZXcgUmVnRXhwKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgIGxldCBpbWFnZSA9IFN0cmluZyhpdGVtLmltZykubWF0Y2gocmVnRXgpXG4gICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICB1cGRhdGVEYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgIH1cbiAgICBpZiAoaXRlbS50eXBlID09PSAnc2V0dXAnKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLmRhdGEuaXRlbXMpKSB7XG4gICAgICAgIGltYWdlID0gU3RyaW5nKHYuaW1nKS5tYXRjaChyZWdFeClcbiAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydkYXRhLml0ZW1zJ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLml0ZW1zJ10gPSBpdGVtLmRhdGEuaXRlbXNcbiAgICAgICAgICB9XG4gICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5pdGVtcyddW2tdLmltZyA9XG4gICAgICAgICAgICAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnb2NjdXBhdGlvbicpIHtcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uZGF0YS5za2lsbHMpKSB7XG4gICAgICAgIGltYWdlID0gU3RyaW5nKHYuaW1nKS5tYXRjaChyZWdFeClcbiAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydkYXRhLnNraWxscyddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5za2lsbHMnXSA9IGl0ZW0uZGF0YS5za2lsbHNcbiAgICAgICAgICB9XG4gICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5za2lsbHMnXVtrXS5pbWcgPVxuICAgICAgICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgW28sIGddIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uZGF0YS5ncm91cHMpKSB7XG4gICAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGcuc2tpbGxzKSkge1xuICAgICAgICAgIGltYWdlID0gU3RyaW5nKHYuaW1nKS5tYXRjaChyZWdFeClcbiAgICAgICAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YVsnZGF0YS5ncm91cHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5ncm91cHMnXSA9IGl0ZW0uZGF0YS5ncm91cHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuZ3JvdXBzJ11bb10uc2tpbGxzW2tdLmltZyA9XG4gICAgICAgICAgICAgICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnYm9vaycpIHtcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uZGF0YS5zcGVsbHMpKSB7XG4gICAgICAgIGltYWdlID0gU3RyaW5nKHYuaW1nKS5tYXRjaChyZWdFeClcbiAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydkYXRhLnNwZWxscyddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5zcGVsbHMnXSA9IGl0ZW0uZGF0YS5zcGVsbHNcbiAgICAgICAgICB9XG4gICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5zcGVsbHMnXVtrXS5pbWcgPVxuICAgICAgICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ2FyY2hldHlwZScpIHtcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uZGF0YS5za2lsbHMpKSB7XG4gICAgICAgIGltYWdlID0gU3RyaW5nKHYuaW1nKS5tYXRjaChyZWdFeClcbiAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydkYXRhLnNraWxscyddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5za2lsbHMnXSA9IGl0ZW0uZGF0YS5za2lsbHNcbiAgICAgICAgICB9XG4gICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5za2lsbHMnXVtrXS5pbWcgPVxuICAgICAgICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW1TcGVsbEF1dG9tYXRlZCAoaXRlbSwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChpdGVtLnR5cGUgPT09ICdzcGVsbCcgJiYgdHlwZW9mIGl0ZW0uZGF0YS5jb3N0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdXBkYXRlRGF0YVsnZGF0YS5jYXN0aW5nVGltZSddID0gaXRlbS5kYXRhLmNhc3RpbmdUaW1lIHx8ICcnXG4gICAgICB1cGRhdGVEYXRhWydkYXRhLmNvc3RzLmhpdFBvaW50cyddID0gaXRlbS5kYXRhLmNvc3QuaHAgfHwgMFxuICAgICAgdXBkYXRlRGF0YVsnZGF0YS5jb3N0cy5tYWdpY1BvaW50cyddID0gaXRlbS5kYXRhLmNvc3QubXAgfHwgMFxuICAgICAgdXBkYXRlRGF0YVsnZGF0YS5jb3N0cy5zYW5pdHknXSA9IGl0ZW0uZGF0YS5jb3N0LnNhbiB8fCAwXG4gICAgICB1cGRhdGVEYXRhWydkYXRhLmNvc3RzLnBvd2VyJ10gPSBpdGVtLmRhdGEuY29zdC5wb3cgfHwgMFxuICAgICAgdXBkYXRlRGF0YVsnZGF0YS5jb3N0cy5vdGhlcnMnXSA9ICcnXG5cbiAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuLT1jb3N0J10gPSBudWxsXG4gICAgICB1cGRhdGVEYXRhWydkYXRhLmRlc2NyaXB0aW9uLi09dW5pZGVudGlmaWVkJ10gPSBudWxsXG4gICAgICB1cGRhdGVEYXRhWydkYXRhLmRlc2NyaXB0aW9uLi09bm90ZXMnXSA9IG51bGxcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQm9vayBhdXRvbWF0aW9uIHdhcyBpbmNyZWFzZWQgaW4gMC42LjVcbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGl0ZW0gRG9jdW1lbnQgZGF0YSBleHByZXNzZWQgYXMgYSBwbGFpbiBvYmplY3RcbiAgICogQHBhcmFtIHtqc29ufSB1cGRhdGVEYXRhIERpZmZlcmVudGlhbCB1cGRhdGUgZGF0YSB3aGljaCBtb2RpZmllcyB0aGUgZXhpc3RpbmcgdmFsdWVzIG9mIHRoaXMgZG9jdW1lbnQgZGF0YVxuICAgKiBAcmV0dXJucyB7anNvbn0gRGlmZmVyZW50aWFsIHVwZGF0ZSBkYXRhIHdoaWNoIG1vZGlmaWVzIHRoZSBleGlzdGluZyB2YWx1ZXMgb2YgdGhpcyBkb2N1bWVudCBkYXRhXG4gICAqL1xuICBzdGF0aWMgX21pZ3JhdGVJdGVtQm9va0F1dG9tYXRlZCAoaXRlbSwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChpdGVtLnR5cGUgPT09ICdib29rJykge1xuICAgICAgLyoqIElmIGJvb2sgc3RpbGwgaGFzIHRoZSBkYXRhLmRlc2NyaXB0aW9uLnVuaWRlbnRpZmllZCBrZXkgdGhlbiBydW4gbWlncmF0ZSBvbiBpdCAqL1xuICAgICAgaWYgKHR5cGVvZiBpdGVtLmRhdGEuZGVzY3JpcHRpb24udW5pZGVudGlmaWVkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvKiogRmllbGRzIGNoYW5nZWQgZnJvbSBudWxsIGRlZmF1bHQgdG8gZW1wdHkgc3RyaW5nICovXG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuYXV0aG9yJ10gPSBpdGVtLmRhdGEuYXV0aG9yIHx8ICcnXG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuZGF0ZSddID0gaXRlbS5kYXRhLmRhdGUgfHwgJydcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5sYW5ndWFnZSddID0gaXRlbS5kYXRhLmxhbmd1YWdlIHx8ICcnXG4gICAgICAgIC8qKiBGaWVsZHMgY2hhbmdlZCBmcm9tIG51bGwvc3RyaW5nIGRlZmF1bHRzIHRvIGludGVnZXIgdG8gMCAqL1xuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLnNhbml0eUxvc3MnXSA9IGl0ZW0uZGF0YS5zYW5Mb3NzIHx8IDBcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5teXRob3NSYXRpbmcnXSA9IE51bWJlcihpdGVtLmRhdGEubXl0aG9zUmF0aW5nKSB8fCAwXG4gICAgICAgIC8qKiBSZW5hbWVkL21vdmVkIGZpZWxkcyAqL1xuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmNvbnRlbnQnXSA9IGl0ZW0uZGF0YS5kZXNjcmlwdGlvbi51bmlkZW50aWZpZWRcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5rZWVwZXJOb3RlcyddID0gaXRlbS5kYXRhLmRlc2NyaXB0aW9uLm5vdGVzXG4gICAgICAgIC8qKiBOZXcgZmllbGRzIHNldCBkZWZhdWx0IHZhbHVlcyAqL1xuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmRpZmZpY3VsdHlMZXZlbCddID0gJ3JlZ3VsYXInXG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuZnVsbFN0dWRpZXMnXSA9IDBcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5pbml0aWFsUmVhZGluZyddID0gZmFsc2VcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5rZWVwZXJOb3RlcyddID0gJydcbiAgICAgICAgLyoqIE1vdmUgYW5kIHJlbmFtZSBnYWluIGZpZWxkcyB0byBnYWlucywgZGVmYXVsdCBOYU4gdmFsdWVzIHRvIDAgKi9cbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5nYWlucy5jdGh1bGh1TXl0aG9zLmluaXRpYWwnXSA9XG4gICAgICAgICAgTnVtYmVyKGl0ZW0uZGF0YS5nYWluLmN0aHVsaHVNeXRob3MuQ01JKSB8fCAwXG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuZ2FpbnMuY3RodWxodU15dGhvcy5maW5hbCddID1cbiAgICAgICAgICBOdW1iZXIoaXRlbS5kYXRhLmdhaW4uY3RodWxodU15dGhvcy5DTUYpIHx8IDBcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5nYWlucy5vY2N1bHQnXSA9IE51bWJlcihpdGVtLmRhdGEuZ2Fpbi5vY2N1bHQpIHx8IDBcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5nYWlucy5vdGhlcnMnXSA9IFtdXG4gICAgICAgIC8qKiBOZXcgc3R1ZHkgZmllbGQgZGVmYXVsdCBuZWNlc3NhcnkgdG8gaW50ZWdlciBvZiB3ZWVrc1N0dWR5VGltZSBvciAwIGlmIG5vdCBzZXQgKi9cbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5zdHVkeSddID0ge1xuICAgICAgICAgIG5lY2Vzc2FyeTogTnVtYmVyKGl0ZW0uZGF0YS53ZWVrc1N0dWR5VGltZSkgfHwgMCxcbiAgICAgICAgICBwcm9ncmVzczogMFxuICAgICAgICB9XG4gICAgICAgIC8qKiBSZW1vdmUgb2xkIGtleXMgKi9cbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS4tPXNhbkxvc3MnXSA9IG51bGxcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS4tPXdlZWtzU3R1ZHlUaW1lJ10gPSBudWxsXG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuLT1nYWluJ10gPSBudWxsXG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuZGVzY3JpcHRpb24uLT11bmlkZW50aWZpZWQnXSA9IG51bGxcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5kZXNjcmlwdGlvbi4tPW5vdGVzJ10gPSBudWxsXG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuZ2FpbnMuLT1vdGhlciddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLi09cHJvcGVydGllcyddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLi09ZmxhZ3MnXSA9IG51bGxcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW1LZWVwZXJOb3Rlc01lcmdlIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NwZWxsJykge1xuICAgICAgaWYgKHR5cGVvZiBpdGVtLmRhdGEubm90ZXMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaXRlbS5kYXRhLmRlc2NyaXB0aW9uLmtlZXBlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmRlc2NyaXB0aW9uLmtlZXBlciddID1cbiAgICAgICAgICAgIGl0ZW0uZGF0YS5kZXNjcmlwdGlvbi5rZWVwZXIgKyBpdGVtLmRhdGEubm90ZXNcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmRlc2NyaXB0aW9uLmtlZXBlciddID0gaXRlbS5kYXRhLm5vdGVzXG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS4tPW5vdGVzJ10gPSBudWxsXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlQWN0b3JBcnR3b3JrIChhY3RvciwgdXBkYXRlRGF0YSkge1xuICAgIGNvbnN0IHJlZ0V4ID0gbmV3IFJlZ0V4cCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICBsZXQgaW1hZ2UgPSBTdHJpbmcoYWN0b3IuaW1nKS5tYXRjaChyZWdFeClcbiAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcbiAgICAgIHVwZGF0ZURhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgfVxuICAgIGltYWdlID0gU3RyaW5nKGFjdG9yLnRva2VuLmltZykubWF0Y2gocmVnRXgpXG4gICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICB1cGRhdGVEYXRhWyd0b2tlbi5pbWcnXSA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhhY3Rvci5lZmZlY3RzKSkge1xuICAgICAgaW1hZ2UgPSBTdHJpbmcodi5pY29uKS5tYXRjaChyZWdFeClcbiAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGEuZWZmZWN0cyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB1cGRhdGVEYXRhLmVmZmVjdHMgPSBhY3Rvci5lZmZlY3RzXG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlRGF0YS5lZmZlY3RzW2tdLmljb24gPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUFjdG9yS2VlcGVyTm90ZXMgKGFjdG9yLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKFsnY2hhcmFjdGVyJywgJ25wYycsICdjcmVhdHVyZSddLmluY2x1ZGVzKGFjdG9yLnR5cGUpKSB7XG4gICAgICBpZiAodHlwZW9mIGFjdG9yLmRhdGEuZGVzY3JpcHRpb24gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuZGVzY3JpcHRpb24nXSA9IHtcbiAgICAgICAgICBrZWVwZXI6ICcnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUFjdG9yTnBjQ3JlYXR1cmUgKGFjdG9yLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKFsnbnBjJ10uaW5jbHVkZXMoYWN0b3IudHlwZSkpIHtcbiAgICAgIGlmICh0eXBlb2YgYWN0b3IuZGF0YS5zcGVjaWFsID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLnNwZWNpYWwnXSA9IHtcbiAgICAgICAgICBjaGVja1Bhc3NlZDogbnVsbCxcbiAgICAgICAgICBjaGVja0ZhaWxsZWQ6IG51bGxcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBhY3Rvci5kYXRhLmF0dGFja3NQZXJSb3VuZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5hdHRhY2tzUGVyUm91bmQnXSA9IDFcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUFjdG9yQ2hhcmFjdGVyU2FuaXR5IChhY3RvciwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChhY3Rvci50eXBlID09PSAnY2hhcmFjdGVyJykge1xuICAgICAgY29uc3Qgb25lRmlmdGhTYW5pdHkgPSBNYXRoLmNlaWwoYWN0b3IuZGF0YS5hdHRyaWJzLnNhbi52YWx1ZSAvIDUpXG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBhY3Rvci5kYXRhLmF0dHJpYnMuc2FuLmRhaWx5TG9zcyA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3IuZGF0YS5hdHRyaWJzLnNhbi5kYWlseUxvc3MgPT09IG51bGxcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmF0dHJpYnMuc2FuLmRhaWx5TG9zcyddID0gMFxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3IuZGF0YS5hdHRyaWJzLnNhbi5vbmVGaWZ0aFNhbml0eSA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3IuZGF0YS5hdHRyaWJzLnNhbi5vbmVGaWZ0aFNhbml0eSA9PT0gbnVsbFxuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHknXSA9ICcgLyAnICsgb25lRmlmdGhTYW5pdHlcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIGFjdG9yLmRhdGEuYXR0cmlicy5zYW4uZGFpbHlMb3NzID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBhY3Rvci5kYXRhLmF0dHJpYnMuc2FuLmRhaWx5TG9zcyA9PT0gbnVsbFxuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuYXR0cmlicy5zYW4uZGFpbHlMb3NzJ10gPSAwXG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBhY3Rvci5kYXRhLmluZGVmaW5pdGVJbnNhbml0eUxldmVsID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBhY3Rvci5kYXRhLmluZGVmaW5pdGVJbnNhbml0eUxldmVsID09PSBudWxsIHx8XG4gICAgICAgIHR5cGVvZiBhY3Rvci5kYXRhLmluZGVmaW5pdGVJbnNhbml0eUxldmVsLnZhbHVlID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBhY3Rvci5kYXRhLmluZGVmaW5pdGVJbnNhbml0eUxldmVsLnZhbHVlID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbC52YWx1ZSddID0gMFxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3IuZGF0YS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3IuZGF0YS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbCA9PT0gbnVsbCB8fFxuICAgICAgICB0eXBlb2YgYWN0b3IuZGF0YS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbC5tYXggPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGFjdG9yLmRhdGEuaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwubWF4ID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbC5tYXgnXSA9IG9uZUZpZnRoU2FuaXR5XG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBhY3Rvci5kYXRhLmF0dHJpYnMubXAudmFsdWUgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGFjdG9yLmRhdGEuYXR0cmlicy5tcC52YWx1ZSA9PT0gbnVsbFxuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuYXR0cmlicy5tcC52YWx1ZSddID0gb25lRmlmdGhTYW5pdHlcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIGFjdG9yLmRhdGEuYXR0cmlicy5tcC5tYXggPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGFjdG9yLmRhdGEuYXR0cmlicy5tcC5tYXggPT09IG51bGxcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmF0dHJpYnMubXAubWF4J10gPSBvbmVGaWZ0aFNhbml0eVxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3IuZGF0YS5ub3RlcyA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3IuZGF0YS5ub3RlcyA9PT0gbnVsbFxuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEubm90ZXMnXSA9ICcnXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVNYWNyb0FydHdvcmsgKHRhYmxlLCB1cGRhdGVEYXRhKSB7XG4gICAgY29uc3QgcmVnRXggPSBuZXcgUmVnRXhwKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgIGNvbnN0IGltYWdlID0gU3RyaW5nKHRhYmxlLmltZykubWF0Y2gocmVnRXgpXG4gICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICB1cGRhdGVEYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlVGFibGVBcnR3b3JrICh0YWJsZSwgdXBkYXRlRGF0YSkge1xuICAgIGNvbnN0IHJlZ0V4ID0gbmV3IFJlZ0V4cCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICBsZXQgaW1hZ2UgPSBTdHJpbmcodGFibGUuaW1nKS5tYXRjaChyZWdFeClcbiAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcbiAgICAgIHVwZGF0ZURhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgfVxuICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKHRhYmxlLnJlc3VsdHMpKSB7XG4gICAgICBpbWFnZSA9IFN0cmluZyh2LmltZykubWF0Y2gocmVnRXgpXG4gICAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhLnJlc3VsdHMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YS5yZXN1bHRzID0gdGFibGUucmVzdWx0c1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZURhdGEucmVzdWx0c1trXS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGdhbWUgKi9cbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG4vKipcbiAqIG5hbWVDaGFyYWN0ZXJzIGxpc3Qgb2YgY2hhcmFjdGVycyB0aGF0IGNhbiBiZSBwYXJ0IG9mIGEgW10gZm9yIGNoYXJhY3Rlciwgc2tpbGwsIG9yIHdlYXBvbiBuYW1lcyB1c2VkIGluIGJyYWNrZXQgZXhwcmVzc2lvbi5cbiAqXG4gKiBcImtleXMuPGxhbmd1YWdlPi5kZXNjcmlwdGlvblwiIGxhbmcga2V5IHRvIHNob3cgaW4gdGhlIGxhbmd1YWdlIHNlbGVjdGlvbiBkaWFsb2cgYm94LlxuICogXCJrZXlzLjxsYW5ndWFnZT4uZGJOb25lXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIG5vIERhbWFnZSBCb251cyBlLmcuIERCOiBcImRiTm9uZVwiLlxuICogXCJrZXlzLjxsYW5ndWFnZT4uYXJtb3JOb25lXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIG5vIEFybW91ciBCb251cyBlLmcuIEFybW9yOiBcImFybW9yTm9uZVwiLlxuICogXCJrZXlzLjxsYW5ndWFnZT4uYXR0YWNrc1BlclJvdW5kTm9uZVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSBubyBhdHRhY2tzIGUuZy4gQXR0YWNrcyBQZXIgUm91bmQ6IFwiYXR0YWNrc1BlclJvdW5kTm9uZVwiLlxuICogXCJrZXlzLjxsYW5ndWFnZT4uc2FuTG9zc05vbmVcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgbm8gc2FuaXR5IGxvc3MgZS5nLiBTQU4gbG9zczogXCJzYW5Mb3NzTm9uZVwiLlxuICogXCJrZXlzLjxsYW5ndWFnZT4uZnVsbGRiXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIGRhbWFnZSBib251cyBpbiBhdHRyaWJ1dGVzIGFuZCB3ZWFwb24gZGFtYWdlIGUuZy4gREI6IFwiZnVsbGRiXCIgLyBXZWFwb24gNTAlICgyNS8xMCksIGRhbWFnZSAxRDYgKyBcImZ1bGxkYlwiLlxuICogXCJrZXlzLjxsYW5ndWFnZT4uaGFsZmRiXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIGhhbGYgZGFtYWdlIGJvbnVzIGluIHdlYXBvbiBkYW1hZ2UgZS5nLiBXZWFwb24gNTAlICgyNS8xMCksIGRhbWFnZSAxRDYgKyBcImhhbGZkYlwiLlxuICogXCJrZXlzLjxsYW5ndWFnZT4uc2VjdGlvbkNvbWJhdHNcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgdGhlIHN0YXJ0IG9mIHRoZSBjb21iYXQgLyB3ZWFwb24gc2VjdGlvbiBvZiB0ZXh0LlxuICogXCJrZXlzLjxsYW5ndWFnZT4ubmV3Q29tYmF0SGVhZGVyXCIgSWYgdGhlcmUgaXMgbm8gY29tYmF0IC8gd2VhcG9uIHNlY3Rpb24sIGFkZCB0aGlzIHNlY3Rpb24gd2VyZSBpdCBwcm9iYWJseSBpcywgdGhpcyBuZWVkcyB0byBtYXRjaGVkIGJ5IFwia2V5cy48bGFuZ3VhZ2U+LnNlY3Rpb25Db21iYXRzXCIuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5zZWN0aW9uU2tpbGxzXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIHRoZSBzdGFydCBvZiB0aGUgc2tpbGxzIHNlY3Rpb24gb2YgdGV4dC5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LnNlY3Rpb25MYW5nYXVnZXNcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgdGhlIHN0YXJ0IG9mIHRoZSBsYW5ndWFnZXMgc2VjdGlvbiBvZiB0ZXh0LlxuICogXCJrZXlzLjxsYW5ndWFnZT4uc2VjdGlvblNwZWxsc1wiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSB0aGUgc3RhcnQgb2YgdGhlIHNwZWxscyBzZWN0aW9uIG9mIHRleHQuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5oYW5kZ3VuXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBjb21iYXQgc2VjdGlvbiB3ZWFwb24gbmFtZSBpcyBhIGhhbmRndW4gdHlwZS5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LnJpZmxlXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBjb21iYXQgc2VjdGlvbiB3ZWFwb24gbmFtZSBpcyBhIHJpZmxlIHR5cGUuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5zbWJcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGNvbWJhdCBzZWN0aW9uIHdlYXBvbiBuYW1lIGlzIGEgc3VibWFjaGluZSBndW4gdHlwZS5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+Lm1hY2hpbmVHdW5cIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGNvbWJhdCBzZWN0aW9uIHdlYXBvbiBuYW1lIGlzIGEgbWFjaGluZSBndW4gdHlwZS5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmxhdW5jaGVkXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBjb21iYXQgc2VjdGlvbiB3ZWFwb24gbmFtZSBpcyBhIGxhdW5jaGVkIHR5cGUuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5leGFtcGxlXCIgU3RyaW5nIHRoYXQgc2hvdWxkIHNob3cgYXMgYSBwbGFjZWhvbGRlciBleGFtcGxlLlxuICpcbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uYWdlXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBhZ2UsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8YWdlPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4ub2NjdXBhdGlvblwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgb2NjdXBhdGlvbiwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxvY2N1cGF0aW9uPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uc3RyXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBzdHJlbmd0aCBjaGFyYWN0ZXJpc3RpYywgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxzdHI+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5jb25cIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGNvbnN0aXR1dGlvbiBjaGFyYWN0ZXJpc3RpYywgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxjb24+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5zaXpcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIHNpemUgY2hhcmFjdGVyaXN0aWMsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8c2l6Pi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uaW50XCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBpbnRlbGxpZ2VuY2UgY2hhcmFjdGVyaXN0aWMsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8aW50Pi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4ucG93XCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBwb3dlciBjaGFyYWN0ZXJpc3RpYywgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxwb3c+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5kZXhcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGRleHRlcml0eSBjaGFyYWN0ZXJpc3RpYywgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxkZXg+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5hcHBcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGFwcGVhcmFuY2UgY2hhcmFjdGVyaXN0aWMsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8YXBwPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uZWR1XCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBlZHVjYXRpb24gY2hhcmFjdGVyaXN0aWMsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8ZWR1Pi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uc2FuXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBzYW5pdHkgcG9pbnRzIGF0dHJpYnV0ZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxzYW4+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5ocFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgaGl0IHBvaW50cyBhdHRyaWJ1dGUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8aHA+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5tcFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgbWFnaWMgcG9pbnRzIGF0dHJpYnV0ZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxtcD4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmRiXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBkYW1hZ2UgYm9udXMgYXR0cmlidXRlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGRiPiBpZiBtYXRjaGluZyBcImtleXMuPGxhbmd1YWdlPi5kYk5vbmVcIiB0aGVuIDAuXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmJ1aWxkXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBidWlsZCBhdHRyaWJ1dGUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8YnVpbGQ+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5hcm1vclwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgZGFtYWdlIGJvbnVzIGF0dHJpYnV0ZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxkYj4gaWYgbWF0Y2hpbmcgXCJrZXlzLjxsYW5ndWFnZT4uYXJtb3JOb25lXCIgdGhlbiAwLlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5tb3ZcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIG1vdmVtZW50IHJhdGUgYXR0cmlidXRlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPG1vdj4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+Lmxja1wiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgbHVjayBhdHRyaWJ1dGUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8bGNrPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uYXR0YWNrc1BlclJvdW5kXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBhdHRhY2tzIHBlciByb3VuZCwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxhdHRhY2tzUGVyUm91bmQ+IGlmIG1hdGNoaW5nIFwia2V5cy48bGFuZ3VhZ2U+LmF0dGFja3NQZXJSb3VuZE5vbmVcIiB0aGVuIDAuXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LnNhbkxvc3NcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIHNhbiBsb3NzIG1pbi9tYXgsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8c2FuTG9zcz4gaWYgbWF0Y2hpbmcgXCJrZXlzLjxsYW5ndWFnZT4uc2FuTG9zc05vbmVcIiB0aGVuIG5vbmUuXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LndlYXBvblwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgY29tYmF0IHNlY3Rpb24sIG5hbWVkIGNhcHR1cmluZyBncm91cCB3ZWFwb24gPG5hbWU+LCBvcHRpb25hbCA8cGVyY2VudGFnZT4sIGFuZCA8ZGFtYWdlPi4gRGFtYWdlIGNhbiBjb250YWluIFwia2V5cy48bGFuZ3VhZ2U+LmZ1bGxkYlwiIGFuZCBcImtleXMuPGxhbmd1YWdlPi5oYWxmZGJcIi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4ud2VhcG9uRG9kZ2VcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGNvbWJhdCBzZWN0aW9uIGRvZGdlIHNraWxsLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPG5hbWU+IGFuZCA8cGVyY2VudGFnZT4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LnNraWxsXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBza2lsbCBzZWN0aW9uIHNraWxsIG5hbWUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8bmFtZT4gYW5kIDxwZXJjZW50YWdlPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uZ3Vlc3NTdGFydENvbWJhdFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiBpZiB0aGVyZSBpcyBubyBjb21iYXQgc2VjdGlvbiBmaW5kIHRoZXNlIGFyZSBsaWtlbHkgdG8gYmUgdGhlIGZpcnN0IHdlYXBvbiBuYW1lLCBcImtleXMuPGxhbmd1YWdlPi5uZXdDb21iYXRIZWFkZXJcIiBpcyB0aGVuIGFkZGVkIGJlZm9yZSBpdCB0byBnZXQgdGhlIGdyb3Vwc1xuICpcbiAqIFRoZXNlIHNob3VsZCBub3QgYmUgZWRpdGVkIGFzIHRoZXkgc2hvdWxkIHdvcmsgYXMgaXNcbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4ubmFtZVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgbmFtZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxuYW1lPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uc2VjdGlvbnNcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gc3BsaXQgdGV4dCBpbnRvIGNvbWJhdCwgc2tpbGwsIGxhbmd1YWdlLCBhbmQgc3BlbGxzIHNlY3Rpb25cbiAqXG4gKiBJZiB0aGVyZSBpcyBuZXcgZnVuY3Rpb25hbGl0eSBjaGVjayBmb3IgdGhpcyBzdHJpbmcgaW4gdGhlIHRyYW5zbGF0aW9ucyAvIGtleXMgZm9yIHlvdXIgbGFuZ3VhZ2UgXCJORVcgS0VZIEJFTE9XIC0gVFJBTlNMQVRJT04gUkVRVUlSRURcIlxuICovXG5jb25zdCBuYW1lQ2hhcmFjdGVycyA9XG4gICdcXFxcdTMwMDBcXFxcdTM0MDAtXFxcXHU0REJGXFxcXHU0RTAwLVxcXFx1OUZGRlxcXFx3XFxcXChcXFxcKVxcXFwtXFxcXC8mXCJcXCcnICtcbiAgQ29DN1V0aWxpdGllcy5xdW90ZVJlZ0V4cChcbiAgICAnYcyBZcyBacyBb8yBw6DDqMOsw7LDucOAw4jDjMOSw5nDocOpw63Ds8O6w73DgcOJw43Dk8Oaw53DosOqw67DtMO7w4LDisOOw5TDm8Ojw7HDtcODxIDDkcOVw6TDq8Ovw7bDvMO/w4TDi8OPw5bDnMW4w6DDqMOnw4fDn8OYw7jDhcOlw4bDpsWT4oCc4oCdwqvCuydcbiAgKVxuXG5jb25zdCBrZXlzID0ge1xuICBlbjoge1xuICAgIGRlc2NyaXB0aW9uOiAnQ29DNy5FbmdsaXNoJyxcbiAgICBkYk5vbmU6ICdub25lJyxcbiAgICBhcm1vck5vbmU6ICdub25lJyxcbiAgICBhdHRhY2tzUGVyUm91bmROb25lOiAnbm9uZScsXG4gICAgc2FuTG9zc05vbmU6ICdub25lJyxcbiAgICBmdWxsZGI6ICcoJyArICdEYW1hZ2UgQm9udXN8REInICsgJyknLFxuICAgIGhhbGZkYjogJygnICsgJ8K9fGhhbGYnICsgJyknLFxuICAgIHNlY3Rpb25Db21iYXRzOiAnXFxuKD86JyArICdjb21iYXR8ZmlnaHRpbmcgYXR0YWNrcycgKyAnKVs6XFxuXScsXG4gICAgbmV3Q29tYmF0SGVhZGVyOiAnXFxuJyArICdDb21iYXQnICsgJ1xcbicsXG4gICAgc2VjdGlvblNraWxsczogJ1xcbig/OicgKyAnc2tpbGxzJyArICcoPzpcXFxccypcXFxcKFteXFxcXCldK1xcXFwpKT8pWzpcXG5dJyxcbiAgICBzZWN0aW9uTGFuZ2F1Z2VzOiAnXFxuKD86JyArICdsYW5ndWFnZXMnICsgJylbOlxcbl0nLFxuICAgIHNlY3Rpb25TcGVsbHM6ICdcXG4oPzonICsgJ3NwZWxscycgKyAnKVs6XFxuXScsXG4gICAgaGFuZGd1bjpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJyBHdW58UmV2b2x2ZXJ8UGlzdG9sfEhhbmRndW58RGVycmluZ2VyfEJlcmV0dGF8THVnZXJ8RGVzZXJ0IEVhZ2xlfCBcXFxcLjM4JyArXG4gICAgICAnKScsXG4gICAgcmlmbGU6XG4gICAgICAnKD88dHlwZT4nICsgJ1JpZmxlfFNob3RndW58Q2FyYmluZXxHYXVnZSB8TGVlLUVuZmllbGR8RWxlcGhhbnQnICsgJyknLFxuICAgIHNtYjogJyg/PHR5cGU+JyArICdTdWJtYWNoaW5lIEd1bnxUaG9tcHNvbicgKyAnKScsXG4gICAgbWFjaGluZUd1bjogJyg/PHR5cGU+JyArICdCcm93bmluZ3xWaWNrZXJzJyArICcpJyxcbiAgICBsYXVuY2hlZDogJyg/PHR5cGU+JyArICdNb2xvdG92fEdyZW5hZGV8RHluYW1pdGUnICsgJyknLFxuICAgIGV4YW1wbGU6XG4gICAgICAnRXhhbXBsZSBDaGFyYWN0ZXIsIGFnZSAyN1xcblNUUiA3NSBDT04gNjAgU0laIDgwIERFWCA3MCBBUFAgNjAgSU5UIDgwXFxuUE9XIDUwIEVEVSA4NSBTQU4gNTUgSFAgMTQgREI6IDFENFxcbkJ1aWxkOiAxIE1vdmU6IDcgTVA6IDEwIEx1Y2s6IDQwIEFybW9yOiAxXFxuQXR0YWNrcyBwZXIgcm91bmQ6IDMgU0FOIGxvc3M6IDFkNC8xZDhcXG5Db21iYXRcXG5CaXRlIDUwJSAoMjUvMTApLCBkYW1hZ2UgMUQ2XFxuQnJhd2wgMzAlICgxNS82KSwgZGFtYWdlIDFEM1xcbkRlcnJpbmdlciA0MCUgKDIwLzgpLCBkYW1hZ2UgMUQ4KzFcXG5Eb2RnZSA1MCUgKDI1LzEwKVxcblNraWxsc1xcbkFuaW1hbCBIYW5kbGluZyA1NSUsIENoYXJtIDMwJSwgRmlyc3QgQWlkIDI1JSwgRGlzZ3Vpc2UgMjAlLFxcbkxpc3RlbiA1MCUsIE1lZGljaW5lIDQ1JSwgUGVyc3VhZGUgMjUlLCBQc3ljaG9sb2d5IDc1JSxcXG5TY2llbmNlIChBc3Ryb25vbXkpIDkwJSwgU2NpZW5jZSAoQm90YW55KSAzNSUsIFNjaWVuY2UgKFpvb2xvZ3kpIDEwJSxcXG5TcG90IEhpZGRlbiAzNSUsIFN0ZWFsdGggMTAlXFxuTGFuZ3VhZ2VzOiBFbmdsaXNoIDgwJSwgRWtsbyA1JS5cXG5TcGVsbHM6IFN1bW1vbiBOUEMsIERpc3BlbCBOUEMuJ1xuICB9LFxuICBmcjoge1xuICAgIGRlc2NyaXB0aW9uOiAnQ29DNy5GcmVuY2gnLFxuICAgIGRiTm9uZTogJ0FjdW5lJyxcbiAgICBhcm1vck5vbmU6ICcoPzpBY3VuZXxhdWN1bmUpJyxcbiAgICBhdHRhY2tzUGVyUm91bmROb25lOiAnQWN1bmUnLFxuICAgIHNhbkxvc3NOb25lOiAnQWN1bmUnLFxuICAgIGZ1bGxkYjogJygnICsgJ0JEfEJvbnVzIGF1eCBkb21tYWdlc3xJbXBhY3R8SW1wJyArICcpJyxcbiAgICBoYWxmZGI6ICcoJyArICfCvXwxLzIgSW1wfEltcC8yJyArICcpJyxcbiAgICBzZWN0aW9uQ29tYmF0czogJ1xcbig/OicgKyAnQ29tYmF0fEFybWVzfEF0dGFxdWVzJyArICcpWzpcXG5dJyxcbiAgICBuZXdDb21iYXRIZWFkZXI6ICdcXG4nICsgJ0NvbWJhdCcgKyAnXFxuJyxcbiAgICBzZWN0aW9uU2tpbGxzOiAnXFxuKD86JyArICdDb21ww6l0ZW5jZXMnICsgJyg/OlxcXFxzKlxcXFwoW15cXFxcKV0rXFxcXCkpPylbOlxcbl0nLFxuICAgIHNlY3Rpb25MYW5nYXVnZXM6ICdcXG4oPzonICsgJ0xhbmd1ZXM/JyArICcpXFxcXHMqWzpcXG5dJyxcbiAgICBzZWN0aW9uU3BlbGxzOiAnXFxuKD86JyArICdTb3J0aWzDqGdlc1xcXFxzKnxTb3J0cycgKyAnKVs6XFxuXScsXG4gICAgaGFuZGd1bjpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJ1Jldm9sdmVyfFBpc3RvbGV0fERlcnJpbmdlcnxCZXJldHRhfEx1Z2VyfERlc2VydCBFYWdsZXwgXFxcXC4zOCcgK1xuICAgICAgJyknLFxuICAgIHJpZmxlOiAnKD88dHlwZT4nICsgJ0NhcmFiaW5lfExlZS1FbmZpZWxkfEZ1c2lsJyArICcpJyxcbiAgICBzbWI6ICcoPzx0eXBlPicgKyAnU01HfFRob21wc29uJyArICcpJyxcbiAgICBtYWNoaW5lR3VuOiAnKD88dHlwZT4nICsgJ0Jyb3duaW5nfFZpY2tlcnN8TWl0cmFpbGxldXNlJyArICcpJyxcbiAgICBsYXVuY2hlZDpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJ0Jvb21lcmFuZyBkZSBndWVycmV8SmF2ZWxpbmV8UGllcnJlfFNodXJpa2VufELDonRvbiBkZSBkeW5hbWl0ZXxDb2NrdGFpbCBNb2xvdG92fEdyZW5hZGUgw6AgbWFpbnxNb2xvdG92fEdyZW5hZGV8RHluYW1pdGUnICtcbiAgICAgICcpJyxcbiAgICBleGFtcGxlOlxuICAgICAgJ0V4YW1wbGUgQ2hhcmFjdGVyLCAyNyBhbnNcXG5GT1IgNzUgQ09OIDYwIFRBSSA4MCBERVggNzAgQVBQIDYwIElOVCA4MFxcblBPVSA1MCDDiURVIDg1IFNBTiA1NSBQViAxNCBCRDogMUQ0XFxuQ2FycnVyZTogMSBNdnQ6IDcgUE06IDEwIENoYW5jZTogNDAgQXJtdXJlOiAxXFxuQXR0YXF1ZXMgcGFyIHJvdW5kIDMgUGVydGUgZGUgU0FOOiAxZDQvMWQ4XFxuQXR0YXF1ZXNcXG5CaXRlIDUwJSAoMjUvMTApLCBkb21tYWdlIDFENlxcbkJyYXdsIDMwJSAoMTUvNiksIGRvbW1hZ2UgMUQzXFxuRGVycmluZ2VyIDQwJSAoMjAvOCksIGRvbW1hZ2UgMUQ4KzFcXG5Fc3F1aXZlciA1MCUgKDI1LzEwKVxcbkNvbXDDqXRlbmNlc1xcbkFuaW1hbCBIYW5kbGluZyA1NSUsIENoYXJtIDMwJSwgRmlyc3QgQWlkIDI1JSwgRGlzZ3Vpc2UgMjAlLFxcbkxpc3RlbiA1MCUsIE1lZGljaW5lIDQ1JSwgUGVyc3VhZGUgMjUlLCBQc3ljaG9sb2d5IDc1JSxcXG5TY2llbmNlIChBc3Ryb25vbXkpIDkwJSwgU2NpZW5jZSAoQm90YW55KSAzNSUsIFNjaWVuY2UgKFpvb2xvZ3kpIDEwJSxcXG5TcG90IEhpZGRlbiAzNSUsIFN0ZWFsdGggMTAlXFxuTGFuZ3VlOiBFbmdsaXNoIDgwJSwgRWtsbyA1JS5cXG5Tb3J0aWzDqGdlczogU3VtbW9uIE5QQywgRGlzcGVsIE5QQy4nXG4gIH0sXG4gIGVzOiB7XG4gICAgZGVzY3JpcHRpb246ICdDb0M3LlNwYW5pc2gnLFxuICAgIGRiTm9uZTogJ25pbmd1bmEnLFxuICAgIGFybW9yTm9uZTogJ25pbmd1bmEnLFxuICAgIGF0dGFja3NQZXJSb3VuZE5vbmU6ICduaW5ndW5vJyxcbiAgICBzYW5Mb3NzTm9uZTogJ25vJyxcbiAgICBmdWxsZGI6ICcoJyArICdCRHxiZHxib25pZmljYWNpw7NuIGRlIGRhw7FvJyArICcpJyxcbiAgICBoYWxmZGI6ICcoJyArICfCvXxtZWRpbyBkYcOxb3xtaXRhZHxkYcOxbyBhIGxhIG1pdGFkJyArICcpJyxcbiAgICBzZWN0aW9uQ29tYmF0czogJ1xcbig/OicgKyAnQ29tYmF0ZXxBcm1hcycgKyAnKVs6XFxuXScsXG4gICAgbmV3Q29tYmF0SGVhZGVyOiAnXFxuJyArICdDb21iYXRlJyArICdcXG4nLFxuICAgIHNlY3Rpb25Ta2lsbHM6ICdcXG4oPzonICsgJ0hhYmlsaWRhZGVzJyArICcoPzpcXFxccypcXFxcKFteXFxcXCldK1xcXFwpKT8pWzpcXG5dJyxcbiAgICBzZWN0aW9uTGFuZ2F1Z2VzOiAnXFxuKD86JyArICdJZGlvbWFzfExlbmd1YWplc3xMZW5ndWFzJyArICcpWzpcXG5dJyxcbiAgICBzZWN0aW9uU3BlbGxzOiAnXFxuKD86JyArICdDb25qdXJvc3xIZWNoaXpvcycgKyAnKVs6XFxuXScsXG4gICAgaGFuZGd1bjpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJ1Jldm9sdmVyfFBpc3RvbGF8RGVycmluZ2VyfEJlcmV0dGF8THVnZXJ8RGVzZXJ0IEVhZ2xlfCBcXFxcLjM4JyArXG4gICAgICAnKScsXG4gICAgcmlmbGU6XG4gICAgICAnKD88dHlwZT4nICtcbiAgICAgICdSaWZsZXxDYXJhYmluYXxMZWUtRW5maWVsZHxDYXphIEVsZWZhbnRlc3xGdXNpbHxFc2NvcGV0YXxHYWxnYXxSZWNvcnRhZGEnICtcbiAgICAgICcpJyxcbiAgICBzbWI6ICcoPzx0eXBlPicgKyAnU3ViZnVzaWx8VGhvbXBzb24nICsgJyknLFxuICAgIG1hY2hpbmVHdW46ICcoPzx0eXBlPicgKyAnQnJvd25pbmd8Vmlja2Vyc3xBbWV0cmFsbGFkb3JhJyArICcpJyxcbiAgICBsYXVuY2hlZDogJyg/PHR5cGU+JyArICdNb2xvdG92fEdyYW5hZGF8RGluYW1pdGEnICsgJyknLFxuICAgIGV4YW1wbGU6XG4gICAgICAnRXhhbXBsZSBDaGFyYWN0ZXIsIDI3IGHDsW9zXFxuRlVFIDc1IENPTiA2MCBUQU0gODAgREVTIDcwIEFQQSA2MCBJTlQgODBcXG5QT0QgNTAgRURVIDg1IENPUiA1NSBQViAxNCBCRDogMUQ0XFxuQ29ycHVsZW5jaWE6IDEgTW92aW1pZW50bzogNyBQTTogMTAgU3VlcnRlOiA0MCBBcm1hZHVyYTogMVxcbk7Dum1lcm8gZGUgQXRhcXVlcyAzIFDDqXJkaWRhIGRlIGNvcmR1cmE6IDFkNC8xZDhcXG5Db21iYXRlXFxuQml0ZSA1MCUgKDI1LzEwKSwgZGHDsW8gMUQ2XFxuQnJhd2wgMzAlICgxNS82KSwgZGHDsW8gMUQzXFxuRGVycmluZ2VyIDQwJSAoMjAvOCksIGRhw7FvIDFEOCsxXFxuRXNxdWl2YXIgNTAlICgyNS8xMClcXG5IYWJpbGlkYWRlc1xcbkFuaW1hbCBIYW5kbGluZyA1NSUsIENoYXJtIDMwJSwgRmlyc3QgQWlkIDI1JSwgRGlzZ3Vpc2UgMjAlLFxcbkxpc3RlbiA1MCUsIE1lZGljaW5lIDQ1JSwgUGVyc3VhZGUgMjUlLCBQc3ljaG9sb2d5IDc1JSxcXG5TY2llbmNlIChBc3Ryb25vbXkpIDkwJSwgU2NpZW5jZSAoQm90YW55KSAzNSUsIFNjaWVuY2UgKFpvb2xvZ3kpIDEwJSxcXG5TcG90IEhpZGRlbiAzNSUsIFN0ZWFsdGggMTAlXFxuSWRpb21hczogRW5nbGlzaCA4MCUsIEVrbG8gNSUuXFxuQ29uanVyb3M6IFN1bW1vbiBOUEMsIERpc3BlbCBOUEMuJ1xuICB9LFxuICAnemgtVFcnOiB7XG4gICAgZGVzY3JpcHRpb246ICdDb0M3LlRyYWRpdGlvbmFsQ2hpbmVzZScsXG4gICAgZGJOb25lOiAnbm9uZScsXG4gICAgYXJtb3JOb25lOiAnbm9uZScsXG4gICAgYXR0YWNrc1BlclJvdW5kTm9uZTogJ25vbmUnLFxuICAgIHNhbkxvc3NOb25lOiAnbm9uZScsXG4gICAgZnVsbGRiOiAnKCcgKyAnRGFtYWdlIEJvbnVzfERCfOWCt+Wus+WKoOWAvCcgKyAnKScsXG4gICAgLyogTkVXIEtFWSBCRUxPVyAtIFRSQU5TTEFUSU9OIFJFUVVJUkVEICovXG4gICAgaGFsZmRiOiAnKCcgKyAnwr18aGFsZicgKyAnKScsXG4gICAgc2VjdGlvbkNvbWJhdHM6XG4gICAgICAnXFxuKD86JyArICdjb21iYXR8ZmlnaHRpbmcgYXR0YWNrc3zmiLDprKXmioDog7185oiw6ayl5YiX6KGofOatpuWZqCcgKyAnKVs6XFxuXScsXG4gICAgbmV3Q29tYmF0SGVhZGVyOiAnXFxuJyArICdDb21iYXQnICsgJ1xcbicsXG4gICAgc2VjdGlvblNraWxsczpcbiAgICAgICdcXG4oPzonICsgJyg/OlNraWxsc3zmioDog73liJfooagpJyArICcoPzpcXFxccypcXFxcKFteXFxcXCldK1xcXFwpKT8pWzpcXG5dJyxcbiAgICBzZWN0aW9uTGFuZ2F1Z2VzOiAnXFxuKD86JyArICdMYW5ndWFnZXN86Kqe6KiAJyArICcpWzpcXG5dJyxcbiAgICBzZWN0aW9uU3BlbGxzOiAnXFxuKD86JyArICdzcGVsbHN85ZKS5paH5YiX6KGofOWSkuaWhycgKyAnKVs6XFxuXScsXG4gICAgaGFuZGd1bjpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJyDpgYLnmbzmp418XFxcXC4yMuefreWPo+iHquWLleaJi+anjXxcXFxcLjI155+t5Y+j5omL5qeNKOWWrueuoSl8XFxcXC4zMuaIljdcXFxcLjY1bW3lt6bovKrmiYvmp418XFxcXC4zMuaIljdcXFxcLjY1bW3oh6rli5XmiYvmp418XFxcXC4zNTcgTWFnbnVt5bem6Lyq5omL5qeNfFxcXFwuMzjmiJY5bW3lt6bovKrmiYvmp418XFxcXC4zOOiHquWLleaJi+anjXzosp3pm7floZRNOXzmoLzmtJvlhYsxN3w5bW3oh6rli5XmiYvmp4186a2v5qC8UDA4fFxcXFwuNDHlt6bovKrmiYvmp418XFxcXC40NOmmrOagvOWNl+W3pui8quaJi+anjXxcXFxcLjQ15bem6Lyq5omL5qeNfFxcXFwuNDXoh6rli5XmiYvmp4185rKZ5ryg5LmL6be5fEd1bnxSZXZvbHZlcnxQaXN0b2x8SGFuZGd1bnxEZXJyaW5nZXJ8QmVyZXR0YXxMdWdlcnxEZXNlcnQgRWFnbGV8IFxcXFwuMzgnICtcbiAgICAgICcpJyxcbiAgICByaWZsZTpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJ+atpeanjXzljaHos5Pmp4185Y2K6Ieq5YuV5q2l5qeNfOeNteixoeanjXxSaWZsZXxTaG90Z3VufENhcmJpbmV8R2F1Z2UgfExlZS1FbmZpZWxkfEVsZXBoYW50JyArXG4gICAgICAnKScsXG4gICAgc21iOiAnKD88dHlwZT4nICsgJ1N1Ym1hY2hpbmUgR3VufFRob21wc29ufOihnemLkuanjScgKyAnKScsXG4gICAgbWFjaGluZUd1bjogJyg/PHR5cGU+JyArICdCcm93bmluZ3xWaWNrZXJzfOapn+anjScgKyAnKScsXG4gICAgbGF1bmNoZWQ6ICcoPzx0eXBlPicgKyAnTW9sb3RvdnxHcmVuYWRlfER5bmFtaXRl54iG54K454mpfOaJi+amtOW9iHzph43mrablmagnICsgJyknLFxuICAgIGV4YW1wbGU6XG4gICAgICAn56S656+E6KeS6ImyLCDlubTpvaEgMjdcXG7lipvph48gNzUg6auU6LOqIDYwIOmrlOWeiyA4MCDmlY/mjbcgNzAg5aSW6LKOIDYwIOaZuuWKmyA4MFxcbuaEj+W/lyA1MCDmlZnogrIgODUgU0FOIDU1IEhQIDE0IERCOiAxRDRcXG7pq5TmoLw6IDEgTW92ZTogNyBNUDogMTAg5bm46YGLOiA0MCDorbfnlLI6IDFcXG7mlLvmk4rmrKHmlbg6IDMg55CG5pm65Zaq5aSxOiAxZDQvMWQ4XFxu5oiw6ayl5YiX6KGoXFxu5ZKsIDUwJSAoMjUvMTApLCDlgrflrrMgMUQ2XFxu56m65omLIDMwJSAoMTUvNiksIOWCt+WusyAxRDNcXG7miYvmp40gNDAlICgyMC84KSwg5YK35a6zIDFEOCsxXFxu6ZaD6YG/IDUwJSAoMjUvMTApXFxu5oqA6IO95YiX6KGoXFxu5YuV54mp6aa06aSKIDU1JSwg5Y+W5oKFIDMwJSwg5oCl5pWRIDI1JSwg5r2b6KGMIDIwJSxcXG7ogYbogb0gNTAlLCDol6XlrbggNDUlLCDnsr7npZ7liIbmnpAgMjUlLCDlv4PnkIblrbggNzUlLFxcbuenkeWtuCAo5Y+45rOV56eR5a24KSA5MCUsIOenkeWtuCAo5a+G56K85a24KSAzNSUsIFxcbuWBteafpSAzNSUsIOWWrOijnSAxMCVcXG7oqp7oqIA6IOeyteiqniA4MCUsIOiugOWUhyA1JS5cXG7lkpLmloc6IOWPrOWWmiBOUEMsIOaMh+aPriBOUEMuJ1xuICB9XG59XG5cbmNvbnN0IHRyYW5zbGF0aW9ucyA9IHtcbiAgZW46IHtcbiAgICBhZ2U6ICcoPzwhW2Etel0pJyArICdhZ2UnICsgJyhcXFxccyo6KT9cXFxccysoPzxhZ2U+XFxcXGQrKVssXFxcXHNdKicsXG4gICAgb2NjdXBhdGlvbjpcbiAgICAgICdbLFxcXFxzXSonICsgJ09jY3VwYXRpb24nICsgJyhcXFxccyo6KT9cXFxccysoPzxvY2N1cGF0aW9uPi4rKVssXFxcXHNcXG5dKicsXG4gICAgc3RyOiAnKD88IVthLXpdKScgKyAnU1RSJyArICcoXFxcXHMqOik/XFxcXHMqKD88c3RyPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgY29uOiAnKD88IVthLXpdKScgKyAnQ09OJyArICcoXFxcXHMqOik/XFxcXHMqKD88Y29uPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2l6OiAnKD88IVthLXpdKScgKyAnU0laJyArICcoXFxcXHMqOik/XFxcXHMqKD88c2l6PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaW50OiAnKD88IVthLXpdKScgKyAnSU5UJyArICcoXFxcXHMqOik/XFxcXHMqKD88aW50PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgcG93OiAnKD88IVthLXpdKScgKyAnUE9XJyArICcoXFxcXHMqOik/XFxcXHMqKD88cG93PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGV4OiAnKD88IVthLXpdKScgKyAnREVYJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZGV4PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXBwOiAnKD88IVthLXpdKScgKyAnQVBQJyArICcoXFxcXHMqOik/XFxcXHMqKD88YXBwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZWR1OiAnKD88IVthLXpdKScgKyAnRURVJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZWR1PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2FuOlxuICAgICAgJyg/PCFbYS16XSkoPzonICsgJ1NBTnxTYW5pdHknICsgJykoXFxcXHMqOik/XFxcXHMqKD88c2FuPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaHA6XG4gICAgICAnKD88IVthLXpdKSg/OicgKyAnSFB8SGl0IHBvaW50cycgKyAnKShcXFxccyo6KT9cXFxccyooPzxocD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIG1wOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdNUHxNYWdpYyBwb2ludHMnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PG1wPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGI6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAga2V5cy5lbi5mdWxsZGIgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88ZGI+WystXT9cXFxcZCsoPzpkXFxcXGQrfERcXFxcZCspP3wnICtcbiAgICAgIGtleXMuZW4uZGJOb25lICtcbiAgICAgICcpWyxcXFxcc1xcbl0qJyxcbiAgICBidWlsZDogJyg/PCFbYS16XSknICsgJ0J1aWxkJyArICcoXFxcXHMqOik/XFxcXHMrKD88YnVpbGQ+WystXT9cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBhcm1vcjpcbiAgICAgICcoPzwhW2Etel0pJyArXG4gICAgICAnQXJtb3InICtcbiAgICAgICcoXFxcXHMqOik/XFxcXHMrKD88YXJtb3I+JyArXG4gICAgICBrZXlzLmVuLmFybW9yTm9uZSArXG4gICAgICAnfFxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIG1vdjogJyg/PCFbYS16XSknICsgJ01vdmUnICsgJyhcXFxccyo6KT9cXFxccyooPzxtb3Y+XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbGNrOiAnKD88IVthLXpdKScgKyAnTHVjaycgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGxjaz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGF0dGFja3NQZXJSb3VuZDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnQXR0YWNrcyBwZXIgcm91bmR8IyBBdHRhY2tzJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxhdHRhY2tzUGVyUm91bmQ+JyArXG4gICAgICBrZXlzLmVuLmF0dGFja3NQZXJSb3VuZE5vbmUgK1xuICAgICAgJ3xcXFxcZCsoPyFkKSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbkxvc3M6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1Nhbml0eSBsb3NzfFNBTiBsb3NzJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxzYW5Mb3NzPicgK1xuICAgICAga2V5cy5lbi5zYW5Mb3NzTm9uZSArXG4gICAgICAnfFxcXFxkRD9bK1xcXFxkXSpcXFxcL1xcXFxkRD9bK1xcXFxkXSopWyxcXFxcc1xcbl0qJyxcbiAgICB3ZWFwb246XG4gICAgICAnKF58XFxcXG4pKD88bmFtZT5bLlxcXFx0ICcgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKShcXFxcKiosP1xcXFxzK3xcXFxcKikoPzpcXFxcKHwoPzxwZXJjZW50YWdlPlxcXFxkKyklLD8oPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXClcXFxccyosPyk/KT8oXFxcXHMqJyArXG4gICAgICAnZGFtYWdlJyArXG4gICAgICAnKT9cXFxccysoPzxkYW1hZ2U+KDo/KDo/XFxcXGQrZCk/XFxcXGQrKFxcXFxzKi9cXFxccyp8XFxcXHMqWystXVxcXFxzKig/OicgK1xuICAgICAga2V5cy5lbi5mdWxsZGIgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZW4uaGFsZmRiICtcbiAgICAgICcpXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooOj9cXFxcZCtkKT9cXFxcZCspKikrKVxcXFwpPycsXG4gICAgd2VhcG9uRG9kZ2U6XG4gICAgICAnKD88bmFtZT4nICtcbiAgICAgICdEb2RnZScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspXFxcXCk/XFxcXHMqJSg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKSk/JyxcbiAgICAvLyBTa2lsbCBzaG91bGQgbm90IGJlIG5hbWVkIFwiVGhlIHBsYXllciBoYXNcIiAvIFwiYnV0IHRoZXkgcmVnZW5lcmF0ZVwiIHJlcXVpcmVkIGZvciBcIkEgQ29sZCBGaXJlIFdpdGhpblwiXG4gICAgc2tpbGw6XG4gICAgICAnXig/PG5hbWU+WzpcXFxcKi5cXFxccycgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKD88IScgK1xuICAgICAgJ1RoZSBwbGF5ZXIgaGFzfGJ1dCB0aGV5IHJlZ2VuZXJhdGUnICtcbiAgICAgICcpKVxcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVteZF0lP1xcXFwpPyhcXFxccypcXFxcKFxcXFxkKy9cXFxcZCtcXFxcKSk/W1xcXFwuLF0/XFxcXHMqJyxcbiAgICBndWVzc1N0YXJ0Q29tYmF0OiAnKF58KD88ISwpXFxuKSgnICsgJ0ZpZ2h0aW5nfEZpcmVhcm1zfEJyYXdsfEJpdGUnICsgJyknLFxuICAgIG5hbWU6ICdeKD88bmFtZT5bXFxcXC5cXFxccycgKyBuYW1lQ2hhcmFjdGVycyArICddKylbLFxcXFxzXFxuXSsnLFxuICAgIHNlY3Rpb25zOlxuICAgICAgJygnICtcbiAgICAgIGtleXMuZW4uc2VjdGlvbkNvbWJhdHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZW4uc2VjdGlvblNraWxscyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5lbi5zZWN0aW9uTGFuZ2F1Z2VzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmVuLnNlY3Rpb25TcGVsbHMgK1xuICAgICAgJyknXG4gIH0sXG4gIGZyOiB7XG4gICAgYWdlOiAnKD88YWdlPlxcXFxkKylcXFxccyonICsgJ2FucycgKyAnKD8hW2Etel0pWyxcXFxcc10qJyxcbiAgICBvY2N1cGF0aW9uOlxuICAgICAgJ1ssXFxcXHNdKicgKyAnT2NjdXBhdGlvbicgKyAnKFxcXFxzKjopP1xcXFxzKyg/PG9jY3VwYXRpb24+LispWyxcXFxcc1xcbl0qJyxcbiAgICBzdHI6ICcoPzwhW2Etel0pJyArICdGT1InICsgJyhcXFxccyo6KT9cXFxccyooPzxzdHI+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBjb246ICcoPzwhW2Etel0pJyArICdDT04nICsgJyhcXFxccyo6KT9cXFxccyooPzxjb24+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzaXo6ICcoPzwhW2Etel0pJyArICdUQUknICsgJyhcXFxccyo6KT9cXFxccyooPzxzaXo+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBpbnQ6ICcoPzwhW2Etel0pJyArICdJTlQnICsgJyhcXFxccyo6KT9cXFxccyooPzxpbnQ+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBwb3c6ICcoPzwhW2Etel0pJyArICdQT1UnICsgJyhcXFxccyo6KT9cXFxccyooPzxwb3c+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkZXg6ICcoPzwhW2Etel0pJyArICdERVgnICsgJyhcXFxccyo6KT9cXFxccyooPzxkZXg+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhcHA6ICcoPzwhW2Etel0pJyArICdBUFAnICsgJyhcXFxccyo6KT9cXFxccyooPzxhcHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBlZHU6ICcoPzwhW2Etel0pJyArICfDiURVJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZWR1PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2FuOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdTQU58U2FudMOpIE1lbnRhbGUnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PHNhbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGhwOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdQVnxQb2ludHMgZGUgdmllJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxocD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIG1wOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdQTXxQb2ludHMgZGUgbWFnaWUnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PG1wPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGI6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAga2V5cy5mci5mdWxsZGIgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88ZGI+WystXT9cXFxcZCsoPzpkXFxcXGQrfERcXFxcZCspP3wnICtcbiAgICAgIGtleXMuZnIuZGJOb25lICtcbiAgICAgICcpWyxcXFxcc1xcbl0qJyxcbiAgICBidWlsZDpcbiAgICAgICcoPzwhW2Etel0pJyArICdDYXJydXJlJyArICcoXFxcXHMqOik/XFxcXHMrKD88YnVpbGQ+WystXT9cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBhcm1vcjpcbiAgICAgICcoPzwhW2Etel0pJyArXG4gICAgICAnQXJtdXJlfFByb3RlY3Rpb24nICtcbiAgICAgICcoXFxcXHMqOik/XFxcXHMrKD88YXJtb3I+JyArXG4gICAgICBrZXlzLmZyLmFybW9yTm9uZSArXG4gICAgICAnfFxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIG1vdjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnTXZ0fE1vdXZlbWVudHxEw6lwbGFjZW1lbnQnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PG1vdj5cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBsY2s6ICcoPzwhW2Etel0pJyArICdDaGFuY2UnICsgJyhcXFxccyo6KT9cXFxccysoPzxsY2s+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhdHRhY2tzUGVyUm91bmQ6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ0F0dGFxdWVzIHBhciByb3VuZCcgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88YXR0YWNrc1BlclJvdW5kPicgK1xuICAgICAga2V5cy5mci5hdHRhY2tzUGVyUm91bmROb25lICtcbiAgICAgICd8XFxcXGQrKD8hZCkpWyxcXFxcc1xcbl0qJyxcbiAgICBzYW5Mb3NzOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdQZXJ0ZSBkZSBTYW50w6kgbWVudGFsZXxQZXJ0ZSBkZSBTQU4nICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PHNhbkxvc3M+JyArXG4gICAgICBrZXlzLmZyLnNhbkxvc3NOb25lICtcbiAgICAgICd8XFxcXGREP1srXFxcXGRdKlxcXFwvXFxcXGREP1srXFxcXGRdKilbLFxcXFxzXFxuXSonLFxuICAgIHdlYXBvbjpcbiAgICAgICcoXnxcXFxcbikoPzxuYW1lPlsuXFxcXHQgJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSspKFxcXFwqKiw/XFxcXHMrfFxcXFwqKSg/OlxcXFwofCg/PHBlcmNlbnRhZ2U+XFxcXGQrKSUsPyg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKVxcXFxzKiw/KT8pPyhcXFxccyooPzonICtcbiAgICAgICdkb21tYWdlfGTDqWfDonRzJyArXG4gICAgICAnKSk/XFxcXHMrKD88ZGFtYWdlPig6Pyg6P1xcXFxkK2QpP1xcXFxkKyhcXFxccyovXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooPzonICtcbiAgICAgIGtleXMuZnIuZnVsbGRiICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmZyLmhhbGZkYiArXG4gICAgICAnKVxcXFxzKnxcXFxccypbKy1dXFxcXHMqKDo/XFxcXGQrZCk/XFxcXGQrKSopKylcXFxcKT8nLFxuICAgIHdlYXBvbkRvZGdlOlxuICAgICAgJyg/PG5hbWU+JyArXG4gICAgICAnRXNxdWl2ZXI/JyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylcXFxcKT9cXFxccyolKD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpKT8nLFxuICAgIHNraWxsOlxuICAgICAgJ14oPzxuYW1lPls6XFxcXCouXFxcXHMnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKyg/PCEnICtcbiAgICAgICdUaGUgcGxheWVyIGhhc3xidXQgdGhleSByZWdlbmVyYXRlJyArXG4gICAgICAnKSlcXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylbXmRdJT9cXFxcKT8oXFxcXHMqXFxcXChcXFxcZCsvXFxcXGQrXFxcXCkpP1tcXFxcLixdP1xcXFxzKicsXG4gICAgZ3Vlc3NTdGFydENvbWJhdDpcbiAgICAgICcoXnwoPzwhLClcXG4pKCcgKyAnQXUgY29udGFjdHzDgCBkaXN0YW5jZXxDb21iYXQgcmFwcHJvY2jDqXxCaXRlJyArICcpJyxcbiAgICBuYW1lOiAnXig/PG5hbWU+W1xcXFwuXFxcXHMnICsgbmFtZUNoYXJhY3RlcnMgKyAnXSspWyxcXFxcc1xcbl0rJyxcbiAgICBzZWN0aW9uczpcbiAgICAgICcoJyArXG4gICAgICBrZXlzLmZyLnNlY3Rpb25Db21iYXRzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmZyLnNlY3Rpb25Ta2lsbHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZnIuc2VjdGlvbkxhbmdhdWdlcyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5mci5zZWN0aW9uU3BlbGxzICtcbiAgICAgICcpJ1xuICB9LFxuICBlczoge1xuICAgIGFnZTogJyg/PGFnZT5cXFxcZCspXFxcXHMqJyArICdhW8Oxw5Fdb3MnICsgJyg/IVthLXpdKVssXFxcXHNdKicsXG4gICAgb2NjdXBhdGlvbjpcbiAgICAgICdbLFxcXFxzXSonICsgJ09jdXBhY2nDs24nICsgJyhcXFxccyo6KT9cXFxccysoPzxvY2N1cGF0aW9uPi4rKVssXFxcXHNcXG5dKicsXG4gICAgc3RyOiAnKD88IVthLXpdKScgKyAnRlVFJyArICcoXFxcXHMqOik/XFxcXHMqKD88c3RyPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgY29uOiAnKD88IVthLXpdKScgKyAnQ09OJyArICcoXFxcXHMqOik/XFxcXHMqKD88Y29uPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2l6OiAnKD88IVthLXpdKScgKyAnVEFNJyArICcoXFxcXHMqOik/XFxcXHMqKD88c2l6PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaW50OiAnKD88IVthLXpdKScgKyAnSU5UJyArICcoXFxcXHMqOik/XFxcXHMqKD88aW50PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgcG93OiAnKD88IVthLXpdKScgKyAnUE9EJyArICcoXFxcXHMqOik/XFxcXHMqKD88cG93PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGV4OiAnKD88IVthLXpdKScgKyAnREVTJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZGV4PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXBwOiAnKD88IVthLXpdKScgKyAnQVBBJyArICcoXFxcXHMqOik/XFxcXHMqKD88YXBwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZWR1OiAnKD88IVthLXpdKScgKyAnRURVJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZWR1PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2FuOlxuICAgICAgJyg/PCFbYS16XSkoPzonICsgJ0NPUnxDb3JkdXJhJyArICcpKFxcXFxzKjopP1xcXFxzKig/PHNhbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGhwOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdQVnxQdW50b3MgZGUgdmlkYXxQXFxcXC4gP1ZcXFxcLicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88aHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBtcDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnUE18UHVudG9zIE3DoWdpY29zfFB1bnRvcyBkZSBNYWdpYScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88bXA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkYjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICBrZXlzLmVzLmZ1bGxkYiArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxkYj5bKy1dP1xcXFxkKyg/OmRcXFxcZCt8RFxcXFxkKyk/fCcgK1xuICAgICAga2V5cy5lcy5kYk5vbmUgK1xuICAgICAgJylbLFxcXFxzXFxuXSonLFxuICAgIGJ1aWxkOlxuICAgICAgJyg/PCFbYS16XSknICsgJ0NvcnB1bGVuY2lhJyArICcoXFxcXHMqOik/XFxcXHMrKD88YnVpbGQ+WystXT9cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBhcm1vcjpcbiAgICAgICcoPzwhW2Etel0pJyArXG4gICAgICAnQXJtYWR1cmEnICtcbiAgICAgICcoXFxcXHMqOik/XFxcXHMrKD88YXJtb3I+JyArXG4gICAgICBrZXlzLmVzLmFybW9yTm9uZSArXG4gICAgICAnfFxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIG1vdjogJyg/PCFbYS16XSknICsgJ01vdmltaWVudG8nICsgJyhcXFxccyo6KT9cXFxccyooPzxtb3Y+XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbGNrOiAnKD88IVthLXpdKScgKyAnU3VlcnRlJyArICcoXFxcXHMqOik/XFxcXHMrKD88bGNrPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXR0YWNrc1BlclJvdW5kOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdOw7ptZXJvIGRlIEF0YXF1ZXMnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGF0dGFja3NQZXJSb3VuZD4nICtcbiAgICAgIGtleXMuZXMuYXR0YWNrc1BlclJvdW5kTm9uZSArXG4gICAgICAnfFxcXFxkKyg/IWQpKVssXFxcXHNcXG5dKicsXG4gICAgc2FuTG9zczpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnUMOpcmRpZGEgZGUgY29yZHVyYXxQw6lyZGlkYSBkZSBDT1InICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PHNhbkxvc3M+JyArXG4gICAgICBrZXlzLmVzLnNhbkxvc3NOb25lICtcbiAgICAgICd8XFxcXGREP1srXFxcXGRdKlxcXFwvXFxcXGREP1srXFxcXGRdKilbLFxcXFxzXFxuXSonLFxuICAgIHdlYXBvbjpcbiAgICAgICcoXnxcXFxcbikoPzxuYW1lPlsuXFxcXHQgJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSspKFxcXFwqKiw/XFxcXHMrfFxcXFwqKSg/OlxcXFwofCg/PHBlcmNlbnRhZ2U+XFxcXGQrKSUsPyg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKVxcXFxzKiw/KT8pPyhcXFxccyonICtcbiAgICAgICdkYcOxbycgK1xuICAgICAgJyk/XFxcXHMrKD88ZGFtYWdlPig6Pyg6P1xcXFxkK2QpP1xcXFxkKyhcXFxccyovXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooPzonICtcbiAgICAgIGtleXMuZXMuZnVsbGRiICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmVzLmhhbGZkYiArXG4gICAgICAnKVxcXFxzKnxcXFxccypbKy1dXFxcXHMqKDo/XFxcXGQrZCk/XFxcXGQrKSopKylcXFxcKT8nLFxuICAgIHdlYXBvbkRvZGdlOlxuICAgICAgJyg/PG5hbWU+JyArXG4gICAgICAnRXNxdWl2YXInICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVxcXFwpP1xcXFxzKiUoPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXCkpPycsXG4gICAgc2tpbGw6XG4gICAgICAnXig/PG5hbWU+WzpcXFxcKi5cXFxccycgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKD88IScgK1xuICAgICAgJ1RoZSBwbGF5ZXIgaGFzfGJ1dCB0aGV5IHJlZ2VuZXJhdGUnICtcbiAgICAgICcpKVxcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVteZF0lP1xcXFwpPyhcXFxccypcXFxcKFxcXFxkKy9cXFxcZCtcXFxcKSk/W1xcXFwuLF0/XFxcXHMqJyxcbiAgICBndWVzc1N0YXJ0Q29tYmF0OlxuICAgICAgJyhefCg/PCEsKVxcbikoJyArICdDb21iYXRpcnxBcm1hcyBkZSBmdWVnb3xCcmF3bHxCaXRlJyArICcpJyxcbiAgICBuYW1lOiAnXig/PG5hbWU+W1xcXFwuXFxcXHMnICsgbmFtZUNoYXJhY3RlcnMgKyAnXSspWyxcXFxcc1xcbl0rJyxcbiAgICBzZWN0aW9uczpcbiAgICAgICcoJyArXG4gICAgICBrZXlzLmVzLnNlY3Rpb25Db21iYXRzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmVzLnNlY3Rpb25Ta2lsbHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZXMuc2VjdGlvbkxhbmdhdWdlcyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5lcy5zZWN0aW9uU3BlbGxzICtcbiAgICAgICcpJ1xuICB9LFxuICAnemgtVFcnOiB7XG4gICAgYWdlOiAnKD88IVthLXpdKScgKyAnYWdlfOW5tOm9oScgKyAnKFxcXFxzKjopP1xcXFxzKig/PGFnZT5cXFxcZCspWyxcXFxcc10qJyxcbiAgICAvKiBORVcgS0VZIEJFTE9XIC0gVFJBTlNMQVRJT04gUkVRVUlSRUQgKi9cbiAgICBvY2N1cGF0aW9uOlxuICAgICAgJ1ssXFxcXHNdKicgKyAnT2NjdXBhdGlvbicgKyAnKFxcXFxzKjopP1xcXFxzKyg/PG9jY3VwYXRpb24+LispWyxcXFxcc1xcbl0qJyxcbiAgICBzdHI6ICcoPzwhW2Etel0pJyArICdTVFJ85Yqb6YePJyArICcoXFxcXHMqOik/XFxcXHMqKD88c3RyPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgY29uOiAnKD88IVthLXpdKScgKyAnQ09OfOmrlOizqicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGNvbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNpejogJyg/PCFbYS16XSknICsgJ1NJWnzpq5TlnosnICsgJyhcXFxccyo6KT9cXFxccyooPzxzaXo+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBpbnQ6ICcoPzwhW2Etel0pJyArICdJTlR85pm65YqbJyArICcoXFxcXHMqOik/XFxcXHMqKD88aW50PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgcG93OiAnKD88IVthLXpdKScgKyAnUE9XfOaEj+W/lycgKyAnKFxcXFxzKjopP1xcXFxzKig/PHBvdz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRleDogJyg/PCFbYS16XSknICsgJ0RFWHzmlY/mjbcnICsgJyhcXFxccyo6KT9cXFxccyooPzxkZXg+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhcHA6ICcoPzwhW2Etel0pJyArICdBUFB85aSW6LKOJyArICcoXFxcXHMqOik/XFxcXHMqKD88YXBwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZWR1OiAnKD88IVthLXpdKScgKyAnRURVfOaVmeiCsicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGVkdT5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnU0FOfFNhbml0eXznkIbmmbonICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PHNhbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGhwOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdIUHxIaXQgcG9pbnRzfOeUn+WRvScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88aHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBtcDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnTVB8TWFnaWMgcG9pbnRzJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxtcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRiOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgIGtleXNbJ3poLVRXJ10uZnVsbGRiICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PGRiPlsrLV0/XFxcXGQrKD86ZFxcXFxkK3xEXFxcXGQrKT98JyArXG4gICAgICBrZXlzWyd6aC1UVyddLmRiTm9uZSArXG4gICAgICAnKVssXFxcXHNcXG5dKicsXG4gICAgYnVpbGQ6XG4gICAgICAnKD88IVthLXpdKScgKyAnQnVpbGR86auU5qC8JyArICcoXFxcXHMqOik/XFxcXHMqKD88YnVpbGQ+WystXT9cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBhcm1vcjpcbiAgICAgICcoPzwhW2Etel0pJyArXG4gICAgICAnQXJtb3J86K2355SyJyArXG4gICAgICAnKFxcXFxzKjopP1xcXFxzKig/PGFybW9yPicgK1xuICAgICAga2V5c1snemgtVFcnXS5hcm1vck5vbmUgK1xuICAgICAgJ3xcXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBtb3Y6ICcoPzwhW2Etel0pJyArICdNb3ZlJyArICcoXFxcXHMqOik/XFxcXHMqKD88bW92PlxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGxjazogJyg/PCFbYS16XSknICsgJ0x1Y2t85bm46YGLJyArICcoXFxcXHMqOik/XFxcXHMqKD88bGNrPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXR0YWNrc1BlclJvdW5kOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdBdHRhY2tzIHBlciByb3VuZHwjIEF0dGFja3N85pS75pOK5qyh5pW4fCMg5pS75pOKJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxhdHRhY2tzUGVyUm91bmQ+JyArXG4gICAgICBrZXlzWyd6aC1UVyddLmF0dGFja3NQZXJSb3VuZE5vbmUgK1xuICAgICAgJ3xcXFxcZCsoPyFkKSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbkxvc3M6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1Nhbml0eSBsb3NzfFNBTiBsb3NzfOeQhuaZuuWWquWksXxTQU7lgLzmkI3lpLF8U0FO5YC85Zaq5aSxfOaJo1NBTicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88c2FuTG9zcz4nICtcbiAgICAgIGtleXNbJ3poLVRXJ10uc2FuTG9zc05vbmUgK1xuICAgICAgJ3xcXFxcZEQ/WytcXFxcZF0qXFxcXC9cXFxcZEQ/WytcXFxcZF0qKVssXFxcXHNcXG5dKicsXG4gICAgd2VhcG9uOlxuICAgICAgJyhefFxcXFxuKSg/PG5hbWU+Wy5cXFxcdCAnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKykoXFxcXCoqLD9cXFxccyt8XFxcXCopKD86XFxcXCh8KD88cGVyY2VudGFnZT5cXFxcZCspJSw/KD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpXFxcXHMqLD8pPyk/KFxcXFxzKig/OicgK1xuICAgICAgJ2RhbWFnZXzlgrflrrMnICtcbiAgICAgICcpKT9cXFxccysoPzxkYW1hZ2U+KDo/KDo/XFxcXGQrZCk/XFxcXGQrKFxcXFxzKi9cXFxccyp8XFxcXHMqWystXVxcXFxzKig/OicgK1xuICAgICAga2V5c1snemgtVFcnXS5mdWxsZGIgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXNbJ3poLVRXJ10uaGFsZmRiICtcbiAgICAgICcpXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooOj9cXFxcZCtkKT9cXFxcZCspKikrKVxcXFwpPycsXG4gICAgd2VhcG9uRG9kZ2U6XG4gICAgICAnKD88bmFtZT4nICtcbiAgICAgICdEb2RnZXzploPpgb986ZaD6LqyJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylcXFxcKT9cXFxccyolPyg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKSk/JyxcbiAgICBza2lsbDpcbiAgICAgICdeKD88bmFtZT5bOlxcXFwqLlxcXFxzJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSsoPzwhJyArXG4gICAgICAnVGhlIHBsYXllciBoYXN8YnV0IHRoZXkgcmVnZW5lcmF0ZScgK1xuICAgICAgJykpXFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspW15kXSU/XFxcXCk/KFxcXFxzKlxcXFwoXFxcXGQrL1xcXFxkK1xcXFwpKT9bXFxcXC4sXT9cXFxccyonLFxuICAgIGd1ZXNzU3RhcnRDb21iYXQ6ICcoXnwoPzwhLClcXG4pKCcgKyAn6L+R5oiw5oqA6IO9fOWwhOaTiuaKgOiDvXxCcmF3bHxCaXRlJyArICcpJyxcbiAgICBuYW1lOiAnXig/PG5hbWU+W1xcXFwuXFxcXHMnICsgbmFtZUNoYXJhY3RlcnMgKyAnXSspWyxcXFxcc1xcbl0rJyxcbiAgICBzZWN0aW9uczpcbiAgICAgICcoJyArXG4gICAgICBrZXlzWyd6aC1UVyddLnNlY3Rpb25Db21iYXRzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzWyd6aC1UVyddLnNlY3Rpb25Ta2lsbHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXNbJ3poLVRXJ10uc2VjdGlvbkxhbmdhdWdlcyArXG4gICAgICAnfCcgK1xuICAgICAga2V5c1snemgtVFcnXS5zZWN0aW9uU3BlbGxzICtcbiAgICAgICcpJ1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cCB7XG4gIHN0YXRpYyBjaGVja0xhbmd1YWdlIChsYW5nID0gbnVsbCkge1xuICAgIGlmICghbGFuZykge1xuICAgICAgbGFuZyA9IGdhbWUuaTE4bi5sYW5nXG4gICAgfVxuICAgIGlmICh0eXBlb2YgdHJhbnNsYXRpb25zW2xhbmddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgbGFuZyA9ICdlbidcbiAgICB9XG4gICAgcmV0dXJuIGxhbmdcbiAgfVxuXG4gIHN0YXRpYyBnZXRFeGFtcGxlVGV4dCAobGFuZykge1xuICAgIGxldCBleGFtcGxlID0ga2V5cy5lbi5leGFtcGxlXG4gICAgaWYgKHR5cGVvZiBrZXlzW2xhbmddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZXhhbXBsZSA9IGtleXNbbGFuZ10uZXhhbXBsZVxuICAgIH1cbiAgICByZXR1cm4gZXhhbXBsZVxuICB9XG5cbiAgc3RhdGljIGdldFRyYW5zbGF0aW9ucyAoKSB7XG4gICAgY29uc3Qgb3V0cHV0ID0ge31cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBrZXlzKSB7XG4gICAgICBvdXRwdXRba2V5XSA9IGtleXNba2V5XS5kZXNjcmlwdGlvblxuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0XG4gIH1cblxuICBzdGF0aWMgZ2V0S2V5cyAobGFuZykge1xuICAgIHJldHVybiBrZXlzW2xhbmddIHx8IGtleXMuZW5cbiAgfVxuXG4gIHN0YXRpYyBnZXRSZWd1bGFyRXhwcmVzc2lvbnMgKGxhbmcpIHtcbiAgICByZXR1cm4gdHJhbnNsYXRpb25zW2xhbmddIHx8IHRyYW5zbGF0aW9ucy5lblxuICB9XG59XG4iLCIvKiBnbG9iYWwgQWN0b3IsIENPTkZJRywgZHVwbGljYXRlLCBGb2xkZXIsIGdhbWUsIHVpICovXG5pbXBvcnQgeyBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cCB9IGZyb20gJy4vYWN0b3ItaW1wb3J0ZXItcmVnZXhwLmpzJ1xuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW1zL2l0ZW0uanMnXG5cbi8qKlxuICogQ29DN0FjdG9ySW1wb3J0ZXIgaGVscGVyIGNsYXNzIHRvIGltcG9ydCBhbiBBY3RvciBmcm9tIHRoZSByYXcgdGV4dCBkZXNjcmlwdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdBY3RvckltcG9ydGVyIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMucGFyc2VkID0ge31cbiAgICB0aGlzLml0ZW1Mb2NhdGlvbnMgPSAnJ1xuICB9XG5cbiAgc3RhdGljIGdldCBhc051bWJlciAoKSB7XG4gICAgcmV0dXJuICduJ1xuICB9XG5cbiAgc3RhdGljIGdldCBhc1N0cmluZyAoKSB7XG4gICAgcmV0dXJuICdzJ1xuICB9XG5cbiAgLyoqXG4gICAqIGdldFJlZ0V4LCBnZXQgUmVnRXhwIG9iamVjdCBpZiBub3QgY3VycmVudGx5IGEgUmVnRXhwIG9iamVjdFxuICAgKiBAcGFyYW0ge01peGVkfSByZWdleCBSZWdFeHAgb3Igc3RyaW5nXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtb2RpZmllcnMgaWYgc3RyaW5nIHdhcyBzdXBwbGllZCBpbiByZWdleCBsaXN0IG9mIG1vZGlmaWVycyB0byBhZGQgdG8gdGhlIFJlZ0V4cFxuICAgKiBAcmV0dXJucyB7UmVnRXhwfVxuICAgKi9cbiAgZ2V0UmVnRXggKHJlZ2V4LCBtb2RpZmllcnMgPSAnaXUnKSB7XG4gICAgaWYgKHJlZ2V4LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnUmVnRXhwJykge1xuICAgICAgcmV0dXJuIHJlZ2V4XG4gICAgfVxuICAgIHJldHVybiBuZXcgUmVnRXhwKHJlZ2V4LCBtb2RpZmllcnMpXG4gIH1cblxuICAvKipcbiAgICogY2xlYW5TdHJpbmcsIHJlbW92ZXMgbmV3IGxpbmUgYW5kIGNhcnJpZXIgcmV0dXJuIGNoYXJhY3RlciBhbmQgbGF0ZXJhbCBzcGFjZXMgZnJvbSBhIHN0cmluZ1xuICAgKiBAcGFyYW0ge1N0cmluZ30gcyB0aGUgc3RyaW5nIHRvIGNsZWFuXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IHRoZSBjbGVhbmVkIHN0cmluZ1xuICAgKi9cbiAgY2xlYW5TdHJpbmcgKHMpIHtcbiAgICByZXR1cm4gc1xuICAgICAgLnJlcGxhY2UoLyhcXG58XFxyKS9nLCAnICcpXG4gICAgICAucmVwbGFjZSgvXlxccyovLCAnJylcbiAgICAgIC5yZXBsYWNlKC9cXHMqXFwuP1xccypcXC4/JC8sICcnKVxuICB9XG5cbiAgLyoqXG4gICAqIHRvSFRNTCwgY29udmVydHMgYSBzdHJpbmcgdG8gSFRNTCBzdHJpcGluZyBvdXQgZW1wdHkgbGluZXMgb3IgbGluZXMgdGhhdCBjb250YWluIGp1c3QgLCBvciAuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzIHRoZSBzdHJpbmcgdG8gY29udmVydFxuICAgKiBAcmV0dXJucyB7U3RyaW5nfSB0aGUgSFRNTCBvciBhbiBlbXB0eSBzdHJpbmdcbiAgICovXG4gIHRvSFRNTCAocykge1xuICAgIGlmIChzLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAnJ1xuICAgIH1cbiAgICBzID0gc1xuICAgICAgLnRyaW0oKVxuICAgICAgLnNwbGl0KCdcXG4nKVxuICAgICAgLm1hcCh0ZXh0ID0+IHRleHQudHJpbSgpLnJlcGxhY2UoL15bLC5cXHNdKyQvLCAnJykpXG4gICAgICAuZmlsdGVyKHRleHQgPT4gdGV4dClcbiAgICAgIC5qb2luKCc8L3A+PHA+JylcbiAgICBpZiAocy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAnJ1xuICAgIH1cbiAgICByZXR1cm4gJzxwPicgKyBzICsgJzwvcD4nXG4gIH1cblxuICAvKipcbiAgICogY2hlY2sgZXhwZWN0cyBhIGtleSBmcm9tIHRoaXMucmVnRXggd2lsbCBhdHRlbXB0IHRvIG1hdGNoIHRoZSB0ZXh0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSByZWdFeEtleSBrZXkgaW4gdGhpcy5yZWdFeFxuICAgKiBAcGFyYW0ge0pTT059XG4gICAqIC0gcmVtb3ZlRnJvbVRleHQgcmVtb3ZlIGZyb20gdGhpcy50ZXh0XG4gICAqIC0gc2F2ZUtleXMgYWRkIGdyb3VwIGtleXMgdG8gdGhpcy5wYXJzZWRcbiAgICogLSB0eXBlIElmIGFkZGluZyB3aXRoIHNhdmVLZXlzIHNldCB0eXBlIChDb0M3QWN0b3JJbXBvcnRlci5hc1N0cmluZyAvIENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyKVxuICAgKiAtIHRleHQgSWYgc2V0IHVzZSB0aGlzIGluc3RlYWQgb2YgdGhpcy50ZXh0XG4gICAqIC0gcmVxdWlyZWRHcm91cCBJZiBub3QgZmFsc2UgcmVxdWlyZSBzcGVjaWZpZWQga2V5IGluIFJlZ0V4cCBncm91cHNcbiAgICogQHJldHVybnMge0ZhbHNlfS97SlNPTiBncm91cHMgJycgaXMgbWF0Y2hlZCBzdHJpbmd9XG4gICAqL1xuICBjaGVjayAoXG4gICAgcmVnRXhLZXksXG4gICAge1xuICAgICAgcmVtb3ZlRnJvbVRleHQgPSB0cnVlLFxuICAgICAgc2F2ZUtleXMgPSB0cnVlLFxuICAgICAgdHlwZSA9IENvQzdBY3RvckltcG9ydGVyLmFzU3RyaW5nLFxuICAgICAgdGV4dCA9IGZhbHNlLFxuICAgICAgcmVxdWlyZWRHcm91cCA9IGZhbHNlXG4gICAgfSA9IHt9XG4gICkge1xuICAgIGxldCBvdXRwdXQgPSBmYWxzZVxuICAgIGxldCByZWdFeHAgPSBmYWxzZVxuICAgIGlmICh0eXBlb2YgdGhpcy5yZWdFeFtyZWdFeEtleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZWdFeHAgPSB0aGlzLmdldFJlZ0V4KHRoaXMucmVnRXhbcmVnRXhLZXldKVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMua2V5c1tyZWdFeEtleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZWdFeHAgPSB0aGlzLmdldFJlZ0V4KHRoaXMua2V5c1tyZWdFeEtleV0pXG4gICAgfVxuICAgIGlmIChyZWdFeHAgIT09IGZhbHNlKSB7XG4gICAgICBpZiAodGV4dCA9PT0gZmFsc2UpIHtcbiAgICAgICAgdGV4dCA9IHRoaXMudGV4dFxuICAgICAgfVxuICAgICAgY29uc3QgY2hlY2sgPSByZWdFeHAuZXhlYyh0ZXh0KVxuICAgICAgbGV0IHZhbHVlID0gbnVsbFxuICAgICAgaWYgKFxuICAgICAgICBjaGVjayAhPT0gbnVsbCAmJlxuICAgICAgICAocmVxdWlyZWRHcm91cCA9PT0gZmFsc2UgfHxcbiAgICAgICAgICB0eXBlb2YgKGNoZWNrLmdyb3VwcyB8fCB7fSlbcmVxdWlyZWRHcm91cF0gIT09ICd1bmRlZmluZWQnKVxuICAgICAgKSB7XG4gICAgICAgIG91dHB1dCA9IGNoZWNrLmdyb3VwcyB8fCB7fVxuICAgICAgICBpZiAocmVtb3ZlRnJvbVRleHQpIHtcbiAgICAgICAgICB0aGlzLnRleHQgPSB0aGlzLnRleHQucmVwbGFjZShjaGVja1swXS50cmltKCksICdcXG4nKS50cmltKClcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2F2ZUtleXMpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhjaGVjay5ncm91cHMpKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBDb0M3QWN0b3JJbXBvcnRlci5hc1N0cmluZzpcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlZFtrZXldID0gU3RyaW5nKGNoZWNrLmdyb3Vwc1trZXldKS5yZXBsYWNlKCdcXG4nLCAnICcpXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgY2FzZSBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlcjpcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IE51bWJlcihjaGVjay5ncm91cHNba2V5XSlcbiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZWRba2V5XSA9IE51bWJlcihjaGVjay5ncm91cHNba2V5XSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb3V0cHV0Wyctc291cmNlJ10gPSBjaGVja1swXVxuICAgICAgICBvdXRwdXRbJy1pbmRleCddID0gY2hlY2suaW5kZXhcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dFxuICB9XG5cbiAgLyoqXG4gICAqIHByb2Nlc3NDb21iYXQgZXh0cmFjdHMgY29tYmF0IC8gZG9kZ2UgaW5mb3JtYXRpb24gZnJvbSBhIHN1YnNlY3Rpb24gb2YgdGV4dFxuICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dCB0aGUgcmF3IHRleHQgb2YgdGhlIGNvbWJhdCBzZWN0aW9uXG4gICAqIEByZXR1cm5zIHZvaWRcbiAgICovXG4gIHByb2Nlc3NDb21iYXQgKHRleHQpIHtcbiAgICBpZiAodGV4dC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdjb21iYXQgdGV4dCcsIHRleHQpXG4gICAgfVxuICAgIGxldCB3ZWFwb25cbiAgICBsZXQgZG9kZ2VcbiAgICBsZXQgbmV3bGluZVxuICAgIGxldCBsYXN0UGVyY2VudCA9IGZhbHNlXG4gICAgbGV0IG1heExvb3BzID0gNDBcbiAgICBkbyB7XG4gICAgICBtYXhMb29wcy0tXG4gICAgICB0ZXh0ID0gdGV4dC50cmltKClcbiAgICAgIGlmIChcbiAgICAgICAgKGRvZGdlID0gdGhpcy5jaGVjaygnd2VhcG9uRG9kZ2UnLCB7IHNhdmVLZXlzOiBmYWxzZSwgdGV4dDogdGV4dCB9KSlcbiAgICAgICkge1xuICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKGRvZGdlWyctc291cmNlJ10sICdcXG4nKVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMucGFyc2VkLnNraWxscyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aGlzLnBhcnNlZC5za2lsbHMgPSBbXVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFyc2VkLnNraWxscy5wdXNoKHtcbiAgICAgICAgICBuYW1lOiB0aGlzLmNsZWFuU3RyaW5nKGRvZGdlLm5hbWUpLFxuICAgICAgICAgIHZhbHVlOiBOdW1iZXIoZG9kZ2UucGVyY2VudGFnZSksXG4gICAgICAgICAgcHVzaDogZmFsc2VcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICh3ZWFwb24gPSB0aGlzLmNoZWNrKCd3ZWFwb24nLCB7XG4gICAgICAgICAgc2F2ZUtleXM6IGZhbHNlLFxuICAgICAgICAgIHRleHQ6IHRleHQsXG4gICAgICAgICAgcmVxdWlyZWRHcm91cDogbGFzdFBlcmNlbnQgPT09IGZhbHNlID8gJ3BlcmNlbnRhZ2UnIDogZmFsc2VcbiAgICAgICAgfSkpXG4gICAgICApIHtcbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZSh3ZWFwb25bJy1zb3VyY2UnXSwgJ1xcbicpXG4gICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLmNsZWFuU3RyaW5nKHdlYXBvbi5uYW1lIHx8ICcnKVxuICAgICAgICBsZXQgZGFtYWdlID0gdGhpcy5jbGVhblN0cmluZyh3ZWFwb24uZGFtYWdlIHx8ICcnKVxuICAgICAgICBjb25zdCBpc1JhbmdlZCA9ICEhKFxuICAgICAgICAgIHRoaXMuY2hlY2soJ2hhbmRndW4nLCB7XG4gICAgICAgICAgICB0ZXh0OiBuYW1lLFxuICAgICAgICAgICAgcmVtb3ZlRnJvbVRleHQ6IGZhbHNlLFxuICAgICAgICAgICAgc2F2ZUtleXM6IGZhbHNlXG4gICAgICAgICAgfSkgfHxcbiAgICAgICAgICB0aGlzLmNoZWNrKCdyaWZsZScsIHtcbiAgICAgICAgICAgIHRleHQ6IG5hbWUsXG4gICAgICAgICAgICByZW1vdmVGcm9tVGV4dDogZmFsc2UsXG4gICAgICAgICAgICBzYXZlS2V5czogZmFsc2VcbiAgICAgICAgICB9KSB8fFxuICAgICAgICAgIHRoaXMuY2hlY2soJ3NtYicsIHtcbiAgICAgICAgICAgIHRleHQ6IG5hbWUsXG4gICAgICAgICAgICByZW1vdmVGcm9tVGV4dDogZmFsc2UsXG4gICAgICAgICAgICBzYXZlS2V5czogZmFsc2VcbiAgICAgICAgICB9KSB8fFxuICAgICAgICAgIHRoaXMuY2hlY2soJ21hY2hpbmVHdW4nLCB7XG4gICAgICAgICAgICB0ZXh0OiBuYW1lLFxuICAgICAgICAgICAgcmVtb3ZlRnJvbVRleHQ6IGZhbHNlLFxuICAgICAgICAgICAgc2F2ZUtleXM6IGZhbHNlXG4gICAgICAgICAgfSkgfHxcbiAgICAgICAgICB0aGlzLmNoZWNrKCdsYXVuY2hlZCcsIHtcbiAgICAgICAgICAgIHRleHQ6IG5hbWUsXG4gICAgICAgICAgICByZW1vdmVGcm9tVGV4dDogZmFsc2UsXG4gICAgICAgICAgICBzYXZlS2V5czogZmFsc2VcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICAgIGlmIChcbiAgICAgICAgICB3ZWFwb24ucGVyY2VudGFnZSAhPT0gbnVsbCAmJlxuICAgICAgICAgIHR5cGVvZiB3ZWFwb24ucGVyY2VudGFnZSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgKSB7XG4gICAgICAgICAgbGFzdFBlcmNlbnQgPSBOdW1iZXIod2VhcG9uLnBlcmNlbnRhZ2UpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGFzdFBlcmNlbnQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgbGV0IGZvdW5kXG4gICAgICAgIGxldCBhaGRiID0gZmFsc2VcbiAgICAgICAgbGV0IGFkZGIgPSBmYWxzZVxuICAgICAgICBkbyB7XG4gICAgICAgICAgZm91bmQgPSB0aGlzLmdldFJlZ0V4KFxuICAgICAgICAgICAgJ1xcXFxzKlsrLV0/XFxcXHMqKCcgK1xuICAgICAgICAgICAgICB0aGlzLmtleXMuaGFsZmRiICtcbiAgICAgICAgICAgICAgJylcXFxccyooJyArXG4gICAgICAgICAgICAgIHRoaXMua2V5cy5mdWxsZGIgK1xuICAgICAgICAgICAgICAnKT9bLStdP1xcXFxzKignICtcbiAgICAgICAgICAgICAgdGhpcy5wYXJzZWQuZGIucmVwbGFjZSgvXlstK10vLCAnJykgK1xuICAgICAgICAgICAgICAnKT8nXG4gICAgICAgICAgKS5leGVjKGRhbWFnZSlcbiAgICAgICAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgICAgIGFoZGIgPSB0cnVlXG4gICAgICAgICAgICBkYW1hZ2UgPSBkYW1hZ2UucmVwbGFjZShmb3VuZFswXSwgJycpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvdW5kID0gdGhpcy5nZXRSZWdFeChcbiAgICAgICAgICAgICAgJ1xcXFxzKlsrLV0/XFxcXHMqKCcgK1xuICAgICAgICAgICAgICAgIHRoaXMua2V5cy5mdWxsZGIgK1xuICAgICAgICAgICAgICAgICcpXFxcXHMqWy0rXT9cXFxccyooJyArXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJzZWQuZGIucmVwbGFjZSgvXlstK10vLCAnJykgK1xuICAgICAgICAgICAgICAgICcpPydcbiAgICAgICAgICAgICkuZXhlYyhkYW1hZ2UpXG4gICAgICAgICAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgICAgICAgYWRkYiA9IHRydWVcbiAgICAgICAgICAgICAgZGFtYWdlID0gZGFtYWdlLnJlcGxhY2UoZm91bmRbMF0sICcnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSB3aGlsZSAoZm91bmQpXG4gICAgICAgIGNvbnN0IGRhbWFnZXMgPSBkYW1hZ2Uuc3BsaXQoJy8nKVxuICAgICAgICBjb25zdCBpc1Nob3RndW4gPSBkYW1hZ2VzLmxlbmd0aCA9PT0gM1xuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgdHlwZTogJ3dlYXBvbicsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgc2tpbGw6IHtcbiAgICAgICAgICAgICAgaWQ6IGxhc3RQZXJjZW50XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHJvcGVydGllczoge30sXG4gICAgICAgICAgICByYW5nZToge1xuICAgICAgICAgICAgICBub3JtYWw6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogaXNTaG90Z3VuID8gMTAgOiAwLFxuICAgICAgICAgICAgICAgIGRhbWFnZTogZGFtYWdlc1swXVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBsb25nOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGlzU2hvdGd1biA/IDIwIDogMCxcbiAgICAgICAgICAgICAgICBkYW1hZ2U6IGlzU2hvdGd1biA/IGRhbWFnZXNbMV0gOiAnJ1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBleHRyZW1lOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGlzU2hvdGd1biA/IDUwIDogMCxcbiAgICAgICAgICAgICAgICBkYW1hZ2U6IGlzU2hvdGd1biA/IGRhbWFnZXNbMl0gOiAnJ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFNldCBzb21lIG9mIHRoZSBwcm9wZXJ0aWVzXG4gICAgICAgIGRhdGEuZGF0YS5wcm9wZXJ0aWVzLnNob3RndW4gPSBpc1Nob3RndW5cbiAgICAgICAgZGF0YS5kYXRhLnByb3BlcnRpZXMucm5nZCA9IGlzUmFuZ2VkIHx8IGlzU2hvdGd1blxuICAgICAgICBkYXRhLmRhdGEucHJvcGVydGllcy5tZWxlZSA9ICFkYXRhLmRhdGEucHJvcGVydGllcy5ybmdkXG4gICAgICAgIGRhdGEuZGF0YS5wcm9wZXJ0aWVzLmFoZGIgPSBhaGRiXG4gICAgICAgIGRhdGEuZGF0YS5wcm9wZXJ0aWVzLmFkZGIgPSBhZGRiXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5wYXJzZWQuYXR0YWNrcyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aGlzLnBhcnNlZC5hdHRhY2tzID0gW11cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBhcnNlZC5hdHRhY2tzLnB1c2goZGF0YSlcbiAgICAgIH0gZWxzZSBpZiAoKG5ld2xpbmUgPSB0ZXh0Lm1hdGNoKC9eKC4rKVxcbi8pKSkge1xuICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKG5ld2xpbmVbMF0sICdcXG4nKVxuICAgICAgfSBlbHNlIGlmICgobmV3bGluZSA9IHRleHQubWF0Y2goL15bXlxcbl0rJC8pKSkge1xuICAgICAgICB0ZXh0ID0gJydcbiAgICAgIH1cbiAgICB9IHdoaWxlIChtYXhMb29wcyA+IDAgJiYgKCEhd2VhcG9uIHx8ICEhZG9kZ2UgfHwgISF0ZXh0KSlcbiAgICBpZiAobWF4TG9vcHMgPT09IDApIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgJ1VuZXhwZWN0ZWQgd2VhcG9ucyB0ZXh0LCBwbGVhc2UgcmFpc2UgYSBidWcgcmVwb3J0IHdpdGggdGhlIHRleHQgeW91IGFyZSBhdHRlbXB0aW5nIHRvIGltcG9ydCdcbiAgICAgIClcbiAgICAgIGNvbnNvbGUuZGVidWcoJ1VuZXhwZWN0ZWQgd2VhcG9uczonLCB0ZXh0KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBwcm9jZXNzU2tpbGxzIGV4dHJhY3RzIHNraWxscyAvIGxhbmd1YWdlIGluZm9ybWF0aW9uIGZyb20gYSBzdWJzZWN0aW9uIG9mIHRleHRcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRleHQgdGhlIHJhdyB0ZXh0IG9mIHRoZSBza2lsbHMgLyBsYW5ndWFnZSBzZWN0aW9uXG4gICAqIEByZXR1cm5zIHZvaWRcbiAgICovXG4gIHByb2Nlc3NTa2lsbHMgKHRleHQsIGtleSA9ICdza2lsbHMnKSB7XG4gICAgaWYgKHRleHQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGJyZWFrcyA9IHRleHQuc3BsaXQoL1xcLlxccj9cXG4vKVxuICAgIGlmIChicmVha3MubGVuZ3RoID4gMSkge1xuICAgICAgdGV4dCA9IGJyZWFrc1swXVxuICAgIH1cbiAgICBsZXQgc2tpbGxcbiAgICBsZXQgbWF4TG9vcHMgPSA0MFxuICAgIGRvIHtcbiAgICAgIG1heExvb3BzLS1cbiAgICAgIHRleHQgPSB0ZXh0LnRyaW0oKVxuICAgICAgc2tpbGwgPSB0aGlzLmNoZWNrKCdza2lsbCcsIHsgc2F2ZUtleXM6IGZhbHNlLCB0ZXh0OiB0ZXh0IH0pXG4gICAgICBpZiAoc2tpbGwpIHtcbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZShza2lsbFsnLXNvdXJjZSddLCAnXFxuJylcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnBhcnNlZFtrZXldID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRoaXMucGFyc2VkW2tleV0gPSBbXVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFyc2VkW2tleV0ucHVzaCh7XG4gICAgICAgICAgbmFtZTogdGhpcy5jbGVhblN0cmluZyhza2lsbC5uYW1lKSxcbiAgICAgICAgICB2YWx1ZTogTnVtYmVyKHNraWxsLnBlcmNlbnRhZ2UpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSB3aGlsZSAobWF4TG9vcHMgPiAwICYmIHNraWxsKVxuICAgIGlmIChtYXhMb29wcyA9PT0gMCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAnVW5leHBlY3RlZCBza2lsbHMgdGV4dCwgcGxlYXNlIHJhaXNlIGEgYnVnIHJlcG9ydCB3aXRoIHRoZSB0ZXh0IHlvdSBhcmUgYXR0ZW1wdGluZyB0byBpbXBvcnQnXG4gICAgICApXG4gICAgICBjb25zb2xlLmRlYnVnKCdVbmV4cGVjdGVkIHNraWxsczonLCB0ZXh0KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBwcm9jZXNzU3BlbGxzIGV4dHJhY3RzIHNwZWxsIGluZm9ybWF0aW9uIGZyb20gYSBzdWJzZWN0aW9uIG9mIHRleHRcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRleHQgdGhlIHJhdyB0ZXh0IG9mIHRoZSBzcGVsbCBzZWN0aW9uXG4gICAqIEByZXR1cm5zIHZvaWRcbiAgICovXG4gIHByb2Nlc3NTcGVsbHMgKHRleHQpIHtcbiAgICBpZiAodGV4dC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgYnJlYWtzID0gdGV4dC5zcGxpdCgvXFwuXFxyP1xcbi8pXG4gICAgaWYgKGJyZWFrcy5sZW5ndGggPiAxKSB7XG4gICAgICB0ZXh0ID0gYnJlYWtzWzBdXG4gICAgfVxuICAgIGNvbnN0IHNwZWxsc0FyciA9IHRleHQucmVwbGFjZSgvKFtcXG5cXHJdKykvZywgJyAnKS5zcGxpdCgvKD88IVxcKFteKV0rKSwvKVxuICAgIHRoaXMudGV4dCA9IHRoaXMudGV4dC5yZXBsYWNlKHRleHQudHJpbSgpLCAnXFxuJylcbiAgICBmb3IgKGNvbnN0IHNwZWxsIG9mIHNwZWxsc0Fycikge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLnBhcnNlZC5zcGVsbHMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMucGFyc2VkLnNwZWxscyA9IFtdXG4gICAgICB9XG4gICAgICB0aGlzLnBhcnNlZC5zcGVsbHMucHVzaCh0aGlzLmNsZWFuU3RyaW5nKHNwZWxsKSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogcGFyc2VDaGFyYWN0ZXIgZXh0cmFjdHMgaW5mb3JtYXRpb24gZnJvbSB0aGUgcmF3IHRleHQgZGVzY3JpcHRpb24gb2YgYW4gZW50aXR5IChOUEMgb3IgQ3JlYXR1cmUpXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IHRoZSByYXcgdGV4dCBvZiB0aGUgZW50aXR5XG4gICAqIEByZXR1cm5zIGV4dHJhY3RlZERhdGEgb2JqZWN0IHdpdGggdGhlIGVudGl0eSBkYXRhXG4gICAqL1xuICBhc3luYyBwYXJzZUNoYXJhY3RlciAodGV4dCkge1xuICAgIC8vIFJlcGxhY2UgXCJFbiBEYXNoXCIgYW5kIFwiRW0gRGFzaFwiIGRhc2hlcyB3aXRoIC0gYW5kIFwiUmlnaHQgU2luZ2xlIFF1b3RhdGlvbiBNYXJrXCIgd2l0aCAnXG4gICAgdGhpcy50ZXh0ID0gU3RyaW5nKHRleHQpXG4gICAgICAudHJpbSgpXG4gICAgICAucmVwbGFjZSgvXFx1MjAxM3xcXHUyMDE0fFxcdTIyMTIvZywgJy0nKVxuICAgICAgLnJlcGxhY2UoL1xcdTIwMTkvZywgXCInXCIpXG4gICAgICAucmVwbGFjZSgvW1xcdWRiYzAtXFx1ZGJmZV1bXFx1ZGMwMC1cXHVkZmZmXS9nLCAnJylcbiAgICAvLyBFYXJsaWVzdCBjaGFyYWN0ZXIgdGhhdCBoYXMgYmVlbiB1c2VkLCB0byB3b3JrIG91dCB0aGUgaGVhZGVyXG4gICAgbGV0IG1pbiA9IHRoaXMudGV4dC5sZW5ndGhcbiAgICAvLyBTVFIsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgbGV0IGNoZWNrID0gdGhpcy5jaGVjaygnc3RyJywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVtcbiAgICAgICctaW5kZXgnXG4gICAgXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBDT04sIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdjb24nLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBTSVosIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdzaXonLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBJTlQsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdpbnQnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBQT1csIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdwb3cnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBERVgsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdkZXgnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBBUFAsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdhcHAnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBFRFUsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdlZHUnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBTQU4sIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdzYW4nLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBIUCwgaWYgYmVyZm9yZSB0aGFuIHByZXZpb3VzIG1pbiB1cGRhdGUgaXRcbiAgICBjaGVjayA9IHRoaXMuY2hlY2soJ2hwJywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gTVAsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdtcCcsIHsgdHlwZTogQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIgfSlbJy1pbmRleCddXG4gICAgaWYgKCFpc05hTihjaGVjaykpIHtcbiAgICAgIG1pbiA9IE1hdGgubWluKG1pbiwgY2hlY2spXG4gICAgfVxuICAgIC8vIFdvcmsgb3V0IHRoZSBoZWFkZXIgYmFzZWQgb24gcHJldmlvdXMgbWluaW11bSBtYXRjaGVkIGNoYXJhY3RlclxuICAgIGxldCBoZWFkZXJcbiAgICBpZiAobWluID4gMCkge1xuICAgICAgaGVhZGVyID0gdGhpcy50ZXh0LnN1YnN0cigwLCBtaW4pXG4gICAgICAvLyBHZXQgbmFtZSBmcm9tIGhlYWRlclxuICAgICAgY2hlY2sgPSB0aGlzLmNoZWNrKCduYW1lJywgeyB0ZXh0OiBoZWFkZXIgfSlcbiAgICAgIGlmIChjaGVjayA9PT0gZmFsc2UpIHtcbiAgICAgICAgLy8gSWYgbm90IGZvdW5kIHVzZSBkZWZhdWx0IE5QQyBuYW1lXG4gICAgICAgIHRoaXMucGFyc2VkLm5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW1wb3J0ZWRVbm5hbWVkQ2hhcmFjdGVyJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFJlbW92ZSBuYW1lIGZyb20gaGVhZGVyXG4gICAgICAgIGhlYWRlciA9IGhlYWRlci5yZXBsYWNlKGNoZWNrWyctc291cmNlJ10sICdcXG4nKVxuICAgICAgfVxuICAgICAgLy8gR2V0IGFnZSBmcm9tIGhlYWRlclxuICAgICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdhZ2UnLCB7IHRleHQ6IGhlYWRlciB9KVxuICAgICAgaWYgKGNoZWNrICE9PSBmYWxzZSkge1xuICAgICAgICAvLyBJZiBmb3VuZCByZW1vdmUgYWdlIGZyb20gaGVhZGVyXG4gICAgICAgIGhlYWRlciA9IGhlYWRlci5yZXBsYWNlKGNoZWNrWyctc291cmNlJ10sICdcXG4nKVxuICAgICAgfVxuICAgICAgLy8gR2V0IG9jY3VwYXRpb24gZnJvbSBoZWFkZXJcbiAgICAgIGlmICghdGhpcy5jaGVjaygnb2NjdXBhdGlvbicsIHsgdGV4dDogaGVhZGVyIH0pICYmIGhlYWRlci50cmltKCkgIT09ICcnKSB7XG4gICAgICAgIC8vIElmIG9jY3VwYXRpb24gaXMgbm90IGZvdW5kIGJ1dCB0aGVyZSBpcyBhIGhlYWRlciBzZXQgdGhlIG9jY3VwYXRpb24gdG8gdGhlIHJlbWFpbmluZyBoZWFkZXJcbiAgICAgICAgbGV0IG9jY3VwYXRpb24gPSBoZWFkZXJcbiAgICAgICAgaWYgKGhlYWRlci5pbmRleE9mKCcuJykgPiAtMSkge1xuICAgICAgICAgIC8vIElmIHRoZXJlIGlzIGEgZnVsbCBzdG9wIGp1c3QgdXNlIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSBoZWFkZXIgYXMgdGhlIG9jY3VwYXRpb25cbiAgICAgICAgICBvY2N1cGF0aW9uID0gaGVhZGVyLnN1YnN0cigwLCBoZWFkZXIuaW5kZXhPZignLicpICsgMSlcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBhcnNlZC5vY2N1cGF0aW9uID0gb2NjdXBhdGlvblxuICAgICAgICAgIC5yZXBsYWNlKC8oW1xcblxccl0rKS9nLCAnICcpXG4gICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgIC5yZXBsYWNlKC8sJC8sICcnKVxuICAgICAgICB0aGlzLnRleHQgPSB0aGlzLnRleHQucmVwbGFjZShvY2N1cGF0aW9uLnRyaW0oKSwgJ1xcbicpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRoZXJlIGlzIG5vIGhlYWRlciBzZXQgZGVmYXVsdCBOUEMgbmFtZVxuICAgICAgdGhpcy5wYXJzZWQubmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JbXBvcnRlZFVubmFtZWRDaGFyYWN0ZXInKVxuICAgIH1cbiAgICAvLyBJZiB0aGVyZSBpcyBhbiBvY2N1cGF0aW9uIGJ1dCBubyBhZ2UgY2hlY2sgaWYgdGhlIG9jY3VwYXRpb24gc3RhcnRzIG51bWJlciBzcGxpdCBhZ2UgYW5kIG9jY3VwYXRpb25cbiAgICBpZiAoXG4gICAgICB0eXBlb2YgdGhpcy5wYXJzZWQub2NjdXBhdGlvbiAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiB0aGlzLnBhcnNlZC5hZ2UgPT09ICd1bmRlZmluZWQnXG4gICAgKSB7XG4gICAgICBjb25zdCBvY2N1cGF0aW9uQWdlID0gdGhpcy5wYXJzZWQub2NjdXBhdGlvbi5tYXRjaChcbiAgICAgICAgL14oPzxhZ2U+XFxkKyksKD88b2NjdXBhdGlvbj4uKykkL1xuICAgICAgKVxuICAgICAgaWYgKG9jY3VwYXRpb25BZ2UpIHtcbiAgICAgICAgdGhpcy5wYXJzZWQuYWdlID0gb2NjdXBhdGlvbkFnZS5ncm91cHMuYWdlXG4gICAgICAgIHRoaXMucGFyc2VkLm9jY3VwYXRpb24gPSBvY2N1cGF0aW9uQWdlLmdyb3Vwcy5vY2N1cGF0aW9uLnRyaW0oKVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBHZXQgZGFtYWdlIGJvbnVzLCBpZiBub3QgZm91bmQgb3Igbm9uZSBzZXQgdG8gMFxuICAgIGlmIChcbiAgICAgICF0aGlzLmNoZWNrKCdkYicpIHx8XG4gICAgICB0aGlzLmNoZWNrKCdkYk5vbmUnLCB7XG4gICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgc2F2ZUtleXM6IGZhbHNlLFxuICAgICAgICB0ZXh0OiB0aGlzLnBhcnNlZC5kYlxuICAgICAgfSlcbiAgICApIHtcbiAgICAgIHRoaXMucGFyc2VkLmRiID0gJzAnXG4gICAgfVxuICAgIC8vIEdldCBidWlsZFxuICAgIHRoaXMuY2hlY2soJ2J1aWxkJylcbiAgICAvLyBHZXQgYXJtb3IsIGlmIG5vdCBmb3VuZCBvciBub25lIHNldCB0byAwXG4gICAgaWYgKFxuICAgICAgIXRoaXMuY2hlY2soJ2FybW9yJykgfHxcbiAgICAgIHRoaXMuY2hlY2soJ2FybW9yTm9uZScsIHtcbiAgICAgICAgcmVtb3ZlRnJvbVRleHQ6IGZhbHNlLFxuICAgICAgICBzYXZlS2V5czogZmFsc2UsXG4gICAgICAgIHRleHQ6IHRoaXMucGFyc2VkLmFybW9yXG4gICAgICB9KVxuICAgICkge1xuICAgICAgdGhpcy5wYXJzZWQuYXJtb3IgPSAnMCdcbiAgICB9XG4gICAgLy8gR2V0IG1vdmVtZW50XG4gICAgdGhpcy5jaGVjaygnbW92JywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVxuICAgIC8vIEdldCBsdWNrXG4gICAgdGhpcy5jaGVjaygnbGNrJywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVxuICAgIC8vIEdldCBzYW5pdHkgbG9zc1xuICAgIHRoaXMuY2hlY2soJ3Nhbkxvc3MnKVxuICAgIC8vIEdldCBhdHRhY2tzIHBlciByb3VuZCwgaWYgbm90IGZvdW5kIG9yIG5vbmUgc2V0IHRvIDBcbiAgICBpZiAoXG4gICAgICB0aGlzLmNoZWNrKCdhdHRhY2tzUGVyUm91bmQnKSAmJlxuICAgICAgdGhpcy5jaGVjaygnYXR0YWNrc1BlclJvdW5kTm9uZScsIHtcbiAgICAgICAgcmVtb3ZlRnJvbVRleHQ6IGZhbHNlLFxuICAgICAgICBzYXZlS2V5czogZmFsc2UsXG4gICAgICAgIHRleHQ6IHRoaXMucGFyc2VkLmF0dGFja3NQZXJSb3VuZFxuICAgICAgfSlcbiAgICApIHtcbiAgICAgIHRoaXMucGFyc2VkLmF0dGFja3NQZXJSb3VuZCA9ICcwJ1xuICAgIH1cbiAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhIGNvbWJhdCBzZWN0aW9uXG4gICAgdGhpcy50ZXh0ID0gJ1xcbicgKyB0aGlzLnRleHRcbiAgICBsZXQgc2VjdGlvbnMgPSB0aGlzLmdldFJlZ0V4KCcoJyArIHRoaXMua2V5cy5zZWN0aW9uQ29tYmF0cyArICcpJywgJ2knKVxuICAgIGlmICh0aGlzLnRleHQubWF0Y2goc2VjdGlvbnMpID09PSBudWxsKSB7XG4gICAgICAvLyBJZiB0aGVyZSBpcyBubyBjb21iYXQgc2VjdGlvbiBndWVzcyB3aGVyZSBpdCBzdGFydHNcbiAgICAgIHNlY3Rpb25zID0gdGhpcy5jaGVjaygnZ3Vlc3NTdGFydENvbWJhdCcsIHtcbiAgICAgICAgc2F2ZUtleXM6IGZhbHNlLFxuICAgICAgICByZW1vdmVGcm9tVGV4dDogZmFsc2VcbiAgICAgIH0pXG4gICAgICBpZiAoc2VjdGlvbnMpIHtcbiAgICAgICAgLy8gQWRkIGEgaGVhZGVyIHRvIHRoZSBzdGFydCBvZiB0aGUgY29tYmF0IHNlY3Rpb25cbiAgICAgICAgdGhpcy50ZXh0ID0gW1xuICAgICAgICAgIHRoaXMudGV4dC5zbGljZSgwLCBzZWN0aW9uc1snLWluZGV4J10pLFxuICAgICAgICAgIHRoaXMua2V5cy5uZXdDb21iYXRIZWFkZXIsXG4gICAgICAgICAgdGhpcy50ZXh0LnNsaWNlKHNlY3Rpb25zWyctaW5kZXgnXSlcbiAgICAgICAgXS5qb2luKCcnKVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBTcGxpdCB0aGUgc2VjdGlvbnMgQ29tYmF0LCBTa2lsbHMsIExhbmd1YWdlcywgYW5kIFNwZWxsc1xuICAgIGNvbnN0IHJlZ0V4cFNlY3Rpb25zID0gdGhpcy5nZXRSZWdFeCh0aGlzLnJlZ0V4LnNlY3Rpb25zLCAnaScpXG4gICAgc2VjdGlvbnMgPSB0aGlzLnRleHQuc3BsaXQocmVnRXhwU2VjdGlvbnMpXG4gICAgaWYgKHNlY3Rpb25zICE9PSBudWxsKSB7XG4gICAgICBmb3IgKGxldCBpID0gMCwgaW0gPSBzZWN0aW9ucy5sZW5ndGg7IGkgPCBpbTsgaSsrKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBzZWN0aW9uc1tpXS5tYXRjaChcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVnRXgoJygnICsgdGhpcy5rZXlzLnNlY3Rpb25Db21iYXRzICsgJyknLCAnaScpXG4gICAgICAgICAgKSAhPT0gbnVsbCAmJlxuICAgICAgICAgIHR5cGVvZiBzZWN0aW9uc1tpICsgMV0gIT09ICd1bmRlZmluZWQnXG4gICAgICAgICkge1xuICAgICAgICAgIC8vIElmIHNlY3Rpb24gaXMgY29tYmF0XG4gICAgICAgICAgdGhpcy50ZXh0ID0gKCdcXG4nICsgdGhpcy50ZXh0ICsgJ1xcbicpXG4gICAgICAgICAgICAucmVwbGFjZShzZWN0aW9uc1tpXSwgJ1xcbicpXG4gICAgICAgICAgICAudHJpbSgpXG4gICAgICAgICAgdGhpcy5wcm9jZXNzQ29tYmF0KHNlY3Rpb25zW2kgKyAxXSlcbiAgICAgICAgICBpKytcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBzZWN0aW9uc1tpXS5tYXRjaChcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVnRXgoJygnICsgdGhpcy5rZXlzLnNlY3Rpb25Ta2lsbHMgKyAnKScsICdpJylcbiAgICAgICAgICApICE9PSBudWxsICYmXG4gICAgICAgICAgdHlwZW9mIHNlY3Rpb25zW2kgKyAxXSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgKSB7XG4gICAgICAgICAgLy8gSWYgc2VjdGlvbiBpcyBza2lsbHNcbiAgICAgICAgICB0aGlzLnRleHQgPSAoJ1xcbicgKyB0aGlzLnRleHQgKyAnXFxuJylcbiAgICAgICAgICAgIC5yZXBsYWNlKHNlY3Rpb25zW2ldLCAnXFxuJylcbiAgICAgICAgICAgIC50cmltKClcbiAgICAgICAgICB0aGlzLnByb2Nlc3NTa2lsbHMoc2VjdGlvbnNbaSArIDFdKVxuICAgICAgICAgIGkrK1xuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIHNlY3Rpb25zW2ldLm1hdGNoKFxuICAgICAgICAgICAgdGhpcy5nZXRSZWdFeCgnKCcgKyB0aGlzLmtleXMuc2VjdGlvbkxhbmdhdWdlcyArICcpJywgJ2knKVxuICAgICAgICAgICkgIT09IG51bGwgJiZcbiAgICAgICAgICB0eXBlb2Ygc2VjdGlvbnNbaSArIDFdICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICApIHtcbiAgICAgICAgICAvLyBJZiBzZWN0aW9uIGlzIGxhbmd1YWdlc1xuICAgICAgICAgIHRoaXMudGV4dCA9ICgnXFxuJyArIHRoaXMudGV4dCArICdcXG4nKVxuICAgICAgICAgICAgLnJlcGxhY2Uoc2VjdGlvbnNbaV0sICdcXG4nKVxuICAgICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgIHRoaXMucHJvY2Vzc1NraWxscyhzZWN0aW9uc1tpICsgMV0sICdsYW5ndWFnZXMnKVxuICAgICAgICAgIGkrK1xuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIHNlY3Rpb25zW2ldLm1hdGNoKFxuICAgICAgICAgICAgdGhpcy5nZXRSZWdFeCgnKCcgKyB0aGlzLmtleXMuc2VjdGlvblNwZWxscyArICcpJywgJ2knKVxuICAgICAgICAgICkgIT09IG51bGwgJiZcbiAgICAgICAgICB0eXBlb2Ygc2VjdGlvbnNbaSArIDFdICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICApIHtcbiAgICAgICAgICAvLyBJZiBzZWN0aW9uIGlzIHNwZWxsc1xuICAgICAgICAgIHRoaXMudGV4dCA9ICgnXFxuJyArIHRoaXMudGV4dCArICdcXG4nKVxuICAgICAgICAgICAgLnJlcGxhY2Uoc2VjdGlvbnNbaV0sICdcXG4nKVxuICAgICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgIHRoaXMucHJvY2Vzc1NwZWxscyhzZWN0aW9uc1tpICsgMV0pXG4gICAgICAgICAgaSsrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gQW55IHJlbWFpbmluZyB0ZXh0IGFkZCB0byBHTSBub3RlcyBzbyB5b3UgY2FuIGVhc2lseSBzZWUgaWYgdGhlcmUgYXJlIGFueSBvYnZpb3VzIGlzc3VlIG9yIGp1c3QgZ2VuZXJhbCBub3Rlc1xuICAgIHRoaXMucGFyc2VkLmdtbm90ZXMgPSB0aGlzLnRvSFRNTCh0aGlzLnRleHQpXG4gICAgcmV0dXJuIHRoaXMucGFyc2VkXG4gIH1cblxuICBkaXNhYmxlQXR0cmliQXV0byAoa2V5LCBhdHRyaWJWYWx1ZSwgY2hlY2ssIHVwZGF0ZURhdGEpIHtcbiAgICBjb25zdCB2YWx1ZSA9IE1hdGgubWF4KDAsIE51bWJlcihhdHRyaWJWYWx1ZSkpXG4gICAgaWYgKHZhbHVlICE9PSBOdW1iZXIoY2hlY2spKSB7XG4gICAgICB1cGRhdGVEYXRhW2BkYXRhLmF0dHJpYnMuJHtrZXl9LmF1dG9gXSA9IGZhbHNlXG4gICAgICB1cGRhdGVEYXRhW2BkYXRhLmF0dHJpYnMuJHtrZXl9LnZhbHVlYF0gPSB2YWx1ZVxuICAgICAgaWYgKGtleSA9PT0gJ2J1aWxkJykge1xuICAgICAgICB1cGRhdGVEYXRhW2BkYXRhLmF0dHJpYnMuJHtrZXl9LmN1cnJlbnRgXSA9IHZhbHVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1cGRhdGVEYXRhW2BkYXRhLmF0dHJpYnMuJHtrZXl9Lm1heGBdID0gdmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gZW50aXR5IChgbnBjYCBvciBgY3JlYXR1cmVgKSBmcm9tIHRoZSBvYmplY3Qgd2l0aCB0aGUgYWxyZWFkeSBwYXJzZWQgZW50aXR5IGRhdGFcbiAgICogQHBhcmFtIHtPYmplY3R9IGNoYXJhY3RlckRhdGEgb2JqZWN0IHdpdGggdGhlIGRhdGEgZXh0cmFjdGVkIGZyb20gdGhlIGNoYXJhY3RlclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZW50aXR5VHlwZVN0cmluZyBlbnRpdHkgdHlwZSBvYnRhaW5lZCBmcm9tIHRoZSB1c2VyIGlucHV0XG4gICAqIEByZXR1cm5zIHtBY3Rvcn0gdGhlIGNyZWF0ZWQgZm91bmRyeSBgQWN0b3JgXG4gICAqL1xuICBhc3luYyBjcmVhdGVFbnRpdHkgKGNoYXJhY3RlckRhdGEsIGVudGl0eVR5cGUpIHtcbiAgICBjb25zdCBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIgPSBhd2FpdCB0aGlzLmNyZWF0ZUltcG9ydENoYXJhY3RlcnNGb2xkZXJJZk5vdEV4aXN0cygpXG4gICAgaWYgKGVudGl0eVR5cGUgIT09ICducGMnKSB7XG4gICAgICBlbnRpdHlUeXBlID0gJ2NyZWF0dXJlJ1xuICAgIH1cbiAgICBjb25zdCBhY3RvckRhdGEgPSB7XG4gICAgICBuYW1lOiBjaGFyYWN0ZXJEYXRhLm5hbWUsXG4gICAgICB0eXBlOiBlbnRpdHlUeXBlLFxuICAgICAgZm9sZGVyOiBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIuaWQsXG4gICAgICBkYXRhOiBjaGFyYWN0ZXJEYXRhLmFjdG9yXG4gICAgfVxuICAgIGNvbnN0IG5wYyA9IGF3YWl0IEFjdG9yLmNyZWF0ZShhY3RvckRhdGEpXG4gICAgYXdhaXQgbnBjLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgY2hhcmFjdGVyRGF0YS5pdGVtcywge1xuICAgICAgcmVuZGVyU2hlZXQ6IGZhbHNlXG4gICAgfSlcbiAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cbiAgICBsZXQgdmFsdWUgPSAwXG4gICAgaWYgKHR5cGVvZiBjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMuaHA/LnZhbHVlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5kaXNhYmxlQXR0cmliQXV0byhcbiAgICAgICAgJ2hwJyxcbiAgICAgICAgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLmhwLnZhbHVlLFxuICAgICAgICBucGMuaHBNYXgsXG4gICAgICAgIHVwZGF0ZURhdGFcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMubXA/LnZhbHVlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5kaXNhYmxlQXR0cmliQXV0byhcbiAgICAgICAgJ21wJyxcbiAgICAgICAgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLm1wLnZhbHVlLFxuICAgICAgICBucGMubXBNYXgsXG4gICAgICAgIHVwZGF0ZURhdGFcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMubW92Py52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMuZGlzYWJsZUF0dHJpYkF1dG8oXG4gICAgICAgICdtb3YnLFxuICAgICAgICBjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMubW92LnZhbHVlLFxuICAgICAgICBucGMubW92LFxuICAgICAgICB1cGRhdGVEYXRhXG4gICAgICApXG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLmJ1aWxkPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMuZGlzYWJsZUF0dHJpYkF1dG8oXG4gICAgICAgICdidWlsZCcsXG4gICAgICAgIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5idWlsZC52YWx1ZSxcbiAgICAgICAgbnBjLmJ1aWxkLFxuICAgICAgICB1cGRhdGVEYXRhXG4gICAgICApXG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLmRiPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHZhbHVlID0gU3RyaW5nKGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5kYi52YWx1ZSkucmVwbGFjZSgvXlxcK1xccyovLCAnJylcbiAgICAgIGlmICh2YWx1ZSAhPT0gU3RyaW5nKG5wYy5kYikpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5hdHRyaWJzLmRiLmF1dG8nXSA9IGZhbHNlXG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuYXR0cmlicy5kYi52YWx1ZSddID0gdmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKE9iamVjdC5rZXlzKHVwZGF0ZURhdGEpLmxlbmd0aCA+IDApIHtcbiAgICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ3VwZGF0ZURhdGE6JywgdXBkYXRlRGF0YSlcbiAgICAgIH1cbiAgICAgIGF3YWl0IG5wYy51cGRhdGUodXBkYXRlRGF0YSlcbiAgICB9XG4gICAgY29uc3QgdXBkYXRlSXRlbURhdGEgPSBbXVxuICAgIGxldCBsYXN0V2VhcG9uU2tpbGwgPSBudWxsXG4gICAgZm9yIChjb25zdCBwYWlyIG9mIHRoaXMud2VhcG9uU2tpbGxzKSB7XG4gICAgICBpZiAocGFpclswXSAhPT0gZmFsc2UpIHtcbiAgICAgICAgbGFzdFdlYXBvblNraWxsID0gbnBjLml0ZW1zLmZpbHRlcihcbiAgICAgICAgICBpID0+XG4gICAgICAgICAgICBpLm5hbWUgPT09IHBhaXJbMF0ubmFtZSAmJlxuICAgICAgICAgICAgaS50eXBlID09PSAnc2tpbGwnICYmXG4gICAgICAgICAgICBOdW1iZXIoaS5kYXRhLmRhdGEudmFsdWUpID09PSBOdW1iZXIocGFpclswXS5kYXRhLnZhbHVlKVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBjb25zdCB3ZWFwb24gPSBucGMuaXRlbXMuZmlsdGVyKFxuICAgICAgICBpID0+XG4gICAgICAgICAgaS5uYW1lID09PSBwYWlyWzFdLm5hbWUgJiZcbiAgICAgICAgICBpLnR5cGUgPT09ICd3ZWFwb24nICYmXG4gICAgICAgICAgaS5kYXRhLmRhdGEucmFuZ2Uubm9ybWFsLmRhbWFnZSA9PT0gcGFpclsxXS5kYXRhLnJhbmdlLm5vcm1hbC5kYW1hZ2VcbiAgICAgIClcbiAgICAgIGlmIChsYXN0V2VhcG9uU2tpbGxbMF0gJiYgd2VhcG9uWzBdKSB7XG4gICAgICAgIHVwZGF0ZUl0ZW1EYXRhLnB1c2goe1xuICAgICAgICAgIF9pZDogd2VhcG9uWzBdLmlkLFxuICAgICAgICAgICdkYXRhLnNraWxsLm1haW4uaWQnOiBsYXN0V2VhcG9uU2tpbGxbMF0uaWQsXG4gICAgICAgICAgJ2RhdGEuc2tpbGwubWFpbi5uYW1lJzogbGFzdFdlYXBvblNraWxsWzBdLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHVwZGF0ZUl0ZW1EYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ3VwZGF0ZUl0ZW1EYXRhOicsIHVwZGF0ZUl0ZW1EYXRhKVxuICAgICAgfVxuICAgICAgYXdhaXQgbnBjLnVwZGF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgdXBkYXRlSXRlbURhdGEpXG4gICAgfVxuICAgIHJldHVybiBucGNcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgZm9sZGVyIG9uIHRoZSBhY3RvcnMgdGFiIGNhbGxlZCBcIkltcG9ydGVkIENoYXJhY3RlcnNcIiBpZiB0aGUgZm9sZGVyIGRvZXNuJ3QgZXhpc3QuXG4gICAqIEByZXR1cm5zIHtGb2xkZXJ9IHRoZSBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXJcbiAgICovXG4gIGFzeW5jIGNyZWF0ZUltcG9ydENoYXJhY3RlcnNGb2xkZXJJZk5vdEV4aXN0cyAoKSB7XG4gICAgbGV0IGZvbGRlck5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyJylcbiAgICBpZiAoZm9sZGVyTmFtZSA9PT0gJ0NvQzcuSW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyJykge1xuICAgICAgZm9sZGVyTmFtZSA9ICdJbXBvcnRlZCBjaGFyYWN0ZXJzJ1xuICAgIH1cbiAgICBsZXQgaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyID0gZ2FtZS5mb2xkZXJzLmZpbmQoXG4gICAgICBlbnRyeSA9PiBlbnRyeS5kYXRhLm5hbWUgPT09IGZvbGRlck5hbWUgJiYgZW50cnkuZGF0YS50eXBlID09PSAnQWN0b3InXG4gICAgKVxuICAgIGlmIChcbiAgICAgIGltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlciA9PT0gbnVsbCB8fFxuICAgICAgdHlwZW9mIGltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlciA9PT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIC8vIENyZWF0ZSB0aGUgZm9sZGVyXG4gICAgICBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIgPSBhd2FpdCBGb2xkZXIuY3JlYXRlKHtcbiAgICAgICAgbmFtZTogZm9sZGVyTmFtZSxcbiAgICAgICAgdHlwZTogJ0FjdG9yJyxcbiAgICAgICAgcGFyZW50OiBudWxsXG4gICAgICB9KVxuICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JlYXRlZEltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlcicpXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXJcbiAgfVxuXG4gIC8qKlxuICAgKiBhY3RvckRhdGEsIGNvbnZlcnQgcGFyc2VDaGFyYWN0ZXIgZGF0YSBpbnRvIEFjdG9yIGRhdGFcbiAgICogQHBhcmFtIHtPYmplY3R9IHBjIG9iamVjdCB3aXRoIHRoZSBkYXRhIGV4dHJhY3RlZCBmcm9tIHRoZSBjaGFyYWN0ZXIgYXMgcmV0dXJuZWQgZnJvbSBgcGFyc2VDaGFyYWN0ZXJgXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IGZvcm1hdHRlZCBBY3RvciBkYXRhXG4gICAqL1xuICBhY3RvckRhdGEgKHBjKSB7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIGNoYXJhY3RlcmlzdGljczoge30sXG4gICAgICBhdHRyaWJzOiB7fSxcbiAgICAgIGluZm9zOiB7fSxcbiAgICAgIHNwZWNpYWw6IHt9LFxuICAgICAgZGVzY3JpcHRpb246IHtcbiAgICAgICAga2VlcGVyOiAnJ1xuICAgICAgfSxcbiAgICAgIGZsYWdzOiB7XG4gICAgICAgIGxvY2tlZDogZmFsc2UsXG4gICAgICAgIGRpc3BsYXlGb3JtdWxhOiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBbXG4gICAgICAnc3RyJyxcbiAgICAgICdjb24nLFxuICAgICAgJ3NpeicsXG4gICAgICAnZGV4JyxcbiAgICAgICdhcHAnLFxuICAgICAgJ2ludCcsXG4gICAgICAncG93JyxcbiAgICAgICdlZHUnXG4gICAgXSkge1xuICAgICAgaWYgKHR5cGVvZiBwY1trZXldICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBkYXRhLmNoYXJhY3RlcmlzdGljc1trZXldID0ge1xuICAgICAgICAgIHZhbHVlOiBOdW1iZXIocGNba2V5XSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBbJ3NhbicsICdtb3YnLCAnYnVpbGQnLCAnYXJtb3InLCAnbGNrJywgJ2hwJywgJ21wJ10pIHtcbiAgICAgIGlmICh0eXBlb2YgcGNba2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZGF0YS5hdHRyaWJzW2tleV0gPSB7XG4gICAgICAgICAgdmFsdWU6IE51bWJlcihwY1trZXldKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcGMuZGIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkYXRhLmF0dHJpYnMuZGIgPSB7XG4gICAgICAgIHZhbHVlOiBwYy5kYlxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBbJ2FnZScsICdvY2N1cGF0aW9uJ10pIHtcbiAgICAgIGlmICh0eXBlb2YgcGNba2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZGF0YS5pbmZvc1trZXldID0gcGNba2V5XVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIHBjLnNhbkxvc3MgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zdCBbcGFzc2VkLCBmYWlsZWRdID0gcGMuc2FuTG9zcy5zcGxpdCgnLycpXG4gICAgICBkYXRhLnNwZWNpYWwuc2FuTG9zcyA9IHtcbiAgICAgICAgY2hlY2tQYXNzZWQ6IHBhc3NlZCxcbiAgICAgICAgY2hlY2tGYWlsbGVkOiBmYWlsZWRcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBwYy5hdHRhY2tzUGVyUm91bmQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkYXRhLnNwZWNpYWwuYXR0YWNrc1BlclJvdW5kID0gTnVtYmVyKHBjLmF0dGFja3NQZXJSb3VuZClcbiAgICB9XG4gICAgZGF0YS5kZXNjcmlwdGlvbi5rZWVwZXIgPSBwYy5nbW5vdGVzXG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ2FjdG9yRGF0YTonLCBkYXRhKVxuICAgIH1cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgLyoqXG4gICAqIGd1ZXNzSXRlbSwgdHJ5IGFuZCBmaW5kIHRoZSBpdGVtIGluIHRoZSBsb2NhdGlvbnMgZGVmaW5lZCBpbiB0aGlzLml0ZW1Mb2NhdGlvbnMgaSA9IEl0ZW0gRGlyZWN0b3J5LCB3ID0gV29ybGQgQ29tcGVuZGl1bXMsIG0gPSBNb2R1bGUgQ29tcGVuZGl1bXMsIHMgPSBTeXN0ZW0gQ29tcGVuZGl1bXNcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgSXRlbSB0eXBlIHRvIGZpbmRcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgTmFtZSBvZiBpdGVtIHRvIGZpbmRcbiAgICogQHBhcmFtIHtPYmplY3R9IGNvbWJhdCBudWxsIChkZWZhdWx0KS4gSWYgYm9vbGVhbiBjb21iYXQgcHJvcGVydHkgb2Ygc2tpbGwgbXVzdCBtYXRjaFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBmb3JtYXR0ZWQgQWN0b3IgZGF0YSBJdGVtIG9yIG51bGxcbiAgICovXG4gIGFzeW5jIGd1ZXNzSXRlbSAodHlwZSwgbmFtZSwgeyBjb21iYXQgPSBudWxsIH0gPSB7fSkge1xuICAgIG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKClcbiAgICBsZXQgZXhpc3RpbmcgPSBudWxsXG4gICAgZm9yIChsZXQgbyA9IDAsIG9NID0gdGhpcy5pdGVtTG9jYXRpb25zLmxlbmd0aDsgbyA8IG9NOyBvKyspIHtcbiAgICAgIHN3aXRjaCAodGhpcy5pdGVtTG9jYXRpb25zLnN1YnN0cihvLCAxKSkge1xuICAgICAgICBjYXNlICdpJzpcbiAgICAgICAgICBleGlzdGluZyA9IGdhbWUuaXRlbXMuZmluZChcbiAgICAgICAgICAgIGl0ZW0gPT5cbiAgICAgICAgICAgICAgaXRlbS5kYXRhLnR5cGUgPT09IHR5cGUgJiZcbiAgICAgICAgICAgICAgaXRlbS5kYXRhLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSAmJlxuICAgICAgICAgICAgICAoY29tYmF0ID09PSBudWxsIHx8IGl0ZW0uZGF0YS5wcm9wZXJ0aWVzLmNvbWJhdCA9PT0gY29tYmF0KVxuICAgICAgICAgIClcbiAgICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICd3JzpcbiAgICAgICAgY2FzZSAnbSc6XG4gICAgICAgIGNhc2UgJ3MnOlxuICAgICAgICAgIGZvciAoY29uc3QgcGFjayBvZiBnYW1lLnBhY2tzKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIHBhY2subWV0YWRhdGEuZW50aXR5ID09PSAnSXRlbScgJiZcbiAgICAgICAgICAgICAgKCh0aGlzLml0ZW1Mb2NhdGlvbnNbb10gPT09ICd3JyAmJlxuICAgICAgICAgICAgICAgIHBhY2subWV0YWRhdGEucGFja2FnZSA9PT0gJ3dvcmxkJykgfHxcbiAgICAgICAgICAgICAgICAodGhpcy5pdGVtTG9jYXRpb25zW29dID09PSAnUycgJiZcbiAgICAgICAgICAgICAgICAgIHBhY2subWV0YWRhdGEucGFja2FnZSA9PT0gJ0NvQzcnKSB8fFxuICAgICAgICAgICAgICAgICh0aGlzLml0ZW1Mb2NhdGlvbnNbb10gPT09ICdzJyAmJlxuICAgICAgICAgICAgICAgICAgIVsnd29ybGQnLCAnQ29DNyddLmluY2x1ZGVzKHBhY2subWV0YWRhdGEucGFja2FnZSkpKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGRvY3VtZW50cyA9IGF3YWl0IHBhY2suZ2V0RG9jdW1lbnRzKClcbiAgICAgICAgICAgICAgZXhpc3RpbmcgPSBkb2N1bWVudHMuZmluZChcbiAgICAgICAgICAgICAgICBpdGVtID0+XG4gICAgICAgICAgICAgICAgICBpdGVtLmRhdGEudHlwZSA9PT0gdHlwZSAmJlxuICAgICAgICAgICAgICAgICAgaXRlbS5kYXRhLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSAmJlxuICAgICAgICAgICAgICAgICAgKGNvbWJhdCA9PT0gbnVsbCB8fCBpdGVtLmRhdGEucHJvcGVydGllcy5jb21iYXQgPT09IGNvbWJhdClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBpdGVtc0RhdGEsIGNvbnZlcnQgcGFyc2VDaGFyYWN0ZXIgZGF0YSBpbnRvIEFjdG9yIGl0ZW0gZGF0YVxuICAgKiBAcGFyYW0ge09iamVjdH0gcGMgb2JqZWN0IHdpdGggdGhlIGRhdGEgZXh0cmFjdGVkIGZyb20gdGhlIGNoYXJhY3RlciBhcyByZXR1cm5lZCBmcm9tIGBwYXJzZUNoYXJhY3RlcmBcbiAgICogQHJldHVybnMge09iamVjdH0gZm9ybWF0dGVkIEFjdG9yIGRhdGFcbiAgICovXG4gIGFzeW5jIGl0ZW1zRGF0YSAocGMpIHtcbiAgICBjb25zdCBpdGVtcyA9IFtdXG4gICAgdGhpcy53ZWFwb25Ta2lsbHMgPSBbXVxuICAgIC8vIFdlYXBvbiBza2lsbHNcbiAgICBpZiAodHlwZW9mIHBjLmF0dGFja3MgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBmb3IgKGNvbnN0IGF0dGFjayBvZiBwYy5hdHRhY2tzKSB7XG4gICAgICAgIGxldCBza2lsbCA9IGZhbHNlXG4gICAgICAgIGlmIChhdHRhY2suZGF0YT8uc2tpbGw/LmlkICE9PSB0cnVlKSB7XG4gICAgICAgICAgc2tpbGwgPSBhd2FpdCB0aGlzLndlYXBvblNraWxsKGF0dGFjaylcbiAgICAgICAgICBpdGVtcy5wdXNoKHNraWxsKVxuICAgICAgICB9XG4gICAgICAgIGF0dGFjay5kYXRhLnNraWxsLmlkID0gbnVsbFxuICAgICAgICBpdGVtcy5wdXNoKGF0dGFjaylcbiAgICAgICAgdGhpcy53ZWFwb25Ta2lsbHMucHVzaChbc2tpbGwsIGF0dGFja10pXG4gICAgICB9XG4gICAgfVxuICAgIC8vIFNraWxsc1xuICAgIGlmICh0eXBlb2YgcGMuc2tpbGxzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZm9yIChjb25zdCBza2lsbCBvZiBwYy5za2lsbHMpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCB0aGlzLmd1ZXNzSXRlbSgnc2tpbGwnLCBza2lsbC5uYW1lKVxuICAgICAgICBpZiAodHlwZW9mIGV4aXN0aW5nICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IGNsb25lZCA9IGV4aXN0aW5nLnRvT2JqZWN0KClcbiAgICAgICAgICBjbG9uZWQuZGF0YS5iYXNlID0gc2tpbGwudmFsdWVcbiAgICAgICAgICBpZiAodHlwZW9mIHNraWxsLnB1c2ggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBjbG9uZWQuZGF0YS5wcm9wZXJ0aWVzLnB1c2ggPSBza2lsbC5wdXNoXG4gICAgICAgICAgfVxuICAgICAgICAgIGl0ZW1zLnB1c2goZHVwbGljYXRlKGNsb25lZCkpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHt9XG4gICAgICAgICAgaWYgKHR5cGVvZiBza2lsbC5wdXNoICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgb3B0aW9ucy5wdXNoID0gc2tpbGwucHVzaFxuICAgICAgICAgIH1cbiAgICAgICAgICBpdGVtcy5wdXNoKENvQ0FjdG9yLmVtcHR5U2tpbGwoc2tpbGwubmFtZSwgc2tpbGwudmFsdWUsIG9wdGlvbnMpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vIExhbmd1YWdlc1xuICAgIGlmICh0eXBlb2YgcGMubGFuZ3VhZ2VzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZm9yIChjb25zdCBza2lsbCBvZiBwYy5sYW5ndWFnZXMpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCB0aGlzLmd1ZXNzSXRlbSgnc2tpbGwnLCBza2lsbC5uYW1lKVxuICAgICAgICBpZiAodHlwZW9mIGV4aXN0aW5nICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IGNsb25lZCA9IGV4aXN0aW5nLnRvT2JqZWN0KClcbiAgICAgICAgICBjbG9uZWQuZGF0YS5iYXNlID0gc2tpbGwudmFsdWVcbiAgICAgICAgICBpdGVtcy5wdXNoKGR1cGxpY2F0ZShjbG9uZWQpKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1zLnB1c2goXG4gICAgICAgICAgICBDb0NBY3Rvci5lbXB0eVNraWxsKHNraWxsLm5hbWUsIHNraWxsLnZhbHVlLCB7XG4gICAgICAgICAgICAgIGltZzogQ29DN0l0ZW0uaWNvbkxhbmd1YWdlLFxuICAgICAgICAgICAgICBzcGVjaWFsaXphdGlvbjogJ0xhbmd1YWdlJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gU3BlbGxzXG4gICAgaWYgKHR5cGVvZiBwYy5zcGVsbHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBmb3IgKGNvbnN0IG5hbWUgb2YgcGMuc3BlbGxzKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgdGhpcy5ndWVzc0l0ZW0oJ3NwZWxsJywgbmFtZSlcbiAgICAgICAgaWYgKHR5cGVvZiBleGlzdGluZyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBjbG9uZWQgPSBleGlzdGluZy50b09iamVjdCgpXG4gICAgICAgICAgaXRlbXMucHVzaChkdXBsaWNhdGUoY2xvbmVkKSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtcy5wdXNoKENvQ0FjdG9yLmVtcHR5U3BlbGwobmFtZSkpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGl0ZW1zXG4gIH1cblxuICAvKipcbiAgICogYmFzaWNXZWFwb25EYXRhIGNyZWF0ZXMgYSBiYXNpYyBvYmplY3Qgd2l0aCB0aGUgZGVmYXVsdCBiYXNpYyBkYXRhIGZvciBhIHdlYXBvbiBza2lsbFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGZpcmVhcm1zIHRydWUgaWYgdGhlIHdlYXBvbiB1c2VzIGZpcmVhcm1zLCBmYWxzZSBpZiBpdCdzIGEgbWVsZWUgb25lLlxuICAgKiBAcmV0dXJucyBvYmplY3Qgd2l0aCBkZWZhdWx0IHZhbHVlcyBmb3IgdGhlIHdlYXBvblxuICAgKi9cbiAgYmFzaWNXZWFwb25Ta2lsbERhdGEgKGZpcmVhcm1zKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNwZWNpYWxpemF0aW9uOiBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgIGZpcmVhcm1zXG4gICAgICAgICAgPyAnQ29DNy5GaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgICAgIDogJ0NvQzcuRmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUnXG4gICAgICApLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICBzcGVjaWFsOiB0cnVlLFxuICAgICAgICBmaWdodGluZzogIWZpcmVhcm1zLFxuICAgICAgICBmaXJlYXJtOiBmaXJlYXJtcyxcbiAgICAgICAgY29tYmF0OiB0cnVlXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqIHdlYXBvblNraWxsIHRyaWVzIHRvIGd1ZXNzIHdoYXQga2luZCBvZiB3ZWFwb24gc2tpbGwgdG8gdXNlIGZvciB3ZWFwb24gZnJvbSBpdCdzIG5hbWVcbiAgICogQHBhcmFtIHdlYXBvbjogSlNPTiwgd2VhcG9uIGRhdGFcbiAgICovXG4gIGFzeW5jIHdlYXBvblNraWxsICh3ZWFwb24pIHtcbiAgICBsZXQgc2tpbGwgPSBudWxsXG4gICAgaWYgKHRoaXMuZ2V0UmVnRXgoJ2hhbmRndW4nKS5leGVjKHdlYXBvbi5uYW1lKSkge1xuICAgICAgc2tpbGwgPSBhd2FpdCB0aGlzLmd1ZXNzSXRlbSgnc2tpbGwnLCAnSGFuZGd1bicsIHsgY29tYmF0OiB0cnVlIH0pXG4gICAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgICBjb25zb2xlLmRlYnVnKGAke3dlYXBvbi5uYW1lfSB1c2VzIEhhbmRndW4gc2tpbGw6ICR7c2tpbGx9YClcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuZ2V0UmVnRXgoJ3JpZmxlJykuZXhlYyh3ZWFwb24ubmFtZSkpIHtcbiAgICAgIHNraWxsID0gYXdhaXQgdGhpcy5ndWVzc0l0ZW0oJ3NraWxsJywgJ1JpZmxlL1Nob3RndW4nLCB7IGNvbWJhdDogdHJ1ZSB9KVxuICAgICAgaWYgKCFza2lsbCkge1xuICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMuZ3Vlc3NJdGVtKCdza2lsbCcsICdSaWZsZScsIHsgY29tYmF0OiB0cnVlIH0pXG4gICAgICAgIGlmICghc2tpbGwpIHtcbiAgICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMuZ3Vlc3NJdGVtKCdza2lsbCcsICdTaG90Z3VuJywgeyBjb21iYXQ6IHRydWUgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhgJHt3ZWFwb24ubmFtZX0gdXNlcyBSaWZsZSBza2lsbDogJHtza2lsbH1gKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5nZXRSZWdFeCgnc21iJykuZXhlYyh3ZWFwb24ubmFtZSkpIHtcbiAgICAgIHNraWxsID0gYXdhaXQgdGhpcy5ndWVzc0l0ZW0oJ3NraWxsJywgJ1N1Ym1hY2hpbmUgR3VuJywgeyBjb21iYXQ6IHRydWUgfSlcbiAgICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoYCR7d2VhcG9uLm5hbWV9IHVzZXMgU3VibWFjaGluZSBHdW4gc2tpbGw6ICR7c2tpbGx9YClcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuZ2V0UmVnRXgoJ21hY2hpbmVHdW4nKS5leGVjKHdlYXBvbi5uYW1lKSkge1xuICAgICAgc2tpbGwgPSBhd2FpdCB0aGlzLmd1ZXNzSXRlbSgnc2tpbGwnLCAnTWFjaGluZSBHdW4nLCB7IGNvbWJhdDogdHJ1ZSB9KVxuICAgICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhgJHt3ZWFwb24ubmFtZX0gdXNlcyBNYWNoaW5lIEd1biBza2lsbDogJHtza2lsbH1gKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5nZXRSZWdFeCgnbGF1bmNoZWQnKS5leGVjKHdlYXBvbi5uYW1lKSkge1xuICAgICAgc2tpbGwgPSBhd2FpdCB0aGlzLmd1ZXNzSXRlbSgnc2tpbGwnLCAnTGF1bmNoJywgeyBjb21iYXQ6IHRydWUgfSlcbiAgICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoYCR7d2VhcG9uLm5hbWV9IHVzZXMgTGF1bmNoIHNraWxsOiAke3NraWxsfWApXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChza2lsbCAhPT0gbnVsbCAmJiB0eXBlb2Ygc2tpbGwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zdCBza2lsbENsb25lID0gc2tpbGwuY2xvbmUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgdmFsdWU6IHdlYXBvbi5kYXRhPy5za2lsbD8uaWRcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIHJldHVybiBza2lsbENsb25lXG4gICAgfVxuICAgIGNvbnN0IG5ld1NraWxsID0ge1xuICAgICAgbmFtZTogd2VhcG9uLm5hbWUsXG4gICAgICB0eXBlOiAnc2tpbGwnLFxuICAgICAgZGF0YTogdGhpcy5iYXNpY1dlYXBvblNraWxsRGF0YSh3ZWFwb24uZGF0YT8ucHJvcGVydGllcz8ucm5nZClcbiAgICB9XG4gICAgbmV3U2tpbGwuZGF0YS5iYXNlID0gd2VhcG9uLmRhdGE/LnNraWxsPy5pZFxuICAgIG5ld1NraWxsLmRhdGEudmFsdWUgPSB3ZWFwb24uZGF0YT8uc2tpbGw/LmlkXG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoXG4gICAgICAgIGBXZWFwb24gc2tpbGwgbm90IGZvdW5kIGZvciAke3dlYXBvbi5uYW1lfSwgY3JlYXRpbmcgYSBuZXcgb25lYCxcbiAgICAgICAgbmV3U2tpbGxcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIG5ld1NraWxsXG4gIH1cblxuICAvKipcbiAgICogbmVlZHNDb252ZXJzaW9uIGRvZXMgYW4gZXZhbHVhdGlvbiB0byBzZWUgaWYgdGhlIGdpdmVuIG5wYyBuZWVkcyB0byBiZSBjb252ZXJ0ZWQgdG8gN3RoIEVkaXRpb25cbiAgICogUmV0dXJucyBgZmFsc2VgIHdoZW4gYW55IG9mIHRoZSBDaGFyYWN0ZXJpc3RpY3MgdmFsdWUgaXQncyBhYm92ZSAyOVxuICAgKi9cbiAgbmVlZHNDb252ZXJzaW9uIChucGMpIHtcbiAgICBsZXQgbmVlZHNDb252ZXJzaW9uUmVzdWx0ID0gdHJ1ZVxuICAgIGZvciAoY29uc3Qga2V5IG9mIFtcbiAgICAgICdzdHInLFxuICAgICAgJ2NvbicsXG4gICAgICAnc2l6JyxcbiAgICAgICdkZXgnLFxuICAgICAgJ2FwcCcsXG4gICAgICAnaW50JyxcbiAgICAgICdwb3cnLFxuICAgICAgJ2VkdSdcbiAgICBdKSB7XG4gICAgICBpZiAodHlwZW9mIG5wY1trZXldICE9PSAndW5kZWZpbmVkJyAmJiBucGNba2V5XSA+IDMwKSB7XG4gICAgICAgIG5lZWRzQ29udmVyc2lvblJlc3VsdCA9IGZhbHNlXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCduZWVkc0NvbnZlcnNpb246JywgbmVlZHNDb252ZXJzaW9uUmVzdWx0KVxuICAgIH1cbiAgICByZXR1cm4gbmVlZHNDb252ZXJzaW9uUmVzdWx0XG4gIH1cblxuICAvKipcbiAgICogY3JlYXRlQWN0b3IgbWFpbiBtZXRob2QgdG8gY3JlYXRlIGFuIGBBY3RvcmAgZnJvbSBhIGdpdmUgdXNlciBpbnB1dCwgdGFrZXMgb24gYWNjb3VudCB0aGUgbGFuZywgZW50aXR5IHR5cGUsXG4gICAqIHRoZSBjb252ZXJ0IHRvIDcgRWRpdGlvbiBmbGFnLCBhbmQgdGhlIHJhdyBlbnRpdHkgZGF0YS5cbiAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0cyBpbnB1dHMgZnJvbSB0aGUgZm9ybSB0byBjcmVhdGUgYW4gQWN0b3JcbiAgICogQHJldHVybnMge0FjdG9yfSB0aGUgZm91bmRyeSBgQWN0b3JgIGZyb20gdGhlIGdpdmVuIGBpbnB1dGAgb3B0aW9uc1xuICAgKi9cbiAgYXN5bmMgY3JlYXRlQWN0b3IgKGlucHV0cykge1xuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdjcmVhdGVBY3RvcjonLCBpbnB1dHMpXG4gICAgfVxuICAgIGNvbnN0IGxhbmcgPSBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cC5jaGVja0xhbmd1YWdlKGlucHV0cy5sYW5nKVxuICAgIHRoaXMua2V5cyA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmdldEtleXMobGFuZylcbiAgICB0aGlzLnJlZ0V4ID0gQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAuZ2V0UmVndWxhckV4cHJlc3Npb25zKGxhbmcpXG4gICAgdGhpcy5pdGVtTG9jYXRpb25zID0gaW5wdXRzLnNvdXJjZVxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdSZWd1bGFyIEV4cHJlc3Npb25zOicsIGxhbmcsIHRoaXMua2V5cywgdGhpcy5yZWdFeClcbiAgICB9XG4gICAgbGV0IGNoYXJhY3RlciA9IGF3YWl0IHRoaXMucGFyc2VDaGFyYWN0ZXIoaW5wdXRzLnRleHQpXG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ3BhcnNlQ2hhcmFjdGVyOicsIGNoYXJhY3RlcilcbiAgICB9XG4gICAgaWYgKFxuICAgICAgKGlucHV0cy5jb252ZXJ0RnJvbTZFID09PSAnY29jLWd1ZXNzJyAmJlxuICAgICAgICB0aGlzLm5lZWRzQ29udmVyc2lvbihjaGFyYWN0ZXIpKSB8fFxuICAgICAgaW5wdXRzLmNvbnZlcnRGcm9tNkUgPT09ICdjb2MtY29udmVydCdcbiAgICApIHtcbiAgICAgIGNoYXJhY3RlciA9IGF3YWl0IHRoaXMuY29udmVydDdFKGNoYXJhY3RlcilcbiAgICB9XG4gICAgY29uc3QgY2hhcmFjdGVyRGF0YSA9IHtcbiAgICAgIG5hbWU6IGNoYXJhY3Rlci5uYW1lLFxuICAgICAgYWN0b3I6IHRoaXMuYWN0b3JEYXRhKGNoYXJhY3RlciksXG4gICAgICBpdGVtczogYXdhaXQgdGhpcy5pdGVtc0RhdGEoY2hhcmFjdGVyKVxuICAgIH1cblxuICAgIGlmICh0eXBlb2YgaW5wdXRzLnRlc3RNb2RlICE9PSAndW5kZWZpbmVkJyAmJiBpbnB1dHMudGVzdE1vZGUgPT09IHRydWUpIHtcbiAgICAgIHJldHVybiBjaGFyYWN0ZXJEYXRhXG4gICAgfVxuICAgIGNvbnN0IG5wYyA9IGF3YWl0IHRoaXMuY3JlYXRlRW50aXR5KGNoYXJhY3RlckRhdGEsIGlucHV0cy5lbnRpdHkpXG4gICAgcmV0dXJuIG5wY1xuICB9XG5cbiAgLyoqXG4gICAqIGNvbnZlcnQ3RSBDb252ZXJ0cyB0aGUgZ2l2ZW4gZW50aXR5IGZyb20gNiBlZGl0aW9uIHRvIDcgZWRpdGlvblxuICAgKiBAcGFyYW0ge09iamVjdH0gdGhlIGVudGl0eSBvYmplY3QgYXMgb2J0YWluZWQgZnJvbSBgcGFyc2VDaGFyYWN0ZXJgXG4gICAqIEByZXR1cm4gdGhlIHNhbWUgb2JqZWN0IGJ1dCB3aXRoIHVwZGF0ZWQgY2hhcmFjdGVyaXN0aWNzIGZvciA3IGVkaXRpb25cbiAgICovXG4gIGFzeW5jIGNvbnZlcnQ3RSAoY3JlYXR1cmUpIHtcbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZygnQ29udmVydGluZyBucGMnLCBjcmVhdHVyZSlcbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgb2YgWydzdHInLCAnY29uJywgJ3NpeicsICdkZXgnLCAnYXBwJywgJ2ludCcsICdwb3cnXSkge1xuICAgICAgaWYgKHR5cGVvZiBjcmVhdHVyZVtrZXldICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjcmVhdHVyZVtrZXldICo9IDVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBjcmVhdHVyZS5lZHUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoY3JlYXR1cmUuZWR1IDw9IDE4KSB7XG4gICAgICAgIGNyZWF0dXJlLmVkdSAqPSA1XG4gICAgICB9IGVsc2UgaWYgKGNyZWF0dXJlLmVkdSA8PSAyNikge1xuICAgICAgICBjcmVhdHVyZS5lZHUgPSBjcmVhdHVyZS5lZHUgKyA5MCAtIDE4XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjcmVhdHVyZS5lZHUgPj0yOFxuICAgICAgICBjcmVhdHVyZS5lZHUgPSA5OVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGNyZWF0dXJlLmRiICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKGNyZWF0dXJlLmRiID09PSAnLTFkNCcpIHtcbiAgICAgICAgY3JlYXR1cmUuZGIgPSAtMVxuICAgICAgfSBlbHNlIGlmIChjcmVhdHVyZS5kYiA9PT0gJy0xZDYnKSB7XG4gICAgICAgIGNyZWF0dXJlLmRiID0gLTJcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ2NvbnZlcnQ3RTogJywgY3JlYXR1cmUpXG4gICAgfVxuICAgIHJldHVybiBjcmVhdHVyZVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ09ORklHLCBEaWFsb2csIGdhbWUsIEhvb2tzLCByZW5kZXJUZW1wbGF0ZSwgdWkgKi9cblxuaW1wb3J0IHsgQ29DN0FjdG9ySW1wb3J0ZXIgfSBmcm9tICcuL2FjdG9yLWltcG9ydGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAgfSBmcm9tICcuL2FjdG9yLWltcG9ydGVyLXJlZ2V4cC5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdBY3RvckltcG9ydGVyRGlhbG9nIGV4dGVuZHMgRGlhbG9nIHtcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCdvcHRpb25bdmFsdWU9JyArIGdhbWUuaTE4bi5sYW5nICsgJ10nKVxuICAgICAgLmF0dHIoJ3NlbGVjdGVkJywgJ3NlbGVjdGVkJylcbiAgICBodG1sXG4gICAgICAuZmluZCgnI2NvYy1lbnRpdHktbGFuZycpXG4gICAgICAub24oJ2NoYW5nZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICQoJyNjb2MtcGFzdGVkLWNoYXJhY3Rlci1kYXRhJykucHJvcChcbiAgICAgICAgICAncGxhY2Vob2xkZXInLFxuICAgICAgICAgIENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmdldEV4YW1wbGVUZXh0KCQodGhpcykudmFsKCkpXG4gICAgICAgIClcbiAgICAgIH0pXG4gICAgICAudHJpZ2dlcignY2hhbmdlJylcbiAgICBodG1sLmZpbmQoJyNjb2MtcGFzdGVkLWNoYXJhY3Rlci1kYXRhJykub24oJ2tleXVwJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGNvbnN0IGNoYXJhY3RlcnNUb29FeHRlbmRlZCA9ICQodGhpcylcbiAgICAgICAgLnZhbCgpXG4gICAgICAgIC5tYXRjaCgvW1xcdWRiYzAtXFx1ZGJmZV1bXFx1ZGMwMC1cXHVkZmZmXS8pXG4gICAgICBjb25zdCBwcm9tcHQgPSAkKCcjY29jLXByb21wdCcpXG4gICAgICBpZiAoY2hhcmFjdGVyc1Rvb0V4dGVuZGVkKSB7XG4gICAgICAgIHByb21wdFxuICAgICAgICAgIC5odG1sKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5UZXh0RmllbGRJbnZhbGlkQ2hhcmFjdGVycycpKVxuICAgICAgICAgIC5hZGRDbGFzcygnZXJyb3InKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvbXB0XG4gICAgICAgICAgLmh0bWwoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlBhc3RlVGhlRGF0YUJlbG93JykpXG4gICAgICAgICAgLnJlbW92ZUNsYXNzKCdlcnJvcicpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcmV0dXJucyBnZXRJbnB1dHMgZXh0cmFjdHMgdGhlIGRhdGEgZnJvbSB0aGUgaW5wdXQgZmllbGRzIGFuZFxuICAgKiBhZGRzIGEgYC5gIGF0IHRoZSBlbmQgaWYgaXQncyBub3QgYWxyZWFkeSB0aGVyZS5cbiAgICovXG4gIHN0YXRpYyBhc3luYyBnZXRJbnB1dHMgKCkge1xuICAgIGNvbnN0IGlucHV0cyA9IHt9XG4gICAgaW5wdXRzLmVudGl0eSA9ICQoJyNjb2MtZW50aXR5LXR5cGUnKVxuICAgICAgLnZhbCgpXG4gICAgICAudHJpbSgpXG4gICAgaW5wdXRzLmNvbnZlcnRGcm9tNkUgPSAkKCcjY29jLWNvbnZlcnQtNkUnKVxuICAgICAgLnZhbCgpXG4gICAgICAudHJpbSgpXG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ2VudGl0eSB0eXBlOicsIGlucHV0cy5lbnRpdHkpXG4gICAgfVxuICAgIGlucHV0cy5sYW5nID0gQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAuY2hlY2tMYW5ndWFnZShcbiAgICAgICQoJyNjb2MtZW50aXR5LWxhbmcnKVxuICAgICAgICAudmFsKClcbiAgICAgICAgLnRyaW0oKVxuICAgIClcbiAgICBpbnB1dHMuc291cmNlID0gJCgnI3NvdXJjZScpXG4gICAgICAudmFsKClcbiAgICAgIC50cmltKClcbiAgICBsZXQgdGV4dCA9ICQoJyNjb2MtcGFzdGVkLWNoYXJhY3Rlci1kYXRhJylcbiAgICAgIC52YWwoKVxuICAgICAgLnRyaW0oKVxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdyZWNlaXZlZCB0ZXh0JywgJyMjJyArIHRleHQgKyAnIyMnKVxuICAgIH1cbiAgICBpZiAodGV4dFt0ZXh0Lmxlbmd0aF0gIT09ICcuJykge1xuICAgICAgdGV4dCArPSAnLicgLy8gQWRkIGEgZG90IGEgdGhlIGVuZCB0byBoZWxwIHRoZSByZWdleCBmaW5kIHRoZSBlbmRcbiAgICB9XG4gICAgaW5wdXRzLnRleHQgPSB0ZXh0XG4gICAgcmV0dXJuIGlucHV0c1xuICB9XG5cbiAgLyoqXG4gICAqIGltcG9ydEFjdG9yIGltcG9ydHMgYW4gQWN0b3IgdXNpbmcgdGhlIGRpYWxvZyBkYXRhXG4gICAqIEBwYXJhbSB7aHRtbH0gaHRtbFxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGltcG9ydEFjdG9yIChodG1sKSB7XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ2h0bWwnLCBodG1sKVxuICAgIH1cbiAgICBjb25zdCBpbnB1dHMgPSBhd2FpdCBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZy5nZXRJbnB1dHMoKVxuICAgIGNvbnN0IGFjdG9yID0gbmV3IENvQzdBY3RvckltcG9ydGVyKClcbiAgICBjb25zdCBjcmVhdGVkQWN0b3IgPSBhd2FpdCBhY3Rvci5jcmVhdGVBY3RvcihpbnB1dHMpXG4gICAgLy8gQWN0b3IgY3JlYXRlZCwgTm90aWZ5IHRoZSB1c2VyIGFuZCBzaG93IHRoZSBzaGVldC5cbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZygnY3JlYXRlZEFjdG9yOicsIGNyZWF0ZWRBY3RvcilcbiAgICB9XG4gICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgJ0NyZWF0ZWQgJyArXG4gICAgICAgIGNyZWF0ZWRBY3Rvci5kYXRhPy50eXBlPy50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgJzogJyArXG4gICAgICAgIGNyZWF0ZWRBY3Rvci5kYXRhPy5uYW1lXG4gICAgKVxuICAgIGF3YWl0IGNyZWF0ZWRBY3Rvci5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICAvLyBjb25zdCB1cGRhdGVkID0gYXdhaXQgVXBkYXRlci51cGRhdGVBY3RvcihucGMpXG4gICAgLy8gY29uc29sZS5kZWJ1ZygndXBkYXRlZDonLCB1cGRhdGVkKVxuICB9XG5cbiAgc3VibWl0IChidXR0b24pIHtcbiAgICBpZiAoXG4gICAgICAkKCcjY29jLXBhc3RlZC1jaGFyYWN0ZXItZGF0YScpXG4gICAgICAgIC52YWwoKVxuICAgICAgICAudHJpbSgpICE9PSAnJyB8fFxuICAgICAgIWJ1dHRvbi5jYWxsYmFja1xuICAgICkge1xuICAgICAgc3VwZXIuc3VibWl0KGJ1dHRvbilcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogY3JlYXRlIGl0J3MgdGhlIGRlZmF1bHQgd2ViIHRvIGNyYXRlIHRoZSBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZ1xuICAgKiBAcGFyYW0ge30gZGF0YSBjYW4gaW5jbHVkZSBhIGB0aXRsZWAgZm9yIHRoZSBkaWFsb2cuXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChkYXRhID0ge30pIHtcbiAgICBkYXRhLmxhbmd1YWdlcyA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmdldFRyYW5zbGF0aW9ucygpXG4gICAgZGF0YS5sYW5ndWFnZSA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmNoZWNrTGFuZ3VhZ2UobnVsbClcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2FjdG9yLWltcG9ydGVyLmh0bWwnLFxuICAgICAgZGF0YVxuICAgIClcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBjb25zdCBkbGcgPSBuZXcgQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2coXG4gICAgICAgIHtcbiAgICAgICAgICB0aXRsZTogZGF0YS50aXRsZSxcbiAgICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgICAgaW1wb3J0OiB7XG4gICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS1maWxlLWltcG9ydFwiPjwvaT4nLFxuICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkltcG9ydCcpLFxuICAgICAgICAgICAgICBjYWxsYmFjazogQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2cuaW1wb3J0QWN0b3JcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBubzoge1xuICAgICAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtdGltZXNcIj48L2k+JyxcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DYW5jZWwnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnLCAnYWN0b3ItaW1wb3J0ZXInXSxcbiAgICAgICAgICB3aWR0aDogNjAwXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG5cbkhvb2tzLm9uY2UoJ3JlYWR5JywgKCkgPT4ge1xuICBpZiAoZ2FtZS5tb2R1bGVzLmdldCgnQ29DNy1JbXBvcnRlci1UZXN0cycpPy5hY3RpdmUpIHtcbiAgICB3aW5kb3cuQ29DN0FjdG9ySW1wb3J0ZXIgPSBDb0M3QWN0b3JJbXBvcnRlclxuICB9XG59KVxuIiwiLyogZ2xvYmFsIGNhbnZhcywgZm91bmRyeSwgZ2FtZSwgUGxhY2VhYmxlc0xheWVyICovXG5pbXBvcnQgeyBDb0M3Q2hhdCB9IGZyb20gJy4vY2hhdC5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IENvQzdBY3RvckltcG9ydGVyRGlhbG9nIH0gZnJvbSAnLi9hcHBzL2FjdG9yLWltcG9ydGVyLWRpYWxvZy5qcydcbmltcG9ydCB7IENvQzdMaW5rQ3JlYXRpb25EaWFsb2cgfSBmcm9tICcuL2FwcHMvbGluay1jcmVhdGlvbi1kaWFsb2cuanMnXG5cbmNsYXNzIENvQzdNZW51TGF5ZXIgZXh0ZW5kcyBQbGFjZWFibGVzTGF5ZXIge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgc3VwZXIoKVxuICAgIHRoaXMub2JqZWN0cyA9IHt9XG4gIH1cblxuICBzdGF0aWMgZ2V0IGxheWVyT3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIubGF5ZXJPcHRpb25zLCB7XG4gICAgICBuYW1lOiAnY29jN21lbnUnLFxuICAgICAgekluZGV4OiA2MFxuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgZ2V0IGRvY3VtZW50TmFtZSAoKSB7XG4gICAgcmV0dXJuICdUb2tlbidcbiAgfVxuXG4gIGdldCBwbGFjZWFibGVzICgpIHtcbiAgICByZXR1cm4gW11cbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29DN01lbnUge1xuICBzdGF0aWMgZ2V0QnV0dG9ucyAoY29udHJvbHMpIHtcbiAgICBjYW52YXMuY29jN2dtdG9vbHMgPSBuZXcgQ29DN01lbnVMYXllcigpXG4gICAgY29uc3QgaXNHTSA9IGdhbWUudXNlci5pc0dNXG4gICAgY29udHJvbHMucHVzaCh7XG4gICAgICBuYW1lOiAnY29jN21lbnUnLFxuICAgICAgdGl0bGU6ICdDb0M3LkdtVG9vbHMnLFxuICAgICAgbGF5ZXI6ICdjb2M3Z210b29scycsXG4gICAgICBpY29uOiAnZ2FtZS1pY29uIGdhbWUtaWNvbi10ZW50YWNsZS1zdHJpa2UnLFxuICAgICAgdmlzaWJsZTogaXNHTSxcbiAgICAgIHRvb2xzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICB0b2dnbGU6IHRydWUsXG4gICAgICAgICAgaWNvbjogJ2ZhcyBmYS1hbmdsZS1kb3VibGUtdXAnLFxuICAgICAgICAgIG5hbWU6ICdkZXZwaGFzZScsXG4gICAgICAgICAgYWN0aXZlOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkZXZlbG9wbWVudEVuYWJsZWQnKSxcbiAgICAgICAgICB0aXRsZTogJ0NvQzcuRGV2UGhhc2UnLFxuICAgICAgICAgIG9uQ2xpY2s6IGFzeW5jIHRvZ2dsZSA9PiBhd2FpdCBDb0M3VXRpbGl0aWVzLnRvZ2dsZURldlBoYXNlKHRvZ2dsZSlcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRvZ2dsZTogdHJ1ZSxcbiAgICAgICAgICBpY29uOiAnZmFzIGZhLXVzZXItZWRpdCcsXG4gICAgICAgICAgbmFtZTogJ2NoYXJjcmVhdGUnLFxuICAgICAgICAgIGFjdGl2ZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnY2hhckNyZWF0aW9uRW5hYmxlZCcpLFxuICAgICAgICAgIHRpdGxlOiAnQ29DNy5DaGFyQ3JlYXRpb25Nb2RlJyxcbiAgICAgICAgICBvbkNsaWNrOiBhc3luYyB0b2dnbGUgPT5cbiAgICAgICAgICAgIGF3YWl0IENvQzdVdGlsaXRpZXMudG9nZ2xlQ2hhckNyZWF0aW9uKHRvZ2dsZSlcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICBpY29uOiAnZmFzIGZhLXVzZXItcGx1cycsXG4gICAgICAgICAgbmFtZTogJ2FjdG9yLWltcG9ydCcsXG4gICAgICAgICAgdGl0bGU6ICdDb0M3LkFjdG9ySW1wb3J0ZXInLFxuICAgICAgICAgIG9uQ2xpY2s6IGFzeW5jICgpID0+XG4gICAgICAgICAgICBhd2FpdCBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZy5jcmVhdGUoe1xuICAgICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFjdG9ySW1wb3J0ZXInKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRvZ2dsZTogdHJ1ZSxcbiAgICAgICAgICBpY29uOiAnZmFzIGZhLWNlcnRpZmljYXRlJyxcbiAgICAgICAgICBjbGFzczogJ3hwX3RvZ2dsZScsXG4gICAgICAgICAgbmFtZTogJ3hwdG9nZ2xlJyxcbiAgICAgICAgICBhY3RpdmU6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3hwRW5hYmxlZCcpLFxuICAgICAgICAgIHRpdGxlOiAnQ29DNy50b2dnbGVYUCcsXG4gICAgICAgICAgb25DbGljazogYXN5bmMgdG9nZ2xlID0+IGF3YWl0IENvQzdVdGlsaXRpZXMudG9nZ2xlWFBHYWluKHRvZ2dsZSlcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICBpY29uOiAnZ2FtZS1pY29uIGdhbWUtaWNvbi1jYXJkLWpva2VyJyxcbiAgICAgICAgICBuYW1lOiAnZmFrZXJvbGwnLFxuICAgICAgICAgIHRpdGxlOiAnQ29DNy5GYWtlUm9sbCcsXG4gICAgICAgICAgb25DbGljazogQ29DN0NoYXQuZmFrZVJvbGxNZXNzYWdlXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBidXR0b246IHRydWUsXG4gICAgICAgICAgaWNvbjogJ2ZhcyBmYS1tb29uJyxcbiAgICAgICAgICBuYW1lOiAnc3RhcnRyZXN0JyxcbiAgICAgICAgICB0aXRsZTogJ0NvQzcuc3RhcnRSZXN0JyxcbiAgICAgICAgICBvbkNsaWNrOiBhc3luYyAoKSA9PiBhd2FpdCBDb0M3VXRpbGl0aWVzLnN0YXJ0UmVzdCgpXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIHJlbmRlckNvbnRyb2xzIChhcHAsIGh0bWwsIGRhdGEpIHtcbiAgICBjb25zdCBpc0dNID0gZ2FtZS51c2VyLmlzR01cbiAgICBjb25zdCBrZWVwZXJNZW51ID0gaHRtbC5maW5kKCcuZ2FtZS1pY29uLXRlbnRhY2xlLXN0cmlrZScpLnBhcmVudCgpXG4gICAga2VlcGVyTWVudS5hZGRDbGFzcygnY29jNy1tZW51JylcbiAgICBpZiAoaXNHTSkge1xuICAgICAga2VlcGVyTWVudS5hZnRlcihcbiAgICAgICAgJzxsaSBjbGFzcz1cInNjZW5lLWNvbnRyb2wgY29jNy1tZW51IGNvYzctY3JlYXRlLWxpbmtcIiB0aXRsZT1cIicgK1xuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DcmVhdGVMaW5rJykgK1xuICAgICAgICAgICdcIj48aSBjbGFzcz1cImZhcyBmYS1saW5rXCI+PC9pPjwvbGk+J1xuICAgICAgKVxuICAgIH1cbiAgICBrZWVwZXJNZW51LmFmdGVyKFxuICAgICAgJzxsaSBjbGFzcz1cInNjZW5lLWNvbnRyb2wgY29jNy1tZW51IGNvYzctZGljZS1yb2xsXCIgdGl0bGU9XCInICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJvbGxEaWNlJykgK1xuICAgICAgICAnXCI+PGkgY2xhc3M9XCJnYW1lLWljb24gZ2FtZS1pY29uLWQxMFwiPjwvaT48L2xpPidcbiAgICApXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5jb2M3LW1lbnUuY29jNy1kaWNlLXJvbGwnKVxuICAgICAgLmNsaWNrKGV2ZW50ID0+IENvQzdVdGlsaXRpZXMucm9sbERpY2UoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuY29jNy1tZW51LmNvYzctY3JlYXRlLWxpbmsnKVxuICAgICAgLmNsaWNrKGV2ZW50ID0+IENvQzdMaW5rQ3JlYXRpb25EaWFsb2cuY3JlYXRlKGV2ZW50KSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIHVpICovXG5cbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuLi9jaGF0L2hlbHBlci5qcydcbmltcG9ydCB7IENvQzdMaW5rIH0gZnJvbSAnLi9saW5rLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0NhbnZhcyB7XG4gIHN0YXRpYyBnZXQgQ09DN19UWVBFU19TVVBQT1JURUQgKCkge1xuICAgIHJldHVybiBbJ2xpbmsnXVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIG9uRHJvcFNvbWV0aGluZyAoY2FudmFzLCBpdGVtKSB7XG4gICAgaWYgKFxuICAgICAgaXRlbS5Db0M3VHlwZSAmJlxuICAgICAgQ29DN0NhbnZhcy5DT0M3X1RZUEVTX1NVUFBPUlRFRC5pbmNsdWRlcyhpdGVtLkNvQzdUeXBlKVxuICAgICkge1xuICAgICAgY29uc3QgZ3JpZFNpemUgPSBjYW52YXMuc2NlbmUuZGF0YS5ncmlkXG4gICAgICBjb25zdCB4ID0gaXRlbS54IC0gZ3JpZFNpemUgLyAyXG4gICAgICBjb25zdCB5ID0gaXRlbS55IC0gZ3JpZFNpemUgLyAyXG4gICAgICBjb25zdCBoZWlnaHQgPSBncmlkU2l6ZVxuICAgICAgY29uc3Qgd2lkdGggPSBncmlkU2l6ZVxuICAgICAgbGV0IGRyb3BUYXJnZXRUb2tlbnMgPSBjYW52YXMudG9rZW5zLnBsYWNlYWJsZXMuZmlsdGVyKG9iaiA9PiB7XG4gICAgICAgIGNvbnN0IGMgPSBvYmouY2VudGVyXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgTnVtYmVyLmJldHdlZW4oYy54LCB4LCB4ICsgd2lkdGgpICYmXG4gICAgICAgICAgTnVtYmVyLmJldHdlZW4oYy55LCB5LCB5ICsgaGVpZ2h0KVxuICAgICAgICApXG4gICAgICB9KSAvLyBGaW5kIGRyb3AgdGFyZ2V0LlxuICAgICAgaWYgKCFkcm9wVGFyZ2V0VG9rZW5zLmxlbmd0aCkgZHJvcFRhcmdldFRva2VucyA9IGNhbnZhcy50b2tlbnMuY29udHJvbGxlZCAvLyBJZiBubyB0YXJnZXQgd2hpc3BlciB0byBzZWxlY3RlZCB0b2tlblxuICAgICAgc3dpdGNoIChpdGVtLkNvQzdUeXBlKSB7XG4gICAgICAgIGNhc2UgJ2xpbmsnOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBhd2FpdCBDb0M3TGluay5mcm9tRGF0YShpdGVtKVxuICAgICAgICAgICAgaWYgKCFsaW5rLmxpbmspIHtcbiAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignSW52YWxpZCBsaW5rJylcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0ge31cbiAgICAgICAgICAgIG9wdGlvbi5zcGVha2VyID0ge1xuICAgICAgICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFkcm9wVGFyZ2V0VG9rZW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICBjb25zdCB3aGlzcGVyVGFyZ2V0cyA9IGdhbWUudXNlcnMucGxheWVycy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgdSA9PiAhIXUuY2hhcmFjdGVyXG4gICAgICAgICAgICAgICkgLy8gVXNlciB3aXRoIGF0IGxlYXN0IGEgY2hhcmFjdGVyXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgdSBvZiB3aGlzcGVyVGFyZ2V0cykge1xuICAgICAgICAgICAgICAgIG9wdGlvbi53aGlzcGVyID0gW3VdXG4gICAgICAgICAgICAgICAgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKFxuICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWVzc2FnZVRhcmdldENoZWNrUmVxdWVzdGVkJywge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiB1LmNoYXJhY3Rlci5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBjaGVjazogbGluay5saW5rXG4gICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgIG9wdGlvblxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGRyb3BUYXJnZXRUb2tlbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAodC5hY3Rvci5oYXNQbGF5ZXJPd25lcikge1xuICAgICAgICAgICAgICAgICAgb3B0aW9uLndoaXNwZXIgPSB0LmFjdG9yLm93bmVyc1xuICAgICAgICAgICAgICAgICAgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKFxuICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1lc3NhZ2VUYXJnZXRDaGVja1JlcXVlc3RlZCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0LmFjdG9yLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgY2hlY2s6IGxpbmsubGlua1xuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsIENvbXBlbmRpdW1EaXJlY3RvcnksIERpYWxvZywgZ2FtZSAqL1xuXG5leHBvcnQgY2xhc3MgQ29DN0NvbXBlbmRpdW1EaXJlY3RvcnkgZXh0ZW5kcyBDb21wZW5kaXVtRGlyZWN0b3J5IHtcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIGxldCB0cmFuc2xhdGVkID0gZmFsc2VcbiAgICBpZiAoZ2FtZS5pMThuLmxhbmcgPT09ICdlbicpIHtcbiAgICAgIHRyYW5zbGF0ZWQgPSB0cnVlXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZ2FtZS5iYWJlbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBmb3IgKGNvbnN0IHYgb2YgT2JqZWN0LnZhbHVlcyhnYW1lLmJhYmVsZS5tb2R1bGVzKSkge1xuICAgICAgICBpZiAodi5sYW5nID09PSBnYW1lLmkxOG4ubGFuZykge1xuICAgICAgICAgIHRyYW5zbGF0ZWQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0cmFuc2xhdGVkKSB7XG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCdmb290ZXIuZGlyZWN0b3J5LWZvb3RlcicpXG4gICAgICAgIC5hcHBlbmQoXG4gICAgICAgICAgJzxhIGNsYXNzPVwiY29tcGVuZGl1bS10cmFuc2xhdGlvblwiIHRpdGxlPVwiJyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVUaXRsZScpICtcbiAgICAgICAgICAgICdcIj4nICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ib3dUb1RyYW5zbGF0ZVRpdGxlJykgK1xuICAgICAgICAgICAgJzwvYT4nXG4gICAgICAgIClcbiAgICAgIGh0bWwuZmluZCgnLmNvbXBlbmRpdW0tdHJhbnNsYXRpb24nKS5jbGljaygoKSA9PiB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPVxuICAgICAgICAgICc8cD4nICtcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVXYXJuaW5nJykgK1xuICAgICAgICAgICc8L3A+JyArXG4gICAgICAgICAgJzxwPicgK1xuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ib3dUb1RyYW5zbGF0ZUluc3RhbGxCYWJlbGUnKSArXG4gICAgICAgICAgJzwvcD4nICtcbiAgICAgICAgICAnPHA+JyArXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkhvd1RvVHJhbnNsYXRlSW5zdGFsbFRyYW5zbGF0aW9uJykgK1xuICAgICAgICAgICc8L3A+JyArXG4gICAgICAgICAgJzxwPicgK1xuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ib3dUb1RyYW5zbGF0ZUVuYWJsZVRyYW5zbGF0aW9uJykgK1xuICAgICAgICAgICc8L3A+JyArXG4gICAgICAgICAgJzxwPicgK1xuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ib3dUb1RyYW5zbGF0ZU5vVHJhbnNsYXRpb24nKSArXG4gICAgICAgICAgJzwvcD4nXG4gICAgICAgIG5ldyBEaWFsb2coXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ib3dUb1RyYW5zbGF0ZVRpdGxlJyksXG4gICAgICAgICAgICBjb250ZW50OiBtZXNzYWdlLFxuICAgICAgICAgICAgYnV0dG9uczoge30sXG4gICAgICAgICAgICBkZWZhdWx0OiAnY2xvc2UnXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7fVxuICAgICAgICApLnJlbmRlcih0cnVlKVxuICAgICAgfSlcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBBY3RvckRpcmVjdG9yeSwgZ2FtZSAqL1xuaW1wb3J0IHsgQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2cgfSBmcm9tICcuL2FwcHMvYWN0b3ItaW1wb3J0ZXItZGlhbG9nLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0FjdG9yRGlyZWN0b3J5IGV4dGVuZHMgQWN0b3JEaXJlY3Rvcnkge1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJ2Zvb3Rlci5kaXJlY3RvcnktZm9vdGVyJylcbiAgICAgIC5hcHBlbmQoXG4gICAgICAgICc8YSBjbGFzcz1cImFjdG9yLWltcG9ydFwiPicgK1xuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BY3RvckltcG9ydGVyJykgK1xuICAgICAgICAgICc8L2E+J1xuICAgICAgKVxuICAgIGh0bWwuZmluZCgnLmFjdG9yLWltcG9ydCcpLmNsaWNrKCgpID0+IHtcbiAgICAgIENvQzdBY3RvckltcG9ydGVyRGlhbG9nLmNyZWF0ZSh7XG4gICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWN0b3JJbXBvcnRlcicpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBDaGF0TWVzc2FnZSwgZ2FtZSwgbWVyZ2VPYmplY3QsIFJvbGwsIHJlbmRlclRlbXBsYXRlLCB1aSAqL1xuXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtLmpzJ1xuaW1wb3J0IHsgU2FuQ2hlY2tDYXJkIH0gZnJvbSAnLi4vLi4vY2hhdC9jYXJkcy9zYW4tY2hlY2suanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3U3BlbGwgZXh0ZW5kcyBDb0M3SXRlbSB7XG4gIGNvbnN0cnVjdG9yIChkYXRhLCBjb250ZXh0KSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvcGVudGFncmFtLXJvc2Uuc3ZnJ1xuICAgIH1cbiAgICBzdXBlcihkYXRhLCBjb250ZXh0KVxuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHRcbiAgfVxuXG4gIGFzeW5jIGNhc3QgKCkge1xuICAgIGlmICghdGhpcy5pc093bmVkKSB7XG4gICAgICAvKiogVGhpcyBpcyBub3Qgb3duZWQgYnkgYW55IEFjdG9yICovXG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm90T3duZWQnKSlcbiAgICB9XG4gICAgY29uc3QgY29zdHMgPSB0aGlzLmRhdGEuZGF0YS5jb3N0c1xuICAgIGNvbnN0IGxvc3NlcyA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoY29zdHMpKSB7XG4gICAgICBpZiAoIXZhbHVlIHx8IE51bWJlcih2YWx1ZSkgPT09IDApIGNvbnRpbnVlXG4gICAgICBsb3NzZXMucHVzaChhd2FpdCB0aGlzLnJlc29sdmVMb3NzZXMoa2V5LCB2YWx1ZSkpXG4gICAgfVxuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvc3BlbGwvY2hhdC5odG1sJ1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gdGhpcy5kYXRhLmRhdGEuZGVzY3JpcHRpb24udmFsdWVcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHsgZGVzY3JpcHRpb24sIGxvc3NlcyB9KVxuICAgIHJldHVybiBhd2FpdCBDaGF0TWVzc2FnZS5jcmVhdGUoe1xuICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgc3BlYWtlcjogQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcih7IGFjdG9yOiB0aGlzLmFjdG9yIH0pLFxuICAgICAgZmxhdm9yOiB0aGlzLm5hbWUsXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIHJlc29sdmVMb3NzZXMgKGNoYXJhY3RlcmlzdGljLCB2YWx1ZSkge1xuICAgIGxldCBjaGFyYWN0ZXJpc3RpY05hbWVcbiAgICBsZXQgbG9zc1xuICAgIGlmIChDb0M3VXRpbGl0aWVzLmlzRm9ybXVsYSh2YWx1ZSkpIHtcbiAgICAgIGxvc3MgPSAoYXdhaXQgbmV3IFJvbGwodmFsdWUpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KSkudG90YWxcbiAgICB9IGVsc2Uge1xuICAgICAgbG9zcyA9IHBhcnNlSW50KHZhbHVlKVxuICAgIH1cbiAgICBjb25zdCBhY3RvckRhdGEgPSB0aGlzLmFjdG9yLmRhdGEuZGF0YVxuICAgIHN3aXRjaCAoY2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgIGNhc2UgJ2hpdFBvaW50cyc6XG4gICAgICAgIGNoYXJhY3RlcmlzdGljTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IaXRQb2ludHMnKVxuICAgICAgICB0aGlzLmFjdG9yLmRlYWxEYW1hZ2UobG9zcylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3Nhbml0eSc6XG4gICAgICAgIGNoYXJhY3RlcmlzdGljTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHlQb2ludHMnKVxuICAgICAgICB0aGlzLmdyYW50U2FuaXR5TG9zcyhsb3NzKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnbWFnaWNQb2ludHMnOlxuICAgICAgICBjaGFyYWN0ZXJpc3RpY05hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWFnaWNQb2ludHMnKVxuICAgICAgICB0aGlzLmFjdG9yLnVwZGF0ZSh7XG4gICAgICAgICAgJ2RhdGEuYXR0cmlicy5tcC52YWx1ZSc6IGFjdG9yRGF0YS5hdHRyaWJzLm1wLnZhbHVlIC0gbG9zc1xuICAgICAgICB9KVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAncG93ZXInOlxuICAgICAgICBjaGFyYWN0ZXJpc3RpY05hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5Qb3dlcicpXG4gICAgICAgIHRoaXMuYWN0b3IudXBkYXRlKHtcbiAgICAgICAgICAnZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlJzpcbiAgICAgICAgICAgIGFjdG9yRGF0YS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlIC0gbG9zc1xuICAgICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4geyBjaGFyYWN0ZXJpc3RpY05hbWUsIGxvc3MgfVxuICB9XG5cbiAgLyoqIEJ5cGFzcyB0aGUgU2FuaXR5IGNoZWNrIGFuZCBqdXN0IHJvbGwgdGhlIGRhbWFnZSAqL1xuICBhc3luYyBncmFudFNhbml0eUxvc3MgKHZhbHVlKSB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSBTYW5DaGVja0NhcmQudGVtcGxhdGVcbiAgICBsZXQgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB7fSlcbiAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoeyBhY3RvcjogdGhpcy5hY3RvciB9KSxcbiAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DYXN0aW5nU3BlbGwnLCB7XG4gICAgICAgIHNwZWxsOiB0aGlzLm5hbWVcbiAgICAgIH0pLFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH0pXG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IG1lc3NhZ2UuZ2V0SFRNTCgpXG4gICAgaWYgKHR5cGVvZiBjYXJkLmxlbmd0aCAhPT0gJ3VuZGVmaW5lZCcgJiYgY2FyZC5sZW5ndGggPT09IDEpIHtcbiAgICAgIGNvbnN0IHNhbml0eUxvc3MgPSB2YWx1ZVxuICAgICAgaHRtbCA9IGNhcmQuZmluZCgnLmNoYXQtY2FyZCcpWzBdXG4gICAgICBodG1sLmRhdGFzZXQub2JqZWN0ID0gZXNjYXBlKFxuICAgICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0b3IuaWQsXG4gICAgICAgICAgZmFzdEZvcndhcmQ6IGZhbHNlLFxuICAgICAgICAgIHNhbkRhdGE6IHtcbiAgICAgICAgICAgIHNhbk1pbjogc2FuaXR5TG9zcyxcbiAgICAgICAgICAgIHNhbk1heDogc2FuaXR5TG9zc1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIGNvbnN0IHNhbml0eUNoZWNrID0gU2FuQ2hlY2tDYXJkLmdldEZyb21DYXJkKGh0bWwpXG4gICAgICBhd2FpdCBzYW5pdHlDaGVjay5ieXBhc3NSb2xsU2FuKClcbiAgICAgIGF3YWl0IHNhbml0eUNoZWNrLnJvbGxTYW5Mb3NzKClcbiAgICAgIHNhbml0eUNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICB9XG4gIH1cblxuICB1cGRhdGUgKGRhdGEsIGNvbnRleHQpIHtcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgdGhpcy5jb250ZXh0LnBhcmVudCAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiB0aGlzLmNvbnRleHQuYm9va0lkICE9PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgbGV0IGl0ZW1cbiAgICAgIGxldCBib29rXG4gICAgICBpZiAodGhpcy5jb250ZXh0LnBhcmVudCA9PT0gbnVsbCkge1xuICAgICAgICBpdGVtID0gZ2FtZS5pdGVtcy5nZXQodGhpcy5jb250ZXh0LmJvb2tJZClcbiAgICAgICAgYm9vayA9IGl0ZW0udG9PYmplY3QoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYm9vayA9IHRoaXMuY29udGV4dC5wYXJlbnQuaXRlbXMuZ2V0KHRoaXMuY29udGV4dC5ib29rSWQpLnRvT2JqZWN0KClcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSAwLCBpbSA9IGJvb2suZGF0YS5zcGVsbHMubGVuZ3RoOyBpIDwgaW07IGkrKykge1xuICAgICAgICBpZiAoYm9vay5kYXRhLnNwZWxsc1tpXS5faWQgPT09IHRoaXMuaWQpIHtcbiAgICAgICAgICBib29rLmRhdGEuc3BlbGxzW2ldID0gbWVyZ2VPYmplY3QoYm9vay5kYXRhLnNwZWxsc1tpXSwgZGF0YSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuY29udGV4dC5wYXJlbnQgPT09IG51bGwpIHtcbiAgICAgICAgaXRlbS51cGRhdGUoe1xuICAgICAgICAgICdkYXRhLnNwZWxscyc6IGJvb2suZGF0YS5zcGVsbHNcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY29udGV4dC5wYXJlbnQudXBkYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbYm9va10pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN1cGVyLnVwZGF0ZShkYXRhLCBjb250ZXh0KVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsIENoYXRNZXNzYWdlLCBkdXBsaWNhdGUsIGdhbWUsIHJlbmRlclRlbXBsYXRlLCBSb2xsLCB1aSAqL1xuXG5pbXBvcnQgeyBTYW5DaGVja0NhcmQgfSBmcm9tICcuLi8uLi9jaGF0L2NhcmRzL3Nhbi1jaGVjay5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtLmpzJ1xuaW1wb3J0IHsgQ29DN1NwZWxsIH0gZnJvbSAnLi4vc3BlbGwvZGF0YS5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdCb29rIGV4dGVuZHMgQ29DN0l0ZW0ge1xuICBjb25zdHJ1Y3RvciAoZGF0YSwgY29udGV4dCkge1xuICAgIGlmICh0eXBlb2YgZGF0YS5pbWcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3NlY3JldC1ib29rLnN2ZydcbiAgICB9XG4gICAgc3VwZXIoZGF0YSwgY29udGV4dClcbiAgfVxuXG4gIC8qKiBDb252ZXJ0IHRoZSBkaWZmaWN1bHR5IG9uIHRoZSBzZWxlY3QgZWxlbWVudCB0byBhIGZvcm1hdCBhY2NlcHRlZCAqL1xuICBzdGF0aWMgY29udmVydERpZmZpY3VsdHkgKGRpZmZpY3VsdHkpIHtcbiAgICBzd2l0Y2ggKGRpZmZpY3VsdHkpIHtcbiAgICAgIGNhc2UgJ2hhcmQnOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkXG4gICAgICBjYXNlICdleHRyZW1lJzpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZVxuICAgICAgY2FzZSAnY3JpdGljYWwnOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbFxuICAgICAgY2FzZSAndW5yZWFkYWJsZSc6XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmltcG9zc2libGVcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRm9yIHRoZSBmdXR1cmU6IGFkZCBhZHZhbmNlZCBydWxlcyBmb3IgbGVhcm5pbmcgc3BlbGxzLCBwZy4gMTc2XG4gICAqIEBwYXJhbSBbe0RvY3VtZW50fV0gc3BlbGxzXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcbiAgICovXG4gIGFzeW5jIGFkZFNwZWxscyAoc3BlbGxzKSB7XG4gICAgY29uc3QgY29sbGVjdGlvbiA9IHRoaXMuZGF0YS5kYXRhLnNwZWxsc1xuICAgICAgPyBkdXBsaWNhdGUodGhpcy5kYXRhLmRhdGEuc3BlbGxzKVxuICAgICAgOiBbXVxuICAgIGZvciAoY29uc3Qgc3BlbGwgb2Ygc3BlbGxzKSB7XG4gICAgICBjb2xsZWN0aW9uLnB1c2goc3BlbGwpXG4gICAgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdkYXRhLnNwZWxscyc6IGNvbGxlY3Rpb24gfSlcbiAgfVxuXG4gIGFzeW5jIHNwZWxsRGV0YWlsIChpbmRleCkge1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGEuZGF0YS5zcGVsbHNbaW5kZXhdXG4gICAgY29uc3QgcGFyZW50ID0gdGhpcy5hY3RvciA/IHRoaXMuYWN0b3IgOiBudWxsXG4gICAgY29uc3Qgc3BlbGwgPSBuZXcgQ29DN1NwZWxsKGRhdGEsIHsgcGFyZW50LCBib29rSWQ6IHRoaXMuaWQgfSlcbiAgICByZXR1cm4gYXdhaXQgc3BlbGwuc2hlZXQucmVuZGVyKHRydWUpXG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyBhbGwgdGhlIGxvZ2ljIGludm9sdmluZyB0aGUgYXR0ZW1wdCBvZiBpbml0aWFsIHJlYWRpbmdcbiAgICogQHJldHVybnMge1Byb21pc2V9IEBzZWUgbGlzdGVuIEBzZWUgZ3JhbnRJbml0aWFsUmVhZGluZ1xuICAgKi9cbiAgYXN5bmMgYXR0ZW1wdEluaXRpYWxSZWFkaW5nICgpIHtcbiAgICAvKiogQ29udmVydHMgdGhlIGRpZmZpY3VsdHkgdmFsdWUgdG8gc29tZXRoaW5nIGFjY2VwdGVkIGJ5IENvQzdDaGVjayAqL1xuICAgIGNvbnN0IGRpZmZpY3VsdHkgPSBDb0M3Qm9vay5jb252ZXJ0RGlmZmljdWx0eShcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmRpZmZpY3VsdHlMZXZlbFxuICAgIClcbiAgICBjb25zdCBsYW5ndWFnZSA9IHRoaXMuZGF0YS5kYXRhLmxhbmd1YWdlXG4gICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yPy5nZXRTa2lsbHNCeU5hbWUobGFuZ3VhZ2UpXG4gICAgaWYgKCFza2lsbCkge1xuICAgICAgLyoqIFRoaXMgaXMgbm90IG93bmVkIGJ5IGFueSBBY3RvciAqL1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdE93bmVkJykpXG4gICAgfSBlbHNlIGlmIChza2lsbC5sZW5ndGggPT09IDApIHtcbiAgICAgIC8qKlxuICAgICAgICogVGhlIEFjdG9yIHdobyBvd25zIHRoaXMgZG9lcyBub3QgaGF2ZSB0aGUgc2tpbGwgb2ZcbiAgICAgICAqIHRoZSBsYW5ndWFnZSBpbiB3aGljaCBpdCB3YXMgd3JpdHRlblxuICAgICAgICovXG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Vbmtub3duTGFuZ3VhZ2UnLCB7IGFjdG9yOiB0aGlzLmFjdG9yLm5hbWUgfSlcbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgIGNoZWNrLmFjdG9yID0gdGhpcy5hY3RvclxuICAgICAgY2hlY2suc2tpbGwgPSBza2lsbFswXS5pZFxuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICAgIGNoZWNrLnBhcmVudCA9IHRoaXMudXVpZFxuICAgICAgY2hlY2suY29udGV4dCA9ICdJTklUSUFMX1JFQURJTkcnXG4gICAgICBjaGVjay5mbGF2b3IgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlYWRBdHRlbXB0Jywge1xuICAgICAgICBib29rOiB0aGlzLm5hbWUsXG4gICAgICAgIGxhbmd1YWdlLFxuICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRhdGEuZGF0YS5kaWZmaWN1bHR5TGV2ZWxcbiAgICAgIH0pXG4gICAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICAgIHJldHVybiBhd2FpdCBjaGVjay50b01lc3NhZ2UoKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJdHMgaXMgY2FsbGVkIGV2ZXJ5IHRpbWUgdGhlIHVzZXIgaW50ZXJhY3RzIGluIHNvbWUgd2F5IHdpdGggcHJvZ3Jlc3MgYmFyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlICdyZXNldCcgfHwgJ2luY3JlYXNlJyB8fCAnZGVjcmVhc2UnXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBqdXN0IHNvIHRoYXQgcHJvZ3Jlc3MgaXMgbm90IGdyZWF0ZXIgdGhhbiBuZWNlc3NhcnlcbiAgICogQHJldHVybnMge1Byb21pc2U8RG9jdW1lbnQ+fSB1cGRhdGUgdG8gSXRlbSBkb2N1bWVudFxuICAgKi9cbiAgYXN5bmMgY2hhbmdlUHJvZ3Jlc3MgKG1vZGUsIHZhbHVlKSB7XG4gICAgaWYgKCF0aGlzLmlzT3duZWQgJiYgbW9kZSAhPT0gJ3Jlc2V0Jykge1xuICAgICAgLyoqIFRoaXMgaXMgbm90IG93bmVkIGJ5IGFueSBBY3RvciAqL1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdE93bmVkJykpXG4gICAgfVxuICAgIGlmICghdGhpcy5kYXRhLmRhdGEuaW5pdGlhbFJlYWRpbmcgJiYgbW9kZSAhPT0gJ3Jlc2V0Jykge1xuICAgICAgLyoqIEFjdG9yIGRpZCBub3QgcGVyZm9ybWVkIGFuIGluaXRpYWwgcmVhZGluZyBmaXJzdCAqL1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5pdGlhbFJlYWRpbmdOZWVkZWQnLCB7XG4gICAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3IubmFtZSxcbiAgICAgICAgICBib29rOiB0aGlzLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKCF0aGlzLmRhdGEuZGF0YS50eXBlLm15dGhvcyAmJiBtb2RlICE9PSAncmVzZXQnKSB7XG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm90TXl0aG9zVG9tZScpKVxuICAgIH1cbiAgICBjb25zdCBuZWNlc3NhcnkgPSB0aGlzLmRhdGEuZGF0YS5zdHVkeS5uZWNlc3NhcnlcbiAgICBsZXQgZnVsbFN0dWR5ID0gdGhpcy5kYXRhLmRhdGEuZnVsbFN0dWR5XG4gICAgbGV0IHByb2dyZXNzID0gdGhpcy5kYXRhLmRhdGEuc3R1ZHkucHJvZ3Jlc3NcbiAgICBpZiAoaXNOYU4ocHJvZ3Jlc3MpKSB7XG4gICAgICAvKiogSXQgc2VlbXMgYSBsaXR0bGUgaW1wb3NzaWJsZSwgYnV0IHlvdSBuZXZlciBrbm93ICovXG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnZGF0YS5zdHVkeS5wcm9ncmVzcyc6IDBcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmICh2YWx1ZSAmJiBwcm9ncmVzcyA+IHZhbHVlKSB7XG4gICAgICAvKipcbiAgICAgICAqIFByb2dyZXNzIHZhbHVlIGlzIGdyZWF0ZXIgdGhhbiB2YWx1ZSBlbnRlcmVkIGJ5IHVzZXIgYXMgbmVjZXNzYXJ5LFxuICAgICAgICogcmVzZXQgcHJvZ3Jlc3MgdG8gYmUgZXF1YWwgbmVjZXNzYXJ5IGFuZCBjb21wbGV0ZSBmdWxsIHN0dWR5XG4gICAgICAgKi9cbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ2RhdGEuZnVsbFN0dWR5JzogKytmdWxsU3R1ZHksXG4gICAgICAgICdkYXRhLnN0dWR5LnByb2dyZXNzJzogdmFsdWVcbiAgICAgIH0pXG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5jb21wbGV0ZUZ1bGxTdHVkeSgpXG4gICAgfVxuICAgIGlmIChtb2RlID09PSAnaW5jcmVhc2UnICYmIHByb2dyZXNzIDwgbmVjZXNzYXJ5KSB7XG4gICAgICAvKiogVXNlciBjbGlja2VkIG9uIHBsdXMgaWNvbiB0byBpbmNyZWFzZSBwcm9ncmVzcyAqL1xuICAgICAgaWYgKChhd2FpdCB0aGlzLmNoZWNrRXhoYXVzdGlvbigpKSAhPT0gZmFsc2UpIHJldHVyblxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnZGF0YS5zdHVkeS5wcm9ncmVzcyc6ICsrcHJvZ3Jlc3NcbiAgICAgIH0pXG4gICAgICBpZiAocHJvZ3Jlc3MgPT09IG5lY2Vzc2FyeSkge1xuICAgICAgICAvKiogQ29tcGxldGUgZnVsbCBzdHVkeSBpZiBwcm9ncmVzcyBpcyBlcXVhbCBuZWNlc3NhcnkgKi9cbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS5mdWxsU3R1ZHknOiArK2Z1bGxTdHVkeSB9KVxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5ncmFudEZ1bGxTdHVkeSgpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChtb2RlID09PSAnZGVjcmVhc2UnICYmIHByb2dyZXNzID4gMCkge1xuICAgICAgLyoqIFVzZXIgY2xpY2tlZCBvbiBtaW51cyBpY29uIHRvIGRlY3JlYXNlIHByb2dyZXNzICovXG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnZGF0YS5zdHVkeS5wcm9ncmVzcyc6IC0tcHJvZ3Jlc3NcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY2hlY2tFeGhhdXN0aW9uICgpIHtcbiAgICBjb25zdCBhY3Rvck15dGhvc1ZhbHVlID0gdGhpcy5hY3Rvcj8uY3RodWxodU15dGhvc1xuICAgIGNvbnN0IG15dGhvc1JhdGluZyA9IHRoaXMuZGF0YS5kYXRhLm15dGhvc1JhdGluZ1xuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5pbml0aWFsUmVhZGluZykge1xuICAgICAgaWYgKGFjdG9yTXl0aG9zVmFsdWUgPj0gbXl0aG9zUmF0aW5nKSB7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgICAnZGF0YS5zdHVkeS5wcm9ncmVzcyc6IHRoaXMuZGF0YS5kYXRhLnN0dWR5Lm5lY2Vzc2FyeVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQm9va0hhc05vdGhpbmdNb3JlVG9UZWFjaCcsIHtcbiAgICAgICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yLm5hbWUsXG4gICAgICAgICAgICBib29rOiB0aGlzLm5hbWVcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICB9IGVsc2UgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ3JhbnRGdWxsU3R1ZHkgKCkge1xuICAgIGlmICghdGhpcy5kYXRhLmRhdGEudHlwZS5teXRob3MpIHJldHVyblxuICAgIGlmICgoYXdhaXQgdGhpcy5jaGVja0V4aGF1c3Rpb24oKSkgIT09IGZhbHNlKSByZXR1cm5cbiAgICBjb25zdCBhY3Rvck15dGhvc1ZhbHVlID0gdGhpcy5hY3Rvci5jdGh1bGh1TXl0aG9zXG4gICAgY29uc3QgZGV2ZWxvcG1lbnRzID0gW11cbiAgICBjb25zdCBteXRob3NSYXRpbmcgPSB0aGlzLmRhdGEuZGF0YS5teXRob3NSYXRpbmdcbiAgICBsZXQgbXl0aG9zRmluYWwgPSB0aGlzLmRhdGEuZGF0YS5nYWlucy5jdGh1bGh1TXl0aG9zLmZpbmFsXG4gICAgaWYgKGFjdG9yTXl0aG9zVmFsdWUgKyBteXRob3NGaW5hbCA+IG15dGhvc1JhdGluZykge1xuICAgICAgZm9yIChsZXQgaW5kZXggPSAxOyBpbmRleCA8PSBteXRob3NGaW5hbDsgaW5kZXgrKykge1xuICAgICAgICBpZiAoYWN0b3JNeXRob3NWYWx1ZSArIG15dGhvc0ZpbmFsIC0gaW5kZXggPD0gbXl0aG9zUmF0aW5nKSB7XG4gICAgICAgICAgbXl0aG9zRmluYWwgLT0gaW5kZXhcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgcmVhZGVyIGF1dG9tYXRpY2FsbHkgZ2FpbnMgYSBza2lsbCB0aWNrIGZvciB0aGVcbiAgICAgKiBsYW5ndWFnZSBpbiB3aGljaCB0aGUgYm9vayBpcyB3cml0dGVuXG4gICAgICovXG4gICAgZGV2ZWxvcG1lbnRzLnB1c2goXG4gICAgICB7XG4gICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DdGh1bGh1TXl0aG9zTmFtZScpLFxuICAgICAgICBnYWluOiBwYXJzZUludChteXRob3NGaW5hbClcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6IHRoaXMuZGF0YS5kYXRhLmxhbmd1YWdlLFxuICAgICAgICBnYWluOiAnZGV2ZWxvcG1lbnQnXG4gICAgICB9XG4gICAgKVxuICAgIGF3YWl0IHRoaXMuZ3JhbnRTa2lsbERldmVsb3BtZW50KGRldmVsb3BtZW50cylcbiAgICBhd2FpdCB0aGlzLnJvbGxTYW5pdHlMb3NzKClcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgJ2RhdGEuZnVsbFN0dWRpZXMnOiArK3RoaXMuZGF0YS5kYXRhLmZ1bGxTdHVkaWVzXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XG4gICAqL1xuICBhc3luYyBncmFudEluaXRpYWxSZWFkaW5nICgpIHtcbiAgICAvKiogSWYgaW5pdGlhbCByZWFkaW5nIGhhcyBhbHJlYWR5IGJlZW4gZG9uZSB0aGVyZSBpcyBub3RoaW5nIHRvIGRvIGhlcmUgKi9cbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuaW5pdGlhbFJlYWRpbmcpIHJldHVyblxuICAgIGNvbnN0IGRldmVsb3BtZW50cyA9IFtdXG4gICAgY29uc3QgbXl0aG9zID0ge1xuICAgICAgZ2FpbnM6IHRoaXMuZGF0YS5kYXRhLmdhaW5zLmN0aHVsaHVNeXRob3MuaW5pdGlhbCxcbiAgICAgIHR5cGU6IHRoaXMuZGF0YS5kYXRhLnR5cGUubXl0aG9zXG4gICAgfVxuICAgIGNvbnN0IG9jY3VsdCA9IHtcbiAgICAgIGdhaW5zOiB0aGlzLmRhdGEuZGF0YS5nYWlucy5vY2N1bHQsXG4gICAgICB0eXBlOiB0aGlzLmRhdGEuZGF0YS50eXBlLm9jY3VsdFxuICAgIH1cbiAgICBjb25zdCBvdGhlciA9IHtcbiAgICAgIGdhaW5zOiB0aGlzLmRhdGEuZGF0YS5nYWlucy5vdGhlcnMsXG4gICAgICB0eXBlOiB0aGlzLmRhdGEuZGF0YS50eXBlLm90aGVyXG4gICAgfVxuICAgIGlmIChteXRob3MudHlwZSAmJiBteXRob3MuZ2FpbnMpIHtcbiAgICAgIGRldmVsb3BtZW50cy5wdXNoKHtcbiAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkN0aHVsaHVNeXRob3NOYW1lJyksXG4gICAgICAgIGdhaW46IHBhcnNlSW50KG15dGhvcy5nYWlucylcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmIChvY2N1bHQudHlwZSAmJiBvY2N1bHQuZ2FpbnMpIHtcbiAgICAgIGRldmVsb3BtZW50cy5wdXNoKHtcbiAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk9jY3VsdCcpLFxuICAgICAgICBnYWluOiBwYXJzZUludChvY2N1bHQuZ2FpbnMpXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAob3RoZXIudHlwZSkge1xuICAgICAgZm9yIChjb25zdCBza2lsbCBvZiBvdGhlci5nYWlucykge1xuICAgICAgICBjb25zdCBwYXR0ZXJuID0gc2tpbGwubmFtZS5tYXRjaCgvXiguKykgXFwoKC4rKVxcKSQvKVxuICAgICAgICAvKiogU2FuaXRpemF0aW9uIHRvIGRlYWwgd2l0aCBzcGVjaWFsaXphdGlvbnMgKi9cbiAgICAgICAgaWYgKHBhdHRlcm4pIHtcbiAgICAgICAgICBza2lsbC5zcGVjaWFsaXphdGlvbiA9IHBhdHRlcm5bMV1cbiAgICAgICAgICBza2lsbC5uYW1lID0gcGF0dGVyblsyXVxuICAgICAgICB9XG4gICAgICAgIGlmIChza2lsbC52YWx1ZSAhPT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICAgIHNraWxsLnZhbHVlID0gKFxuICAgICAgICAgICAgYXdhaXQgbmV3IFJvbGwoc2tpbGwudmFsdWUpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICkudG90YWxcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2tpbGwudmFsdWUpIHtcbiAgICAgICAgICBkZXZlbG9wbWVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBza2lsbC5uYW1lLFxuICAgICAgICAgICAgZ2Fpbjogc2tpbGwudmFsdWUsXG4gICAgICAgICAgICBzcGVjaWFsaXphdGlvbjogc2tpbGwuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGF3YWl0IHRoaXMuZ3JhbnRTa2lsbERldmVsb3BtZW50KGRldmVsb3BtZW50cylcbiAgICBpZiAoKG15dGhvcy50eXBlIHx8IG9jY3VsdC50eXBlKSAmJiB0aGlzLmRhdGEuZGF0YS5zYW5pdHlMb3NzKSB7XG4gICAgICBhd2FpdCB0aGlzLnJvbGxTYW5pdHlMb3NzKClcbiAgICB9XG4gICAgLyoqIE1hcmsgaW5pdGlhbCByZWFkaW5nIGFzIGNvbXBsZXRlICovXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgJ2RhdGEuaW5pdGlhbFJlYWRpbmcnOiB0cnVlIH0pXG4gIH1cblxuICBhc3luYyBncmFudFNwZWxsTGVhcm5pbmcgKCkge1xuICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAnQXV0b21hdGlvbiBvZiBsZWFybmluZyBzcGVsbHMgZnJvbSBib29rcyBpcyBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBhbmQgd2lsbCBiZSBhZGRlZCBpbiBmdXR1cmUgdXBkYXRlcy4nXG4gICAgKVxuICB9XG5cbiAgLyoqXG4gICAqIFJlY2VpdmVzIGFuIEFycmF5IG9mIHNraWxscyBhbmQgaGFuZGxlcyBhbGwgdGhlIGxvZ2ljIHRvIGRldmVsb3AgdGhlbVxuICAgKiBAcGFyYW0ge0FycmF5fSBkZXZlbG9wbWVudHMgQHNlZSBncmFudEluaXRpYWxSZWFkaW5nXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcbiAgICovXG4gIGFzeW5jIGdyYW50U2tpbGxEZXZlbG9wbWVudCAoZGV2ZWxvcG1lbnRzKSB7XG4gICAgaWYgKGRldmVsb3BtZW50cy5sZW5ndGggPT09IDApIHJldHVyblxuICAgIGZvciAoY29uc3QgZGV2ZWxvcG1lbnQgb2YgZGV2ZWxvcG1lbnRzKSB7XG4gICAgICAvKiogVGVzdCBpZiB0aGUgdmFsdWUgaXMgZ3JlYXRlciB0aGFuIHplcm8gKi9cbiAgICAgIGlmICghZGV2ZWxvcG1lbnQuZ2FpbikgY29udGludWVcbiAgICAgIGxldCBza2lsbCA9IGF3YWl0IHRoaXMuYWN0b3IuZ2V0U2tpbGxzQnlOYW1lKGRldmVsb3BtZW50Lm5hbWUpXG4gICAgICAvKiogVGhlIEFjdG9yIGRvZXMgbm90IG93biB0aGlzIHNraWxsLCBjcmVhdGUgYSBuZXcgb25lXG4gICAgICAgKiBGaXJzdCwgY2hlY2sgaWYgdGhlcmUgaXMgYW55IHNraWxsIGluIHRoZSBnYW1lIHdpdGggdGhlIHNhbWUgbmFtZVxuICAgICAgICogSW4gdGhlIGxhc3QgYWx0ZXJuYXRpdmUganVzdCBjcmVhdGUgYSBuZXcgZ2VuZXJpYyBza2lsbFxuICAgICAgICovXG4gICAgICBpZiAoc2tpbGwubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nU2tpbGwgPSBhd2FpdCBnYW1lLml0ZW1zLmZpbmQoXG4gICAgICAgICAgaXRlbSA9PlxuICAgICAgICAgICAgaXRlbS5kYXRhLnR5cGUgPT09ICdza2lsbCcgJiYgaXRlbS5kYXRhLm5hbWUgPT09IGRldmVsb3BtZW50Lm5hbWVcbiAgICAgICAgKVxuICAgICAgICBpZiAoZXhpc3RpbmdTa2lsbCkge1xuICAgICAgICAgIHNraWxsID0gYXdhaXQgdGhpcy5hY3Rvci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtcbiAgICAgICAgICAgIGR1cGxpY2F0ZShleGlzdGluZ1NraWxsKVxuICAgICAgICAgIF0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2tpbGwgPSBhd2FpdCB0aGlzLmFjdG9yLmNyZWF0ZVNraWxsKGRldmVsb3BtZW50Lm5hbWUsIDApXG4gICAgICAgICAgaWYgKGRldmVsb3BtZW50LnNwZWNpYWxpemF0aW9uKSB7XG4gICAgICAgICAgICBhd2FpdCBza2lsbFswXS51cGRhdGUoe1xuICAgICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLnNwZWNpYWwnOiB0cnVlLFxuICAgICAgICAgICAgICAnZGF0YS5zcGVjaWFsaXphdGlvbic6IGRldmVsb3BtZW50LnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc2tpbGwgPSBza2lsbFswXVxuICAgICAgaWYgKGRldmVsb3BtZW50LmdhaW4gPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgICAgLyoqIFNpbXBseSBtYXJrIHRoZSBza2lsbCBmb3IgZGV2ZWxvcG1lbnQgKi9cbiAgICAgICAgYXdhaXQgc2tpbGwuZmxhZ0ZvckRldmVsb3BlbWVudCgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdGhlIHJlY2VpdmVkIHZhbHVlIGdhaW5lZCBpcyBudW1lcmljLCBlbnN1cmUgdGhhdCB0aGUgYW1vdW50XG4gICAgICAgICAqIHdpbGwgbm90IGV4Y2VlZCB0aGUgbWF4aW11bSB2YWx1ZSBvZiA5OVxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKHNraWxsLnZhbHVlICsgZGV2ZWxvcG1lbnQuZ2FpbiA+IDk5KSB7XG4gICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAxOyBpbmRleCA8PSBkZXZlbG9wbWVudC5nYWluOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBpZiAoc2tpbGwudmFsdWUgKyBkZXZlbG9wbWVudC5nYWluIC0gaW5kZXggPD0gOTkpIHtcbiAgICAgICAgICAgICAgZGV2ZWxvcG1lbnQuZ2FpbiAtPSBpbmRleFxuICAgICAgICAgICAgICBhd2FpdCBza2lsbC5pbmNyZWFzZUV4cGVyaWVuY2UoZGV2ZWxvcG1lbnQuZ2FpbilcbiAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgc2tpbGwuaW5jcmVhc2VFeHBlcmllbmNlKGRldmVsb3BtZW50LmdhaW4pXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNob3dEZXZlbG9wbWVudHNUYWJsZShkZXZlbG9wbWVudHMpXG4gIH1cblxuICAvKipcbiAgICogU3Vic2VxdWVudCBwZXJpb2RzIG9mIGZ1bGwgc3R1ZHkgbWF5IGJlIHVuZGVydGFrZW4sIHRoZSBkaWZmZXJlbmNlIGJlaW5nXG4gICAqIHRoYXQgZWFjaCBzdHVkeSB3aWxsIHRha2UgdHdpY2UgYXMgbG9uZyBhcyB0aGUgcHJldmlvdXMgb25lXG4gICAqIEByZXR1cm5zIHtQcm9taXNlLjxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XG4gICAqL1xuICBhc3luYyByZWRvRnVsbFN0dWR5ICgpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdkYXRhLnN0dWR5LnByb2dyZXNzJzogMCB9KVxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAnZGF0YS5zdHVkeS5uZWNlc3NhcnknOiB0aGlzLmRhdGEuZGF0YS5zdHVkeS5uZWNlc3NhcnkgKiAyXG4gICAgfSlcbiAgfVxuXG4gIC8qKiBCeXBhc3MgdGhlIFNhbml0eSBjaGVjayBhbmQganVzdCByb2xsIHRoZSBkYW1hZ2UgKi9cbiAgYXN5bmMgcm9sbFNhbml0eUxvc3MgKCkge1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5kYXRhLmRhdGEuc2FuaXR5TG9zc1xuICAgIGlmICghdmFsdWUgfHwgdmFsdWUgPT09ICcnKSByZXR1cm5cbiAgICBjb25zdCB0ZW1wbGF0ZSA9IFNhbkNoZWNrQ2FyZC50ZW1wbGF0ZVxuICAgIGxldCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHt9KVxuICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCBDaGF0TWVzc2FnZS5jcmVhdGUoe1xuICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgc3BlYWtlcjogQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcih7IGFjdG9yOiB0aGlzLmFjdG9yIH0pLFxuICAgICAgZmxhdm9yOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlYWRpbmdNeXRob3NUb21lJywge1xuICAgICAgICBib29rOiB0aGlzLm5hbWVcbiAgICAgIH0pLFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH0pXG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IG1lc3NhZ2UuZ2V0SFRNTCgpXG4gICAgaWYgKHR5cGVvZiBjYXJkLmxlbmd0aCAhPT0gJ3VuZGVmaW5lZCcgJiYgY2FyZC5sZW5ndGggPT09IDEpIHtcbiAgICAgIGNvbnN0IHNhbml0eUxvc3MgPSAoYXdhaXQgbmV3IFJvbGwodmFsdWUpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KSkudG90YWxcbiAgICAgIGh0bWwgPSBjYXJkLmZpbmQoJy5jaGF0LWNhcmQnKVswXVxuICAgICAgaHRtbC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZShcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGFjdG9yS2V5OiB0aGlzLmFjdG9yLmlkLFxuICAgICAgICAgIGZhc3RGb3J3YXJkOiBmYWxzZSxcbiAgICAgICAgICBzYW5EYXRhOiB7XG4gICAgICAgICAgICBzYW5NaW46IHNhbml0eUxvc3MsXG4gICAgICAgICAgICBzYW5NYXg6IHNhbml0eUxvc3NcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICBjb25zdCBzYW5pdHlDaGVjayA9IFNhbkNoZWNrQ2FyZC5nZXRGcm9tQ2FyZChodG1sKVxuICAgICAgYXdhaXQgc2FuaXR5Q2hlY2suYnlwYXNzUm9sbFNhbigpXG4gICAgICBhd2FpdCBzYW5pdHlDaGVjay5yb2xsU2FuTG9zcygpXG4gICAgICBzYW5pdHlDaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNob3cgYSB0YWJsZSBpbiB0aGUgY2hhdCB3aXRoIGFsbCBza2lsbCBkZXZlbG9wbWVudHMgb2J0YWluZWRcbiAgICogQHBhcmFtIHtBcnJheTxPYmplY3Q+fSBkZXZlbG9wbWVudHNcbiAgICogQHJldHVybnMge1Byb21pc2U8RG9jdW1lbnQ+fSBjcmVhdGUgQ2hhdE1lc3NhZ2VcbiAgICovXG4gIGFzeW5jIHNob3dEZXZlbG9wbWVudHNUYWJsZSAoZGV2ZWxvcG1lbnRzKSB7XG4gICAgLyoqIFByZXBhcmUgdGhlIEFycmF5IGRhdGEgdG8gYmUgc2hvd24gdG8gdGhlIGVuZCB1c2VyIGluIGNoYXQgKi9cbiAgICBmb3IgKGNvbnN0IGRldmVsb3BtZW50IG9mIGRldmVsb3BtZW50cykge1xuICAgICAgaWYgKGRldmVsb3BtZW50LnNwZWNpYWxpemF0aW9uKSB7XG4gICAgICAgIGRldmVsb3BtZW50Lm5hbWUgPSBgJHtkZXZlbG9wbWVudC5zcGVjaWFsaXphdGlvbn0gKCR7ZGV2ZWxvcG1lbnQubmFtZX0pYFxuICAgICAgfVxuICAgICAgaWYgKGRldmVsb3BtZW50LmdhaW4gPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgICAgZGV2ZWxvcG1lbnQuZ2FpbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NYXJrZWRGb3JEZXZlbG9wbWVudCcpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZXZlbG9wbWVudC5nYWluID0gYCske2RldmVsb3BtZW50LmdhaW59ICR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICdDb0M3LlBvaW50cydcbiAgICAgICAgKX1gXG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvYm9vay9kZXZlbG9wbWVudC5odG1sJ1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgeyBkZXZlbG9wbWVudHMgfSlcbiAgICByZXR1cm4gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoeyBhY3RvcjogdGhpcy5hY3RvciB9KSxcbiAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5HYWluc0ZvclJlYWRpbmcnLCB7IGJvb2s6IHRoaXMubmFtZSB9KSxcbiAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgYXR0ZW1wdFNwZWxsTGVhcm5pbmcgKGlkKSB7XG4gICAgaWYgKCF0aGlzLmlzT3duZWQpIHtcbiAgICAgIC8qKiBUaGlzIGlzIG5vdCBvd25lZCBieSBhbnkgQWN0b3IgKi9cbiAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob3RPd25lZCcpKVxuICAgIH1cbiAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLmluaXRpYWxSZWFkaW5nKSB7XG4gICAgICAvKiogQWN0b3IgZGlkIG5vdCBwZXJmb3JtZWQgYW4gaW5pdGlhbCByZWFkaW5nIGZpcnN0ICovXG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Jbml0aWFsUmVhZGluZ05lZWRlZCcsIHtcbiAgICAgICAgICBhY3RvcjogdGhpcy5hY3Rvci5uYW1lLFxuICAgICAgICAgIGJvb2s6IHRoaXMubmFtZVxuICAgICAgICB9KVxuICAgICAgKVxuICAgIH1cbiAgICBjb25zdCBzcGVsbCA9IHRoaXMuZGF0YS5kYXRhLnNwZWxscy5maW5kKHNwZWxsID0+IHtcbiAgICAgIHJldHVybiBzcGVsbC5faWQgPT09IGlkXG4gICAgfSlcbiAgICBpZiAoc3BlbGwpIHtcbiAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICBjaGVjay5hY3RvciA9IHRoaXMuYWN0b3JcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmRcbiAgICAgIGNoZWNrLnBhcmVudCA9IHRoaXMudXVpZFxuICAgICAgY2hlY2suZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5MZWFyblNwZWxsQXR0ZW1wdCcsIHtcbiAgICAgICAgYm9vazogdGhpcy5uYW1lLFxuICAgICAgICBzcGVsbDogc3BlbGwubmFtZVxuICAgICAgfSlcbiAgICAgIGNoZWNrLmNvbnRleHQgPSAnU1BFTExfTEVBUk5JTkcnXG4gICAgICBhd2FpdCBjaGVjay5yb2xsQ2hhcmFjdGVyaXN0aWMoJ2ludCcpXG4gICAgICBhd2FpdCBjaGVjay50b01lc3NhZ2UoKVxuICAgIH1cbiAgfVxuXG4gIC8qKiBMaXN0ZW4gdG8gY2hhbmdlcyBvbiB0aGUgY2hlY2sgY2FyZCAqL1xuICBhc3luYyB1cGRhdGVSb2xsIChyb2xsKSB7XG4gICAgY29uc3QgY2hlY2sgPSBDb0M3Q2hlY2suZnJvbVJvbGxTdHJpbmcocm9sbClcbiAgICAvKiogV2lsbCBrbm93IGlmIHVzZXIgcHVzaCB0aGUgcm9sbCBvciBzcGVuZCBMdWNrICovXG4gICAgaWYgKGNoZWNrLnBhc3NlZCkge1xuICAgICAgaWYgKGNoZWNrLmNvbnRleHQgPT09ICdJTklUSUFMX1JFQURJTkcnKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdyYW50SW5pdGlhbFJlYWRpbmcoKVxuICAgICAgfSBlbHNlIGlmIChjaGVjay5jb250ZXh0ID09PSAnU1BFTExfTEVBUk5JTkcnKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdyYW50U3BlbGxMZWFybmluZygpXG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgRGljZVRlcm0gKi9cblxuZXhwb3J0IGNsYXNzIENvQzdEZWNhZGVyRGllIGV4dGVuZHMgRGljZVRlcm0ge1xuICBjb25zdHJ1Y3RvciAodGVybURhdGEpIHtcbiAgICBzdXBlcih0ZXJtRGF0YSlcbiAgICB0aGlzLmZhY2VzID0gMTBcbiAgfVxuXG4gIGdldCB0b3RhbCAoKSB7XG4gICAgY29uc3QgdG90YWwgPSBzdXBlci50b3RhbFxuICAgIHJldHVybiB0b3RhbCA9PT0gMTAgPyAwIDogdG90YWwgKiAxMFxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzdGF0aWMgZ2V0IERFTk9NSU5BVElPTiAoKSB7XG4gICAgcmV0dXJuICd0J1xuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgZHVwbGljYXRlLCBleHBhbmRPYmplY3QsIGdhbWUsIEl0ZW1TaGVldCwgbWVyZ2VPYmplY3QgKi9cblxuLy8gaW1wb3J0ICB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnO1xuLy8gaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi8uLi9hY3RvcnMvYWN0b3IuanMnO1xuXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3QXJjaGV0eXBlU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICAvKipcbiAgICogQWN0aXZhdGUgZXZlbnQgbGlzdGVuZXJzIHVzaW5nIHRoZSBwcmVwYXJlZCBzaGVldCBIVE1MXG4gICAqIEBwYXJhbSBodG1sIHtIVE1MfSAgIFRoZSBwcmVwYXJlZCBIVE1MIG9iamVjdCByZWFkeSB0byBiZSByZW5kZXJlZCBpbnRvIHRoZSBET01cbiAgICovXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVyblxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5pdGVtIC5pdGVtLW5hbWUgaDQnKVxuICAgICAgLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbVN1bW1hcnkoZXZlbnQsICdza2lsbHMnKSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLml0ZW0tZGVsZXRlJylcbiAgICAgIC5jbGljayhldmVudCA9PiB0aGlzLl9vbkl0ZW1EZWxldGUoZXZlbnQsICdza2lsbHMnKSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50LCB0eXBlID0gJ3NraWxsJywgY29sbGVjdGlvbk5hbWUgPSAnc2tpbGxzJykge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgY29uc3QgZGF0YUxpc3QgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldERhdGFGcm9tRHJvcEV2ZW50KGV2ZW50LCAnSXRlbScpXG5cbiAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5pdGVtLmRhdGEuZGF0YVtjb2xsZWN0aW9uTmFtZV1cbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGFbY29sbGVjdGlvbk5hbWVdKVxuICAgICAgOiBbXVxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBkYXRhTGlzdCkge1xuICAgICAgaWYgKCFpdGVtIHx8ICFpdGVtLmRhdGEpIGNvbnRpbnVlXG4gICAgICBpZiAoIVt0eXBlXS5pbmNsdWRlcyhpdGVtLmRhdGEudHlwZSkpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cbiAgICAgIGlmICghQ29DN0l0ZW0uaXNBbnlTcGVjKGl0ZW0pKSB7XG4gICAgICAgIGlmIChjb2xsZWN0aW9uLmZpbmQoZWwgPT4gZWwubmFtZSA9PT0gaXRlbS5kYXRhLm5hbWUpKSB7XG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb2xsZWN0aW9uLnB1c2goZHVwbGljYXRlKGl0ZW0uZGF0YSkpXG4gICAgfVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyBbYGRhdGEuJHtjb2xsZWN0aW9uTmFtZX1gXTogY29sbGVjdGlvbiB9KVxuICB9XG5cbiAgX29uSXRlbVN1bW1hcnkgKGV2ZW50LCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtID0gdGhpcy5pdGVtLmRhdGEuZGF0YVtjb2xsZWN0aW9uTmFtZV0uZmluZChzID0+IHtcbiAgICAgIHJldHVybiBzLl9pZCA9PT0gbGkuZGF0YSgnaXRlbS1pZCcpXG4gICAgfSlcbiAgICBjb25zdCBjaGF0RGF0YSA9IGl0ZW0uZGF0YS5kZXNjcmlwdGlvblxuXG4gICAgLy8gVG9nZ2xlIHN1bW1hcnlcbiAgICBpZiAobGkuaGFzQ2xhc3MoJ2V4cGFuZGVkJykpIHtcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSBsaS5jaGlsZHJlbignLml0ZW0tc3VtbWFyeScpXG4gICAgICBzdW1tYXJ5LnNsaWRlVXAoMjAwLCAoKSA9PiBzdW1tYXJ5LnJlbW92ZSgpKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkaXYgPSAkKGA8ZGl2IGNsYXNzPVwiaXRlbS1zdW1tYXJ5XCI+JHtjaGF0RGF0YS52YWx1ZX08L2Rpdj5gKVxuICAgICAgY29uc3QgcHJvcHMgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1wcm9wZXJ0aWVzXCI+PC9kaXY+JylcbiAgICAgIC8vIGZvciAoY29uc3QgcCBvZiBjaGF0RGF0YS5wcm9wZXJ0aWVzKSB7IHByb3BzLmFwcGVuZChgPHNwYW4gY2xhc3M9XCJ0YWdcIj4ke3B9PC9zcGFuPmApIH1cbiAgICAgIGRpdi5hcHBlbmQocHJvcHMpXG4gICAgICBsaS5hcHBlbmQoZGl2LmhpZGUoKSlcbiAgICAgIGRpdi5zbGlkZURvd24oMjAwKVxuICAgIH1cbiAgICBsaS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKVxuICB9XG5cbiAgYXN5bmMgX29uSXRlbURlbGV0ZSAoZXZlbnQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xuICAgIGNvbnN0IGl0ZW1JbmRleCA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICAgIC5wYXJlbnRzKCcuaXRlbScpXG4gICAgICAuZGF0YSgnaXRlbS1pZCcpXG4gICAgaWYgKGl0ZW1JbmRleCkgYXdhaXQgdGhpcy5yZW1vdmVJdGVtKGl0ZW1JbmRleCwgY29sbGVjdGlvbk5hbWUpXG4gIH1cblxuICBhc3luYyByZW1vdmVJdGVtIChpdGVtSWQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xuICAgIGNvbnN0IGl0ZW1JbmRleCA9IHRoaXMuaXRlbS5kYXRhLmRhdGFbY29sbGVjdGlvbk5hbWVdLmZpbmRJbmRleChzID0+IHtcbiAgICAgIHJldHVybiBzLl9pZCA9PT0gaXRlbUlkXG4gICAgfSlcbiAgICBpZiAoaXRlbUluZGV4ID4gLTEpIHtcbiAgICAgIGNvbnN0IGNvbGxlY3Rpb24gPSB0aGlzLml0ZW0uZGF0YS5kYXRhW2NvbGxlY3Rpb25OYW1lXVxuICAgICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhW2NvbGxlY3Rpb25OYW1lXSlcbiAgICAgICAgOiBbXVxuICAgICAgY29sbGVjdGlvbi5zcGxpY2UoaXRlbUluZGV4LCAxKVxuICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7IFtgZGF0YS4ke2NvbGxlY3Rpb25OYW1lfWBdOiBjb2xsZWN0aW9uIH0pXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnb2NjdXBhdGlvbiddLFxuICAgICAgd2lkdGg6IDUyMCxcbiAgICAgIGhlaWdodDogNDgwLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogJy5pdGVtJyB9XSxcbiAgICAgIHNjcm9sbFk6IFsnLnRhYi5kZXNjcmlwdGlvbiddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2aWdhdGlvbicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9hcmNoZXR5cGUuaHRtbCdcbiAgfVxuXG4gIF9vbkRyYWdTdGFydCAoZXZlbnQpIHtcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IHNraWxsID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5za2lsbHMuZmluZChzID0+IHtcbiAgICAgIHJldHVybiBzLl9pZCA9PT0gbGkuZGF0YXNldC5pdGVtSWRcbiAgICB9KVxuXG4gICAgY29uc3QgZHJhZ0RhdGEgPSB7IHR5cGU6ICdJdGVtJywgZGF0YTogc2tpbGwgfVxuICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZHJhZ0RhdGEpKVxuICB9XG5cbiAgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3QgZGF0YSA9IHN1cGVyLmdldERhdGEoKVxuXG4gICAgLyoqIE1PRElGOiAwLjgueCAqKi9cbiAgICBjb25zdCBpdGVtRGF0YSA9IGRhdGEuZGF0YVxuICAgIGRhdGEuZGF0YSA9IGl0ZW1EYXRhLmRhdGEgLy8gTU9ESUY6IDAuOC54IGRhdGEuZGF0YVxuICAgIC8qKioqKioqKioqKioqKioqKi9cblxuICAgIGRhdGEuaXNPd25lZCA9IHRoaXMuaXRlbS5pc093bmVkXG5cbiAgICBjb25zdCBjb3JlQ2hhcmFjdGVyaXN0aWNzID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIHNlbGVjdGVkXSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgIGRhdGEuZGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWNzXG4gICAgKSkge1xuICAgICAgaWYgKHNlbGVjdGVkKSB7XG4gICAgICAgIGNvbnN0IGNoYXJhY05hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoYENIQVJBQy4ke2tleS50b1VwcGVyQ2FzZSgpfWApXG4gICAgICAgIGNvcmVDaGFyYWN0ZXJpc3RpY3MucHVzaChjaGFyYWNOYW1lKVxuICAgICAgfVxuICAgIH1cblxuICAgIGRhdGEuc2tpbGxMaXN0RW1wdHkgPSBkYXRhLmRhdGEuc2tpbGxzLmxlbmd0aCA9PT0gMFxuICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgZGF0YS5kYXRhLnNraWxscykge1xuICAgICAgLy8gRm9yIGVhY2ggc2tpbGwgaWYgaXQncyBhIHNwZWMgYW5kIHNwYWMgbmFtZSBub3QgaW5jbHVkZWQgaW4gdGhlIG5hbWUgYWRkIGl0XG4gICAgICBpZiAoXG4gICAgICAgIHNraWxsLmRhdGEuc3BlY2lhbGl6YXRpb24gJiZcbiAgICAgICAgIXNraWxsLm5hbWUuaW5jbHVkZXMoc2tpbGwuZGF0YS5zcGVjaWFsaXphdGlvbilcbiAgICAgICkge1xuICAgICAgICBza2lsbC5kaXNwbGF5TmFtZSA9IGAke3NraWxsLmRhdGEuc3BlY2lhbGl6YXRpb259ICgke3NraWxsLm5hbWV9KWBcbiAgICAgIH0gZWxzZSBza2lsbC5kaXNwbGF5TmFtZSA9IHNraWxsLm5hbWVcbiAgICB9XG5cbiAgICBkYXRhLmRhdGEuc2tpbGxzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBhLmRpc3BsYXlOYW1lLmxvY2FsZUNvbXBhcmUoYi5kaXNwbGF5TmFtZSlcbiAgICB9KVxuXG4gICAgZGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWNzU3RyaW5nID0gJydcbiAgICBjb25zdCBvclN0cmluZyA9IGAgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuT3InKX0gYFxuICAgIGlmIChjb3JlQ2hhcmFjdGVyaXN0aWNzLmxlbmd0aCkge1xuICAgICAgZGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWNzU3RyaW5nICs9IGNvcmVDaGFyYWN0ZXJpc3RpY3Muam9pbihvclN0cmluZylcbiAgICB9XG5cbiAgICBkYXRhLml0ZW1Qcm9wZXJ0aWVzID0gW11cblxuICAgIGRhdGEuaXRlbVByb3BlcnRpZXMucHVzaChcbiAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5QdWxwVGFsZW50cycpfTogJHtkYXRhLmRhdGEudGFsZW50c31gXG4gICAgKVxuICAgIGRhdGEuaXRlbVByb3BlcnRpZXMucHVzaChcbiAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Cb251c1BvaW50cycpfTogJHtkYXRhLmRhdGEuYm9udXNQb2ludHN9YFxuICAgIClcblxuICAgIC8vIGZvciAobGV0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmRhdGEudHlwZSkpIHtcbiAgICAvLyAgIGlmKCB2YWx1ZSkgZGF0YS5pdGVtUHJvcGVydGllcy5wdXNoKCBDT0M3Lm9jY3VwYXRpb25Qcm9wZXJ0aWVzW2tleV0/Q09DNy5vY2N1cGF0aW9uUHJvcGVydGllc1trZXldOm51bGwpO1xuICAgIC8vIH1cblxuICAgIGRhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICAvLyBUT0RPOiBUaGlzIGNhbiBiZSByZW1vdmVkIG9uY2UgMC43LnggaXMgcmVsZWFzZSBjaGFubmVsXG4gICAgaWYgKCFmb3JtRGF0YS5kYXRhKSBmb3JtRGF0YSA9IGV4cGFuZE9iamVjdChmb3JtRGF0YSlcblxuICAgIGlmIChmb3JtRGF0YS5kYXRhLmdyb3Vwcykge1xuICAgICAgZm9ybURhdGEuZGF0YS5ncm91cHMgPSBPYmplY3QudmFsdWVzKGZvcm1EYXRhLmRhdGE/Lmdyb3VwcyB8fCB7fSlcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLml0ZW0uZGF0YS5kYXRhLmdyb3Vwcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgZm9ybURhdGEuZGF0YS5ncm91cHNbaW5kZXhdLnNraWxscyA9IGR1cGxpY2F0ZShcbiAgICAgICAgICB0aGlzLml0ZW0uZGF0YS5kYXRhLmdyb3Vwc1tpbmRleF0uc2tpbGxzXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzdXBlci5fdXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIGR1cGxpY2F0ZSwgZ2FtZSwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCAqL1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdCb29rU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9ib29rL21haW4uaHRtbCcsXG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnaXRlbScsICdib29rJ10sXG4gICAgICB3aWR0aDogNTAwLFxuICAgICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgICByZXNpemFibGU6IGZhbHNlLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogJy5zcGVsbHMnLCBkcm9wU2VsZWN0b3I6IG51bGwgfV0sXG4gICAgICBzY3JvbGxZOiBbJy5ib2R5J10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IGRhdGEgPSBzdXBlci5nZXREYXRhKClcbiAgICBjb25zdCBpdGVtRGF0YSA9IGRhdGEuZGF0YVxuICAgIGRhdGEuZGF0YSA9IGl0ZW1EYXRhLmRhdGFcbiAgICBkYXRhLmluaXRpYWxSZWFkaW5nID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5pbml0aWFsUmVhZGluZ1xuICAgIGRhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIGRhdGEuaXNPd25lZCA9IHRoaXMuaXRlbS5pc093bmVkXG4gICAgZGF0YS5zcGVsbHNMZWFybmVkID0gdGhpcy5zcGVsbHNMZWFybmVkXG4gICAgZGF0YS5leGhhdXN0ZWQgPSAoYXdhaXQgdGhpcy5pdGVtLmNoZWNrRXhoYXVzdGlvbigpKSAhPT0gZmFsc2VcbiAgICBkYXRhLnN0dWR5Q29tcGxldGVkID1cbiAgICAgIHRoaXMuaXRlbS5kYXRhLmRhdGEuc3R1ZHkucHJvZ3Jlc3MgPT09IHRoaXMuaXRlbS5kYXRhLmRhdGEuc3R1ZHkubmVjZXNzYXJ5XG5cbiAgICBkYXRhLnNwZWxsTGlzdEVtcHR5ID0gZGF0YS5kYXRhLnNwZWxscy5sZW5ndGggPT09IDBcblxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBnZXQgc3BlbGxzTGVhcm5lZCAoKSB7XG4gICAgbGV0IGFtb3VudCA9IDBcbiAgICBjb25zdCBzcGVsbHMgPSB0aGlzLml0ZW0uZGF0YS5kYXRhLnNwZWxsc1xuICAgIGZvciAoY29uc3Qgc3BlbGwgb2Ygc3BlbGxzKSB7XG4gICAgICBpZiAoc3BlbGwuZGF0YS5sZWFybmVkKSBhbW91bnQrK1xuICAgIH1cbiAgICByZXR1cm4gYCR7YW1vdW50fSAvICR7c3BlbGxzLmxlbmd0aH1gXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5maW5kKCcjYXR0ZW1wdC1pbml0aWFsLXJlYWRpbmcnKS5jbGljayhldmVudCA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICB0aGlzLml0ZW0uYXR0ZW1wdEluaXRpYWxSZWFkaW5nKClcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnLmRlbGV0ZS1zcGVsbCcpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uRGVsZXRlKGV2ZW50KSlcbiAgICBodG1sLmZpbmQoJy5lZGl0LXNwZWxsJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25TcGVsbERldGFpbChldmVudCkpXG4gICAgaHRtbC5maW5kKCcuc3BlbGwtbmFtZScpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uU3BlbGxEZXRhaWwoZXZlbnQpKVxuICAgIGh0bWwuZmluZCgnLnRlYWNoLXNwZWxsJykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgY29uc3QgaWQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgICAgIC5wYXJlbnRzKCdsaScpXG4gICAgICAgIC5kYXRhKCdpZCcpXG4gICAgICB0aGlzLml0ZW0uYXR0ZW1wdFNwZWxsTGVhcm5pbmcoaWQpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJ1tuYW1lPVwiZGF0YS5zdHVkeS5uZWNlc3NhcnlcIl0nKS5jaGFuZ2UoZXZlbnQgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSBwYXJzZUludChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgdGhpcy5pdGVtLmNoYW5nZVByb2dyZXNzKCdyZXNldCcsIHZhbHVlKVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCcjaW5jcmVhc2UtcHJvZ3Jlc3MnKS5jbGljaygoKSA9PiB7XG4gICAgICB0aGlzLml0ZW0uY2hhbmdlUHJvZ3Jlc3MoJ2luY3JlYXNlJylcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnI2RlY3JlYXNlLXByb2dyZXNzJykuY2xpY2soKCkgPT4ge1xuICAgICAgdGhpcy5pdGVtLmNoYW5nZVByb2dyZXNzKCdkZWNyZWFzZScpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJy5hZGQtb3RoZXItZ2FpbnMnKS5jbGljayhldmVudCA9PiB7XG4gICAgICB0aGlzLm1vZGlmeU90aGVyc0dhaW5zKGV2ZW50LCAnYWRkJylcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnLmNoYW5nZS1vdGhlci1nYWlucycpLmNoYW5nZShldmVudCA9PiB7XG4gICAgICB0aGlzLm1vZGlmeU90aGVyc0dhaW5zKGV2ZW50LCAnY2hhbmdlJylcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnI3JlZG8tZnVsbC1zdHVkeScpLmNsaWNrKCgpID0+IHtcbiAgICAgIHRoaXMuaXRlbS5yZWRvRnVsbFN0dWR5KClcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnLnJlbW92ZS1vdGhlci1nYWlucycpLmNsaWNrKGV2ZW50ID0+IHtcbiAgICAgIHRoaXMubW9kaWZ5T3RoZXJzR2FpbnMoZXZlbnQsICdyZW1vdmUnKVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCcub3B0aW9uJykuY2xpY2soZXZlbnQgPT4gdGhpcy5tb2RpZnlUeXBlKGV2ZW50KSlcbiAgfVxuXG4gIGFzeW5jIF9vblNwZWxsRGV0YWlsIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBlbGVtZW50ID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIC8qKiBAc2VlIGRhdGEtaW5kZXggcHJvcGVydHkgb24gdGVtcGxhdGUgKi9cbiAgICBjb25zdCBpbmRleCA9IGVsZW1lbnQucGFyZW50cygnbGknKS5kYXRhKCdpbmRleCcpXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuaXRlbS5zcGVsbERldGFpbChpbmRleClcbiAgfVxuXG4gIC8qKlxuICAgKiBJdCBpcyBjYWxsZWQgZXZlcnkgdGltZSB0aGUgdXNlciBkZWxldGUgYSBzcGVsbCBvbiB0aGUgc2hlZXRcbiAgICogQHBhcmFtIHtqUXVlcnl9IGV2ZW50IEBzZWUgYWN0aXZhdGVMaXN0ZW5lcnNcbiAgICogQHJldHVybnMge1Byb21pc2UuPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcbiAgICovXG4gIGFzeW5jIF9vbkRlbGV0ZSAoZXZlbnQpIHtcbiAgICBpZiAoIWdhbWUudXNlci5pc0dNKSByZXR1cm5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgZWxlbWVudCA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICAvKiogQHNlZSBkYXRhLWluZGV4IHByb3BlcnR5IG9uIHRlbXBsYXRlICovXG4gICAgY29uc3QgaW5kZXggPSBlbGVtZW50LnBhcmVudHMoJ2xpJykuZGF0YSgnaW5kZXgnKVxuICAgIC8qKiBBbHdheXMgaGFzIHRvIGJlIEB0eXBlIHtBcnJheX0gKi9cbiAgICBjb25zdCBzcGVsbHMgPSB0aGlzLml0ZW0uZGF0YS5kYXRhLnNwZWxsc1xuICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLmRhdGEuZGF0YS5zcGVsbHMpXG4gICAgICA6IFtdXG4gICAgaWYgKGluZGV4ID49IDApIHNwZWxscy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5zcGVsbHMnOiBzcGVsbHMgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBJdCBpcyBjYWxsZWQgZXZlcnkgdGltZSB0aGUgdXNlciBkcmFncyBhbiBpdGVtIHRvIHRoZSBzaGVldFxuICAgKiBGaWx0ZXJzIG9ubHkgJ3NwZWxsJyBpdGVtcyBhbmQgaW5zZXJ0cyB0aGVtIGluIGEgQHR5cGUge0FycmF5fVxuICAgKiBAcGFyYW0ge2pRdWVyeX0gZXZlbnQgQHNlZSBhY3RpdmF0ZUxpc3RlbmVyc1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZS48RG9jdW1lbnQ+fSB1cGRhdGUgdG8gSXRlbSBkb2N1bWVudFxuICAgKi9cbiAgYXN5bmMgX29uRHJvcCAoZXZlbnQsIHR5cGUgPSAnc3BlbGwnKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIC8qKiBQcmV2ZW50cyBwcm9wYWdhdGlvbiBvZiB0aGUgc2FtZSBldmVudCBmcm9tIGJlaW5nIGNhbGxlZCAqL1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICBjb25zdCBkYXRhTGlzdCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ2V0RGF0YUZyb21Ecm9wRXZlbnQoZXZlbnQsICdJdGVtJylcblxuICAgIGNvbnN0IHNwZWxscyA9IFtdXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGFMaXN0KSB7XG4gICAgICBpZiAoIWl0ZW0gfHwgIVsnc2tpbGwnLCAnc3BlbGwnXS5pbmNsdWRlcyhpdGVtLmRhdGEudHlwZSkpIGNvbnRpbnVlXG4gICAgICBpZiAoaXRlbS5kYXRhLnR5cGUgPT09ICdzcGVsbCcpIHtcbiAgICAgICAgc3BlbGxzLnB1c2goaXRlbS5kYXRhKVxuICAgICAgfSBlbHNlIGlmIChpdGVtLmRhdGEudHlwZSA9PT0gJ3NraWxsJyAmJiB0aGlzLml0ZW0uZGF0YS5kYXRhLnR5cGUub3RoZXIpIHtcbiAgICAgICAgdGhpcy5tb2RpZnlPdGhlcnNHYWlucyhudWxsLCAnYWRkJywgeyBuYW1lOiBpdGVtLm5hbWUgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgYXdhaXQgdGhpcy5pdGVtLmFkZFNwZWxscyhzcGVsbHMpXG4gIH1cblxuICAvKipcbiAgICogVG9nZ2xlIHRoZSBjaGVja2JveGVzIGZvciB0eXBlIHdoZW4gdXNlciBjbGlja3Mgb24gdGhlIGNvcnJlc3BvbmRpbmdcbiAgICogbGFiZWwsIG5vdCBzdXJlIGlmIHRoaXMgd29ya3Mgb24gZW5naW5lcyBvdGhlciB0aGFuIFY4XG4gICAqIEBwYXJhbSB7alF1ZXJ5fSBldmVudCBAc2VlIGFjdGl2YXRlTGlzdGVuZXJzXG4gICAqIEByZXR1cm5zIHtqUXVlcnkuRXZlbnR9IGNsaWNrXG4gICAqL1xuICBtb2RpZnlUeXBlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAvKiogUHJldmVudHMgcHJvcGFnYXRpb24gb2YgdGhlIHNhbWUgZXZlbnQgZnJvbSBiZWluZyBjYWxsZWQgKi9cbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIGNvbnN0IHRvZ2dsZVN3aXRjaCA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICByZXR1cm4gdG9nZ2xlU3dpdGNoLnByZXYoKS50cmlnZ2VyKCdjbGljaycpXG4gIH1cblxuICAvKipcbiAgICogTW9kaWZ5IEl0ZW0gZGF0YSBiYXNlZCBvbiB1c2VyIGludGVyYWN0aW9ucyB3aXRoIHRoZSBvdGhlciBza2lsbFxuICAgKiBnYWlucyB0YWJsZSBvbiBkZXRhaWxzIHRhYiBvbiB0aGlzIHNoZWV0XG4gICAqIEBwYXJhbSB7alF1ZXJ5fSBldmVudCBAc2VlIGFjdGl2YXRlTGlzdGVuZXJzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlICdhZGQnIHx8ICdjaGFuZ2UnIHx8ICdyZW1vdmUnXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcbiAgICovXG4gIGFzeW5jIG1vZGlmeU90aGVyc0dhaW5zIChldmVudCwgbW9kZSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgLyoqIE5vIG5lZWQgdG8gY2hlY2sgaWYgdXNlciBpcyBHTSBiZWNhdXNlIG9ubHkgdGhleSBjYW4gc2VlIGRldGFpbHMgdGFiICovXG4gICAgbGV0IGluZGV4ID0gbnVsbFxuICAgIGxldCBlbGVtZW50ID0gbnVsbFxuICAgIGlmIChldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgZWxlbWVudCA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICAgIC8qKiBAc2VlIGRhdGEtaW5kZXggcHJvcGVydHkgb24gdGVtcGxhdGUgKi9cbiAgICAgIGluZGV4ID0gZWxlbWVudC5wYXJlbnRzKCd0cicpLmRhdGEoJ2luZGV4JylcbiAgICAgIC8qKiBBbHdheXMgaGFzIHRvIGJlIEB0eXBlIHtBcnJheX0gKi9cbiAgICB9XG4gICAgY29uc3Qgc2tpbGxzID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5nYWlucy5vdGhlcnNcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGEuZ2FpbnMub3RoZXJzKVxuICAgICAgOiBbXVxuICAgIHN3aXRjaCAobW9kZSkge1xuICAgICAgY2FzZSAnYWRkJzpcbiAgICAgICAgLyoqIFVzZXIgY2xpY2tlZCBvbiBwbHVzIGljb24gdG8gYWRkIGEgbmV3IHNraWxsIG9uIG90aGVyIGdhaW5zIHRhYmxlICovXG4gICAgICAgIHNraWxscy5wdXNoKHtcbiAgICAgICAgICAvKiogbmV3IHNraWxsICovXG4gICAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lIHx8IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5OZXdTa2lsbE5hbWUnKSxcbiAgICAgICAgICAvKiogZGV2ZWxvcG1lbnQgYnkgZGVmYXVsdCwgdmFsdWUgY2FuIGFsc28gYmUgMWQ2IG9yIDFkMTAgKi9cbiAgICAgICAgICB2YWx1ZTogJ2RldmVsb3BtZW50J1xuICAgICAgICB9KVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnY2hhbmdlJzpcbiAgICAgICAgLyoqIFVzZXIgY2hhbmdlZCBuYW1lIChpbnB1dCkgb3IgdmFsdWUgKHNlbGVjdCkgb2YgYSBza2lsbCBvbiB0YWJsZSAqL1xuICAgICAgICBza2lsbHNbaW5kZXhdID0ge1xuICAgICAgICAgIG5hbWU6IGVsZW1lbnQuaXMoJ2lucHV0JykgPyBlbGVtZW50LnZhbCgpIDogc2tpbGxzW2luZGV4XS5uYW1lLFxuICAgICAgICAgIHZhbHVlOiBlbGVtZW50LmlzKCdzZWxlY3QnKSA/IGVsZW1lbnQudmFsKCkgOiBza2lsbHNbaW5kZXhdLnZhbHVlXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3JlbW92ZSc6XG4gICAgICAgIC8qKiBVc2VyIGNsaWNrZWQgb24gbWludXMgaWNvbiB0byByZW1vdmUgYSBza2lsbCBvbiBvdGhlciBnYWlucyB0YWJsZSAqL1xuICAgICAgICBpZiAoaW5kZXggPj0gMCkgc2tpbGxzLnNwbGljZShpbmRleCwgMSlcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5nYWlucy5vdGhlcnMnOiBza2lsbHMgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIG1lcmdlT2JqZWN0ICovXG5pbXBvcnQgeyBDb0M3Q2hhcmFjdGVyU2hlZXRWMiB9IGZyb20gJy4vY2hhcmFjdGVyLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0NoYXJhY3RlclNoZWV0IGV4dGVuZHMgQ29DN0NoYXJhY3RlclNoZWV0VjIge1xuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIDVlIEFjdG9yIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdhY3RvcicsICdjaGFyYWN0ZXInXSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvY2hhcmFjdGVyLXNoZWV0Lmh0bWwnLFxuICAgICAgd2lkdGg6IDY3MixcbiAgICAgIGhlaWdodDogNzY1XG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIEFjdG9yU2hlZXQsIENPTlNULCBEaWFsb2csIGdhbWUsIG1lcmdlT2JqZWN0ICovXG5pbXBvcnQgeyBDb0M3UGFyc2VyIH0gZnJvbSAnLi4vLi4vYXBwcy9wYXJzZXIuanMnXG5leHBvcnQgY2xhc3MgQ29DN0NvbnRhaW5lclNoZWV0IGV4dGVuZHMgQWN0b3JTaGVldCB7XG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgNWUgQWN0b3IgU2hlZXRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ2FjdG9yJywgJ3N0b3JhZ2UnXSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvc3RvcmFnZS1zaGVldC5odG1sJyxcbiAgICAgIHdpZHRoOiA2NzIsXG4gICAgICBoZWlnaHQ6IDc2NSxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuaXRlbScsIGRyb3BTZWxlY3RvcjogbnVsbCB9XSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdpdGVtcydcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBfb25Ecm9wRm9sZGVyIChldmVudCwgZGF0YSkge1xuICAgIGlmICghdGhpcy5hY3Rvci5pc093bmVyKSByZXR1cm4gW11cbiAgICBpZiAoZGF0YS5kb2N1bWVudE5hbWUgIT09ICdJdGVtJykgcmV0dXJuIFtdXG4gICAgY29uc3QgZm9sZGVyID0gZ2FtZS5mb2xkZXJzLmdldChkYXRhLmlkKVxuICAgIGlmICghZm9sZGVyKSByZXR1cm4gW11cbiAgICBjb25zdCBpdGVtcyA9IGZvbGRlci5jb250ZW50c1xuICAgICAgLmZpbHRlcihpdGVtID0+IFsnYm9vaycsICdpdGVtJywgJ3NwZWxsJywgJ3dlYXBvbiddLmluY2x1ZGVzKGl0ZW0udHlwZSkpXG4gICAgICAubWFwKGl0ZW0gPT4gaXRlbS50b0pTT04oKSlcbiAgICBpZiAoaXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgYXdhaXQgdGhpcy5hY3Rvci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIGl0ZW1zKVxuICAgIH1cbiAgfVxuXG4gIG9uQ2xvc2VTaGVldCAoKSB7fVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcbiAgICBjb25zdCBzaGVldERhdGEgPSBkYXRhLmRhdGFcbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIHNoZWV0RGF0YS5lZGl0YWJsZSA9IHRoaXMuaXNFZGl0YWJsZVxuXG4gICAgc2hlZXREYXRhLml0ZW1zQnlUeXBlID0ge31cbiAgICBpZiAoZGF0YS5pdGVtcykge1xuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGEuaXRlbXMpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoXG4gICAgICAgICAgICBzaGVldERhdGEuaXRlbXNCeVR5cGUsXG4gICAgICAgICAgICBpdGVtLnR5cGVcbiAgICAgICAgICApXG4gICAgICAgICkge1xuICAgICAgICAgIHNoZWV0RGF0YS5pdGVtc0J5VHlwZVtpdGVtLnR5cGVdID0gW11cbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEuaXRlbXNCeVR5cGVbaXRlbS50eXBlXS5wdXNoKGl0ZW0pXG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IGl0ZW1UeXBlIGluIHNoZWV0RGF0YS5pdGVtc0J5VHlwZSkge1xuICAgICAgICBzaGVldERhdGEuaXRlbXNCeVR5cGVbaXRlbVR5cGVdLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICByZXR1cm4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5hbGxvd1VubG9jayA9XG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwbGF5ZXJVbmxvY2tTaGVldE1vZGUnKSA9PT0gJ2Fsd2F5cycgfHxcbiAgICAgIGdhbWUudXNlci5pc0dNXG5cbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUl0ZW1zID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdpdGVtJykgfHxcbiAgICAgICFzaGVldERhdGEuZGF0YS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUJvb2tzID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdib29rJykgfHxcbiAgICAgICFzaGVldERhdGEuZGF0YS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVNwZWxscyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnc3BlbGwnKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLmZsYWdzLmxvY2tlZFxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5VGFsZW50cyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAndGFsZW50JykgfHxcbiAgICAgICFzaGVldERhdGEuZGF0YS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVdlYXBvbnMgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ3dlYXBvbicpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuZmxhZ3MubG9ja2VkXG5cbiAgICBzaGVldERhdGEuaGFzSW52ZW50b3J5ID1cbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5SXRlbXMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3BlbGxzIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3RhdHVzZXMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5V2VhcG9uc1xuXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbC5maW5kKCcuaXRlbS1lZGl0JykuY2xpY2soZXYgPT4ge1xuICAgICAgY29uc3QgbGkgPSAkKGV2LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtSWQnKSlcbiAgICAgIGl0ZW0uc2hlZXQucmVuZGVyKHRydWUpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmludmVudG9yeS1oZWFkZXInKS5jbGljayh0aGlzLl9vbkludmVudG9yeUhlYWRlci5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5maW5kKCcuaXRlbS10cmFkZScpLmNsaWNrKHRoaXMuX29uVHJhZGVJdGVtLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuc2hvdy1kZXRhaWwnKS5jbGljayh0aGlzLl9vbkl0ZW1TdW1tYXJ5LmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJy5pdGVtLWRlbGV0ZScpLmNsaWNrKGFzeW5jIGV2ID0+IHtcbiAgICAgIGNvbnN0IGxpID0gJChldi5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgICBjb25zdCBpdGVtVG9EZWxldGUgPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtSWQnKSwge1xuICAgICAgICBzdHJpY3Q6IHRydWVcbiAgICAgIH0pXG4gICAgICBhd2FpdCBpdGVtVG9EZWxldGUuZGVsZXRlKClcbiAgICAgIGxpLnNsaWRlVXAoMjAwLCAoKSA9PiB0aGlzLnJlbmRlcihmYWxzZSkpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmFkZC1pdGVtJykuY2xpY2soZXYgPT4ge1xuICAgICAgc3dpdGNoIChldi5jdXJyZW50VGFyZ2V0LmRhdGFzZXQudHlwZSkge1xuICAgICAgICBjYXNlICdib29rJzpcbiAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5Qm9vayhldilcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdpdGVtJzpcbiAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5SXRlbShldilcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdza2lsbCc6XG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eVNraWxsKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3NwZWxsJzpcbiAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5U3BlbGwoZXYpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnd2VhcG9uJzpcbiAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5V2VhcG9uKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmxvY2snKS5jbGljayh0aGlzLl9vbkxvY2tDbGlja2VkLmJpbmQodGhpcykpXG4gIH1cblxuICBhc3luYyBfb25Mb2NrQ2xpY2tlZCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgaXNMb2NrZWQgPSB0aGlzLmFjdG9yLmxvY2tlZFxuICAgIHRoaXMuYWN0b3IubG9ja2VkID0gIWlzTG9ja2VkXG4gIH1cblxuICBhc3luYyBfb25UcmFkZUl0ZW0gKGV2ZW50KSB7XG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbUlkJykpXG4gICAgbGV0IGNvbnRlbnQgPSAnPHA+JyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NZXNzYWdlU2VsZWN0VXNlclRvR2l2ZVRvJylcbiAgICBjb25zdCBtZXNzYWdlID0ge1xuICAgICAgYWN0b3JGcm9tOiB0aGlzLmFjdG9yLmlkLFxuICAgICAgc2NlbmU6IG51bGwsXG4gICAgICBhY3RvclRvOiB0aGlzLmFjdG9yLmlkLFxuICAgICAgaXRlbTogaXRlbS5pZFxuICAgIH1cbiAgICBpZiAodGhpcy50b2tlbj8uYWN0b3IpIHtcbiAgICAgIG1lc3NhZ2UuYWN0b3JGcm9tID0gdGhpcy50b2tlbi5pZFxuICAgICAgbWVzc2FnZS5zY2VuZSA9IHRoaXMudG9rZW4ucGFyZW50LmlkXG4gICAgfVxuICAgIGNvbnN0IGFjdG9ycyA9IGdhbWUuYWN0b3JzLmZpbHRlcihlID0+IHtcbiAgICAgIGlmICghWydjaGFyYWN0ZXInLCAnbnBjJywgJ2NyZWF0dXJlJywgJ2NvbnRhaW5lciddLmluY2x1ZGVzKGUudHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5hY3Rvci5pZCA9PT0gZS5pZCkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIGxldCB2aXNpYmxlID0gZmFsc2VcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGUuZGF0YS5wZXJtaXNzaW9uKSkge1xuICAgICAgICBpZiAoayA9PT0gJ2RlZmF1bHQnIHx8IGsgPT09IGdhbWUudXNlci5pZCkge1xuICAgICAgICAgIHZpc2libGUgPSB2aXNpYmxlIHx8IHYgIT09IENPTlNULkVOVElUWV9QRVJNSVNTSU9OUy5OT05FXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB2aXNpYmxlXG4gICAgfSlcbiAgICBjb250ZW50ID0gY29udGVudCArICc8Zm9ybSBpZD1cInNlbGVjdGZvcm1cIj48c2VsZWN0IG5hbWU9XCJ1c2VyXCI+J1xuICAgIGZvciAoY29uc3QgYWN0b3Igb2YgYWN0b3JzKSB7XG4gICAgICBjb250ZW50ID1cbiAgICAgICAgY29udGVudCArICc8b3B0aW9uIHZhbHVlPVwiJyArIGFjdG9yLmlkICsgJ1wiPicgKyBhY3Rvci5uYW1lICsgJzwvb3B0aW9uPidcbiAgICB9XG4gICAgY29udGVudCA9IGNvbnRlbnQgKyAnPC9zZWxlY3Q+PC9mb3JtPjwvcD4nXG4gICAgYXdhaXQgRGlhbG9nLnByb21wdCh7XG4gICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1lc3NhZ2VUaXRsZVNlbGVjdFVzZXJUb0dpdmVUbycpLFxuICAgICAgY29udGVudDogY29udGVudCxcbiAgICAgIGNhbGxiYWNrOiBodG1sID0+IHtcbiAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcjc2VsZWN0Zm9ybScpKVxuICAgICAgICBmb3IgKGNvbnN0IFtuYW1lLCB2YWx1ZV0gb2YgZm9ybURhdGEpIHtcbiAgICAgICAgICBpZiAobmFtZSA9PT0gJ3VzZXInKSB7XG4gICAgICAgICAgICBtZXNzYWdlLmFjdG9yVG8gPSB2YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgYXdhaXQgZ2FtZS5Db0M3c29ja2V0LmV4ZWN1dGVBc0dNKCdnbXRyYWRlaXRlbXRvJywgbWVzc2FnZSlcbiAgfVxuXG4gIF9vbkl0ZW1TdW1tYXJ5IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtLWlkJykpXG4gICAgY29uc3QgY2hhdERhdGEgPSBpdGVtLmdldENoYXREYXRhKHsgc2VjcmV0czogdGhpcy5hY3Rvci5pc093bmVyIH0pXG5cbiAgICAvLyBUb2dnbGUgc3VtbWFyeVxuICAgIGlmIChsaS5oYXNDbGFzcygnZXhwYW5kZWQnKSkge1xuICAgICAgY29uc3Qgc3VtbWFyeSA9IGxpLmNoaWxkcmVuKCcuaXRlbS1zdW1tYXJ5JylcbiAgICAgIHN1bW1hcnkuc2xpZGVVcCgyMDAsICgpID0+IHN1bW1hcnkucmVtb3ZlKCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRpdiA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLXN1bW1hcnlcIj48L2Rpdj4nKVxuXG4gICAgICBjb25zdCBsYWJlbHMgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1sYWJlbHNcIj48L2Rpdj4nKVxuICAgICAgZm9yIChjb25zdCBwIG9mIGNoYXREYXRhLmxhYmVscykge1xuICAgICAgICBsYWJlbHMuYXBwZW5kKFxuICAgICAgICAgIGA8ZGl2IGNsYXNzPVwiaXRlbS1sYWJlbFwiPjxzcGFuIGNsYXNzPVwibGFiZWwtbmFtZVwiPiR7cC5uYW1lfSA6PC9zcGFuPjxzcGFuIGNsYXNzPVwibGFiZWwtdmFsdWVcIj4ke3AudmFsdWV9PC9zcGFuPjwvZGl2PmBcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgZGl2LmFwcGVuZChsYWJlbHMpXG5cbiAgICAgIGRpdi5hcHBlbmQoXG4gICAgICAgICQoYDxkaXYgY2xhc3M9XCJpdGVtLWRlc2NyaXB0aW9uXCI+JHtjaGF0RGF0YS5kZXNjcmlwdGlvbi52YWx1ZX08L2Rpdj5gKVxuICAgICAgKVxuXG4gICAgICBpZiAoaXRlbS5kYXRhLmRhdGEucHJvcGVydGllcz8uc3BjbCkge1xuICAgICAgICBjb25zdCBzcGVjaWFsRGl2ID0gJChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cIml0ZW0tc3BlY2lhbFwiPiR7Y2hhdERhdGEuZGVzY3JpcHRpb24uc3BlY2lhbH08L2Rpdj5gXG4gICAgICAgIClcbiAgICAgICAgZGl2LmFwcGVuZChzcGVjaWFsRGl2KVxuICAgICAgfVxuXG4gICAgICBjb25zdCBwcm9wcyA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLXByb3BlcnRpZXNcIj48L2Rpdj4nKVxuICAgICAgZm9yIChjb25zdCBwIG9mIGNoYXREYXRhLnByb3BlcnRpZXMpIHtcbiAgICAgICAgcHJvcHMuYXBwZW5kKFxuICAgICAgICAgIGA8ZGl2IGNsYXNzPVwidGFnIGl0ZW0tcHJvcGVydHlcIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZShwKX08L2Rpdj5gXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGRpdi5hcHBlbmQocHJvcHMpXG5cbiAgICAgIGxpLmFwcGVuZChkaXYuaGlkZSgpKVxuICAgICAgQ29DN1BhcnNlci5iaW5kRXZlbnRzSGFuZGxlcihkaXYpXG4gICAgICBkaXYuc2xpZGVEb3duKDIwMClcbiAgICB9XG4gICAgbGkudG9nZ2xlQ2xhc3MoJ2V4cGFuZGVkJylcbiAgICAvLyAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpO1xuICB9XG5cbiAgX29uSW52ZW50b3J5SGVhZGVyIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgICAuc2libGluZ3MoJ2xpJylcbiAgICAgIC5zbGlkZVRvZ2dsZSgyMDApXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBEcmFnRHJvcCwgZHVwbGljYXRlLCBleHBhbmRPYmplY3QsIGZsYXR0ZW5PYmplY3QsIEZvcm1EYXRhRXh0ZW5kZWQsIGdhbWUsIGdldFR5cGUsIEl0ZW1TaGVldCwgbWVyZ2VPYmplY3QsIHVpICovXG5cbmltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vLi4vYWN0b3JzL2FjdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXQgfSBmcm9tICcuLi8uLi9jaGF0LmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4uLy4uL2NoYXQvaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q2hhc2VTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8vIGNvbnN0cnVjdG9yKCAuLi5hcmdzKSB7XG4gIC8vICBzdXBlciggLi4uYXJncyk7XG4gIC8vIH1cblxuICBzdGF0aWMgZ2V0IGZsYWdzICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhcnRlZDogJ3N0YXJ0ZWQnXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSBTaW1wbGUgSXRlbSBTaGVldFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXRWMicsICdpdGVtJywgJ2NoYXNlJ10sXG4gICAgICB3aWR0aDogNTUwLFxuICAgICAgaGVpZ2h0OiA1MDAsXG4gICAgICByZXNpemFibGU6IHRydWUsXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXYnLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAncGFydGljaXBhbnRzJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcblxuICAgIHJldHVybiBvcHRpb25zXG5cbiAgICAvLyBjbG9zZU9uU3VibWl0OiBmYWxzZSxcbiAgICAvLyBzdWJtaXRPbkNsb3NlOiB0cnVlLFxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL2NoYXNlLmh0bWwnXG4gIH1cblxuICBzdGF0aWMgZ2V0IHR5cGUgKCkge1xuICAgIHJldHVybiAnY29jN0NoYXNlU2hlZXQnXG4gIH1cblxuICAvLyAvKiogQG92ZXJyaWRlICovXG4gIC8vIGFzeW5jIHJlbmRlcihmb3JjZSwgb3B0aW9ucykge1xuICAvLyAgIHJldHVybiBzdXBlci5yZW5kZXIoZm9yY2UsIG9wdGlvbnMpO1xuICAvLyB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuXG4gIGdldERhdGEgKG9wdGlvbnMgPSB7fSkge1xuICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHBlcmltZW50YWxGZWF0dXJlc1dhcm5pbmcnKVxuICAgIClcbiAgICBjb25zdCBkYXRhID0gc3VwZXIuZ2V0RGF0YShvcHRpb25zKVxuICAgIC8vIGlmKCB0aGlzLnN0YXJ0ZWQpIG9wdGlvbnMudGFic1swXS5pbml0aWFsID0gJ3NldHVwJ1xuICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHRoaXMuX3RhYnNbMF0uYWN0aXZlID0gJ3NldHVwJ1xuXG4gICAgLyoqIE1PRElGOiAwLjgueCAqKi9cbiAgICBjb25zdCBpdGVtRGF0YSA9IGRhdGEuZGF0YVxuICAgIGRhdGEuZGF0YSA9IGl0ZW1EYXRhLmRhdGEgLy8gTU9ESUY6IDAuOC54IGRhdGEuZGF0YVxuICAgIC8qKioqKioqKioqKioqKioqKi9cblxuICAgIGRhdGEucGFydGljaXBhbnRzID0gdGhpcy5wYXJ0aWNpcGFudHNcbiAgICBkYXRhLnByZXlzID0gdGhpcy5wcmV5c1xuICAgIGRhdGEuY2hhc2VycyA9IHRoaXMuY2hhc2Vyc1xuXG4gICAgLy8gZGF0YS5ieURleCA9IGR1cGxpY2F0ZShkYXRhLnBhcnRpY2lwYW50cykuc29ydCgoYSwgYikgPT4gYS5kZXggLSBiLmRleClcblxuICAgIGRhdGEucHJleXNNaW5Nb3YgPSBkYXRhLnByZXlzLmxlbmd0aFxuICAgICAgPyBkYXRhLnByZXlzLnJlZHVjZSgocHJldiwgY3VycmVudCkgPT5cbiAgICAgICAgICBwcmV2LmFkanVzdGVkTW92IDwgY3VycmVudC5hZGp1c3RlZE1vdiA/IHByZXYgOiBjdXJyZW50XG4gICAgICAgICkuYWRqdXN0ZWRNb3ZcbiAgICAgIDogLTFcblxuICAgIGRhdGEucHJleXNNYXhNb3YgPSBkYXRhLnByZXlzLmxlbmd0aFxuICAgICAgPyBkYXRhLnByZXlzLnJlZHVjZSgocHJldiwgY3VycmVudCkgPT5cbiAgICAgICAgICBwcmV2LmFkanVzdGVkTW92ID4gY3VycmVudC5hZGp1c3RlZE1vdiA/IHByZXYgOiBjdXJyZW50XG4gICAgICAgICkuYWRqdXN0ZWRNb3ZcbiAgICAgIDogLTFcblxuICAgIGRhdGEuY2hhc2Vyc01pbk1vdiA9IGRhdGEuY2hhc2Vycy5sZW5ndGhcbiAgICAgID8gZGF0YS5jaGFzZXJzLnJlZHVjZSgocHJldiwgY3VycmVudCkgPT5cbiAgICAgICAgICBwcmV2LmFkanVzdGVkTW92IDwgY3VycmVudC5hZGp1c3RlZE1vdiA/IHByZXYgOiBjdXJyZW50XG4gICAgICAgICkuYWRqdXN0ZWRNb3ZcbiAgICAgIDogLTFcblxuICAgIGRhdGEuY2hhc2Vyc01heE1vdiA9IGRhdGEuY2hhc2Vycy5sZW5ndGhcbiAgICAgID8gZGF0YS5jaGFzZXJzLnJlZHVjZSgocHJldiwgY3VycmVudCkgPT5cbiAgICAgICAgICBwcmV2LmFkanVzdGVkTW92ID4gY3VycmVudC5hZGp1c3RlZE1vdiA/IHByZXYgOiBjdXJyZW50XG4gICAgICAgICkuYWRqdXN0ZWRNb3ZcbiAgICAgIDogLTFcblxuICAgIGRhdGEuY2hhc2Vycy5mb3JFYWNoKHAgPT4ge1xuICAgICAgaWYgKHAuYWRqdXN0ZWRNb3YgPCBkYXRhLnByZXlzTWluTW92KSBwLnRvb1Nsb3coKVxuICAgICAgZWxzZSBwLmluY2x1ZGVJbkNoYXNlKClcbiAgICAgIHAuZmFzdGVzdCA9IHAuYWRqdXN0ZWRNb3YgPT0gZGF0YS5jaGFzZXJzTWF4TW92XG4gICAgICBwLnNsb3dlc3QgPSBwLmFkanVzdGVkTW92ID09IGRhdGEuY2hhc2Vyc01pbk1vdlxuICAgIH0pXG5cbiAgICBkYXRhLnByZXlzLmZvckVhY2gocCA9PiB7XG4gICAgICBpZiAocC5hZGp1c3RlZE1vdiA+IGRhdGEuY2hhc2Vyc01heE1vdikgcC5lc2NhcGVkKClcbiAgICAgIGVsc2UgcC5pbmNsdWRlSW5DaGFzZSgpXG4gICAgICBwLmZhc3Rlc3QgPSBwLmFkanVzdGVkTW92ID09IGRhdGEucHJleXNNYXhNb3ZcbiAgICAgIHAuc2xvd2VzdCA9IHAuYWRqdXN0ZWRNb3YgPT0gZGF0YS5wcmV5c01pbk1vdlxuICAgIH0pXG5cbiAgICBkYXRhLmxvY2F0aW9ucyA9IHRoaXMubG9jYXRpb25zXG4gICAgZGF0YS5hbGxIYXZlVmFsaWRNb3YgPSB0aGlzLmFsbEhhdmVWYWxpZE1vdlxuICAgIGRhdGEuYWN0aXZlTG9jYXRpb24gPSB0aGlzLmFjdGl2ZUxvY2F0aW9uXG4gICAgZGF0YS5wcmV2aW91c0xvY2F0aW9uID0gdGhpcy5wcmV2aW91c0xvY2F0aW9uXG4gICAgZGF0YS5uZXh0TG9jYXRpb24gPSB0aGlzLm5leHRMb2NhdGlvblxuICAgIGRhdGEuc3RhcnRlZCA9IHRoaXMuc3RhcnRlZFxuICAgIGRhdGEuZGF0YUxpc3RDaGVja09wdGlvbnMgPSB0aGlzLmFsbFNraWxsc0FuZENoYXJhY3RlcmlzdGljc1xuXG4gICAgZGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIGdldCBwYXJ0aWNpcGFudHMgKCkge1xuICAgIGNvbnN0IHBMaXN0ID0gW11cbiAgICB0aGlzLml0ZW0uZGF0YS5kYXRhLnBhcnRpY2lwYW50cy5mb3JFYWNoKHAgPT4ge1xuICAgICAgcExpc3QucHVzaChuZXcgX3BhcnRpY2lwYW50KHApKVxuICAgICAgcC5pbmRleCA9IHBMaXN0Lmxlbmd0aCAtIDFcbiAgICB9KVxuICAgIHBMaXN0LnNvcnQoKGEsIGIpID0+IGEuYWRqdXN0ZWRNb3YgLSBiLmFkanVzdGVkTW92KVxuICAgIHJldHVybiBwTGlzdFxuICAgIC8vIHJldHVybiB0aGlzLml0ZW0uZGF0YS5kYXRhLnBhcnRpY2lwYW50c1xuICB9XG5cbiAgZ2V0IGFsbFNraWxsc0FuZENoYXJhY3RlcmlzdGljcyAoKSB7XG4gICAgY29uc3QgbGlzdCA9IFtdXG4gICAgQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKCkuZm9yRWFjaChjID0+XG4gICAgICBsaXN0LnB1c2goXG4gICAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DaGFyYWN0ZXJpc3RpY3MnKX0gKCR7Yy5zaG9ydE5hbWV9KWBcbiAgICAgIClcbiAgICApXG4gICAgbGlzdC5wdXNoKFxuICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkF0dHJpYnV0ZScpfSAoJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICdDb0M3Lkx1Y2snXG4gICAgICApfSlgXG4gICAgKVxuICAgIGxpc3QucHVzaChcbiAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BdHRyaWJ1dGUnKX0gKCR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAnQ29DNy5TQU4nXG4gICAgICApfSlgXG4gICAgKVxuXG4gICAgZ2FtZS5Db0M3LnNraWxsTGlzdD8uZm9yRWFjaChzID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgIWxpc3QuaW5jbHVkZXMocy5mdWxsTmFtZSkgJiZcbiAgICAgICAgIXMuZnVsbE5hbWVcbiAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgIC5pbmNsdWRlcyhgKCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFueVNwZWNOYW1lJyl9KWAudG9Mb3dlckNhc2UoKSlcbiAgICAgIClcbiAgICAgICAgbGlzdC5wdXNoKHMuZnVsbE5hbWUpXG4gICAgfSkgLy8gVE9ETzogUmVtb3ZlID8/XG4gICAgdGhpcy5wYXJ0aWNpcGFudHMuZm9yRWFjaChwID0+IHtcbiAgICAgIGlmIChwLmFjdG9yKSB7XG4gICAgICAgIHAuYWN0b3Iuc2tpbGxzLmZvckVhY2gocyA9PiB7XG4gICAgICAgICAgaWYgKCFsaXN0LmluY2x1ZGVzKHMuZnVsbE5hbWUpKSBsaXN0LnB1c2gocy5mdWxsTmFtZSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBsaXN0LnNvcnQoSW50bC5Db2xsYXRvcigpLmNvbXBhcmUpXG4gIH1cblxuICBnZXQgcHJleXMgKCkge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLnBhcnRpY2lwYW50c1xuICAgICAgICAuZmlsdGVyKHAgPT4gIXAuaXNDaGFzZXIgJiYgcC5pc1ZhbGlkKVxuICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5hZGp1c3RlZE1vdiAtIGIuYWRqdXN0ZWRNb3YpIHx8IFtdXG4gICAgKVxuICB9XG5cbiAgZ2V0IGNoYXNlcnMgKCkge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLnBhcnRpY2lwYW50c1xuICAgICAgICAuZmlsdGVyKHAgPT4gcC5pc0NoYXNlciAmJiBwLmlzVmFsaWQpXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLmFkanVzdGVkTW92IC0gYi5hZGp1c3RlZE1vdikgfHwgW11cbiAgICApXG4gIH1cblxuICBmaW5kTWluTW92IChsaXN0KSB7XG4gICAgaWYgKCFsaXN0Py5sZW5ndGgpIHJldHVybiAtMVxuICAgIHJldHVybiBsaXN0LnJlZHVjZSgocHJldiwgY3VycmVudCkgPT5cbiAgICAgIHByZXYuYWRqdXN0ZWRNb3YgPCBjdXJyZW50LmFkanVzdGVkTW92ID8gcHJldiA6IGN1cnJlbnRcbiAgICApLmFkanVzdGVkTW92XG4gIH1cblxuICBmaW5kTWF4TW92IChsaXN0KSB7XG4gICAgaWYgKCFsaXN0Py5sZW5ndGgpIHJldHVybiAtMVxuICAgIHJldHVybiBsaXN0LnJlZHVjZSgocHJldiwgY3VycmVudCkgPT5cbiAgICAgIHByZXYuYWRqdXN0ZWRNb3YgPiBjdXJyZW50LmFkanVzdGVkTW92ID8gcHJldiA6IGN1cnJlbnRcbiAgICApLmFkanVzdGVkTW92XG4gIH1cblxuICBwcm9jZXNzTG9jYXRpb25zIChsb2NhdGlvbnMpIHtcbiAgICBpZiAoIWxvY2F0aW9ucz8ubGVuZ3RoKSByZXR1cm5cbiAgICBsb2NhdGlvbnNbMF0uZmlyc3QgPSB0cnVlXG5cbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgbG9jYXRpb25zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgY29uc3QgY2xhc3NlcyA9IFtdXG4gICAgICBjb25zdCBsb2NhdGlvbiA9IGxvY2F0aW9uc1tpbmRleF1cbiAgICAgIGlmICghbG9jYXRpb24ubmFtZSkgY2xhc3Nlcy5wdXNoKCdlbXB0eScpXG4gICAgICBpZiAobG9jYXRpb24uYWN0aXZlKSBjbGFzc2VzLnB1c2goJ2FjdGl2ZScpXG4gICAgICBpZiAobG9jYXRpb24uaW5pdCAmJiAhdGhpcy5zdGFydGVkKSBjbGFzc2VzLnB1c2goJ2luaXQnKVxuICAgICAgbG9jYXRpb24uY3NzQ2xhc3NlcyA9IGNsYXNzZXMuam9pbignICcpXG4gICAgfVxuXG4gICAgaWYgKGxvY2F0aW9ucy5sZW5ndGggPiAxKSBsb2NhdGlvbnNbbG9jYXRpb25zLmxlbmd0aCAtIDFdLmxhc3QgPSB0cnVlXG5cbiAgICBsb2NhdGlvbnMuZm9yRWFjaChsID0+IHtcbiAgICAgIGlmIChsLnBhcnRpY2lwYW50cyAmJiBsLnBhcnRpY2lwYW50cy5sZW5ndGgpIHtcbiAgICAgICAgLy8gdWkubm90aWZpY2F0aW9ucy5lcnJvcihgTGVuZ3RoIDogJHtsLnBhcnRpY2lwYW50cy5sZW5ndGh9YClcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGwucGFydGljaXBhbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgZWxlbSA9IGwucGFydGljaXBhbnRzW2ldIC8vIEluaXQgdHJhY2sgPSBvbmx5IHV1aWQsIHVwZGF0ZSBsb2NhdGlvbiBsaXN0IGNoYW5nZSBmb3IgdXVpZFxuXG4gICAgICAgICAgLy8gdWkubm90aWZpY2F0aW9ucy5lcnJvcihgVHlwZSA6ICR7dHlwZW9mIGVsZW19YClcbiAgICAgICAgICBsZXQgcFxuICAgICAgICAgIGlmICh0eXBlb2YgZWxlbSA9PT0gJ3N0cmluZycgfHwgZWxlbSBpbnN0YW5jZW9mIFN0cmluZykge1xuICAgICAgICAgICAgcCA9IHRoaXMuaXRlbS5kYXRhLmRhdGEucGFydGljaXBhbnRzLmZpbmQocCA9PiBlbGVtID09IHAudXVpZCkgLy9SZXRyaWV2ZSBwYXJ0aWNpcGFudCBkYXRhIGZyb20gbGlzdC5cbiAgICAgICAgICB9IGVsc2UgaWYgKGVsZW0uY29uc3RydWN0b3IubmFtZSA9PSAnX3BhcnRpY2lwYW50Jykge1xuICAgICAgICAgICAgcCA9IHVuZGVmaW5lZCAvLyBwYXJ0aWNpcGFudCBpcyBhbHJlYWR5IHByb2Nlc3NlZC5cbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybignUGFydGljaXBhbnQgd2FzIGFscmVhZHkgcHJvY2Vzc2VkLicpXG4gICAgICAgICAgfSBlbHNlIHAgPSB1bmRlZmluZWRcblxuICAgICAgICAgIGlmICh1bmRlZmluZWQgIT0gcCkge1xuICAgICAgICAgICAgbC5wYXJ0aWNpcGFudHNbaV0gPSBuZXcgX3BhcnRpY2lwYW50KHApIC8vIHJlcGxhY2UgdXVpZCB3aXRoIF9wYXJ0aWNpcGFudFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBwYXJ0aWNpcGFudHMucHVzaCggbnVsbClcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgICdVbmRlZmluZWQgcGF0aWNpcGFudCB3aGlsZSBwcm9jZXNzaW5nIHBhcnRpY2lwYW50cyBhcnJheSdcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbC5wYXJ0aWNpcGFudHMuc29ydChzb3J0QnlSb2xlQW5kRGV4KSAvLyBUT0RPIDogdGVzdCBpZiBzb3J0aW5nIHdvcmtzXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGdldCBsb2NhdGlvbnMgKCkge1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IHRoaXMuc3RhcnRlZFxuICAgICAgPyB0aGlzLml0ZW0uZGF0YS5kYXRhLmxvY2F0aW9ucy5saXN0XG4gICAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGEubG9jYXRpb25zLmxpc3QpXG4gICAgICAgIDogW11cbiAgICAgIDogdGhpcy5pbml0VHJhY2tcbiAgICB0aGlzLnByb2Nlc3NMb2NhdGlvbnMobG9jYXRpb25zKVxuICAgIHJldHVybiBsb2NhdGlvbnNcbiAgfVxuXG4gIGdldCBpbml0VHJhY2sgKCkge1xuICAgIGlmIChcbiAgICAgICF0aGlzLml0ZW0uZGF0YS5kYXRhLmxvY2F0aW9ucy5saXN0IHx8XG4gICAgICAwID09PSB0aGlzLml0ZW0uZGF0YS5kYXRhLmxvY2F0aW9ucy5saXN0Lmxlbmd0aFxuICAgIClcbiAgICAgIHJldHVybiB1bmRlZmluZWRcblxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IFtdIC8vICEhISEhISEgbG9jYXRpb25zIHZzIGluaXQgbG9jYXRpb25zICEhIVxuXG4gICAgY29uc3QgaW5pdCA9IHRoaXMuc3RhcnRpbmdMaW5lXG4gICAgbGV0IGxvY2F0aW9uc0luZGV4U3RhcnQsIGluaXRJbmRleFN0YXJ0LCBsb2NhdGlvbnNMZW5ndGhcbiAgICBpZiAoMCA+PSBpbml0Lmxlbmd0aCkgbG9jYXRpb25zSW5kZXhTdGFydCA9IDBcbiAgICBlbHNlIGlmICh0aGlzLml0ZW0uZGF0YS5kYXRhLnN0YXJ0aW5nSW5kZXggPj0gaW5pdC5sZW5ndGgpXG4gICAgICBsb2NhdGlvbnNJbmRleFN0YXJ0ID0gMFxuICAgIGVsc2UgbG9jYXRpb25zSW5kZXhTdGFydCA9IGluaXQubGVuZ3RoIC0gdGhpcy5pdGVtLmRhdGEuZGF0YS5zdGFydGluZ0luZGV4XG5cbiAgICBpZiAodGhpcy5pdGVtLmRhdGEuZGF0YS5zdGFydGluZ0luZGV4IDw9IDApIGluaXRJbmRleFN0YXJ0ID0gMFxuICAgIGVsc2UgaWYgKHRoaXMuaXRlbS5kYXRhLmRhdGEuc3RhcnRpbmdJbmRleCA8PSBpbml0Lmxlbmd0aClcbiAgICAgIGluaXRJbmRleFN0YXJ0ID0gMFxuICAgIGVsc2UgaW5pdEluZGV4U3RhcnQgPSB0aGlzLml0ZW0uZGF0YS5kYXRhLnN0YXJ0aW5nSW5kZXggLSBpbml0Lmxlbmd0aFxuXG4gICAgaWYgKDAgPT0gbG9jYXRpb25zSW5kZXhTdGFydClcbiAgICAgIGxvY2F0aW9uc0xlbmd0aCA9IHRoaXMuaXRlbS5kYXRhLmRhdGEubG9jYXRpb25zLmxpc3QubGVuZ3RoXG4gICAgZWxzZVxuICAgICAgbG9jYXRpb25zTGVuZ3RoID1cbiAgICAgICAgdGhpcy5pdGVtLmRhdGEuZGF0YS5sb2NhdGlvbnMubGlzdC5sZW5ndGggKyBsb2NhdGlvbnNJbmRleFN0YXJ0XG5cbiAgICBpZiAoMCAhPSBpbml0Lmxlbmd0aCkge1xuICAgICAgaWYgKHRoaXMuaXRlbS5kYXRhLmRhdGEuc3RhcnRpbmdJbmRleCA8IDApIHtcbiAgICAgICAgZm9yIChcbiAgICAgICAgICBsZXQgaW5kZXggPSAwO1xuICAgICAgICAgIGluZGV4IDwgTWF0aC5hYnModGhpcy5pdGVtLmRhdGEuZGF0YS5zdGFydGluZ0luZGV4KTtcbiAgICAgICAgICBpbmRleCsrXG4gICAgICAgICkge1xuICAgICAgICAgIGluaXQucHVzaCh7XG4gICAgICAgICAgICB1dWlkOiB0aGlzLmdlbmVyYXRlTmV3VXVpZCgpLFxuICAgICAgICAgICAgaW5pdDogdHJ1ZSxcbiAgICAgICAgICAgIHBhcnRpY2lwYW50czogW11cbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgY2hhc2VMb2NhdGlvbnMgPSBkdXBsaWNhdGUodGhpcy5pdGVtLmRhdGEuZGF0YS5sb2NhdGlvbnMpXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGxvY2F0aW9uc0xlbmd0aDsgaW5kZXgrKykge1xuICAgICAgbGV0IGxvY2F0aW9uID0ge31cbiAgICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IFtdXG4gICAgICBpZiAoXG4gICAgICAgIGluZGV4ID49IGxvY2F0aW9uc0luZGV4U3RhcnQgJiZcbiAgICAgICAgaW5kZXggLSBsb2NhdGlvbnNJbmRleFN0YXJ0IDwgY2hhc2VMb2NhdGlvbnMubGlzdC5sZW5ndGhcbiAgICAgICkge1xuICAgICAgICBsb2NhdGlvbiA9IGR1cGxpY2F0ZShjaGFzZUxvY2F0aW9ucy5saXN0W2luZGV4IC0gbG9jYXRpb25zSW5kZXhTdGFydF0pXG4gICAgICAgIGxvY2F0aW9uLmluaXQgPSBmYWxzZVxuICAgICAgICBsb2NhdGlvbi5wYXJ0aWNpcGFudHM/LmZvckVhY2gocCA9PiB7XG4gICAgICAgICAgaWYgKG51bGwgIT0gcCkgcGFydGljaXBhbnRzLnB1c2gocClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGlmIChpbmRleCA+PSBpbml0SW5kZXhTdGFydCAmJiBpbmRleCAtIGluaXRJbmRleFN0YXJ0IDwgaW5pdC5sZW5ndGgpIHtcbiAgICAgICAgbWVyZ2VPYmplY3QobG9jYXRpb24sIGluaXRbaW5kZXggLSBpbml0SW5kZXhTdGFydF0sIHtcbiAgICAgICAgICBvdmVyd3JpdGU6IGZhbHNlXG4gICAgICAgIH0pXG5cbiAgICAgICAgaW5pdFtpbmRleCAtIGluaXRJbmRleFN0YXJ0XS5wYXJ0aWNpcGFudHM/LmZvckVhY2gocCA9PiB7XG4gICAgICAgICAgaWYgKG51bGwgIT0gcCkgcGFydGljaXBhbnRzLnB1c2gocClcbiAgICAgICAgfSlcblxuICAgICAgICBsb2NhdGlvbi5wYXJ0aWNpcGFudHMgPSBwYXJ0aWNpcGFudHNcbiAgICAgIH1cbiAgICAgIGxvY2F0aW9uLmZpcnN0ID0gZmFsc2VcbiAgICAgIGxvY2F0aW9uLmVuZCA9IGZhbHNlXG4gICAgICBsb2NhdGlvbnMucHVzaChsb2NhdGlvbilcbiAgICB9XG5cbiAgICByZXR1cm4gbG9jYXRpb25zXG4gIH1cblxuICBnZXQgYWN0aXZlTG9jYXRpb24gKCkge1xuICAgIGlmICghdGhpcy5sb2NhdGlvbnMpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5sb2NhdGlvbnMuZmluZChsID0+IGwuYWN0aXZlKVxuICB9XG5cbiAgZ2V0IHByZXZpb3VzTG9jYXRpb24gKCkge1xuICAgIGlmICghdGhpcy5sb2NhdGlvbnMpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBhY3RpdmVJbmRleCA9IHRoaXMubG9jYXRpb25zLmZpbmRJbmRleChsID0+IGwuYWN0aXZlKVxuICAgIGlmICgtMSA9PSBhY3RpdmVJbmRleCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmICgwID09IGFjdGl2ZUluZGV4KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMubG9jYXRpb25zW2FjdGl2ZUluZGV4IC0gMV1cbiAgfVxuXG4gIGdldCBuZXh0TG9jYXRpb24gKCkge1xuICAgIGlmICghdGhpcy5sb2NhdGlvbnMpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBhY3RpdmVJbmRleCA9IHRoaXMubG9jYXRpb25zLmZpbmRJbmRleChsID0+IGwuYWN0aXZlKVxuICAgIGlmICgtMSA9PSBhY3RpdmVJbmRleCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmIChhY3RpdmVJbmRleCA9PSB0aGlzLmxvY2F0aW9ucy5sZW5ndGggLSAxKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMubG9jYXRpb25zW2FjdGl2ZUluZGV4ICsgMV1cbiAgfVxuXG4gIGdldCBhbGxIYXZlVmFsaWRNb3YgKCkge1xuICAgIHJldHVybiB0aGlzLnBhcnRpY2lwYW50cy5ldmVyeShlID0+IGUuaGFzVmFsaWRNb3YpXG4gIH1cblxuICBnZXQgYWxsSGF2ZVNwZWVkUm9sbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMucGFydGljaXBhbnRzLmV2ZXJ5KHAgPT4gcC5zcGVlZENoZWNrPy5yb2xsZWQpXG4gIH1cblxuICBnZXQgc3RhcnRlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbS5nZXRGbGFnKCdDb0M3JywgQ29DN0NoYXNlU2hlZXQuZmxhZ3Muc3RhcnRlZClcbiAgfVxuXG4gIGFzeW5jIGN1dFRvVGhlQ2hhc2UgKCkge1xuICAgIGlmICghdGhpcy5hbGxIYXZlU3BlZWRSb2xsKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oJ1NwZWVkIHJvbGwgbWlzc2luZycpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKHRoaXMuYWxsSGF2ZVZhbGlkTW92KSB7XG4gICAgICAvL1RPRE8gOiBDaGVjayBmb3Igc3BlZWQgcm9sbCA/P1xuXG4gICAgICAvL0NhbGN1bGF0ZSBtb3ZlbWVudCBhY3Rpb25zXG4gICAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLnBhcnRpY2lwYW50c1xuICAgICAgY29uc3QgbWluTW92ID0gdGhpcy5maW5kTWluTW92KHBhcnRpY2lwYW50cylcbiAgICAgIHBhcnRpY2lwYW50cy5mb3JFYWNoKHAgPT4ge1xuICAgICAgICBwLmRhdGEubW92ZW1lbnRBY3Rpb24gPSAxICsgKHAuYWRqdXN0ZWRNb3YgLSBtaW5Nb3YpXG4gICAgICB9KVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzKVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KHRoaXMubG9jYXRpb25zKVxuICAgICAgYXdhaXQgdGhpcy5pdGVtLnNldEZsYWcoJ0NvQzcnLCBDb0M3Q2hhc2VTaGVldC5mbGFncy5zdGFydGVkLCB0cnVlKVxuICAgIH1cbiAgfVxuXG4gIGdldCBzdGFydGluZ0xpbmUgKCkge1xuICAgIC8vR2V0IHByZXlzIGFuZCBjaGVjayBmb3IgZXNjYXBlZFxuICAgIGNvbnN0IHByZXlzID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5pbmNsdWRlRXNjYXBlZFxuICAgICAgPyB0aGlzLnByZXlzXG4gICAgICA6IHRoaXMucHJleXM/LmZpbHRlcihwID0+ICFwLmRhdGEuZXNjYXBlZClcbiAgICAvL0dldCBjaGFzZXJzXG4gICAgY29uc3QgY2hhc2VycyA9IHRoaXMuY2hhc2Vyc1xuXG4gICAgLy9JZiBubyBwcmV5IG9yIG5vIGNoYXNzZXJcbiAgICAvLyBpZiAoMCA9PSBjaGFzZXJzLmxlbmd0aCkge1xuICAgIC8vICAgdWkubm90aWZpY2F0aW9ucy53YXJuKCdObyBjaGFzZXJzJylcbiAgICAvLyAgIHJldHVybiB1bmRlZmluZWRcbiAgICAvLyB9XG4gICAgLy8gaWYgKDAgPT0gcHJleXMubGVuZ3RoKSB7XG4gICAgLy8gICB1aS5ub3RpZmljYXRpb25zLndhcm4oJ05vIHByZXlzJylcbiAgICAvLyAgIHJldHVybiB1bmRlZmluZWRcbiAgICAvLyB9XG5cbiAgICAvL0J1aWxkIHN0YXJ0aW5nIHRyYWNrXG4gICAgY29uc3QgdHJhY2sgPSBbXVxuXG4gICAgY29uc3QgY2hhc2Vyc01pbk1vdiA9IHRoaXMuZmluZE1pbk1vdihjaGFzZXJzKVxuICAgIGNvbnN0IGNoYXNlcnNNYXhNb3YgPSB0aGlzLmZpbmRNYXhNb3YoY2hhc2VycylcbiAgICBjb25zdCBwcmV5c01pbk1vdiA9IHRoaXMuZmluZE1pbk1vdihwcmV5cylcbiAgICBjb25zdCBwcmV5c01heE1vdiA9IHRoaXMuZmluZE1heE1vdihwcmV5cylcblxuICAgIGlmICgtMSAhPSBjaGFzZXJzTWluTW92ICYmIC0xICE9IGNoYXNlcnNNYXhNb3YpIHtcbiAgICAgIC8vIEFkZCBjaGFzZXJzIHRvIHRoZSB0cmFjay5cbiAgICAgIGZvciAobGV0IG1vdiA9IGNoYXNlcnNNaW5Nb3Y7IG1vdiA8PSBjaGFzZXJzTWF4TW92OyBtb3YrKykge1xuICAgICAgICAvL0ZpbmQgYWxsIHdpdGggdGhhdCBtb3ZcbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSB7XG4gICAgICAgICAgdXVpZDogdGhpcy5nZW5lcmF0ZU5ld1V1aWQoKSxcbiAgICAgICAgICBpbml0OiB0cnVlLFxuICAgICAgICAgIHBhcnRpY2lwYW50czogW11cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsb2NhdGlvblBhcnRpY2lwYW50c0xpc3QgPSBjaGFzZXJzXG4gICAgICAgICAgLmZpbHRlcihwID0+IG1vdiA9PSBwLmFkanVzdGVkTW92KVxuICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLmRleCAtIGIuZGV4KVxuICAgICAgICBsb2NhdGlvblBhcnRpY2lwYW50c0xpc3QuZm9yRWFjaChwID0+XG4gICAgICAgICAgbG9jYXRpb24ucGFydGljaXBhbnRzLnB1c2gocC51dWlkKVxuICAgICAgICApXG4gICAgICAgIHRyYWNrLnB1c2gobG9jYXRpb24pXG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCBzcGFjZSBiZXR3ZWVuIGNoYXNlcnMgYW5kIHByZXlzLlxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuaXRlbS5kYXRhLmRhdGEuc3RhcnRpbmdSYW5nZTsgaW5kZXgrKykge1xuICAgICAgICB0cmFjay5wdXNoKHtcbiAgICAgICAgICB1dWlkOiB0aGlzLmdlbmVyYXRlTmV3VXVpZCgpLFxuICAgICAgICAgIGluaXQ6IHRydWUsXG4gICAgICAgICAgcGFydGljaXBhbnRzOiBbXVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICgtMSAhPSBwcmV5c01pbk1vdiAmJiAtMSAhPSBwcmV5c01heE1vdikge1xuICAgICAgLy8gQWRkIHByZXlzIHRvIHRoZSB0cmFjay5cbiAgICAgIGZvciAobGV0IG1vdiA9IHByZXlzTWluTW92OyBtb3YgPD0gcHJleXNNYXhNb3Y7IG1vdisrKSB7XG4gICAgICAgIC8vRmluZCBhbGwgd2l0aCB0aGF0IG1vdlxuICAgICAgICBjb25zdCBsb2NhdGlvbiA9IHtcbiAgICAgICAgICB1dWlkOiB0aGlzLmdlbmVyYXRlTmV3VXVpZCgpLFxuICAgICAgICAgIGluaXQ6IHRydWUsXG4gICAgICAgICAgcGFydGljaXBhbnRzOiBbXVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uUGFydGljaXBhbnRzTGlzdCA9IHByZXlzXG4gICAgICAgICAgLmZpbHRlcihwID0+IG1vdiA9PSBwLmFkanVzdGVkTW92KVxuICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLmRleCAtIGIuZGV4KVxuICAgICAgICBsb2NhdGlvblBhcnRpY2lwYW50c0xpc3QuZm9yRWFjaChwID0+XG4gICAgICAgICAgbG9jYXRpb24ucGFydGljaXBhbnRzLnB1c2gocC51dWlkKVxuICAgICAgICApXG4gICAgICAgIHRyYWNrLnB1c2gobG9jYXRpb24pXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRyYWNrXG4gIH1cblxuICBnZW5lcmF0ZU5ld1V1aWQgKCkge1xuICAgIGxldCB1bmlxdWUgPSBmYWxzZVxuICAgIGxldCB1dWlkXG4gICAgd2hpbGUgKCF1bmlxdWUpIHtcbiAgICAgIHV1aWQgPSBmb3VuZHJ5LnV0aWxzLnJhbmRvbUlEKDE2KVxuICAgICAgdW5pcXVlID1cbiAgICAgICAgMCA9PT1cbiAgICAgICAgICB0aGlzLml0ZW0uZGF0YS5kYXRhLnBhcnRpY2lwYW50cy5maWx0ZXIocCA9PiBwLnV1aWQgPT0gdXVpZCkubGVuZ3RoICYmXG4gICAgICAgIDAgPT09XG4gICAgICAgICAgdGhpcy5pdGVtLmRhdGEuZGF0YS5sb2NhdGlvbnMubGlzdC5maWx0ZXIocCA9PiBwLnV1aWQgPT0gdXVpZCkubGVuZ3RoXG4gICAgfVxuXG4gICAgcmV0dXJuIHV1aWRcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgLy8gaHRtbC5maW5kKCcudHJhY2snKS5yZWFkeShhc3luYyBodG1sID0+IGF3YWl0IHRoaXMuX29uU2hlZXRSZWFkeShodG1sKSlcblxuICAgIGh0bWwub24oJ2RibGNsaWNrJywgJy5vcGVuLWFjdG9yJywgQ29DN0NoYXQuX29uT3BlbkFjdG9yLmJpbmQodGhpcykpXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLnBhcnRpY2lwYW50JylcbiAgICAgIC5vbignZHJhZ2VudGVyJywgZXZlbnQgPT4gdGhpcy5fb25EcmFnRW50ZXJQYXJ0aWNpcGFudChldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2RyYWdvdmVyJywgZXZlbnQgPT4gdGhpcy5fb25EcmFnRW50ZXJQYXJ0aWNpcGFudChldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2RyYWdsZWF2ZScsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0xlYXZlUGFydGljaXBhbnQoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcucGFydGljaXBhbnQnKVxuICAgICAgLm9uKCdkcm9wJywgZXZlbnQgPT4gdGhpcy5fb25EcmFnTGVhdmVQYXJ0aWNpcGFudChldmVudCkpXG5cbiAgICBodG1sLmZpbmQoJy5wLXNpZGUnKS5jbGljayh0aGlzLl9vbkNoYW5nZVNpZGUuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5kZWxldGUtcGFydGljaXBhbnQnKS5jbGljayh0aGlzLl9vbkRlbGV0ZVBhcnRpY2lwYW50LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcucmVzZXQtcm9sbCcpLmNsaWNrKHRoaXMuX29uUmVzZXRSb2xsLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuZGVsZXRlLWRyaXZlcicpLmNsaWNrKHRoaXMuX29uRGVsZXRlRHJpdmVyLmJpbmQodGhpcykpXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLm5ldy1wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2RyYWdlbnRlcicsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0VudGVyUGFydGljaXBhbnQoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcubmV3LXBhcnRpY2lwYW50JylcbiAgICAgIC5vbignZHJhZ292ZXInLCBldmVudCA9PiB0aGlzLl9vbkRyYWdFbnRlclBhcnRpY2lwYW50KGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLm5ldy1wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2RyYWdsZWF2ZScsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0xlYXZlUGFydGljaXBhbnQoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcubmV3LXBhcnRpY2lwYW50JylcbiAgICAgIC5vbignZHJvcCcsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0xlYXZlUGFydGljaXBhbnQoZXZlbnQpKVxuXG4gICAgaHRtbC5maW5kKCcuYWRkLXNpZ24nKS5jbGljayh0aGlzLl9vbkFkZFBhcnRpY2lwYW50LmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJy5yb2xsLXBhcnRpY2lwYW50JykuY2xpY2sodGhpcy5fb25Sb2xsUGFydGljaXBhbnQuYmluZCh0aGlzKSlcblxuICAgIGh0bWwuZmluZCgnLmJ1dHRvbicpLmNsaWNrKHRoaXMuX29uQnV0dG9uQ2xpY2suYmluZCh0aGlzKSlcblxuICAgIGh0bWwuZmluZCgnLm5hbWUtY29udGFpbmVyJykuY2xpY2sodGhpcy5fb25Mb2NhdGlvbkNsaWNrLmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJy5vYnN0YWNsZS10eXBlJykuY2xpY2sodGhpcy5fb25PYnN0YWNsZVR5cGVDbGljay5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLm9ic3RhY2xlLXRvZ2dsZScpLmNsaWNrKHRoaXMuX29uT2JzdGFjbGVUb2dnbGVDbGljay5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnRvZ2dsZScpLmNsaWNrKHRoaXMuX29uVG9nZ2xlLmJpbmQodGhpcykpXG5cbiAgICBjb25zdCBwYXJ0aWNpcGFudERyYWdEcm9wID0gbmV3IERyYWdEcm9wKHtcbiAgICAgIGRyb3BTZWxlY3RvcjogJy5wYXJ0aWNpcGFudCcsXG4gICAgICBjYWxsYmFja3M6IHsgZHJvcDogdGhpcy5fb25Ecm9wUGFydGljaXBhbnQuYmluZCh0aGlzKSB9XG4gICAgfSlcbiAgICBwYXJ0aWNpcGFudERyYWdEcm9wLmJpbmQoaHRtbFswXSlcblxuICAgIGNvbnN0IG5ld1BhcnRpY2lwYW50RHJhZ0Ryb3AgPSBuZXcgRHJhZ0Ryb3Aoe1xuICAgICAgZHJvcFNlbGVjdG9yOiAnLm5ldy1wYXJ0aWNpcGFudCcsXG4gICAgICBjYWxsYmFja3M6IHsgZHJvcDogdGhpcy5fb25BZGRQYXJ0aWNpcGFudC5iaW5kKHRoaXMpIH1cbiAgICB9KVxuICAgIG5ld1BhcnRpY2lwYW50RHJhZ0Ryb3AuYmluZChodG1sWzBdKVxuXG4gICAgaWYgKHRoaXMuc3RhcnRlZCkge1xuICAgICAgY29uc3QgY2hhc2VQYXJ0aWNpcGFudERyYWdwRHJvcCA9IG5ldyBEcmFnRHJvcCh7XG4gICAgICAgIGRyYWdTZWxlY3RvcjogJy5jaGFzZS1wYXJ0aWNpcGFudCcsXG4gICAgICAgIGRyb3BTZWxlY3RvcjogJy5jaGFzZS1sb2NhdGlvbicsXG4gICAgICAgIHBlcm1pc3Npb25zOiB7XG4gICAgICAgICAgZHJhZ3N0YXJ0OiB0aGlzLl9jYW5DaGFzZVBhcnRpY2lwYW50RHJhZ1N0YXJ0LmJpbmQodGhpcyksXG4gICAgICAgICAgZHJvcDogdGhpcy5fY2FuQ2hhc2VQYXJ0aWNpcGFudERyYWdEcm9wLmJpbmQodGhpcylcbiAgICAgICAgfSxcbiAgICAgICAgY2FsbGJhY2tzOiB7XG4gICAgICAgICAgZHJhZ3N0YXJ0OiB0aGlzLl9vbkNoYXNlUGFydGljaXBhbnREcmFnU3RhcnQuYmluZCh0aGlzKSxcbiAgICAgICAgICBkcm9wOiB0aGlzLl9vbkNoYXNlUGFydGljaXBhbnREcmFnRHJvcC5iaW5kKHRoaXMpLFxuICAgICAgICAgIGRyYWdvdmVyOiB0aGlzLl9vbkRyYWdFbnRlci5iaW5kKHRoaXMpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBjaGFzZVBhcnRpY2lwYW50RHJhZ3BEcm9wLmJpbmQoaHRtbFswXSlcblxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmNoYXNlLWxvY2F0aW9uJylcbiAgICAgICAgLm9uKCdkcmFnbGVhdmUnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdMZWF2ZShldmVudCkpXG4gICAgfVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgLyogIEZvcm0gU3VibWlzc2lvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKiogQG92ZXJyaWRlICovXG4gIF9nZXRTdWJtaXREYXRhICh1cGRhdGVEYXRhID0ge30pIHtcbiAgICAvLyBDcmVhdGUgdGhlIGV4cGFuZGVkIHVwZGF0ZSBkYXRhIG9iamVjdFxuICAgIGNvbnN0IGZkID0gbmV3IEZvcm1EYXRhRXh0ZW5kZWQodGhpcy5mb3JtLCB7IGVkaXRvcnM6IHRoaXMuZWRpdG9ycyB9KVxuICAgIGxldCBkYXRhID0gZmQudG9PYmplY3QoKVxuICAgIGlmICh1cGRhdGVEYXRhKSBkYXRhID0gbWVyZ2VPYmplY3QoZGF0YSwgdXBkYXRlRGF0YSlcbiAgICBlbHNlIGRhdGEgPSBleHBhbmRPYmplY3QoZGF0YSlcblxuICAgIC8vQ2hlY2sgdGhhdCBzdGFydGluZyBwb3NpdGlvbiBpcyBub3Qgb3V0c2lkZSBvZiBjaGFzZSByYW5nZS5cbiAgICBpZiAoXG4gICAgICB0aGlzLml0ZW0uZGF0YS5kYXRhLmxvY2F0aW9ucz8ubGlzdD8ubGVuZ3RoICYmXG4gICAgICBkYXRhLmRhdGEuc3RhcnRpbmdJbmRleCA+IHRoaXMuaXRlbS5kYXRhLmRhdGEubG9jYXRpb25zLmxpc3QubGVuZ3RoXG4gICAgKSB7XG4gICAgICBkYXRhLmRhdGEuc3RhcnRpbmdJbmRleCA9IHRoaXMuaXRlbS5kYXRhLmRhdGEubG9jYXRpb25zLmxpc3QubGVuZ3RoXG4gICAgfVxuXG4gICAgaWYgKGRhdGEuZGF0YS5wYXJ0aWNpcGFudHMpIHtcbiAgICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhLnBhcnRpY2lwYW50cylcbiAgICAgIC8vIEhhbmRsZSBwYXJ0aWNpcGFudHMgYXJyYXlcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEuZGF0YS5wYXJ0aWNpcGFudHMpKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gcGFydGljaXBhbnRzLmZpbmRJbmRleChwID0+IHAudXVpZCA9PSBrKVxuICAgICAgICBpZiAoLTEgPT0gaW5kZXgpIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ1BhcnRpY2lwYW50IHRhYmxlIGNvcnJ1cHRlZCcpXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGNvbnN0IG9yaWdpbmFsID0gcGFydGljaXBhbnRzW2luZGV4XVxuICAgICAgICAgIGNvbnN0IGNsZWFuZWQgPSBjbGVhbih2KVxuICAgICAgICAgIG1lcmdlT2JqZWN0KG9yaWdpbmFsLCBjbGVhbmVkKVxuICAgICAgICAgIHBhcnRpY2lwYW50c1tpbmRleF0gPSBvcmlnaW5hbFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGRhdGEuZGF0YS5wYXJ0aWNpcGFudHMgPSBwYXJ0aWNpcGFudHNcbiAgICB9XG5cbiAgICBpZiAoZGF0YS5sb2NhdGlvbnMpIHtcbiAgICAgIGNvbnN0IGxvY2F0aW9ucyA9IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhLmxvY2F0aW9ucy5saXN0KVxuICAgICAgLy9IYW5kbGUgbG9jYXRpb25zIGxpc3RcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEubG9jYXRpb25zKSkge1xuICAgICAgICBjb25zdCBsb2NhdGlvbkluZGV4ID0gbG9jYXRpb25zLmZpbmRJbmRleChsID0+IGwudXVpZCA9PSBrZXkpXG4gICAgICAgIGlmICgtMSA9PSBsb2NhdGlvbkluZGV4KVxuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0xvY2F0aW9ucyB0YWJsZSBjb3JydXB0ZWQnKVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBjb25zdCBvcmlnaW5hbExvY2F0aW9uID0gbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdXG4gICAgICAgICAgY29uc3QgY2xlYW5lZCA9IGNsZWFuKHZhbHVlKVxuICAgICAgICAgIG1lcmdlT2JqZWN0KG9yaWdpbmFsTG9jYXRpb24sIGNsZWFuZWQpXG4gICAgICAgICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdID0gb3JpZ2luYWxMb2NhdGlvblxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGRlbGV0ZSBkYXRhLmxvY2F0aW9uc1xuICAgICAgZGF0YS5kYXRhLmxvY2F0aW9ucyA9IHsgbGlzdDogbG9jYXRpb25zIH1cbiAgICB9XG4gICAgLy8gY29uc3QgcGFydGljaXBhbnRzID0gZGF0YS5kYXRhPy5wYXJ0aWNpcGFudHM7XG4gICAgLy8gaWYoIHBhcnRpY2lwYW50cykgZGF0YS5kYXRhLnBhcnRpY2lwYW50cyA9IE9iamVjdC52YWx1ZXMoIHBhcnRpY2lwYW50cykubWFwKCBwID0+IGNsZWFuKHApKTtcblxuICAgIC8vIFJldHVybiB0aGUgZmxhdHRlbmVkIHN1Ym1pc3Npb24gZGF0YVxuICAgIHJldHVybiBmbGF0dGVuT2JqZWN0KGRhdGEpXG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIC8vIGFzeW5jIF9vblN1Ym1pdCguLi5hcmdzKSB7XG4gIC8vICBhd2FpdCBzdXBlci5fb25TdWJtaXQoLi4uYXJncyk7XG4gIC8vIH1cblxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3Qgb3ZlcnJpZGUgPSB0YXJnZXQ/LmRhdGFzZXQ/Lm92ZXJyaWRlID09PSAndHJ1ZSdcbiAgICBpZiAob3ZlcnJpZGUpIHtcbiAgICAgIGNvbnN0IFssIHR5cGUsIHV1aWQsIHN1YlR5cGUsIGRhdGFdID0gdGFyZ2V0Lm5hbWUuc3BsaXQoJy4nKVxuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmZpbmRQYXJ0aWNpcGFudEluZGV4KHV1aWQpXG4gICAgICBpZiAoXG4gICAgICAgIHR5cGUgPT09ICdwYXJ0aWNpcGFudHMnICYmXG4gICAgICAgICFpc05hTihpbmRleCkgJiZcbiAgICAgICAgc3ViVHlwZSA9PT0gJ3NwZWVkLWNoZWNrJ1xuICAgICAgKSB7XG4gICAgICAgIGlmIChkYXRhID09PSAnbmFtZScpIHtcbiAgICAgICAgICAvLyBDaGFuZ2luZyBuYW1lIHdpbGwgcmVtb3ZlIGFsbCBvdGhlciByZWYgIVxuICAgICAgICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5kYXRhLmRhdGEucGFydGljaXBhbnRzXG4gICAgICAgICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhLnBhcnRpY2lwYW50cylcbiAgICAgICAgICAgIDogW11cbiAgICAgICAgICBpZiAocGFydGljaXBhbnRzW2luZGV4XS5zcGVlZENoZWNrKSB7XG4gICAgICAgICAgICBkZWxldGUgcGFydGljaXBhbnRzW2luZGV4XS5zcGVlZENoZWNrLmlkXG4gICAgICAgICAgICBkZWxldGUgcGFydGljaXBhbnRzW2luZGV4XS5zcGVlZENoZWNrLnR5cGVcbiAgICAgICAgICB9IGVsc2UgcGFydGljaXBhbnRzW2luZGV4XS5zcGVlZENoZWNrID0ge31cbiAgICAgICAgICBwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2submFtZSA9IHRhcmdldC52YWx1ZVxuICAgICAgICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBzdXBlci5fdXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSlcbiAgfVxuXG4gIHN0YXRpYyAvKiphc3luYyAqLyBzZXRTY3JvbGwgKGFwcCwgaHRtbCwgZGF0YSkge1xuICAgIGNvbnN0IHRyYWNrID0gaHRtbC5maW5kKCcudHJhY2snKVxuICAgIGlmICghdHJhY2subGVuZ3RoKSByZXR1cm5cbiAgICBjb25zdCBlbGVtZW50ID0gJCh0cmFjaykuZmluZCgnLmFjdGl2ZScpXG4gICAgaWYgKCFlbGVtZW50Lmxlbmd0aCkgcmV0dXJuXG5cbiAgICBjb25zdCBvcmlnaW5hbFBvc2l0aW9uID0gZGF0YS5kYXRhLnRyYWNrU2Nyb2xsUG9zaXRpb25cblxuICAgIGNvbnN0IGVsZW1lbnRsZWZ0ID0gZWxlbWVudFswXS5vZmZzZXRMZWZ0XG4gICAgY29uc3QgZGl2V2lkdGggPSB0cmFja1swXS5jbGllbnRXaWR0aFxuICAgIGxldCBlbGVtZW50Q2VudGVyUmVsYXRpdmVMZWZ0ID0gZWxlbWVudGxlZnQgLSBkaXZXaWR0aCAvIDJcbiAgICBpZiAoZWxlbWVudENlbnRlclJlbGF0aXZlTGVmdCA8IDApIGVsZW1lbnRDZW50ZXJSZWxhdGl2ZUxlZnQgPSAwXG5cbiAgICBjb25zdCB0cmFja0VsZW1lbnQgPSB0cmFja1swXVxuXG4gICAgaWYgKC0xICE9IG9yaWdpbmFsUG9zaXRpb24pIHtcbiAgICAgIHRyYWNrRWxlbWVudC5zY3JvbGxUbyh7XG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgbGVmdDogb3JpZ2luYWxQb3NpdGlvbixcbiAgICAgICAgYmVoYXZpb3I6ICdpbnN0YW50J1xuICAgICAgfSlcbiAgICB9XG5cbiAgICB0cmFja0VsZW1lbnQuc2Nyb2xsVG8oe1xuICAgICAgdG9wOiAwLFxuICAgICAgbGVmdDogZWxlbWVudENlbnRlclJlbGF0aXZlTGVmdCxcbiAgICAgIGJlaGF2aW9yOiAnc21vb3RoJ1xuICAgIH0pXG5cbiAgICAvLyBhd2FpdCBhcHAuaXRlbS51cGRhdGUoeyAnZGF0YS50cmFja1Njcm9sbFBvc2l0aW9uJzogZWxlbWVudENlbnRlclJlbGF0aXZlTGVmdCB9KVxuICB9XG5cbiAgc3RhdGljIG9uQ2xvc2UgKGFwcCwgaHRtbCkge1xuICAgIGFwcC5pdGVtLnVwZGF0ZSh7ICdkYXRhLnRyYWNrU2Nyb2xsUG9zaXRpb24nOiAtMSB9KVxuICB9XG5cbiAgLy8gYXN5bmMgX29uU2hlZXRSZWFkeSAoaHRtbCkge1xuICAvLyAgIGNvbnN0IHRyYWNrID0gaHRtbC5maW5kKCcudHJhY2snKVxuICAvLyAgIGNvbnN0IGVsZW1lbnQgPSAkKHRyYWNrKS5maW5kKCcuYWN0aXZlJylcblxuICAvLyAgIGNvbnN0IGVsZW1lbnRsZWZ0ID0gZWxlbWVudFswXS5vZmZzZXRMZWZ0XG4gIC8vICAgY29uc3QgZGl2V2lkdGggPSB0cmFja1swXS5jbGllbnRXaWR0aFxuICAvLyAgIGxldCBlbGVtZW50Q2VudGVyUmVsYXRpdmVMZWZ0ID0gZWxlbWVudGxlZnQgLSBkaXZXaWR0aCAvIDJcbiAgLy8gICBpZiAoZWxlbWVudENlbnRlclJlbGF0aXZlTGVmdCA8IDApIGVsZW1lbnRDZW50ZXJSZWxhdGl2ZUxlZnQgPSAwXG5cbiAgLy8gICBjb25zdCBzY3JvbGxQb3NpdGlvbiA9IHRoaXMuaXRlbS5kYXRhLmRhdGEudHJhY2tTY3JvbGxQb3NpdGlvblxuICAvLyAgIGlmICghdHJhY2subGVuZ3RoKSByZXR1cm5cbiAgLy8gICBpZiAoIXNjcm9sbFBvc2l0aW9uKSByZXR1cm5cbiAgLy8gICBjb25zdCB0cmFja0VsZW1lbnQgPSB0cmFja1swXVxuICAvLyAgIHRyYWNrRWxlbWVudC5zY3JvbGxUbyh7XG4gIC8vICAgICB0b3A6IDAsXG4gIC8vICAgICBsZWZ0OiBlbGVtZW50Q2VudGVyUmVsYXRpdmVMZWZ0LFxuICAvLyAgICAgYmVoYXZpb3I6ICdpbnN0YW50J1xuICAvLyAgIH0pXG5cbiAgLy8gICAvL1RPRE8gOiBjb3VsZGQgdXNlIHBhcmVudC5vZmZzZXRUb3AgZXQgY2hpbGQub2Zmc2V0VG9wIHRvIGNlbnRlciB0aGUgYWN0aXZlIGVsZW1lbnRcblxuICAvLyAgIC8vIGNvbnN0IGFjdGl2ZSA9IGh0bWwuZmluZCgnLm5hbWUtY29udGFpbmVyLmFjdGl2ZScpXG4gIC8vICAgLy8gaWYoIGFjdGl2ZSl7XG4gIC8vICAgLy8gICBjb25zdCBlbGVtZW50ID0gYWN0aXZlWzBdXG4gIC8vICAgLy8gICBlbGVtZW50LnNjcm9sbEludG9WaWV3KHtiZWhhdmlvcjogXCJzbW9vdGhcIiwgYmxvY2s6IFwiZW5kXCIsIGlubGluZTogXCJjZW50ZXJcIn0pXG4gIC8vICAgLy8gZWxlbWVudC5zY3JvbGxJbnRvVmlldyhmYWxzZSlcbiAgLy8gICAvLyB9XG4gIC8vICAgLy8gfSlcbiAgLy8gfVxuXG4gIGZpbmRQYXJ0aWNpcGFudEluZGV4ICh1dWlkKSB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbS5kYXRhLmRhdGEucGFydGljaXBhbnRzLmZpbmRJbmRleChwID0+IHAudXVpZCA9PSB1dWlkKVxuICB9XG5cbiAgZmluZExvY2F0aW9uSW5kZXggKHV1aWQpIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtLmRhdGEuZGF0YS5sb2NhdGlvbnMubGlzdC5maW5kSW5kZXgocCA9PiBwLnV1aWQgPT0gdXVpZClcbiAgfVxuXG4gIGZpbmRJbmRleCAobGlzdCwgdXVpZCkge1xuICAgIHJldHVybiBsaXN0LmZpbmRJbmRleChwID0+IHAudXVpZCA9PSB1dWlkKVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlTG9jYXRpb25zTGlzdCAobGlzdCkge1xuICAgIC8vUmVtb3ZlIGFsbCB1bm5lY2Vzc2FyeSBpdGVtcyAoY3NzQ2xhc3MsIClcbiAgICBjb25zdCB1cGRhdGVkTGlzdCA9IGR1cGxpY2F0ZShsaXN0KVxuICAgIHVwZGF0ZWRMaXN0LmZvckVhY2gobCA9PiB7XG4gICAgICAvLyBkZWxldGUgbC5hY3RpdmVcbiAgICAgIGRlbGV0ZSBsLmNzc0NsYXNzZXNcbiAgICAgIGRlbGV0ZSBsLmZpcnN0XG4gICAgICBkZWxldGUgbC5sYXN0XG4gICAgICBkZWxldGUgbC5lbmRcbiAgICAgIGlmIChsLnBhcnRpY2lwYW50cyAmJiBsLnBhcnRpY2lwYW50cy5sZW5ndGgpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsLnBhcnRpY2lwYW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChsLnBhcnRpY2lwYW50c1tpXS5kYXRhPy51dWlkKVxuICAgICAgICAgICAgbC5wYXJ0aWNpcGFudHNbaV0gPSBsLnBhcnRpY2lwYW50c1tpXS5kYXRhLnV1aWRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdkYXRhLmxvY2F0aW9ucy5saXN0JzogdXBkYXRlZExpc3QgfSlcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVBhcnRpY2lwYW50cyAobGlzdCkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGEgPSB0aGlzLml0ZW0uZGF0YS5kYXRhLnBhcnRpY2lwYW50c1xuICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLmRhdGEuZGF0YS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG4gICAgbGlzdC5mb3JFYWNoKHAgPT4ge1xuICAgICAgbGV0IGRhdGFcbiAgICAgIGlmIChwLmNvbnN0cnVjdG9yLm5hbWUgPT0gJ19wYXJ0aWNpcGFudCcpIHtcbiAgICAgICAgZGF0YSA9IHAuZGF0YVxuICAgICAgfSBlbHNlIGRhdGEgPSBwXG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZEluZGV4KHBhcnRpY2lwYW50c0RhdGEsIGRhdGEudXVpZClcbiAgICAgIGlmICgtMSA9PT0gaW5kZXgpIHtcbiAgICAgICAgcGFydGljaXBhbnRzRGF0YS5wdXNoKGRhdGEpXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybignUGFydGljaXBhbnQgZGF0YSBtaXNzaW5nJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcnRpY2lwYW50c0RhdGFbaW5kZXhdID0gZGF0YVxuICAgICAgfVxuICAgIH0pXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdkYXRhLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50c0RhdGEgfSlcbiAgICByZXR1cm5cbiAgfVxuXG4gIGFzeW5jIF9vblRvZ2dsZSAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgLy8gY29uc3QgbG9jYXRpb25FbGVtZW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5sb2NhdGlvbi5vYnN0YWNsZScpXG4gICAgLy8gY29uc3QgdXVpZCA9IGxvY2F0aW9uRWxlbWVudC5kYXRhc2V0LnV1aWRcbiAgICAvLyBjb25zdCBsb2NhdGlvbnMgPSBkdXBsaWNhdGUodGhpcy5pdGVtLmRhdGEuZGF0YS5sb2NhdGlvbnMubGlzdClcbiAgICAvLyBjb25zdCBsb2NhdGlvbkluZGV4ID0gdGhpcy5maW5kSW5kZXgobG9jYXRpb25zLCB1dWlkKVxuICAgIGNvbnN0IHRvZ2dsZSA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ3RvZ2dsZScpXG4gICAgY29uc3QgZGF0YSA9IGV4cGFuZE9iamVjdCh7XG4gICAgICBbdG9nZ2xlXTogIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3N3aXRjaGVkLW9uJylcbiAgICB9KVxuICAgIGlmIChkYXRhLmxvY2F0aW9ucykge1xuICAgICAgY29uc3QgbG9jYXRpb25zID0gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGEubG9jYXRpb25zLmxpc3QpXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmxvY2F0aW9ucykpIHtcbiAgICAgICAgY29uc3QgbG9jYXRpb25JbmRleCA9IGxvY2F0aW9ucy5maW5kSW5kZXgobCA9PiBsLnV1aWQgPT0ga2V5KVxuICAgICAgICBpZiAoLTEgPT0gbG9jYXRpb25JbmRleClcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdMb2NhdGlvbnMgdGFibGUgY29ycnVwdGVkJylcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgY29uc3Qgb3JpZ2luYWxMb2NhdGlvbiA9IGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XVxuICAgICAgICAgIGNvbnN0IGNsZWFuZWQgPSBjbGVhbih2YWx1ZSlcbiAgICAgICAgICBtZXJnZU9iamVjdChvcmlnaW5hbExvY2F0aW9uLCBjbGVhbmVkKVxuICAgICAgICAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XSA9IG9yaWdpbmFsTG9jYXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucylcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25PYnN0YWNsZVRvZ2dsZUNsaWNrIChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBsb2NhdGlvbkVsZW1lbnQgPSB0YXJnZXQuY2xvc2VzdCgnLmxvY2F0aW9uLm9ic3RhY2xlJylcbiAgICBjb25zdCB1dWlkID0gbG9jYXRpb25FbGVtZW50LmRhdGFzZXQudXVpZFxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhLmxvY2F0aW9ucy5saXN0KVxuICAgIGNvbnN0IGxvY2F0aW9uSW5kZXggPSB0aGlzLmZpbmRJbmRleChsb2NhdGlvbnMsIHV1aWQpXG4gICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlID0gIWxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZVxuICAgIGlmICghbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlscykge1xuICAgICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlscyA9IHtcbiAgICAgICAgYmFycmllcjogdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zKVxuICB9XG5cbiAgYXN5bmMgX29uT2JzdGFjbGVUeXBlQ2xpY2sgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGxvY2F0aW9uRWxlbWVudCA9IHRhcmdldC5jbG9zZXN0KCcubG9jYXRpb24ub2JzdGFjbGUnKVxuICAgIGNvbnN0IHV1aWQgPSBsb2NhdGlvbkVsZW1lbnQuZGF0YXNldC51dWlkXG4gICAgY29uc3QgbG9jYXRpb25zID0gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGEubG9jYXRpb25zLmxpc3QpXG4gICAgY29uc3QgbG9jYXRpb25JbmRleCA9IHRoaXMuZmluZEluZGV4KGxvY2F0aW9ucywgdXVpZClcbiAgICBpZiAoIWxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHMpXG4gICAgICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVEZXRhaWxzID0ge31cbiAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYmFycmllcicpKSB7XG4gICAgICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVEZXRhaWxzLmJhcnJpZXIgPSAhbG9jYXRpb25zW1xuICAgICAgICBsb2NhdGlvbkluZGV4XG4gICAgICBdLm9ic3RhY2xlRGV0YWlscy5iYXJyaWVyXG4gICAgICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVEZXRhaWxzLmhhemFyZCA9ICFsb2NhdGlvbnNbXG4gICAgICAgIGxvY2F0aW9uSW5kZXhcbiAgICAgIF0ub2JzdGFjbGVEZXRhaWxzLmJhcnJpZXJcbiAgICB9IGVsc2UgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2hhemFyZCcpKSB7XG4gICAgICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVEZXRhaWxzLmhhemFyZCA9ICFsb2NhdGlvbnNbXG4gICAgICAgIGxvY2F0aW9uSW5kZXhcbiAgICAgIF0ub2JzdGFjbGVEZXRhaWxzLmhhemFyZFxuICAgICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlscy5iYXJyaWVyID0gIWxvY2F0aW9uc1tcbiAgICAgICAgbG9jYXRpb25JbmRleFxuICAgICAgXS5vYnN0YWNsZURldGFpbHMuaGF6YXJkXG4gICAgfVxuICAgIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMpXG4gIH1cblxuICBhc3luYyBfb25Mb2NhdGlvbkNsaWNrIChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCB0cmFjayA9IHRhcmdldC5jbG9zZXN0KCcudHJhY2snKVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS50cmFja1Njcm9sbFBvc2l0aW9uJzogdHJhY2suc2Nyb2xsTGVmdCB9KVxuICAgIGNvbnN0IGFjdGl2ZSA9IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpXG4gICAgY29uc3QgbG9jYXRpb25zID0gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGEubG9jYXRpb25zLmxpc3QpXG4gICAgbG9jYXRpb25zLmZvckVhY2gobCA9PiAobC5hY3RpdmUgPSBmYWxzZSkpXG4gICAgY29uc3QgbG9jYXRpb25FbGVtZW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5jaGFzZS1sb2NhdGlvbicpXG4gICAgY29uc3QgdXVpZCA9IGxvY2F0aW9uRWxlbWVudC5kYXRhc2V0LnV1aWRcbiAgICBjb25zdCBsb2NhdGlvbkluZGV4ID0gdGhpcy5maW5kSW5kZXgobG9jYXRpb25zLCB1dWlkKVxuICAgIGlmICgtMSAhPSBsb2NhdGlvbkluZGV4KSB7XG4gICAgICBpZiAoIWFjdGl2ZSkgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLmFjdGl2ZSA9IHRydWVcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uQnV0dG9uQ2xpY2sgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGFjdGlvbiA9IHRhcmdldC5kYXRhc2V0Py5hY3Rpb25cbiAgICBpZiAoIWFjdGlvbikgcmV0dXJuXG4gICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgIGNhc2UgJ2luaXQnOlxuICAgICAgICBpZiAoXG4gICAgICAgICAgIWlzTmFOKHRoaXMuaXRlbS5kYXRhLmRhdGEubG9jYXRpb25zLnRvdGFsKSAmJlxuICAgICAgICAgIHRoaXMuaXRlbS5kYXRhLmRhdGEubG9jYXRpb25zLnRvdGFsID4gMFxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBsb2NhdGlvbnMgPSBBcnJheS5hcHBseShcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBBcnJheSh0aGlzLml0ZW0uZGF0YS5kYXRhLmxvY2F0aW9ucy50b3RhbClcbiAgICAgICAgICApLm1hcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4geyB1dWlkOiBmb3VuZHJ5LnV0aWxzLnJhbmRvbUlEKDE2KSB9XG4gICAgICAgICAgfSlcbiAgICAgICAgICBsb2NhdGlvbnNbMF0ubmFtZSA9ICdTdGFydCdcbiAgICAgICAgICBpZiAobG9jYXRpb25zLmxlbmd0aCA+IDEpIGxvY2F0aW9uc1tsb2NhdGlvbnMubGVuZ3RoIC0gMV0ubmFtZSA9ICdFbmQnXG4gICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucylcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdyZXNldCc6XG4gICAgICAgIERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICB0aXRsZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvbmZpcm1SZXNldENoYXNlJyl9YCxcbiAgICAgICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29uZmlybVJlc2V0Q2hhc2VIaW50Jyl9PC9wPmAsXG4gICAgICAgICAgeWVzOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QoW10pXG4gICAgICAgICAgICBhd2FpdCB0aGlzLml0ZW0udW5zZXRGbGFnKCdDb0M3JywgQ29DN0NoYXNlU2hlZXQuZmxhZ3Muc3RhcnRlZClcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ2N1dDJjaGFzZSc6XG4gICAgICAgIERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICB0aXRsZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvbmZpcm1DdXQyQ2hhc2UnKX1gLFxuICAgICAgICAgIGNvbnRlbnQ6IGA8cD4ke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db25maXJtQ3V0MkNoYXNlSGludCcpfTwvcD5gLFxuICAgICAgICAgIHllczogKCkgPT4gdGhpcy5jdXRUb1RoZUNoYXNlKClcbiAgICAgICAgfSlcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAncmVzdGFydCc6XG4gICAgICAgIERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICB0aXRsZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvbmZpcm1SZXN0YXJ0Q2hhc2UnKX1gLFxuICAgICAgICAgIGNvbnRlbnQ6IGA8cD4ke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICdDb0M3LkNvbmZpcm1SZXN0YXJ0Q2hhc2VIaW50J1xuICAgICAgICAgICl9PC9wPmAsXG4gICAgICAgICAgeWVzOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsb2NhdGlvbnMgPSB0aGlzLmxvY2F0aW9ucy5maWx0ZXIobCA9PiAhbC5pbml0KVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb2NhdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uc1tpXS5wYXJ0aWNpcGFudHMpIGxvY2F0aW9uc1tpXS5wYXJ0aWNpcGFudHMgPSBbXVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucylcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaXRlbS51bnNldEZsYWcoJ0NvQzcnLCBDb0M3Q2hhc2VTaGVldC5mbGFncy5zdGFydGVkKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBfY2FuQ2hhc2VQYXJ0aWNpcGFudERyYWdTdGFydCAoc2VsZWN0b3IpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBfY2FuQ2hhc2VQYXJ0aWNpcGFudERyYWdEcm9wIChzZWxlY3Rvcikge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGFzeW5jIF9vbkNoYXNlUGFydGljaXBhbnREcmFnU3RhcnQgKGRyYWdFdmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGRyYWdFdmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgZHJhZ0RhdGEgPSB7IHV1aWQ6IHRhcmdldC5kYXRhc2V0LnV1aWQgfVxuICAgIGRyYWdFdmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRyYWdEYXRhKSlcbiAgfVxuXG4gIGFzeW5jIF9vbkNoYXNlUGFydGljaXBhbnREcmFnRHJvcCAoZHJhZ0V2ZW50KSB7XG4gICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKCdEcm9wcGVkJylcbiAgICB0aGlzLl9vbkRyYWdMZWF2ZShkcmFnRXZlbnQpXG5cbiAgICBjb25zdCB0YXJnZXQgPSBkcmFnRXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGxvY2F0aW9uVXVpZCA9IHRhcmdldC5kYXRhc2V0LnV1aWRcbiAgICBjb25zdCBkYXRhU3RyaW5nID0gZHJhZ0V2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJylcbiAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShkYXRhU3RyaW5nKVxuICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgIGBkcmFnZ2VkIHBhcnRpY3BhbnQgJHtkYXRhLnV1aWR9IG9udG8gbG9jYXRpb24gJHtsb2NhdGlvblV1aWR9YFxuICAgIClcbiAgICBhd2FpdCB0aGlzLm1vdmVQYXJ0aWNpcGFudChkYXRhLnV1aWQsIGxvY2F0aW9uVXVpZClcbiAgfVxuXG4gIF9vbkRyYWdPdmVyIChkcmFnRXZlbnQpIHtcbiAgICB0aGlzLl9vbkRyYWdFbnRlcihkcmFnRXZlbnQpXG4gIH1cblxuICBfb25EcmFnRW50ZXIgKGRyYWdFdmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGRyYWdFdmVudC5jdXJyZW50VGFyZ2V0XG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2RyYWctb3ZlcicpXG4gIH1cblxuICBfb25EcmFnTGVhdmUgKGRyYWdFdmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGRyYWdFdmVudC5jdXJyZW50VGFyZ2V0XG4gICAgdGFyZ2V0LmNsYXNzTGlzdD8ucmVtb3ZlKCdkcmFnLW92ZXInKVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcFBhcnRpY2lwYW50IChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCB1dWlkID0gdGFyZ2V0LmRhdGFzZXQ/LnV1aWRcbiAgICBjb25zdCBkYXRhU3RyaW5nID0gZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKVxuICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGRhdGFTdHJpbmcpXG4gICAgYXdhaXQgdGhpcy5hbHRlclBhcnRpY2lwYW50KGRhdGEsIHV1aWQpXG4gIH1cblxuICBhc3luYyBfb25BZGRQYXJ0aWNpcGFudCAoZXZlbnQpIHtcbiAgICBsZXQgZGF0YSA9IHt9XG4gICAgaWYgKGV2ZW50LmRhdGFUcmFuc2Zlcikge1xuICAgICAgY29uc3QgZGF0YVN0cmluZyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJylcbiAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGFTdHJpbmcpXG4gICAgfVxuICAgIGF3YWl0IHRoaXMuYWRkUGFydGljaXBhbnQoZGF0YSlcbiAgfVxuXG4gIGFzeW5jIF9vblJvbGxQYXJ0aWNpcGFudCAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgcGFydGljaXBhbnRFbGVtZW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5wYXJ0aWNpcGFudCcpXG4gICAgY29uc3QgdXVpZCA9IHBhcnRpY2lwYW50RWxlbWVudC5kYXRhc2V0LnV1aWRcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZFBhcnRpY2lwYW50SW5kZXgodXVpZClcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uZGF0YS5kYXRhLnBhcnRpY2lwYW50c1xuICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLmRhdGEuZGF0YS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG5cbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IG5ldyBfcGFydGljaXBhbnQocGFydGljaXBhbnRzW2luZGV4XSlcbiAgICBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWZTZXQpIHtcbiAgICAgIGNvbnN0IHJvbGwgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgIHJvbGwucGFyZW50ID0gdGhpcy5pdGVtLnV1aWRcbiAgICAgIHBhcnRpY2lwYW50LmRhdGEucm9sbGVkID0gdHJ1ZVxuICAgICAgcGFydGljaXBhbnQuZGF0YS5yb2xsVXVpZCA9IHJvbGwudXVpZFxuICAgICAgcm9sbC5hY3RvciA9IHBhcnRpY2lwYW50LmFjdG9yLmFjdG9yS2V5XG4gICAgICBpZiAoIWV2ZW50LnNoaWZ0S2V5ICYmIHBhcnRpY2lwYW50LmFjdG9yLnBsYXllcikge1xuICAgICAgICByb2xsLnN0YW5kYnkgPSB0cnVlXG4gICAgICAgIHJvbGwuc3RhbmRieVRleHQgPSAnQ29DNy5DaGFzZSdcbiAgICAgICAgcm9sbC5zdGFuZGJ5UmlnaHRJY29uID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvcnVubmluZy1zb2xpZC5zdmcnXG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLmlzQ2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgICAgYXdhaXQgcm9sbC5yb2xsQ2hhcmFjdGVyaXN0aWMocGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWYua2V5KVxuICAgICAgICBhd2FpdCByb2xsLnRvTWVzc2FnZSgpXG4gICAgICAgIHBhcnRpY2lwYW50LmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcbiAgICAgIH0gZWxzZSBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5pc1NraWxsKSB7XG4gICAgICAgIHJvbGwuc2tpbGwgPSBwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnJlZlxuICAgICAgICBhd2FpdCByb2xsLnJvbGwoKVxuICAgICAgICBhd2FpdCByb2xsLnRvTWVzc2FnZSgpXG4gICAgICAgIHBhcnRpY2lwYW50LmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcbiAgICAgIH0gZWxzZSBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5pc0F0dHJpYnV0ZSkge1xuICAgICAgICBhd2FpdCByb2xsLnJvbGxBdHRyaWJ1dGUocGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWYua2V5KVxuICAgICAgICBhd2FpdCByb2xsLnRvTWVzc2FnZSgpXG4gICAgICAgIHBhcnRpY2lwYW50LmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suc2NvcmUpIHtcbiAgICAgIGNvbnN0IHJvbGxEYXRhID0ge1xuICAgICAgICByYXdWYWx1ZTogcGFydGljaXBhbnQuc3BlZWRDaGVjay5zY29yZSxcbiAgICAgICAgZGlzcGxheU5hbWU6IHBhcnRpY2lwYW50LnNwZWVkQ2hlY2submFtZSxcbiAgICAgICAgYWN0b3JOYW1lOiBwYXJ0aWNpcGFudC5uYW1lID8gcGFydGljaXBhbnQubmFtZSA6IHVuZGVmaW5lZFxuICAgICAgfVxuICAgICAgaWYgKHBhcnRpY2lwYW50Lmhhc0FjdG9yKSByb2xsRGF0YS5hY3RvciA9IHBhcnRpY2lwYW50LmFjdG9yLmFjdG9yS2V5XG4gICAgICBjb25zdCByb2xsID0gQ29DN0NoZWNrLmNyZWF0ZShyb2xsRGF0YSlcbiAgICAgIHJvbGwucGFyZW50ID0gdGhpcy5pdGVtLnV1aWRcbiAgICAgIGF3YWl0IHJvbGwucm9sbCgpXG4gICAgICBhd2FpdCByb2xsLnRvTWVzc2FnZSgpXG4gICAgICBwYXJ0aWNpcGFudC5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXG4gICAgICBwYXJ0aWNpcGFudC5kYXRhLnJvbGxlZCA9IHRydWVcbiAgICAgIHBhcnRpY2lwYW50LmRhdGEucm9sbFV1aWQgPSByb2xsLnV1aWRcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXG4gIH1cblxuICBfb25EcmFnRW50ZXJQYXJ0aWNpcGFudCAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2RyYWctb3ZlcicpXG4gIH1cblxuICBfb25EcmFnTGVhdmVQYXJ0aWNpcGFudCAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWctb3ZlcicpXG4gIH1cblxuICBhc3luYyBfb25DaGFuZ2VTaWRlIChldmVudCkge1xuICAgIC8vIGNvbnN0IHRlc3QgPSBhd2FpdCBmcm9tVXVpZCggJ1NjZW5lLndoN1NMdXZJT3BjUXliOFMuVG9rZW4ubkNkb0N5b2l1ZHRqck5rdScpO1xuICAgIC8vIGNvbnN0IGl0ZW1UZXN0ID0gYXdhaXQgZnJvbVV1aWQoICdJdGVtLnBsSUVtTlJQNk83UHZlTnYucm9sbC5xMnNBenNIdDRGc3FzZGZEJyk7XG5cbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB0YXJnZXQuY2xvc2VzdCgnLnBhcnRpY2lwYW50JylcbiAgICBjb25zdCB1dWlkID0gcGFydGljaXBhbnQuZGF0YXNldC51dWlkXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmZpbmRQYXJ0aWNpcGFudEluZGV4KHV1aWQpXG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGEucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIHBhcnRpY2lwYW50c1tpbmRleF0uY2hhc2VyID0gIXBhcnRpY2lwYW50c1tpbmRleF0uY2hhc2VyXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdkYXRhLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICB9XG5cbiAgYXN5bmMgX29uRGVsZXRlRHJpdmVyIChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBkcml2ZXIgPSB0YXJnZXQuY2xvc2VzdCgnLmRyaXZlcicpXG4gICAgY29uc3QgdXVpZCA9IGRyaXZlci5kYXRhc2V0LnV1aWRcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZFBhcnRpY2lwYW50SW5kZXgodXVpZClcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uZGF0YS5kYXRhLnBhcnRpY2lwYW50c1xuICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLmRhdGEuZGF0YS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG4gICAgY29uc3QgcGFydGljaXBhbnQgPSBwYXJ0aWNpcGFudHNbaW5kZXhdXG4gICAgZGVsZXRlIHBhcnRpY2lwYW50LmFjdG9yS2V5XG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdkYXRhLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICB9XG5cbiAgYXN5bmMgX29uRGVsZXRlUGFydGljaXBhbnQgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5wYXJ0aWNpcGFudCcpXG4gICAgY29uc3QgdXVpZCA9IHBhcnRpY2lwYW50LmRhdGFzZXQudXVpZFxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kUGFydGljaXBhbnRJbmRleCh1dWlkKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5kYXRhLmRhdGEucGFydGljaXBhbnRzXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cbiAgICBwYXJ0aWNpcGFudHMuc3BsaWNlKGluZGV4LCAxKVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgfVxuXG4gIGFzeW5jIF9vblJlc2V0Um9sbCAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB0YXJnZXQuY2xvc2VzdCgnLnBhcnRpY2lwYW50JylcbiAgICBjb25zdCB1dWlkID0gcGFydGljaXBhbnQuZGF0YXNldC51dWlkXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmZpbmRQYXJ0aWNpcGFudEluZGV4KHV1aWQpXG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGEucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIGRlbGV0ZSBwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmdcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXG4gIH1cblxuICBhc3luYyBhbHRlclBhcnRpY2lwYW50IChkYXRhLCB1dWlkKSB7XG4gICAgY29uc3QgYWN0b3JLZXkgPVxuICAgICAgZGF0YS5zY2VuZUlkICYmIGRhdGEudG9rZW5JZFxuICAgICAgICA/IGAke2RhdGEuc2NlbmVJZH0uJHtkYXRhLnRva2VuSWR9YFxuICAgICAgICA6IGRhdGEudHlwZSA9PT0gJ0FjdG9yJ1xuICAgICAgICA/IGRhdGEuaWRcbiAgICAgICAgOiBkYXRhLmFjdG9ySWQgfHwgZGF0YS5hY3RvcktleVxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0ge31cbiAgICBjb25zdCBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KGFjdG9yS2V5KVxuICAgIGlmIChhY3Rvcikge1xuICAgICAgaWYgKGFjdG9yLmRhdGEudHlwZSA9PT0gJ3ZlaGljbGUnKSBwYXJ0aWNpcGFudC52ZWhpY2xlS2V5ID0gYWN0b3JLZXlcbiAgICAgIGVsc2UgcGFydGljaXBhbnQuYWN0b3JLZXkgPSBhY3RvcktleVxuICAgIH1cblxuICAgIHN3aXRjaCAoZGF0YS50eXBlPy50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICBjYXNlICdhY3Rvcic6XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdpdGVtJzpcbiAgICAgICAgcGFydGljaXBhbnQuc3BlZWRDaGVjayA9IHtcbiAgICAgICAgICBpZDogZGF0YS5kYXRhPy5faWQgfHwgZGF0YS5pZCxcbiAgICAgICAgICB0eXBlOiAnaXRlbSdcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnY2hhcmFjdGVyaXN0aWMnOlxuICAgICAgICBwYXJ0aWNpcGFudC5zcGVlZENoZWNrID0ge1xuICAgICAgICAgIGlkOiBkYXRhLm5hbWUsXG4gICAgICAgICAgdHlwZTogJ2NoYXJhY3RlcmlzdGljJ1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdhdHRyaWJ1dGUnOlxuICAgICAgICBwYXJ0aWNpcGFudC5zcGVlZENoZWNrID0ge1xuICAgICAgICAgIGlkOiBkYXRhLm5hbWUsXG4gICAgICAgICAgdHlwZTogJ2F0dHJpYnV0ZSdcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIC8vVE9ETzpDaGVjayBmb3Igc3BlZWQgY2hlY2ssIGlmIG5vbmUgYWRkIHNwZWVkY2hlY2tcbiAgICAvL3NwZWVkQ2hlY2sgPSB7XG4gICAgLy8gICBpZDogJ3N0cidcbiAgICAvLyAgIHR5cGU6ICdjaGFyYWN0ZXJpc3RpYydcbiAgICAvLyB9XG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGEucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kUGFydGljaXBhbnRJbmRleCh1dWlkKVxuICAgIGNvbnN0IG9sZFBhcnRpY2lwYW50ID0gcGFydGljaXBhbnRzW2luZGV4XVxuICAgIGlmIChvbGRQYXJ0aWNpcGFudC5tb3YpIGRlbGV0ZSBvbGRQYXJ0aWNpcGFudC5tb3ZcbiAgICBtZXJnZU9iamVjdChvbGRQYXJ0aWNpcGFudCwgcGFydGljaXBhbnQpXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdkYXRhLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICB9XG5cbiAgYXN5bmMgYWRkUGFydGljaXBhbnQgKGRhdGEpIHtcbiAgICBjb25zdCBhY3RvcktleSA9XG4gICAgICBkYXRhLnNjZW5lSWQgJiYgZGF0YS50b2tlbklkXG4gICAgICAgID8gYCR7ZGF0YS5zY2VuZUlkfS4ke2RhdGEudG9rZW5JZH1gXG4gICAgICAgIDogZGF0YS5hY3RvcklkIHx8IGRhdGEuYWN0b3JLZXkgfHwgZGF0YS5pZFxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0ge31cbiAgICBjb25zdCBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KGFjdG9yS2V5KVxuICAgIGlmIChhY3Rvcikge1xuICAgICAgaWYgKGFjdG9yLmRhdGEudHlwZSA9PT0gJ3ZlaGljbGUnKSBwYXJ0aWNpcGFudC52ZWhpY2xlS2V5ID0gYWN0b3JLZXlcbiAgICAgIGVsc2UgcGFydGljaXBhbnQuYWN0b3JLZXkgPSBhY3RvcktleVxuICAgIH1cblxuICAgIC8vIGNvbnN0IHBhcnRpY2lwYW50ID0ge1xuICAgIC8vICBhY3RvcktleSA6IChkYXRhLnNjZW5lSWQgJiYgZGF0YS50b2tlbklkKT9gJHtkYXRhLnNjZW5lSWR9LiR7ZGF0YS50b2tlbklkfWA6ZGF0YS5hY3RvcklkfHxkYXRhLmFjdG9yS2V5fHxkYXRhLmlkXG4gICAgLy8gfTtcbiAgICAvLyBjb25zdCBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KCBwYXJ0aWNpcGFudC5hY3RvcktleSk7XG4gICAgLy8gaWYoICFhY3RvcikgZGVsZXRlIHBhcnRpY2lwYW50LmFjdG9yS2V5O1xuXG4gICAgc3dpdGNoIChkYXRhLnR5cGU/LnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIGNhc2UgJ2FjdG9yJzpcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2l0ZW0nOlxuICAgICAgICBpZiAoZGF0YS5pZCkge1xuICAgICAgICAgIGNvbnN0IGl0ZW0gPSBnYW1lLml0ZW1zLmdldChkYXRhLmlkKVxuICAgICAgICAgIGlmIChpdGVtPy5kYXRhPy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sgPSB7XG4gICAgICAgICAgaWQ6IGRhdGEuZGF0YT8uX2lkIHx8IGRhdGEuaWQsXG4gICAgICAgICAgdHlwZTogJ2l0ZW0nXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2NoYXJhY3RlcmlzdGljJzpcbiAgICAgICAgcGFydGljaXBhbnQuc3BlZWRDaGVjayA9IHtcbiAgICAgICAgICBpZDogZGF0YS5uYW1lLFxuICAgICAgICAgIHR5cGU6ICdjaGFyYWN0ZXJpc3RpYydcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnYXR0cmlidXRlJzpcbiAgICAgICAgcGFydGljaXBhbnQuc3BlZWRDaGVjayA9IHtcbiAgICAgICAgICBpZDogZGF0YS5uYW1lLFxuICAgICAgICAgIHR5cGU6ICdhdHRyaWJ1dGUnXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICAvL1RPRE86Q2hlY2sgZm9yIHNwZWVkIGNoZWNrLCBpZiBub25lIGFkZCBzcGVlZGNoZWNrIGNvbiBub24gdmVoaWN1bGUsIGRyaXZlIGF1dG8gZm9yIHZlaGljdWxlXG4gICAgLy9zcGVlZENoZWNrID0ge1xuICAgIC8vICAgaWQ6ICdjb24nXG4gICAgLy8gICB0eXBlOiAnY2hhcmFjdGVyaXN0aWMnXG4gICAgLy8gfVxuXG4gICAgaWYgKCFwYXJ0aWNpcGFudC5zcGVlZENoZWNrKSB7XG4gICAgICBpZiAoIXRoaXMuaXRlbS5kYXRhLmRhdGEudmVoaWN1bGUpIHtcbiAgICAgICAgcGFydGljaXBhbnQuc3BlZWRDaGVjayA9IHtcbiAgICAgICAgICBpZDogJ2NvbicsXG4gICAgICAgICAgdHlwZTogJ2NoYXJhY3RlcmlzdGljJyxcbiAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5Db25zdGl0dXRpb24nKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJ0aWNpcGFudC5zcGVlZENoZWNrID0ge1xuICAgICAgICAgIHR5cGU6ICdpdGVtJyxcbiAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRHJpdmVBdXRvU2tpbGxOYW1lJylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uZGF0YS5kYXRhLnBhcnRpY2lwYW50c1xuICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLmRhdGEuZGF0YS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG5cbiAgICBsZXQgdW5pcXVlID0gZmFsc2VcbiAgICB3aGlsZSAoIXVuaXF1ZSkge1xuICAgICAgcGFydGljaXBhbnQudXVpZCA9IGZvdW5kcnkudXRpbHMucmFuZG9tSUQoMTYpXG4gICAgICB1bmlxdWUgPSAwID09PSBwYXJ0aWNpcGFudHMuZmlsdGVyKHAgPT4gcC51dWlkID09IHBhcnRpY2lwYW50LnV1aWQpLmxlbmd0aFxuICAgIH1cblxuICAgIHBhcnRpY2lwYW50cy5wdXNoKHBhcnRpY2lwYW50KVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVJvbGwgKHJvbGxTdHJpbmcpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGNvbnN0IHJvbGwgPSBDb0M3Q2hlY2suZnJvbVJvbGxTdHJpbmcocm9sbFN0cmluZylcbiAgICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5kYXRhLmRhdGEucGFydGljaXBhbnRzXG4gICAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGEucGFydGljaXBhbnRzKVxuICAgICAgICA6IFtdXG4gICAgICBjb25zdCBpbmRleCA9IHBhcnRpY2lwYW50cy5maW5kSW5kZXgocCA9PiBwLnJvbGxVdWlkID09PSByb2xsLnV1aWQpXG4gICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICBwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXG4gICAgICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgZGF0YTogcm9sbFN0cmluZyxcbiAgICAgICAgdHlwZTogJ2ludm9rZScsXG4gICAgICAgIG1ldGhvZDogJ3VwZGF0ZVJvbGwnLFxuICAgICAgICBpdGVtOiB0aGlzLml0ZW0udXVpZFxuICAgICAgfVxuICAgICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIG1vdmVQYXJ0aWNpcGFudCAocGFydGljaXBhbnRVdWlkLCBsb2NhdGlvblV1aWQpIHtcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBkdXBsaWNhdGUodGhpcy5pdGVtLmRhdGEuZGF0YS5sb2NhdGlvbnMubGlzdClcblxuICAgIC8vRmluZCBkZXN0aW5hdGlvbiBsb2NhdGlvbi5cbiAgICBjb25zdCBkZXN0aW5hdGlvbiA9IGxvY2F0aW9ucy5maW5kKGwgPT4gbG9jYXRpb25VdWlkID09IGwudXVpZClcbiAgICBpZiAoIWRlc3RpbmF0aW9uKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBgRmFpbGVkIHRvIG1vdmUgJHtwYXJ0aWNpcGFudFV1aWR9LiBMb2NhdGlvbiAke2xvY2F0aW9uVXVpZH0gdW5rbm93bmBcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vRmluZCBvcmlnaW4gbG9jYXRpb25cbiAgICBjb25zdCBvcmlnaW4gPSBsb2NhdGlvbnMuZmluZChsID0+XG4gICAgICBsLnBhcnRpY2lwYW50cz8uaW5jbHVkZXMocGFydGljaXBhbnRVdWlkKVxuICAgIClcbiAgICAvLyBpZiAobC5wYXJ0aWNpcGFudHMpIHtcbiAgICAvLyAgIGlmICgtMSAhPSBsLnBhcnRpY2lwYW50cy5maW5kSW5kZXgocCA9PiBwYXJ0aWNpcGFudFV1aWQgPT0gcC51dWlkIHx8IHAgPT0gcGFydGljaXBhbnRVdWlkKSlcbiAgICAvLyAgICAgcmV0dXJuIHRydWVcbiAgICAvLyB9XG4gICAgLy8gcmV0dXJuIGZhbHNlXG4gICAgLy8gfSlcbiAgICBpZiAoIW9yaWdpbikge1xuICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGZpbmQgJHtwYXJ0aWNpcGFudFV1aWR9IGluIGxvY2F0aW9uc2ApXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoIWRlc3RpbmF0aW9uLnBhcnRpY2lwYW50cykgZGVzdGluYXRpb24ucGFydGljaXBhbnRzID0gW11cbiAgICBkZXN0aW5hdGlvbi5wYXJ0aWNpcGFudHMucHVzaChwYXJ0aWNpcGFudFV1aWQpXG4gICAgLy8gZGVzdGluYXRpb24ucGFydGljaXBhbnRzLnNvcnQoc29ydEJ5Um9sZUFuZERleClcblxuICAgIGNvbnN0IG9sZFBhcnRpY2lwYW50c0xpc3QgPSBvcmlnaW4ucGFydGljaXBhbnRzLmZpbHRlcihcbiAgICAgIHAgPT4gcGFydGljaXBhbnRVdWlkICE9IHBcbiAgICApXG4gICAgb3JpZ2luLnBhcnRpY2lwYW50cyA9IG9sZFBhcnRpY2lwYW50c0xpc3RcblxuICAgIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMpXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNvcnRCeVJvbGVBbmREZXggKGEsIGIpIHtcbiAgLy9QdXQgY2hhc2VycyBmaXJzdFxuICBpZiAoYi5jaGFzZXIgJiYgIWEuY2hhc2VyKSByZXR1cm4gMVxuICBpZiAoYS5jaGFzZXIgJiYgIWIuY2hhc2VyKSByZXR1cm4gLTFcbiAgLy9JZiBzYW1ldHlwZSBzb3J0IGJ5IGRleFxuICByZXR1cm4gYS5kZXggLSBiLmRleFxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xlYW4gKG9iaikge1xuICBmb3IgKGNvbnN0IHByb3BOYW1lIGluIG9iaikge1xuICAgIGNvbnN0IHRwID0gZ2V0VHlwZShvYmpbcHJvcE5hbWVdKVxuICAgIGlmICh0cCA9PT0gJ09iamVjdCcpIHtcbiAgICAgIG9ialtwcm9wTmFtZV0gPSBjbGVhbihvYmpbcHJvcE5hbWVdKVxuICAgIH1cblxuICAgIGlmICh0cCA9PT0gJ09iamVjdCcgJiYgIU9iamVjdC5lbnRyaWVzKG9ialtwcm9wTmFtZV0pLmxlbmd0aCkge1xuICAgICAgb2JqW3Byb3BOYW1lXSA9IG51bGxcbiAgICB9IGVsc2UgaWYgKHRwID09PSAnc3RyaW5nJyAmJiAhb2JqW3Byb3BOYW1lXS5sZW5ndGgpIHtcbiAgICAgIG9ialtwcm9wTmFtZV0gPSBudWxsXG4gICAgfSBlbHNlIGlmICh0cCA9PT0gJ3N0cmluZycgJiYgIWlzTmFOKE51bWJlcihvYmpbcHJvcE5hbWVdKSkpIHtcbiAgICAgIG9ialtwcm9wTmFtZV0gPSBOdW1iZXIob2JqW3Byb3BOYW1lXSlcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9ialxufVxuXG5leHBvcnQgY2xhc3MgX3BhcnRpY2lwYW50IHtcbiAgY29uc3RydWN0b3IgKGRhdGEgPSB7fSkge1xuICAgIHRoaXMuZGF0YSA9IGRhdGFcbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgaWYgKCF0aGlzLl9hY3Rvcikge1xuICAgICAgdGhpcy5fYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmRhdGEuYWN0b3JLZXkpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9hY3RvclxuICB9XG5cbiAgZ2V0IGlzQWN0b3IgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0FjdG9yIHx8IHRoaXMuaGFzVmVoaWNsZVxuICB9XG5cbiAgZ2V0IGtleSAoKSB7XG4gICAgaWYgKHRoaXMuaGFzVmVoaWNsZSkgcmV0dXJuIHRoaXMudmVoaWNsZS5hY3RvcktleVxuICAgIGlmICh0aGlzLmhhc0FjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5hY3RvcktleVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBpY29uICgpIHtcbiAgICBpZiAoIXRoaXMuaXNBY3Rvcikge1xuICAgICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3F1ZXN0aW9uLWNpcmNsZS1yZWd1bGFyLnN2ZydcbiAgICB9XG4gICAgaWYgKHRoaXMuaGFzVmVoaWNsZSkgcmV0dXJuIHRoaXMudmVoaWNsZS5pbWdcbiAgICBpZiAodGhpcy5oYXNBY3RvcikgcmV0dXJuIHRoaXMuYWN0b3IuaW1nXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGRyaXZlciAoKSB7XG4gICAgaWYgKCF0aGlzLl9kcml2ZXIpIHtcbiAgICAgIHRoaXMuX2RyaXZlciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuZGF0YS5hY3RvcktleSlcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2RyaXZlclxuICB9XG5cbiAgZ2V0IHZlaGljbGUgKCkge1xuICAgIGlmICh0aGlzLmRhdGEudmVoaWNsZUtleSkge1xuICAgICAgdGhpcy5fdmVoaWNsZSA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuZGF0YS52ZWhpY2xlS2V5KVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdmVoaWNsZVxuICB9XG5cbiAgZ2V0IGhhc0FjdG9yICgpIHtcbiAgICByZXR1cm4gISF0aGlzLmFjdG9yXG4gIH1cblxuICBnZXQgaGFzVmVoaWNsZSAoKSB7XG4gICAgcmV0dXJuICEhdGhpcy52ZWhpY2xlXG4gIH1cblxuICBnZXQgbmFtZSAoKSB7XG4gICAgaWYgKHRoaXMuaGFzVmVoaWNsZSkgcmV0dXJuIHRoaXMudmVoaWNsZS5uYW1lXG4gICAgaWYgKHRoaXMuaGFzQWN0b3IpIHJldHVybiB0aGlzLmFjdG9yLm5hbWVcbiAgICByZXR1cm4gdGhpcy5kYXRhLm5hbWUgfHwgdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgbW92ICgpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5tb3YpIHtcbiAgICAgIGlmICh0aGlzLmhhc1ZlaGljbGUpIHRoaXMuZGF0YS5tb3YgPSB0aGlzLnZlaGljbGUubW92XG4gICAgICBlbHNlIGlmICh0aGlzLmhhc0FjdG9yKSB0aGlzLmRhdGEubW92ID0gdGhpcy5hY3Rvci5tb3ZcbiAgICB9XG5cbiAgICBpZiAodGhpcy5kYXRhLm1vdikge1xuICAgICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5kYXRhLm1vdikpKSB0aGlzLmRhdGEuaGFzVmFsaWRNb3YgPSB0cnVlXG4gICAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5kYXRhLmhhc1ZhbGlkTW92ID0gZmFsc2VcbiAgICAgICAgdGhpcy5kYXRhLm1vdiA9IHVuZGVmaW5lZFxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmRhdGEubW92XG4gIH1cblxuICBnZXQgdXVpZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS51dWlkXG4gIH1cblxuICBnZXQgZGV4ICgpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5kZXgpIHtcbiAgICAgIGlmICh0aGlzLmhhc1ZlaGljbGUgJiYgdGhpcy5oYXNEcml2ZXIpIHtcbiAgICAgICAgdGhpcy5kYXRhLmRleCA9IHRoaXMuZHJpdmVyLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWVcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5oYXNBY3Rvcikge1xuICAgICAgICB0aGlzLmRhdGEuZGV4ID0gdGhpcy5hY3Rvci5jaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YS5kZXgpIHtcbiAgICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuZGF0YS5kZXgpKSkgdGhpcy5kYXRhLmhhc1ZhbGlkRGV4ID0gdHJ1ZVxuICAgICAgZWxzZSB7XG4gICAgICAgIHRoaXMuZGF0YS5oYXNWYWxpZERleCA9IGZhbHNlXG4gICAgICAgIHRoaXMuZGF0YS5kZXggPSAwXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZGF0YS5kZXhcbiAgfVxuXG4gIGdldCBpc0NoYXNlciAoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5kYXRhLmNoYXNlclxuICB9XG5cbiAgZ2V0IGlzVmFsaWQgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc1ZhbGlkRGV4ICYmIHRoaXMuaGFzVmFsaWRNb3ZcbiAgfVxuXG4gIGdldCBoYXNWYWxpZERleCAoKSB7XG4gICAgcmV0dXJuICFpc05hTihOdW1iZXIodGhpcy5kYXRhLmRleCkpXG4gIH1cblxuICBnZXQgaGFzVmFsaWRNb3YgKCkge1xuICAgIHJldHVybiAhaXNOYU4oTnVtYmVyKHRoaXMuZGF0YS5tb3YpKVxuICB9XG5cbiAgZ2V0IGhhc0RyaXZlciAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzVmVoaWNsZSAmJiB0aGlzLmhhc0FjdG9yXG4gIH1cblxuICBnZXQgbW92QWRqdXN0bWVudCAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5yb2xsRGF0YVN0cmluZykge1xuICAgICAgY29uc3Qgcm9sbCA9IENvQzdDaGVjay5mcm9tUm9sbFN0cmluZyh0aGlzLmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZylcbiAgICAgIGlmIChyb2xsKSB7XG4gICAgICAgIGlmICghcm9sbC5zdGFuZGJ5KSB7XG4gICAgICAgICAgaWYgKHJvbGwuc3VjY2Vzc0xldmVsID49IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSkgcmV0dXJuIDFcbiAgICAgICAgICBlbHNlIGlmIChyb2xsLmZhaWxlZCkgcmV0dXJuIC0xXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIGdldCBhZGp1c3RlZE1vdiAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLm1vdiA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAoaXNOYU4oTnVtYmVyKHRoaXMubW92KSkpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gTnVtYmVyKHRoaXMubW92KSArIHRoaXMubW92QWRqdXN0bWVudFxuICB9XG5cbiAgZ2V0IGhhc01vdkFkanVzdG1lbnQgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0JvbnVzTW92IHx8IHRoaXMuaGFzTWFsdXNNb3ZcbiAgfVxuXG4gIGdldCBoYXNCb251c01vdiAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS5tb3ZBZGp1c3RtZW50ID4gMCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBoYXNNYWx1c01vdiAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS5tb3ZBZGp1c3RtZW50IDwgMCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIC8vIGdldCBvcHRpb25zKCl7XG4gIC8vICByZXR1cm4ge1xuICAvLyAgICBleGNsdWRlOiBbXSxcbiAgLy8gICAgZXhjbHVkZVN0YXJ0V2l0aDogJ18nXG4gIC8vICB9O1xuICAvLyB9XG5cbiAgLy8gZ2V0IGRhdGFTdHJpbmcoKXtcbiAgLy8gIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLCAoa2V5LHZhbHVlKT0+e1xuICAvLyAgICBpZiggbnVsbCA9PT0gdmFsdWUpIHJldHVybiB1bmRlZmluZWQ7XG4gIC8vICAgIGlmKCB0aGlzLm9wdGlvbnMuZXhjbHVkZT8uaW5jbHVkZXMoa2V5KSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgLy8gICAgaWYoIGtleS5zdGFydHNXaXRoKHRoaXMub3B0aW9ucy5leGNsdWRlU3RhcnRXaXRoKSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgLy8gICAgcmV0dXJuIHZhbHVlO1xuICAvLyAgfSk7XG4gIC8vIH1cblxuICB0b29TbG93ICgpIHtcbiAgICB0aGlzLmRhdGEuZXhjbHVkZWQgPSB0cnVlXG4gIH1cblxuICBpbmNsdWRlSW5DaGFzZSAoKSB7XG4gICAgdGhpcy5kYXRhLmV4Y2x1ZGVkID0gZmFsc2VcbiAgICB0aGlzLmRhdGEuZXNjYXBlZCA9IGZhbHNlXG4gIH1cblxuICBlc2NhcGVkICgpIHtcbiAgICB0aGlzLmRhdGEuZXNjYXBlZCA9IHRydWVcbiAgfVxuXG4gIHNldCBzbG93ZXN0ICh4KSB7XG4gICAgdGhpcy5kYXRhLnNsb3dlc3QgPSB4XG4gIH1cblxuICBzZXQgZmFzdGVzdCAoeCkge1xuICAgIHRoaXMuZGF0YS5mYXN0ZXN0ID0geFxuICB9XG5cbiAgc2V0IG1vdmVtZW50QWN0aW9uICh4KSB7XG4gICAgdGhpcy5kYXRhLm1vdmVtZW50QWN0aW9uID0geFxuICB9XG5cbiAgZ2V0IGNzc0NsYXNzICgpIHtcbiAgICBjb25zdCBjc3NDbGFzc2VzID0gW11cbiAgICBpZiAodGhpcy5pc0NoYXNlcikgY3NzQ2xhc3Nlcy5wdXNoKCdjaGFzZXInKVxuICAgIGVsc2UgY3NzQ2xhc3Nlcy5wdXNoKCdwcmV5JylcbiAgICBpZiAodGhpcy5kYXRhLmV4Y2x1ZGVkKSBjc3NDbGFzc2VzLnB1c2goJ2V4Y2x1ZGVkJywgJ3Rvb19zbG93JylcbiAgICBpZiAodGhpcy5kYXRhLmVzY2FwZWQpIGNzc0NsYXNzZXMucHVzaCgnZXNjYXBlZCcpXG4gICAgaWYgKHRoaXMuZGF0YS5mYXN0ZXN0KSBjc3NDbGFzc2VzLnB1c2goJ2Zhc3Rlc3QnKVxuICAgIGlmICh0aGlzLmRhdGEuc2xvd2VzdCkgY3NzQ2xhc3Nlcy5wdXNoKCdzbG93ZXN0JylcbiAgICByZXR1cm4gY3NzQ2xhc3Nlcy5qb2luKCcgJylcbiAgfVxuXG4gIGdldCBzcGVlZENoZWNrICgpIHtcbiAgICBjb25zdCBjaGVjayA9IHt9XG4gICAgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5uYW1lKSBjaGVjay5uYW1lID0gdGhpcy5kYXRhLnNwZWVkQ2hlY2submFtZVxuICAgIGlmICh0aGlzLmRhdGEuc3BlZWRDaGVjaz8uc2NvcmUpIGNoZWNrLnNjb3JlID0gdGhpcy5kYXRhLnNwZWVkQ2hlY2suc2NvcmVcbiAgICBjaGVjay5jc3NDbGFzc2VzID0gJydcbiAgICBpZiAodGhpcy5kYXRhLnNwZWVkQ2hlY2s/LnJvbGxEYXRhU3RyaW5nKSB7XG4gICAgICBjaGVjay5yb2xsID0gQ29DN0NoZWNrLmZyb21Sb2xsU3RyaW5nKHRoaXMuZGF0YS5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nKVxuICAgICAgaWYgKGNoZWNrLnJvbGwpIHtcbiAgICAgICAgaWYgKCFjaGVjay5yb2xsLnN0YW5kYnkgfHwgY2hlY2sucm9sbC5oYXNDYXJkKSB7XG4gICAgICAgICAgY2hlY2sucm9sbGVkID0gdHJ1ZVxuICAgICAgICAgIGNoZWNrLmlubGluZVJvbGwgPSBjaGVjay5yb2xsLmlubGluZUNoZWNrLm91dGVySFRNTFxuICAgICAgICAgIGNoZWNrLmNzc0NsYXNzZXMgKz0gJ3JvbGxlZCdcbiAgICAgICAgICBpZiAoIWNoZWNrLnJvbGwuc3RhbmRieSkge1xuICAgICAgICAgICAgaWYgKGNoZWNrLnJvbGwuc3VjY2Vzc0xldmVsID49IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSkge1xuICAgICAgICAgICAgICBjaGVjay5tb2RpZmllckNzcyA9ICd1cGdyYWRlJ1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjaGVjay5yb2xsLmZhaWxlZCkgY2hlY2subW9kaWZpZXJDc3MgPSAnZG93bmdyYWRlJ1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBjaGVjay5yb2xsLnN1Y2Nlc3NMZXZlbCA+PSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgfHxcbiAgICAgICAgICAgICAgY2hlY2sucm9sbC5mYWlsZWRcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjaGVjay5oYXNNb2RpZmllciA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuaGFzQWN0b3IpIHtcbiAgICAgIGNoZWNrLm9wdGlvbnMgPSBbXVxuICAgICAgZm9yIChjb25zdCBjIG9mIFsnY29uJ10pIHtcbiAgICAgICAgY29uc3QgY2hhcmFjdGVyaXNpdGMgPSB0aGlzLmFjdG9yLmdldENoYXJhY3RlcmlzdGljKGMpXG4gICAgICAgIGlmIChjaGFyYWN0ZXJpc2l0Yz8udmFsdWUpIGNoZWNrLm9wdGlvbnMucHVzaChjaGFyYWN0ZXJpc2l0Yy5sYWJlbClcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBzIG9mIHRoaXMuYWN0b3IuZHJpdmVTa2lsbHMpIHtcbiAgICAgICAgY2hlY2sub3B0aW9ucy5wdXNoKHMubmFtZSlcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBzIG9mIHRoaXMuYWN0b3IucGlsb3RTa2lsbHMpIHtcbiAgICAgICAgY2hlY2sub3B0aW9ucy5wdXNoKHMubmFtZSlcbiAgICAgIH1cbiAgICAgIGNoZWNrLmhhc09wdGlvbnMgPSAhIWNoZWNrLm9wdGlvbnMubGVuZ3RoXG5cbiAgICAgIGlmICh0aGlzLmRhdGEuc3BlZWRDaGVjaz8uaWQpIHtcbiAgICAgICAgbGV0IGl0ZW0gPSB0aGlzLmFjdG9yLmZpbmQodGhpcy5kYXRhLnNwZWVkQ2hlY2suaWQpXG4gICAgICAgIGlmICghaXRlbSkge1xuICAgICAgICAgIGNvbnN0IGdhbWVJdGVtID0gZ2FtZS5pdGVtcy5nZXQodGhpcy5kYXRhLnNwZWVkQ2hlY2suaWQpXG4gICAgICAgICAgaWYgKGdhbWVJdGVtKSBpdGVtID0gdGhpcy5hY3Rvci5maW5kKGdhbWVJdGVtLm5hbWUpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXRlbSkge1xuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdpdGVtJyAmJiBpdGVtLnZhbHVlLmRhdGE/LnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW0udmFsdWVcbiAgICAgICAgICAgIGNoZWNrLm5hbWUgPSBpdGVtLnZhbHVlLm5hbWVcbiAgICAgICAgICAgIGNoZWNrLnR5cGUgPSAnc2tpbGwnXG4gICAgICAgICAgICBjaGVjay5pc1NraWxsID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2sucmVmU2V0ID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2suc2NvcmUgPSBpdGVtLnZhbHVlLnZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdjaGFyYWN0ZXJpc3RpYycpIHtcbiAgICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW0udmFsdWVcbiAgICAgICAgICAgIGNoZWNrLm5hbWUgPSBpdGVtLnZhbHVlLmxhYmVsXG4gICAgICAgICAgICBjaGVjay50eXBlID0gJ2NoYXJhY3RlcmlzdGljJ1xuICAgICAgICAgICAgY2hlY2suaXNDaGFyYWN0ZXJpc3RpYyA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnJlZlNldCA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnNjb3JlID0gaXRlbS52YWx1ZS52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnYXR0cmlidXRlJykge1xuICAgICAgICAgICAgY2hlY2sucmVmID0gaXRlbS52YWx1ZVxuICAgICAgICAgICAgY2hlY2submFtZSA9IGl0ZW0udmFsdWUubGFiZWxcbiAgICAgICAgICAgIGNoZWNrLnR5cGUgPSAnYXR0cmlidXRlJ1xuICAgICAgICAgICAgY2hlY2suaXNBdHRyaWJ1dGUgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5yZWZTZXQgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5zY29yZSA9IGl0ZW0udmFsdWUudmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5kYXRhLnNwZWVkQ2hlY2s/Lm5hbWUpIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuZmluZCh0aGlzLmRhdGEuc3BlZWRDaGVjay5uYW1lKVxuICAgICAgICBpZiAoaXRlbSkge1xuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdpdGVtJyAmJiBpdGVtLnZhbHVlLmRhdGE/LnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW0udmFsdWVcbiAgICAgICAgICAgIGNoZWNrLm5hbWUgPSBpdGVtLnZhbHVlLm5hbWVcbiAgICAgICAgICAgIGNoZWNrLnR5cGUgPSAnc2tpbGwnXG4gICAgICAgICAgICBjaGVjay5pc1NraWxsID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2sucmVmU2V0ID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2suc2NvcmUgPSBpdGVtLnZhbHVlLnZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdjaGFyYWN0ZXJpc3RpYycpIHtcbiAgICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW0udmFsdWVcbiAgICAgICAgICAgIGNoZWNrLm5hbWUgPSBpdGVtLnZhbHVlLmxhYmVsXG4gICAgICAgICAgICBjaGVjay50eXBlID0gJ2NoYXJhY3RlcmlzdGljJ1xuICAgICAgICAgICAgY2hlY2suaXNDaGFyYWN0ZXJpc3RpYyA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnJlZlNldCA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnNjb3JlID0gaXRlbS52YWx1ZS52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnYXR0cmlidXRlJykge1xuICAgICAgICAgICAgY2hlY2sucmVmID0gaXRlbS52YWx1ZVxuICAgICAgICAgICAgY2hlY2submFtZSA9IGl0ZW0udmFsdWUubGFiZWxcbiAgICAgICAgICAgIGNoZWNrLnR5cGUgPSAnYXR0cmlidXRlJ1xuICAgICAgICAgICAgY2hlY2suaXNBdHRyaWJ1dGUgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5yZWZTZXQgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5zY29yZSA9IGl0ZW0udmFsdWUudmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5pZCkge1xuICAgICAgY29uc3QgaXRlbSA9IGdhbWUuaXRlbXMuZ2V0KHRoaXMuZGF0YS5zcGVlZENoZWNrLmlkKVxuICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgaWYgKGl0ZW0uZGF0YT8udHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW1cbiAgICAgICAgICBjaGVjay5uYW1lID0gaXRlbS5uYW1lXG4gICAgICAgICAgY2hlY2sudHlwZSA9ICdza2lsbCdcbiAgICAgICAgICBjaGVjay5pc1NraWxsID0gdHJ1ZVxuICAgICAgICAgIGNoZWNrLnJlZlNldCA9IGZhbHNlXG4gICAgICAgICAgY2hlY2suc2NvcmUgPSBpdGVtLmJhc2VcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghY2hlY2sucm9sbGVkICYmICFjaGVjay5zY29yZSkgY2hlY2suY3NzQ2xhc3NlcyArPSAnIGludmFsaWQnXG4gICAgY2hlY2suaXNWYWxpZCA9IGNoZWNrLnJvbGxlZCAmJiAhaXNOYU4oY2hlY2suc2NvcmUpXG5cbiAgICByZXR1cm4gY2hlY2tcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIEl0ZW1TaGVldCwgbWVyZ2VPYmplY3QgKi9cblxuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEl0ZW1TaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN0l0ZW1TaGVldFYyIGV4dGVuZHMgSXRlbVNoZWV0IHtcbiAgY29uc3RydWN0b3IgKC4uLmFyZ3MpIHtcbiAgICBzdXBlciguLi5hcmdzKVxuICAgIHRoaXMuX3NoZWV0VGFiID0gJ2l0ZW1zJ1xuICB9XG5cbiAgLyoqXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSBTaW1wbGUgSXRlbSBTaGVldFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXRWMicsICdpdGVtJ10sXG4gICAgICB3aWR0aDogMjkwLFxuICAgICAgaGVpZ2h0OiAzMjYsXG4gICAgICBzY3JvbGxZOiBbJy50YWIuZGVzY3JpcHRpb24nXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdmlnYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL2l0ZW0tc2hlZXRWMi5odG1sJ1xuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKlxuICAgKiBQcmVwYXJlIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgSXRlbSBzaGVldFxuICAgKiBUaGUgcHJlcGFyZWQgZGF0YSBvYmplY3QgY29udGFpbnMgYm90aCB0aGUgYWN0b3IgZGF0YSBhcyB3ZWxsIGFzIGFkZGl0aW9uYWwgc2hlZXQgb3B0aW9uc1xuICAgKi9cbiAgZ2V0RGF0YSAob3B0aW9ucyA9IHt9KSB7XG4gICAgLy8gdGhpcy5pdGVtLmNoZWNrU2tpbGxQcm9wZXJ0aWVzKCk7XG4gICAgY29uc3QgZGF0YSA9IHN1cGVyLmdldERhdGEob3B0aW9ucylcblxuICAgIC8qKiBNT0RJRjogMC44LnggKiovXG4gICAgY29uc3QgaXRlbURhdGEgPSBkYXRhLmRhdGFcbiAgICBkYXRhLmRhdGEgPSBpdGVtRGF0YS5kYXRhIC8vIE1PRElGOiAwLjgueCBkYXRhLmRhdGFcbiAgICAvKioqKioqKioqKioqKioqKiovXG5cbiAgICBkYXRhLmhhc093bmVyID0gdGhpcy5pdGVtLmFjdG9yICE9PSBudWxsXG5cbiAgICBpZiAodGhpcy5pdGVtLmRhdGEudHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgZGF0YS5fcHJvcGVydGllcyA9IFtdXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LnNraWxsUHJvcGVydGllcykpIHtcbiAgICAgICAgY29uc3QgcHJvcGVydHkgPSB7fVxuICAgICAgICBwcm9wZXJ0eS5pZCA9IGtleVxuICAgICAgICBwcm9wZXJ0eS5uYW1lID0gdmFsdWVcbiAgICAgICAgcHJvcGVydHkuaXNFbmFibGVkID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5wcm9wZXJ0aWVzW2tleV0gPT09IHRydWVcbiAgICAgICAgZGF0YS5fcHJvcGVydGllcy5wdXNoKHByb3BlcnR5KVxuICAgICAgfVxuXG4gICAgICBkYXRhLl9lcmFzID0gW11cbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZXJhcykpIHtcbiAgICAgICAgY29uc3QgZXJhID0ge31cbiAgICAgICAgZXJhLmlkID0ga2V5XG4gICAgICAgIGVyYS5uYW1lID0gdmFsdWVcbiAgICAgICAgZXJhLmlzRW5hYmxlZCA9IHRoaXMuaXRlbS5kYXRhLmRhdGEuZXJhc1trZXldID09PSB0cnVlXG4gICAgICAgIGRhdGEuX2VyYXMucHVzaChlcmEpXG4gICAgICB9XG5cbiAgICAgIGRhdGEuaXNTcGVjaWFsaXplZCA9IHRoaXMuaXRlbS5kYXRhLmRhdGEucHJvcGVydGllcy5zcGVjaWFsXG4gICAgICBkYXRhLmNhbk1vZGlmeVNwZWMgPVxuICAgICAgICAhdGhpcy5pdGVtLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmZpcmVhcm0gJiZcbiAgICAgICAgIXRoaXMuaXRlbS5kYXRhLmRhdGEucHJvcGVydGllcy5maWdodGluZ1xuICAgIH1cblxuICAgIGRhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKlxuICAgKiBBY3RpdmF0ZSBldmVudCBsaXN0ZW5lcnMgdXNpbmcgdGhlIHByZXBhcmVkIHNoZWV0IEhUTUxcbiAgICogQHBhcmFtIGh0bWwge0hUTUx9ICAgVGhlIHByZXBhcmVkIEhUTUwgb2JqZWN0IHJlYWR5IHRvIGJlIHJlbmRlcmVkIGludG8gdGhlIERPTVxuICAgKi9cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIC8vIEV2ZXJ5dGhpbmcgYmVsb3cgaGVyZSBpcyBvbmx5IG5lZWRlZCBpZiB0aGUgc2hlZXQgaXMgZWRpdGFibGVcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5lZGl0YWJsZSkgcmV0dXJuXG5cbiAgICBodG1sLmZpbmQoJy50b2dnbGUtc3dpdGNoJykuY2xpY2sodGhpcy5fb25DbGlja1RvZ2dsZS5iaW5kKHRoaXMpKVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICBhc3luYyBfb25DbGlja1RvZ2dsZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgcHJvcGVydHlJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnRvZ2dsZS1zd2l0Y2gnKS5kYXRhc2V0XG4gICAgICAucHJvcGVydHlcbiAgICBhd2FpdCB0aGlzLml0ZW0udG9nZ2xlUHJvcGVydHkoXG4gICAgICBwcm9wZXJ0eUlkLFxuICAgICAgZXZlbnQubWV0YUtleSB8fFxuICAgICAgICBldmVudC5jdHJsS2V5IHx8XG4gICAgICAgIGV2ZW50LmtleUNvZGUgPT09IDkxIHx8XG4gICAgICAgIGV2ZW50LmtleUNvZGUgPT09IDIyNFxuICAgIClcbiAgfVxuXG4gIC8vIGFzeW5jIF9vbkNsaWNrQXR0cmlidXRlQ29udHJvbChldmVudCkge1xuICAvLyAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIC8vICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG4gIC8vICAgY29uc3QgYWN0aW9uID0gYS5kYXRhc2V0LmFjdGlvbjtcbiAgLy8gICBjb25zdCBhdHRycyA9IHRoaXMub2JqZWN0LmRhdGEuZGF0YS5hdHRyaWJ1dGVzO1xuICAvLyAgIGNvbnN0IGZvcm0gPSB0aGlzLmZvcm07XG5cbiAgLy8gICAvLyBBZGQgbmV3IGF0dHJpYnV0ZVxuICAvLyAgIGlmIChhY3Rpb24gPT09IFwiY3JlYXRlXCIpIHtcbiAgLy8gICAgIGNvbnN0IG5rID0gT2JqZWN0LmtleXMoYXR0cnMpLmxlbmd0aCArIDE7XG4gIC8vICAgICBsZXQgbmV3S2V5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgLy8gICAgIG5ld0tleS5pbm5lckhUTUwgPSBgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImRhdGEuYXR0cmlidXRlcy5hdHRyJHtua30ua2V5XCIgdmFsdWU9XCJhdHRyJHtua31cIi8+YDtcbiAgLy8gICAgIG5ld0tleSA9IG5ld0tleS5jaGlsZHJlblswXTtcbiAgLy8gICAgIGZvcm0uYXBwZW5kQ2hpbGQobmV3S2V5KTtcbiAgLy8gICAgIGF3YWl0IHRoaXMuX29uU3VibWl0KGV2ZW50KTtcbiAgLy8gICB9XG5cbiAgLy8gICAvLyBSZW1vdmUgZXhpc3RpbmcgYXR0cmlidXRlXG4gIC8vICAgZWxzZSBpZiAoYWN0aW9uID09PSBcImRlbGV0ZVwiKSB7XG4gIC8vICAgICBjb25zdCBsaSA9IGEuY2xvc2VzdChcIi5hdHRyaWJ1dGVcIik7XG4gIC8vICAgICBsaS5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGxpKTtcbiAgLy8gICAgIGF3YWl0IHRoaXMuX29uU3VibWl0KGV2ZW50KTtcbiAgLy8gICB9XG4gIC8vIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKlxuICAgKiBJbXBsZW1lbnQgdGhlIF91cGRhdGVPYmplY3QgbWV0aG9kIGFzIHJlcXVpcmVkIGJ5IHRoZSBwYXJlbnQgY2xhc3Mgc3BlY1xuICAgKiBUaGlzIGRlZmluZXMgaG93IHRvIHVwZGF0ZSB0aGUgc3ViamVjdCBvZiB0aGUgZm9ybSB3aGVuIHRoZSBmb3JtIGlzIHN1Ym1pdHRlZFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgLy8gX3VwZGF0ZU9iamVjdChldmVudCwgZm9ybURhdGEpIHtcbiAgLy8gICAvLyBIYW5kbGUgdGhlIGZyZWUtZm9ybSBhdHRyaWJ1dGVzIGxpc3RcbiAgLy8gICBjb25zdCBmb3JkID0gZXhwYW5kT2JqZWN0KGZvcm1EYXRhKTtcbiAgLy8gICBjb25zdCBmb3JtQXR0cnMgPSBleHBhbmRPYmplY3QoZm9ybURhdGEpLmRhdGEuYXR0cmlidXRlcyB8fCB7fTtcbiAgLy8gICBjb25zdCBhdHRyaWJ1dGVzID0gT2JqZWN0LnZhbHVlcyhmb3JtQXR0cnMpLnJlZHVjZSgob2JqLCB2KSA9PiB7XG4gIC8vICAgICBsZXQgayA9IHZbXCJrZXlcIl0udHJpbSgpO1xuICAvLyAgICAgaWYgKC9bXFxzXFwuXS8udGVzdChrKSkgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXCJBdHRyaWJ1dGUga2V5cyBtYXkgbm90IGNvbnRhaW4gc3BhY2VzIG9yIHBlcmlvZHNcIik7XG4gIC8vICAgICBkZWxldGUgdltcImtleVwiXTtcbiAgLy8gICAgIG9ialtrXSA9IHY7XG4gIC8vICAgICByZXR1cm4gb2JqO1xuICAvLyAgIH0sIHt9KTtcblxuICAvLyAgIC8vIFJlbW92ZSBhdHRyaWJ1dGVzIHdoaWNoIGFyZSBubyBsb25nZXIgdXNlZFxuICAvLyAgIGZvciAobGV0IGsgb2YgT2JqZWN0LmtleXModGhpcy5vYmplY3QuZGF0YS5kYXRhLmF0dHJpYnV0ZXMpKSB7XG4gIC8vICAgICBpZiAoIWF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoaykpIGF0dHJpYnV0ZXNbYC09JHtrfWBdID0gbnVsbDtcbiAgLy8gICB9XG5cbiAgLy8gICAvLyBSZS1jb21iaW5lIGZvcm1EYXRhXG4gIC8vICAgZm9ybURhdGEgPSBPYmplY3QuZW50cmllcyhmb3JtRGF0YSkuZmlsdGVyKGUgPT4gIWVbMF0uc3RhcnRzV2l0aChcImRhdGEuYXR0cmlidXRlc1wiKSkucmVkdWNlKChvYmosIGUpID0+IHtcbiAgLy8gICAgIG9ialtlWzBdXSA9IGVbMV07XG4gIC8vICAgICByZXR1cm4gb2JqO1xuICAvLyAgIH0sIHsgX2lkOiB0aGlzLm9iamVjdC5faWQsIFwiZGF0YS5hdHRyaWJ1dGVzXCI6IGF0dHJpYnV0ZXMgfSk7XG5cbiAgLy8gICAvLyBVcGRhdGUgdGhlIEl0ZW1cbiAgLy8gICByZXR1cm4gdGhpcy5vYmplY3QudXBkYXRlKGZvcm1EYXRhKTtcbiAgLy8gfVxufVxuIiwiLyogZ2xvYmFsIG1lcmdlT2JqZWN0ICovXG5cbmltcG9ydCB7IENvQzdJdGVtU2hlZXRWMiB9IGZyb20gJy4vaXRlbS1zaGVldFYyLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3SXRlbVNoZWV0IGV4dGVuZHMgQ29DN0l0ZW1TaGVldFYyIHtcbiAgLyoqXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSBTaW1wbGUgSXRlbSBTaGVldFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICB3aWR0aDogNTIwLFxuICAgICAgaGVpZ2h0OiA1MDZcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgRHJhZ0Ryb3AsIGR1cGxpY2F0ZSwgZXhwYW5kT2JqZWN0LCBnYW1lLCBJdGVtU2hlZXQsIG1lcmdlT2JqZWN0ICovXG5cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuLy8gaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi8uLi9hY3RvcnMvYWN0b3IuanMnO1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3T2NjdXBhdGlvblNoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcbiAgLyoqXG4gICAqIEFjdGl2YXRlIGV2ZW50IGxpc3RlbmVycyB1c2luZyB0aGUgcHJlcGFyZWQgc2hlZXQgSFRNTFxuICAgKiBAcGFyYW0gaHRtbCB7SFRNTH0gICBUaGUgcHJlcGFyZWQgSFRNTCBvYmplY3QgcmVhZHkgdG8gYmUgcmVuZGVyZWQgaW50byB0aGUgRE9NXG4gICAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgLy8gRXZlcnl0aGluZyBiZWxvdyBoZXJlIGlzIG9ubHkgbmVlZGVkIGlmIHRoZSBzaGVldCBpcyBlZGl0YWJsZVxuICAgIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSByZXR1cm5cblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuaXRlbSAuaXRlbS1uYW1lIGg0JylcbiAgICAgIC5jbGljayhldmVudCA9PiB0aGlzLl9vbkl0ZW1TdW1tYXJ5KGV2ZW50LCAnc2tpbGxzJykpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5pdGVtLWRlbGV0ZScpXG4gICAgICAuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtRGVsZXRlKGV2ZW50LCAnc2tpbGxzJykpXG5cbiAgICBodG1sLmZpbmQoJy5ncm91cC1pdGVtLWRlbGV0ZScpLmNsaWNrKHRoaXMuX29uR3JvdXBJdGVtRGVsZXRlLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuZ3JvdXAtY29udHJvbCcpLmNsaWNrKHRoaXMuX29uR3JvdXBDb250cm9sLmJpbmQodGhpcykpXG5cbiAgICBjb25zdCBkcmFnRHJvcCA9IG5ldyBEcmFnRHJvcCh7XG4gICAgICBkcm9wU2VsZWN0b3I6ICcuZHJvcHBhYmxlJyxcbiAgICAgIGNhbGxiYWNrczogeyBkcm9wOiB0aGlzLl9vbkRyb3AuYmluZCh0aGlzKSB9XG4gICAgfSlcbiAgICBkcmFnRHJvcC5iaW5kKGh0bWxbMF0pXG4gIH1cblxuICBhc3luYyBfb25Ecm9wIChldmVudCwgdHlwZSA9ICdza2lsbCcsIGNvbGxlY3Rpb25OYW1lID0gJ3NraWxscycpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgIGNvbnN0IG9wdGlvbmFsU2tpbGwgPSBldmVudD8uY3VycmVudFRhcmdldD8uY2xhc3NMaXN0Py5jb250YWlucyhcbiAgICAgICdvcHRpb25hbC1za2lsbHMnXG4gICAgKVxuICAgIGNvbnN0IG9sID0gZXZlbnQ/LmN1cnJlbnRUYXJnZXQ/LmNsb3Nlc3QoJ29sJylcbiAgICBjb25zdCBpbmRleCA9IG9sPy5kYXRhc2V0Py5ncm91cFxuXG4gICAgY29uc3QgZGF0YUxpc3QgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldERhdGFGcm9tRHJvcEV2ZW50KGV2ZW50LCAnSXRlbScpXG5cbiAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5pdGVtLmRhdGEuZGF0YVtjb2xsZWN0aW9uTmFtZV1cbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGFbY29sbGVjdGlvbk5hbWVdKVxuICAgICAgOiBbXVxuICAgIGNvbnN0IGdyb3VwcyA9IHRoaXMuaXRlbS5kYXRhLmRhdGEuZ3JvdXBzXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhLmdyb3VwcylcbiAgICAgIDogW11cblxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBkYXRhTGlzdCkge1xuICAgICAgaWYgKCFpdGVtIHx8ICFpdGVtLmRhdGEpIGNvbnRpbnVlXG4gICAgICBpZiAoIVt0eXBlXS5pbmNsdWRlcyhpdGVtLmRhdGEudHlwZSkpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbmFsU2tpbGwpIHtcbiAgICAgICAgaWYgKCFDb0M3SXRlbS5pc0FueVNwZWMoaXRlbSkpIHtcbiAgICAgICAgICAvLyBHZW5lcmljIHNwZWNpYWxpemF0aW9uIGNhbiBiZSBpbmNsdWRlZCBtYW55IHRpbWVzXG4gICAgICAgICAgaWYgKGNvbGxlY3Rpb24uZmluZChlbCA9PiBlbC5uYW1lID09PSBpdGVtLmRhdGEubmFtZSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlIC8vIElmIHNraWxsIGlzIGFscmVhZHkgaW4gbWFpbiBkb24ndCBhZGQgaXRcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGdyb3Vwc1tpbmRleF0uc2tpbGxzLmZpbmQoZWwgPT4gZWwubmFtZSA9PT0gaXRlbS5uYW1lKSkge1xuICAgICAgICAgICAgY29udGludWUgLy8gSWYgc2tpbGwgaXMgYWxyZWFkeSBpbiBncm91cCBkb24ndCBhZGQgaXRcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBncm91cHNbaW5kZXhdLnNraWxscyA9IGdyb3Vwc1tpbmRleF0uc2tpbGxzLmNvbmNhdChbaXRlbS5kYXRhXSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghQ29DN0l0ZW0uaXNBbnlTcGVjKGl0ZW0pKSB7XG4gICAgICAgICAgLy8gR2VuZXJpYyBzcGVjaWFsaXphdGlvbiBjYW4gYmUgaW5jbHVkZWQgbWFueSB0aW1lc1xuICAgICAgICAgIGlmIChjb2xsZWN0aW9uLmZpbmQoZWwgPT4gZWwubmFtZSA9PT0gaXRlbS5kYXRhLm5hbWUpKSB7XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ3JvdXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgc2FtZSBza2lsbCBpcyBpbiBvbmUgb2YgdGhlIGdyb3VwIHJlbW92ZSBpdCBmcm9tIHRoZSBncm91cHNcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gZ3JvdXBzW2ldLnNraWxscy5maW5kSW5kZXgoXG4gICAgICAgICAgICAgIGVsID0+IGVsLm5hbWUgPT09IGl0ZW0uZGF0YS5uYW1lXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgIGdyb3Vwc1tpXS5za2lsbHMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb2xsZWN0aW9uLnB1c2goZHVwbGljYXRlKGl0ZW0uZGF0YSkpXG4gICAgICB9XG4gICAgfVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5ncm91cHMnOiBncm91cHMgfSlcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgW2BkYXRhLiR7Y29sbGVjdGlvbk5hbWV9YF06IGNvbGxlY3Rpb24gfSlcbiAgfVxuXG4gIGFzeW5jIF9vbkdyb3VwQ29udHJvbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcblxuICAgIC8vIEFkZCBuZXcgZGFtYWdlIGNvbXBvbmVudFxuICAgIGlmIChhLmNsYXNzTGlzdC5jb250YWlucygnYWRkLWdyb3VwJykpIHtcbiAgICAgIGF3YWl0IHRoaXMuX29uU3VibWl0KGV2ZW50KSAvLyBTdWJtaXQgYW55IHVuc2F2ZWQgY2hhbmdlc1xuICAgICAgY29uc3QgZ3JvdXBzID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5ncm91cHNcbiAgICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoe1xuICAgICAgICAnZGF0YS5ncm91cHMnOiBncm91cHMuY29uY2F0KFt7IG9wdGlvbnM6IDAsIHNraWxsczogW10gfV0pXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmIChhLmNsYXNzTGlzdC5jb250YWlucygncmVtb3ZlLWdyb3VwJykpIHtcbiAgICAgIGF3YWl0IHRoaXMuX29uU3VibWl0KGV2ZW50KSAvLyBTdWJtaXQgYW55IHVuc2F2ZWQgY2hhbmdlc1xuICAgICAgY29uc3QgZ3JvdXBzID0gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGEuZ3JvdXBzKVxuICAgICAgY29uc3Qgb2wgPSBhLmNsb3Nlc3QoJy5pdGVtLWxpc3QuZ3JvdXAnKVxuICAgICAgZ3JvdXBzLnNwbGljZShOdW1iZXIob2wuZGF0YXNldC5ncm91cCksIDEpXG4gICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEuZ3JvdXBzJzogZ3JvdXBzIH0pXG4gICAgfVxuICB9XG5cbiAgX29uSXRlbVN1bW1hcnkgKGV2ZW50LCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtID0gdGhpcy5pdGVtLmRhdGEuZGF0YVtjb2xsZWN0aW9uTmFtZV0uZmluZChzID0+IHtcbiAgICAgIHJldHVybiBzLl9pZCA9PT0gbGkuZGF0YSgnaXRlbS1pZCcpXG4gICAgfSlcbiAgICBjb25zdCBjaGF0RGF0YSA9IGl0ZW0uZGF0YS5kZXNjcmlwdGlvblxuXG4gICAgLy8gVG9nZ2xlIHN1bW1hcnlcbiAgICBpZiAobGkuaGFzQ2xhc3MoJ2V4cGFuZGVkJykpIHtcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSBsaS5jaGlsZHJlbignLml0ZW0tc3VtbWFyeScpXG4gICAgICBzdW1tYXJ5LnNsaWRlVXAoMjAwLCAoKSA9PiBzdW1tYXJ5LnJlbW92ZSgpKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkaXYgPSAkKGA8ZGl2IGNsYXNzPVwiaXRlbS1zdW1tYXJ5XCI+JHtjaGF0RGF0YS52YWx1ZX08L2Rpdj5gKVxuICAgICAgY29uc3QgcHJvcHMgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1wcm9wZXJ0aWVzXCI+PC9kaXY+JylcbiAgICAgIC8vIGZvciAoY29uc3QgcCBvZiBjaGF0RGF0YS5wcm9wZXJ0aWVzKSB7IHByb3BzLmFwcGVuZChgPHNwYW4gY2xhc3M9XCJ0YWdcIj4ke3B9PC9zcGFuPmApIH1cbiAgICAgIGRpdi5hcHBlbmQocHJvcHMpXG4gICAgICBsaS5hcHBlbmQoZGl2LmhpZGUoKSlcbiAgICAgIGRpdi5zbGlkZURvd24oMjAwKVxuICAgIH1cbiAgICBsaS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKVxuICB9XG5cbiAgYXN5bmMgX29uSXRlbURlbGV0ZSAoZXZlbnQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xuICAgIGNvbnN0IGl0ZW1JbmRleCA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICAgIC5wYXJlbnRzKCcuaXRlbScpXG4gICAgICAuZGF0YSgnaXRlbS1pZCcpXG4gICAgaWYgKGl0ZW1JbmRleCkgYXdhaXQgdGhpcy5yZW1vdmVJdGVtKGl0ZW1JbmRleCwgY29sbGVjdGlvbk5hbWUpXG4gIH1cblxuICBhc3luYyBfb25Hcm91cEl0ZW1EZWxldGUgKGV2ZW50KSB7XG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBsaSA9IGEuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IG9sID0gbGkuY2xvc2VzdCgnLml0ZW0tbGlzdC5ncm91cCcpXG4gICAgY29uc3QgZ3JvdXBzID0gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGEuZ3JvdXBzKVxuICAgIGdyb3Vwc1tOdW1iZXIob2wuZGF0YXNldC5ncm91cCldLnNraWxscy5zcGxpY2UoXG4gICAgICBOdW1iZXIobGkuZGF0YXNldC5pdGVtSW5kZXgpLFxuICAgICAgMVxuICAgIClcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEuZ3JvdXBzJzogZ3JvdXBzIH0pXG4gIH1cblxuICBhc3luYyByZW1vdmVJdGVtIChpdGVtSWQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xuICAgIGNvbnN0IGl0ZW1JbmRleCA9IHRoaXMuaXRlbS5kYXRhLmRhdGFbY29sbGVjdGlvbk5hbWVdLmZpbmRJbmRleChzID0+IHtcbiAgICAgIHJldHVybiBzLl9pZCA9PT0gaXRlbUlkXG4gICAgfSlcbiAgICBpZiAoaXRlbUluZGV4ID4gLTEpIHtcbiAgICAgIGNvbnN0IGNvbGxlY3Rpb24gPSB0aGlzLml0ZW0uZGF0YS5kYXRhW2NvbGxlY3Rpb25OYW1lXVxuICAgICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhW2NvbGxlY3Rpb25OYW1lXSlcbiAgICAgICAgOiBbXVxuICAgICAgY29sbGVjdGlvbi5zcGxpY2UoaXRlbUluZGV4LCAxKVxuICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7IFtgZGF0YS4ke2NvbGxlY3Rpb25OYW1lfWBdOiBjb2xsZWN0aW9uIH0pXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnb2NjdXBhdGlvbiddLFxuICAgICAgd2lkdGg6IDUyMCxcbiAgICAgIGhlaWdodDogNDgwLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogJy5pdGVtJyB9XSxcbiAgICAgIHNjcm9sbFk6IFsnLnRhYi5kZXNjcmlwdGlvbiddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2aWdhdGlvbicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9vY2N1cGF0aW9uLmh0bWwnXG4gIH1cblxuICBfb25EcmFnU3RhcnQgKGV2ZW50KSB7XG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBza2lsbCA9IHRoaXMuaXRlbS5kYXRhLmRhdGEuc2tpbGxzLmZpbmQocyA9PiB7XG4gICAgICByZXR1cm4gcy5faWQgPT09IGxpLmRhdGFzZXQuaXRlbUlkXG4gICAgfSlcblxuICAgIGNvbnN0IGRyYWdEYXRhID0geyB0eXBlOiAnSXRlbScsIGRhdGE6IHNraWxsIH1cbiAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRyYWdEYXRhKSlcbiAgfVxuXG4gIGdldERhdGEgKCkge1xuICAgIGNvbnN0IGRhdGEgPSBzdXBlci5nZXREYXRhKClcblxuICAgIC8qKiBNT0RJRjogMC44LnggKiovXG4gICAgY29uc3QgaXRlbURhdGEgPSBkYXRhLmRhdGFcbiAgICBkYXRhLmRhdGEgPSBpdGVtRGF0YS5kYXRhIC8vIE1PRElGOiAwLjgueCBkYXRhLmRhdGFcbiAgICAvKioqKioqKioqKioqKioqKiovXG5cbiAgICBkYXRhLmlzT3duZWQgPSB0aGlzLml0ZW0uaXNPd25lZFxuXG4gICAgY29uc3Qgb3B0aW9ubmFsID0gW11cbiAgICBjb25zdCBtYW5kYXRvcnkgPSBbXVxuICAgIGZvciAoY29uc3QgW2tleSwgY2FyYWNdIG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgZGF0YS5kYXRhLm9jY3VwYXRpb25Ta2lsbFBvaW50c1xuICAgICkpIHtcbiAgICAgIGlmIChjYXJhYy5tdWx0aXBsaWVyKSB7XG4gICAgICAgIGNvbnN0IGNhcmFjTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShgQ0hBUkFDLiR7a2V5LnRvVXBwZXJDYXNlKCl9YClcbiAgICAgICAgaWYgKGNhcmFjLnNlbGVjdGVkICYmIGNhcmFjLm9wdGlvbmFsKSB7XG4gICAgICAgICAgb3B0aW9ubmFsLnB1c2goYCR7Y2FyYWNOYW1lfXgke2NhcmFjLm11bHRpcGxpZXJ9YClcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FyYWMuc2VsZWN0ZWQgJiYgIWNhcmFjLm9wdGlvbmFsKSB7XG4gICAgICAgICAgbWFuZGF0b3J5LnB1c2goYCR7Y2FyYWNOYW1lfXgke2NhcmFjLm11bHRpcGxpZXJ9YClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGRhdGEuc2tpbGxMaXN0RW1wdHkgPSBkYXRhLmRhdGEuc2tpbGxzLmxlbmd0aCA9PT0gMFxuICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgZGF0YS5kYXRhLnNraWxscykge1xuICAgICAgLy8gRm9yIGVhY2ggc2tpbGwgaWYgaXQncyBhIHNwZWMgYW5kIHNwYWMgbmFtZSBub3QgaW5jbHVkZWQgaW4gdGhlIG5hbWUgYWRkIGl0XG4gICAgICBpZiAoXG4gICAgICAgIHNraWxsLmRhdGEuc3BlY2lhbGl6YXRpb24gJiZcbiAgICAgICAgIXNraWxsLm5hbWUuaW5jbHVkZXMoc2tpbGwuZGF0YS5zcGVjaWFsaXphdGlvbilcbiAgICAgICkge1xuICAgICAgICBza2lsbC5kaXNwbGF5TmFtZSA9IGAke3NraWxsLmRhdGEuc3BlY2lhbGl6YXRpb259ICgke3NraWxsLm5hbWV9KWBcbiAgICAgIH0gZWxzZSBza2lsbC5kaXNwbGF5TmFtZSA9IHNraWxsLm5hbWVcbiAgICB9XG5cbiAgICBkYXRhLmRhdGEuc2tpbGxzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBhLmRpc3BsYXlOYW1lLmxvY2FsZUNvbXBhcmUoYi5kaXNwbGF5TmFtZSlcbiAgICB9KVxuXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGRhdGEuZGF0YS5ncm91cHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBkYXRhLmRhdGEuZ3JvdXBzW2luZGV4XS5pc0VtcHR5ID1cbiAgICAgICAgZGF0YS5kYXRhLmdyb3Vwc1tpbmRleF0uc2tpbGxzLmxlbmd0aCA9PT0gMFxuICAgICAgZm9yIChjb25zdCBza2lsbCBvZiBkYXRhLmRhdGEuZ3JvdXBzW2luZGV4XS5za2lsbHMpIHtcbiAgICAgICAgLy8gRm9yIGVhY2ggc2tpbGwgb2YgZWFjaCBzdWIgZ3JvdXAgaWYgaXQncyBhIHNwZWMgYW5kIHNwYWMgbmFtZSBub3QgaW5jbHVkZWQgaW4gdGhlIG5hbWUgYWRkIGl0XG4gICAgICAgIGlmIChcbiAgICAgICAgICBza2lsbC5kYXRhLnNwZWNpYWxpemF0aW9uICYmXG4gICAgICAgICAgIXNraWxsLm5hbWUuaW5jbHVkZXMoc2tpbGwuZGF0YS5zcGVjaWFsaXphdGlvbilcbiAgICAgICAgKSB7XG4gICAgICAgICAgc2tpbGwuZGlzcGxheU5hbWUgPSBgJHtza2lsbC5kYXRhLnNwZWNpYWxpemF0aW9ufSAoJHtza2lsbC5uYW1lfSlgXG4gICAgICAgIH0gZWxzZSBza2lsbC5kaXNwbGF5TmFtZSA9IHNraWxsLm5hbWVcbiAgICAgIH1cblxuICAgICAgZGF0YS5kYXRhLmdyb3Vwc1tpbmRleF0uc2tpbGxzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgcmV0dXJuIGEuZGlzcGxheU5hbWUubG9jYWxlQ29tcGFyZShiLmRpc3BsYXlOYW1lKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBkYXRhLm9jY3VwYXRpb25Qb2ludHNTdHJpbmcgPSAnJ1xuICAgIGNvbnN0IG9yU3RyaW5nID0gYCAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5PcicpfSBgXG4gICAgaWYgKG1hbmRhdG9yeS5sZW5ndGgpIGRhdGEub2NjdXBhdGlvblBvaW50c1N0cmluZyArPSBtYW5kYXRvcnkuam9pbignICsgJylcbiAgICBpZiAob3B0aW9ubmFsLmxlbmd0aCAmJiBtYW5kYXRvcnkubGVuZ3RoKSB7XG4gICAgICBkYXRhLm9jY3VwYXRpb25Qb2ludHNTdHJpbmcgKz0gYCArICgke29wdGlvbm5hbC5qb2luKG9yU3RyaW5nKX0pYFxuICAgIH1cbiAgICBpZiAob3B0aW9ubmFsLmxlbmd0aCAmJiAhbWFuZGF0b3J5Lmxlbmd0aCkge1xuICAgICAgZGF0YS5vY2N1cGF0aW9uUG9pbnRzU3RyaW5nICs9IG9wdGlvbm5hbC5qb2luKG9yU3RyaW5nKVxuICAgIH1cblxuICAgIGRhdGEuaXRlbVByb3BlcnRpZXMgPSBbXVxuXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5kYXRhLnR5cGUpKSB7XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgZGF0YS5pdGVtUHJvcGVydGllcy5wdXNoKFxuICAgICAgICAgIENPQzcub2NjdXBhdGlvblByb3BlcnRpZXNba2V5XSA/IENPQzcub2NjdXBhdGlvblByb3BlcnRpZXNba2V5XSA6IG51bGxcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cblxuICAgIGRhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICAvLyBUT0RPOiBUaGlzIGNhbiBiZSByZW1vdmVkIG9uY2UgMC43LnggaXMgcmVsZWFzZSBjaGFubmVsXG4gICAgaWYgKCFmb3JtRGF0YS5kYXRhKSBmb3JtRGF0YSA9IGV4cGFuZE9iamVjdChmb3JtRGF0YSlcblxuICAgIGlmIChmb3JtRGF0YS5kYXRhLmdyb3Vwcykge1xuICAgICAgZm9ybURhdGEuZGF0YS5ncm91cHMgPSBPYmplY3QudmFsdWVzKGZvcm1EYXRhLmRhdGE/Lmdyb3VwcyB8fCB7fSlcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLml0ZW0uZGF0YS5kYXRhLmdyb3Vwcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgZm9ybURhdGEuZGF0YS5ncm91cHNbaW5kZXhdLnNraWxscyA9IGR1cGxpY2F0ZShcbiAgICAgICAgICB0aGlzLml0ZW0uZGF0YS5kYXRhLmdyb3Vwc1tpbmRleF0uc2tpbGxzXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzdXBlci5fdXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIGR1cGxpY2F0ZSwgZXhwYW5kT2JqZWN0LCBnYW1lLCBJdGVtU2hlZXQsIG1lcmdlT2JqZWN0ICovXG5cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuLy8gaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtLmpzJztcbi8vIGltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vLi4vYWN0b3JzL2FjdG9yLmpzJztcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEl0ZW1TaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN1NldHVwU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICAvKipcbiAgICogQWN0aXZhdGUgZXZlbnQgbGlzdGVuZXJzIHVzaW5nIHRoZSBwcmVwYXJlZCBzaGVldCBIVE1MXG4gICAqIEBwYXJhbSBodG1sIHtIVE1MfSAgIFRoZSBwcmVwYXJlZCBIVE1MIG9iamVjdCByZWFkeSB0byBiZSByZW5kZXJlZCBpbnRvIHRoZSBET01cbiAgICovXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSByZXR1cm5cblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuaXRlbSAuaXRlbS1uYW1lIGg0JylcbiAgICAgIC5jbGljayhldmVudCA9PiB0aGlzLl9vbkl0ZW1TdW1tYXJ5KGV2ZW50LCAnaXRlbXMnKSlcbiAgICBodG1sLmZpbmQoJy5pdGVtLWRlbGV0ZScpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbURlbGV0ZShldmVudCwgJ2l0ZW1zJykpXG4gICAgaHRtbC5maW5kKCcuYWRkLWJpbycpLmNsaWNrKGFzeW5jICgpID0+IGF3YWl0IHRoaXMuX29uQWRkQmlvKCkpXG4gICAgaHRtbC5maW5kKCcucmVtb3ZlLXNlY3Rpb24nKS5jbGljayh0aGlzLl9vblJlbW92ZVNlY3Rpb24uYmluZCh0aGlzKSlcblxuICAgIC8vIGh0bWwuZmluZCgnLml0ZW0tZWRpdCcpLmNsaWNrKGFzeW5jIGV2ID0+IHtcbiAgICAvLyAgIGNvbnN0IGxpID0gJChldi5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpO1xuICAgIC8vICAgY29uc3QgaXRlbURhdGEgPSB0aGlzLmdldEl0ZW0obGkuZGF0YSgnaXRlbUlkJyksICdza2lsbHMnKTtcbiAgICAvLyAgIGRlbGV0ZSBpdGVtRGF0YS5faWQ7XG4gICAgLy8gICBkZWxldGUgaXRlbURhdGEuZm9sZGVyO1xuICAgIC8vICAgY29uc3QgaXRlbSA9IG5ldyBDb0M3SXRlbShpdGVtRGF0YSk7XG4gICAgLy8gICBhd2FpdCBpdGVtLnNoZWV0LnJlbmRlcih0cnVlKTsgLy9tYXJjaGUgcGFzICEhXG4gICAgLy8gfSk7XG4gIH1cblxuICBhc3luYyBfb25Ecm9wIChldmVudCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICBjb25zdCBkYXRhTGlzdCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ2V0RGF0YUZyb21Ecm9wRXZlbnQoZXZlbnQsICdJdGVtJylcblxuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSB0aGlzLml0ZW0uZGF0YS5kYXRhW2NvbGxlY3Rpb25OYW1lXVxuICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLmRhdGEuZGF0YVtjb2xsZWN0aW9uTmFtZV0pXG4gICAgICA6IFtdXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGFMaXN0KSB7XG4gICAgICBpZiAoIWl0ZW0gfHwgIWl0ZW0uZGF0YSkgY29udGludWVcbiAgICAgIGlmIChcbiAgICAgICAgIVsnaXRlbScsICd3ZWFwb24nLCAnc2tpbGwnLCAnYm9vaycsICdzcGVsbCddLmluY2x1ZGVzKGl0ZW0uZGF0YS50eXBlKVxuICAgICAgKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIGlmICghQ29DN0l0ZW0uaXNBbnlTcGVjKGl0ZW0pKSB7XG4gICAgICAgIGlmIChjb2xsZWN0aW9uLmZpbmQoZWwgPT4gZWwubmFtZSA9PT0gaXRlbS5kYXRhLm5hbWUpKSB7XG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb2xsZWN0aW9uLnB1c2goZHVwbGljYXRlKGl0ZW0uZGF0YSkpXG4gICAgfVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyBbYGRhdGEuJHtjb2xsZWN0aW9uTmFtZX1gXTogY29sbGVjdGlvbiB9KVxuICB9XG5cbiAgYXN5bmMgX29uUmVtb3ZlU2VjdGlvbiAoZXZlbnQpIHtcbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGRpdiA9IGEuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGJpbyA9IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhLmJpb1NlY3Rpb25zKVxuICAgIGJpby5zcGxpY2UoTnVtYmVyKGRpdi5kYXRhc2V0LmluZGV4KSwgMSlcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEuYmlvU2VjdGlvbnMnOiBiaW8gfSlcbiAgfVxuXG4gIGFzeW5jIF9vbkFkZEJpbyAoKSB7XG4gICAgY29uc3QgYmlvID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5iaW9TZWN0aW9uc1xuICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLmRhdGEuZGF0YS5iaW9TZWN0aW9ucylcbiAgICAgIDogW11cbiAgICBiaW8ucHVzaChudWxsKVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5iaW9TZWN0aW9ucyc6IGJpbyB9KVxuICB9XG5cbiAgX29uSXRlbVN1bW1hcnkgKGV2ZW50LCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtID0gdGhpcy5pdGVtLmRhdGEuZGF0YVtjb2xsZWN0aW9uTmFtZV0uZmluZChzID0+IHtcbiAgICAgIHJldHVybiBzLl9pZCA9PT0gbGkuZGF0YSgnaXRlbS1pZCcpXG4gICAgfSlcbiAgICBjb25zdCBjaGF0RGF0YSA9IGl0ZW0uZGF0YS5kZXNjcmlwdGlvblxuXG4gICAgLy8gVG9nZ2xlIHN1bW1hcnlcbiAgICBpZiAobGkuaGFzQ2xhc3MoJ2V4cGFuZGVkJykpIHtcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSBsaS5jaGlsZHJlbignLml0ZW0tc3VtbWFyeScpXG4gICAgICBzdW1tYXJ5LnNsaWRlVXAoMjAwLCAoKSA9PiBzdW1tYXJ5LnJlbW92ZSgpKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkaXYgPSAkKGA8ZGl2IGNsYXNzPVwiaXRlbS1zdW1tYXJ5XCI+JHtjaGF0RGF0YS52YWx1ZX08L2Rpdj5gKVxuICAgICAgY29uc3QgcHJvcHMgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1wcm9wZXJ0aWVzXCI+PC9kaXY+JylcbiAgICAgIC8vIGZvciAoY29uc3QgcCBvZiBjaGF0RGF0YS5wcm9wZXJ0aWVzKSB7IHByb3BzLmFwcGVuZChgPHNwYW4gY2xhc3M9XCJ0YWdcIj4ke3B9PC9zcGFuPmApIH1cbiAgICAgIGRpdi5hcHBlbmQocHJvcHMpXG4gICAgICBsaS5hcHBlbmQoZGl2LmhpZGUoKSlcbiAgICAgIGRpdi5zbGlkZURvd24oMjAwKVxuICAgIH1cbiAgICBsaS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKVxuICB9XG5cbiAgYXN5bmMgX29uSXRlbURlbGV0ZSAoZXZlbnQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xuICAgIGNvbnN0IGl0ZW1JbmRleCA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICAgIC5wYXJlbnRzKCcuaXRlbScpXG4gICAgICAuZGF0YSgnaXRlbS1pZCcpXG4gICAgaWYgKGl0ZW1JbmRleCkgYXdhaXQgdGhpcy5yZW1vdmVJdGVtKGl0ZW1JbmRleCwgY29sbGVjdGlvbk5hbWUpXG4gIH1cblxuICBnZXRJdGVtIChpdGVtSWQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xuICAgIHJldHVybiB0aGlzLml0ZW0uZGF0YS5kYXRhW2NvbGxlY3Rpb25OYW1lXS5maW5kKHMgPT4ge1xuICAgICAgcmV0dXJuIHMuX2lkID09PSBpdGVtSWRcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgcmVtb3ZlSXRlbSAoaXRlbUlkLCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcbiAgICBjb25zdCBpdGVtSW5kZXggPSB0aGlzLml0ZW0uZGF0YS5kYXRhW2NvbGxlY3Rpb25OYW1lXS5maW5kSW5kZXgocyA9PiB7XG4gICAgICByZXR1cm4gcy5faWQgPT09IGl0ZW1JZFxuICAgIH0pXG4gICAgaWYgKGl0ZW1JbmRleCA+IC0xKSB7XG4gICAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5pdGVtLmRhdGEuZGF0YVtjb2xsZWN0aW9uTmFtZV1cbiAgICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLmRhdGEuZGF0YVtjb2xsZWN0aW9uTmFtZV0pXG4gICAgICAgIDogW11cbiAgICAgIGNvbGxlY3Rpb24uc3BsaWNlKGl0ZW1JbmRleCwgMSlcbiAgICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyBbYGRhdGEuJHtjb2xsZWN0aW9uTmFtZX1gXTogY29sbGVjdGlvbiB9KVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ3NldHVwJ10sXG4gICAgICB3aWR0aDogNTIwLFxuICAgICAgaGVpZ2h0OiA1MzAsXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLml0ZW0nIH1dLFxuICAgICAgc2Nyb2xsWTogWycudGFiLmRlc2NyaXB0aW9uJ10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL3NldHVwLmh0bWwnXG4gIH1cblxuICBfb25EcmFnU3RhcnQgKGV2ZW50KSB7XG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBza2lsbCA9IHRoaXMuaXRlbS5kYXRhLmRhdGEuaXRlbXMuZmluZChzID0+IHtcbiAgICAgIHJldHVybiBzLl9pZCA9PT0gbGkuZGF0YXNldC5pdGVtSWRcbiAgICB9KVxuXG4gICAgY29uc3QgZHJhZ0RhdGEgPSB7IHR5cGU6ICdJdGVtJywgZGF0YTogc2tpbGwgfVxuICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZHJhZ0RhdGEpKVxuICB9XG5cbiAgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3QgZGF0YSA9IHN1cGVyLmdldERhdGEoKVxuXG4gICAgZGF0YS5pc093bmVkID0gdGhpcy5pdGVtLmlzT3duZWRcblxuICAgIC8qKiBNT0RJRjogMC44LnggKiovXG4gICAgY29uc3QgaXRlbURhdGEgPSBkYXRhLmRhdGFcbiAgICBkYXRhLmRhdGEgPSBpdGVtRGF0YS5kYXRhIC8vIE1PRElGOiAwLjgueCBkYXRhLmRhdGFcbiAgICAvKioqKioqKioqKioqKioqKiovXG5cbiAgICAvLyBkYXRhLmRhdGEuaXRlbXMgPSBkdXBsaWNhdGUoIGRhdGEuZGF0YS5za2lsbHMpO1xuICAgIC8vIHRoaXMuaXRlbS51cGRhdGUoIHsgWydkYXRhLml0ZW1zJ10gOiBkdXBsaWNhdGUoIGRhdGEuZGF0YS5za2lsbHMpfSk7XG5cbiAgICBkYXRhLnNraWxscyA9IGRhdGEuZGF0YS5pdGVtcy5maWx0ZXIoaXQgPT4gaXQudHlwZSA9PT0gJ3NraWxsJylcbiAgICBkYXRhLm90aGVySXRlbXMgPSBkYXRhLmRhdGEuaXRlbXMuZmlsdGVyKGl0ID0+IGl0LnR5cGUgIT09ICdza2lsbCcpXG5cbiAgICBkYXRhLnNraWxsTGlzdEVtcHR5ID0gZGF0YS5za2lsbHMubGVuZ3RoID09PSAwXG4gICAgZGF0YS5pdGVtc0xpc3RFbXB0eSA9IGRhdGEub3RoZXJJdGVtcy5sZW5ndGggPT09IDBcbiAgICBmb3IgKGNvbnN0IHNraWxsIG9mIGRhdGEuc2tpbGxzKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHNraWxsLmRhdGEuc3BlY2lhbGl6YXRpb24gJiZcbiAgICAgICAgIXNraWxsLm5hbWUuaW5jbHVkZXMoc2tpbGwuZGF0YS5zcGVjaWFsaXphdGlvbilcbiAgICAgICkge1xuICAgICAgICBza2lsbC5kaXNwbGF5TmFtZSA9IGAke3NraWxsLmRhdGEuc3BlY2lhbGl6YXRpb259ICgke3NraWxsLm5hbWV9KWBcbiAgICAgIH0gZWxzZSBza2lsbC5kaXNwbGF5TmFtZSA9IHNraWxsLm5hbWVcbiAgICB9XG5cbiAgICBkYXRhLnNraWxscy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICByZXR1cm4gYS5kaXNwbGF5TmFtZS5sb2NhbGVDb21wYXJlKGIuZGlzcGxheU5hbWUpXG4gICAgfSlcblxuICAgIGRhdGEuZXJhcyA9IHt9XG4gICAgZGF0YS5pdGVtUHJvcGVydGllcyA9IFtdXG5cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmVyYXMpKSB7XG4gICAgICBpZiAoIWRhdGEuZGF0YS5lcmFzW2tleV0pIHtcbiAgICAgICAgZGF0YS5kYXRhLmVyYXNba2V5XSA9IHt9XG4gICAgICAgIGRhdGEuZGF0YS5lcmFzW2tleV0uc2VsZWN0ZWQgPSBmYWxzZVxuICAgICAgfVxuICAgICAgZGF0YS5kYXRhLmVyYXNba2V5XS5uYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlKVxuICAgICAgZGF0YS5kYXRhLmVyYXNba2V5XS5pbnRlcm5hbE5hbWUgPSB2YWx1ZVxuICAgIH1cblxuICAgIGZvciAoY29uc3QgZW50cnkgb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5kYXRhLmVyYXMpKSB7XG4gICAgICBpZiAoZW50cnlbMV0uc2VsZWN0ZWQpIGRhdGEuaXRlbVByb3BlcnRpZXMucHVzaChlbnRyeVsxXS5uYW1lKVxuICAgIH1cblxuICAgIGRhdGEub25lQmxvY2tCYWNrU3RvcnkgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvbmVCbG9ja0JhY2tzdG9yeScpXG5cbiAgICBkYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgLy8gVE9ETzogVGhpcyBjYW4gYmUgcmVtb3ZlZCBvbmNlIDAuNy54IGlzIHJlbGVhc2UgY2hhbm5lbFxuICAgIGlmICghZm9ybURhdGEuZGF0YSkgZm9ybURhdGEgPSBleHBhbmRPYmplY3QoZm9ybURhdGEpXG5cbiAgICBpZiAoZm9ybURhdGEuZGF0YS5iaW9TZWN0aW9ucykge1xuICAgICAgZm9ybURhdGEuZGF0YS5iaW9TZWN0aW9ucyA9IE9iamVjdC52YWx1ZXMoXG4gICAgICAgIGZvcm1EYXRhLmRhdGE/LmJpb1NlY3Rpb25zIHx8IFtdXG4gICAgICApXG4gICAgICAvLyBmb3IobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLml0ZW0uZGF0YS5kYXRhLmJpb1NlY3Rpb25zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgLy8gICBmb3JtRGF0YS5kYXRhLmJpb1NlY3Rpb25zW2luZGV4XSA9IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhLmJpb1NlY3Rpb25zW2luZGV4XSk7XG4gICAgICAvLyB9XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQ/Lm5hbWUgPT09ICdkYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMuZW5hYmxlZCcpIHtcbiAgICAgIGZvcm1EYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnJvbGxzLmVuYWJsZWQgPSAhZXZlbnQuY3VycmVudFRhcmdldC5jaGVja2VkXG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQ/Lm5hbWUgPT09ICdkYXRhLmNoYXJhY3RlcmlzdGljcy5yb2xscy5lbmFibGVkJykge1xuICAgICAgZm9ybURhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLmVuYWJsZWQgPSAhZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgICAuY2hlY2tlZFxuICAgIH1cblxuICAgIHN1cGVyLl91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCAqL1xuXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3U2tpbGxTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIGNvbnN0cnVjdG9yICguLi5hcmdzKSB7XG4gICAgc3VwZXIoLi4uYXJncylcbiAgICB0aGlzLl9zaGVldFRhYiA9ICdpdGVtcydcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgU2ltcGxlIEl0ZW0gU2hlZXRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ2l0ZW0nXSxcbiAgICAgIHdpZHRoOiA1MjAsXG4gICAgICBoZWlnaHQ6IDQ4MCxcbiAgICAgIHNjcm9sbFk6IFsnLnRhYi5kZXNjcmlwdGlvbiddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2aWdhdGlvbicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gYHN5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvJHt0aGlzLml0ZW0uZGF0YS50eXBlfS1zaGVldC5odG1sYFxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKlxuICAgKiBQcmVwYXJlIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgSXRlbSBzaGVldFxuICAgKiBUaGUgcHJlcGFyZWQgZGF0YSBvYmplY3QgY29udGFpbnMgYm90aCB0aGUgYWN0b3IgZGF0YSBhcyB3ZWxsIGFzIGFkZGl0aW9uYWwgc2hlZXQgb3B0aW9uc1xuICAgKi9cbiAgZ2V0RGF0YSAoKSB7XG4gICAgLy8gdGhpcy5pdGVtLmNoZWNrU2tpbGxQcm9wZXJ0aWVzKCk7XG4gICAgY29uc3QgZGF0YSA9IHN1cGVyLmdldERhdGEoKVxuXG4gICAgLyoqIE1PRElGOiAwLjgueCAqKi9cbiAgICBjb25zdCBpdGVtRGF0YSA9IGRhdGEuZGF0YVxuICAgIGRhdGEuZGF0YSA9IGl0ZW1EYXRhLmRhdGEgLy8gTU9ESUY6IDAuOC54IGRhdGEuZGF0YVxuICAgIC8qKioqKioqKioqKioqKioqKi9cblxuICAgIGRhdGEuaGFzT3duZXIgPSB0aGlzLml0ZW0uYWN0b3IgIT09IG51bGxcblxuICAgIGlmICh0aGlzLml0ZW0uZGF0YS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICBkYXRhLl9wcm9wZXJ0aWVzID0gW11cbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuc2tpbGxQcm9wZXJ0aWVzKSkge1xuICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IHt9XG4gICAgICAgIHByb3BlcnR5LmlkID0ga2V5XG4gICAgICAgIHByb3BlcnR5Lm5hbWUgPSB2YWx1ZVxuICAgICAgICBwcm9wZXJ0eS5pc0VuYWJsZWQgPSB0aGlzLml0ZW0uZGF0YS5kYXRhLnByb3BlcnRpZXNba2V5XSA9PT0gdHJ1ZVxuICAgICAgICBkYXRhLl9wcm9wZXJ0aWVzLnB1c2gocHJvcGVydHkpXG4gICAgICB9XG5cbiAgICAgIGRhdGEuX2VyYXMgPSBbXVxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5lcmFzKSkge1xuICAgICAgICBjb25zdCBlcmEgPSB7fVxuICAgICAgICBlcmEuaWQgPSBrZXlcbiAgICAgICAgZXJhLm5hbWUgPSB2YWx1ZVxuICAgICAgICBlcmEuaXNFbmFibGVkID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5lcmFzW2tleV0gPT09IHRydWVcbiAgICAgICAgZGF0YS5fZXJhcy5wdXNoKGVyYSlcbiAgICAgIH1cblxuICAgICAgZGF0YS5pc1NwZWNpYWxpemVkID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLnNwZWNpYWxcbiAgICAgIGRhdGEuY2FuTW9kaWZ5U3BlYyA9XG4gICAgICAgICF0aGlzLml0ZW0uZGF0YS5kYXRhLnByb3BlcnRpZXMuZmlyZWFybSAmJlxuICAgICAgICAhdGhpcy5pdGVtLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmZpZ2h0aW5nXG4gICAgfVxuXG4gICAgZGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIEFjdGl2YXRlIGV2ZW50IGxpc3RlbmVycyB1c2luZyB0aGUgcHJlcGFyZWQgc2hlZXQgSFRNTFxuICAgKiBAcGFyYW0gaHRtbCB7SFRNTH0gICBUaGUgcHJlcGFyZWQgSFRNTCBvYmplY3QgcmVhZHkgdG8gYmUgcmVuZGVyZWQgaW50byB0aGUgRE9NXG4gICAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgLy8gRXZlcnl0aGluZyBiZWxvdyBoZXJlIGlzIG9ubHkgbmVlZGVkIGlmIHRoZSBzaGVldCBpcyBlZGl0YWJsZVxuICAgIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSByZXR1cm5cblxuICAgIGh0bWwuZmluZCgnLnRvZ2dsZS1zd2l0Y2gnKS5jbGljayh0aGlzLl9vbkNsaWNrVG9nZ2xlLmJpbmQodGhpcykpXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIGFzeW5jIF9vbkNsaWNrVG9nZ2xlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBwcm9wZXJ0eUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcudG9nZ2xlLXN3aXRjaCcpLmRhdGFzZXRcbiAgICAgIC5wcm9wZXJ0eVxuICAgIGF3YWl0IHRoaXMuaXRlbS50b2dnbGVQcm9wZXJ0eShcbiAgICAgIHByb3BlcnR5SWQsXG4gICAgICBldmVudC5tZXRhS2V5IHx8XG4gICAgICAgIGV2ZW50LmN0cmxLZXkgfHxcbiAgICAgICAgZXZlbnQua2V5Q29kZSA9PT0gOTEgfHxcbiAgICAgICAgZXZlbnQua2V5Q29kZSA9PT0gMjI0XG4gICAgKVxuICB9XG5cbiAgLy8gYXN5bmMgX29uQ2xpY2tBdHRyaWJ1dGVDb250cm9sKGV2ZW50KSB7XG4gIC8vICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgLy8gICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldDtcbiAgLy8gICBjb25zdCBhY3Rpb24gPSBhLmRhdGFzZXQuYWN0aW9uO1xuICAvLyAgIGNvbnN0IGF0dHJzID0gdGhpcy5vYmplY3QuZGF0YS5kYXRhLmF0dHJpYnV0ZXM7XG4gIC8vICAgY29uc3QgZm9ybSA9IHRoaXMuZm9ybTtcblxuICAvLyAgIC8vIEFkZCBuZXcgYXR0cmlidXRlXG4gIC8vICAgaWYgKGFjdGlvbiA9PT0gXCJjcmVhdGVcIikge1xuICAvLyAgICAgY29uc3QgbmsgPSBPYmplY3Qua2V5cyhhdHRycykubGVuZ3RoICsgMTtcbiAgLy8gICAgIGxldCBuZXdLZXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAvLyAgICAgbmV3S2V5LmlubmVySFRNTCA9IGA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwiZGF0YS5hdHRyaWJ1dGVzLmF0dHIke25rfS5rZXlcIiB2YWx1ZT1cImF0dHIke25rfVwiLz5gO1xuICAvLyAgICAgbmV3S2V5ID0gbmV3S2V5LmNoaWxkcmVuWzBdO1xuICAvLyAgICAgZm9ybS5hcHBlbmRDaGlsZChuZXdLZXkpO1xuICAvLyAgICAgYXdhaXQgdGhpcy5fb25TdWJtaXQoZXZlbnQpO1xuICAvLyAgIH1cblxuICAvLyAgIC8vIFJlbW92ZSBleGlzdGluZyBhdHRyaWJ1dGVcbiAgLy8gICBlbHNlIGlmIChhY3Rpb24gPT09IFwiZGVsZXRlXCIpIHtcbiAgLy8gICAgIGNvbnN0IGxpID0gYS5jbG9zZXN0KFwiLmF0dHJpYnV0ZVwiKTtcbiAgLy8gICAgIGxpLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQobGkpO1xuICAvLyAgICAgYXdhaXQgdGhpcy5fb25TdWJtaXQoZXZlbnQpO1xuICAvLyAgIH1cbiAgLy8gfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIEltcGxlbWVudCB0aGUgX3VwZGF0ZU9iamVjdCBtZXRob2QgYXMgcmVxdWlyZWQgYnkgdGhlIHBhcmVudCBjbGFzcyBzcGVjXG4gICAqIFRoaXMgZGVmaW5lcyBob3cgdG8gdXBkYXRlIHRoZSBzdWJqZWN0IG9mIHRoZSBmb3JtIHdoZW4gdGhlIGZvcm0gaXMgc3VibWl0dGVkXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICAvLyBfdXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSkge1xuICAvLyAgIC8vIEhhbmRsZSB0aGUgZnJlZS1mb3JtIGF0dHJpYnV0ZXMgbGlzdFxuICAvLyAgIGNvbnN0IGZvcmQgPSBleHBhbmRPYmplY3QoZm9ybURhdGEpO1xuICAvLyAgIGNvbnN0IGZvcm1BdHRycyA9IGV4cGFuZE9iamVjdChmb3JtRGF0YSkuZGF0YS5hdHRyaWJ1dGVzIHx8IHt9O1xuICAvLyAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBPYmplY3QudmFsdWVzKGZvcm1BdHRycykucmVkdWNlKChvYmosIHYpID0+IHtcbiAgLy8gICAgIGxldCBrID0gdltcImtleVwiXS50cmltKCk7XG4gIC8vICAgICBpZiAoL1tcXHNcXC5dLy50ZXN0KGspKSByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihcIkF0dHJpYnV0ZSBrZXlzIG1heSBub3QgY29udGFpbiBzcGFjZXMgb3IgcGVyaW9kc1wiKTtcbiAgLy8gICAgIGRlbGV0ZSB2W1wia2V5XCJdO1xuICAvLyAgICAgb2JqW2tdID0gdjtcbiAgLy8gICAgIHJldHVybiBvYmo7XG4gIC8vICAgfSwge30pO1xuXG4gIC8vICAgLy8gUmVtb3ZlIGF0dHJpYnV0ZXMgd2hpY2ggYXJlIG5vIGxvbmdlciB1c2VkXG4gIC8vICAgZm9yIChsZXQgayBvZiBPYmplY3Qua2V5cyh0aGlzLm9iamVjdC5kYXRhLmRhdGEuYXR0cmlidXRlcykpIHtcbiAgLy8gICAgIGlmICghYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShrKSkgYXR0cmlidXRlc1tgLT0ke2t9YF0gPSBudWxsO1xuICAvLyAgIH1cblxuICAvLyAgIC8vIFJlLWNvbWJpbmUgZm9ybURhdGFcbiAgLy8gICBmb3JtRGF0YSA9IE9iamVjdC5lbnRyaWVzKGZvcm1EYXRhKS5maWx0ZXIoZSA9PiAhZVswXS5zdGFydHNXaXRoKFwiZGF0YS5hdHRyaWJ1dGVzXCIpKS5yZWR1Y2UoKG9iaiwgZSkgPT4ge1xuICAvLyAgICAgb2JqW2VbMF1dID0gZVsxXTtcbiAgLy8gICAgIHJldHVybiBvYmo7XG4gIC8vICAgfSwgeyBfaWQ6IHRoaXMub2JqZWN0Ll9pZCwgXCJkYXRhLmF0dHJpYnV0ZXNcIjogYXR0cmlidXRlcyB9KTtcblxuICAvLyAgIC8vIFVwZGF0ZSB0aGUgSXRlbVxuICAvLyAgIHJldHVybiB0aGlzLm9iamVjdC51cGRhdGUoZm9ybURhdGEpO1xuICAvLyB9XG59XG4iLCIvKiBnbG9iYWwgJCwgZ2FtZSwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCAqL1xuXG5leHBvcnQgY2xhc3MgQ29DN1NwZWxsU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9zcGVsbC9tYWluLmh0bWwnLFxuICAgICAgY2xhc3NlczogWydjb2M3JywgJ2l0ZW0nLCAnc3BlbGwnXSxcbiAgICAgIHdpZHRoOiA1MDAsXG4gICAgICBoZWlnaHQ6ICdhdXRvJyxcbiAgICAgIHJlc2l6YWJsZTogZmFsc2UsXG4gICAgICBzY3JvbGxZOiBbJy5ib2R5J10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IGRhdGEgPSBzdXBlci5nZXREYXRhKClcbiAgICBjb25zdCBpdGVtRGF0YSA9IGRhdGEuZGF0YVxuICAgIGRhdGEuZGF0YSA9IGl0ZW1EYXRhLmRhdGFcbiAgICBkYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIGh0bWwuZmluZCgnLm9wdGlvbicpLmNsaWNrKGV2ZW50ID0+IHRoaXMubW9kaWZ5VHlwZShldmVudCkpXG4gICAgaHRtbC5maW5kKCcjY2FzdC1zcGVsbCcpLmNsaWNrKGV2ZW50ID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgIHRoaXMuaXRlbS5jYXN0KClcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSB0aGUgY2hlY2tib3hlcyBmb3IgdHlwZSB3aGVuIHVzZXIgY2xpY2tzIG9uIHRoZSBjb3JyZXNwb25kaW5nXG4gICAqIGxhYmVsLCBub3Qgc3VyZSBpZiB0aGlzIHdvcmtzIG9uIGVuZ2luZXMgb3RoZXIgdGhhbiBWOFxuICAgKiBAcGFyYW0ge2pRdWVyeX0gZXZlbnQgQHNlZSBhY3RpdmF0ZUxpc3RlbmVyc1xuICAgKiBAcmV0dXJucyB7alF1ZXJ5LkV2ZW50fSBjbGlja1xuICAgKi9cbiAgbW9kaWZ5VHlwZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLyoqIFByZXZlbnRzIHByb3BhZ2F0aW9uIG9mIHRoZSBzYW1lIGV2ZW50IGZyb20gYmVpbmcgY2FsbGVkICovXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBjb25zdCB0b2dnbGVTd2l0Y2ggPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgcmV0dXJuIHRvZ2dsZVN3aXRjaC5wcmV2KCkudHJpZ2dlcignY2xpY2snKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCAqL1xuXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuLy8gaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi8uLi9hY3RvcnMvYWN0b3IuanMnO1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3U3RhdHVzU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICAvKipcbiAgICpcbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ3N0YXR1cyddLFxuICAgICAgd2lkdGg6IDUyMCxcbiAgICAgIGhlaWdodDogNDgwLFxuICAgICAgc2Nyb2xsWTogWycudGFiLmRlc2NyaXB0aW9uJ10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKi9cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvc3RhdHVzLmh0bWwnXG4gIH1cblxuICAvKiBQcmVwYXJlIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgSXRlbSBzaGVldFxuICAgKiBUaGUgcHJlcGFyZWQgZGF0YSBvYmplY3QgY29udGFpbnMgYm90aCB0aGUgYWN0b3IgZGF0YSBhcyB3ZWxsIGFzIGFkZGl0aW9uYWwgc2hlZXQgb3B0aW9uc1xuICAgKi9cbiAgZ2V0RGF0YSAoKSB7XG4gICAgLy8gdGhpcy5pdGVtLmNoZWNrU2tpbGxQcm9wZXJ0aWVzKCk7XG4gICAgY29uc3QgZGF0YSA9IHN1cGVyLmdldERhdGEoKVxuXG4gICAgLyoqIE1PRElGOiAwLjgueCAqKi9cbiAgICBjb25zdCBpdGVtRGF0YSA9IGRhdGEuZGF0YVxuICAgIGRhdGEuZGF0YSA9IGl0ZW1EYXRhLmRhdGEgLy8gTU9ESUY6IDAuOC54IGRhdGEuZGF0YVxuICAgIC8qKioqKioqKioqKioqKioqKi9cblxuICAgIGRhdGEuaXRlbVByb3BlcnRpZXMgPSBbXVxuXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5kYXRhLnR5cGUpKSB7XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgZGF0YS5pdGVtUHJvcGVydGllcy5wdXNoKFxuICAgICAgICAgIENPQzcuc3RhdHVzVHlwZVtrZXldID8gQ09DNy5zdGF0dXNUeXBlW2tleV0gOiBudWxsXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBkYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICByZXR1cm4gZGF0YVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCAqL1xuXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuLy8gaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi8uLi9hY3RvcnMvYWN0b3IuanMnO1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3VGFsZW50U2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICAvKipcbiAgICpcbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ3RhbGVudCddLFxuICAgICAgd2lkdGg6IDUyMCxcbiAgICAgIGhlaWdodDogNDgwLFxuICAgICAgc2Nyb2xsWTogWycudGFiLmRlc2NyaXB0aW9uJ10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKi9cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvdGFsZW50Lmh0bWwnXG4gIH1cblxuICAvKiBQcmVwYXJlIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgSXRlbSBzaGVldFxuICAgKiBUaGUgcHJlcGFyZWQgZGF0YSBvYmplY3QgY29udGFpbnMgYm90aCB0aGUgYWN0b3IgZGF0YSBhcyB3ZWxsIGFzIGFkZGl0aW9uYWwgc2hlZXQgb3B0aW9uc1xuICAgKi9cbiAgZ2V0RGF0YSAoKSB7XG4gICAgLy8gdGhpcy5pdGVtLmNoZWNrU2tpbGxQcm9wZXJ0aWVzKCk7XG4gICAgY29uc3QgZGF0YSA9IHN1cGVyLmdldERhdGEoKVxuXG4gICAgLyoqIE1PRElGOiAwLjgueCAqKi9cbiAgICBjb25zdCBpdGVtRGF0YSA9IGRhdGEuZGF0YVxuICAgIGRhdGEuZGF0YSA9IGl0ZW1EYXRhLmRhdGEgLy8gTU9ESUY6IDAuOC54IGRhdGEuZGF0YVxuICAgIC8qKioqKioqKioqKioqKioqKi9cblxuICAgIGRhdGEuaXRlbVByb3BlcnRpZXMgPSBbXVxuXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5kYXRhLnR5cGUpKSB7XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgZGF0YS5pdGVtUHJvcGVydGllcy5wdXNoKFxuICAgICAgICAgIENPQzcudGFsZW50VHlwZVtrZXldID8gQ09DNy50YWxlbnRUeXBlW2tleV0gOiBudWxsXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBkYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICByZXR1cm4gZGF0YVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZHVwbGljYXRlLCBleHBhbmRPYmplY3QsIGZsYXR0ZW5PYmplY3QsIEZvcm1EYXRhRXh0ZW5kZWQsIGdhbWUsIG1lcmdlT2JqZWN0LCB1aSAqL1xuXG5pbXBvcnQgeyBDb0M3QWN0b3JTaGVldCB9IGZyb20gJy4vYmFzZS5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdWZWhpY2xlU2hlZXQgZXh0ZW5kcyBDb0M3QWN0b3JTaGVldCB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0VjInLCAnYWN0b3InLCAnaXRlbScsICd2ZWhpY2xlJ10sXG4gICAgICB3aWR0aDogNTIwLFxuICAgICAgaGVpZ2h0OiA0MjAsXG4gICAgICByZXNpemFibGU6IHRydWUsXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3ZlaGljbGUuaHRtbCcsXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLmFjdG9yJywgZHJvcFNlbGVjdG9yOiAnLmRyb3Bab25lJyB9XSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXhwZXJpbWVudGFsRmVhdHVyZXNXYXJuaW5nJylcbiAgICApXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuXG4gICAgZGF0YS5wcm9wZXJ0aWVzID0gW11cbiAgICBpZiAodGhpcy5hY3Rvci5kYXRhLmRhdGEucHJvcGVydGllcy5hcm1lZCkge1xuICAgICAgZGF0YS5wcm9wZXJ0aWVzLnB1c2goZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFybWVkVmVoaWNsZScpKVxuICAgIH1cbiAgICBkYXRhLmFjdG9yID0gdGhpcy5hY3RvclxuXG4gICAgY29uc3QgZXhwYW5kZWQgPSB0aGlzLmFjdG9yLmdldEZsYWcoJ0NvQzcnLCAnZXhwYW5kZWQnKVxuICAgIGlmICh1bmRlZmluZWQgPT09IGV4cGFuZGVkKSBkYXRhLmV4cGFuZGVkID0gdHJ1ZVxuICAgIGVsc2UgZGF0YS5leHBhbmRlZCA9IGV4cGFuZGVkXG4gICAgaWYgKGRhdGEuZXhwYW5kZWQpIHtcbiAgICAgIGRhdGEub3B0aW9ucy5oZWlnaHQgPSA0MjBcbiAgICB9IGVsc2UgZGF0YS5vcHRpb25zLmhlaWdodCA9ICdhdXRvJ1xuXG4gICAgLy8gZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEuZGF0YS50eXBlKSkge1xuICAgIC8vICAgaWYoIHZhbHVlKSBkYXRhLml0ZW1Qcm9wZXJ0aWVzLnB1c2goIENPQzcuYm9va1R5cGVba2V5XT9DT0M3LmJvb2tUeXBlW2tleV06bnVsbCk7XG4gICAgLy8gfVxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5maW5kKCcuYWRkLWFybW9yJykuY2xpY2soYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5fb25BZGRBcm1vcigpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcucmVtb3ZlLWFybW9yJylcbiAgICAgIC5jbGljayhhc3luYyBldmVudCA9PiBhd2FpdCB0aGlzLl9vblJlbW92ZUFybW9yKGV2ZW50KSlcbiAgICBodG1sLmZpbmQoJy5leHBhbmQtYnV0dG9uJykuY2xpY2sodGhpcy5fb25Ub2dnbGVFeHBhbmQuYmluZCh0aGlzKSlcbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXG4gICAgLy8gaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVybjtcbiAgICAvLyBodG1sLm9uKCdkcm9wJywgKGV2ZW50KSA9PiB0aGlzLl9vbkRyb3AoZXZlbnQpKTtcbiAgICAvLyBodG1sLmZpbmQoJy5zcGVsbCAuc3BlbGwtbmFtZSBoNCcpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uU3BlbGxTdW1tYXJ5KGV2ZW50KSk7XG4gICAgLy8gaHRtbC5maW5kKCcuaXRlbS1kZWxldGUnKS5jbGljayh0aGlzLl9vblNwZWxsRGVsZXRlLmJpbmQodGhpcykpO1xuICB9XG5cbiAgYXN5bmMgX29uVG9nZ2xlRXhwYW5kICgpIHtcbiAgICBjb25zdCBleHBhbmRlZCA9IHRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdleHBhbmRlZCcpXG4gICAgaWYgKGV4cGFuZGVkKSB7XG4gICAgICB0aGlzLm9sZFNpemUgPSB0aGlzLnBvc2l0aW9uLmhlaWdodFxuICAgICAgdGhpcy5wb3NpdGlvbi5oZWlnaHQgPSAnYXV0bycgLy8gUmVzZXQgdGhlIHN0b3JlZCBwb3NpdGlvbiB0byBmb3JjZSB0byByZWNhbGN1bGF0ZSB3aW5kb3cgc2l6ZSBUT0RPOiBTdG9yZSBwcmV2aW91cyBwb3NpdGlvbiB0byByZXN0b3JlIGl0IGluc3RlYWQgb2YgYXV0b1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnBvc2l0aW9uLmhlaWdodCA9IHRoaXMub2xkU2l6ZSB8fCA0MjAgLy8gUmVzZXQgdGhlIHN0b3JlZCBwb3NpdGlvbiB0byBmb3JjZSB0byByZWNhbGN1bGF0ZSB3aW5kb3cgc2l6ZSBUT0RPOiBTdG9yZSBwcmV2aW91cyBwb3NpdGlvbiB0byByZXN0b3JlIGl0IGluc3RlYWQgb2YgYXV0b1xuICAgIH1cbiAgICBhd2FpdCB0aGlzLmFjdG9yLnNldEZsYWcoJ0NvQzcnLCAnZXhwYW5kZWQnLCAhZXhwYW5kZWQpXG4gIH1cblxuICBhc3luYyBfb25BZGRBcm1vciAoKSB7XG4gICAgY29uc3QgbG9jYXRpb25zID0gZHVwbGljYXRlKFxuICAgICAgdGhpcy5hY3Rvci5kYXRhLmRhdGEuYXR0cmlicy5hcm1vci5sb2NhdGlvbnMgfHwgW11cbiAgICApXG4gICAgbG9jYXRpb25zLnB1c2goeyBuYW1lOiBudWxsLCB2YWx1ZTogbnVsbCB9KVxuICAgIGF3YWl0IHRoaXMuYWN0b3IudXBkYXRlKHsgJ2RhdGEuYXR0cmlicy5hcm1vci5sb2NhdGlvbnMnOiBsb2NhdGlvbnMgfSlcbiAgfVxuXG4gIGFzeW5jIF9vblJlbW92ZUFybW9yIChldmVudCkge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBsb2NhdGlvbiA9IGJ1dHRvbi5jbG9zZXN0KCcuYXJtb3InKVxuICAgIGNvbnN0IGluZGV4ID0gbG9jYXRpb24uZGF0YXNldC5pbmRleFxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGR1cGxpY2F0ZShcbiAgICAgIHRoaXMuYWN0b3IuZGF0YS5kYXRhLmF0dHJpYnMuYXJtb3IubG9jYXRpb25zIHx8IG51bGxcbiAgICApXG4gICAgaWYgKCFsb2NhdGlvbnMpIHJldHVyblxuICAgIGxvY2F0aW9ucy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgYXdhaXQgdGhpcy5hY3Rvci51cGRhdGUoeyAnZGF0YS5hdHRyaWJzLmFybW9yLmxvY2F0aW9ucyc6IGxvY2F0aW9ucyB9KVxuICB9XG5cbiAgb25DbG9zZVNoZWV0ICgpIHtcbiAgICBzdXBlci5vbkNsb3NlU2hlZXQoKVxuICAgIC8vIHRoaXMuYWN0b3IubG9ja2VkID0gdHJ1ZTtcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gIC8qICBGb3JtIFN1Ym1pc3Npb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBfZ2V0U3VibWl0RGF0YSAodXBkYXRlRGF0YSA9IHt9KSB7XG4gICAgLy8gQ3JlYXRlIHRoZSBleHBhbmRlZCB1cGRhdGUgZGF0YSBvYmplY3RcbiAgICBjb25zdCBmZCA9IG5ldyBGb3JtRGF0YUV4dGVuZGVkKHRoaXMuZm9ybSwgeyBlZGl0b3JzOiB0aGlzLmVkaXRvcnMgfSlcbiAgICBsZXQgZGF0YSA9IGZkLnRvT2JqZWN0KClcbiAgICBpZiAodXBkYXRlRGF0YSkgZGF0YSA9IG1lcmdlT2JqZWN0KGRhdGEsIHVwZGF0ZURhdGEpXG4gICAgZWxzZSBkYXRhID0gZXhwYW5kT2JqZWN0KGRhdGEpXG5cbiAgICAvLyBIYW5kbGUgQXJtb3IgYXJyYXlcbiAgICBpZiAoZGF0YS5kYXRhLmF0dHJpYnMuYXJtb3I/LmxvY2FsaXplZCkge1xuICAgICAgY29uc3QgYXJtb3IgPSBkYXRhLmRhdGE/LmF0dHJpYnMuYXJtb3JcbiAgICAgIGlmIChhcm1vcikge1xuICAgICAgICBhcm1vci5sb2NhdGlvbnMgPSBPYmplY3QudmFsdWVzKFxuICAgICAgICAgIGFybW9yPy5sb2NhdGlvbnMgfHwgdGhpcy5hY3Rvci5kYXRhLmRhdGEuYXR0cmlicy5hcm1vci5sb2NhdGlvbnMgfHwge31cbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgZmxhdHRlbmVkIHN1Ym1pc3Npb24gZGF0YVxuICAgIHJldHVybiBmbGF0dGVuT2JqZWN0KGRhdGEpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCBJdGVtU2hlZXQsIG1lcmdlT2JqZWN0ICovXG5cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uLy4uL2FjdG9ycy9hY3Rvci5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEl0ZW1TaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN1dlYXBvblNoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcbiAgLyoqXG4gICAqXG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdpdGVtJ10sXG4gICAgICB3aWR0aDogNTIwLFxuICAgICAgaGVpZ2h0OiA0ODAsXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC10YWJzJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ3NraWxscydcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICovXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgY29uc3QgcGF0aCA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zJ1xuICAgIHJldHVybiBgJHtwYXRofS93ZWFwb24tc2hlZXQuaHRtbGBcbiAgfVxuXG4gIC8qKlxuICAgKiBQcmVwYXJlIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgSXRlbSBzaGVldFxuICAgKiBUaGUgcHJlcGFyZWQgZGF0YSBvYmplY3QgY29udGFpbnMgYm90aCB0aGUgYWN0b3IgZGF0YSBhcyB3ZWxsIGFzIGFkZGl0aW9uYWwgc2hlZXQgb3B0aW9uc1xuICAgKi9cbiAgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3QgZGF0YSA9IHN1cGVyLmdldERhdGEoKVxuICAgIGRhdGEuZHR5cGVzID0gWydTdHJpbmcnLCAnTnVtYmVyJywgJ0Jvb2xlYW4nXVxuICAgIC8qKiBNT0RJRiAwLjgueCAqL1xuICAgIGNvbnN0IGl0ZW1EYXRhID0gZGF0YS5kYXRhXG4gICAgZGF0YS5kYXRhID0gaXRlbURhdGEuZGF0YSAvLyBNT0RJRjogMC44LnggZGF0YS5kYXRhXG4gICAgLyoqIE1PRElGIDAuOC54ICovXG5cbiAgICBkYXRhLmhhc093bmVyID0gdGhpcy5pdGVtLmFjdG9yICE9IG51bGxcbiAgICBpZiAoZGF0YS5oYXNPd25lcikgZGF0YS5hY3RvcktleSA9IHRoaXMuaXRlbS5hY3Rvci5hY3RvcktleVxuXG4gICAgZGF0YS5jb21iYXRTa2lsbCA9IFtdXG4gICAgaWYgKGRhdGEuaGFzT3duZXIpIHtcbiAgICAgIGRhdGEuZmlyZWFybVNraWxscyA9IHRoaXMuYWN0b3IuZmlyZWFybVNraWxsc1xuICAgICAgZGF0YS5maWdodGluZ1NraWxscyA9IHRoaXMuYWN0b3IuZmlnaHRpbmdTa2lsbHNcbiAgICAgIGRhdGEuY29tYmF0U2tpbGwgPSB0aGlzLml0ZW0uYWN0b3IuaXRlbXMuZmlsdGVyKGl0ZW0gPT4ge1xuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgaWYgKGl0ZW0uZGF0YS5kYXRhLnByb3BlcnRpZXMuY29tYmF0KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH0pXG5cbiAgICAgIGRhdGEuY29tYmF0U2tpbGwuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBsZXQgbGNhXG4gICAgICAgIGxldCBsY2JcbiAgICAgICAgaWYgKGEuZGF0YS5wcm9wZXJ0aWVzICYmIGIuZGF0YS5wcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgbGNhID0gYS5kYXRhLnByb3BlcnRpZXMuc3BlY2lhbFxuICAgICAgICAgICAgPyBhLmRhdGEuc3BlY2lhbGl6YXRpb24udG9Mb3dlckNhc2UoKSArIGEubmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICA6IGEubmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgbGNiID0gYi5kYXRhLnByb3BlcnRpZXMuc3BlY2lhbFxuICAgICAgICAgICAgPyBiLmRhdGEuc3BlY2lhbGl6YXRpb24udG9Mb3dlckNhc2UoKSArIGIubmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICA6IGIubmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGNhID0gYS5uYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICBsY2IgPSBiLm5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsY2EubG9jYWxlQ29tcGFyZShsY2IpXG4gICAgICB9KVxuICAgIH1cblxuICAgIGRhdGEuX3Byb3BlcnRpZXMgPSBbXVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcud2VhcG9uUHJvcGVydGllcykpIHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0ge31cbiAgICAgIHByb3BlcnR5LmlkID0ga2V5XG4gICAgICBwcm9wZXJ0eS5uYW1lID0gdmFsdWVcbiAgICAgIHByb3BlcnR5LmlzRW5hYmxlZCA9IHRoaXMuaXRlbS5kYXRhLmRhdGEucHJvcGVydGllc1trZXldID09PSB0cnVlXG4gICAgICBkYXRhLl9wcm9wZXJ0aWVzLnB1c2gocHJvcGVydHkpXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLml0ZW0uZGF0YS5kYXRhLnByaWNlKSB0aGlzLml0ZW0uZGF0YS5kYXRhLnByaWNlID0ge31cblxuICAgIGRhdGEuX2VyYXMgPSBbXVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZXJhcykpIHtcbiAgICAgIGNvbnN0IGVyYSA9IHt9XG4gICAgICBpZiAoIXRoaXMuaXRlbS5kYXRhLmRhdGEucHJpY2Vba2V5XSkgdGhpcy5pdGVtLmRhdGEuZGF0YS5wcmljZVtrZXldID0gMFxuICAgICAgZXJhLnByaWNlID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5wcmljZVtrZXldXG4gICAgICBlcmEuaWQgPSBrZXlcbiAgICAgIGVyYS5uYW1lID0gdmFsdWVcbiAgICAgIGVyYS5pc0VuYWJsZWQgPSB0aGlzLml0ZW0uZGF0YS5kYXRhLmVyYXNba2V5XSA9PT0gdHJ1ZVxuICAgICAgZGF0YS5fZXJhcy5wdXNoKGVyYSlcbiAgICB9XG4gICAgZGF0YS51c2VzQWx0ZXJuYXRlU2tpbGwgPVxuICAgICAgdGhpcy5pdGVtLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmF1dG8gPT09IHRydWUgfHxcbiAgICAgIHRoaXMuaXRlbS5kYXRhLmRhdGEucHJvcGVydGllcy5icnN0ID09PSB0cnVlIHx8XG4gICAgICB0aGlzLml0ZW0uZGF0YS5kYXRhLnByb3BlcnRpZXMudGhyb3duID09PSB0cnVlXG5cbiAgICBkYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKipcbiAgICogQWN0aXZhdGUgZXZlbnQgbGlzdGVuZXJzIHVzaW5nIHRoZSBwcmVwYXJlZCBzaGVldCBIVE1MXG4gICAqIEBwYXJhbSBodG1sIHtIVE1MfSAgIFRoZSBwcmVwYXJlZCBIVE1MIG9iamVjdCByZWFkeSB0byBiZSByZW5kZXJlZCBpbnRvIHRoZSBET01cbiAgICovXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIC8vIEV2ZXJ5dGhpbmcgYmVsb3cgaGVyZSBpcyBvbmx5IG5lZWRlZCBpZiB0aGUgc2hlZXQgaXMgZWRpdGFibGVcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5lZGl0YWJsZSkgcmV0dXJuXG4gICAgaHRtbC5maW5kKCcudG9nZ2xlLXN3aXRjaCcpLmNsaWNrKHRoaXMuX29uQ2xpY2tUb2dnbGUuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy53ZWFwb24tcHJvcGVydHknKS5jbGljayh0aGlzLl9vblByb3BlcnR5Q2xpY2suYmluZCh0aGlzKSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGV2ZW50XG4gICAqL1xuICBhc3luYyBfb25DbGlja1RvZ2dsZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgcHJvcGVydHlJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnRvZ2dsZS1zd2l0Y2gnKS5kYXRhc2V0XG4gICAgICAucHJvcGVydHlcbiAgICBjb25zdCBzZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC5zZXRcbiAgICBjb25zdCBlbGVtZW50TmFtZSA9IHNldCArICctJyArIHByb3BlcnR5SWRcbiAgICBjb25zdCBjaGVja2JveENvbnRyb2wgPSB0aGlzLmZvcm0uZWxlbWVudHMubmFtZWRJdGVtKGVsZW1lbnROYW1lKVxuXG4gICAgaWYgKGNoZWNrYm94Q29udHJvbC5jaGVja2VkKSBjaGVja2JveENvbnRyb2wuY2hlY2tlZCA9IGZhbHNlXG4gICAgZWxzZSBjaGVja2JveENvbnRyb2wuY2hlY2tlZCA9IHRydWVcblxuICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdzd2l0Y2hlZC1vbicpXG4gICAgYXdhaXQgdGhpcy5fb25TdWJtaXQoZXZlbnQpXG4gIH1cblxuICBhc3luYyBfb25Qcm9wZXJ0eUNsaWNrIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBwcm9wZXJ0eSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLndlYXBvbi1wcm9wZXJ0eScpLmRhdGFzZXRcbiAgICAgIC5wcm9wZXJ0eVxuICAgIGNvbnN0IHdlYXBvbklkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcud2VhcG9uJykuZGF0YXNldC5pdGVtSWRcbiAgICBjb25zdCBhY3RvcktleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLndlYXBvbicpLmRhdGFzZXQuYWN0b3JLZXlcbiAgICBsZXQgd2VhcG9uID0gbnVsbFxuICAgIGlmIChhY3RvcktleSkge1xuICAgICAgY29uc3QgYWN0b3IgPSBDb0NBY3Rvci5nZXRBY3RvckZyb21LZXkoYWN0b3JLZXkpXG4gICAgICB3ZWFwb24gPSBhY3Rvci5pdGVtcy5nZXQod2VhcG9uSWQpXG4gICAgfSBlbHNlIHtcbiAgICAgIHdlYXBvbiA9IGdhbWUuaXRlbXMuZ2V0KHdlYXBvbklkKVxuICAgIH1cbiAgICBhd2FpdCB3ZWFwb24udG9nZ2xlUHJvcGVydHkocHJvcGVydHkpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBIb29rcyAqL1xuaW1wb3J0IHsgY29uZmlndXJlRG9jdW1lbnRzIH0gZnJvbSAnLi4vc2NyaXB0cy9jb25maWd1cmUtZG9jdW1lbnRzLmpzJ1xuaW1wb3J0IHsgcHJlbG9hZEhhbmRsZWJhcnNUZW1wbGF0ZXMgfSBmcm9tICcuLi9zY3JpcHRzL2xvYWQtdGVtcGxhdGVzLmpzJ1xuaW1wb3J0IHsgcmVnaXN0ZXJTZXR0aW5ncyB9IGZyb20gJy4uL3NjcmlwdHMvcmVnaXN0ZXItc2V0dGluZ3MuanMnXG5pbXBvcnQgeyByZWdpc3RlclNoZWV0cyB9IGZyb20gJy4uL3NjcmlwdHMvcmVnaXN0ZXItc2hlZXRzLmpzJ1xuaW1wb3J0IHsgaGFuZGxlYmFyc0hlbHBlciB9IGZyb20gJy4uL3NjcmlwdHMvaGFuZGxlYmFycy1oZWxwZXIuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbmNlKCdpbml0JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbmZpZ3VyZURvY3VtZW50cygpXG4gICAgcHJlbG9hZEhhbmRsZWJhcnNUZW1wbGF0ZXMoKVxuICAgIHJlZ2lzdGVyU2V0dGluZ3MoKVxuICAgIHJlZ2lzdGVyU2hlZXRzKClcbiAgICBoYW5kbGViYXJzSGVscGVyKClcbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBDT05GSUcgKi9cblxuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3Qm9vayB9IGZyb20gJy4uL2l0ZW1zL2Jvb2svZGF0YS5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbXMvaXRlbS5qcydcbmltcG9ydCB7IENvQzdTcGVsbCB9IGZyb20gJy4uL2l0ZW1zL3NwZWxsL2RhdGEuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBjb25maWd1cmVEb2N1bWVudHMgKCkge1xuICBDT05GSUcuQWN0b3IuZG9jdW1lbnRDbGFzcyA9IENvQ0FjdG9yXG4gIENPTkZJRy5BY3Rvci5kb2N1bWVudENsYXNzZXMgPSB7fVxuICBDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzID0gQ29DN0l0ZW1cbiAgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzc2VzID0ge1xuICAgIGJvb2s6IENvQzdCb29rLFxuICAgIHNwZWxsOiBDb0M3U3BlbGxcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGxvYWRUZW1wbGF0ZXMgKi9cblxuLyoqXG4gKiBEZWZpbmUgYSBzZXQgb2YgdGVtcGxhdGUgcGF0aHMgdG8gcHJlLWxvYWRcbiAqIFByZS1sb2FkZWQgdGVtcGxhdGVzIGFyZSBjb21waWxlZCBhbmQgY2FjaGVkIGZvciBmYXN0IGFjY2VzcyB3aGVuIHJlbmRlcmluZ1xuICogQHJldHVybiB7UHJvbWlzZX1cbiAqL1xuZXhwb3J0IGNvbnN0IHByZWxvYWRIYW5kbGViYXJzVGVtcGxhdGVzID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICAvKiogRGVmaW5lIHRlbXBsYXRlIHBhdGhzIHRvIGxvYWQgKi9cbiAgY29uc3QgdGVtcGxhdGVQYXRocyA9IFtcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvYWN0b3Itc2tpbGxzLmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9ucGMtc2tpbGxzLmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9hY3Rvci13ZWFwb25zLmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9ucGMtY29tYmF0Lmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9jaGFyYWN0ZXItZGV2ZWxvcG1lbnQuaHRtbCcsXG5cbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvYWN0b3ItaW52ZW50b3J5Lmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9hY3Rvci1pbnZlbnRvcnktaXRlbXMuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2FjdG9yLWJhY2tncm91bmQuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2FjdG9yLXNraWxscy12Mi5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvYWN0b3Itd2VhcG9ucy12Mi5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvY2hhcmFjdGVyLWRldmVsb3BtZW50LXYyLmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9kZXZlbG9wbWVudC1jb250cm9scy5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvdml0YWxzLmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9jb21iYXQuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL2NoYXJhY3Rlci1zaGVldC12Mi5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvY2hhcmFjdGVyL3N1bW1hcnkuaHRtbCcsXG5cbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9ib29rL2RldGFpbHMuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvc3BlbGwvZGV0YWlscy5odG1sJ1xuICBdXG5cbiAgLyoqIExvYWQgdGhlIHRlbXBsYXRlIHBhcnRzICovXG4gIHJldHVybiBsb2FkVGVtcGxhdGVzKHRlbXBsYXRlUGF0aHMpXG59XG4iLCIvKiBnbG9iYWwgQ09ORklHLCBnYW1lICovXG5pbXBvcnQgeyBDb0M3RGVjYWRlckRpZSB9IGZyb20gJy4uL2FwcHMvZGVjYWRlci1kaWUuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclNldHRpbmdzICgpIHtcbiAgLyoqXG4gICAqIFJ1bGVzXG4gICAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3B1bHBSdWxlcycsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuUHVscFJ1bGVzJyxcbiAgICBoaW50OiAnU0VUVElOR1MuUHVscFJ1bGVzSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkZXZlbG9wbWVudFJvbGxGb3JMdWNrJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5kZXZlbG9wbWVudFJvbGxGb3JMdWNrJyxcbiAgICBoaW50OiAnU0VUVElOR1MuZGV2ZWxvcG1lbnRSb2xsRm9yTHVja0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnb3Bwb3NlZFJvbGxUaWVCcmVha2VyJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5PcHBvc2VkUm9sbFRpZUJyZWFrZXInLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5PcHBvc2VkUm9sbFRpZUJyZWFrZXJIaW50JyxcbiAgICBzY29wZTogJ3dvbHJkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuXG4gIC8qKlxuICAgKiBJbml0aWF0aXZlXG4gICAqL1xuICAvKiogU2V0IHRoZSBpbml0aWF0aXZlIHJ1bGUgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdpbml0aWF0aXZlUnVsZScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuSW5pdGlhdGl2ZVJ1bGUnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5Jbml0aWF0aXZlUnVsZUhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiAnYmFzaWMnLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjaG9pY2VzOiB7XG4gICAgICBiYXNpYzogJ1NFVFRJTkdTLkluaXRpYXRpdmVSdWxlQmFzaWMnLFxuICAgICAgb3B0aW9uYWw6ICdTRVRUSU5HUy5Jbml0aWF0aXZlUnVsZU9wdGlvbmFsJ1xuICAgIH0sXG4gICAgb25DaGFuZ2U6IHJ1bGUgPT4gX3NldEluaXRpYXRpdmVPcHRpb25zKHJ1bGUpXG4gIH0pXG4gIC8qKiBTZXQgZGlzcGxheWluZyBkaWNlcyBmb3IgaW5pdCByb2xsICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGlzcGxheUluaXREaWNlcycsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuZGlzcGxheUluaXREaWNlcycsXG4gICAgaGludDogJ1NFVFRJTkdTLmRpc3BsYXlJbml0RGljZXNIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIC8qKiBTZXQgZGlzcGxheWluZyBkaWNlcyBmb3IgaW5pdCByb2xsICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGlzcGxheUluaXRBc1RleHQnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLmRpc3BsYXlJbml0QXNUZXh0JyxcbiAgICBoaW50OiAnU0VUVElOR1MuZGlzcGxheUluaXRBc1RleHRIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG5cbiAgLyoqXG4gICAqIFJvbGwgY3VzdG9taXNhaW9uc1xuICAgKi9cbiAgLyoqIFN0YW5kYnkgcm9sbHMgbWFkZSBieSBHTSBmcm9tIHBsYXllciBzaGVldCAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3N0YW5ieUdNUm9sbHMnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlN0YW5ieUdNUm9sbHMnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5TdGFuYnlHTVJvbGxzSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICAvKiogQWxsb3cgdXNhZ2Ugb2YgYSBmbGF0IGRpY2UgbW9kaWZpZXIgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhbGxvd0ZsYXREaWNlTW9kaWZpZXInLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkFsbG93RmxhdERpY2VNb2RpZmllcicsXG4gICAgaGludDogJ1NFVFRJTkdTLkFsbG93RmxhdERpY2VNb2RpZmllckhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIC8qKiBBbGxvdyB1c2FnZSBvZiBhIGZsYXQgdGhyZXNob2xkIG1vZGlmaWVyICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYWxsb3dGbGF0VGhyZXNob2xkTW9kaWZpZXInLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkFsbG93RmxhdFRocmVzaG9sZE1vZGlmaWVyJyxcbiAgICBoaW50OiAnU0VUVElOR1MuQWxsb3dGbGF0VGhyZXNob2xkTW9kaWZpZXJIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2RlZmF1bHRDaGVja0RpZmZpY3VsdHknLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkRlZmF1bHREaWZmaWN1bHR5JyxcbiAgICBoaW50OiAnU0VUVElOR1MuRGVmYXVsdERpZmZpY3VsdHlIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogJ3JlZ3VsYXInLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjaG9pY2VzOiB7XG4gICAgICByZWd1bGFyOiAnU0VUVElOR1MuQ2hlY2tEaWZmaWN1bHR5UmVndWxhcicsXG4gICAgICB1bmtub3duOiAnU0VUVElOR1MuQ2hlY2tEaWZmaWN1bHR5VW5rbm93bidcbiAgICB9XG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc2VsZlJvbGxXaGlzcGVyVGFyZ2V0Jywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5TZWxmUm9sbFdoaXNwZXJUYXJnZXQnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5TZWxmUm9sbFdoaXNwZXJUYXJnZXRIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogJ2V2ZXJ5b25lJyxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY2hvaWNlczoge1xuICAgICAgbm9ib2R5OiAnU0VUVElOR1MuRG9Ob3RBZHZpc2UnLFxuICAgICAgb3duZXJzOiAnU0VUVElOR1MuQWR2aXNlT3duZXJzT25seScsXG4gICAgICBldmVyeW9uZTogJ1NFVFRJTkdTLkFkdmlzZUFsbFBsYXllcidcbiAgICB9XG4gIH0pXG5cbiAgLyoqXG4gICAqIENoYXQgQ2FyZHNcbiAgICovXG4gIC8qKiBTZXQgdGhlIG5lZWQgdG8gZGlzcGxheSBhY3RvciBpbWFnZSBvbiBjaGF0IGNhcmRzICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5EaXNwbGF5QWN0b3JPbkNhcmQnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5EaXNwbGF5QWN0b3JPbkNhcmRIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3BsYXlDaGVja1N1Y2Nlc3NMZXZlbCcsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuRGlzcGxheUNoZWNrU3VjY2Vzc0xldmVsJyxcbiAgICBzY29wZTogJ2NsaWVudCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3BsYXlSZXN1bHRUeXBlJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5EaXNwbGF5UmVzdWx0VHlwZScsXG4gICAgc2NvcGU6ICdjbGllbnQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIC8qKiBTZXQgdGhlIHVzZSBvZiB0b2tlbiBpbnN0ZWFkIG9mIHBvcnRyYWl0cyAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3VzZVRva2VuJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5Vc2VUb2tlbicsXG4gICAgaGludDogJ1NFVFRJTkdTLlVzZVRva2VuSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcblxuICAvKipcbiAgICogU2NlbmUgU2V0dGluZ3NcbiAgICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZW5hYmxlU3RhdHVzSWNvbnMnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkVuYWJsZVN0YXR1c0ljb25zJyxcbiAgICBoaW50OiAnU0VUVElOR1MuRW5hYmxlU3RhdHVzSWNvbnNIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiB0cnVlXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZ3JpZFNwYWNlcycsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuUmVzdHJpY3RHcmlkU3BhY2VzJyxcbiAgICBoaW50OiAnU0VUVElOR1MuUmVzdHJpY3RHcmlkU3BhY2VzSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXN0YW5jZUVsZXZhdGlvbicsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuQ2hlY2tFbGV2YXRpb24nLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5DaGVja0VsZXZhdGlvbkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcblxuICAvKipcbiAgICogR2FtZSBBcnR3b3JrIFNldHRpbmdzXG4gICAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ292ZXJyaWRlR2FtZUFydHdvcmsnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLk92ZXJyaWRlR2FtZUFydHdvcmsnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5PdmVycmlkZUdhbWVBcnR3b3JrSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ292ZXJyaWRlR2FtZUFydHdvcmsnKSkge1xuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0UGF1c2VJbWFnZScsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnRQYXVzZUltYWdlJyxcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnRQYXVzZUltYWdlSGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3RpbWUtdHJhcC5zdmcnLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydFBhdXNlVGV4dCcsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnRQYXVzZVRleHQnLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydFBhdXNlVGV4dEhpbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAnVGhlIEJsaW5kIElkaW90IEdvZCBpcyBkcmVhbWluZy4uLicsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIFNoZWV0IHNldHRpbmdzXG4gICAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3BsYXlQbGF5ZXJOYW1lT25TaGVldCcsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuZGlzcGxheVBsYXllck5hbWVPblNoZWV0JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3Rvb2xUaXBEZWxheScsIHtcbiAgICBuYW1lOiAnQ29DNy50b29sVGlwRGVsYXknLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiAyMDAwLFxuICAgIHR5cGU6IE51bWJlclxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3Nob3dJY29uc09ubHknLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLnNob3dJY29uc09ubHknLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIC8qKiBBbGxvdyBwbGF5ZXIgdG8gdW5sb2NrIHRoZSBzaGVldCBvdXRzaWRlIG9mIGNyZWF0aW9uIG1vZGUgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdwbGF5ZXJVbmxvY2tTaGVldE1vZGUnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlBsYXllclVubG9ja1NoZWV0TW9kZScsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6ICdhbHdheXMnLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjaG9pY2VzOiB7XG4gICAgICBhbHdheXM6ICdTRVRUSU5HUy5BbHdheXNFZGl0YWJsZScsXG4gICAgICBjcmVhdGlvbjogJ1NFVFRJTkdTLkNyZWF0aW9uTW9kZU9ubHknLFxuICAgICAgbmV2ZXI6ICdTRVRUSU5HUy5OZXZlckVkaXRhYmxlJ1xuICAgIH1cbiAgfSlcbiAgLyoqIEFsbG93IHBsYXllciB0byBtb2RpZnkgc3RhdHVzICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc3RhdHVzUGxheWVyRWRpdGFibGUnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlN0YXR1c1BsYXllckVkaXRhYmxlJyxcbiAgICBoaW50OiAnU0VUVElOR1MuU3RhdHVzUGxheWVyRWRpdGFibGVIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnb25lQmxvY2tCYWNrc3RvcnknLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLk9uZUJsb2NrQmFja1N0b3J5JyxcbiAgICBoaW50OiAnU0VUVElOR1MuT25lQmxvY2tCYWNrU3RvcnlIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ292ZXJyaWRlU2hlZXRBcnR3b3JrJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5PdmVycmlkZVNoZWV0QXJ0d29yaycsXG4gICAgaGludDogJ1NFVFRJTkdTLk92ZXJyaWRlU2hlZXRBcnR3b3JrSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ292ZXJyaWRlU2hlZXRBcnR3b3JrJykpIHtcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydFdvcmtTaGVldEJhY2tncm91bmQnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0V29ya1NoZWV0QmFja2dyb3VuZCcsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0V29ya1NoZWV0QmFja2dyb3VuZEhpbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiBcInVybCgnLi9hc3NldHMvaW1hZ2VzL2JhY2tncm91bmQud2VicCcpIDQgcmVwZWF0XCIsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZFR5cGUnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0V29ya1NoZWV0QmFja2dyb3VuZFR5cGUnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAnc2xpY2UnLFxuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgY2hvaWNlczoge1xuICAgICAgICBzbGljZTogJ1NFVFRJTkdTLkJhY2tncm91bmRTbGljZScsXG4gICAgICAgIGF1dG86ICdTRVRUSU5HUy5CYWNrZ3JvdW5kQXV0bycsXG4gICAgICAgIGNvbnRhaW46ICdTRVRUSU5HUy5CYWNrZ3JvdW5kQ29udGFpbicsXG4gICAgICAgIGNvdmVyOiAnU0VUVElOR1MuQmFja2dyb3VuZENvdmVyJ1xuICAgICAgfVxuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnRXb3JrT3RoZXJTaGVldEJhY2tncm91bmQnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0V29ya090aGVyU2hlZXRCYWNrZ3JvdW5kJyxcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnRXb3JrT3RoZXJTaGVldEJhY2tncm91bmRIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogXCJ1cmwoICcuL2Fzc2V0cy9pbWFnZXMvYmFja2dyb3VuZC53ZWJwJylcIixcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrU2hlZXRJbWFnZScsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrU2hlZXRJbWFnZScsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0d29ya1NoZWV0SW1hZ2VIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogXCJ1cmwoJy4vYXNzZXRzL2ltYWdlcy90ZW50YWNsZXMud2VicCcpXCIsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0d29ya0Zyb250Q29sb3InLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya0Zyb250Q29sb3InLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydHdvcmtGcm9udENvbG9ySGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6ICdyZ2JhKDQzLDU1LDgzLDEpJyxcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrQmFja2dyb3VuZENvbG9yJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydHdvcmtCYWNrZ3JvdW5kQ29sb3InLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydHdvcmtCYWNrZ3JvdW5kQ29sb3JIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogJ3JnYmEoMTAzLDExLDExLDEpJyxcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrSW50ZXJhY3RpdmVDb2xvcicsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrSW50ZXJhY3RpdmVDb2xvcicsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0d29ya0ludGVyYWN0aXZlQ29sb3JIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogJ3JnYmEoMTAzLDExLDExLDEpJyxcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrRml4ZWRTa2lsbExlbmd0aCcsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrRml4ZWRTa2lsbExlbmd0aCcsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0d29ya0ZpeGVkU2tpbGxMZW5ndGhIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogdHJ1ZSxcbiAgICAgIHR5cGU6IEJvb2xlYW5cbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250Jywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydHdvcmtNYWluRm9udCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6ICcnLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydHdvcmtNYWluRm9udEJvbGQnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya01haW5Gb250Qm9sZCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6ICcnLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydHdvcmtNYWluRm9udFNpemUnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya01haW5Gb250U2l6ZScsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6IDE2LFxuICAgICAgdHlwZTogTnVtYmVyXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBXZWFwb25zXG4gICAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3JlZ2FyZFVzZVBlclJvdW5kJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5EaXNyZWdhcmRVc2VQZXJSb3VuZCcsXG4gICAgaGludDogJ1NFVFRJTkdTLkRpc3JlZ2FyZFVzZVBlclJvdW5kSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXNyZWdhcmRBbW1vJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5EaXNyZWdhcmRBbW1vJyxcbiAgICBoaW50OiAnU0VUVElOR1MuRGlzcmVnYXJkQW1tb0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG5cbiAgLyoqXG4gICAqIERpY2UgU28gTmljZVxuICAgKi9cbiAgaWYgKGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpPy5hY3RpdmUpIHtcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3N5bmNEaWNlM2QnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuU3luY0RpY2UzRCcsXG4gICAgICBoaW50OiAnU0VUVElOR1MuU3luY0RpY2UzREhpbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiB0cnVlLFxuICAgICAgdHlwZTogQm9vbGVhblxuICAgIH0pXG4gICAgY29uc3QgW3ZlcnNpb25dID0gZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJyk/LmRhdGEudmVyc2lvbi5zcGxpdCgnLicpXG4gICAgaWYgKCFpc05hTihOdW1iZXIodmVyc2lvbikpICYmIE51bWJlcih2ZXJzaW9uKSA+PSAzKSB7XG4gICAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3RlbkRpZUJvbnVzJywge1xuICAgICAgICBuYW1lOiAnU0VUVElOR1MuVGVuRGllQm9udXMnLFxuICAgICAgICBoaW50OiAnU0VUVElOR1MuVGVuRGllQm9udXNIaW50JyxcbiAgICAgICAgc2NvcGU6ICdjbGllbnQnLFxuICAgICAgICBjb25maWc6IHRydWUsXG4gICAgICAgIGRlZmF1bHQ6ICdicm9uemUnLFxuICAgICAgICB0eXBlOiBTdHJpbmdcbiAgICAgIH0pXG4gICAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3RlbkRpZVBlbmFsdHknLCB7XG4gICAgICAgIG5hbWU6ICdTRVRUSU5HUy5UZW5EaWVQZW5hbHR5JyxcbiAgICAgICAgaGludDogJ1NFVFRJTkdTLlRlbkRpZVBlbmFsdHlIaW50JyxcbiAgICAgICAgc2NvcGU6ICdjbGllbnQnLFxuICAgICAgICBjb25maWc6IHRydWUsXG4gICAgICAgIGRlZmF1bHQ6ICdibG9vZG1vb24nLFxuICAgICAgICB0eXBlOiBTdHJpbmdcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERldmVsb3BlciBhbmQgZGVidWcgc2V0dGluZ3NcbiAgICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGVidWdtb2RlJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5EZWJ1Z01vZGUnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5EZWJ1Z01vZGVIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2V4cGVyaW1lbnRhbEZlYXR1cmVzJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5TaG93RXhwZXJpbWVudGFsRmVhdHVyZXMnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5TaG93RXhwZXJpbWVudGFsRmVhdHVyZXNIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9KVxuICAvKipcbiAgICogT3RoZXIgc2V0dGluZ3NcbiAgICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGV2ZWxvcG1lbnRFbmFibGVkJywge1xuICAgIG5hbWU6ICdEZXYgcGhhc2VkIGFsbG93ZWQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9KVxuICAvKiogRmVhdDogd2VsY29tZSBtZXNzYWdlICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc2hvd1dlbGNvbWVNZXNzYWdlJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5zaG93V2VsY29tZU1lc3NhZ2UnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5zaG93V2VsY29tZU1lc3NhZ2UnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnY2hhckNyZWF0aW9uRW5hYmxlZCcsIHtcbiAgICBuYW1lOiAnQ2hhciBjcmVhdGlvbiBhbGxvd2VkJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2VcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzeXN0ZW1VcGRhdGVWZXJzaW9uJywge1xuICAgIG5hbWU6ICdTeXN0ZW0gdXBkYXRlIHZlcnNpb24nLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGRlZmF1bHQ6IGdhbWUuc3lzdGVtLmRhdGEudmVyc2lvblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3N5c3RlbVVwZGF0ZWRNb2R1bGVWZXJzaW9uJywge1xuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDoge31cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd4cEVuYWJsZWQnLCB7XG4gICAgbmFtZTogJ0VuYWJsZSBYUCBnYWluJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogdHJ1ZVxuICB9KVxuICAvKiogU2V0IGFuIGluaXRpYXRpdmUgZm9ybXVsYSBmb3IgdGhlIHN5c3RlbSAqL1xuICBDT05GSUcuQ29tYmF0LmluaXRpYXRpdmUgPSB7XG4gICAgZm9ybXVsYTogJ0BjaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlJyxcbiAgICBkZWNpbWFsczogNFxuICB9XG4gIENPTkZJRy5kZWJ1Zy5ob29rcyA9ICEhZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGVidWdtb2RlJylcbiAgZnVuY3Rpb24gX3NldEluaXRpYXRpdmVPcHRpb25zIChydWxlKSB7XG4gICAgbGV0IGRlY2ltYWxzID0gMFxuICAgIHN3aXRjaCAocnVsZSkge1xuICAgICAgY2FzZSAnb3B0aW9uYWwnOlxuICAgICAgICBkZWNpbWFscyA9IDJcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2Jhc2ljJzpcbiAgICAgICAgZGVjaW1hbHMgPSAwXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIENPTkZJRy5Db21iYXQuaW5pdGlhdGl2ZSA9IHtcbiAgICAgIGZvcm11bGE6IG51bGwsXG4gICAgICBkZWNpbWFsczogZGVjaW1hbHNcbiAgICB9XG4gIH1cbiAgX3NldEluaXRpYXRpdmVPcHRpb25zKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2luaXRpYXRpdmVSdWxlJykpXG5cbiAgQ09ORklHLkRpY2UudGVybXMudCA9IENvQzdEZWNhZGVyRGllXG59XG4iLCIvKiBnbG9iYWwgQWN0b3JzLCBBY3RvclNoZWV0LCBJdGVtcywgSXRlbVNoZWV0ICovXG5cbmltcG9ydCB7IENvQzdBcmNoZXR5cGVTaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy9hcmNoZXR5cGUuanMnXG5pbXBvcnQgeyBDb0M3Qm9va1NoZWV0IH0gZnJvbSAnLi4vaXRlbXMvYm9vay9zaGVldC5qcydcbmltcG9ydCB7IENvQzdDaGFyYWN0ZXJTaGVldCB9IGZyb20gJy4uL2FjdG9ycy9zaGVldHMvY2hhcmFjdGVyLXYxLmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXJhY3RlclNoZWV0VjIgfSBmcm9tICcuLi9hY3RvcnMvc2hlZXRzL2NoYXJhY3Rlci5qcydcbmltcG9ydCB7IENvQzdDb250YWluZXJTaGVldCB9IGZyb20gJy4uL2FjdG9ycy9zaGVldHMvY29udGFpbmVyLmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXNlU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvY2hhc2UuanMnXG5pbXBvcnQgeyBDb0M3Q3JlYXR1cmVTaGVldCB9IGZyb20gJy4uL2FjdG9ycy9zaGVldHMvY3JlYXR1cmUtc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3SXRlbVNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL2l0ZW0tc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3SXRlbVNoZWV0VjIgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvaXRlbS1zaGVldFYyLmpzJ1xuaW1wb3J0IHsgQ29DN05QQ1NoZWV0IH0gZnJvbSAnLi4vYWN0b3JzL3NoZWV0cy9ucGMtc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3T2NjdXBhdGlvblNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL29jY3VwYXRpb24uanMnXG5pbXBvcnQgeyBDb0M3U2V0dXBTaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy9zZXR1cC5qcydcbmltcG9ydCB7IENvQzdTa2lsbFNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL3NraWxsLmpzJ1xuaW1wb3J0IHsgQ29DN1NwZWxsU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zcGVsbC9zaGVldC5qcydcbmltcG9ydCB7IENvQzdTdGF0dXNTaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy9zdGF0dXMuanMnXG5pbXBvcnQgeyBDb0M3VGFsZW50U2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvdGFsZW50LmpzJ1xuaW1wb3J0IHsgQ29DN1ZlaGljbGVTaGVldCB9IGZyb20gJy4uL2FjdG9ycy9zaGVldHMvdmVoaWNsZS5qcydcbmltcG9ydCB7IENvQzdXZWFwb25TaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy93ZWFwb24tc2hlZXQuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclNoZWV0cyAoKSB7XG4gIEFjdG9ycy51bnJlZ2lzdGVyU2hlZXQoJ2NvcmUnLCBBY3RvclNoZWV0KVxuICBBY3RvcnMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdOUENTaGVldCwge1xuICAgIHR5cGVzOiBbJ25wYyddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEFjdG9ycy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1ZlaGljbGVTaGVldCwge1xuICAgIHR5cGVzOiBbJ3ZlaGljbGUnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBBY3RvcnMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdDcmVhdHVyZVNoZWV0LCB7XG4gICAgdHlwZXM6IFsnY3JlYXR1cmUnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBBY3RvcnMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdDb250YWluZXJTaGVldCwge1xuICAgIHR5cGVzOiBbJ2NvbnRhaW5lciddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEFjdG9ycy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0NoYXJhY3RlclNoZWV0LCB7IHR5cGVzOiBbJ2NoYXJhY3RlciddIH0pXG4gIEFjdG9ycy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0NoYXJhY3RlclNoZWV0VjIsIHtcbiAgICB0eXBlczogWydjaGFyYWN0ZXInXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy51bnJlZ2lzdGVyU2hlZXQoJ2NvcmUnLCBJdGVtU2hlZXQpXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3U2tpbGxTaGVldCwge1xuICAgIHR5cGVzOiBbJ3NraWxsJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdXZWFwb25TaGVldCwge1xuICAgIHR5cGVzOiBbJ3dlYXBvbiddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3Qm9va1NoZWV0LCB7XG4gICAgdHlwZXM6IFsnYm9vayddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3U3BlbGxTaGVldCwge1xuICAgIHR5cGVzOiBbJ3NwZWxsJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdUYWxlbnRTaGVldCwge1xuICAgIHR5cGVzOiBbJ3RhbGVudCddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3U3RhdHVzU2hlZXQsIHtcbiAgICB0eXBlczogWydzdGF0dXMnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN09jY3VwYXRpb25TaGVldCwge1xuICAgIHR5cGVzOiBbJ29jY3VwYXRpb24nXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0FyY2hldHlwZVNoZWV0LCB7XG4gICAgdHlwZXM6IFsnYXJjaGV0eXBlJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdTZXR1cFNoZWV0LCB7XG4gICAgdHlwZXM6IFsnc2V0dXAnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0NoYXNlU2hlZXQsIHtcbiAgICB0eXBlczogWydjaGFzZSddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3SXRlbVNoZWV0LCB7IHR5cGVzOiBbJ2l0ZW0nXSB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0l0ZW1TaGVldFYyLCB7XG4gICAgdHlwZXM6IFsnaXRlbSddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgSGFuZGxlYmFycyAqL1xuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4uL2NoYXQvaGVscGVyLmpzJ1xuXG5leHBvcnQgY29uc3QgaGFuZGxlYmFyc0hlbHBlciA9IGZ1bmN0aW9uICgpIHtcbiAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcigncm9sbEFjdG9ySW1nJywgZnVuY3Rpb24gKGFjdG9yS2V5KSB7XG4gICAgY29uc3QgaW1nID0gY2hhdEhlbHBlci5nZXRBY3RvckltZ0Zyb21LZXkoYWN0b3JLZXkpXG4gICAgaWYgKGltZykgcmV0dXJuIGltZ1xuICAgIHJldHVybiAnLi4vaWNvbnMvc3ZnL215c3RlcnktbWFuLWJsYWNrLnN2ZydcbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBnYW1lICovXG5leHBvcnQgY2xhc3MgQ29DN1Rvb2x0aXBzIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMuVG9vbFRpcEhvdmVyID0gbnVsbFxuICAgIHRoaXMudG9vbFRpcFRpbWVyID0gbnVsbFxuICB9XG5cbiAgZGlzcGxheVRvb2xUaXAgKHRvb2xUaXApIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuVG9vbFRpcEhvdmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3QgYm91bmRzID0gdGhpcy5Ub29sVGlwSG92ZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgIGlmICghaXNOYU4oYm91bmRzLmxlZnQgfHwgJycpICYmICFpc05hTihib3VuZHMudG9wIHx8ICcnKSkge1xuICAgICAgICBsZXQgbGVmdCA9IGJvdW5kcy5sZWZ0XG4gICAgICAgIGxldCB0b3AgPSBib3VuZHMudG9wXG4gICAgICAgIGNvbnN0IGhlaWdodFRleHQgPSAkKHRoaXMuVG9vbFRpcEhvdmVyKS5vdXRlckhlaWdodCgpXG4gICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJzxkaXYgaWQ9XCJoZWxwLXRvb2x0aXBcIj4nICsgdG9vbFRpcCArICc8L2Rpdj4nKVxuICAgICAgICBjb25zdCB0aXAgPSAkKCcjaGVscC10b29sdGlwJylcbiAgICAgICAgY29uc3QgaGVpZ2h0VGlwID0gdGlwLm91dGVySGVpZ2h0KClcbiAgICAgICAgY29uc3Qgd2lkdGhUaXAgPSB0aXAub3V0ZXJXaWR0aCgpXG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgPCBoZWlnaHRUZXh0ICogMS41ICsgaGVpZ2h0VGlwICsgdG9wKSB7XG4gICAgICAgICAgdG9wID0gdG9wIC0gaGVpZ2h0VGlwXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdG9wID0gdG9wICsgaGVpZ2h0VGV4dCAqIDEuNVxuICAgICAgICB9XG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8IHdpZHRoVGlwICsgbGVmdCkge1xuICAgICAgICAgIGxlZnQgPSB3aW5kb3cuaW5uZXJXaWR0aCAtIHdpZHRoVGlwXG4gICAgICAgIH1cbiAgICAgICAgdGlwLmNzcyh7XG4gICAgICAgICAgbGVmdDogbGVmdCArICdweCcsXG4gICAgICAgICAgdG9wOiB0b3AgKyAncHgnXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdG9vbFRpcExlYXZlIChldmVudCkge1xuICAgIGlmIChnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgPT09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIGNsZWFyVGltZW91dChnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwVGltZXIpXG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgPSBudWxsXG4gICAgICAkKCcjaGVscC10b29sdGlwJykucmVtb3ZlKClcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCAqIGFzIEluaXQgZnJvbSAnLi9pbml0LmpzJ1xuaW1wb3J0ICogYXMgUmVhZHkgZnJvbSAnLi9yZWFkeS5qcydcbmltcG9ydCAqIGFzIFJlbmRlckFjdG9yU2hlZXQgZnJvbSAnLi9yZW5kZXItYWN0b3Itc2hlZXQuanMnXG5pbXBvcnQgKiBhcyBSZW5kZXJDaGF0TWVzc2FnZSBmcm9tICcuL3JlbmRlci1jaGF0LW1lc3NhZ2UuanMnXG5pbXBvcnQgKiBhcyBSZW5kZXJEaWFsb2cgZnJvbSAnLi9yZW5kZXItZGlhbG9nLmpzJ1xuaW1wb3J0ICogYXMgUmVuZGVySXRlbVNoZWV0IGZyb20gJy4vcmVuZGVyLWl0ZW0tc2hlZXQuanMnXG5pbXBvcnQgKiBhcyBSZW5kZXJQYXVzZSBmcm9tICcuL3JlbmRlci1wYXVzZS5qcydcblxuZXhwb3J0IGNvbnN0IENvQzdIb29rcyA9IHtcbiAgbGlzdGVuICgpIHtcbiAgICBJbml0Lmxpc3RlbigpXG4gICAgUmVhZHkubGlzdGVuKClcbiAgICBSZW5kZXJBY3RvclNoZWV0Lmxpc3RlbigpXG4gICAgUmVuZGVyQ2hhdE1lc3NhZ2UubGlzdGVuKClcbiAgICBSZW5kZXJEaWFsb2cubGlzdGVuKClcbiAgICBSZW5kZXJJdGVtU2hlZXQubGlzdGVuKClcbiAgICBSZW5kZXJQYXVzZS5saXN0ZW4oKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgSG9va3MgKi9cbmltcG9ydCB7IENvQzdUb29sdGlwcyB9IGZyb20gJy4uL2FwcHMvdG9vbHRpcHMuanMnXG5cbi8vIGltcG9ydCB7IENvQzdXZWxjb21lTWVzc2FnZSB9IGZyb20gJy4uL2FwcHMvd2VsY29tZS1tZXNzYWdlLmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub25jZSgncmVhZHknLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ0NhbGwgb2YgQ3RodWxodSA3dGggRWRpdGlvbiB8IFJlYWR5JylcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2hvd1dlbGNvbWVNZXNzYWdlJykgJiYgZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIC8qKiBUaGlzIHdpbGwgcHJvbXB0IHRoZSB3ZWxjb21lIG1lc3NhZ2Ugd2hlbiBpdCBpcyAgZmluaXNoZWQgKi9cbiAgICAgIC8vIGF3YWl0IENvQzdXZWxjb21lTWVzc2FnZS5jcmVhdGUoKVxuICAgIH1cbiAgICBnYW1lLkNvQzdUb29sdGlwcyA9IG5ldyBDb0M3VG9vbHRpcHMoKVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIEhvb2tzICovXG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbigncmVuZGVyQWN0b3JTaGVldCcsIGFzeW5jIChkYXRhLCBodG1sLCBvcHRpb25zKSA9PiB7fSlcbn1cbiIsIi8qIGdsb2JhbCBIb29rcyAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ3JlbmRlckNoYXRNZXNzYWdlJywgKCkgPT4ge30pXG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgSG9va3MgKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbigncmVuZGVyRGlhbG9nJywgKGRpYWxvZywgaHRtbCkgPT4ge1xuICAgIGNvbnN0IGZvcm0gPSBodG1sLmZpbmQoJ2Zvcm0nKVxuICAgIGlmIChmb3JtLmlzKCcjZW50aXR5LWNyZWF0ZScpICYmIGZvcm0uZmluZCgnc2VsZWN0JykubGVuZ3RoICE9PSAwKSB7XG4gICAgICBjb25zdCBlbnRpdHlDcmVhdGVTZWxlY3RUYWcgPSBmb3JtLmZpbmQoXCJbbmFtZT0ndHlwZSddXCIpXG4gICAgICBjb25zdCBlbnRpdHlTb3J0ZWRMaXN0ID0gW11cbiAgICAgIGNvbnN0IHNob3dFeHBlcmltZW50YWwgPSAhIWdhbWUuc2V0dGluZ3MuZ2V0KFxuICAgICAgICAnQ29DNycsXG4gICAgICAgICdleHBlcmltZW50YWxGZWF0dXJlcydcbiAgICAgIClcbiAgICAgIGVudGl0eUNyZWF0ZVNlbGVjdFRhZy5jaGlsZHJlbigpLmVhY2goKG8sIGVudGl0eU9wdGlvbikgPT4ge1xuICAgICAgICBjb25zdCBrZXkgPSBlbnRpdHlPcHRpb24udGV4dENvbnRlbnQ/LmNhcGl0YWxpemUoKVxuICAgICAgICBpZiAoZ2FtZS5pMThuLmhhcyhgQ29DNy5FbnRpdGllcy4ke2tleX1gKSkge1xuICAgICAgICAgIGVudGl0eU9wdGlvbi50ZXh0Q29udGVudCA9IGdhbWUuaTE4bi5sb2NhbGl6ZShgQ29DNy5FbnRpdGllcy4ke2tleX1gKVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICBzaG93RXhwZXJpbWVudGFsIHx8XG4gICAgICAgICAgIVsnY2hhc2UnLCAnY29udGFpbmVyJywgJ3ZlaGljbGUnXS5pbmNsdWRlcyhlbnRpdHlPcHRpb24udmFsdWUpXG4gICAgICAgICkge1xuICAgICAgICAgIGVudGl0eVNvcnRlZExpc3QucHVzaChlbnRpdHlPcHRpb24pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBlbnRpdHlDcmVhdGVTZWxlY3RUYWcuZW1wdHkoKVxuICAgICAgZW50aXR5Q3JlYXRlU2VsZWN0VGFnLmFwcGVuZChcbiAgICAgICAgZW50aXR5U29ydGVkTGlzdC5zb3J0KChmaXJzdCwgc2Vjb25kKSA9PlxuICAgICAgICAgIGZpcnN0LmlubmVyVGV4dC5sb2NhbGVDb21wYXJlKHNlY29uZC5pbm5lclRleHQpXG4gICAgICAgIClcbiAgICAgIClcbiAgICAgIGlmIChlbnRpdHlDcmVhdGVTZWxlY3RUYWcudmFsKCkgPT09ICdhY3RvcicpIHtcbiAgICAgICAgZW50aXR5Q3JlYXRlU2VsZWN0VGFnLnZhbCgnY2hhcmFjdGVyJylcbiAgICAgIH0gZWxzZSBpZiAoZW50aXR5Q3JlYXRlU2VsZWN0VGFnLnZhbCgpID09PSAnYm9vaycpIHtcbiAgICAgICAgZW50aXR5Q3JlYXRlU2VsZWN0VGFnLnZhbCgnaXRlbScpXG4gICAgICB9XG4gICAgfVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIEhvb2tzICovXG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbigncmVuZGVySXRlbVNoZWV0JywgYXN5bmMgKGRhdGEsIGh0bWwsIG9wdGlvbnMpID0+IHt9KVxufVxuIiwiLyogZ2xvYmFsIEhvb2tzICovXG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbigncmVuZGVyUGF1c2UnLCBhc3luYyAoZGF0YSwgaHRtbCwgb3B0aW9ucykgPT4ge1xuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvdmVycmlkZUdhbWVBcnR3b3JrJykpIHtcbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRQYXVzZUltYWdlJykudG9Mb3dlckNhc2UoKSA9PT0gJ251bGwnKSB7XG4gICAgICAgIGh0bWwuZmluZCgnaW1nJykucmVtb3ZlKClcbiAgICAgIH1cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRQYXVzZUltYWdlJykgIT0gJycpIHtcbiAgICAgICAgaHRtbC5maW5kKCdpbWcnKS5hdHRyKCdzcmMnLCBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRQYXVzZUltYWdlJykpXG4gICAgICB9XG5cbiAgICAgIGlmICgnJyAhPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRQYXVzZVRleHQnKSkge1xuICAgICAgICBodG1sLmZpbmQoJ2gzJykuaHRtbChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRQYXVzZVRleHQnKSlcbiAgICAgIH1cbiAgICB9XG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgc29ja2V0bGliLCB1aSAqL1xuaW1wb3J0IHsgQ29DN01lbGVlVGFyZ2V0IH0gZnJvbSAnLi4vY2hhdC9jb21iYXQvbWVsZWUtdGFyZ2V0LmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gQ29DN1NvY2tldCAoKSB7XG4gIGdhbWUuQ29DN3NvY2tldCA9IHNvY2tldGxpYi5yZWdpc3RlclN5c3RlbSgnQ29DNycpXG4gIGdhbWUuQ29DN3NvY2tldC5yZWdpc3RlcignZ21jcmVhdGVtZXNzYWdlYXMnLCBnbWNyZWF0ZW1lc3NhZ2VhcylcbiAgZ2FtZS5Db0M3c29ja2V0LnJlZ2lzdGVyKCdnbXRyYWRlaXRlbXRvJywgZ210cmFkZWl0ZW10bylcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ21jcmVhdGVtZXNzYWdlYXMgKGRhdGEpIHtcbiAgY29uc3QgbWVsZWVUYXJnZXQgPSBuZXcgQ29DN01lbGVlVGFyZ2V0KFxuICAgIGRhdGEudGFyZ2V0S2V5LFxuICAgIGRhdGEubWVzc2FnZUlkLFxuICAgIGRhdGEuZmFzdEZvcndhcmRcbiAgKVxuICBtZWxlZVRhcmdldC5pbml0aWF0b3JLZXkgPSBkYXRhLmFjdG9yS2V5XG4gIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCBtZWxlZVRhcmdldC5jcmVhdGVDaGF0Q2FyZCgpXG4gIHJldHVybiBtZXNzYWdlXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdtdHJhZGVpdGVtdG8gKGRhdGEpIHtcbiAgdHJ5IHtcbiAgICBsZXQgYWN0b3JcbiAgICBpZiAoZGF0YS5zY2VuZSkge1xuICAgICAgYWN0b3IgPSBnYW1lLnNjZW5lcy5nZXQoZGF0YS5zY2VuZSkudG9rZW5zLmdldChkYXRhLmFjdG9yRnJvbSkuYWN0b3JcbiAgICB9IGVsc2Uge1xuICAgICAgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoZGF0YS5hY3RvckZyb20pXG4gICAgfVxuICAgIGNvbnN0IGl0ZW0gPSBhY3Rvci5pdGVtcy5nZXQoZGF0YS5pdGVtKVxuICAgIGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCBnYW1lLmFjdG9yc1xuICAgICAgLmdldChkYXRhLmFjdG9yVG8pXG4gICAgICAuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbaXRlbS50b0pTT04oKV0pXG4gICAgaWYgKGNyZWF0ZWQpIHtcbiAgICAgIGFjdG9yLmRlbGV0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2l0ZW0uaWRdKVxuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZSlcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICByZXR1cm4gdHJ1ZVxufVxuIiwiLyogZ2xvYmFsICQsIENvbWJhdCwgQ09ORklHLCBmcm9tVXVpZCwgZ2FtZSwgSG9va3MsIHRpbnlNQ0UgKi9cbmltcG9ydCB7IENvQzdOUENTaGVldCB9IGZyb20gJy4vYWN0b3JzL3NoZWV0cy9ucGMtc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3Q3JlYXR1cmVTaGVldCB9IGZyb20gJy4vYWN0b3JzL3NoZWV0cy9jcmVhdHVyZS1zaGVldC5qcydcbmltcG9ydCB7IENvQzdDaGFyYWN0ZXJTaGVldFYyIH0gZnJvbSAnLi9hY3RvcnMvc2hlZXRzL2NoYXJhY3Rlci5qcydcbmltcG9ydCB7IENvQzdDaGF0IH0gZnJvbSAnLi9jaGF0LmpzJ1xuaW1wb3J0IHsgQ29DN0NvbWJhdCwgcm9sbEluaXRpYXRpdmUgfSBmcm9tICcuL2NvbWJhdC5qcydcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuL2NvbmZpZy5qcydcbmltcG9ydCB7IFVwZGF0ZXIgfSBmcm9tICcuL3VwZGF0ZXIuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBDb0M3UGFyc2VyIH0gZnJvbSAnLi9hcHBzL3BhcnNlci5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3TWVudSB9IGZyb20gJy4vbWVudS5qcydcbmltcG9ydCB7IE9wcG9zZWRDaGVja0NhcmQgfSBmcm9tICcuL2NoYXQvY2FyZHMvb3Bwb3NlZC1yb2xsLmpzJ1xuaW1wb3J0IHsgQ29tYmluZWRDaGVja0NhcmQgfSBmcm9tICcuL2NoYXQvY2FyZHMvY29tYmluZWQtcm9sbC5qcydcbmltcG9ydCB7IERhbWFnZUNhcmQgfSBmcm9tICcuL2NoYXQvY2FyZHMvZGFtYWdlLmpzJ1xuaW1wb3J0IHsgQ29DN0NhbnZhcyB9IGZyb20gJy4vYXBwcy9jYW52YXMuanMnXG5pbXBvcnQgeyBDb0M3Q29tcGVuZGl1bURpcmVjdG9yeSB9IGZyb20gJy4vY29tcGVuZGl1bS1kaXJlY3RvcnkuanMnXG5pbXBvcnQgeyBDb0M3QWN0b3JEaXJlY3RvcnkgfSBmcm9tICcuL2FjdG9yLWRpcmVjdG9yeS5qcydcbmltcG9ydCB7IENvQzdIb29rcyB9IGZyb20gJy4vaG9va3MvaW5kZXguanMnXG5pbXBvcnQgKiBhcyBEaWNlQm90IGZyb20gJy4vZGljZWJvdC5qcydcbmltcG9ydCAnLi4vc3R5bGVzL3N5c3RlbS9pbmRleC5sZXNzJ1xuaW1wb3J0IHsgQ29DN0NoYXNlU2hlZXQgfSBmcm9tICcuL2l0ZW1zL3NoZWV0cy9jaGFzZS5qcydcbmltcG9ydCB7IENvQzdTb2NrZXQgfSBmcm9tICcuL2hvb2tzL3NvY2tldC5qcydcbmltcG9ydCB7IERyb3BBY3RvclNoZWV0RGF0YSB9IGZyb20gJy4vaG9va3MvZHJvcC1hY3Rvci1zaGVldC1kYXRhLmpzJ1xuXG5Ib29rcy5vbigncmVuZGVyU2V0dGluZ3NDb25maWcnLCAoYXBwLCBodG1sLCBvcHRpb25zKSA9PiB7XG4gIGNvbnN0IHN5c3RlbVRhYiA9ICQoYXBwLmZvcm0pLmZpbmQoJy50YWJbZGF0YS10YWI9c3lzdGVtXScpXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLnB1bHBSdWxlc10nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlUnVsZXMnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdzZWxlY3RbbmFtZT1Db0M3XFxcXC5pbml0aWF0aXZlUnVsZV0nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlSW5pdGlhdGl2ZScpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuc3RhbmJ5R01Sb2xsc10nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlUm9sbCcpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuZGlzcGxheUFjdG9yT25DYXJkXScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVDaGF0Q2FyZHMnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLmVuYWJsZVN0YXR1c0ljb25zXScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVTY2VuZScpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwub3ZlcnJpZGVHYW1lQXJ0d29ya10nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlR2FtZUFydHdvcmsnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLmRpc3BsYXlQbGF5ZXJOYW1lT25TaGVldF0nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlU2hlZXQnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLmRpc3JlZ2FyZFVzZVBlclJvdW5kXScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVXZWFwb24nKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLnN5bmNEaWNlM2RdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZURpY2VTb05pY2UnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLmRlYnVnbW9kZV0nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlRGV2ZWxvcGVyRGVidWcnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdzZWxlY3RbbmFtZT1Db0M3XFxcXC5ib3V0T2ZNYWRuZXNzU3VtbWFyeVRhYmxlXScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVSb2xsVGFibGUnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG59KVxuXG5Ib29rcy5vbmNlKCdkaWNlU29OaWNlUmVhZHknLCBkaWNlM2QgPT4ge1xuICBkaWNlM2QuYWRkRGljZVByZXNldChcbiAgICB7XG4gICAgICB0eXBlOiAnZHQnLFxuICAgICAgbGFiZWxzOiBbJzEwJywgJzIwJywgJzMwJywgJzQwJywgJzUwJywgJzYwJywgJzcwJywgJzgwJywgJzkwJywgJzAwJ10sXG4gICAgICBmb250U2NhbGU6IDAuNzUsXG4gICAgICBzeXN0ZW06ICdzdGFuZGFyZCdcbiAgICB9LFxuICAgICdkdCdcbiAgKVxufSlcblxuSG9va3Mub25jZSgnaW5pdCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgZ2FtZS5Db0M3ID0ge1xuICAgIG1hY3Jvczoge1xuICAgICAgc2tpbGxDaGVjazogQ29DN1V0aWxpdGllcy5za2lsbENoZWNrTWFjcm8sXG4gICAgICB3ZWFwb25DaGVjazogQ29DN1V0aWxpdGllcy53ZWFwb25DaGVja01hY3JvLFxuICAgICAgY2hlY2s6IENvQzdVdGlsaXRpZXMuY2hlY2tNYWNyb1xuICAgIH0sXG4gICAgY2FyZHM6IHtcbiAgICAgIERhbWFnZUNhcmQ6IERhbWFnZUNhcmRcbiAgICB9XG4gIH1cbiAgQ29tYmF0LnByb3RvdHlwZS5yb2xsSW5pdGlhdGl2ZSA9IHJvbGxJbml0aWF0aXZlXG59KVxuXG5Ib29rcy5vbigncmVuZGVyQ29tYmF0VHJhY2tlcicsIChhcHAsIGh0bWwsIGRhdGEpID0+XG4gIENvQzdDb21iYXQucmVuZGVyQ29tYmF0VHJhY2tlcihhcHAsIGh0bWwsIGRhdGEpXG4pXG5cbkRpY2VCb3QubGlzdGVuKClcbkNvQzdIb29rcy5saXN0ZW4oKVxuXG5Ib29rcy5vbmNlKCdzb2NrZXRsaWIucmVhZHknLCBDb0M3U29ja2V0KVxuXG5Ib29rcy5vbmNlKCdzZXR1cCcsIGZ1bmN0aW9uICgpIHtcbiAgLy8gTG9jYWxpemUgQ09ORklHIG9iamVjdHMgb25jZSB1cC1mcm9udFxuICBjb25zdCB0b0xvY2FsaXplID0gW1xuICAgICdzcGVsbFByb3BlcnRpZXMnLFxuICAgICdib29rVHlwZScsXG4gICAgJ3RhbGVudFR5cGUnLFxuICAgICdvY2N1cGF0aW9uUHJvcGVydGllcycsXG4gICAgJ3N0YXR1c1R5cGUnXG4gIF1cblxuICBmb3IgKGNvbnN0IG8gb2YgdG9Mb2NhbGl6ZSkge1xuICAgIGNvbnN0IGxvY2FsaXplZCA9IE9iamVjdC5lbnRyaWVzKENPQzdbb10pLm1hcChlID0+IHtcbiAgICAgIHJldHVybiBbZVswXSwgZ2FtZS5pMThuLmxvY2FsaXplKGVbMV0pXVxuICAgIH0pXG4gICAgQ09DN1tvXSA9IGxvY2FsaXplZC5yZWR1Y2UoKG9iaiwgZSkgPT4ge1xuICAgICAgb2JqW2VbMF1dID0gZVsxXVxuICAgICAgcmV0dXJuIG9ialxuICAgIH0sIHt9KVxuICB9XG5cbiAgbGV0IGVmZmVjdEluZGV4ID0gQ09ORklHLnN0YXR1c0VmZmVjdHMuZmluZEluZGV4KHQgPT4gdC5pZCA9PT0gJ2RlYWQnKVxuICBpZiAoZWZmZWN0SW5kZXggIT09IC0xKSB7XG4gICAgQ09ORklHLnN0YXR1c0VmZmVjdHNbZWZmZWN0SW5kZXhdLmljb24gPVxuICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvdG9tYnN0b25lLnN2ZydcbiAgfVxuICBlZmZlY3RJbmRleCA9IENPTkZJRy5zdGF0dXNFZmZlY3RzLmZpbmRJbmRleCh0ID0+IHQuaWQgPT09ICd1bmNvbnNjaW91cycpXG4gIGlmIChlZmZlY3RJbmRleCAhPT0gLTEpIHtcbiAgICBDT05GSUcuc3RhdHVzRWZmZWN0c1tlZmZlY3RJbmRleF0uaWNvbiA9XG4gICAgICAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9rbm9ja2VkLW91dC1zdGFycy5zdmcnXG4gIH1cbiAgQ09ORklHLnN0YXR1c0VmZmVjdHMudW5zaGlmdChcbiAgICB7XG4gICAgICBpZDogJ2JvdXRPZk1hZG5lc3MnLFxuICAgICAgbGFiZWw6ICdDb0M3LkJvdXRPZk1hZG5lc3NOYW1lJyxcbiAgICAgIGljb246ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL2hhbmdpbmctc3BpZGVyLnN2ZydcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAnaW5zYW5pdHknLFxuICAgICAgbGFiZWw6ICdDb0M3Lkluc2FuaXR5TmFtZScsXG4gICAgICBpY29uOiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy90ZW50YWNsZXMtc2t1bGwuc3ZnJ1xuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICdjcml0aWNhbFdvdW5kcycsXG4gICAgICBsYWJlbDogJ2NyaXRpY2FsV291bmRzJyxcbiAgICAgIGljb246ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL2FybS1zbGluZy5zdmcnXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ2R5aW5nJyxcbiAgICAgIGxhYmVsOiAnZHlpbmcnLFxuICAgICAgaWNvbjogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvaGVhcnQtYmVhdHMuc3ZnJ1xuICAgIH1cbiAgKVxufSlcblxuSG9va3Mub24oJ2hvdGJhckRyb3AnLCBhc3luYyAoYmFyLCBkYXRhLCBzbG90KSA9PlxuICBDb0M3VXRpbGl0aWVzLmNyZWF0ZU1hY3JvKGJhciwgZGF0YSwgc2xvdClcbilcblxuSG9va3Mub24oJ3JlbmRlckNoYXRMb2cnLCAoYXBwLCBodG1sLCBkYXRhKSA9PlxuICBDb0M3Q2hhdC5jaGF0TGlzdGVuZXJzKGFwcCwgaHRtbCwgZGF0YSlcbilcbkhvb2tzLm9uKCdyZW5kZXJDaGF0TWVzc2FnZScsIChhcHAsIGh0bWwsIGRhdGEpID0+XG4gIENvQzdDaGF0LnJlbmRlck1lc3NhZ2VIb29rKGFwcCwgaHRtbCwgZGF0YSlcbilcbkhvb2tzLm9uKCd1cGRhdGVDaGF0TWVzc2FnZScsIChjaGF0TWVzc2FnZSwgY2hhdERhdGEsIGRpZmYsIHNwZWFrZXIpID0+XG4gIENvQzdDaGF0Lm9uVXBkYXRlQ2hhdE1lc3NhZ2UoY2hhdE1lc3NhZ2UsIGNoYXREYXRhLCBkaWZmLCBzcGVha2VyKVxuKVxuXG5Ib29rcy5vbigncmVhZHknLCBhc3luYyAoKSA9PiB7XG4gIGF3YWl0IFVwZGF0ZXIuY2hlY2tGb3JVcGRhdGUoKVxuXG4gIC8vIGdhbWUuQ29DNy5tZW51cyA9IG5ldyBDb0M3TWVudSgpO1xuXG4gIGFjdGl2YXRlR2xvYmFsTGlzdGVuZXIoKVxuXG4gIC8vIHNldEdsb2JhbENzc1ZhcigpXG5cbiAgY29uZmlndXJlVGlueU1DRSgpXG5cbiAgZ2FtZS5Db0M3LnNraWxsTGlzdCA9IGF3YWl0IGdhbWUucGFja3MuZ2V0KCdDb0M3LnNraWxscycpPy5nZXREb2N1bWVudHMoKVxuXG4gIGdhbWUuc29ja2V0Lm9uKCdzeXN0ZW0uQ29DNycsIGFzeW5jIGRhdGEgPT4ge1xuICAgIGlmIChkYXRhLnR5cGUgPT09ICd1cGRhdGVDaGFyJykgQ29DN1V0aWxpdGllcy51cGRhdGVDaGFyU2hlZXRzKClcblxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaWYgKE9wcG9zZWRDaGVja0NhcmQuZGVmYXVsdENvbmZpZy50eXBlID09PSBkYXRhLnR5cGUpIHtcbiAgICAgICAgT3Bwb3NlZENoZWNrQ2FyZC5kaXNwYXRjaChkYXRhKVxuICAgICAgfVxuXG4gICAgICBpZiAoQ29tYmluZWRDaGVja0NhcmQuZGVmYXVsdENvbmZpZy50eXBlID09PSBkYXRhLnR5cGUpIHtcbiAgICAgICAgQ29tYmluZWRDaGVja0NhcmQuZGlzcGF0Y2goZGF0YSlcbiAgICAgIH1cblxuICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ2ludm9rZScpIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IGF3YWl0IGZyb21VdWlkKGRhdGEuaXRlbSlcbiAgICAgICAgaXRlbVtkYXRhLm1ldGhvZF0oZGF0YS5kYXRhKVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICAvLyBcIlNFVFRJTkdTLkJvdXRPZk1hZG5lc3NQaG9iaWFzSW5kZXhcIjogXCJQaG9iaWFzIGluZGV4XCIsXG4gIC8vIFwiU0VUVElOR1MuQm91dE9mTWFkbmVzc1Bob2JpYXNJbmRleEhpbnRcIjogXCJUaGUgaW5kZXggKHJvbGwgcmVzdWx0KSB0aGF0IHdpbGwgdHJpZ2dlciBhIHJvbGwgaW4gdGhlIHBob2JpYXMgdGFibGVcIixcbiAgLy8gXCJTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzTWFuaWFzSW5kZXhcIjogXCJNYW5pYXMgaW5kZXhcIixcbiAgLy8gXCJTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzTWFuaWFzSW5kZXhIaW50XCI6IFwiVGhlIGluZGV4IChyb2xsIHJlc3VsdCkgdGhhdCB3aWxsIHRyaWdnZXIgYSByb2xsIGluIHRoZSBtYW5pYXMgdGFibGVcIixcbiAgLy8gXCJTRVRUSU5HUy5TYW1wbGVQaG9iaWFzVGFibGVcIjogXCJTYW1wbGUgcGhvYmlhcyB0YWJsZVwiLFxuICAvLyBcIlNFVFRJTkdTLlNhbXBsZU1hbmlhc1RhYmxlXCI6IFwiU2FtcGxlIE1hbmlhcyB0YWJsZVwiLFxuXG4gIGZ1bmN0aW9uIF90YWJsZVNldHRpbmdzQ2hhbmdlZCAodGFibGUsIGlkKSB7XG4gICAgaWYgKGlkID09PSAnbm9uZScpIGdhbWUuQ29DNy50YWJsZXNbdGFibGVdID0gbnVsbFxuICAgIGVsc2UgZ2FtZS5Db0M3LnRhYmxlc1t0YWJsZV0gPSBnYW1lLnRhYmxlcy5nZXQoaWQpXG4gIH1cblxuICAvLyBmdW5jdGlvbiBfdGFibGVJbmRleENoYW5nZWQoIHRhYmxlLCBpbmRleCl7XG4gIC8vICBnYW1lLkNvQzcudGFibGVzW3RhYmxlXT1pbmRleDtcbiAgLy8gfVxuXG4gIGNvbnN0IHRhYmxlQ2hvaWNlID0geyBub25lOiAnU0VUVElOR1MuTGV0S2VlcGVyRGVjaWRlJyB9XG4gIGZvciAoY29uc3QgdCBvZiBnYW1lLnRhYmxlcykge1xuICAgIHRhYmxlQ2hvaWNlW3QuZGF0YS5faWRdID0gdC5kYXRhLm5hbWVcbiAgfVxuXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1N1bW1hcnlUYWJsZScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuQm91dE9mTWFkbmVzc1N1bW1hcnlUYWJsZScsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6ICdub25lJyxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY2hvaWNlczogdGFibGVDaG9pY2UsXG4gICAgb25DaGFuZ2U6IGlkID0+IF90YWJsZVNldHRpbmdzQ2hhbmdlZCgnYm91dE9mTWFkbmVzc19TdW1tYXJ5JywgaWQpXG4gIH0pXG5cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdib3V0T2ZNYWRuZXNzUmVhbFRpbWVUYWJsZScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuQm91dE9mTWFkbmVzc1JlYWxUaW1lVGFibGUnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiAnbm9uZScsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGNob2ljZXM6IHRhYmxlQ2hvaWNlLFxuICAgIG9uQ2hhbmdlOiBpZCA9PiBfdGFibGVTZXR0aW5nc0NoYW5nZWQoJ2JvdXRPZk1hZG5lc3NfUmVhbFRpbWUnLCBpZClcbiAgfSlcblxuICAvLyBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NQaG9iaWFzSW5kZXgnLHtcbiAgLy8gIG5hbWU6ICdTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzUGhvYmlhc0luZGV4JyxcbiAgLy8gIGhpbnQ6ICdTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzUGhvYmlhc0luZGV4SGludCcsXG4gIC8vICBzY29wZTogJ3dvcmxkJyxcbiAgLy8gIGNvbmZpZzogdHJ1ZSxcbiAgLy8gIGRlZmF1bHQ6IDksXG4gIC8vICB0eXBlOiBOdW1iZXIsXG4gIC8vICBvbkNoYW5nZTogIGlkID0+IF90YWJsZUluZGV4Q2hhbmdlZCggJ3Bob2JpYXNJbmRleCcsIGlkKVxuICAvLyB9KTtcblxuICAvLyBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NNYW5pYXNJbmRleCcse1xuICAvLyAgbmFtZTogJ1NFVFRJTkdTLkJvdXRPZk1hZG5lc3NNYW5pYXNJbmRleCcsXG4gIC8vICBoaW50OiAnU0VUVElOR1MuQm91dE9mTWFkbmVzc01hbmlhc0luZGV4SGludCcsXG4gIC8vICBzY29wZTogJ3dvcmxkJyxcbiAgLy8gIGNvbmZpZzogdHJ1ZSxcbiAgLy8gIGRlZmF1bHQ6IDEwLFxuICAvLyAgdHlwZTogTnVtYmVyLFxuICAvLyAgb25DaGFuZ2U6ICBpZCA9PiBfdGFibGVJbmRleENoYW5nZWQoICdtYW5pYXNJbmRleCcsIGlkKVxuICAvLyB9KTtcblxuICAvLyBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3NhbXBsZVBob2JpYXNUYWJsZScse1xuICAvLyAgbmFtZTogJ1NFVFRJTkdTLlNhbXBsZVBob2JpYXNUYWJsZScsXG4gIC8vICBzY29wZTogJ3dvcmxkJyxcbiAgLy8gIGNvbmZpZzogdHJ1ZSxcbiAgLy8gIGRlZmF1bHQ6ICdub25lJyxcbiAgLy8gIHR5cGU6IFN0cmluZyxcbiAgLy8gIGNob2ljZXM6IHRhYmxlQ2hvaWNlLFxuICAvLyAgb25DaGFuZ2U6ICBpZCA9PiBfdGFibGVTZXR0aW5nc0NoYW5nZWQoICdwaG9iaWFzJywgaWQpXG4gIC8vIH0pO1xuXG4gIC8vIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc2FtcGxlTWFuaWFzVGFibGUnLHtcbiAgLy8gIG5hbWU6ICdTRVRUSU5HUy5TYW1wbGVNYW5pYXNUYWJsZScsXG4gIC8vICBzY29wZTogJ3dvcmxkJyxcbiAgLy8gIGNvbmZpZzogdHJ1ZSxcbiAgLy8gIGRlZmF1bHQ6ICdub25lJyxcbiAgLy8gIHR5cGU6IFN0cmluZyxcbiAgLy8gIGNob2ljZXM6IHRhYmxlQ2hvaWNlLFxuICAvLyAgb25DaGFuZ2U6ICBpZCA9PiBfdGFibGVTZXR0aW5nc0NoYW5nZWQoICdtYW5pYXMnLCBpZClcbiAgLy8gfSk7XG5cbiAgZ2FtZS5Db0M3LnRhYmxlcyA9IHtcbiAgICBib3V0T2ZNYWRuZXNzX1N1bW1hcnk6XG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzU3VtbWFyeVRhYmxlJykgPT09ICdub25lJ1xuICAgICAgICA/IG51bGxcbiAgICAgICAgOiBnYW1lLnRhYmxlcy5nZXQoXG4gICAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzU3VtbWFyeVRhYmxlJylcbiAgICAgICAgICApLFxuICAgIGJvdXRPZk1hZG5lc3NfUmVhbFRpbWU6XG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzUmVhbFRpbWVUYWJsZScpID09PSAnbm9uZSdcbiAgICAgICAgPyBudWxsXG4gICAgICAgIDogZ2FtZS50YWJsZXMuZ2V0KFxuICAgICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1JlYWxUaW1lVGFibGUnKVxuICAgICAgICAgIClcbiAgICAvLyBtYW5pYXNJbmRleDogZ2Uuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NQaG9iaWFzSW5kZXgnKSxcbiAgICAvLyBwaG9iaWFzSW5kZXg6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NNYW5pYXNJbmRleCcpLFxuICAgIC8vIHBob2JpYXM6ICgnbm9uZScgPT0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2FtcGxlUGhvYmlhc1RhYmxlJykpP251bGw6Z2FtZS50YWJsZXMuZ2V0KGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3NhbXBsZVBob2JpYXNUYWJsZScpKSxcbiAgICAvLyBtYW5pYXM6ICgnbm9uZScgPT0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2FtcGxlTWFuaWFzVGFibGUnKSk/bnVsbDpnYW1lLnRhYmxlcy5nZXQoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2FtcGxlTWFuaWFzVGFibGUnKSksXG4gIH1cbn0pXG5cbi8vIEhvb2tzLm9uKCdwcmVDcmVhdGVBY3RvcicsIChjcmVhdGVEYXRhKSA9PiBDb0NBY3Rvci5pbml0VG9rZW4oIGNyZWF0ZURhdGEpKTtcblxuSG9va3Mub24oXG4gICdyZW5kZXJDb0M3Q2hhc2VTaGVldCcsXG4gIC8qKmFzeW5jKi8gKGFwcCwgaHRtbCwgZGF0YSkgPT5cbiAgICAvKiphd2FpdCovIENvQzdDaGFzZVNoZWV0LnNldFNjcm9sbChhcHAsIGh0bWwsIGRhdGEpXG4pXG5cbkhvb2tzLm9uKCdjbG9zZUNvQzdDaGFzZVNoZWV0JywgKGFwcCwgaHRtbCkgPT5cbiAgQ29DN0NoYXNlU2hlZXQub25DbG9zZShhcHAsIGh0bWwpXG4pXG5cbi8vIENhbGxlZCBvbiBjbG9zaW5nIGEgY2hhcmFjdGVyIHNoZWV0IHRvIGxvY2sgaXQgb24gZ2V0dGluZyBpdCB0byBkaXNwbGF5IHZhbHVlc1xuSG9va3Mub24oJ2Nsb3NlQWN0b3JTaGVldCcsIGNoYXJhY3RlclNoZWV0ID0+IGNoYXJhY3RlclNoZWV0Lm9uQ2xvc2VTaGVldCgpKVxuSG9va3Mub24oJ3JlbmRlckNvQzdDcmVhdHVyZVNoZWV0JywgKGFwcCwgaHRtbCwgZGF0YSkgPT5cbiAgQ29DN0NyZWF0dXJlU2hlZXQuZm9yY2VBdXRvKGFwcCwgaHRtbCwgZGF0YSlcbilcbkhvb2tzLm9uKCdyZW5kZXJDb0M3TlBDU2hlZXQnLCAoYXBwLCBodG1sLCBkYXRhKSA9PlxuICBDb0M3TlBDU2hlZXQuZm9yY2VBdXRvKGFwcCwgaHRtbCwgZGF0YSlcbilcbi8vIEhvb2tzLm9uKCd1cGRhdGVBY3RvcicsIChhY3RvciwgZGF0YVVwZGF0ZSkgPT4gQ29DQWN0b3IudXBkYXRlQWN0b3IoIGFjdG9yLCBkYXRhVXBkYXRlKSk7XG4vLyBIb29rcy5vbigndXBkYXRlVG9rZW4nLCAoc2NlbmUsIHRva2VuLCBkYXRhVXBkYXRlKSA9PiBDb0NBY3Rvci51cGRhdGVUb2tlbiggc2NlbmUsIHRva2VuLCBkYXRhVXBkYXRlKSk7XG5cbkhvb2tzLm9uKCdjaGF0TWVzc2FnZScsIENvQzdVdGlsaXRpZXMuUGFyc2VDaGF0RW50cnkpXG4vLyBIb29rcy5vbigncHJlQ3JlYXRlVG9rZW4nLCAoIHNjZW5lLCBhY3Rvciwgb3B0aW9ucywgaWQpID0+IENvQ0FjdG9yLnByZUNyZWF0ZVRva2VuKCBzY2VuZSwgYWN0b3IsIG9wdGlvbnMsIGlkKSlcbi8vIEhvb2tzLm9uKCdjcmVhdGVUb2tlbicsICggc2NlbmUsIGFjdG9yLCBvcHRpb25zLCBpZCkgPT4gQ29DQWN0b3IucHJlQ3JlYXRlVG9rZW4oIHNjZW5lLCBhY3Rvciwgb3B0aW9ucywgaWQpKVxuLy8gSG9va3Mub24oXCJyZW5kZXJDaGF0TG9nXCIsIChhcHAsIGh0bWwsIGRhdGEpID0+IENvQzdJdGVtLmNoYXRMaXN0ZW5lcnMoaHRtbCkpO1xuXG5Ib29rcy5vbignZ2V0U2NlbmVDb250cm9sQnV0dG9ucycsICgvKiBjb250cm9scyAqLykgPT4ge1xuICAvLyBpZiggZ2FtZS51c2VyLmlzR00pe1xuICAvLyAgbGV0IGdyb3VwID0gY29udHJvbHMuZmluZChiID0+IGIubmFtZSA9PSAndG9rZW4nKTtcbiAgLy8gIGdyb3VwLnRvb2xzLnB1c2goe1xuICAvLyAgICB0b2dnbGU6IHRydWUsXG4gIC8vICAgIGljb24gOiAnZmFzIGZhLWFuZ2xlLWRvdWJsZS11cCcsXG4gIC8vICAgIG5hbWU6ICdkZXZwaGFzZScsXG4gIC8vICAgIGFjdGl2ZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGV2ZWxvcG1lbnRFbmFibGVkJyksXG4gIC8vICAgIHRpdGxlOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkZXZlbG9wbWVudEVuYWJsZWQnKT8gZ2FtZS5pMThuLmxvY2FsaXplKCAnQ29DNy5EZXZQaGFzZUVuYWJsZWQnKTogZ2FtZS5pMThuLmxvY2FsaXplKCAnQ29DNy5EZXZQaGFzZURpc2FibGVkJyksXG4gIC8vICAgIG9uQ2xpY2sgOmFzeW5jICgpID0+IGF3YWl0IENvQzdVdGlsaXRpZXMudG9nZ2xlRGV2UGhhc2UoKVxuICAvLyAgfSk7XG4gIC8vICBncm91cC50b29scy5wdXNoKHtcbiAgLy8gICAgdG9nZ2xlOiB0cnVlLFxuICAvLyAgICBpY29uIDogJ2ZhcyBmYXMgZmEtdXNlci1lZGl0JyxcbiAgLy8gICAgbmFtZTogJ2NoYXJjcmVhdGUnLFxuICAvLyAgICBhY3RpdmU6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnKSxcbiAgLy8gICAgdGl0bGU6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnKT8gZ2FtZS5pMThuLmxvY2FsaXplKCAnQ29DNy5DaGFyQ3JlYXRpb25FbmFibGVkJyk6IGdhbWUuaTE4bi5sb2NhbGl6ZSggJ0NvQzcuQ2hhckNyZWF0aW9uRGlzYWJsZWQnKSxcbiAgLy8gICAgb25DbGljayA6YXN5bmMgKCkgPT4gYXdhaXQgQ29DN1V0aWxpdGllcy50b2dnbGVDaGFyQ3JlYXRpb24oKVxuICAvLyAgfSk7XG4gIC8vIH1cbn0pXG5cbi8vIEhvb2tzLm9uKCdyZW5kZXJTY2VuZUNvbnRyb2xzJywgKCkgPT4gQ29DN1V0aWxpdGllcy51cGRhdGVDaGFyU2hlZXRzKCkpO1xuLy8gSG9va3Mub24oJ3JlbmRlclNjZW5lTmF2aWdhdGlvbicsICgpID0+IENvQzdVdGlsaXRpZXMudXBkYXRlQ2hhclNoZWV0cygpKTtcbkhvb2tzLm9uKCdyZW5kZXJJdGVtU2hlZXQnLCBDb0M3UGFyc2VyLlBhcnNlU2hlZXRDb250ZW50KVxuSG9va3Mub24oJ3JlbmRlckpvdXJuYWxTaGVldCcsIENvQzdQYXJzZXIuUGFyc2VTaGVldENvbnRlbnQpXG5Ib29rcy5vbigncmVuZGVyQWN0b3JTaGVldCcsIENvQzdQYXJzZXIuUGFyc2VTaGVldENvbnRlbnQpXG4vLyBDaGF0IGNvbW1hbmQgcHJvY2Vzc2luZ1xuLy8gSG9va3Mub24oJ3ByZUNyZWF0ZUNoYXRNZXNzYWdlJywgQ29DN1BhcnNlci5QYXJzZU1lc3NhZ2UpO1xuLy8gSG9va3Mub24oJ2NyZWF0ZUNoYXRNZXNzYWdlJywgQ29DN0NoYXQuY3JlYXRlQ2hhdE1lc3NhZ2VIb29rKTtcbkhvb2tzLm9uKCdyZW5kZXJDaGF0TWVzc2FnZScsIChhcHAsIGh0bWwsIGRhdGEpID0+IHtcbiAgQ29DN0NoYXQucmVuZGVyQ2hhdE1lc3NhZ2VIb29rKGFwcCwgaHRtbCwgZGF0YSlcbiAgQ29DN1BhcnNlci5QYXJzZU1lc3NhZ2UoYXBwLCBodG1sLCBkYXRhKVxufSlcbi8vIFNoZWV0IFYyIGNzcyBvcHRpb25zXG4vLyBIb29rcy5vbigncmVuZGVyQ29DN0NoYXJhY3RlclNoZWV0VjInLCBDb0M3Q2hhcmFjdGVyU2hlZXRWMi5yZW5kZXJTaGVldCk7XG5Ib29rcy5vbigncmVuZGVyQWN0b3JTaGVldCcsIENvQzdDaGFyYWN0ZXJTaGVldFYyLnJlbmRlclNoZWV0KSAvLyBUT0RPIDogY2hhbmdlIGZyb20gQ29DN0NoYXJhY3RlclNoZWV0VjJcbkhvb2tzLm9uKCdyZW5kZXJJdGVtU2hlZXQnLCBDb0M3Q2hhcmFjdGVyU2hlZXRWMi5yZW5kZXJTaGVldCkgLy8gVE9ETyA6IGNoYW5nZSBmcm9tIENvQzdDaGFyYWN0ZXJTaGVldFYyXG5cbi8vIEhvb2tzLm9uKCdkcm9wQ2FudmFzRGF0YScsIENvQzdQYXJzZXIub25Ecm9wU29tZXRoaW5nKTtcbkhvb2tzLm9uKCdnZXRTY2VuZUNvbnRyb2xCdXR0b25zJywgQ29DN01lbnUuZ2V0QnV0dG9ucylcbkhvb2tzLm9uKCdyZW5kZXJTY2VuZUNvbnRyb2xzJywgQ29DN01lbnUucmVuZGVyQ29udHJvbHMpXG5cbkhvb2tzLm9uKCdkcm9wQ2FudmFzRGF0YScsIENvQzdDYW52YXMub25Ecm9wU29tZXRoaW5nKVxuXG5Ib29rcy5vbignZHJvcEFjdG9yU2hlZXREYXRhJywgRHJvcEFjdG9yU2hlZXREYXRhKVxuXG5mdW5jdGlvbiBhY3RpdmF0ZUdsb2JhbExpc3RlbmVyICgpIHtcbiAgY29uc3QgYm9keSA9ICQoJ2JvZHknKVxuICBib2R5Lm9uKCdjbGljaycsICdhLmNvYzctaW5saW5lLWNoZWNrJywgQ29DN0NoZWNrLl9vbkNsaWNrSW5saW5lUm9sbClcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgX29uTGVmdENsaWNrKVxufVxuXG4vKipcbiAqIENvbmZpZ3VyYXRpb24gb2YgVGlueU1DRSBlZGl0b3JcbiAqL1xuZnVuY3Rpb24gY29uZmlndXJlVGlueU1DRSAoKSB7XG4gIC8vIEFkZCBvbiBkcm9wIGV2ZW50IHRvIHRpbnlNQ0UgdG8gaGVuZGxlIHRoZSBsaW5rcyBkcm9wXG4gIHRpbnlNQ0UuUGx1Z2luTWFuYWdlci5hZGQoJ0NvQzdfRWRpdG9yX09uRHJvcCcsIGZ1bmN0aW9uIChlZGl0b3IpIHtcbiAgICBlZGl0b3Iub24oJ2Ryb3AnLCBldmVudCA9PiBDb0M3UGFyc2VyLm9uRWRpdG9yRHJvcChldmVudCwgZWRpdG9yKSlcbiAgfSlcblxuICAvLyBBZGQgY3VzdG9tIHBsdWdpbnMgdG8gbGlzdCBvZiBwbHVnaW5zLlxuICAvLyBDT05GSUcuVGlueU1DRS5wbHVnaW5zID0gYENvQzdfRWRpdG9yX09uSW5pdCBDb0M3X0VkaXRvcl9PbkRyb3AgJHtDT05GSUcuVGlueU1DRS5wbHVnaW5zfWBcbiAgQ09ORklHLlRpbnlNQ0UucGx1Z2lucyA9IGBDb0M3X0VkaXRvcl9PbkRyb3AgJHtDT05GSUcuVGlueU1DRS5wbHVnaW5zfWBcbiAgLy9cbiAgLy8gIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAvLyAgICAvLyBEZWZpbmUgY3NzIGFuZCBtZW51IGZvciBrZWVwZXIgb25seSBibG9ja3NcbiAgLy8gICAgQ09ORklHLlRpbnlNQ0UuY29udGVudF9jc3MucHVzaCgnL3N5c3RlbXMvQ29DNy9hc3NldHMvbWNlLmNzcycpXG4gIC8vICAgIENPTkZJRy5UaW55TUNFLnN0eWxlX2Zvcm1hdHMucHVzaCh7XG4gIC8vICAgICAgdGl0bGU6ICdDb0M3JyxcbiAgLy8gICAgICBpdGVtczogW1xuICAvLyAgICAgICAge1xuICAvLyAgICAgICAgICB0aXRsZTogJ0tlZXBlciBPbmx5JyxcbiAgLy8gICAgICAgICAgYmxvY2s6ICdzZWN0aW9uJyxcbiAgLy8gICAgICAgICAgY2xhc3NlczogJ2tlZXBlci1vbmx5JyxcbiAgLy8gICAgICAgICAgd3JhcHBlcjogdHJ1ZVxuICAvLyAgICAgICAgfVxuICAvLyAgICAgIF1cbiAgLy8gICAgfSlcbiAgLy8gIH0gZWxzZSB7XG4gIC8vICAgIC8vIFByZXZlbnQgcGxheWVyIHRvIGVkaXQgYW5kIHZpZXcgc291cmNlIGNvZGUgaWYgc2V0dGluZ3MgaXMgZGlzYWJsZWRcbiAgLy8gICAgaWYgKCFnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdlbmFibGVQbGF5ZXJTb3VyY2VDb2RlJykpXG4gIC8vICAgICAgQ09ORklHLlRpbnlNQ0UudG9vbGJhciA9IENPTkZJRy5UaW55TUNFLnRvb2xiYXIucmVwbGFjZSgnIGNvZGUnLCAnJylcbiAgLy8gICAgLy8gSGlkZSBrZWVwZXIgb25seSBibG9ja3MgdG8gcGxheWVyc1xuICAvLyAgICBDT05GSUcuVGlueU1DRS5jb250ZW50X3N0eWxlID0gJy5rZWVwZXItb25seSB7ZGlzcGxheTogbm9uZX0nXG4gIC8vICB9XG59XG5cbmZ1bmN0aW9uIF9vbkxlZnRDbGljayAoZXZlbnQpIHtcbiAgcmV0dXJuIGV2ZW50LnNoaWZ0S2V5XG59XG5cbkNPTkZJRy51aS5jb21wZW5kaXVtID0gQ29DN0NvbXBlbmRpdW1EaXJlY3RvcnlcbkNPTkZJRy51aS5hY3RvcnMgPSBDb0M3QWN0b3JEaXJlY3RvcnlcbiIsIi8qIGdsb2JhbCBDaGF0TWVzc2FnZSwgZ2FtZSwgSG9va3MsIFJvbGwsIHVpICovXG5cbi8qKlxuICpDYWxsb2ZDdGh1bGh1KDd0aEVkLikgRGVmaW5lIHlvdXIgb3duIGNvbW1hbmRzXG4gKkhlcmUsIHdlIHJlY2VpdmUgdGhlIGNoYXQgTWVzc2FnZXMgYW5kIGRldGVybWluZSBlYWNoIGNvbW1hbmQuXG4gKlsvQ0NdRGVmaW5lIGEgY29tbWFuZCB0byBqdWRnZSBhIG5vcm1hbCBkaWNlLlxuICpbL0NCUl0gQ29tbWFuZCB0byBkZWZpbmUgdGhlIGRlY2lzaW9uIG9uIGNvbWJpbmF0aW9uIHJvbGxzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ2NoYXRNZXNzYWdlJywgKGh0bWwsIGNvbnRlbnQpID0+IHtcbiAgICAvLyBJJ20gY3VycmVudGx5IHVzaW5nIGl0IGZvciB0ZXN0aW5nIGJvbnVzIGRpY2UuXG4gICAgaWYgKGNvbnRlbnQubWF0Y2goL15cXC8oY2JyfGNjKS9pKSkge1xuICAgICAgLy8gRXh0cmFjdGluZyBudW1iZXJzIGZyb20gY29tYmluYXRpb24gcm9sbHNcbiAgICAgIGNvbnN0IGNvbW1hbmRzID0gY29udGVudC5tYXRjaCgvKFxcZCspL2cpXG4gICAgICBpZiAoY29tbWFuZHMpIHtcbiAgICAgICAgbmV3IFJvbGwoJzFkMTAwJykucm9sbCh7IGFzeW5jOiB0cnVlIH0pLnRoZW4ociA9PiB7XG4gICAgICAgICAgY29uc3QgcyA9IHIucmVzdWx0XG4gICAgICAgICAgY29uc3QgcmVzID0gY29tbWFuZHNcbiAgICAgICAgICAgIC5tYXAobSA9PiB7XG4gICAgICAgICAgICAgIGxldCByZXMgPSAnJ1xuICAgICAgICAgICAgICBpZiAocyA8PSAxKSByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgICAgICAgICAgZWxzZSBpZiAocyA+PSAxMDApIHJlcyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GdW1ibGUnKVxuICAgICAgICAgICAgICBlbHNlIGlmIChzIDw9IG0gLyA1KSB7XG4gICAgICAgICAgICAgICAgcmVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChzIDw9IG0gLyAyKSB7XG4gICAgICAgICAgICAgICAgcmVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmRTdWNjZXNzJylcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChzIDw9IG0pIHJlcyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyU3VjY2VzcycpXG4gICAgICAgICAgICAgIGVsc2UgaWYgKHMgPj0gOTYpIHtcbiAgICAgICAgICAgICAgICBpZiAobSA8IDUwKSByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRnVtYmxlJylcbiAgICAgICAgICAgICAgICBlbHNlIHJlcyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GYWlsdXJlJylcbiAgICAgICAgICAgICAgfSBlbHNlIHJlcyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GYWlsdXJlJylcbiAgICAgICAgICAgICAgLy8gUmVjb3JkIHRoZSBmaXJzdCByZXN1bHRzLlxuICAgICAgICAgICAgICByZXMgKz0gJyAnICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlZhbHVlJykgKyAnICcgKyBtXG4gICAgICAgICAgICAgIHJldHVybiByZXNcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuam9pbignIC8gJylcbiAgICAgICAgICByLnRvTWVzc2FnZSh7XG4gICAgICAgICAgICBzcGVha2VyOiBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKCksXG4gICAgICAgICAgICBmbGF2b3I6IHJlc1xuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdJbmNvcnJlY3QgdXNhZ2Ugb2YgY29tbWFuZCcpXG4gICAgICB9XG4gICAgICAvLyByZXR1cm4gdG8gYXZvaWQgZXJyb3JzIGluIHRoZSBjb21tYW5kLlxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIGdhbWUgKi9cbmV4cG9ydCBmdW5jdGlvbiBEcm9wQWN0b3JTaGVldERhdGEgKGFjdG9yLCBzaGVldCwgZGF0YSkge1xuICBpZiAoZGF0YS50eXBlID09PSAnSXRlbScgJiYgZGF0YS5hY3RvcklkKSB7XG4gICAgaWYgKGFjdG9yLmRhdGEuX2lkID09PSBkYXRhLmFjdG9ySWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBsZXQgYWN0b3JGcm9tID0gbnVsbFxuICAgIGlmIChkYXRhLnNjZW5lSWQgJiYgZGF0YS50b2tlbklkKSB7XG4gICAgICBhY3RvckZyb20gPSBnYW1lLnNjZW5lcy5nZXQoZGF0YS5zY2VuZUlkKS50b2tlbnMuZ2V0KGRhdGEudG9rZW5JZCkuYWN0b3JcbiAgICB9IGVsc2Uge1xuICAgICAgYWN0b3JGcm9tID0gZ2FtZS5hY3RvcnMuZ2V0KGRhdGEuYWN0b3JJZClcbiAgICB9XG4gICAgc3dpdGNoIChhY3Rvci5kYXRhLnR5cGUpIHtcbiAgICAgIGNhc2UgJ2NoYXJhY3Rlcic6XG4gICAgICBjYXNlICducGMnOlxuICAgICAgY2FzZSAnY3JlYXR1cmUnOlxuICAgICAgICBpZiAoIVsnY2hhc2UnXS5pbmNsdWRlcyhkYXRhLmRhdGEudHlwZSkpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAndmVoaWNsZSc6XG4gICAgICAgIHJldHVyblxuICAgICAgY2FzZSAnY29udGFpbmVyJzpcbiAgICAgICAgaWYgKCFbJ2Jvb2snLCAnaXRlbScsICdzcGVsbCcsICd3ZWFwb24nXS5pbmNsdWRlcyhkYXRhLmRhdGEudHlwZSkpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoYWN0b3JGcm9tKSB7XG4gICAgICBhY3RvckZyb20uZGVsZXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZGF0YS5kYXRhLl9pZF0pXG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsiQ29DN0RpY2UiLCJtb2RpZiIsInJvbGxNb2RlIiwiaGlkZURpY2UiLCJhbHRlcm5hdGl2ZURpY2UiLCJnYW1lIiwibW9kdWxlcyIsImdldCIsImFjdGl2ZSIsInNldHRpbmdzIiwicm9sbCIsIlJvbGwiLCJyZXBlYXQiLCJNYXRoIiwiYWJzIiwiYXN5bmMiLCJyZXN1bHQiLCJ1bml0IiwidG90YWwiLCJyZXN1bHRzIiwidGVucyIsImQiLCJkaWNlIiwiQ09ORklHIiwiRGljZSIsInRlcm1zIiwidCIsInB1c2giLCJpbmNsdWRlcyIsIm1heCIsImZpbHRlciIsImxlbmd0aCIsIm1pbiIsInN5bmNEaWNlIiwiY2hhdERhdGEiLCJ3aGlzcGVyIiwiYmxpbmQiLCJDaGF0TWVzc2FnZSIsImFwcGx5Um9sbE1vZGUiLCJkaWNlM2QiLCJzaG93Rm9yUm9sbCIsInVzZXIiLCJjcmVhdGVJbmxpbmVSb2xsIiwiZGF0YSIsImNscyIsImRhdGFzZXQiLCJ0aXRsZSIsImZvcm11bGEiLCJlc2NhcGUiLCJKU09OIiwic3RyaW5naWZ5IiwiZXJyIiwiYSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImsiLCJ2IiwiT2JqZWN0IiwiZW50cmllcyIsImlubmVySFRNTCIsImlzQ3RybEtleSIsImV2ZW50IiwibWV0YUtleSIsImN0cmxLZXkiLCJrZXlDb2RlIiwiY2hhdEhlbHBlciIsInN0cmluZyIsInJlcGxhY2UiLCJ0b1VwcGVyQ2FzZSIsIm1lc3NhZ2UiLCJvcHRpb25zIiwibWVzc2FnZURhdGEiLCJmbGF2b3IiLCJzcGVha2VyIiwiZ2V0U3BlYWtlciIsInR5cGUiLCJDT05TVCIsIkNIQVRfTUVTU0FHRV9UWVBFUyIsIldISVNQRVIiLCJST0xMIiwiRElDRV9ST0xMX01PREVTIiwiU0VMRiIsImlkIiwiY29udGVudCIsImNyZWF0ZSIsInRoZW4iLCJtc2ciLCJ0b0xvd2VyQ2FzZSIsImtleSIsInNjZW5lSWQiLCJ0b2tlbklkIiwic3BsaXQiLCJhY3RvcnMiLCJ0b2tlbnMiLCJnZXRUb2tlbkZyb21LZXkiLCJhY3RvciIsImFjdG9yS2V5IiwiZ2V0QWN0b3JGcm9tS2V5IiwidG9rZW4iLCJzY2VuZSIsIm5hbWUiLCJhbGlhcyIsIm9iamVjdCIsImVsZW1lbnQiLCJvYmplY3ROYW1lIiwicHJvcCIsImtleXMiLCJzdGFydHNXaXRoIiwiYXR0YWNoT2JqZWN0VG9FbGVtZW50IiwiZGVzZXJpYWxpemUiLCJvYmoiLCJ2YWx1ZSIsInMiLCJzbGljZSIsIm9ialByb3AiLCJpbmRleE9mIiwib2JqTmFtZSIsInN1YnN0cmluZyIsIk51bWJlciIsInRvU3RyaW5nIiwidG9rZW5Eb2MiLCJzY2VuZXMiLCJ0b2tlbkRhdGEiLCJnZXRFbWJlZGRlZERvY3VtZW50IiwiVG9rZW4iLCJkdXBsaWNhdGUiLCJnZXRBY3RvclRva2VuIiwiaW1nIiwic3RhcnRUb2tlbiIsImVuZFRva2VuIiwiY2VudGVyIiwibWFwIiwiZGlzdGFuY2UiLCJncmlkVW5pdCIsImNhbnZhcyIsImdyaWRVbml0cyIsInJheSIsIlJheSIsInNlZ21lbnQiLCJncmlkIiwibWVhc3VyZURpc3RhbmNlcyIsImdyaWRTcGFjZXMiLCJlbGV2YXRpb24iLCJzcXJ0IiwidWkiLCJub3RpZmljYXRpb25zIiwid2FybiIsImkxOG4iLCJsb2NhbGl6ZSIsIkNvQzdSb2xsIiwiY2FyZCIsInJvbGxEaXYiLCJxdWVyeVNlbGVjdG9yIiwiZ2V0T2JqZWN0RnJvbUVsZW1lbnQiLCJ0aGlzIiwic3VjY2Vzc0xldmVsIiwicGFyc2VJbnQiLCJDb0M3Q2hlY2siLCJyZWd1bGFyIiwiZm9ybWF0IiwiaGFyZCIsImV4dHJlbWUiLCJjcml0aWNhbCIsImZ1bWJsZSIsImZhaWx1cmUiLCJpdGVtSWQiLCJpdGVtcyIsInNraWxsSWQiLCJzaG93RGljZVJvbGwiLCJkaWNlUmVzdWx0cyIsImRpZVJlc3VsdCIsImRpY2VzIiwiZGljZURhdGEiLCJzaG93IiwiaGFzQm9udXMiLCJkaWNlTW9kaWZpZXIiLCJib251cyIsImJvbnVzVHlwZSIsInRlbkRpY2UiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZGllIiwic2VsZWN0ZWQiLCJpc01heCIsImlzTWluIiwidW5pdERpZSIsImluY3JlYXNlU3VjY2VzcyIsImlzbCIsIm5ld1N1Y2Nlc0xldmVsIiwibHVja05lZWRlZCIsImx1Y2tOZWVkZWRUeHQiLCJsdWNrTmVlZGVkVmFsdWUiLCJjaGVjayIsInJvbGxUeXBlIiwic2lkZSIsImFjdGlvbiIsInJlZk1lc3NhZ2VJZCIsInJlZmVyZW5jZU1lc3NhZ2VJZCIsImRpZmZpY3VsdHkiLCJza2lsbCIsIml0ZW0iLCJkaWNlTW9kIiwicmF3VmFsdWUiLCJpc0Z1bWJsZSIsImlzQ3JpdGljYWwiLCJjaGFyYWN0ZXJpc3RpYyIsInRva2VuS2V5IiwiaXNUb2tlbiIsImFjdG9ySWQiLCJodG1sRWxlbWVudCIsImdldEZyb21DaGVjayIsImF0dGFjaFRvRWxlbWVudCIsIkNvQzdEYW1hZ2UiLCJkYW1hZ2VTdHJpbmciLCJkYW1hZ2UiLCJyb2xscyIsInIiLCJDb0M3VXRpbGl0aWVzIiwieCIsImlzTmFOIiwidmFsaWRhdGUiLCJodG1sIiwibWF0Y2giLCJzZXRUaW1lb3V0IiwiX0V4ZWNDb21tYW5kIiwiam9pbiIsInRocmVzaG9sZCIsImZsYXREaWNlTW9kaWZpZXIiLCJmbGF0VGhyZXNob2xkTW9kaWZpZXIiLCJlc2NhcGVkIiwiZGlmZmljdWx0eUxldmVsIiwiYXNrIiwidGhyZXNob2xkU3RyIiwiZGlmZmljdWx0eVN0ciIsImNvbnZlcnREaWZmaWN1bHR5IiwiZGlhbG9nT3B0aW9ucyIsIm1vZGlmaWVyIiwiYXNrVmFsdWUiLCJ1c2FnZSIsIlJvbGxEaWFsb2ciLCJ1bmRlZmluZWQiLCJ0b01lc3NhZ2UiLCJpbmZvcyIsImNyZWF0dXJlIiwiY3JlYXR1cmVEYXRhIiwiY29uc3RydWN0b3IiLCJnZXRBY3RvckZyb21TdHJpbmciLCJzcGVjaWUiLCJzYW5Mb3NzTWF4IiwiYWN0b3JTdHJpbmciLCJ2YWx1ZXMiLCJmaW5kIiwiY2hhciIsImNoYXJLZXkiLCJzaG9ydCIsImxhYmVsIiwic3lzdGVtIiwidGVtcGxhdGUiLCJBY3RvciIsInRlbXBsYXRlcyIsImNoYXJhY3RlcmlzdGljcyIsIlN0cmluZyIsInVua25vd24iLCJwcmV2ZW50RGVmYXVsdCIsInNraWxsQ2hlY2siLCJzaGlmdEtleSIsIndlYXBvbiIsImJhc2VBY3RvciIsImdldERvY3VtZW50Q2xhc3MiLCJ0b0pTT04iLCJwYXJlbnQiLCJ3ZWFwb25DaGVjayIsInJvbGxEaWNlIiwiYmFyIiwic2xvdCIsIm9yaWdpbiIsImNvbW1hbmQiLCJwYWNrTmFtZSIsInBhY2siLCJwYWNrcyIsIm1ldGFkYXRhIiwiZW50aXR5IiwiZ2V0RG9jdW1lbnQiLCJDb0M3SXRlbSIsImlzQW55U3BlYyIsIm1hY3JvIiwibWFjcm9zIiwiY29udGVudHMiLCJtIiwiTWFjcm8iLCJhc3NpZ25Ib3RiYXJNYWNybyIsInRvZ2dsZSIsInNldCIsImluZm8iLCJzb2NrZXQiLCJlbWl0IiwidXBkYXRlQ2hhclNoZWV0cyIsIkhvb2tzIiwiY2FsbCIsImhhc1BsYXllck93bmVyIiwiY2hhdENvbnRlbnQiLCJxdWlja0hlYWxlciIsImlzQ3JpdGljYWxXb3VuZHMiLCJzdGF0dXMiLCJjcml0aWNhbFdvdW5kcyIsImRhaWx5U2FuaXR5TG9zcyIsImF0dHJpYnMiLCJzYW4iLCJkYWlseUxvc3MiLCJocFZhbHVlIiwiaHAiLCJocE1heCIsIm9uZUZpZnRoU2FuaXR5IiwiZmxvb3IiLCJtcFZhbHVlIiwibXAiLCJtcE1heCIsIm51bWJlciIsInVwZGF0ZSIsIk9USEVSIiwiZmFzdEZvcndhcmQiLCJpc0dNIiwiY29udHJvbGxlZCIsImNoYXJhY3RlciIsInRrIiwic2hlZXQiLCJyZW5kZXJlZCIsInJlbmRlciIsImlzT3duZXIiLCJlbnRpdHlUeXBlIiwib3JpZ2luYWxFdmVudCIsImRhdGFMaXN0IiwicGFyc2UiLCJkYXRhVHJhbnNmZXIiLCJnZXREYXRhIiwiZG9jdW1lbnROYW1lIiwiZm9sZGVyIiwiZm9sZGVycyIsInRleHQiLCJuYXZpZ2F0b3IiLCJjbGlwYm9hcmQiLCJ3aW5kb3ciLCJpc1NlY3VyZUNvbnRleHQiLCJ3cml0ZVRleHQiLCJ0ZXh0QXJlYSIsInN0eWxlIiwicG9zaXRpb24iLCJsZWZ0IiwidG9wIiwiYm9keSIsImFwcGVuZENoaWxkIiwiZm9jdXMiLCJzZWxlY3QiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImV4ZWNDb21tYW5kIiwiRXJyb3IiLCJyZW1vdmUiLCJjYXRjaCIsImVycm9yIiwibGVuIiwicVN0cmluZyIsImN1cnJlbnQiLCJpIiwiY2hhckF0IiwiY2hhckNvZGVBdCIsImoiLCJDaGF0Q2FyZEFjdG9yIiwiX2lzQmxpbmQiLCJfcm9sbE1vZGUiLCJ0YXJnZXRzIiwidGFyZ2V0VG9rZW4iLCJ0YXJnZXRBY3RvciIsIl90YXJnZXRUb2tlbiIsIl90YXJnZXRLZXkiLCJ0YXJnZXRlZFRva2VucyIsInBvcCIsIl90YXJnZXRBY3RvciIsImdldFdlYXBvblNraWxscyIsImdldEFjdG9ySW1nRnJvbUtleSIsInRhcmdldEtleSIsInRhcmdldCIsInNwZWFrZXJEYXRhIiwiZ2V0V2hpc3BlclJlY2lwaWVudHMiLCJyZXBsYWNlciIsIkpTT05Sb2xsRGF0YSIsIlNhbkNoZWNrQ2FyZCIsInNhbkRhdGEiLCJzdXBlciIsIkJvb2xlYW4iLCJzYW5Nb2RpZmllciIsInNhbkRpZmZpY3VsdHkiLCJzdGF0ZSIsImlzQmxpbmQiLCJjcmVhdHVyZUtleSIsIl9fY3JlYXR1cmUiLCJzYW5Sb2xsZWQiLCJzYW5DaGVjayIsImlzRmFpbHVyZSIsInNhbk1heCIsImZhaWxlZCIsInNhbk1pbiIsInBhc3NlZCIsInNhbkxvc3MiLCJzYW5Mb3N0VG9DcmVhdHVyZSIsIm1heFBvc3NpYmxlU2FuTG9zc1RvQ3JlYXR1cmUiLCJtYXhTYW5Mb3NzVG9UaGlzQ3JlYXR1cmUiLCJldmFsdWF0ZSIsIm1heGltaXplIiwiY3JlYXR1cmVFbmNvdW50ZXJlZCIsImNyZWF0dXJlU3BlY2llRW5jb3VudGVyZWQiLCJteXRob3NJbnNhbml0eUV4cGVyaWVuY2VkIiwiZ2V0Q3JlYXR1cmVTYW5EYXRhIiwiaXNJbkFCb3V0T2ZNYWRuZXNzIiwic2FuTG9zc0Zvcm11bGEiLCJpbW11bmVUb0NyZWF0dXJlIiwiYm91dER1cmF0aW9uIiwiYm91dFJlYWxUaW1lIiwiYm91dFN1bW1hcnkiLCJzYW5pdHkiLCJ1bmRlcmx5aW5nIiwiaW5kZWZpbnRpZSIsImR1cmF0aW9uVGV4dCIsIm15dGhvc0dhaW4iLCJrZWVwQ3JlYXR1cmVTYW5EYXRhIiwiaXNBY3Rvckxvb3NpbmdTYW4iLCJmaW5pc2giLCJhcHBseVNhbkxvc3MiLCJib3V0UmVzdWx0IiwiZW50ZXJCb3V0T2ZNYWRuZXNzIiwiYm91dE9mTWFkbmVzc1Jlc29sdmVkIiwiYm91dE9mTWFkbmVzc092ZXIiLCJ0cmlnZ2VySW5zYW5pdHkiLCJleGl0Qm91dE9mTWFkbmVzcyIsImN0aHVsaHVNeXRob3NBd2FyZGVkIiwiYW1vdW50R2FpbmVkIiwiZXhwZXJpZW5jZUZpcnN0TXl0aG9zSW5zYW5pdHkiLCJjdGh1bGh1TXl0aG9zU2tpbGwiLCJvbGRWYWx1ZSIsImFkanVzdG1lbnRzIiwiZXhwZXJpZW5jZSIsImlzQnlwYXNzZWQiLCJhdHRyaWJ1dGUiLCJfcGVyZm9ybSIsImZvcmNlRFNOIiwiaW52b2x1bnRhcnlBY3Rpb25QZXJmb3JtZWQiLCJzYW5Mb3NzUm9sbGVkIiwiaWdub3JlU2FuQ2hlY2siLCJsaW1pdGVkTG9zc1RvQ3JlYXR1cmUiLCJtYXhTYW5Mb3NzIiwibWluaW1pemUiLCJpbW11bmVBbHJlYWR5SW5Cb3V0Iiwic2FuTG9zc0FwcGxpZWQiLCJpbnRSb2xsZWQiLCJpbnNhbml0eSIsInNhbkxvc3NSb2xsIiwic2hvd1JvbGxEaWNlM2QiLCJsb29zZVNhblRvQ3JlYXR1cmUiLCJsb29zZVNhbiIsImFjdG9yTG9zdFNhbiIsInBlcm1hbmVudGx5SW5zYW5lIiwiaXNJbnNhbmUiLCJzaGFrZW4iLCJpbnNhbml0eVRhYmxlUm9sbGVkIiwiZGFpbHlTYW5Mb3NzIiwidGVtcG9yYXJ5SW5zYW5lIiwiaW5kZWZpbml0ZWx5SW5zYW5lIiwibWVtb3J5UmVwcmVzc2VkIiwiaW50Q2hlY2siLCJpbnREaWZmaWN1bHR5IiwiaW50TW9kaWZpZXIiLCJhbHJlYWR5SW5zYW5lIiwiZW50ZXJJbnNhbml0eSIsImluc2FuaXR5RHVyYXRpb25Sb2xsIiwiaW5zYW5pdHlEdXJhdGlvbiIsImR1cmF0aW9uIiwicmVzZXRDcmVhdHVyZSIsInJlc2V0U3BlY2llIiwiX19pbmxpbmVTYW5DaGVjayIsImlubGluZUNoZWNrIiwib3V0ZXJIVE1MIiwiX19pbmxpbmVTYW5Mb3NzUm9sbCIsIl9faW5saW5lSW50Q2hlY2siLCJyZW5kZXJUZW1wbGF0ZSIsImh0bWxDYXJkRWxlbWVudCIsIiQiLCJwYXJzZUhUTUwiLCJjaGF0TWVzc2FnZSIsIm1lc3NhZ2VzIiwibWVzc2FnZUlkIiwiY2hhdCIsInVwZGF0ZU1lc3NhZ2UiLCJhcmdzIiwiY2hhdENhcmQiLCJzYXkiLCJodG1sQ2FyZCIsImdldEZyb21DYXJkIiwic2FuQ2hlY2tDYXJkRGF0YSIsInVuZXNjYXBlIiwic2FuQ2hlY2tDYXJkIiwiYXNzaWduIiwiY2xvc2VzdCIsImZyb21EYXRhIiwiQ09DNyIsIm52Y3QiLCJkcmthIiwiZGR0cyIsImdsaXQiLCJwdWxwIiwibWRybiIsInN0ciIsImNvbiIsInNpeiIsImRleCIsImFwcCIsImludCIsInBvdyIsImVkdSIsIm5vYWRqdXN0bWVudHMiLCJub3hwZ2FpbiIsInNwZWNpYWwiLCJyYXJpdHkiLCJjb21iYXQiLCJmaWdodGluZyIsImZpcmVhcm0iLCJtZWxlZSIsInJuZ2QiLCJtbnZyIiwidGhyb3duIiwic2hvdGd1biIsImRicmwiLCJpbXBsIiwiYnJzdCIsImF1dG8iLCJhaGRiIiwiYWRkYiIsInNsbnQiLCJzcGNsIiwibW9udCIsImJsc3QiLCJzdHVuIiwicmFyZSIsImJ1cm4iLCJkaXNtaXNzIiwiY29udGFjdCIsInN1bW1vbiIsImJpbmQiLCJlbmNoYW50bWVudCIsImdhdGUiLCJteXRob3MiLCJvY2N1bHQiLCJvdGhlciIsInBoeXNpY2FsIiwibWVudGFsIiwibWlzY2VsbGFuZW91cyIsImJhc2ljIiwiaW5zYW5lIiwibWFuaWEiLCJwaG9iaWEiLCJjbGFzc2ljIiwibG92ZWNyYWZ0aWFuIiwibW9kZXJuIiwiYWN0b3JzaGVldCIsInRlbXBvSW5zYW5lIiwiaW5kZWZJbnNhbmUiLCJ1bmNvbnNjaW91cyIsImR5aW5nIiwicHJvbmUiLCJkZWFkIiwibmV3Qm9va05hbWUiLCJuZXdTa2lsbE5hbWUiLCJuZXdTcGVsbE5hbWUiLCJuZXdJdGVtTmFtZSIsIm5ld1dlYXBvbk5hbWUiLCJjcmVhdHVyZUZpZ2h0aW5nU2tpbGwiLCJkb2RnZVNraWxsTmFtZSIsImNyZWRpdFJhdGluZ1NraWxsTmFtZSIsIkN0aHVsaHVNeXRob3NOYW1lIiwiZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUiLCJmaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lIiwiY29tYmF0Q2FyZHMiLCJmaWdodEJhY2siLCJkb2RnZSIsIm1hbmV1dmVyIiwibm9SZXNwb25zZSIsIkNvQzdDb25DaGVjayIsImRlbnlQdXNoIiwiX2FjdG9ySWQiLCJpc1N1Y2Nlc3MiLCJjb25DaGVjayIsImh0bWxDaGVjayIsImdldEZyb21FbGVtZW50Iiwicm9sbENvbiIsInJlcGxhY2VXaXRoIiwiZ2V0Q2hlY2tFbGVtZW50IiwiaGlkZURpY2VSZXN1bHQiLCJzdGF5QWxpdmUiLCJmYWxsRGVhZCIsImZhbGxVbmNvbnNjaW91cyIsImFwcGxpZWQiLCJpc1JvbGxlZCIsIlNraWxsU2VsZWN0RGlhbG9nIiwiRGlhbG9nIiwiYWN0aXZhdGVMaXN0ZW5lcnMiLCJjbGljayIsIl9vblNlbGVjdFNraWxsQ2xpY2tlZCIsImxpIiwiY3VycmVudFRhcmdldCIsInNraWxscyIsImluZGV4IiwiZGlzcGxheSIsImFkZGVkIiwiaW5uZXJUZXh0Iiwib3B0aW9uc0NvdW50IiwiY2xvc2UiLCJidXR0b25zIiwiY2xhc3NlcyIsIlBvaW50U2VsZWN0RGlhbG9nIiwiX29uU2VsZWN0Q2hhcmFjdGVyaXN0aWMiLCJfb25CdXR0b25DbGlja2VkIiwiaXRlbUxpc3QiLCJvcHRpb25hbCIsInRvZ2dsZUNsYXNzIiwibXVsdGlwbGllciIsInJlc29sdmVkIiwiY29udGFpbnMiLCJDaGFyYWNTZWxlY3REaWFsb2ciLCJDaGFyYWNSb2xsRGlhbG9nIiwicm9sbGVkIiwib24iLCJfb25DaGFuZ2VJbnB1dCIsIl9vblN1Ym1pdCIsIl9vblJvbGxDaGFyYWN0ZXJpc3RpYyIsIl9vbkluY3JlYXNlQ2hhcmFjdGVyaXN0aWMiLCJfb25EZWNyZWFzZUNoYXJhY3RlcmlzdGljIiwiX29uUmVzZXRDaGFyYWN0ZXJpc3RpYyIsIl9vbkJ1dHRvbiIsImNoYXJhY0tleSIsInJvbGxDaGFyYWN0ZXJpc3RpYyIsImluY3JlYXNlQ2hhcmFjdGVyaXN0aWMiLCJkZWNyZWFzZUNoYXJhY3RlcmlzdGljIiwicmVzZXRDaGFyYWN0ZXJpc3RpYyIsImNoZWNrVG90YWwiLCJpbnB1dCIsIl9lbGVtZW50IiwibGlzdCIsInBvaW50cyIsInZhbGlkYXRpb24iLCJlbmFibGVkIiwiZWwiLCJwb2ludHNXYXJuaW5nIiwiU2tpbGxTcGVjU2VsZWN0RGlhbG9nIiwic3BlY2lhbGl6YXRpb25OYW1lIiwiYmFzZVZhbHVlIiwiaGFzU2tpbGxzIiwiYmFzZSIsImZvcm1EYXRhIiwic3BlY2lhbGl6YXRpb24iLCJjYWxsYmFjayIsIkZvcm1EYXRhIiwiZGVmYXVsdCIsIkNvQzdNZWxlZVJlc29sdGlvbiIsImluaXRpYXRvck1lc3NhZ2UiLCJ0YXJnZXRNZXNzYWdlIiwiQ29DN01lbGVlVGFyZ2V0IiwiZ2V0RnJvbU1lc3NhZ2VJZCIsIkNvQzdNZWxlZUluaXRpYXRvciIsImluaXRpYXRvciIsInJlc3VsdFN0cmluZyIsInJvbGxEYW1hZ2UiLCJ3aW5uZXIiLCJ3aW5uZXJJbWciLCJ3aW5uZXJUaXRsZSIsImxvb3NlciIsImNyaXRpY2FsRGFtYWdlIiwiZG9jdW1tZW50IiwicGFyZW50TWVzc2FnZUlkIiwiaW5pdGlhdG9yS2V5Iiwib3V0bnVtYmVyZWQiLCJzdXJwcmlzZWQiLCJhdXRvU3VjY2VzcyIsImFkdmFudGFnZSIsImRpc2FkdmFudGFnZSIsImRvZGdpbmciLCJub3RSZXNwb25kaW5nIiwiZmlnaHRpbmdCYWNrIiwibWFuZXV2ZXJpbmciLCJfaW5pdGlhdG9yS2V5IiwiX2luaXRpYXRvciIsInB1Ymxpc2hVcGRhdGUiLCJmbGFnIiwiY2FtZWxGbGFnIiwiaHlwaGVuVG9DYW1lbENhc2UiLCJ0b2dnbGVGbGFnIiwidXBkYXRlQ2hhdENhcmQiLCJmbGFnTmFtZSIsIm93bmVycyIsImdtcyIsInVzZXJzIiwicGVybWlzc2lvbiIsIkVOVElUWV9QRVJNSVNTSU9OUyIsIk9XTkVSIiwicHJvbXB0Iiwid2VhcG9uSWQiLCJwdWJsaXNoIiwiaXNVbmtvbnduIiwicmVzb2x1dGlvbkNhcmQiLCJyZXNvbHV0aW9uTWVzc2FnZSIsInByZUNyZWF0ZU1lc3NhZ2UiLCJyb2xsSWNvbnMiLCJyb2xsQ29sb3IiLCJyb2xsVGl0bGUiLCJzdWNjZXNzIiwidXBncmFkZVJvbGwiLCJsdWNrQW1vdW50IiwibmV3U3VjY2Vzc0xldmVsIiwib2xkQ2FyZCIsInNwZW5kTHVjayIsImx1Y2tTcGVudCIsInByb2Nlc3NlZCIsImRpY2VSb2xscyIsInJlc3VsRGV0YWlscyIsImRpY2VUb3RhbCIsIkNvQzdDaGF0IiwiQ29DN1JhbmdlSW5pdGlhdG9yIiwiY292ZXIiLCJ0YXJnZXRDYXJkIiwic2luZ2xlU2hvdCIsIm11bHRpcGxlU2hvdHMiLCJidXJzdCIsImZ1bGxBdXRvIiwiYWltZWQiLCJ0b3RhbEJ1bGxldHNGaXJlZCIsIl90YXJnZXRzIiwiQ29DN1JhbmdlVGFyZ2V0IiwicHJvcGVydGllcyIsImdldERpc3RhbmNlIiwicm91bmRlZERpc3RhbmNlIiwicm91bmQiLCJkaXN0YW5jZVVuaXQiLCJkaXN0SW5ZZCIsInRvWWFyZHMiLCJwb2ludEJsYW5rUmFuZ2UiLCJiYXNlUmFuZ2UiLCJsb25nUmFuZ2UiLCJleHRyZW1lUmFuZ2UiLCJvdXRPZlJhbmdlIiwibWFpbiIsImFsdGVybmF0aXYiLCJtYWluV2VhcG9uU2tpbGwiLCJfYWltaW5nIiwiZ2V0QWN0b3JGbGFnIiwiX3Nob3RzIiwic2hvdHMiLCJzaG90RGlmZmljdWx0eSIsImIiLCJhbnlIaXQiLCJoaXRzIiwiaGl0Iiwic2hvdCIsImdldEJ1bGxldExlZnQiLCJ1c2VzUGVyUm91bmQiLCJpZ25vcmVBbW1vIiwiaWdub3JlVXNlc1BlclJvdW5kIiwibWF4U2hvdHMiLCJfdm9sbGV5U2l6ZSIsInNpemUiLCJhdXRvV2VhcG9uU2tpbGwiLCJ2b2xsZXlTaXplIiwiZ2V0VGFyZ2V0RnJvbUtleSIsImNhbGNUYXJnZXRzRGlmZmljdWx0eSIsImFjdGl2ZVRhcmdldCIsInJhbmdlIiwibm9ybWFsIiwibG9uZyIsImRpZmZpY3VsdHlOYW1lIiwiYWltaW5nIiwiY3VycmVudFNob3RSYW5rIiwicmVsb2FkIiwiaW1wb3NzaWJsZSIsImxldmVsIiwiYWRkU2hvdEF0Q3VycmVudFRhcmdldCIsImFjdG9yTmFtZSIsImJ1bGxldHNTaG90IiwidHJhbnNpdEJ1bGxldHMiLCJidWxsZXRzU2hvdFRyYW5zaXQiLCJ0cmFuc2l0IiwiYnVsbGV0TGVmdCIsInRvdGFsQW1tbyIsInByZXZpb3VzU2hvdCIsIm11bHRpVGFyZ2V0Iiwid2VhcG9uTWFsZnVuY3Rpb24iLCJzaG9vdEF0VGFyZ2V0Iiwic2hvb3RCdWxsZXRzIiwiaGFzTWFsZnVuY3Rpb24iLCJidWxsZXRGaXJlZCIsImF1dG9GaXJlIiwiZGV0YWlscyIsImNoYW5nZVZvbGxleVNpemUiLCJwYXNzUm9sbCIsInJvbGxJbmRleCIsInVwZ3JhZGVpbmRleCIsImluY3JlYXNlZFN1Y2Nlc3MiLCJyYW5nZUluaXRpYXRvciIsImNhcmRUYXJnZXRzIiwiY2FyZFNob3RzIiwiZGFtYWdlUm9sbHMiLCJkciIsImRhbWFnZVJvbGwiLCJzdWNjZXNzZnVsSGl0cyIsImgiLCJkYW1hZ2VGb3JtdWxhIiwiZGFtYWdlRGllIiwiZ2V0TWFpbkRpZSIsIm1heERhbWFnZSIsImNyaXRpY2FsRGFtYWdlRm9ybXVsYSIsImltcGFsZSIsImNyaXRpY2FsRGFtYWdlRGllIiwiaW1wYWxpbmdTaG90cyIsInN1Y2Nlc3NmdWxTaG90cyIsInRhcmdldE5hbWUiLCJkZWFsdCIsImRhbWFnZVJvbGxlZCIsImRJbmRleCIsInRvdGFsVGFrZW4iLCJ0b3RhbEFic29yYmVkIiwickluZGV4IiwiZGVhbHRBbW91bnQiLCJkZWFsRGFtYWdlIiwidGFrZW4iLCJhYnNvcmJlZCIsImFybW9yIiwiZGFtYWdlRGVhbHQiLCJpbk1lbGVlIiwiX2JpZyIsImJ1aWxkIiwiX3NtYWxsIiwiYmlnIiwic21hbGwiLCJtb3YiLCJfZmFzdCIsIl9hY3RvciIsIl90b2tlbiIsImZhc3QiLCJpc0Zhc3QiLCJJbnRlcmFjdGl2ZUNoYXRDYXJkIiwiX29wdGlvbnMiLCJtZXJnZU9iamVjdCIsImRlZmF1bHRPcHRpb25zIiwib3B0aW9ubmFsQ2hhdERhdGEiLCJkYXRhU3RyaW5nIiwiY2FyZENsYXNzIiwiY3NzQ2xhc3NlcyIsImNvbXB1dGUiLCJjbG9zZWQiLCJzZXRGbGFnIiwiX29uVG9nZ2xlIiwiX29uS2V5IiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsIkNvQzciLCJjYXJkcyIsImZyb21IVE1MQ2FyZEVsZW1lbnQiLCJ0eXBlZENhcmQiLCJhc3NpZ25PYmplY3QiLCJfdXBkYXRlIiwiZm9ybXMiLCJ1cGRhdGVzIiwiZm9ybSIsIkZvcm1EYXRhRXh0ZW5kZWQiLCJ0b09iamVjdCIsImRpZmZPYmplY3QiLCJleHBhbmRPYmplY3QiLCJfbWVzc2FnZSIsIl9tZXNzYWdlSWQiLCJleGNsdWRlIiwiZXhjbHVkZVN0YXJ0V2l0aCIsImZyb21NZXNzYWdlIiwiY2FyZEVsZW1lbnQiLCJjYXJkRGF0YSIsInVuc2V0RmxhZyIsIkRhbWFnZUNhcmQiLCJjb25jYXQiLCJfaW1wYWxlIiwiaXNEYW1hZ2VOdW1iZXIiLCJpZ25vcmVBcm1vciIsImhhcmRyb2xsZWQiLCJkYW1hZ2VJbmZsaWN0ZWQiLCJub0RhbWFnZSIsIl9odG1sSW5saW5lUm9sbCIsIl9odG1sUm9sbCIsImlzQXJtb3JGb3J1bGEiLCJyb2xsQXJtb3IiLCJ0b3RhbERhbWFnZVN0cmluZyIsInNlbGVjdGVkUGxheWVycyIsIm9uZSIsImljb24iLCJjb25maXJtRGFtYWdlIiwidHdvIiwiaW5jbHVlcyIsImRiIiwicm9sbFN0cmluZyIsIl9hcm1vciIsIlJvbGxDYXJkIiwiZ2V0SHRtbFJvbGwiLCJzcGFuIiwiZnJvbU1lc3NhZ2VJZCIsImNvbGxlY3Rpb24iLCJkZWZhdWx0Q29uZmlnIiwiZ2V0RmxhZyIsInRpbWVzdGFtcCIsIkRhdGUiLCJwcm9jZXNzIiwiY29uZmlnIiwiZmxhZ3MiLCJ1cGRhdGVSb2xsIiwiZnJvbUdNIiwicmFuayIsImFkZFJvbGxEYXRhIiwiYWRkUm9sbCIsInJlbW92ZVJvbGwiLCJzcGxpY2UiLCJ3aW5uZXJzIiwibG9vc2VycyIsIk9wcG9zZWRDaGVja0NhcmQiLCJfb25DbGljayIsImF0dGFja2VyIiwiZGVmZW5kZXIiLCJkZWZlbmRlclJvbGwiLCJkb2RnZVNraWxsIiwiX2FhIiwiZGVmZW5kZXJJc0RvZGdpbmciLCJoYXNXaW5uZXIiLCJfYWQiLCJ3aW5uZXJDb3VudCIsImF0dGFja2VyUm9sbCIsImNvdW50IiwiY2xvc2VDYXJkIiwiZGFtYWdlQ2hhdENhcmQiLCJpc0V4dHJlbWVTdWNjZXNzIiwiYWx0ZXIiLCJzb3J0IiwidGllIiwiYWR2YW50YWdlQXR0YWNrZXIiLCJtb2RpZmllZFJlc3VsdCIsIndpbkNvdW50IiwiQ29tYmluZWRDaGVja0NhcmQiLCJzdWNjZXNzQ291bnQiLCJhbnkiLCJhbGwiLCJfcm9sbCIsInNpbGVudCIsImhpZGVTdWNjZXNzIiwiYXNzaWduUm9sbCIsImRpc2FibGVGbGF0VGhyZXNob2xkTW9kaWZpZXIiLCJkaXNhYmxlRmxhdERpY2VNb2RpZmllciIsIkF1ZGlvSGVscGVyIiwicGxheSIsInNyYyIsInNvdW5kcyIsIkNIQVRfQ09DN19NRVNTQUdFIiwicGxheWVycyIsIkdNU2VsZlJvbGwiLCJyZW1vdmVXaXNwZXJUYXJnZXRzIiwiZmFrZVJvbGwiLCJfb25DaGF0Q2FyZEFjdGlvbiIsIl9vbkNoYXRDYXJkVG9nZ2xlQ29udGVudCIsIl9vbkNoYXRDYXJkUmFkaW9Td2l0Y2giLCJfb25DaGF0Q2FyZFRvZ2dsZVN3aXRjaCIsIl9vbkNoYXRDYXJkVm9sbGV5U2l6ZSIsIl9vbkRyb3BEb3duRWxlbWVudFNlbGVjdGVkIiwiX29uVG9nZ2xlU2VsZWN0ZWQiLCJfb25UYXJnZXRTZWxlY3QiLCJfb25PcGVuQWN0b3IiLCJDb0M3UGFyc2VyIiwiX29uQ2hlY2siLCJfb25EcmFnQ29DN0xpbmsiLCJfb25JbmxpbmUiLCJiaW5kTGlzdGVybmVycyIsInNjcm9sbEJvdHRvbSIsImNoZWNrUmV2ZWFsZWQiLCJyZXZlYWxDaGVjayIsIm1lbGVlSW5pdGlhdG9yIiwiYmluZExpc3RlbmVycyIsInJlbW92ZUNsYXNzIiwibW91c2VsZWF2ZSIsImRlZmVuZGFudElkIiwiaW5pdGlhdG9ySWQiLCJ1cGRhdGVDb21iYXRDYXJkVGFyZ2V0IiwidXNlck9ubHkiLCJnZXRBdHRyaWJ1dGUiLCJnbU9ubHkiLCJ6b25lIiwidXNlclZpc2libGVPbmx5IiwiZWxlbSIsImdtVmlzaWJsZU9ubHkiLCJvd25lclZpc2libGVPbmx5IiwiX2dldEFjdG9yRnJvbUtleSIsIl9nZXRDaGF0Q2FyZEFjdG9yIiwicGFyZW50RWxlbWVudCIsIm93bmVyT25seSIsImdtU2VsZWN0T25seSIsInRhcmdldHNTZWxlY3RvciIsImJvcmRlciIsInRhcmdldFRvRGlzcGxheSIsInVwZGF0ZVNlbGVjdGVkIiwiZHJvcERvd25Cb3hlcyIsImRwZG5Cb3giLCJzZWxlY3RlZEJveCIsImJ1dHRvbiIsImFjdGlvblR5cGUiLCJkZWZlbmRlckNob2ljZSIsInNraWxsVmFsdWUiLCJza2lsbE5hbWUiLCJpdGVtTmFtZSIsIndlYXBvbk5hbWUiLCJfY29sbGFwc2VJbmxpbmVSZXN1bHQiLCJfZXhwYW5kSW5saW5lUmVzdWx0Iiwib3B0aW9uTGlzdCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJwcm9wZXJ0eSIsInJhbmdlQ2FyZCIsInVwZGF0ZUNhcmRTd2l0Y2giLCJvd25uZXIiLCJnZXRUb2tlbiIsIm1lc3NJZCIsIm9yaWdpbk1lc3NhZ2UiLCJtZWxlZUNhcmQiLCJyb2xsUmVzdWx0IiwidXBncmFkZUluZGV4IiwiZm9yY2VQYXNzIiwidXBncmFkZUNoZWNrIiwiZGV0YWlsZWRSZXN1bHRQbGFjZUhvbGRlciIsIm5ld0NhcmQiLCJjbG9uZU5vZGUiLCJwdXNoZWRSb2xsIiwiZGVmZW5kZXJLZXkiLCJnZXRBY3RvckZyb21Ub2tlbiIsInJlc3BvbnNlVHlwZSIsInBlcmZvcm1Ta2lsbENoZWNrIiwicHVibGlzaENoZWNrUmVzdWx0IiwicHVibGlzaE5vUmVwb25zZVJlc3VsdCIsImRlYWxlciIsInJlc29sdmVDYXJkIiwiYW1vdW50IiwiYXBwZW5kIiwiZm9yY2VGYWlsIiwiaW5jcmVhc2VTdWNjZXNzTGV2ZWwiLCJkZWNyZWFzZVN1Y2Nlc3NMZXZlbCIsImNvbXB1dGVDaGVjayIsIm1ha2VQdWJsaWMiLCJzdGFuZGJ5IiwiZm9yY2VSb2xsIiwiZmxhZ0ZvckRldmVsb3BlbWVudCIsInJlc2V0Q3JlYXR1cmVTYW5EYXRhIiwicmVzZXRTcGVjaWVTYW5EYXRhIiwicm9sbFNhbiIsImFkdmFuY2VTdGF0ZSIsInJvbGxTYW5Mb3NzIiwicm9sbEludCIsImhhc1RhcmdldCIsIkNvQzdzb2NrZXQiLCJleGVjdXRlQXNHTSIsIl9pZCIsInJvbGxEYW1hZ2VCdXR0b24iLCJDb0NBY3RvciIsImluaXRpYWxpemUiLCJjcmVhdHVyZUluaXQiLCJ2aXNpb24iLCJkaW1TaWdodCIsImJyaWdodFNpZ2h0IiwiYWN0b3JMaW5rIiwiZGlzcG9zaXRpb24iLCJvdmVyd3JpdGUiLCJjaGVja1VuZGVmaW5lZEF1dG8iLCJyZXR1cm5EYXRhIiwic2hvcnROYW1lIiwiY3JlYXRlRGF0YSIsImVmZmVjdHMiLCJlIiwiYm91dE9mTWFkbmVzcyIsImRpc2FibGVkIiwicmVhbFRpbWUiLCJyb3VuZHMiLCJzZWNvbmRzIiwiaW5kZWZpbml0ZUluc3Rhbml0eSIsImluZGVmaW5pdGUiLCJpbnNhbmVEdXJhdGlvbiIsImJvdXREdXJhdGlvblRleHQiLCJpbnNhbml0eUR1cmF0aW9uVGV4dCIsInN1bW1hcnkiLCJoaW50IiwiYm91dE9mTWFkbmVzc1RhYmxlSWQiLCJkZXNjcmlwdGlvbiIsImJvdXRPZk1hZG5lc3NUYWJsZSIsInRhYmxlcyIsInRhYmxlUm9sbCIsIlRBQkxFX1JFU1VMVF9UWVBFUyIsIkVOVElUWSIsInJlc3VsdElkIiwiVGV4dEVkaXRvciIsImVucmljaEhUTUwiLCJjcmVhdGVFbWJlZGRlZERvY3VtZW50cyIsIlRFWFQiLCJ0dXJucyIsInV1aWQiLCJtYWRuZXNzIiwiZGVsZXRlIiwic2hvd1NoZWV0IiwiZW1wdHlTa2lsbCIsInJlbmRlclNoZWV0IiwiZmlyZWFybXMiLCJza2lsbERhdGEiLCJwZXJzb25hbCIsIm9jY3VwYXRpb24iLCJhcmNoZXR5cGUiLCJnZXRTa2lsbHNCeU5hbWUiLCJhdHRhY2siLCJ3cG5UeXBlIiwiY3JlYXRlZEF0dGFjayIsImNvbnNvbGUiLCJzZXRBY3RvckZsYWciLCJxdWFudGl0eSIsImdldEl0ZW1JZEJ5TmFtZSIsImNyZWF0ZUJvb2siLCJjcmVhdGVTcGVsbCIsImVtcHR5U3BlbGwiLCJjcmVhdGVTa2lsbCIsImNyZWF0ZUl0ZW0iLCJ3ZWFwb25Qcm9wZXJ0aWVzIiwiYmlvIiwiYmlvZ3JhcGh5IiwiYXJlYU5hbWUiLCJlbWJlZGRlZE5hbWUiLCJkYXRhQXJyYXkiLCJwcm9jZXNzZWREYXRhQXJyYXkiLCJiYXNlQ2FsY3VsYXRlZCIsImNhbGN1bGF0ZUJhc2UiLCJwYXJzZUNoYXJhY3RlcmlzdGljcyIsInNraWxsTGlzdCIsImV4aXN0aW5nSXRlbSIsInNldEl0ZW1GbGFnIiwiZ2V0TmFtZVdpdGhvdXRTcGVjIiwibWFpblNraWxsIiwiY3JlYXRlV2VhcG9uU2tpbGwiLCJzZWNvbmRTa2lsbCIsImVuYWJsZUNoYXJhY3RlcmlzaXRpY3MiLCJnZXRDaGFyYWN0ZXJpc3RpYyIsImx1Y2siLCJ1cGRhdGVEYXRhIiwiaXQiLCJvdGhlcnNJdGVtcyIsImFkZFVuaXF1ZUl0ZW1zIiwiYWRkSXRlbXMiLCJiYWNrc3RvcnkiLCJzZWN0aW9uTmFtZSIsImJpb1NlY3Rpb25zIiwiY3JlYXRlQmlvU2VjdGlvbiIsInJlc2V0QXJjaGV0eXBlIiwiY29uZmlybSIsInllcyIsImRlZmF1bHRZZXMiLCJjb3JlQ2hhcmFjIiwiZW50cnkiLCJjb3JlQ2hhcmFjdGVyaXN0aWNzIiwiY2hhcmFjIiwiY2hhckRpYWxvZ0RhdGEiLCJjb3JlQ2hhcmFjdGVyaXN0aWNzRm9ybXVsYSIsInJlc2V0T2NjdXBhdGlvbiIsInBvaW50c0RpYWxvZ0RhdGEiLCJvY2N1cGF0aW9uU2tpbGxQb2ludHMiLCJvcHRpb25hbENoYXIiLCJncm91cHMiLCJkaWFsb2dEYXRhIiwiZGlzcGxheU5hbWUiLCJza2lsbENvdW50IiwibWVyZ2VkIiwibWVyZ2VPcHRpb25hbFNraWxscyIsImNyZWRpdFJhdGluZ1NraWxsIiwiY3JlZGl0UmF0aW5nIiwiYXJjaGV0eXBlUG9pbnRzIiwib2NjdXBhdGlvblBvaW50cyIsInBlcnNvbmFsUG9pbnRzIiwiZ2V0SXRlbXNCeU5hbWUiLCJwYXJzZUZvcm11bGEiLCJwYXJzZWRGb3JtdWxhIiwicGFyc2VkIiwiZ2V0UHJvcGVydHkiLCJjaGFyTmFtZSIsImF0dHJpYk5hbWUiLCJsY2siLCJlcmFzZU9sZCIsIm9jY3VwYXRpb25Ta2lsbCIsImdldEl0ZW1GbGFnIiwidW5zZXRJdGVtRmxhZyIsImFyY2hldHlwZVNraWxsIiwic2V0THVjayIsImVuY291bnRlcmVkQ3JlYXR1cmVzU2FuRGF0YSIsImVuY291bnRlcmVkQ3JlYXR1cmVzU2FuRGF0YUluZGV4IiwiZW5jb3VudGVyZWRDcmVhdHVyZXMiLCJmaW5kSW5kZXgiLCJjZCIsInRvTG9jYWxlTG93ZXJDYXNlIiwidG90YWxMb3NzIiwiY3JlYXR1cmVTYW5EYXRhIiwic3BlY2llRW5jb3VudGVyZWQiLCJjaGFuZ2VzIiwiZW5jb3VudGVyZWRDcmVhdHVyZXNMaXN0IiwiX3VwZGF0ZUFsbE9mU2FtZVNwZWNpZSIsInNwZWNpZVNhbkRhdGEiLCJkZWx0YSIsIl9yZW1vdmVTcGVjaWUiLCJwcmV2aW91c1NwZWNpZUxvc3QiLCJpbmRleFNhbkRhdGEiLCJleGFjdFNhbkxvc3MiLCJpbmRleFNwZWNpZXNTYW5EYXRhIiwib2xkU2FuRGF0YSIsIm5ld1NhbkRhdGEiLCJzZXRTYW4iLCJjaGVja1Bhc3NlZCIsInNhbkxvc3NDaGVja1Bhc3NlZCIsInNhbkxvc3NDaGVja0ZhaWxsZWQiLCJjaGVja0ZhaWxsZWQiLCJjdGh1bGh1TXl0aG9zIiwiYm9udXNQb2ludHMiLCJleHBlcmllbmNlUG9pbnRzIiwiZGV2ZWxvcGVtZW50IiwibG9zcyIsInNldFN0YXR1cyIsImF0dHJpYiIsInVwZGF0ZWRLZXkiLCJzZXRBdHRyaWJBdXRvIiwic3VtIiwiTU9WIiwiYWdlIiwibG9ja2VkIiwiZ2V0SXRlbXNGcm9tTmFtZSIsImZsYWdWYWx1ZSIsImF0dHJpYnV0ZU5hbWUiLCJtaXNzaW5nIiwicm9sbEF0dHJpYnV0ZSIsImNoYXJhY3RlcmlzdGljTmFtZSIsIl9yYXdWYWx1ZSIsInVwZGF0ZVZhbHVlIiwid2VhcG9uRGF0YSIsIndlYXBvbnMiLCJjcmVhdGVDaGF0Q2FyZCIsImhhc0d1biIsImRlbnlMdWNrIiwiZGVueUJsaW5kVGFtcGVyaW5nIiwidXNlc0FsdGVybmF0aXZlU2tpbGwiLCJtYXRjaGVzIiwiZXhlYyIsInNOYW1lIiwiYXR0cmliS2V5IiwiYXR0ciIsInJlcG9ydENoYXJhY3RlZHJpdGljc1ZhbHVlIiwiYXZlcmFnZSIsImNoYXJWYWx1ZSIsImRldmVsb3BlbWVudEZsYWciLCJEaWUiLCJmYWNlcyIsImF1Z21lbnQiLCJza2lsbE1hc3RlcmluZ01lc3NhZ2UiLCJhdWdtZW50RGllIiwiYXVnbWVudFNBTkRpZSIsInNhbkdhaW5lZCIsInNhbkdhaW5lZE1lc3NhZ2UiLCJkZWJ1ZyIsInNjb3JlIiwiaW5jcmVhc2VFeHBlcmllbmNlIiwidW5mbGFnRm9yRGV2ZWxvcGVtZW50IiwiY3JlYXRlTWVzc2FnZSIsImN1cnJlbnRMdWNrIiwicHVscFJ1bGVzQWN0aXZhdGVkIiwiZXF1YWxPckxlc3NDdXJyZW50THVjayIsImF1Z21lbnRSb2xsIiwiYXVnbWVudFZhbHVlIiwic3RhdHVzTmFtZSIsImVmZmVjdEVmZmVjdCIsInN0YXR1c1ZhbHVlIiwidW5zZXRTdGF0dXMiLCJoYXNBY3RpdmVFZmZlY3QiLCJlZmZlY3QiLCJmYWxsRHlpbmciLCJmYWxsUHJvbmUiLCJjdXJlTWFqb3JXb3VuZCIsImluZmxpY3RNYWpvcldvdW5kIiwiZWZmZWN0TGFiZWwiLCJlZmZlY3ROYW1lIiwiZ2V0U3RhdHVzIiwiY291bnRlciIsImxvY2FsZUNvbXBhcmUiLCJ3ZWFwb25MaXN0IiwiQ00iLCJDUiIsInUiLCJ0ZXN0VXNlclBlcm1pc3Npb24iLCJoZWFsdGhCZWZvcmUiLCJkZWZhdWx0VmFsdWUiLCJoZWFsdGhBZnRlciIsImRhbWFnZVRha2VuIiwic2V0SHAiLCJhcm1vckRhdGEiLCJncm9zc0RhbWFnZSIsImFybW9yVmFsdWUiLCJpc0Zvcm11bGEiLCJuZXREYW1hZ2UiLCJtYWpvcldvdW5kIiwiY3JpdGljYWxXb3VuZHNFZmZlY3QiLCJkeWluZ0VmZmVjdCIsIkNvQzdMaW5rIiwiX2xpbmtEYXRhIiwiTElOS19UWVBFIiwiQ0hFQ0siLCJDSEVDS19UWVBFIiwiU0tJTEwiLCJsaW5rRGF0YSIsIkNvQzdMaW5rQ3JlYXRpb25EaWFsb2ciLCJhdHRyaWJ1dGVzIiwiZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uIiwibGluayIsInNldERhdGEiLCJTQU5MT1NTIiwiSVRFTSIsIkNIQVJBQ1RFUklTVElDIiwiQVRUUklCVVRFIiwiaXNDaGVjayIsImlzIiwiaXNTYW5sb3NzIiwic2FubG9zcyIsImlzSXRlbSIsInZhbGlkSXRlbSIsImZyb21Db21wZW5kaXVtIiwiZnJvbURpcmVjdG9yeSIsIl9pdGVtIiwiZmV0Y2hJdGVtIiwiY2hhcmFjdGVyaXN0aWNLZXkiLCJhdHRyaWJ1dGVLZXkiLCJmb3JjZU1vZGlmaWVycyIsImhhc0xhYmVsIiwiaGFzSWNvbiIsIkNIQVJBQ19LRVlXT1JEIiwiQVRUUklCX0tFWVdPUkQiLCJTS0lMTF9LRVlXT1JEIiwiY2hlY2tUeXBlIiwiRm9ybUFwcGxpY2F0aW9uIiwiZHJhZ0Ryb3AiLCJkcmFnU2VsZWN0b3IiLCJkcm9wU2VsZWN0b3IiLCJjbG9zZU9uU3VibWl0Iiwic3VibWl0T25DbG9zZSIsInN1Ym1pdE9uQ2hhbmdlIiwid2lkdGgiLCJoZWlnaHQiLCJjaG9pY2VzIiwiYWxsb3dDdXN0b20iLCJtaW5pbXVtIiwibWF4aW11bSIsImZyb21HYW1lIiwiYXNrSWQiLCJhc2tQYWNrIiwiaXNTZXRGcm9tR2FtZSIsInNlbGVjdGVkRGlmZmljdWx0eSIsImxpbmtUeXBlIiwic2VsZWN0ZWRDaGVja1R5cGUiLCJfb25DbGlja1N1Ym1pdCIsIkNvQzdUeXBlIiwidXBkYXRlRnJvbUxpbmsiLCJjb3B5VG9DbGlwYm9hcmQiLCJvcHRpb24iLCJncm91cCIsImdyb3VwTmFtZSIsImZvcm1EYXRhRXgiLCJkaWZmRGF0YSIsImVkaXRvciIsInN0b3BQcm9wYWdhdGlvbiIsImNyZWF0ZUNvQzdMaW5rIiwiaW5zZXJ0Q29udGVudCIsImlzQ29udGVudFZpc2libGUiLCJwYXJzZWRDb250ZW50Iiwid2FsayIsImNyZWF0ZVRyZWVXYWxrZXIiLCJOb2RlRmlsdGVyIiwiU0hPV19URVhUIiwibmV4dE5vZGUiLCJjdXJyZW50Tm9kZSIsIl9nZXRUZXh0Tm9kZXMiLCJyZ3giLCJSZWdFeHAiLCJfcmVwbGFjZVRleHRDb250ZW50IiwiX2NyZWF0ZUxpbmsiLCJsaW5rSWNvbiIsInRhZyIsIm1hdGNoQWxsIiwiQXJyYXkiLCJmcm9tIiwiZGlmZmljdWx0eVN0cmluZyIsImh1bWFuTmFtZSIsImdldENoYXJhY3RlcmlzdGljTmFtZXMiLCJkcmFnZ2FibGUiLCJjaGFyYWN0ZXJpc3RpY0NoZWNrIiwiYXR0cmlidXRlQ2hlY2siLCJnZXRTcGVha2VyQWN0b3IiLCJJdGVtIiwiY29udGV4dCIsImRvY3VtZW50Q2xhc3NlcyIsImV4dGVuZGVkIiwibWFsZnVuY3Rpb24iLCJwcm9wZXJ0eUlkIiwib3ZlcnJpZGUiLCJjaGVja2VkUHJvcHMiLCJtZWxlZVdlYXBvbiIsInByb3BOYW1lIiwicHJvcFZhbHVlIiwiaGFzUHJvcGVydHkiLCJpc0luY2x1ZGVkSW5TZXQiLCJpc093bmVkIiwicXVvdGVSZWdFeHAiLCJzcGVjTmFtZVJlZ2V4IiwiZmlsdGVyZWROYW1lIiwidHJpbSIsImVyYXNlQWRqdXN0bWVudCIsIm11bHRpU2hvdCIsIm1heFVzZXNQZXJSb3VuZCIsInNraWxsUHJvcGVydGllcyIsIl9iYXNlIiwiZXhwIiwiYW1tbyIsInNldEJ1bGxldHMiLCJtYXhCdWxsZXQiLCJidWxsZXRzIiwibWF4QnVsbGV0cyIsInJlZHVjZSIsIm5ld0FycmF5IiwibGNhIiwibGNiIiwiZ2V0Q2hhdERhdGEiLCJodG1sT3B0aW9ucyIsImxhYmVscyIsInByb3BzIiwiZm4iLCJwIiwiX3dlYXBvbkNoYXREYXRhIiwic2tpbGxMYWJlbCIsImZvdW5kIiwidXNlc1BlclJvdW5kU3RyaW5nIiwiY2FuQmVQdXNoZWQiLCJwdXNoaW5nIiwiaXNVbmtub3duIiwiX3V1aWQiLCJmb3VuZHJ5IiwidXRpbHMiLCJyYW5kb21JRCIsImNhcmRUeXBlIiwiZXh0cmVtZVRocmVzaG9sZCIsImhhcmRUaHJlc2hvbGQiLCJyZWd1bGFyVGhyZXNob2xkIiwiY3JpdGljYWxUaHJlc2hvbGQiLCJfbW9kaWZpZWRSZXN1bHQiLCJtb2RpZmllZCIsImlzU2ltcGxlUm9sbCIsImZ1bWJsZVRocmVzaG9sZCIsInN1Y2Nlc1RocmVzaG9sZCIsIl9kaWNlTW9kaWZpZXIiLCJfZGlmZmljdWx0eSIsIm9sZENoZWNrIiwidW5rbm93bkRpZmZpY3VsdHkiLCJpY29ucyIsInN1Y2Nlc3NIaW50IiwiY3NzQ2xhc3MiLCJmYWlsdXJlSGludCIsImdtRGlmZmljdWx0eUNyaXRpY2FsIiwiZ21EaWZmaWN1bHR5RXh0cmVtZSIsImdtRGlmZmljdWx0eUhhcmQiLCJnbURpZmZpY3VsdHlSZWd1bGFyIiwiX3NraWxsIiwiX2dldEl0ZW1Gcm9tSWQiLCJpc0R1bW15IiwicG9ydHJhaXQiLCJ3ZWFwb25BbHRTa2lsbCIsImRpc3BsYXlSZXN1bHRUeXBlIiwiZGlzcGxheUNoZWNrU3VjY2Vzc0xldmVsIiwiZ2V0TGlua0VsZW1lbnQiLCJpbWFnZSIsInZhbCIsInRlblJlc3VsdCIsInRlbk9ubHlPbmVEaWUiLCJpc1ZhbHVlIiwiaXNDaGFyYWN0aXJpc3RpYyIsImlzU2tpbGwiLCJpc0F0dHJpYnV0ZSIsInJlc3VsdFR5cGUiLCJzdWNjZXNzUmVxdWlyZWQiLCJtYWxmdW5jdGlvblR4dCIsInRvZ2dsZUl0ZW1GbGFnIiwiaGFzRW5vdWdoTHVjayIsIm5leHRMZXZlbCIsImx1Y2tUb1NwZW5kIiwiY2FuSW5jcmVhc2VTdWNjZXNzIiwiY2FuQXdhcmRFeHBlcmllbmNlIiwiZm9yY2VkIiwiZnJvbVV1aWQiLCJKU09OUm9sbFN0cmluZyIsImZvcmNlZFN1Y2Nlc3MiLCJmb3JjZWRGYWlsdXJlIiwidG90YWxMdWNrU3BlbnQiLCJzaGlmdCIsInJlbW92ZVVwZ3JhZGVzIiwiZm9yY2VTdWNjZXNzTGV2ZWwiLCJfZm9yY2VDaGVjayIsImhpZ2giLCJsb3ciLCJyYW5kb20iLCJ1bml0VG90YWwiLCJ0ZW5Ub3RhbCIsImhhc0Vub3VnaCIsInRlbiIsImhhc1BlbmFsdHkiLCJmbGFnZ2VkRm9yRGV2ZWxvcG1lbnQiLCJfZmxhdm9yIiwiX2NvbnRleHQiLCJwYXJlbnRVdWlkIiwicmF3VmFsdWVTdHJpbmciLCJyYXd2YWx1ZSIsIm9yaWdpbmFsU3BlYWtlciIsIm5ld0NvbnRlbnQiLCJodG1sTWVzc2FnZSIsInJvbGxSZXN1bHRFbGVtZW50IiwiY3NzQ2xhc3NMaXN0IiwidG9vbHRpcEhlYWRlciIsInBhcnRzIiwiYyIsInN1Y2Nlc3NMZXZlbEljb25zIiwiY2xhc3MiLCJmYWNlIiwidG9vbHRpcCIsInRpcCIsInJvbGxUb29sVGlwIiwiY2hpbGRyZW4iLCJwYSIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInB0IiwiaW5uZXJXaWR0aCIsInkiLCJpbm5lckhlaWdodCIsInppIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInpJbmRleCIsImlzTnVtZXJpYyIsInVua25vd25EaWZmaWN1bHR5RGVmYXVsdCIsImFsbG93RmxhdERpY2VNb2RpZmllciIsImFsbG93RmxhdFRocmVzaG9sZE1vZGlmaWVyIiwiU2FuRGF0YURpYWxvZyIsIl90b2dnbGVJbnB1dCIsIlZhbGlkYXRlIiwiQ29DN0FjdG9yU2hlZXQiLCJBY3RvclNoZWV0IiwiYWN0b3JEYXRhIiwiZWRpdGFibGUiLCJpc0VkaXRhYmxlIiwiaXRlbXNCeVR5cGUiLCJjb21iYXRTa2lsbHMiLCJyYW5nZVdwbiIsIm1lbGVlV3BuIiwiYWN0b3JGbGFncyIsInBlcm1pc3Npb25MaW1pdGVkIiwiTElNSVRFRCIsImFsb3dVbmxvY2siLCJwZXJzb25hbERlc2NyaXB0aW9uIiwic2V4IiwicmVzaWRlbmNlIiwiYmlydGhwbGFjZSIsIm9yZ2FuaXphdGlvbiIsInBsYXllcm5hbWUiLCJtYW51YWxDcmVkaXQiLCJjcmVkaXQiLCJtb25ldGFyeVN5bWJvbCIsInNwZW50IiwiYXNzZXRzRGV0YWlscyIsImRldmVsb3BtZW50IiwicHVscENoYXJhY3RlciIsImlzRGVhZCIsImlzRHlpbmciLCJpdGVtVG9VcGRhdGUiLCJhc3luY0Jhc2UiLCJ1cGRhdGVkRXhwIiwidXBkYXRlRW1iZWRkZWREb2N1bWVudHMiLCJpdGVtVHlwZSIsIm5vcm1hbGl6ZSIsIm1lbGVlU2tpbGxzIiwicmFuZ2VTa2lsbHMiLCJjYnRTa2lsbHMiLCJ1c2VzQWx0ZXJuYXRlU2tpbGwiLCJza2lsbFNldCIsIl9wcm9wZXJ0aWVzIiwiaGFzRW1wdHlWYWx1ZVdpdGhGb3JtdWxhIiwiY29tcGVuZGl1bSIsImlzRmlyc3QiLCJpc0xhc3QiLCJpbmRlZmluaXRlSW5zYW5pdHlMZXZlbCIsInNob3dJbnZlbnRvcnlJdGVtcyIsInNob3dJbnZlbnRvcnlCb29rcyIsInNob3dJbnZlbnRvcnlTcGVsbHMiLCJzaG93SW52ZW50b3J5VGFsZW50cyIsInNob3dJbnZlbnRvcnlTdGF0dXNlcyIsInNob3dJbnZlbnRvcnlXZWFwb25zIiwib25DbG9zZVNoZWV0IiwiX29uRHJhZ0NoYXJhY3RlcmlzdGljIiwiX29uRHJhZ0F0dHJpYnV0ZSIsIl9vbkRyYWdTYW5DaGVjayIsImNvbnRleHRtZW51IiwiX29uT3Bwb3NlZFJvbGwiLCJfb25Sb2xsQ2hhcmFjdGVyaXRpY1Rlc3QiLCJfb25Sb2xsU2tpbGxUZXN0IiwiX29uUm9sbEF0dHJpYlRlc3QiLCJfb25Mb2NrQ2xpY2tlZCIsIl9vbkZsYWdDbGlja2VkIiwiX29uRm9ybXVsYUNsaWNrZWQiLCJfb25Sb2xsQ2hhcmFjdGVyaXRpY3NWYWx1ZSIsIl9vbkF2ZXJhZ2VDaGFyYWN0ZXJpdGljc1ZhbHVlIiwiX29uQXV0b1RvZ2dsZSIsIl9vblJlc2V0Q291bnRlciIsIl9vblN0YXR1c1RvZ2dsZSIsImhlYWwiLCJyZXZpdmUiLCJjaGVja0ZvckRlYXRoIiwiX29uSXRlbVJvbGwiLCJfb25XZWFwb25Sb2xsIiwiX29uV2VhcG9uU2tpbGxSb2xsIiwiX29uUmVsb2FkV2VhcG9uIiwiX29uQWRkQW1vIiwiZGJsY2xpY2siLCJfdG9nZ2xlUmVhZE9ubHkiLCJfb25XZWFwb25EYW1hZ2UiLCJfb25JbnZlbnRvcnlIZWFkZXIiLCJfb25TZWN0aW9uSGVhZGVyIiwid2hlZWxJbnB1dHMiLCJ3aGVlbElucHV0IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9vbldoZWVsIiwicGFzc2l2ZSIsIl9vbkl0ZW1TdW1tYXJ5IiwiX29uSXRlbVBvcHVwIiwiX29uUmVuZGVySXRlbVNoZWV0IiwiZXYiLCJwYXJlbnRzIiwiaXRlbVRvRGVsZXRlIiwic3RyaWN0Iiwic2xpZGVVcCIsImNyZWF0ZUVtcHR5Qm9vayIsImNyZWF0ZUVtcHR5SXRlbSIsImNyZWF0ZUVtcHR5U2tpbGwiLCJjcmVhdGVFbXB0eVNwZWxsIiwiY3JlYXRlRW1wdHlXZWFwb24iLCJfb25UcmFkZUl0ZW0iLCJkZWxldGVCaW9TZWN0aW9uIiwibW92ZUJpb1NlY3Rpb25VcCIsIm1vdmVCaW9TZWN0aW9uRG93biIsImRldmVsb3BlbWVudFBoYXNlIiwiZGV0YWlsIiwiZGV2ZWxvcEx1Y2siLCJkaXNwYXRjaCIsIm1vdXNlZW50ZXIiLCJ0b29sVGlwU2tpbGxFbnRlciIsIkNvQzdUb29sdGlwcyIsInRvb2xUaXBMZWF2ZSIsInRvb2xUaXBDaGFyYWN0ZXJpc3RpY0VudGVyIiwidG9vbFRpcEF0dHJpYnV0ZUVudGVyIiwidG9vbFRpcEF1dG9FbnRlciIsInRvb2xUaXBGbGFnRm9yRGV2ZWxvcG1lbnQiLCJkZWxheSIsIlRvb2xUaXBIb3ZlciIsInRvb2xUaXBUaW1lciIsInRvb2xUaXAiLCJkaXNwbGF5VG9vbFRpcCIsImNoYXJJZCIsImF0dHJpYnV0ZUlkIiwiYWN0b3JGcm9tIiwiYWN0b3JUbyIsInZpc2libGUiLCJOT05FIiwiYm94IiwiX29uRHJvcCIsInRvZ2dsZVN0YXR1cyIsInRvZ2dsZUVmZmVjdCIsInNldE9uZUZpZnRoU2FuaXR5IiwicmVzZXRDb3VudGVyIiwidG9nZ2xlQXR0cmliQXV0byIsInRvZ2dsZVByb3BlcnR5Iiwicm9sbENoYXJhY3RlcmlzdGljc1ZhbHVlIiwiYXZlcmFnZUNoYXJhY3RlcmlzdGljc1ZhbHVlIiwiaXNMb2NrZWQiLCJ0b2dnbGVBY3RvckZsYWciLCJkZWx0YVkiLCJzZXRNcCIsInJlYWRPbmx5Iiwic2VjcmV0cyIsImhhc0NsYXNzIiwiZGl2Iiwic3BlY2lhbERpdiIsImhpZGUiLCJiaW5kRXZlbnRzSGFuZGxlciIsInNsaWRlRG93biIsInNlY3Rpb24iLCJwYW5uZWxDbGFzcyIsInBhbm5lbCIsInNpYmxpbmdzIiwicG9wdXBTa2lsbCIsImVucmljaGVkVmFsdWUiLCJzY3JvbGxZIiwiZnJvbUxpbmtEYXRhIiwiZGxnIiwicHJvY2VlZFdpdGhvdXRUYXJnZXQiLCJjYW5jZWwiLCJwcm9jZWVkIiwiYWRkQnVsbGV0IiwiYWx0S2V5IiwidGVzdCIsInJvbGxGb3JtdWxhIiwicHJvbXB0TGFiZWwiLCJjcmVkaXRWYWx1ZSIsInVwZGF0ZVRleHRBcmVhIiwidXBkYXRlQmlvVmFsdWUiLCJ1cGRhdGVCaW9UaXRsZSIsInNlbGVjdGVkSW5kZXgiLCJDb0M3TlBDU2hlZXQiLCJhbGxvd0Zvcm11bGEiLCJkaXNwbGF5Rm9ybXVsYSIsImhhc1NhbiIsImhhc01wIiwiaGFzTHVjayIsImlzQ3JlYXR1cmUiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImhhc0ludmVudG9yeSIsIl9vblNhbkNoZWNrIiwiY2hhbmdlIiwic2V0SGVhbHRoU3RhdHVzTWFudWFsbHkiLCJjaGVja1RhcmdldHMiLCJ1bnNldEFjdG9yRmxhZyIsInJlc2l6YWJsZSIsIl91cGRhdGVPYmplY3QiLCJzZXRDaGFyYWN0ZXJpc3RpYyIsImNlbGwiLCJzZXRQb3NpdGlvbiIsImZvcmNlQXV0byIsIkNvQzdDcmVhdHVyZVNoZWV0IiwiQ29DN0NoYXJhY3RlclNoZWV0VjIiLCJfZ2V0SGVhZGVyQnV0dG9ucyIsInN1bW1hcml6ZWQiLCJvbmNsaWNrIiwidG9nZ2xlU2hlZXRNb2RlIiwic2tpbGxMaXN0TW9kZVZhbHVlIiwic2tpbGxTaG93VW5jb21tb24iLCJzaG93SWNvbnNPbmx5Iiwib2NjdXBhdGlvblNldCIsImFyY2hldHlwZVNldCIsInRvdGFsRXhwZXJpZW5jZSIsInRvdGFsT2NjdXBhdGlvbiIsIm9jY3VwYXRpb25Qb2ludHNTcGVudCIsImludmFsaWRPY2N1cGF0aW9uUG9pbnRzIiwidG90YWxBcmNoZXR5cGUiLCJhcmNoZXR5cGVQb2ludHNTcGVudCIsImludmFsaWRBcmNoZXR5cGVQb2ludHMiLCJ0b3RhbFBlcnNvbmFsIiwicGVyc29uYWxQb2ludHNTcGVudCIsImludmFsaWRQZXJzb25hbFBvaW50cyIsImNyZWRpdFJhdGluZ01heCIsImNyZWRpdFJhdGluZ01pbiIsImludmFsaWRDcmVkaXRSYXRpbmciLCJwdWxwVGFsZW50Q291bnQiLCJ0YWxlbnQiLCJtaW5QdWxwVGFsZW50cyIsInRhbGVudHMiLCJpbnZhbGlkUHVscFRhbGVudHMiLCJoYXNTa2lsbEZsYWdnZWRGb3JFeHAiLCJhbGxvd0RldmVsb3BtZW50IiwiYWxsb3dDaGFyQ3JlYXRpb24iLCJkZXZlbG9wbWVudFJvbGxGb3JMdWNrIiwic2hvd0RldlBhbm5lbCIsImZhY3RvciIsInNwZW5kaW5nTGV2ZWwiLCJhc3NldHMiLCJjYXNoIiwib25lQmxvY2tCYWNrU3RvcnkiLCJwcmV2aW91c1NwZWMiLCJpc1NwZWNpYWxpemF0aW9uIiwic2tpbGxzQnlWYWx1ZSIsInRvcFNraWxscyIsInRvcFdlYXBvbnMiLCJyZXZlcnNlIiwiZGlzcGxheVBsYXllck5hbWUiLCJjaGFyYWN0ZXJVc2VyIiwic2tpbGxMaXN0RW1wdHkiLCJ0YWJzIiwibmF2U2VsZWN0b3IiLCJjb250ZW50U2VsZWN0b3IiLCJpbml0aWFsIiwiX29uU2tpbGxEZXYiLCJfb25JdGVtRGV0YWlscyIsInRvZ2dsZVNraWxsTGlzdE1vZGUiLCJ0b2dnbGVTa2lsbFVuY29tbW9uTW9kZSIsImRldmVsb3BTa2lsbCIsImNzcyIsInN0eWxlU2hlZXQiLCJjc3NSdWxlSW5kZXgiLCJzdHlsZVNoZWV0cyIsImhyZWYiLCJlbmRzV2l0aCIsInJ1bGVzIiwic2VsZWN0b3JUZXh0IiwiQ1NTU3R5bGUiLCJyZW1vdmVQcm9wZXJ0eSIsInNldFByb3BlcnR5IiwiRm9udEZhY2UiLCJsb2FkIiwibG9hZGVkRmFjZSIsImZvbnRzIiwid2VpZ2h0IiwiQ29DN0NvbWJhdCIsImN1cnJlbnRDb21iYXQiLCJjb21iYXRzIiwiY3VycmVudEluZGV4IiwiZWFjaCIsImNvbWJJZCIsImNvbWJhdGFudENvbnRyb2xzRGl2IiwiY29tYmF0YW50IiwiY29tYmF0YW50cyIsInByZXBlbmQiLCJpbml0aWF0aXZlIiwidG9rZW5Jbml0aWF0aXZlIiwiaW5pdGlhdGl2ZVRlc3QiLCJoNCIsImZvbnRXZWlnaHQiLCJ0ZXh0U2hhZG93IiwiY29sb3IiLCJiYWNrZ3JvdW5kIiwiX29uVG9nZ2xlR3VuIiwiY29tYmF0YW50SWQiLCJuZXdJbml0Iiwicm9sbEluaXRpYXRpdmUiLCJzZXRJbml0aWF0aXZlIiwiaWRzIiwiY3VycmVudElkIiwidXBkYXRlVHVybiIsInR1cm4iLCJVcGRhdGVyIiwic3lzdGVtVXBkYXRlVmVyc2lvbiIsInJ1bk1pZ3JhdGUiLCJpc05ld2VyVmVyc2lvbiIsInZlcnNpb24iLCJ1cGRhdGVkTW9kdWxlcyIsImN1cnJlbnRNb2R1bGVzIiwicGFja2FnZSIsIm1vZCIsInNraXAiLCJPSyIsIm1pZ3JhdGVBY3RvckRhdGEiLCJpc09iamVjdEVtcHR5IiwibG9nIiwiZW5mb3JjZVR5cGVzIiwibWlncmF0ZUl0ZW1EYXRhIiwidGFibGUiLCJtaWdyYXRlVGFibGVEYXRhIiwibWlncmF0ZU1hY3JvRGF0YSIsIm1pZ3JhdGVDb21wZW5kaXVtRGF0YSIsIl9taWdyYXRlQWN0b3JDaGFyYWN0ZXJTYW5pdHkiLCJfbWlncmF0ZUFjdG9yQXJ0d29yayIsIl9taWdyYXRlQWN0b3JLZWVwZXJOb3RlcyIsIl9taWdyYXRlQWN0b3JOcGNDcmVhdHVyZSIsImFyciIsIml0ZW1EYXRhIiwiZG9jdW1lbnRDbGFzcyIsIml0ZW1VcGRhdGUiLCJ3YXNMb2NrZWQiLCJjb25maWd1cmUiLCJtaWdyYXRlIiwiZG9jdW1lbnRzIiwiZ2V0RG9jdW1lbnRzIiwiZG9jIiwiX21pZ3JhdGVJdGVtRXhwZXJpZW5jZSIsIl9taWdyYXRlSXRlbUFydHdvcmsiLCJfbWlncmF0ZUl0ZW1Cb29rQXV0b21hdGVkIiwiX21pZ3JhdGVJdGVtS2VlcGVyTm90ZXMiLCJfbWlncmF0ZUl0ZW1TcGVsbEF1dG9tYXRlZCIsIl9taWdyYXRlSXRlbUtlZXBlck5vdGVzTWVyZ2UiLCJfbWlncmF0ZU1hY3JvQXJ0d29yayIsIl9taWdyYXRlVGFibGVBcnR3b3JrIiwia2VlcGVyIiwicmVnRXgiLCJvIiwiZyIsInNwZWxscyIsImNvc3QiLCJjYXN0aW5nVGltZSIsInVuaWRlbnRpZmllZCIsImF1dGhvciIsImRhdGUiLCJsYW5ndWFnZSIsIm15dGhvc1JhdGluZyIsIm5vdGVzIiwiZ2FpbiIsIkNNSSIsIkNNRiIsIm5lY2Vzc2FyeSIsIndlZWtzU3R1ZHlUaW1lIiwicHJvZ3Jlc3MiLCJhdHRhY2tzUGVyUm91bmQiLCJjZWlsIiwibmFtZUNoYXJhY3RlcnMiLCJlbiIsImRiTm9uZSIsImFybW9yTm9uZSIsImF0dGFja3NQZXJSb3VuZE5vbmUiLCJzYW5Mb3NzTm9uZSIsImZ1bGxkYiIsImhhbGZkYiIsInNlY3Rpb25Db21iYXRzIiwibmV3Q29tYmF0SGVhZGVyIiwic2VjdGlvblNraWxscyIsInNlY3Rpb25MYW5nYXVnZXMiLCJzZWN0aW9uU3BlbGxzIiwiaGFuZGd1biIsInJpZmxlIiwic21iIiwibWFjaGluZUd1biIsImxhdW5jaGVkIiwiZXhhbXBsZSIsImZyIiwiZXMiLCJ0cmFuc2xhdGlvbnMiLCJ3ZWFwb25Eb2RnZSIsImd1ZXNzU3RhcnRDb21iYXQiLCJzZWN0aW9ucyIsIkNvQzdBY3RvckltcG9ydGVyUmVnRXhwIiwibGFuZyIsIm91dHB1dCIsIkNvQzdBY3RvckltcG9ydGVyIiwiaXRlbUxvY2F0aW9ucyIsImdldFJlZ0V4IiwicmVnZXgiLCJtb2RpZmllcnMiLCJjbGVhblN0cmluZyIsInRvSFRNTCIsInJlZ0V4S2V5IiwiYXNTdHJpbmciLCJyZWdFeHAiLCJyZXF1aXJlZEdyb3VwIiwicmVtb3ZlRnJvbVRleHQiLCJzYXZlS2V5cyIsImFzTnVtYmVyIiwicHJvY2Vzc0NvbWJhdCIsIm5ld2xpbmUiLCJDb0M3SW1wb3J0ZXIiLCJsYXN0UGVyY2VudCIsIm1heExvb3BzIiwicGVyY2VudGFnZSIsImlzUmFuZ2VkIiwiZGFtYWdlcyIsImlzU2hvdGd1biIsImF0dGFja3MiLCJwcm9jZXNzU2tpbGxzIiwiYnJlYWtzIiwicHJvY2Vzc1NwZWxscyIsInNwZWxsc0FyciIsInNwZWxsIiwiaGVhZGVyIiwic3Vic3RyIiwib2NjdXBhdGlvbkFnZSIsInJlZ0V4cFNlY3Rpb25zIiwiaW0iLCJnbW5vdGVzIiwiZGlzYWJsZUF0dHJpYkF1dG8iLCJhdHRyaWJWYWx1ZSIsImNoYXJhY3RlckRhdGEiLCJpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIiLCJjcmVhdGVJbXBvcnRDaGFyYWN0ZXJzRm9sZGVySWZOb3RFeGlzdHMiLCJucGMiLCJ1cGRhdGVJdGVtRGF0YSIsImxhc3RXZWFwb25Ta2lsbCIsInBhaXIiLCJ3ZWFwb25Ta2lsbHMiLCJmb2xkZXJOYW1lIiwiRm9sZGVyIiwicGMiLCJleGlzdGluZyIsIm9NIiwid2VhcG9uU2tpbGwiLCJndWVzc0l0ZW0iLCJjbG9uZWQiLCJsYW5ndWFnZXMiLCJpY29uTGFuZ3VhZ2UiLCJiYXNpY1dlYXBvblNraWxsRGF0YSIsImNsb25lIiwibmV3U2tpbGwiLCJuZWVkc0NvbnZlcnNpb24iLCJuZWVkc0NvbnZlcnNpb25SZXN1bHQiLCJpbnB1dHMiLCJjaGVja0xhbmd1YWdlIiwiZ2V0S2V5cyIsImdldFJlZ3VsYXJFeHByZXNzaW9ucyIsInNvdXJjZSIsInBhcnNlQ2hhcmFjdGVyIiwiY29udmVydEZyb202RSIsImNvbnZlcnQ3RSIsIml0ZW1zRGF0YSIsInRlc3RNb2RlIiwiY3JlYXRlRW50aXR5IiwiQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2ciLCJnZXRFeGFtcGxlVGV4dCIsInRyaWdnZXIiLCJjaGFyYWN0ZXJzVG9vRXh0ZW5kZWQiLCJhZGRDbGFzcyIsImdldElucHV0cyIsImNyZWF0ZWRBY3RvciIsImNyZWF0ZUFjdG9yIiwic3VibWl0IiwiZ2V0VHJhbnNsYXRpb25zIiwiaW1wb3J0IiwiaW1wb3J0QWN0b3IiLCJubyIsIm9uY2UiLCJDb0M3TWVudUxheWVyIiwiUGxhY2VhYmxlc0xheWVyIiwib2JqZWN0cyIsImxheWVyT3B0aW9ucyIsIkNvQzdNZW51IiwiY29udHJvbHMiLCJjb2M3Z210b29scyIsImxheWVyIiwidG9vbHMiLCJvbkNsaWNrIiwidG9nZ2xlRGV2UGhhc2UiLCJ0b2dnbGVDaGFyQ3JlYXRpb24iLCJ0b2dnbGVYUEdhaW4iLCJmYWtlUm9sbE1lc3NhZ2UiLCJzdGFydFJlc3QiLCJrZWVwZXJNZW51IiwiYWZ0ZXIiLCJDb0M3Q2FudmFzIiwiQ09DN19UWVBFU19TVVBQT1JURUQiLCJncmlkU2l6ZSIsImRyb3BUYXJnZXRUb2tlbnMiLCJwbGFjZWFibGVzIiwiYmV0d2VlbiIsIndoaXNwZXJUYXJnZXRzIiwiQ29DN0NvbXBlbmRpdW1EaXJlY3RvcnkiLCJDb21wZW5kaXVtRGlyZWN0b3J5IiwidHJhbnNsYXRlZCIsImJhYmVsZSIsIkNvQzdBY3RvckRpcmVjdG9yeSIsIkFjdG9yRGlyZWN0b3J5IiwiQ29DN1NwZWxsIiwiY29zdHMiLCJsb3NzZXMiLCJyZXNvbHZlTG9zc2VzIiwiZ3JhbnRTYW5pdHlMb3NzIiwiZ2V0SFRNTCIsInNhbml0eUxvc3MiLCJzYW5pdHlDaGVjayIsImJ5cGFzc1JvbGxTYW4iLCJib29rSWQiLCJib29rIiwiQ29DN0Jvb2siLCJtb2RlIiwiaW5pdGlhbFJlYWRpbmciLCJzdHVkeSIsImZ1bGxTdHVkeSIsImNvbXBsZXRlRnVsbFN0dWR5IiwiY2hlY2tFeGhhdXN0aW9uIiwiZ3JhbnRGdWxsU3R1ZHkiLCJhY3Rvck15dGhvc1ZhbHVlIiwiZGV2ZWxvcG1lbnRzIiwibXl0aG9zRmluYWwiLCJnYWlucyIsImZpbmFsIiwiZ3JhbnRTa2lsbERldmVsb3BtZW50Iiwicm9sbFNhbml0eUxvc3MiLCJmdWxsU3R1ZGllcyIsIm90aGVycyIsInBhdHRlcm4iLCJleGlzdGluZ1NraWxsIiwic2hvd0RldmVsb3BtZW50c1RhYmxlIiwiZnJvbVJvbGxTdHJpbmciLCJncmFudEluaXRpYWxSZWFkaW5nIiwiZ3JhbnRTcGVsbExlYXJuaW5nIiwiQ29DN0RlY2FkZXJEaWUiLCJEaWNlVGVybSIsInRlcm1EYXRhIiwiQ29DN0FyY2hldHlwZVNoZWV0IiwiSXRlbVNoZWV0IiwiX29uSXRlbURlbGV0ZSIsImNvbGxlY3Rpb25OYW1lIiwiZ2V0RGF0YUZyb21Ecm9wRXZlbnQiLCJpdGVtSW5kZXgiLCJyZW1vdmVJdGVtIiwiX29uRHJhZ1N0YXJ0IiwiZHJhZ0RhdGEiLCJjaGFyYWNOYW1lIiwiY29yZUNoYXJhY3RlcmlzdGljc1N0cmluZyIsIm9yU3RyaW5nIiwiaXRlbVByb3BlcnRpZXMiLCJpc0tlZXBlciIsIkNvQzdCb29rU2hlZXQiLCJzcGVsbHNMZWFybmVkIiwiZXhoYXVzdGVkIiwic3R1ZHlDb21wbGV0ZWQiLCJzcGVsbExpc3RFbXB0eSIsImxlYXJuZWQiLCJhdHRlbXB0SW5pdGlhbFJlYWRpbmciLCJfb25EZWxldGUiLCJfb25TcGVsbERldGFpbCIsImF0dGVtcHRTcGVsbExlYXJuaW5nIiwiY2hhbmdlUHJvZ3Jlc3MiLCJtb2RpZnlPdGhlcnNHYWlucyIsInJlZG9GdWxsU3R1ZHkiLCJtb2RpZnlUeXBlIiwic3BlbGxEZXRhaWwiLCJhZGRTcGVsbHMiLCJwcmV2IiwiQ29DN0NoYXJhY3RlclNoZWV0IiwiQ29DN0NvbnRhaW5lclNoZWV0Iiwic2hlZXREYXRhIiwiYWxsb3dVbmxvY2siLCJzbGlkZVRvZ2dsZSIsIkNvQzdDaGFzZVNoZWV0Iiwic3RhcnRlZCIsIl90YWJzIiwicGFydGljaXBhbnRzIiwicHJleXMiLCJjaGFzZXJzIiwicHJleXNNaW5Nb3YiLCJhZGp1c3RlZE1vdiIsInByZXlzTWF4TW92IiwiY2hhc2Vyc01pbk1vdiIsImNoYXNlcnNNYXhNb3YiLCJmb3JFYWNoIiwidG9vU2xvdyIsImluY2x1ZGVJbkNoYXNlIiwiZmFzdGVzdCIsInNsb3dlc3QiLCJsb2NhdGlvbnMiLCJhbGxIYXZlVmFsaWRNb3YiLCJhY3RpdmVMb2NhdGlvbiIsInByZXZpb3VzTG9jYXRpb24iLCJuZXh0TG9jYXRpb24iLCJkYXRhTGlzdENoZWNrT3B0aW9ucyIsImFsbFNraWxsc0FuZENoYXJhY3RlcmlzdGljcyIsInBMaXN0IiwiX3BhcnRpY2lwYW50IiwiZnVsbE5hbWUiLCJJbnRsIiwiQ29sbGF0b3IiLCJjb21wYXJlIiwiaXNDaGFzZXIiLCJpc1ZhbGlkIiwiZmluZE1pbk1vdiIsImZpbmRNYXhNb3YiLCJwcm9jZXNzTG9jYXRpb25zIiwiZmlyc3QiLCJsb2NhdGlvbiIsImluaXQiLCJsYXN0IiwibCIsInNvcnRCeVJvbGVBbmREZXgiLCJpbml0VHJhY2siLCJzdGFydGluZ0xpbmUiLCJsb2NhdGlvbnNJbmRleFN0YXJ0IiwiaW5pdEluZGV4U3RhcnQiLCJsb2NhdGlvbnNMZW5ndGgiLCJzdGFydGluZ0luZGV4IiwiZ2VuZXJhdGVOZXdVdWlkIiwiY2hhc2VMb2NhdGlvbnMiLCJlbmQiLCJhY3RpdmVJbmRleCIsImV2ZXJ5IiwiaGFzVmFsaWRNb3YiLCJzcGVlZENoZWNrIiwiYWxsSGF2ZVNwZWVkUm9sbCIsIm1pbk1vdiIsIm1vdmVtZW50QWN0aW9uIiwidXBkYXRlUGFydGljaXBhbnRzIiwidXBkYXRlTG9jYXRpb25zTGlzdCIsImluY2x1ZGVFc2NhcGVkIiwidHJhY2siLCJzdGFydGluZ1JhbmdlIiwidW5pcXVlIiwiX29uRHJhZ0VudGVyUGFydGljaXBhbnQiLCJfb25EcmFnTGVhdmVQYXJ0aWNpcGFudCIsIl9vbkNoYW5nZVNpZGUiLCJfb25EZWxldGVQYXJ0aWNpcGFudCIsIl9vblJlc2V0Um9sbCIsIl9vbkRlbGV0ZURyaXZlciIsIl9vbkFkZFBhcnRpY2lwYW50IiwiX29uUm9sbFBhcnRpY2lwYW50IiwiX29uQnV0dG9uQ2xpY2siLCJfb25Mb2NhdGlvbkNsaWNrIiwiX29uT2JzdGFjbGVUeXBlQ2xpY2siLCJfb25PYnN0YWNsZVRvZ2dsZUNsaWNrIiwiRHJhZ0Ryb3AiLCJjYWxsYmFja3MiLCJkcm9wIiwiX29uRHJvcFBhcnRpY2lwYW50IiwicGVybWlzc2lvbnMiLCJkcmFnc3RhcnQiLCJfY2FuQ2hhc2VQYXJ0aWNpcGFudERyYWdTdGFydCIsIl9jYW5DaGFzZVBhcnRpY2lwYW50RHJhZ0Ryb3AiLCJfb25DaGFzZVBhcnRpY2lwYW50RHJhZ1N0YXJ0IiwiX29uQ2hhc2VQYXJ0aWNpcGFudERyYWdEcm9wIiwiZHJhZ292ZXIiLCJfb25EcmFnRW50ZXIiLCJfb25EcmFnTGVhdmUiLCJfZ2V0U3VibWl0RGF0YSIsImVkaXRvcnMiLCJvcmlnaW5hbCIsImNsZWFuZWQiLCJjbGVhbiIsImxvY2F0aW9uSW5kZXgiLCJvcmlnaW5hbExvY2F0aW9uIiwiZmxhdHRlbk9iamVjdCIsInN1YlR5cGUiLCJmaW5kUGFydGljaXBhbnRJbmRleCIsIm9yaWdpbmFsUG9zaXRpb24iLCJ0cmFja1Njcm9sbFBvc2l0aW9uIiwiZWxlbWVudENlbnRlclJlbGF0aXZlTGVmdCIsIm9mZnNldExlZnQiLCJjbGllbnRXaWR0aCIsInRyYWNrRWxlbWVudCIsInNjcm9sbFRvIiwiYmVoYXZpb3IiLCJmaW5kTG9jYXRpb25JbmRleCIsInVwZGF0ZWRMaXN0IiwicGFydGljaXBhbnRzRGF0YSIsIm9ic3RhY2xlIiwib2JzdGFjbGVEZXRhaWxzIiwiYmFycmllciIsImhhemFyZCIsInNjcm9sbExlZnQiLCJhcHBseSIsImN1dFRvVGhlQ2hhc2UiLCJzZWxlY3RvciIsImRyYWdFdmVudCIsImxvY2F0aW9uVXVpZCIsIm1vdmVQYXJ0aWNpcGFudCIsIl9vbkRyYWdPdmVyIiwiYWx0ZXJQYXJ0aWNpcGFudCIsImFkZFBhcnRpY2lwYW50IiwicGFydGljaXBhbnQiLCJyZWZTZXQiLCJyb2xsVXVpZCIsInBsYXllciIsInN0YW5kYnlUZXh0Iiwic3RhbmRieVJpZ2h0SWNvbiIsImlzQ2hhcmFjdGVyaXN0aWMiLCJyZWYiLCJyb2xsRGF0YVN0cmluZyIsInJvbGxEYXRhIiwiaGFzQWN0b3IiLCJjaGFzZXIiLCJ2ZWhpY2xlS2V5Iiwib2xkUGFydGljaXBhbnQiLCJ2ZWhpY3VsZSIsIm1ldGhvZCIsInBhcnRpY2lwYW50VXVpZCIsImRlc3RpbmF0aW9uIiwib2xkUGFydGljaXBhbnRzTGlzdCIsInRwIiwiZ2V0VHlwZSIsImhhc1ZlaGljbGUiLCJ2ZWhpY2xlIiwiaXNBY3RvciIsIl9kcml2ZXIiLCJfdmVoaWNsZSIsImhhc0RyaXZlciIsImRyaXZlciIsImhhc1ZhbGlkRGV4IiwibW92QWRqdXN0bWVudCIsImhhc0JvbnVzTW92IiwiaGFzTWFsdXNNb3YiLCJleGNsdWRlZCIsImhhc0NhcmQiLCJpbmxpbmVSb2xsIiwibW9kaWZpZXJDc3MiLCJoYXNNb2RpZmllciIsImNoYXJhY3RlcmlzaXRjIiwiZHJpdmVTa2lsbHMiLCJwaWxvdFNraWxscyIsImhhc09wdGlvbnMiLCJnYW1lSXRlbSIsIkNvQzdJdGVtU2hlZXRWMiIsIl9zaGVldFRhYiIsImhhc093bmVyIiwiaXNFbmFibGVkIiwiX2VyYXMiLCJlcmFzIiwiZXJhIiwiaXNTcGVjaWFsaXplZCIsImNhbk1vZGlmeVNwZWMiLCJfb25DbGlja1RvZ2dsZSIsIkNvQzdJdGVtU2hlZXQiLCJDb0M3T2NjdXBhdGlvblNoZWV0IiwiX29uR3JvdXBJdGVtRGVsZXRlIiwiX29uR3JvdXBDb250cm9sIiwib3B0aW9uYWxTa2lsbCIsIm9sIiwib3B0aW9ubmFsIiwibWFuZGF0b3J5IiwiY2FyYWMiLCJjYXJhY05hbWUiLCJpc0VtcHR5Iiwib2NjdXBhdGlvblBvaW50c1N0cmluZyIsIm9jY3VwYXRpb25Qcm9wZXJ0aWVzIiwiQ29DN1NldHVwU2hlZXQiLCJfb25BZGRCaW8iLCJfb25SZW1vdmVTZWN0aW9uIiwiZ2V0SXRlbSIsIm90aGVySXRlbXMiLCJpdGVtc0xpc3RFbXB0eSIsImludGVybmFsTmFtZSIsImNoZWNrZWQiLCJDb0M3U2tpbGxTaGVldCIsIkNvQzdTcGVsbFNoZWV0IiwiY2FzdCIsIkNvQzdTdGF0dXNTaGVldCIsInN0YXR1c1R5cGUiLCJDb0M3VGFsZW50U2hlZXQiLCJ0YWxlbnRUeXBlIiwiQ29DN1ZlaGljbGVTaGVldCIsImFybWVkIiwiZXhwYW5kZWQiLCJfb25BZGRBcm1vciIsIl9vblJlbW92ZUFybW9yIiwiX29uVG9nZ2xlRXhwYW5kIiwib2xkU2l6ZSIsImxvY2FsaXplZCIsIkNvQzdXZWFwb25TaGVldCIsImR0eXBlcyIsImNvbWJhdFNraWxsIiwiZmlyZWFybVNraWxscyIsImZpZ2h0aW5nU2tpbGxzIiwicHJpY2UiLCJfb25Qcm9wZXJ0eUNsaWNrIiwiZWxlbWVudE5hbWUiLCJjaGVja2JveENvbnRyb2wiLCJlbGVtZW50cyIsIm5hbWVkSXRlbSIsImxpc3RlbiIsImxvYWRUZW1wbGF0ZXMiLCJwcmVsb2FkSGFuZGxlYmFyc1RlbXBsYXRlcyIsInJlZ2lzdGVyIiwic2NvcGUiLCJvbkNoYW5nZSIsInJ1bGUiLCJfc2V0SW5pdGlhdGl2ZU9wdGlvbnMiLCJub2JvZHkiLCJldmVyeW9uZSIsImFsd2F5cyIsImNyZWF0aW9uIiwibmV2ZXIiLCJjb250YWluIiwiZGVjaW1hbHMiLCJDb21iYXQiLCJob29rcyIsInJlZ2lzdGVyU2V0dGluZ3MiLCJBY3RvcnMiLCJ1bnJlZ2lzdGVyU2hlZXQiLCJyZWdpc3RlclNoZWV0IiwidHlwZXMiLCJtYWtlRGVmYXVsdCIsIkl0ZW1zIiwiSGFuZGxlYmFycyIsInJlZ2lzdGVySGVscGVyIiwiYm91bmRzIiwiaGVpZ2h0VGV4dCIsIm91dGVySGVpZ2h0IiwiaGVpZ2h0VGlwIiwid2lkdGhUaXAiLCJvdXRlcldpZHRoIiwiY2xlYXJUaW1lb3V0IiwiQ29DN0hvb2tzIiwiZGlhbG9nIiwiZW50aXR5Q3JlYXRlU2VsZWN0VGFnIiwiZW50aXR5U29ydGVkTGlzdCIsInNob3dFeHBlcmltZW50YWwiLCJlbnRpdHlPcHRpb24iLCJ0ZXh0Q29udGVudCIsImNhcGl0YWxpemUiLCJoYXMiLCJlbXB0eSIsInNlY29uZCIsImdtY3JlYXRlbWVzc2FnZWFzIiwibWVsZWVUYXJnZXQiLCJnbXRyYWRlaXRlbXRvIiwiZGVsZXRlRW1iZWRkZWREb2N1bWVudHMiLCJfb25MZWZ0Q2xpY2siLCJzeXN0ZW1UYWIiLCJiZWZvcmUiLCJhZGREaWNlUHJlc2V0IiwiZm9udFNjYWxlIiwic2tpbGxDaGVja01hY3JvIiwid2VhcG9uQ2hlY2tNYWNybyIsImNoZWNrTWFjcm8iLCJyZW5kZXJDb21iYXRUcmFja2VyIiwiY29tbWFuZHMiLCJyZXMiLCJzb2NrZXRsaWIiLCJyZWdpc3RlclN5c3RlbSIsInRvTG9jYWxpemUiLCJlZmZlY3RJbmRleCIsInN0YXR1c0VmZmVjdHMiLCJ1bnNoaWZ0IiwiY3JlYXRlTWFjcm8iLCJjaGF0TGlzdGVuZXJzIiwicmVuZGVyTWVzc2FnZUhvb2siLCJkaWZmIiwib25VcGRhdGVDaGF0TWVzc2FnZSIsIl90YWJsZVNldHRpbmdzQ2hhbmdlZCIsImNoZWNrRm9yVXBkYXRlIiwiX29uQ2xpY2tJbmxpbmVSb2xsIiwidGlueU1DRSIsIlBsdWdpbk1hbmFnZXIiLCJvbkVkaXRvckRyb3AiLCJUaW55TUNFIiwicGx1Z2lucyIsInRhYmxlQ2hvaWNlIiwibm9uZSIsImJvdXRPZk1hZG5lc3NfU3VtbWFyeSIsImJvdXRPZk1hZG5lc3NfUmVhbFRpbWUiLCJzZXRTY3JvbGwiLCJvbkNsb3NlIiwiY2hhcmFjdGVyU2hlZXQiLCJQYXJzZUNoYXRFbnRyeSIsIlBhcnNlU2hlZXRDb250ZW50IiwicmVuZGVyQ2hhdE1lc3NhZ2VIb29rIiwiUGFyc2VNZXNzYWdlIiwiZ2V0QnV0dG9ucyIsInJlbmRlckNvbnRyb2xzIiwib25Ecm9wU29tZXRoaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==